function _get4(){return typeof Reflect<"u"&&Reflect.get?_get4=Reflect.get.bind():_get4=function(Ze,gn,Xt){var ir=_superPropBase(Ze,gn);if(!!ir){var ho=Object.getOwnPropertyDescriptor(ir,gn);return ho.get?ho.get.call(arguments.length<3?Ze:Xt):ho.value}},_get4.apply(this,arguments)}function _superPropBase(Ve,Ze){for(;!Object.prototype.hasOwnProperty.call(Ve,Ze)&&(Ve=_getPrototypeOf4(Ve),Ve!==null););return Ve}function _inherits3(Ve,Ze){if(typeof Ze!="function"&&Ze!==null)throw new TypeError("Super expression must either be null or a function");Ve.prototype=Object.create(Ze&&Ze.prototype,{constructor:{value:Ve,writable:!0,configurable:!0}}),Object.defineProperty(Ve,"prototype",{writable:!1}),Ze&&_setPrototypeOf4(Ve,Ze)}function _createSuper3(Ve){var Ze=_isNativeReflectConstruct3();return function(){var Xt=_getPrototypeOf4(Ve),ir;if(Ze){var ho=_getPrototypeOf4(this).constructor;ir=Reflect.construct(Xt,arguments,ho)}else ir=Xt.apply(this,arguments);return _possibleConstructorReturn3(this,ir)}}function _possibleConstructorReturn3(Ve,Ze){if(Ze&&(typeof Ze=="object"||typeof Ze=="function"))return Ze;if(Ze!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized3(Ve)}function _assertThisInitialized3(Ve){if(Ve===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ve}function _wrapNativeSuper(Ve){var Ze=typeof Map=="function"?new Map:void 0;return _wrapNativeSuper=function(Xt){if(Xt===null||!_isNativeFunction(Xt))return Xt;if(typeof Xt!="function")throw new TypeError("Super expression must either be null or a function");if(typeof Ze<"u"){if(Ze.has(Xt))return Ze.get(Xt);Ze.set(Xt,ir)}function ir(){return _construct(Xt,arguments,_getPrototypeOf4(this).constructor)}return ir.prototype=Object.create(Xt.prototype,{constructor:{value:ir,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf4(ir,Xt)},_wrapNativeSuper(Ve)}function _construct(Ve,Ze,gn){return _isNativeReflectConstruct3()?_construct=Reflect.construct.bind():_construct=function(ir,ho,A){var Un=[null];Un.push.apply(Un,ho);var Vh=Function.bind.apply(ir,Un),Pe=new Vh;return A&&_setPrototypeOf4(Pe,A.prototype),Pe},_construct.apply(null,arguments)}function _isNativeReflectConstruct3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _isNativeFunction(Ve){return Function.toString.call(Ve).indexOf("[native code]")!==-1}function _setPrototypeOf4(Ve,Ze){return _setPrototypeOf4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Xt,ir){return Xt.__proto__=ir,Xt},_setPrototypeOf4(Ve,Ze)}function _getPrototypeOf4(Ve){return _getPrototypeOf4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(gn){return gn.__proto__||Object.getPrototypeOf(gn)},_getPrototypeOf4(Ve)}function _classCallCheck3(Ve,Ze){if(!(Ve instanceof Ze))throw new TypeError("Cannot call a class as a function")}function _defineProperties(Ve,Ze){for(var gn=0;gn<Ze.length;gn++){var Xt=Ze[gn];Xt.enumerable=Xt.enumerable||!1,Xt.configurable=!0,"value"in Xt&&(Xt.writable=!0),Object.defineProperty(Ve,_toPropertyKey2(Xt.key),Xt)}}function _createClass3(Ve,Ze,gn){return Ze&&_defineProperties(Ve.prototype,Ze),gn&&_defineProperties(Ve,gn),Object.defineProperty(Ve,"prototype",{writable:!1}),Ve}function _toPropertyKey2(Ve){var Ze=_toPrimitive2(Ve,"string");return typeof Ze=="symbol"?Ze:String(Ze)}function _toPrimitive2(Ve,Ze){if(typeof Ve!="object"||Ve===null)return Ve;var gn=Ve[Symbol.toPrimitive];if(gn!==void 0){var Xt=gn.call(Ve,Ze||"default");if(typeof Xt!="object")return Xt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(Ze==="string"?String:Number)(Ve)}(function(Ve,Ze){typeof exports=="object"&&typeof module<"u"?Ze(exports,require("react"),require("react-dom"),require("pixi.js")):typeof define=="function"&&define.amd?define(["exports","react","react-dom","pixi.js"],Ze):(Ve=typeof globalThis<"u"?globalThis:Ve||self,Ze(Ve.hglib={},Ve.React,Ve.ReactDOM,Ve.PIXI))})(this,function(Ve,Ze,gn,Xt){"use strict";const ir=e=>e&&typeof e=="object"&&"default"in e?e:{default:e};function ho(e){if(e&&e.__esModule)return e;const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const n in e)if(n!=="default"){const i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:()=>e[n]})}}return t.default=e,Object.freeze(t)}const A=ir(Ze),Un=ir(gn),Vh=ho(Xt);var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function $T(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function fo(e){var t=e.default;if(typeof t=="function"){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var N={exports:{}},UT={exports:{}},on={};/** @license React v16.13.1
* react-is.production.min.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var PI;function bG(){if(PI)return on;PI=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,i=e?Symbol.for("react.fragment"):60107,r=e?Symbol.for("react.strict_mode"):60108,a=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,l=e?Symbol.for("react.forward_ref"):60112,f=e?Symbol.for("react.suspense"):60113,h=e?Symbol.for("react.suspense_list"):60120,d=e?Symbol.for("react.memo"):60115,p=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,g=e?Symbol.for("react.fundamental"):60117,v=e?Symbol.for("react.responder"):60118,E=e?Symbol.for("react.scope"):60119;function y(b){if(typeof b=="object"&&b!==null){var S=b.$$typeof;switch(S){case t:switch(b=b.type,b){case u:case c:case i:case a:case r:case f:return b;default:switch(b=b&&b.$$typeof,b){case s:case l:case p:case d:case o:return b;default:return S}}case n:return S}}}function T(b){return y(b)===c}return on.AsyncMode=u,on.ConcurrentMode=c,on.ContextConsumer=s,on.ContextProvider=o,on.Element=t,on.ForwardRef=l,on.Fragment=i,on.Lazy=p,on.Memo=d,on.Portal=n,on.Profiler=a,on.StrictMode=r,on.Suspense=f,on.isAsyncMode=function(b){return T(b)||y(b)===u},on.isConcurrentMode=T,on.isContextConsumer=function(b){return y(b)===s},on.isContextProvider=function(b){return y(b)===o},on.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},on.isForwardRef=function(b){return y(b)===l},on.isFragment=function(b){return y(b)===i},on.isLazy=function(b){return y(b)===p},on.isMemo=function(b){return y(b)===d},on.isPortal=function(b){return y(b)===n},on.isProfiler=function(b){return y(b)===a},on.isStrictMode=function(b){return y(b)===r},on.isSuspense=function(b){return y(b)===f},on.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===i||b===c||b===a||b===r||b===f||b===h||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===d||b.$$typeof===o||b.$$typeof===s||b.$$typeof===l||b.$$typeof===g||b.$$typeof===v||b.$$typeof===E||b.$$typeof===m)},on.typeOf=y,on}var RI={};/** @license React v16.13.1
* react-is.development.js
*
* Copyright (c) Facebook, Inc. and its affiliates.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/var NI;function bRe(){return NI||(NI=1),RI}var MI;function _G(){return MI||(MI=1,function(e){e.exports=bG()}(UT)),UT.exports}/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var GT,LI;function SG(){if(LI)return GT;LI=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function i(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function r(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var o={},s=0;s<10;s++)o["_"+String.fromCharCode(s)]=s;var u=Object.getOwnPropertyNames(o).map(function(l){return o[l]});if(u.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(l){c[l]=l}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}return GT=r()?Object.assign:function(a,o){for(var s,u=i(a),c,l=1;l<arguments.length;l++){s=Object(arguments[l]);for(var f in s)t.call(s,f)&&(u[f]=s[f]);if(e){c=e(s);for(var h=0;h<c.length;h++)n.call(s,c[h])&&(u[c[h]]=s[c[h]])}}return u},GT}var zT,BI;function FI(){if(BI)return zT;BI=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return zT=e,zT}var jT,HI;function AG(){return HI||(HI=1,jT=Function.call.bind(Object.prototype.hasOwnProperty)),jT}var VT,$I;function CG(){if($I)return VT;$I=1;var e=function(){};if(!1)var t,n,i;function r(a,o,s,u,c){if(!1){for(var l in a)if(i(a,l)){var f;try{if(typeof a[l]!="function")var h}catch(p){}if(f instanceof Error&&!(f.message in n))var d}}}return r.resetWarningCache=function(){},VT=r,VT}var YT,UI;function _Re(){if(UI)return YT;UI=1;var e=_G(),t=SG(),n=FI(),i=AG(),r=CG(),a=function(){};function o(){return null}return YT=function(s,u){var c=typeof Symbol=="function"&&Symbol.iterator,l="@@iterator";function f(Z){var he=Z&&(c&&Z[c]||Z[l]);if(typeof he=="function")return he}var h="<<anonymous>>",d={array:v("array"),bigint:v("bigint"),bool:v("boolean"),func:v("function"),number:v("number"),object:v("object"),string:v("string"),symbol:v("symbol"),any:E(),arrayOf:y,element:T(),elementType:b(),instanceOf:S,node:M(),objectOf:D,oneOf:w,oneOfType:R,shape:L,exact:$};function p(Z,he){return Z===he?Z!==0||1/Z===1/he:Z!==Z&&he!==he}function m(Z,he){this.message=Z,this.data=he&&typeof he=="object"?he:{},this.stack=""}m.prototype=Error.prototype;function g(Z){if(!1)var he,j;function H(K,ae,pe,we,Ee,xe,He){if(we=we||h,xe=xe||pe,He!==n){if(u){var ke=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw ke.name="Invariant Violation",ke}else if(!1)var Ye}return ae[pe]==null?K?ae[pe]===null?new m("The "+Ee+" `"+xe+"` is marked as required "+("in `"+we+"`, but its value is `null`.")):new m("The "+Ee+" `"+xe+"` is marked as required in "+("`"+we+"`, but its value is `undefined`.")):null:Z(ae,pe,we,Ee,xe)}var G=H.bind(null,!1);return G.isRequired=H.bind(null,!0),G}function v(Z){function he(j,H,G,K,ae,pe){var we=j[H],Ee=X(we);if(Ee!==Z){var xe=ee(we);return new m("Invalid "+K+" `"+ae+"` of type "+("`"+xe+"` supplied to `"+G+"`, expected ")+("`"+Z+"`."),{expectedType:Z})}return null}return g(he)}function E(){return g(o)}function y(Z){function he(j,H,G,K,ae){if(typeof Z!="function")return new m("Property `"+ae+"` of component `"+G+"` has invalid PropType notation inside arrayOf.");var pe=j[H];if(!Array.isArray(pe)){var we=X(pe);return new m("Invalid "+K+" `"+ae+"` of type "+("`"+we+"` supplied to `"+G+"`, expected an array."))}for(var Ee=0;Ee<pe.length;Ee++){var xe=Z(pe,Ee,G,K,ae+"["+Ee+"]",n);if(xe instanceof Error)return xe}return null}return g(he)}function T(){function Z(he,j,H,G,K){var ae=he[j];if(!s(ae)){var pe=X(ae);return new m("Invalid "+G+" `"+K+"` of type "+("`"+pe+"` supplied to `"+H+"`, expected a single ReactElement."))}return null}return g(Z)}function b(){function Z(he,j,H,G,K){var ae=he[j];if(!e.isValidElementType(ae)){var pe=X(ae);return new m("Invalid "+G+" `"+K+"` of type "+("`"+pe+"` supplied to `"+H+"`, expected a single ReactElement type."))}return null}return g(Z)}function S(Z){function he(j,H,G,K,ae){if(!(j[H]instanceof Z)){var pe=Z.name||h,we=fe(j[H]);return new m("Invalid "+K+" `"+ae+"` of type "+("`"+we+"` supplied to `"+G+"`, expected ")+("instance of `"+pe+"`."))}return null}return g(he)}function w(Z){if(!Array.isArray(Z))return o;function he(j,H,G,K,ae){for(var pe=j[H],we=0;we<Z.length;we++)if(p(pe,Z[we]))return null;var Ee=JSON.stringify(Z,function(He,ke){var Ye=ee(ke);return Ye==="symbol"?String(ke):ke});return new m("Invalid "+K+" `"+ae+"` of value `"+String(pe)+"` "+("supplied to `"+G+"`, expected one of "+Ee+"."))}return g(he)}function D(Z){function he(j,H,G,K,ae){if(typeof Z!="function")return new m("Property `"+ae+"` of component `"+G+"` has invalid PropType notation inside objectOf.");var pe=j[H],we=X(pe);if(we!=="object")return new m("Invalid "+K+" `"+ae+"` of type "+("`"+we+"` supplied to `"+G+"`, expected an object."));for(var Ee in pe)if(i(pe,Ee)){var xe=Z(pe,Ee,G,K,ae+"."+Ee,n);if(xe instanceof Error)return xe}return null}return g(he)}function R(Z){if(!Array.isArray(Z))return o;for(var he=0;he<Z.length;he++){var j=Z[he];if(typeof j!="function")return a("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+se(j)+" at index "+he+"."),o}function H(G,K,ae,pe,we){for(var Ee=[],xe=0;xe<Z.length;xe++){var He=Z[xe],ke=He(G,K,ae,pe,we,n);if(ke==null)return null;ke.data&&i(ke.data,"expectedType")&&Ee.push(ke.data.expectedType)}var Ye=Ee.length>0?", expected one of type ["+Ee.join(", ")+"]":"";return new m("Invalid "+pe+" `"+we+"` supplied to "+("`"+ae+"`"+Ye+"."))}return g(H)}function M(){function Z(he,j,H,G,K){return P(he[j])?null:new m("Invalid "+G+" `"+K+"` supplied to "+("`"+H+"`, expected a ReactNode."))}return g(Z)}function k(Z,he,j,H,G){return new m((Z||"React class")+": "+he+" type `"+j+"."+H+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+G+"`.")}function L(Z){function he(j,H,G,K,ae){var pe=j[H],we=X(pe);if(we!=="object")return new m("Invalid "+K+" `"+ae+"` of type `"+we+"` "+("supplied to `"+G+"`, expected `object`."));for(var Ee in Z){var xe=Z[Ee];if(typeof xe!="function")return k(G,K,ae,Ee,ee(xe));var He=xe(pe,Ee,G,K,ae+"."+Ee,n);if(He)return He}return null}return g(he)}function $(Z){function he(j,H,G,K,ae){var pe=j[H],we=X(pe);if(we!=="object")return new m("Invalid "+K+" `"+ae+"` of type `"+we+"` "+("supplied to `"+G+"`, expected `object`."));var Ee=t({},j[H],Z);for(var xe in Ee){var He=Z[xe];if(i(Z,xe)&&typeof He!="function")return k(G,K,ae,xe,ee(He));if(!He)return new m("Invalid "+K+" `"+ae+"` key `"+xe+"` supplied to `"+G+"`.\nBad object: "+JSON.stringify(j[H],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(Z),null,"  "));var ke=He(pe,xe,G,K,ae+"."+xe,n);if(ke)return ke}return null}return g(he)}function P(Z){switch(typeof Z){case"number":case"string":case"undefined":return!0;case"boolean":return!Z;case"object":if(Array.isArray(Z))return Z.every(P);if(Z===null||s(Z))return!0;var he=f(Z);if(he){var j=he.call(Z),H;if(he!==Z.entries){for(;!(H=j.next()).done;)if(!P(H.value))return!1}else for(;!(H=j.next()).done;){var G=H.value;if(G&&!P(G[1]))return!1}}else return!1;return!0;default:return!1}}function B(Z,he){return Z==="symbol"?!0:he?he["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&he instanceof Symbol:!1}function X(Z){var he=typeof Z;return Array.isArray(Z)?"array":Z instanceof RegExp?"object":B(he,Z)?"symbol":he}function ee(Z){if(typeof Z>"u"||Z===null)return""+Z;var he=X(Z);if(he==="object"){if(Z instanceof Date)return"date";if(Z instanceof RegExp)return"regexp"}return he}function se(Z){var he=ee(Z);switch(he){case"array":case"object":return"an "+he;case"boolean":case"date":case"regexp":return"a "+he;default:return he}}function fe(Z){return!Z.constructor||!Z.constructor.name?h:Z.constructor.name}return d.checkPropTypes=r,d.resetWarningCache=r.resetWarningCache,d.PropTypes=d,d},YT}var WT,GI;function DG(){if(GI)return WT;GI=1;var e=FI();function t(){}function n(){}return n.resetWarningCache=t,WT=function(){function i(o,s,u,c,l,f){if(f!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},WT}if(!1)var SRe,ARe;else N.exports=DG()();var qT="http://www.w3.org/1999/xhtml";const XT={svg:"http://www.w3.org/2000/svg",xhtml:qT,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vs(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),XT.hasOwnProperty(t)?{space:XT[t],local:e}:e}function wG(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===qT&&t.documentElement.namespaceURI===qT?t.createElement(e):t.createElementNS(n,e)}}function IG(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fm(e){var t=Vs(e);return(t.local?IG:wG)(t)}function kG(){}function Yh(e){return e==null?kG:function(){return this.querySelector(e)}}function OG(e){typeof e!="function"&&(e=Yh(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a=t[r],o=a.length,s=i[r]=new Array(o),u,c,l=0;l<o;++l)(u=a[l])&&(c=e.call(u,u.__data__,l,a))&&("__data__"in u&&(c.__data__=u.__data__),s[l]=c);return new _r(i,this._parents)}function KT(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function xG(){return[]}function dm(e){return e==null?xG:function(){return this.querySelectorAll(e)}}function PG(e){return function(){var t=e.apply(this,arguments);return t==null?[]:KT(t)}}function RG(e){typeof e=="function"?e=PG(e):e=dm(e);for(var t=this._groups,n=t.length,i=[],r=[],a=0;a<n;++a)for(var o=t[a],s=o.length,u,c=0;c<s;++c)(u=o[c])&&(i.push(e.call(u,u.__data__,c,o)),r.push(u));return new _r(i,r)}function pm(e){return function(){return this.matches(e)}}function zI(e){return function(t){return t.matches(e)}}var NG=Array.prototype.find;function MG(e){return function(){return NG.call(this.children,e)}}function LG(){return this.firstElementChild}function BG(e){return this.select(e==null?LG:MG(typeof e=="function"?e:zI(e)))}var FG=Array.prototype.filter;function HG(){return this.children}function $G(e){return function(){return FG.call(this.children,e)}}function UG(e){return this.selectAll(e==null?HG:$G(typeof e=="function"?e:zI(e)))}function GG(e){typeof e!="function"&&(e=pm(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a=t[r],o=a.length,s=i[r]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new _r(i,this._parents)}function jI(e){return new Array(e.length)}function zG(){return new _r(this._enter||this._groups.map(jI),this._parents)}function mm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mm.prototype={constructor:mm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function jG(e){return function(){return e}}function VG(e,t,n,i,r,a){for(var o=0,s,u=t.length,c=a.length;o<c;++o)(s=t[o])?(s.__data__=a[o],i[o]=s):n[o]=new mm(e,a[o]);for(;o<u;++o)(s=t[o])&&(r[o]=s)}function YG(e,t,n,i,r,a,o){var s,u,c=new Map,l=t.length,f=a.length,h=new Array(l),d;for(s=0;s<l;++s)(u=t[s])&&(h[s]=d=o.call(u,u.__data__,s,t)+"",c.has(d)?r[s]=u:c.set(d,u));for(s=0;s<f;++s)d=o.call(e,a[s],s,a)+"",(u=c.get(d))?(i[s]=u,u.__data__=a[s],c.delete(d)):n[s]=new mm(e,a[s]);for(s=0;s<l;++s)(u=t[s])&&c.get(h[s])===u&&(r[s]=u)}function WG(e){return e.__data__}function qG(e,t){if(!arguments.length)return Array.from(this,WG);var n=t?YG:VG,i=this._parents,r=this._groups;typeof e!="function"&&(e=jG(e));for(var a=r.length,o=new Array(a),s=new Array(a),u=new Array(a),c=0;c<a;++c){var l=i[c],f=r[c],h=f.length,d=KT(e.call(l,l&&l.__data__,c,i)),p=d.length,m=s[c]=new Array(p),g=o[c]=new Array(p),v=u[c]=new Array(h);n(l,f,m,g,v,d,t);for(var E=0,y=0,T,b;E<p;++E)if(T=m[E]){for(E>=y&&(y=E+1);!(b=g[y])&&++y<p;);T._next=b||null}}return o=new _r(o,i),o._enter=s,o._exit=u,o}function XG(){return new _r(this._exit||this._groups.map(jI),this._parents)}function KG(e,t,n){var i=this.enter(),r=this,a=this.exit();return i=typeof e=="function"?e(i):i.append(e+""),t!=null&&(r=t(r)),n==null?a.remove():n(a),i&&r?i.merge(r).order():r}function ZG(e){if(!(e instanceof _r))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,i=t.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var u=t[s],c=n[s],l=u.length,f=o[s]=new Array(l),h,d=0;d<l;++d)(h=u[d]||c[d])&&(f[d]=h);for(;s<i;++s)o[s]=t[s];return new _r(o,this._parents)}function QG(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],r=i.length-1,a=i[r],o;--r>=0;)(o=i[r])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function JG(e){e||(e=e7);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,i=n.length,r=new Array(i),a=0;a<i;++a){for(var o=n[a],s=o.length,u=r[a]=new Array(s),c,l=0;l<s;++l)(c=o[l])&&(u[l]=c);u.sort(t)}return new _r(r,this._parents).order()}function e7(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function t7(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function n7(){return Array.from(this)}function r7(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,a=i.length;r<a;++r){var o=i[r];if(o)return o}return null}function i7(){let e=0;for(const t of this)++e;return e}function a7(){return!this.node()}function o7(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var r=t[n],a=0,o=r.length,s;a<o;++a)(s=r[a])&&e.call(s,s.__data__,a,r);return this}function s7(e){return function(){this.removeAttribute(e)}}function l7(e){return function(){this.removeAttributeNS(e.space,e.local)}}function u7(e,t){return function(){this.setAttribute(e,t)}}function c7(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function h7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function f7(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function d7(e,t){var n=Vs(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?l7:s7:typeof t=="function"?n.local?f7:h7:n.local?c7:u7)(n,t))}function ZT(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function p7(e){return function(){this.style.removeProperty(e)}}function m7(e,t,n){return function(){this.style.setProperty(e,t,n)}}function g7(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function v7(e,t,n){return arguments.length>1?this.each((t==null?p7:typeof t=="function"?g7:m7)(e,t,n??"")):Fi(this.node(),e)}function Fi(e,t){return e.style.getPropertyValue(t)||ZT(e).getComputedStyle(e,null).getPropertyValue(t)}function y7(e){return function(){delete this[e]}}function T7(e,t){return function(){this[e]=t}}function E7(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function b7(e,t){return arguments.length>1?this.each((t==null?y7:typeof t=="function"?E7:T7)(e,t)):this.node()[e]}function VI(e){return e.trim().split(/^|\s+/)}function QT(e){return e.classList||new YI(e)}function YI(e){this._node=e,this._names=VI(e.getAttribute("class")||"")}YI.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function WI(e,t){for(var n=QT(e),i=-1,r=t.length;++i<r;)n.add(t[i])}function qI(e,t){for(var n=QT(e),i=-1,r=t.length;++i<r;)n.remove(t[i])}function _7(e){return function(){WI(this,e)}}function S7(e){return function(){qI(this,e)}}function A7(e,t){return function(){(t.apply(this,arguments)?WI:qI)(this,e)}}function C7(e,t){var n=VI(e+"");if(arguments.length<2){for(var i=QT(this.node()),r=-1,a=n.length;++r<a;)if(!i.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?A7:t?_7:S7)(n,t))}function D7(){this.textContent=""}function w7(e){return function(){this.textContent=e}}function I7(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function k7(e){return arguments.length?this.each(e==null?D7:(typeof e=="function"?I7:w7)(e)):this.node().textContent}function O7(){this.innerHTML=""}function x7(e){return function(){this.innerHTML=e}}function P7(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function R7(e){return arguments.length?this.each(e==null?O7:(typeof e=="function"?P7:x7)(e)):this.node().innerHTML}function N7(){this.nextSibling&&this.parentNode.appendChild(this)}function M7(){return this.each(N7)}function L7(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function B7(){return this.each(L7)}function F7(e){var t=typeof e=="function"?e:fm(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function H7(){return null}function $7(e,t){var n=typeof e=="function"?e:fm(e),i=t==null?H7:typeof t=="function"?t:Yh(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function U7(){var e=this.parentNode;e&&e.removeChild(this)}function G7(){return this.each(U7)}function z7(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function j7(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function V7(e){return this.select(e?j7:z7)}function Y7(e){return arguments.length?this.property("__data__",e):this.node().__data__}function W7(e){return function(t){e.call(this,t,this.__data__)}}function q7(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function X7(e){return function(){var t=this.__on;if(!!t){for(var n=0,i=-1,r=t.length,a;n<r;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++i]=a;++i?t.length=i:delete this.__on}}}function K7(e,t,n){return function(){var i=this.__on,r,a=W7(t);if(i){for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),r.value=t;return}}this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(r):this.__on=[r]}}function Z7(e,t,n){var i=q7(e+""),r,a=i.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var u=0,c=s.length,l;u<c;++u)for(r=0,l=s[u];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value}return}for(s=t?K7:X7,r=0;r<a;++r)this.each(s(i[r],t,n));return this}function XI(e,t,n){var i=ZT(e),r=i.CustomEvent;typeof r=="function"?r=new r(t,n):(r=i.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Q7(e,t){return function(){return XI(this,e,t)}}function J7(e,t){return function(){return XI(this,e,t.apply(this,arguments))}}function ez(e,t){return this.each((typeof t=="function"?J7:Q7)(e,t))}function*tz(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],r=0,a=i.length,o;r<a;++r)(o=i[r])&&(yield o)}var JT=[null];function _r(e,t){this._groups=e,this._parents=t}function ia(){return new _r([[document.documentElement]],JT)}function nz(){return this}_r.prototype=ia.prototype={constructor:_r,select:OG,selectAll:RG,selectChild:BG,selectChildren:UG,filter:GG,data:qG,enter:zG,exit:XG,join:KG,merge:ZG,selection:nz,order:QG,sort:JG,call:t7,nodes:n7,node:r7,size:i7,empty:a7,each:o7,attr:d7,style:v7,property:b7,classed:C7,text:k7,html:R7,raise:M7,lower:B7,append:F7,insert:$7,remove:G7,clone:V7,datum:Y7,on:Z7,dispatch:ez,[Symbol.iterator]:tz};function xt(e){return typeof e=="string"?new _r([[document.querySelector(e)]],[document.documentElement]):new _r([[e]],JT)}function rz(e){return xt(fm(e).call(document.documentElement))}var iz=0;function KI(){return new eE}function eE(){this._="@"+(++iz).toString(36)}eE.prototype=KI.prototype={constructor:eE,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};function ZI(e){let t;for(;t=e.sourceEvent;)e=t;return e}function sn(e,t){if(e=ZI(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}function az(e,t){return e.target&&(e=ZI(e),t===void 0&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,n=>sn(n,t))}function oz(e){return typeof e=="string"?new _r([document.querySelectorAll(e)],[document.documentElement]):new _r([e==null?[]:KT(e)],JT)}const sz=Object.freeze(Object.defineProperty({__proto__:null,create:rz,creator:fm,local:KI,matcher:pm,namespace:Vs,namespaces:XT,pointer:sn,pointers:az,select:xt,selectAll:oz,selection:ia,selector:Yh,selectorAll:dm,style:Fi,window:ZT},Symbol.toStringTag,{value:"Module"}));function Yn(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function hu(e){let t=e,n=e;e.length===1&&(t=(o,s)=>e(o)-s,n=lz(e));function i(o,s,u,c){for(u==null&&(u=0),c==null&&(c=o.length);u<c;){const l=u+c>>>1;n(o[l],s)<0?u=l+1:c=l}return u}function r(o,s,u,c){for(u==null&&(u=0),c==null&&(c=o.length);u<c;){const l=u+c>>>1;n(o[l],s)>0?c=l:u=l+1}return u}function a(o,s,u,c){u==null&&(u=0),c==null&&(c=o.length);const l=i(o,s,u,c-1);return l>u&&t(o[l-1],s)>-t(o[l],s)?l-1:l}return{left:i,center:a,right:r}}function lz(e){return(t,n)=>Yn(e(t),n)}function QI(e){return e===null?NaN:+e}function*uz(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const JI=hu(Yn),ek=JI.right,cz=JI.left,hz=hu(QI).center,Ys=ek;function gm(e,t){let n=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&++n;else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(r=+r)>=r&&++n}return n}function fz(e){return e.length|0}function dz(e){return!(e>0)}function pz(e){return typeof e!="object"||"length"in e?e:Array.from(e)}function mz(e){return t=>e(...t)}function gz(...e){const t=typeof e[e.length-1]=="function"&&mz(e.pop());e=e.map(pz);const n=e.map(fz),i=e.length-1,r=new Array(i+1).fill(0),a=[];if(i<0||n.some(dz))return a;for(;;){a.push(r.map((s,u)=>e[u][s]));let o=i;for(;++r[o]===n[o];){if(o===0)return t?a.map(t):a;r[o--]=0}}}function vz(e,t){var n=0,i=0;return Float64Array.from(e,t===void 0?r=>n+=+r||0:r=>n+=+t(r,i++,e)||0)}function yz(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function tE(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r));else{let o=-1;for(let s of e)(s=t(s,++o,e))!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r))}if(n>1)return a/(n-1)}function nE(e,t){const n=tE(e,t);return n&&Math.sqrt(n)}function vm(e,t){let n,i;if(t===void 0)for(const r of e)r!=null&&(n===void 0?r>=r&&(n=i=r):(n>r&&(n=r),i<r&&(i=r)));else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(n===void 0?a>=a&&(n=i=a):(n>a&&(n=a),i<a&&(i=a)))}return[n,i]}let Xn=function(){function e(){_classCallCheck3(this,e),this._partials=new Float64Array(32),this._n=0}return _createClass3(e,[{key:"add",value:function(n){const i=this._partials;let r=0;for(let a=0;a<this._n&&a<32;a++){const o=i[a],s=n+o,u=Math.abs(n)<Math.abs(o)?n-(s-o):o-(s-n);u&&(i[r++]=u),n=s}return i[r]=n,this._n=r+1,this}},{key:"valueOf",value:function(){const n=this._partials;let i=this._n,r,a,o,s=0;if(i>0){for(s=n[--i];i>0&&(r=s,a=n[--i],s=r+a,o=a-(s-r),!o););i>0&&(o<0&&n[i-1]<0||o>0&&n[i-1]>0)&&(a=o*2,r=s+a,a==r-s&&(s=r))}return s}}]),e}();function Tz(e,t){const n=new Xn;if(t===void 0)for(let i of e)(i=+i)&&n.add(i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&n.add(r)}return+n}function Ez(e,t){const n=new Xn;let i=-1;return Float64Array.from(e,t===void 0?r=>n.add(+r||0):r=>n.add(+t(r,++i,e)||0))}let ym=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r=rk){var a;if(_classCallCheck3(this,n),a=t.call(this),Object.defineProperties(_assertThisInitialized3(a),{_intern:{value:new Map},_key:{value:r}}),i!=null)for(const[o,s]of i)a.set(o,s);return a}return _createClass3(n,[{key:"get",value:function(r){return _get4(_getPrototypeOf4(n.prototype),"get",this).call(this,rE(this,r))}},{key:"has",value:function(r){return _get4(_getPrototypeOf4(n.prototype),"has",this).call(this,rE(this,r))}},{key:"set",value:function(r,a){return _get4(_getPrototypeOf4(n.prototype),"set",this).call(this,tk(this,r),a)}},{key:"delete",value:function(r){return _get4(_getPrototypeOf4(n.prototype),"delete",this).call(this,nk(this,r))}}]),n}(_wrapNativeSuper(Map)),bz=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r=rk){var a;if(_classCallCheck3(this,n),a=t.call(this),Object.defineProperties(_assertThisInitialized3(a),{_intern:{value:new Map},_key:{value:r}}),i!=null)for(const o of i)a.add(o);return a}return _createClass3(n,[{key:"has",value:function(r){return _get4(_getPrototypeOf4(n.prototype),"has",this).call(this,rE(this,r))}},{key:"add",value:function(r){return _get4(_getPrototypeOf4(n.prototype),"add",this).call(this,tk(this,r))}},{key:"delete",value:function(r){return _get4(_getPrototypeOf4(n.prototype),"delete",this).call(this,nk(this,r))}}]),n}(_wrapNativeSuper(Set));function rE({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function tk({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function nk({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(n),e.delete(i)),n}function rk(e){return e!==null&&typeof e=="object"?e.valueOf():e}function fu(e){return e}function ik(e,...t){return du(e,fu,fu,t)}function _z(e,...t){return du(e,Array.from,fu,t)}function ak(e,t,...n){return du(e,fu,t,n)}function Sz(e,t,...n){return du(e,Array.from,t,n)}function Az(e,...t){return du(e,fu,ok,t)}function Cz(e,...t){return du(e,Array.from,ok,t)}function ok(e){if(e.length!==1)throw new Error("duplicate key");return e[0]}function du(e,t,n,i){return function r(a,o){if(o>=i.length)return n(a);const s=new ym,u=i[o++];let c=-1;for(const l of a){const f=u(l,++c,a),h=s.get(f);h?h.push(l):s.set(f,[l])}for(const[l,f]of s)s.set(l,r(f,o));return t(s)}(e,0)}function sk(e,t){return Array.from(t,n=>e[n])}function iE(e,...t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");e=Array.from(e);let[n=Yn]=t;if(n.length===1||t.length>1){const i=Uint32Array.from(e,(r,a)=>a);return t.length>1?(t=t.map(r=>e.map(r)),i.sort((r,a)=>{for(const o of t){const s=Yn(o[r],o[a]);if(s)return s}})):(n=e.map(n),i.sort((r,a)=>Yn(n[r],n[a]))),sk(e,i)}return e.sort(n)}function Dz(e,t,n){return(t.length===1?iE(ak(e,t,n),([i,r],[a,o])=>Yn(r,o)||Yn(i,a)):iE(ik(e,n),([i,r],[a,o])=>t(r,o)||Yn(i,a))).map(([i])=>i)}var wz=Array.prototype,Iz=wz.slice;function Tm(e){return function(){return e}}var aE=Math.sqrt(50),oE=Math.sqrt(10),sE=Math.sqrt(2);function Ws(e,t,n){var i,r=-1,a,o,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(a=e,e=t,t=a),(s=Wh(e,t,n))===0||!isFinite(s))return[];if(s>0){let u=Math.round(e/s),c=Math.round(t/s);for(u*s<e&&++u,c*s>t&&--c,o=new Array(a=c-u+1);++r<a;)o[r]=(u+r)*s}else{s=-s;let u=Math.round(e*s),c=Math.round(t*s);for(u/s<e&&++u,c/s>t&&--c,o=new Array(a=c-u+1);++r<a;)o[r]=(u+r)/s}return i&&o.reverse(),o}function Wh(e,t,n){var i=(t-e)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,r);return r>=0?(a>=aE?10:a>=oE?5:a>=sE?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(a>=aE?10:a>=oE?5:a>=sE?2:1)}function Em(e,t,n){var i=Math.abs(t-e)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/r;return a>=aE?r*=10:a>=oE?r*=5:a>=sE&&(r*=2),t<e?-r:r}function lk(e,t,n){let i;for(;;){const r=Wh(e,t,n);if(r===i||r===0||!isFinite(r))return[e,t];r>0?(e=Math.floor(e/r)*r,t=Math.ceil(t/r)*r):r<0&&(e=Math.ceil(e*r)/r,t=Math.floor(t*r)/r),i=r}}function uk(e){return Math.ceil(Math.log(gm(e))/Math.LN2)+1}function ck(){var e=fu,t=vm,n=uk;function i(r){Array.isArray(r)||(r=Array.from(r));var a,o=r.length,s,u=new Array(o);for(a=0;a<o;++a)u[a]=e(r[a],a,r);var c=t(u),l=c[0],f=c[1],h=n(u,l,f);if(!Array.isArray(h)){const g=f,v=+h;if(t===vm&&([l,f]=lk(l,f,v)),h=Ws(l,f,v),h[h.length-1]>=f)if(g>=f&&t===vm){const E=Wh(l,f,v);isFinite(E)&&(E>0?f=(Math.floor(f/E)+1)*E:E<0&&(f=(Math.ceil(f*-E)+1)/-E))}else h.pop()}for(var d=h.length;h[0]<=l;)h.shift(),--d;for(;h[d-1]>f;)h.pop(),--d;var p=new Array(d+1),m;for(a=0;a<=d;++a)m=p[a]=[],m.x0=a>0?h[a-1]:l,m.x1=a<d?h[a]:f;for(a=0;a<o;++a)s=u[a],l<=s&&s<=f&&p[Ys(h,s,0,d)].push(r[a]);return p}return i.value=function(r){return arguments.length?(e=typeof r=="function"?r:Tm(r),i):e},i.domain=function(r){return arguments.length?(t=typeof r=="function"?r:Tm([r[0],r[1]]),i):t},i.thresholds=function(r){return arguments.length?(n=typeof r=="function"?r:Array.isArray(r)?Tm(Iz.call(r)):Tm(r),i):n},i}function lE(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function bm(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function uE(e,t,n=0,i=e.length-1,r=Yn){for(;i>n;){if(i-n>600){const u=i-n+1,c=t-n+1,l=Math.log(u),f=.5*Math.exp(2*l/3),h=.5*Math.sqrt(l*f*(u-f)/u)*(c-u/2<0?-1:1),d=Math.max(n,Math.floor(t-c*f/u+h)),p=Math.min(i,Math.floor(t+(u-c)*f/u+h));uE(e,t,d,p,r)}const a=e[t];let o=n,s=i;for(qh(e,n,t),r(e[i],a)>0&&qh(e,n,i);o<s;){for(qh(e,o,s),++o,--s;r(e[o],a)<0;)++o;for(;r(e[s],a)>0;)--s}r(e[n],a)===0?qh(e,n,s):(++s,qh(e,s,i)),s<=t&&(n=s+1),t<=s&&(i=s-1)}return e}function qh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Xh(e,t,n){if(e=Float64Array.from(uz(e,n)),!!(i=e.length)){if((t=+t)<=0||i<2)return bm(e);if(t>=1)return lE(e);var i,r=(i-1)*t,a=Math.floor(r),o=lE(uE(e,a).subarray(0,a+1)),s=bm(e.subarray(a+1));return o+(s-o)*(r-a)}}function hk(e,t,n=QI){if(!!(i=e.length)){if((t=+t)<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(r-a)}}function kz(e,t,n){return Math.ceil((n-t)/(2*(Xh(e,.75)-Xh(e,.25))*Math.pow(gm(e),-1/3)))}function Oz(e,t,n){return Math.ceil((n-t)/(3.5*nE(e)*Math.pow(gm(e),-1/3)))}function fk(e,t){let n,i=-1,r=-1;if(t===void 0)for(const a of e)++r,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,i=r);else for(let a of e)(a=t(a,++r,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,i=r);return i}function cE(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function hE(e,t){return Xh(e,.5,t)}function*xz(e){for(const t of e)yield*t}function fE(e){return Array.from(xz(e))}function dk(e,t){let n,i=-1,r=-1;if(t===void 0)for(const a of e)++r,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,i=r);else for(let a of e)(a=t(a,++r,e))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,i=r);return i}function Pz(e,t=Rz){const n=[];let i,r=!1;for(const a of e)r&&n.push(t(i,a)),i=a,r=!0;return n}function Rz(e,t){return[e,t]}function Ur(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function Nz(e,t=Yn){let n,i=!1;if(t.length===1){let r;for(const a of e){const o=t(a);(i?Yn(o,r)<0:Yn(o,o)===0)&&(n=a,r=o,i=!0)}}else for(const r of e)(i?t(r,n)<0:t(r,r)===0)&&(n=r,i=!0);return n}function pk(e,t=Yn){if(t.length===1)return dk(e,t);let n,i=-1,r=-1;for(const a of e)++r,(i<0?t(a,a)===0:t(a,n)<0)&&(n=a,i=r);return i}function Mz(e,t=Yn){let n,i=!1;if(t.length===1){let r;for(const a of e){const o=t(a);(i?Yn(o,r)>0:Yn(o,o)===0)&&(n=a,r=o,i=!0)}}else for(const r of e)(i?t(r,n)>0:t(r,r)===0)&&(n=r,i=!0);return n}function Lz(e,t=Yn){if(t.length===1)return fk(e,t);let n,i=-1,r=-1;for(const a of e)++r,(i<0?t(a,a)===0:t(a,n)>0)&&(n=a,i=r);return i}function Bz(e,t){const n=pk(e,t);return n<0?void 0:n}const Fz=mk(Math.random);function mk(e){return function(n,i=0,r=n.length){let a=r-(i=+i);for(;a;){const o=e()*a--|0,s=n[a+i];n[a+i]=n[o+i],n[o+i]=s}return n}}function gk(e,t){let n=0;if(t===void 0)for(let i of e)(i=+i)&&(n+=i);else{let i=-1;for(let r of e)(r=+t(r,++i,e))&&(n+=r)}return n}function vk(e){if(!(a=e.length))return[];for(var t=-1,n=bm(e,Hz),i=new Array(n);++t<n;)for(var r=-1,a,o=i[t]=new Array(a);++r<a;)o[r]=e[r][t];return i}function Hz(e){return e.length}function $z(){return vk(arguments)}function Uz(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let n=-1;for(const i of e)if(!t(i,++n,e))return!1;return!0}function Gz(e,t){if(typeof t!="function")throw new TypeError("test is not a function");let n=-1;for(const i of e)if(t(i,++n,e))return!0;return!1}function zz(e,t){if(typeof t!="function")throw new TypeError("test is not a function");const n=[];let i=-1;for(const r of e)t(r,++i,e)&&n.push(r);return n}function jz(e,t){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");if(typeof t!="function")throw new TypeError("mapper is not a function");return Array.from(e,(n,i)=>t(n,i,e))}function Vz(e,t,n){if(typeof t!="function")throw new TypeError("reducer is not a function");const i=e[Symbol.iterator]();let r,a,o=-1;if(arguments.length<3){if({done:r,value:n}=i.next(),r)return;++o}for(;{done:r,value:a}=i.next(),!r;)n=t(n,a,++o,e);return n}function Yz(e){if(typeof e[Symbol.iterator]!="function")throw new TypeError("values is not iterable");return Array.from(e).reverse()}function Wz(e,...t){e=new Set(e);for(const n of t)for(const i of n)e.delete(i);return e}function qz(e,t){const n=t[Symbol.iterator](),i=new Set;for(const r of e){if(i.has(r))return!1;let a,o;for(;({value:a,done:o}=n.next())&&!o;){if(Object.is(r,a))return!1;i.add(a)}}return!0}function Xz(e){return e instanceof Set?e:new Set(e)}function Kz(e,...t){e=new Set(e),t=t.map(Xz);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function yk(e,t){const n=e[Symbol.iterator](),i=new Set;for(const r of t){if(i.has(r))continue;let a,o;for(;{value:a,done:o}=n.next();){if(o)return!1;if(i.add(a),Object.is(r,a))break}}return!0}function Zz(e,t){return yk(t,e)}function Qz(...e){const t=new Set;for(const n of e)for(const i of n)t.add(i);return t}const Jz=Object.freeze(Object.defineProperty({__proto__:null,bisect:Ys,bisectRight:ek,bisectLeft:cz,bisectCenter:hz,ascending:Yn,bisector:hu,count:gm,cross:gz,cumsum:vz,descending:yz,deviation:nE,extent:vm,Adder:Xn,fsum:Tz,fcumsum:Ez,group:ik,groups:_z,index:Az,indexes:Cz,rollup:ak,rollups:Sz,groupSort:Dz,bin:ck,histogram:ck,thresholdFreedmanDiaconis:kz,thresholdScott:Oz,thresholdSturges:uk,max:lE,maxIndex:fk,mean:cE,median:hE,merge:fE,min:bm,minIndex:dk,nice:lk,pairs:Pz,permute:sk,quantile:Xh,quantileSorted:hk,quickselect:uE,range:Ur,least:Nz,leastIndex:pk,greatest:Mz,greatestIndex:Lz,scan:Bz,shuffle:Fz,shuffler:mk,sum:gk,ticks:Ws,tickIncrement:Wh,tickStep:Em,transpose:vk,variance:tE,zip:$z,every:Uz,some:Gz,filter:zz,map:jz,reduce:Vz,reverse:Yz,sort:iE,difference:Wz,disjoint:qz,intersection:Kz,subset:Zz,superset:yk,union:Qz,InternMap:ym,InternSet:bz},Symbol.toStringTag,{value:"Module"}));function Hi(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function po(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const dE=Symbol("implicit");function pE(){var e=new ym,t=[],n=[],i=dE;function r(a){let o=e.get(a);if(o===void 0){if(i!==dE)return i;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new ym;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return pE(t,n).unknown(i)},Hi.apply(r,arguments),r}function Kh(){var e=pE().unknown(void 0),t=e.domain,n=e.range,i=0,r=1,a,o,s=!1,u=0,c=0,l=.5;delete e.unknown;function f(){var h=t().length,d=r<i,p=d?r:i,m=d?i:r;a=(m-p)/Math.max(1,h-u+c*2),s&&(a=Math.floor(a)),p+=(m-p-a*(h-u))*l,o=a*(1-u),s&&(p=Math.round(p),o=Math.round(o));var g=Ur(h).map(function(v){return p+a*v});return n(d?g.reverse():g)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([i,r]=h,i=+i,r=+r,f()):[i,r]},e.rangeRound=function(h){return[i,r]=h,i=+i,r=+r,s=!0,f()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(h){return arguments.length?(s=!!h,f()):s},e.padding=function(h){return arguments.length?(u=Math.min(1,c=+h),f()):u},e.paddingInner=function(h){return arguments.length?(u=Math.min(1,h),f()):u},e.paddingOuter=function(h){return arguments.length?(c=+h,f()):c},e.align=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),f()):l},e.copy=function(){return Kh(t(),[i,r]).round(s).paddingInner(u).paddingOuter(c).align(l)},Hi.apply(f(),arguments)}function Tk(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Tk(t())},e}function ej(){return Tk(Kh.apply(null,arguments).paddingInner(1))}function pu(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Zh(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Wo(){}var qs=.7,mu=1/qs,gu="\\s*([+-]?\\d+)\\s*",Qh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ia="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tj=/^#([0-9a-f]{3,8})$/,nj=new RegExp("^rgb\\("+[gu,gu,gu]+"\\)$"),rj=new RegExp("^rgb\\("+[Ia,Ia,Ia]+"\\)$"),ij=new RegExp("^rgba\\("+[gu,gu,gu,Qh]+"\\)$"),aj=new RegExp("^rgba\\("+[Ia,Ia,Ia,Qh]+"\\)$"),oj=new RegExp("^hsl\\("+[Qh,Ia,Ia]+"\\)$"),sj=new RegExp("^hsla\\("+[Qh,Ia,Ia,Qh]+"\\)$"),Ek={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pu(Wo,Kn,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:bk,formatHex:bk,formatHsl:lj,formatRgb:_k,toString:_k});function bk(){return this.rgb().formatHex()}function lj(){return wk(this).formatHsl()}function _k(){return this.rgb().formatRgb()}function Kn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tj.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Sk(t):n===3?new hr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_m(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_m(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nj.exec(e))?new hr(t[1],t[2],t[3],1):(t=rj.exec(e))?new hr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ij.exec(e))?_m(t[1],t[2],t[3],t[4]):(t=aj.exec(e))?_m(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=oj.exec(e))?Dk(t[1],t[2]/100,t[3]/100,1):(t=sj.exec(e))?Dk(t[1],t[2]/100,t[3]/100,t[4]):Ek.hasOwnProperty(e)?Sk(Ek[e]):e==="transparent"?new hr(NaN,NaN,NaN,0):null}function Sk(e){return new hr(e>>16&255,e>>8&255,e&255,1)}function _m(e,t,n,i){return i<=0&&(e=t=n=NaN),new hr(e,t,n,i)}function mE(e){return e instanceof Wo||(e=Kn(e)),e?(e=e.rgb(),new hr(e.r,e.g,e.b,e.opacity)):new hr}function vu(e,t,n,i){return arguments.length===1?mE(e):new hr(e,t,n,i??1)}function hr(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}pu(hr,vu,Zh(Wo,{brighter:function(e){return e=e==null?mu:Math.pow(mu,e),new hr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?qs:Math.pow(qs,e),new hr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ak,formatHex:Ak,formatRgb:Ck,toString:Ck}));function Ak(){return"#"+gE(this.r)+gE(this.g)+gE(this.b)}function Ck(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function gE(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function Dk(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ka(e,t,n,i)}function wk(e){if(e instanceof ka)return new ka(e.h,e.s,e.l,e.opacity);if(e instanceof Wo||(e=Kn(e)),!e)return new ka;if(e instanceof ka)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),o=NaN,s=a-r,u=(a+r)/2;return s?(t===a?o=(n-i)/s+(n<i)*6:n===a?o=(i-t)/s+2:o=(t-n)/s+4,s/=u<.5?a+r:2-a-r,o*=60):s=u>0&&u<1?0:o,new ka(o,s,u,e.opacity)}function Ik(e,t,n,i){return arguments.length===1?wk(e):new ka(e,t,n,i??1)}function ka(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}pu(ka,Ik,Zh(Wo,{brighter:function(e){return e=e==null?mu:Math.pow(mu,e),new ka(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?qs:Math.pow(qs,e),new ka(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new hr(vE(e>=240?e-240:e+120,r,i),vE(e,r,i),vE(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function vE(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const kk=Math.PI/180,Ok=180/Math.PI,Sm=18,xk=.96422,Pk=1,Rk=.82521,Nk=4/29,yu=6/29,Mk=3*yu*yu,uj=yu*yu*yu;function Lk(e){if(e instanceof aa)return new aa(e.l,e.a,e.b,e.opacity);if(e instanceof Oa)return $k(e);e instanceof hr||(e=mE(e));var t=bE(e.r),n=bE(e.g),i=bE(e.b),r=yE((.2225045*t+.7168786*n+.0606169*i)/Pk),a,o;return t===n&&n===i?a=o=r:(a=yE((.4360747*t+.3850649*n+.1430804*i)/xk),o=yE((.0139322*t+.0971045*n+.7141733*i)/Rk)),new aa(116*r-16,500*(a-r),200*(r-o),e.opacity)}function cj(e,t){return new aa(e,0,0,t??1)}function Bk(e,t,n,i){return arguments.length===1?Lk(e):new aa(e,t,n,i??1)}function aa(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}pu(aa,Bk,Zh(Wo,{brighter:function(e){return new aa(this.l+Sm*(e??1),this.a,this.b,this.opacity)},darker:function(e){return new aa(this.l-Sm*(e??1),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=xk*TE(t),e=Pk*TE(e),n=Rk*TE(n),new hr(EE(3.1338561*t-1.6168667*e-.4906146*n),EE(-.9787684*t+1.9161415*e+.033454*n),EE(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function yE(e){return e>uj?Math.pow(e,1/3):e/Mk+Nk}function TE(e){return e>yu?e*e*e:Mk*(e-Nk)}function EE(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function bE(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Fk(e){if(e instanceof Oa)return new Oa(e.h,e.c,e.l,e.opacity);if(e instanceof aa||(e=Lk(e)),e.a===0&&e.b===0)return new Oa(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Ok;return new Oa(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function hj(e,t,n,i){return arguments.length===1?Fk(e):new Oa(n,t,e,i??1)}function Hk(e,t,n,i){return arguments.length===1?Fk(e):new Oa(e,t,n,i??1)}function Oa(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function $k(e){if(isNaN(e.h))return new aa(e.l,0,0,e.opacity);var t=e.h*kk;return new aa(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}pu(Oa,Hk,Zh(Wo,{brighter:function(e){return new Oa(this.h,this.c,this.l+Sm*(e??1),this.opacity)},darker:function(e){return new Oa(this.h,this.c,this.l-Sm*(e??1),this.opacity)},rgb:function(){return $k(this).rgb()}}));var Uk=-.14861,_E=1.78277,SE=-.29227,Am=-.90649,Jh=1.97294,Gk=Jh*Am,zk=Jh*_E,jk=_E*SE-Am*Uk;function fj(e){if(e instanceof Xs)return new Xs(e.h,e.s,e.l,e.opacity);e instanceof hr||(e=mE(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(jk*i+Gk*t-zk*n)/(jk+Gk-zk),a=i-r,o=(Jh*(n-r)-SE*a)/Am,s=Math.sqrt(o*o+a*a)/(Jh*r*(1-r)),u=s?Math.atan2(o,a)*Ok-120:NaN;return new Xs(u<0?u+360:u,s,r,e.opacity)}function Vk(e,t,n,i){return arguments.length===1?fj(e):new Xs(e,t,n,i??1)}function Xs(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}pu(Xs,Vk,Zh(Wo,{brighter:function(e){return e=e==null?mu:Math.pow(mu,e),new Xs(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?qs:Math.pow(qs,e),new Xs(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*kk,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new hr(255*(t+n*(Uk*i+_E*r)),255*(t+n*(SE*i+Am*r)),255*(t+n*(Jh*i)),this.opacity)}}));const dj=Object.freeze(Object.defineProperty({__proto__:null,color:Kn,rgb:vu,hsl:Ik,lab:Bk,hcl:Hk,lch:hj,gray:cj,cubehelix:Vk},Symbol.toStringTag,{value:"Module"})),AE=e=>()=>e;function pj(e,t){return function(n){return e+n*t}}function mj(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function gj(e){return(e=+e)==1?Yk:function(t,n){return n-t?mj(t,n,e):AE(isNaN(t)?n:t)}}function Yk(e,t){var n=t-e;return n?pj(e,n):AE(isNaN(e)?t:e)}const Tu=function e(t){var n=gj(t);function i(r,a){var o=n((r=vu(r)).r,(a=vu(a)).r),s=n(r.g,a.g),u=n(r.b,a.b),c=Yk(r.opacity,a.opacity);return function(l){return r.r=o(l),r.g=s(l),r.b=u(l),r.opacity=c(l),r+""}}return i.gamma=e,i}(1);function vj(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function yj(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Tj(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)r[o]=Ks(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<i;++o)a[o]=r[o](s);return a}}function Ej(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function $i(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function bj(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Ks(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var CE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,DE=new RegExp(CE.source,"g");function _j(e){return function(){return e}}function Sj(e){return function(t){return e(t)+""}}function wE(e,t){var n=CE.lastIndex=DE.lastIndex=0,i,r,a,o=-1,s=[],u=[];for(e=e+"",t=t+"";(i=CE.exec(e))&&(r=DE.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(i=i[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:$i(i,r)})),n=DE.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Sj(u[0].x):_j(t):(t=u.length,function(c){for(var l=0,f;l<t;++l)s[(f=u[l]).i]=f.x(c);return s.join("")})}function Ks(e,t){var n=typeof t,i;return t==null||n==="boolean"?AE(t):(n==="number"?$i:n==="string"?(i=Kn(t))?(t=i,Tu):wE:t instanceof Kn?Tu:t instanceof Date?Ej:yj(t)?vj:Array.isArray(t)?Tj:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bj:$i)(e,t)}function IE(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Wk=180/Math.PI,kE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qk(e,t,n,i,r,a){var o,s,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(s=Math.sqrt(n*n+i*i))&&(n/=s,i/=s,u/=s),e*i<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*Wk,skewX:Math.atan(u)*Wk,scaleX:o,scaleY:s}}var Cm;function Aj(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?kE:qk(t.a,t.b,t.c,t.d,t.e,t.f)}function Cj(e){return e==null||(Cm||(Cm=document.createElementNS("http://www.w3.org/2000/svg","g")),Cm.setAttribute("transform",e),!(e=Cm.transform.baseVal.consolidate()))?kE:(e=e.matrix,qk(e.a,e.b,e.c,e.d,e.e,e.f))}function Xk(e,t,n,i){function r(c){return c.length?c.pop()+" ":""}function a(c,l,f,h,d,p){if(c!==f||l!==h){var m=d.push("translate(",null,t,null,n);p.push({i:m-4,x:$i(c,f)},{i:m-2,x:$i(l,h)})}else(f||h)&&d.push("translate("+f+t+h+n)}function o(c,l,f,h){c!==l?(c-l>180?l+=360:l-c>180&&(c+=360),h.push({i:f.push(r(f)+"rotate(",null,i)-2,x:$i(c,l)})):l&&f.push(r(f)+"rotate("+l+i)}function s(c,l,f,h){c!==l?h.push({i:f.push(r(f)+"skewX(",null,i)-2,x:$i(c,l)}):l&&f.push(r(f)+"skewX("+l+i)}function u(c,l,f,h,d,p){if(c!==f||l!==h){var m=d.push(r(d)+"scale(",null,",",null,")");p.push({i:m-4,x:$i(c,f)},{i:m-2,x:$i(l,h)})}else(f!==1||h!==1)&&d.push(r(d)+"scale("+f+","+h+")")}return function(c,l){var f=[],h=[];return c=e(c),l=e(l),a(c.translateX,c.translateY,l.translateX,l.translateY,f,h),o(c.rotate,l.rotate,f,h),s(c.skewX,l.skewX,f,h),u(c.scaleX,c.scaleY,l.scaleX,l.scaleY,f,h),c=l=null,function(d){for(var p=-1,m=h.length,g;++p<m;)f[(g=h[p]).i]=g.x(d);return f.join("")}}}var Kk=Xk(Aj,"px, ","px)","deg)"),Zk=Xk(Cj,", ",")",")"),Dj=1e-12;function Qk(e){return((e=Math.exp(e))+1/e)/2}function wj(e){return((e=Math.exp(e))-1/e)/2}function Ij(e){return((e=Math.exp(2*e))-1)/(e+1)}const kj=function e(t,n,i){function r(a,o){var s=a[0],u=a[1],c=a[2],l=o[0],f=o[1],h=o[2],d=l-s,p=f-u,m=d*d+p*p,g,v;if(m<Dj)v=Math.log(h/c)/t,g=function(w){return[s+w*d,u+w*p,c*Math.exp(t*w*v)]};else{var E=Math.sqrt(m),y=(h*h-c*c+i*m)/(2*c*n*E),T=(h*h-c*c-i*m)/(2*h*n*E),b=Math.log(Math.sqrt(y*y+1)-y),S=Math.log(Math.sqrt(T*T+1)-T);v=(S-b)/t,g=function(w){var D=w*v,R=Qk(b),M=c/(n*E)*(R*Ij(t*D+b)-wj(b));return[s+M*d,u+M*p,c*R/Qk(t*D+b)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return r.rho=function(a){var o=Math.max(.001,+a),s=o*o,u=s*s;return e(o,s,u)},r}(Math.SQRT2,2,4);function Oj(e,t){t===void 0&&(t=e,e=Ks);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(o){var s=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return a[s](o-s)}}function xj(e){return function(){return e}}function Dm(e){return+e}var Jk=[0,1];function Gr(e){return e}function OE(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:xj(isNaN(t)?NaN:.5)}function Pj(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Rj(e,t,n){var i=e[0],r=e[1],a=t[0],o=t[1];return r<i?(i=OE(r,i),a=n(o,a)):(i=OE(i,r),a=n(a,o)),function(s){return a(i(s))}}function Nj(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=OE(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var u=Ys(e,s,1,i)-1;return a[u](r[u](s))}}function ef(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wm(){var e=Jk,t=Jk,n=Ks,i,r,a,o=Gr,s,u,c;function l(){var h=Math.min(e.length,t.length);return o!==Gr&&(o=Pj(e[0],e[h-1])),s=h>2?Nj:Rj,u=c=null,f}function f(h){return h==null||isNaN(h=+h)?a:(u||(u=s(e.map(i),t,n)))(i(o(h)))}return f.invert=function(h){return o(r((c||(c=s(t,e.map(i),$i)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Dm),l()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),l()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),n=IE,l()},f.clamp=function(h){return arguments.length?(o=h?!0:Gr,l()):o!==Gr},f.interpolate=function(h){return arguments.length?(n=h,l()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return i=h,r=d,l()}}function xE(){return wm()(Gr,Gr)}function Mj(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Im(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Eu(e){return e=Im(Math.abs(e)),e?e[1]:NaN}function Lj(e,t){return function(n,i){for(var r=n.length,a=[],o=0,s=e[0],u=0;r>0&&s>0&&(u+s+1>i&&(s=Math.max(1,i-u)),a.push(n.substring(r-=s,r+s)),!((u+=s+1)>i));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function Bj(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Fj=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function bu(e){if(!(t=Fj.exec(e)))throw new Error("invalid format: "+e);var t;return new km({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}bu.prototype=km.prototype;function km(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}km.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Hj(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var eO;function $j(e,t){var n=Im(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(eO=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Im(e,Math.max(0,t+a-1))[0]}function tO(e,t){var n=Im(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const nO={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Mj,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>tO(e*100,t),r:tO,s:$j,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function rO(e){return e}var iO=Array.prototype.map,aO=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function oO(e){var t=e.grouping===void 0||e.thousands===void 0?rO:Lj(iO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?rO:Bj(iO.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"\u2212":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function c(f){f=bu(f);var h=f.fill,d=f.align,p=f.sign,m=f.symbol,g=f.zero,v=f.width,E=f.comma,y=f.precision,T=f.trim,b=f.type;b==="n"?(E=!0,b="g"):nO[b]||(y===void 0&&(y=12),T=!0,b="g"),(g||h==="0"&&d==="=")&&(g=!0,h="0",d="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",w=m==="$"?i:/[%p]/.test(b)?o:"",D=nO[b],R=/[defgprs%]/.test(b);y=y===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function M(k){var L=S,$=w,P,B,X;if(b==="c")$=D(k)+$,k="";else{k=+k;var ee=k<0||1/k<0;if(k=isNaN(k)?u:D(Math.abs(k),y),T&&(k=Hj(k)),ee&&+k==0&&p!=="+"&&(ee=!1),L=(ee?p==="("?p:s:p==="-"||p==="("?"":p)+L,$=(b==="s"?aO[8+eO/3]:"")+$+(ee&&p==="("?")":""),R){for(P=-1,B=k.length;++P<B;)if(X=k.charCodeAt(P),48>X||X>57){$=(X===46?r+k.slice(P+1):k.slice(P))+$,k=k.slice(0,P);break}}}E&&!g&&(k=t(k,1/0));var se=L.length+k.length+$.length,fe=se<v?new Array(v-se+1).join(h):"";switch(E&&g&&(k=t(fe+k,fe.length?v-$.length:1/0),fe=""),d){case"<":k=L+k+$+fe;break;case"=":k=L+fe+k+$;break;case"^":k=fe.slice(0,se=fe.length>>1)+L+k+$+fe.slice(se);break;default:k=fe+L+k+$;break}return a(k)}return M.toString=function(){return f+""},M}function l(f,h){var d=c((f=bu(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(Eu(h)/3)))*3,m=Math.pow(10,-p),g=aO[8+p/3];return function(v){return d(m*v)+g}}return{format:c,formatPrefix:l}}var Om,bi,Zs;sO({thousands:",",grouping:[3],currency:["$",""]});function sO(e){return Om=oO(e),bi=Om.format,Zs=Om.formatPrefix,Om}function lO(e){return Math.max(0,-Eu(Math.abs(e)))}function _u(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Eu(t)/3)))*3-Eu(Math.abs(e)))}function uO(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Eu(t)-Eu(e))+1}const Uj=Object.freeze(Object.defineProperty({__proto__:null,formatDefaultLocale:sO,get format(){return bi},get formatPrefix(){return Zs},formatLocale:oO,formatSpecifier:bu,FormatSpecifier:km,precisionFixed:lO,precisionPrefix:_u,precisionRound:uO},Symbol.toStringTag,{value:"Module"}));function cO(e,t,n,i){var r=Em(e,t,n),a;switch(i=bu(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=_u(r,o))&&(i.precision=a),Zs(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=uO(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=lO(r))&&(i.precision=a-(i.type==="%")*2);break}}return bi(i)}function qo(e){var t=e.domain;return e.ticks=function(n){var i=t();return Ws(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return cO(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,o=i[r],s=i[a],u,c,l=10;for(s<o&&(c=o,o=s,s=c,c=r,r=a,a=c);l-- >0;){if(c=Wh(o,s,n),c===u)return i[r]=o,i[a]=s,t(i);if(c>0)o=Math.floor(o/c)*c,s=Math.ceil(s/c)*c;else if(c<0)o=Math.ceil(o*c)/c,s=Math.floor(s*c)/c;else break;u=c}return e},e}function Et(){var e=xE();return e.copy=function(){return ef(e,Et())},Hi.apply(e,arguments),qo(e)}function hO(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,Dm),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return hO(e).unknown(t)},e=arguments.length?Array.from(e,Dm):[0,1],qo(n)}function fO(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],o;return a<r&&(o=n,n=i,i=o,o=r,r=a,a=o),e[n]=t.floor(r),e[i]=t.ceil(a),e}function dO(e){return Math.log(e)}function pO(e){return Math.exp(e)}function Gj(e){return-Math.log(-e)}function zj(e){return-Math.exp(-e)}function jj(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vj(e){return e===10?jj:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Yj(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function mO(e){return(t,n)=>-e(-t,n)}function PE(e){const t=e(dO,pO),n=t.domain;let i=10,r,a;function o(){return r=Yj(i),a=Vj(i),n()[0]<0?(r=mO(r),a=mO(a),e(Gj,zj)):e(dO,pO),t}return t.base=function(s){return arguments.length?(i=+s,o()):i},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const u=n();let c=u[0],l=u[u.length-1];const f=l<c;f&&([c,l]=[l,c]);let h=r(c),d=r(l),p,m;const g=s==null?10:+s;let v=[];if(!(i%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),c>0){for(;h<=d;++h)for(p=1;p<i;++p)if(m=h<0?p/a(-h):p*a(h),!(m<c)){if(m>l)break;v.push(m)}}else for(;h<=d;++h)for(p=i-1;p>=1;--p)if(m=h>0?p/a(-h):p*a(h),!(m<c)){if(m>l)break;v.push(m)}v.length*2<g&&(v=Ws(c,l,g))}else v=Ws(h,d,Math.min(d-h,g)).map(a);return f?v.reverse():v},t.tickFormat=(s,u)=>{if(s==null&&(s=10),u==null&&(u=i===10?"s":","),typeof u!="function"&&(!(i%1)&&(u=bu(u)).precision==null&&(u.trim=!0),u=bi(u)),s===1/0)return u;const c=Math.max(1,i*s/t.ticks().length);return l=>{let f=l/a(Math.round(r(l)));return f*i<i-.5&&(f*=i),f<=c?u(l):""}},t.nice=()=>n(fO(n(),{floor:s=>a(Math.floor(r(s))),ceil:s=>a(Math.ceil(r(s)))})),t}function Xo(){const e=PE(wm()).domain([1,10]);return e.copy=()=>ef(e,Xo()).base(e.base()),Hi.apply(e,arguments),e}function gO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function vO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function RE(e){var t=1,n=e(gO(t),vO(t));return n.constant=function(i){return arguments.length?e(gO(t=+i),vO(t)):t},qo(n)}function yO(){var e=RE(wm());return e.copy=function(){return ef(e,yO()).constant(e.constant())},Hi.apply(e,arguments)}function TO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Wj(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function qj(e){return e<0?-e*e:e*e}function NE(e){var t=e(Gr,Gr),n=1;function i(){return n===1?e(Gr,Gr):n===.5?e(Wj,qj):e(TO(n),TO(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},qo(t)}function ME(){var e=NE(wm());return e.copy=function(){return ef(e,ME()).exponent(e.exponent())},Hi.apply(e,arguments),e}function Xj(){return ME.apply(null,arguments).exponent(.5)}function EO(e){return Math.sign(e)*e*e}function Kj(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function bO(){var e=xE(),t=[0,1],n=!1,i;function r(a){var o=Kj(e(a));return isNaN(o)?i:n?Math.round(o):o}return r.invert=function(a){return e.invert(EO(a))},r.domain=function(a){return arguments.length?(e.domain(a),r):e.domain()},r.range=function(a){return arguments.length?(e.range((t=Array.from(a,Dm)).map(EO)),r):t.slice()},r.rangeRound=function(a){return r.range(a).round(!0)},r.round=function(a){return arguments.length?(n=!!a,r):n},r.clamp=function(a){return arguments.length?(e.clamp(a),r):e.clamp()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return bO(e.domain(),t).round(n).clamp(e.clamp()).unknown(i)},Hi.apply(r,arguments),qo(r)}function xm(){var e=[],t=[],n=[],i;function r(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=hk(e,o/s);return a}function a(o){return o==null||isNaN(o=+o)?i:t[Ys(n,o)]}return a.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Yn),r()},a.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return xm().domain(e).range(t).unknown(i)},Hi.apply(a,arguments)}function _O(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function o(u){return u!=null&&u<=u?r[Ys(i,u,0,n)]:a}function s(){var u=-1;for(i=new Array(n);++u<n;)i[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,s()):[e,t]},o.range=function(u){return arguments.length?(n=(r=Array.from(u)).length-1,s()):r.slice()},o.invertExtent=function(u){var c=r.indexOf(u);return c<0?[NaN,NaN]:c<1?[e,i[0]]:c>=n?[i[n-1],t]:[i[c-1],i[c]]},o.unknown=function(u){return arguments.length&&(a=u),o},o.thresholds=function(){return i.slice()},o.copy=function(){return _O().domain([e,t]).range(r).unknown(a)},Hi.apply(qo(o),arguments)}function SO(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[Ys(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return SO().domain(e).range(t).unknown(n)},Hi.apply(r,arguments)}const LE=new Date,BE=new Date;function Zn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const o=r(a),s=r.ceil(a);return a-o<s-a?o:s},r.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),r.range=(a,o,s)=>{const u=[];if(a=r.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return u;let c;do u.push(c=new Date(+a)),t(a,s),e(a);while(c<a&&a<o);return u},r.filter=a=>Zn(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!a(o););else for(;--s>=0;)for(;t(o,1),!a(o););}),n&&(r.count=(a,o)=>(LE.setTime(+a),BE.setTime(+o),e(LE),e(BE),Math.floor(n(LE,BE))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?o=>i(o)%a===0:o=>r.count(0,o)%a===0):r)),r}const Pm=Zn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Pm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Zn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Pm),Pm.range;const mo=1e3,Ui=mo*60,go=Ui*60,vo=go*24,FE=vo*7,AO=vo*30,HE=vo*365,Qs=Zn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*mo)},(e,t)=>(t-e)/mo,e=>e.getUTCSeconds());Qs.range;const $E=Zn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mo)},(e,t)=>{e.setTime(+e+t*Ui)},(e,t)=>(t-e)/Ui,e=>e.getMinutes());$E.range;const UE=Zn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ui)},(e,t)=>(t-e)/Ui,e=>e.getUTCMinutes());UE.range;const GE=Zn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*mo-e.getMinutes()*Ui)},(e,t)=>{e.setTime(+e+t*go)},(e,t)=>(t-e)/go,e=>e.getHours());GE.range;const zE=Zn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*go)},(e,t)=>(t-e)/go,e=>e.getUTCHours());zE.range;const tf=Zn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ui)/vo,e=>e.getDate()-1);tf.range;const Rm=Zn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vo,e=>e.getUTCDate()-1);Rm.range;const CO=Zn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vo,e=>Math.floor(e/vo));CO.range;function Js(e){return Zn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Ui)/FE)}const Nm=Js(0),Mm=Js(1),Zj=Js(2),Qj=Js(3),Su=Js(4),Jj=Js(5),eV=Js(6);Nm.range,Mm.range,Zj.range,Qj.range,Su.range,Jj.range,eV.range;function el(e){return Zn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/FE)}const Lm=el(0),Bm=el(1),tV=el(2),nV=el(3),Au=el(4),rV=el(5),iV=el(6);Lm.range,Bm.range,tV.range,nV.range,Au.range,rV.range,iV.range;const jE=Zn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());jE.range;const VE=Zn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());VE.range;const yo=Zn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());yo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}),yo.range;const To=Zn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());To.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Zn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}),To.range;function DO(e,t,n,i,r,a){const o=[[Qs,1,mo],[Qs,5,5*mo],[Qs,15,15*mo],[Qs,30,30*mo],[a,1,Ui],[a,5,5*Ui],[a,15,15*Ui],[a,30,30*Ui],[r,1,go],[r,3,3*go],[r,6,6*go],[r,12,12*go],[i,1,vo],[i,2,2*vo],[n,1,FE],[t,1,AO],[t,3,3*AO],[e,1,HE]];function s(c,l,f){const h=l<c;h&&([c,l]=[l,c]);const d=f&&typeof f.range=="function"?f:u(c,l,f),p=d?d.range(c,+l+1):[];return h?p.reverse():p}function u(c,l,f){const h=Math.abs(l-c)/f,d=hu(([,,g])=>g).right(o,h);if(d===o.length)return e.every(Em(c/HE,l/HE,f));if(d===0)return Pm.every(Math.max(Em(c,l,f),1));const[p,m]=o[h/o[d-1][2]<o[d][2]/h?d-1:d];return p.every(m)}return[s,u]}const[aV,oV]=DO(To,VE,Lm,CO,zE,UE),[sV,lV]=DO(yo,jE,Nm,tf,GE,$E);function YE(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function WE(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function nf(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function uV(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,o=e.shortDays,s=e.months,u=e.shortMonths,c=rf(r),l=af(r),f=rf(a),h=af(a),d=rf(o),p=af(o),m=rf(s),g=af(s),v=rf(u),E=af(u),y={a:ee,A:se,b:fe,B:Z,c:null,d:PO,e:PO,f:PV,g:GV,G:jV,H:kV,I:OV,j:xV,L:RO,m:RV,M:NV,p:he,q:j,Q:HO,s:$O,S:MV,u:LV,U:BV,V:FV,w:HV,W:$V,x:null,X:null,y:UV,Y:zV,Z:VV,"%":FO},T={a:H,A:G,b:K,B:ae,c:null,d:MO,e:MO,f:XV,g:aY,G:sY,H:YV,I:WV,j:qV,L:LO,m:KV,M:ZV,p:pe,q:we,Q:HO,s:$O,S:QV,u:JV,U:eY,V:tY,w:nY,W:rY,x:null,X:null,y:iY,Y:oY,Z:lY,"%":FO},b={a:M,A:k,b:L,B:$,c:P,d:OO,e:OO,f:CV,g:kO,G:IO,H:xO,I:xO,j:bV,L:AV,m:EV,M:_V,p:R,q:TV,Q:wV,s:IV,S:SV,u:pV,U:mV,V:gV,w:dV,W:vV,x:B,X,y:kO,Y:IO,Z:yV,"%":DV};y.x=S(n,y),y.X=S(i,y),y.c=S(t,y),T.x=S(n,T),T.X=S(i,T),T.c=S(t,T);function S(Ee,xe){return function(He){var ke=[],Ye=-1,je=0,dt=Ee.length,st,qe,bt;for(He instanceof Date||(He=new Date(+He));++Ye<dt;)Ee.charCodeAt(Ye)===37&&(ke.push(Ee.slice(je,Ye)),(qe=wO[st=Ee.charAt(++Ye)])!=null?st=Ee.charAt(++Ye):qe=st==="e"?" ":"0",(bt=xe[st])&&(st=bt(He,qe)),ke.push(st),je=Ye+1);return ke.push(Ee.slice(je,Ye)),ke.join("")}}function w(Ee,xe){return function(He){var ke=nf(1900,void 0,1),Ye=D(ke,Ee,He+="",0),je,dt;if(Ye!=He.length)return null;if("Q"in ke)return new Date(ke.Q);if("s"in ke)return new Date(ke.s*1e3+("L"in ke?ke.L:0));if(xe&&!("Z"in ke)&&(ke.Z=0),"p"in ke&&(ke.H=ke.H%12+ke.p*12),ke.m===void 0&&(ke.m="q"in ke?ke.q:0),"V"in ke){if(ke.V<1||ke.V>53)return null;"w"in ke||(ke.w=1),"Z"in ke?(je=WE(nf(ke.y,0,1)),dt=je.getUTCDay(),je=dt>4||dt===0?Bm.ceil(je):Bm(je),je=Rm.offset(je,(ke.V-1)*7),ke.y=je.getUTCFullYear(),ke.m=je.getUTCMonth(),ke.d=je.getUTCDate()+(ke.w+6)%7):(je=YE(nf(ke.y,0,1)),dt=je.getDay(),je=dt>4||dt===0?Mm.ceil(je):Mm(je),je=tf.offset(je,(ke.V-1)*7),ke.y=je.getFullYear(),ke.m=je.getMonth(),ke.d=je.getDate()+(ke.w+6)%7)}else("W"in ke||"U"in ke)&&("w"in ke||(ke.w="u"in ke?ke.u%7:"W"in ke?1:0),dt="Z"in ke?WE(nf(ke.y,0,1)).getUTCDay():YE(nf(ke.y,0,1)).getDay(),ke.m=0,ke.d="W"in ke?(ke.w+6)%7+ke.W*7-(dt+5)%7:ke.w+ke.U*7-(dt+6)%7);return"Z"in ke?(ke.H+=ke.Z/100|0,ke.M+=ke.Z%100,WE(ke)):YE(ke)}}function D(Ee,xe,He,ke){for(var Ye=0,je=xe.length,dt=He.length,st,qe;Ye<je;){if(ke>=dt)return-1;if(st=xe.charCodeAt(Ye++),st===37){if(st=xe.charAt(Ye++),qe=b[st in wO?xe.charAt(Ye++):st],!qe||(ke=qe(Ee,He,ke))<0)return-1}else if(st!=He.charCodeAt(ke++))return-1}return ke}function R(Ee,xe,He){var ke=c.exec(xe.slice(He));return ke?(Ee.p=l.get(ke[0].toLowerCase()),He+ke[0].length):-1}function M(Ee,xe,He){var ke=d.exec(xe.slice(He));return ke?(Ee.w=p.get(ke[0].toLowerCase()),He+ke[0].length):-1}function k(Ee,xe,He){var ke=f.exec(xe.slice(He));return ke?(Ee.w=h.get(ke[0].toLowerCase()),He+ke[0].length):-1}function L(Ee,xe,He){var ke=v.exec(xe.slice(He));return ke?(Ee.m=E.get(ke[0].toLowerCase()),He+ke[0].length):-1}function $(Ee,xe,He){var ke=m.exec(xe.slice(He));return ke?(Ee.m=g.get(ke[0].toLowerCase()),He+ke[0].length):-1}function P(Ee,xe,He){return D(Ee,t,xe,He)}function B(Ee,xe,He){return D(Ee,n,xe,He)}function X(Ee,xe,He){return D(Ee,i,xe,He)}function ee(Ee){return o[Ee.getDay()]}function se(Ee){return a[Ee.getDay()]}function fe(Ee){return u[Ee.getMonth()]}function Z(Ee){return s[Ee.getMonth()]}function he(Ee){return r[+(Ee.getHours()>=12)]}function j(Ee){return 1+~~(Ee.getMonth()/3)}function H(Ee){return o[Ee.getUTCDay()]}function G(Ee){return a[Ee.getUTCDay()]}function K(Ee){return u[Ee.getUTCMonth()]}function ae(Ee){return s[Ee.getUTCMonth()]}function pe(Ee){return r[+(Ee.getUTCHours()>=12)]}function we(Ee){return 1+~~(Ee.getUTCMonth()/3)}return{format:function(Ee){var xe=S(Ee+="",y);return xe.toString=function(){return Ee},xe},parse:function(Ee){var xe=w(Ee+="",!1);return xe.toString=function(){return Ee},xe},utcFormat:function(Ee){var xe=S(Ee+="",T);return xe.toString=function(){return Ee},xe},utcParse:function(Ee){var xe=w(Ee+="",!0);return xe.toString=function(){return Ee},xe}}}var wO={"-":"",_:" ",0:"0"},ar=/^\s*\d+/,cV=/^%/,hV=/[\\^$*+?|[\]().{}]/g;function Kt(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function fV(e){return e.replace(hV,"\\$&")}function rf(e){return new RegExp("^(?:"+e.map(fV).join("|")+")","i")}function af(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function dV(e,t,n){var i=ar.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function pV(e,t,n){var i=ar.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function mV(e,t,n){var i=ar.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function gV(e,t,n){var i=ar.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function vV(e,t,n){var i=ar.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function IO(e,t,n){var i=ar.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function kO(e,t,n){var i=ar.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function yV(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function TV(e,t,n){var i=ar.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function EV(e,t,n){var i=ar.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function OO(e,t,n){var i=ar.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function bV(e,t,n){var i=ar.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function xO(e,t,n){var i=ar.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function _V(e,t,n){var i=ar.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function SV(e,t,n){var i=ar.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function AV(e,t,n){var i=ar.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function CV(e,t,n){var i=ar.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function DV(e,t,n){var i=cV.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function wV(e,t,n){var i=ar.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function IV(e,t,n){var i=ar.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function PO(e,t){return Kt(e.getDate(),t,2)}function kV(e,t){return Kt(e.getHours(),t,2)}function OV(e,t){return Kt(e.getHours()%12||12,t,2)}function xV(e,t){return Kt(1+tf.count(yo(e),e),t,3)}function RO(e,t){return Kt(e.getMilliseconds(),t,3)}function PV(e,t){return RO(e,t)+"000"}function RV(e,t){return Kt(e.getMonth()+1,t,2)}function NV(e,t){return Kt(e.getMinutes(),t,2)}function MV(e,t){return Kt(e.getSeconds(),t,2)}function LV(e){var t=e.getDay();return t===0?7:t}function BV(e,t){return Kt(Nm.count(yo(e)-1,e),t,2)}function NO(e){var t=e.getDay();return t>=4||t===0?Su(e):Su.ceil(e)}function FV(e,t){return e=NO(e),Kt(Su.count(yo(e),e)+(yo(e).getDay()===4),t,2)}function HV(e){return e.getDay()}function $V(e,t){return Kt(Mm.count(yo(e)-1,e),t,2)}function UV(e,t){return Kt(e.getFullYear()%100,t,2)}function GV(e,t){return e=NO(e),Kt(e.getFullYear()%100,t,2)}function zV(e,t){return Kt(e.getFullYear()%1e4,t,4)}function jV(e,t){var n=e.getDay();return e=n>=4||n===0?Su(e):Su.ceil(e),Kt(e.getFullYear()%1e4,t,4)}function VV(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Kt(t/60|0,"0",2)+Kt(t%60,"0",2)}function MO(e,t){return Kt(e.getUTCDate(),t,2)}function YV(e,t){return Kt(e.getUTCHours(),t,2)}function WV(e,t){return Kt(e.getUTCHours()%12||12,t,2)}function qV(e,t){return Kt(1+Rm.count(To(e),e),t,3)}function LO(e,t){return Kt(e.getUTCMilliseconds(),t,3)}function XV(e,t){return LO(e,t)+"000"}function KV(e,t){return Kt(e.getUTCMonth()+1,t,2)}function ZV(e,t){return Kt(e.getUTCMinutes(),t,2)}function QV(e,t){return Kt(e.getUTCSeconds(),t,2)}function JV(e){var t=e.getUTCDay();return t===0?7:t}function eY(e,t){return Kt(Lm.count(To(e)-1,e),t,2)}function BO(e){var t=e.getUTCDay();return t>=4||t===0?Au(e):Au.ceil(e)}function tY(e,t){return e=BO(e),Kt(Au.count(To(e),e)+(To(e).getUTCDay()===4),t,2)}function nY(e){return e.getUTCDay()}function rY(e,t){return Kt(Bm.count(To(e)-1,e),t,2)}function iY(e,t){return Kt(e.getUTCFullYear()%100,t,2)}function aY(e,t){return e=BO(e),Kt(e.getUTCFullYear()%100,t,2)}function oY(e,t){return Kt(e.getUTCFullYear()%1e4,t,4)}function sY(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Au(e):Au.ceil(e),Kt(e.getUTCFullYear()%1e4,t,4)}function lY(){return"+0000"}function FO(){return"%"}function HO(e){return+e}function $O(e){return Math.floor(+e/1e3)}var Cu,UO,GO;uY({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uY(e){return Cu=uV(e),UO=Cu.format,Cu.parse,GO=Cu.utcFormat,Cu.utcParse,Cu}function cY(e){return new Date(e)}function hY(e){return e instanceof Date?+e:+new Date(+e)}function qE(e,t,n,i,r,a,o,s,u,c){var l=xE(),f=l.invert,h=l.domain,d=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),E=c("%b %d"),y=c("%B"),T=c("%Y");function b(S){return(u(S)<S?d:s(S)<S?p:o(S)<S?m:a(S)<S?g:i(S)<S?r(S)<S?v:E:n(S)<S?y:T)(S)}return l.invert=function(S){return new Date(f(S))},l.domain=function(S){return arguments.length?h(Array.from(S,hY)):h().map(cY)},l.ticks=function(S){var w=h();return e(w[0],w[w.length-1],S??10)},l.tickFormat=function(S,w){return w==null?b:c(w)},l.nice=function(S){var w=h();return(!S||typeof S.range!="function")&&(S=t(w[0],w[w.length-1],S??10)),S?h(fO(w,S)):l},l.copy=function(){return ef(l,qE(e,t,n,i,r,a,o,s,u,c))},l}function fY(){return Hi.apply(qE(sV,lV,yo,jE,Nm,tf,GE,$E,Qs,UO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dY(){return Hi.apply(qE(aV,oV,To,VE,Lm,Rm,zE,UE,Qs,GO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fm(){var e=0,t=1,n,i,r,a,o=Gr,s=!1,u;function c(f){return f==null||isNaN(f=+f)?u:o(r===0?.5:(f=(a(f)-n)*r,s?Math.max(0,Math.min(1,f)):f))}c.domain=function(f){return arguments.length?([e,t]=f,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),c):[e,t]},c.clamp=function(f){return arguments.length?(s=!!f,c):s},c.interpolator=function(f){return arguments.length?(o=f,c):o};function l(f){return function(h){var d,p;return arguments.length?([d,p]=h,o=f(d,p),c):[o(0),o(1)]}}return c.range=l(Ks),c.rangeRound=l(IE),c.unknown=function(f){return arguments.length?(u=f,c):u},function(f){return a=f,n=f(e),i=f(t),r=n===i?0:1/(i-n),c}}function Ko(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function zO(){var e=qo(Fm()(Gr));return e.copy=function(){return Ko(e,zO())},po.apply(e,arguments)}function jO(){var e=PE(Fm()).domain([1,10]);return e.copy=function(){return Ko(e,jO()).base(e.base())},po.apply(e,arguments)}function VO(){var e=RE(Fm());return e.copy=function(){return Ko(e,VO()).constant(e.constant())},po.apply(e,arguments)}function XE(){var e=NE(Fm());return e.copy=function(){return Ko(e,XE()).exponent(e.exponent())},po.apply(e,arguments)}function pY(){return XE.apply(null,arguments).exponent(.5)}function YO(){var e=[],t=Gr;function n(i){if(i!=null&&!isNaN(i=+i))return t((Ys(e,i,1)-1)/(e.length-1))}return n.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let r of i)r!=null&&!isNaN(r=+r)&&e.push(r);return e.sort(Yn),n},n.interpolator=function(i){return arguments.length?(t=i,n):t},n.range=function(){return e.map((i,r)=>t(r/(e.length-1)))},n.quantiles=function(i){return Array.from({length:i+1},(r,a)=>Xh(e,a/i))},n.copy=function(){return YO(t).domain(e)},po.apply(n,arguments)}function Hm(){var e=0,t=.5,n=1,i=1,r,a,o,s,u,c=Gr,l,f=!1,h;function d(m){return isNaN(m=+m)?h:(m=.5+((m=+l(m))-a)*(i*m<i*a?s:u),c(f?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([e,t,n]=m,r=l(e=+e),a=l(t=+t),o=l(n=+n),s=r===a?0:.5/(a-r),u=a===o?0:.5/(o-a),i=a<r?-1:1,d):[e,t,n]},d.clamp=function(m){return arguments.length?(f=!!m,d):f},d.interpolator=function(m){return arguments.length?(c=m,d):c};function p(m){return function(g){var v,E,y;return arguments.length?([v,E,y]=g,c=Oj(m,[v,E,y]),d):[c(0),c(.5),c(1)]}}return d.range=p(Ks),d.rangeRound=p(IE),d.unknown=function(m){return arguments.length?(h=m,d):h},function(m){return l=m,r=m(e),a=m(t),o=m(n),s=r===a?0:.5/(a-r),u=a===o?0:.5/(o-a),i=a<r?-1:1,d}}function WO(){var e=qo(Hm()(Gr));return e.copy=function(){return Ko(e,WO())},po.apply(e,arguments)}function qO(){var e=PE(Hm()).domain([.1,1,10]);return e.copy=function(){return Ko(e,qO()).base(e.base())},po.apply(e,arguments)}function XO(){var e=RE(Hm());return e.copy=function(){return Ko(e,XO()).constant(e.constant())},po.apply(e,arguments)}function KE(){var e=NE(Hm());return e.copy=function(){return Ko(e,KE()).exponent(e.exponent())},po.apply(e,arguments)}function mY(){return KE.apply(null,arguments).exponent(.5)}const gY=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Kh,scalePoint:ej,scaleIdentity:hO,scaleLinear:Et,scaleLog:Xo,scaleSymlog:yO,scaleOrdinal:pE,scaleImplicit:dE,scalePow:ME,scaleSqrt:Xj,scaleRadial:bO,scaleQuantile:xm,scaleQuantize:_O,scaleThreshold:SO,scaleTime:fY,scaleUtc:dY,scaleSequential:zO,scaleSequentialLog:jO,scaleSequentialPow:XE,scaleSequentialSqrt:pY,scaleSequentialSymlog:VO,scaleSequentialQuantile:YO,scaleDiverging:WO,scaleDivergingLog:qO,scaleDivergingPow:KE,scaleDivergingSqrt:mY,scaleDivergingSymlog:XO,tickFormat:cO},Symbol.toStringTag,{value:"Module"}));var KO={exports:{}},of={},$m,vY=new Uint8Array(16);function ZO(){if(!$m&&($m=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!$m))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $m(vY)}const yY=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Um(e){return typeof e=="string"&&yY.test(e)}for(var fr=[],ZE=0;ZE<256;++ZE)fr.push((ZE+256).toString(16).substr(1));function Gm(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(fr[e[t+0]]+fr[e[t+1]]+fr[e[t+2]]+fr[e[t+3]]+"-"+fr[e[t+4]]+fr[e[t+5]]+"-"+fr[e[t+6]]+fr[e[t+7]]+"-"+fr[e[t+8]]+fr[e[t+9]]+"-"+fr[e[t+10]]+fr[e[t+11]]+fr[e[t+12]]+fr[e[t+13]]+fr[e[t+14]]+fr[e[t+15]]).toLowerCase();if(!Um(n))throw TypeError("Stringified UUID is invalid");return n}var QO,QE,JE=0,e1=0;function TY(e,t,n){var i=t&&n||0,r=t||new Array(16);e=e||{};var a=e.node||QO,o=e.clockseq!==void 0?e.clockseq:QE;if(a==null||o==null){var s=e.random||(e.rng||ZO)();a==null&&(a=QO=[s[0]|1,s[1],s[2],s[3],s[4],s[5]]),o==null&&(o=QE=(s[6]<<8|s[7])&16383)}var u=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:e1+1,l=u-JE+(c-e1)/1e4;if(l<0&&e.clockseq===void 0&&(o=o+1&16383),(l<0||u>JE)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");JE=u,e1=c,QE=o,u+=122192928e5;var f=((u&268435455)*1e4+c)%4294967296;r[i++]=f>>>24&255,r[i++]=f>>>16&255,r[i++]=f>>>8&255,r[i++]=f&255;var h=u/4294967296*1e4&268435455;r[i++]=h>>>8&255,r[i++]=h&255,r[i++]=h>>>24&15|16,r[i++]=h>>>16&255,r[i++]=o>>>8|128,r[i++]=o&255;for(var d=0;d<6;++d)r[i+d]=a[d];return t||Gm(r)}function JO(e){if(!Um(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=t&255,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=t&255,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=t&255,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=t&255,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=t&255,n}function EY(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}var bY="6ba7b810-9dad-11d1-80b4-00c04fd430c8",_Y="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ex(e,t,n){function i(r,a,o,s){if(typeof r=="string"&&(r=EY(r)),typeof a=="string"&&(a=JO(a)),a.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+r.length);if(u.set(a),u.set(r,a.length),u=n(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){s=s||0;for(var c=0;c<16;++c)o[s+c]=u[c];return o}return Gm(u)}try{i.name=e}catch{}return i.DNS=bY,i.URL=_Y,i}function SY(e){if(typeof e=="string"){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return AY(CY(DY(e),e.length*8))}function AY(e){for(var t=[],n=e.length*32,i="0123456789abcdef",r=0;r<n;r+=8){var a=e[r>>5]>>>r%32&255,o=parseInt(i.charAt(a>>>4&15)+i.charAt(a&15),16);t.push(o)}return t}function tx(e){return(e+64>>>9<<4)+14+1}function CY(e,t){e[t>>5]|=128<<t%32,e[tx(t)-1]=t;for(var n=1732584193,i=-271733879,r=-1732584194,a=271733878,o=0;o<e.length;o+=16){var s=n,u=i,c=r,l=a;n=Sr(n,i,r,a,e[o],7,-680876936),a=Sr(a,n,i,r,e[o+1],12,-389564586),r=Sr(r,a,n,i,e[o+2],17,606105819),i=Sr(i,r,a,n,e[o+3],22,-1044525330),n=Sr(n,i,r,a,e[o+4],7,-176418897),a=Sr(a,n,i,r,e[o+5],12,1200080426),r=Sr(r,a,n,i,e[o+6],17,-1473231341),i=Sr(i,r,a,n,e[o+7],22,-45705983),n=Sr(n,i,r,a,e[o+8],7,1770035416),a=Sr(a,n,i,r,e[o+9],12,-1958414417),r=Sr(r,a,n,i,e[o+10],17,-42063),i=Sr(i,r,a,n,e[o+11],22,-1990404162),n=Sr(n,i,r,a,e[o+12],7,1804603682),a=Sr(a,n,i,r,e[o+13],12,-40341101),r=Sr(r,a,n,i,e[o+14],17,-1502002290),i=Sr(i,r,a,n,e[o+15],22,1236535329),n=Ar(n,i,r,a,e[o+1],5,-165796510),a=Ar(a,n,i,r,e[o+6],9,-1069501632),r=Ar(r,a,n,i,e[o+11],14,643717713),i=Ar(i,r,a,n,e[o],20,-373897302),n=Ar(n,i,r,a,e[o+5],5,-701558691),a=Ar(a,n,i,r,e[o+10],9,38016083),r=Ar(r,a,n,i,e[o+15],14,-660478335),i=Ar(i,r,a,n,e[o+4],20,-405537848),n=Ar(n,i,r,a,e[o+9],5,568446438),a=Ar(a,n,i,r,e[o+14],9,-1019803690),r=Ar(r,a,n,i,e[o+3],14,-187363961),i=Ar(i,r,a,n,e[o+8],20,1163531501),n=Ar(n,i,r,a,e[o+13],5,-1444681467),a=Ar(a,n,i,r,e[o+2],9,-51403784),r=Ar(r,a,n,i,e[o+7],14,1735328473),i=Ar(i,r,a,n,e[o+12],20,-1926607734),n=Cr(n,i,r,a,e[o+5],4,-378558),a=Cr(a,n,i,r,e[o+8],11,-2022574463),r=Cr(r,a,n,i,e[o+11],16,1839030562),i=Cr(i,r,a,n,e[o+14],23,-35309556),n=Cr(n,i,r,a,e[o+1],4,-1530992060),a=Cr(a,n,i,r,e[o+4],11,1272893353),r=Cr(r,a,n,i,e[o+7],16,-155497632),i=Cr(i,r,a,n,e[o+10],23,-1094730640),n=Cr(n,i,r,a,e[o+13],4,681279174),a=Cr(a,n,i,r,e[o],11,-358537222),r=Cr(r,a,n,i,e[o+3],16,-722521979),i=Cr(i,r,a,n,e[o+6],23,76029189),n=Cr(n,i,r,a,e[o+9],4,-640364487),a=Cr(a,n,i,r,e[o+12],11,-421815835),r=Cr(r,a,n,i,e[o+15],16,530742520),i=Cr(i,r,a,n,e[o+2],23,-995338651),n=Dr(n,i,r,a,e[o],6,-198630844),a=Dr(a,n,i,r,e[o+7],10,1126891415),r=Dr(r,a,n,i,e[o+14],15,-1416354905),i=Dr(i,r,a,n,e[o+5],21,-57434055),n=Dr(n,i,r,a,e[o+12],6,1700485571),a=Dr(a,n,i,r,e[o+3],10,-1894986606),r=Dr(r,a,n,i,e[o+10],15,-1051523),i=Dr(i,r,a,n,e[o+1],21,-2054922799),n=Dr(n,i,r,a,e[o+8],6,1873313359),a=Dr(a,n,i,r,e[o+15],10,-30611744),r=Dr(r,a,n,i,e[o+6],15,-1560198380),i=Dr(i,r,a,n,e[o+13],21,1309151649),n=Dr(n,i,r,a,e[o+4],6,-145523070),a=Dr(a,n,i,r,e[o+11],10,-1120210379),r=Dr(r,a,n,i,e[o+2],15,718787259),i=Dr(i,r,a,n,e[o+9],21,-343485551),n=Zo(n,s),i=Zo(i,u),r=Zo(r,c),a=Zo(a,l)}return[n,i,r,a]}function DY(e){if(e.length===0)return[];for(var t=e.length*8,n=new Uint32Array(tx(t)),i=0;i<t;i+=8)n[i>>5]|=(e[i/8]&255)<<i%32;return n}function Zo(e,t){var n=(e&65535)+(t&65535),i=(e>>16)+(t>>16)+(n>>16);return i<<16|n&65535}function wY(e,t){return e<<t|e>>>32-t}function zm(e,t,n,i,r,a){return Zo(wY(Zo(Zo(t,e),Zo(i,a)),r),n)}function Sr(e,t,n,i,r,a,o){return zm(t&n|~t&i,e,t,r,a,o)}function Ar(e,t,n,i,r,a,o){return zm(t&i|n&~i,e,t,r,a,o)}function Cr(e,t,n,i,r,a,o){return zm(t^n^i,e,t,r,a,o)}function Dr(e,t,n,i,r,a,o){return zm(n^(t|~i),e,t,r,a,o)}var IY=ex("v3",48,SY);const kY=IY;function OY(e,t,n){e=e||{};var i=e.random||(e.rng||ZO)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return Gm(i)}function xY(e,t,n,i){switch(e){case 0:return t&n^~t&i;case 1:return t^n^i;case 2:return t&n^t&i^n&i;case 3:return t^n^i}}function t1(e,t){return e<<t|e>>>32-t}function PY(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var i=unescape(encodeURIComponent(e));e=[];for(var r=0;r<i.length;++r)e.push(i.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,o=Math.ceil(a/16),s=new Array(o),u=0;u<o;++u){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=e[u*64+l*4]<<24|e[u*64+l*4+1]<<16|e[u*64+l*4+2]<<8|e[u*64+l*4+3];s[u]=c}s[o-1][14]=(e.length-1)*8/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=(e.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var h=new Uint32Array(80),d=0;d<16;++d)h[d]=s[f][d];for(var p=16;p<80;++p)h[p]=t1(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var m=n[0],g=n[1],v=n[2],E=n[3],y=n[4],T=0;T<80;++T){var b=Math.floor(T/20),S=t1(m,5)+xY(b,g,v,E)+y+t[b]+h[T]>>>0;y=E,E=v,v=t1(g,30)>>>0,g=m,m=S}n[0]=n[0]+m>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+v>>>0,n[3]=n[3]+E>>>0,n[4]=n[4]+y>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var RY=ex("v5",80,PY);const NY=RY,MY="00000000-0000-0000-0000-000000000000";function LY(e){if(!Um(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var jm=fo(Object.freeze(Object.defineProperty({__proto__:null,v1:TY,v3:kY,v4:OY,v5:NY,NIL:MY,version:LY,validate:Um,stringify:Gm,parse:JO},Symbol.toStringTag,{value:"Module"}))),n1=(()=>typeof Buffer<"u"?e=>Buffer.from(e).toString("base64"):e=>btoa(String.fromCharCode(...e)))(),BY=(()=>typeof Buffer<"u"?e=>Buffer.from(e,"base64"):e=>Uint8Array.from(atob(e),t=>t.charCodeAt(0)))();of.encode=function(e){var t=jm.parse(e),n=n1(t),i=n.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return i},of.decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/")+"==";return jm.stringify(BY(t))},of.v4=function(){var e=jm.v4(null,new Uint8Array(16)),t=n1(e),n=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return n},of.nice=function(){var e=jm.v4(null,new Uint8Array(16));e[0]=e[0]&127;var t=n1(e),n=t.replace(/\+/g,"-").replace(/\//g,"_").substring(0,22);return n},function(e){e.exports=of}(KO);const Pt=$T(KO.exports);var nx={exports:{}},Vm={},Du={exports:{}};(function(e,t){var n=200,i="__lodash_hash_undefined__",r=1,a=2,o=9007199254740991,s="[object Arguments]",u="[object Array]",c="[object AsyncFunction]",l="[object Boolean]",f="[object Date]",h="[object Error]",d="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",E="[object Object]",y="[object Promise]",T="[object Proxy]",b="[object RegExp]",S="[object Set]",w="[object String]",D="[object Symbol]",R="[object Undefined]",M="[object WeakMap]",k="[object ArrayBuffer]",L="[object DataView]",$="[object Float32Array]",P="[object Float64Array]",B="[object Int8Array]",X="[object Int16Array]",ee="[object Int32Array]",se="[object Uint8Array]",fe="[object Uint8ClampedArray]",Z="[object Uint16Array]",he="[object Uint32Array]",j=/[\\^$.*+?()[\]{}|]/g,H=/^\[object .+?Constructor\]$/,G=/^(?:0|[1-9]\d*)$/,K={};K[$]=K[P]=K[B]=K[X]=K[ee]=K[se]=K[fe]=K[Z]=K[he]=!0,K[s]=K[u]=K[k]=K[l]=K[L]=K[f]=K[h]=K[d]=K[m]=K[g]=K[E]=K[b]=K[S]=K[w]=K[M]=!1;var ae=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,pe=typeof self=="object"&&self&&self.Object===Object&&self,we=ae||pe||Function("return this")(),Ee=t&&!t.nodeType&&t,xe=Ee&&!0&&e&&!e.nodeType&&e,He=xe&&xe.exports===Ee,ke=He&&ae.process,Ye=function(){try{return ke&&ke.binding&&ke.binding("util")}catch{}}(),je=Ye&&Ye.isTypedArray;function dt(ie,Ae){for(var Fe=-1,Je=ie==null?0:ie.length,Cn=0,wt=[];++Fe<Je;){var $n=ie[Fe];Ae($n,Fe,ie)&&(wt[Cn++]=$n)}return wt}function st(ie,Ae){for(var Fe=-1,Je=Ae.length,Cn=ie.length;++Fe<Je;)ie[Cn+Fe]=Ae[Fe];return ie}function qe(ie,Ae){for(var Fe=-1,Je=ie==null?0:ie.length;++Fe<Je;)if(Ae(ie[Fe],Fe,ie))return!0;return!1}function bt(ie,Ae){for(var Fe=-1,Je=Array(ie);++Fe<ie;)Je[Fe]=Ae(Fe);return Je}function yt(ie){return function(Ae){return ie(Ae)}}function Bt(ie,Ae){return ie.has(Ae)}function On(ie,Ae){return ie?.[Ae]}function gt(ie){var Ae=-1,Fe=Array(ie.size);return ie.forEach(function(Je,Cn){Fe[++Ae]=[Cn,Je]}),Fe}function Oe(ie,Ae){return function(Fe){return ie(Ae(Fe))}}function ne(ie){var Ae=-1,Fe=Array(ie.size);return ie.forEach(function(Je){Fe[++Ae]=Je}),Fe}var oe=Array.prototype,Te=Function.prototype,I=Object.prototype,_=we["__core-js_shared__"],C=Te.toString,F=I.hasOwnProperty,te=function(){var ie=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return ie?"Symbol(src)_1."+ie:""}(),le=I.toString,ve=RegExp("^"+C.call(F).replace(j,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ue=He?we.Buffer:void 0,We=we.Symbol,nt=we.Uint8Array,Qe=I.propertyIsEnumerable,ot=oe.splice,xn=We?We.toStringTag:void 0,Tr=Object.getOwnPropertySymbols,Li=Ue?Ue.isBuffer:void 0,Br=Oe(Object.keys,Object),Fr=jh(we,"DataView"),Ie=jh(we,"Map"),ge=jh(we,"Promise"),W=jh(we,"Set"),q=jh(we,"WeakMap"),me=jh(Object,"create"),Se=uu(Fr),De=uu(Ie),be=uu(ge),de=uu(W),ye=uu(q),z=We?We.prototype:void 0,U=z?z.valueOf:void 0;function re(ie){var Ae=-1,Fe=ie==null?0:ie.length;for(this.clear();++Ae<Fe;){var Je=ie[Ae];this.set(Je[0],Je[1])}}function _e(){this.__data__=me?me(null):{},this.size=0}function Ce(ie){var Ae=this.has(ie)&&delete this.__data__[ie];return this.size-=Ae?1:0,Ae}function Ge(ie){var Ae=this.__data__;if(me){var Fe=Ae[ie];return Fe===i?void 0:Fe}return F.call(Ae,ie)?Ae[ie]:void 0}function ze(ie){var Ae=this.__data__;return me?Ae[ie]!==void 0:F.call(Ae,ie)}function ct(ie,Ae){var Fe=this.__data__;return this.size+=this.has(ie)?0:1,Fe[ie]=me&&Ae===void 0?i:Ae,this}re.prototype.clear=_e,re.prototype.delete=Ce,re.prototype.get=Ge,re.prototype.has=ze,re.prototype.set=ct;function Tt(ie){var Ae=-1,Fe=ie==null?0:ie.length;for(this.clear();++Ae<Fe;){var Je=ie[Ae];this.set(Je[0],Je[1])}}function Ht(){this.__data__=[],this.size=0}function pt(ie){var Ae=this.__data__,Fe=Er(Ae,ie);if(Fe<0)return!1;var Je=Ae.length-1;return Fe==Je?Ae.pop():ot.call(Ae,Fe,1),--this.size,!0}function Nt(ie){var Ae=this.__data__,Fe=Er(Ae,ie);return Fe<0?void 0:Ae[Fe][1]}function Qt(ie){return Er(this.__data__,ie)>-1}function ht(ie,Ae){var Fe=this.__data__,Je=Er(Fe,ie);return Je<0?(++this.size,Fe.push([ie,Ae])):Fe[Je][1]=Ae,this}Tt.prototype.clear=Ht,Tt.prototype.delete=pt,Tt.prototype.get=Nt,Tt.prototype.has=Qt,Tt.prototype.set=ht;function Ft(ie){var Ae=-1,Fe=ie==null?0:ie.length;for(this.clear();++Ae<Fe;){var Je=ie[Ae];this.set(Je[0],Je[1])}}function Jt(){this.size=0,this.__data__={hash:new re,map:new(Ie||Tt),string:new re}}function nn(ie){var Ae=LT(this,ie).delete(ie);return this.size-=Ae?1:0,Ae}function An(ie){return LT(this,ie).get(ie)}function Hr(ie){return LT(this,ie).has(ie)}function $e(ie,Ae){var Fe=LT(this,ie),Je=Fe.size;return Fe.set(ie,Ae),this.size+=Fe.size==Je?0:1,this}Ft.prototype.clear=Jt,Ft.prototype.delete=nn,Ft.prototype.get=An,Ft.prototype.has=Hr,Ft.prototype.set=$e;function et(ie){var Ae=-1,Fe=ie==null?0:ie.length;for(this.__data__=new Ft;++Ae<Fe;)this.add(ie[Ae])}function Dt(ie){return this.__data__.set(ie,i),this}function _t(ie){return this.__data__.has(ie)}et.prototype.add=et.prototype.push=Dt,et.prototype.has=_t;function ft(ie){var Ae=this.__data__=new Tt(ie);this.size=Ae.size}function $t(){this.__data__=new Tt,this.size=0}function Ct(ie){var Ae=this.__data__,Fe=Ae.delete(ie);return this.size=Ae.size,Fe}function kt(ie){return this.__data__.get(ie)}function Wt(ie){return this.__data__.has(ie)}function rn(ie,Ae){var Fe=this.__data__;if(Fe instanceof Tt){var Je=Fe.__data__;if(!Ie||Je.length<n-1)return Je.push([ie,Ae]),this.size=++Fe.size,this;Fe=this.__data__=new Ft(Je)}return Fe.set(ie,Ae),this.size=Fe.size,this}ft.prototype.clear=$t,ft.prototype.delete=Ct,ft.prototype.get=kt,ft.prototype.has=Wt,ft.prototype.set=rn;function an(ie,Ae){var Fe=BT(ie),Je=!Fe&&mRe(ie),Cn=!Fe&&!Je&&xI(ie),wt=!Fe&&!Je&&!Cn&&TG(ie),$n=Fe||Je||Cn||wt,cr=$n?bt(ie.length,String):[],br=cr.length;for(var Mn in ie)(Ae||F.call(ie,Mn))&&!($n&&(Mn=="length"||Cn&&(Mn=="offset"||Mn=="parent")||wt&&(Mn=="buffer"||Mn=="byteLength"||Mn=="byteOffset")||cRe(Mn,br)))&&cr.push(Mn);return cr}function Er(ie,Ae){for(var Fe=ie.length;Fe--;)if(mG(ie[Fe][0],Ae))return Fe;return-1}function ta(ie,Ae,Fe){var Je=Ae(ie);return BT(ie)?Je:st(Je,Fe(ie))}function Us(ie){return ie==null?ie===void 0?R:v:xn&&xn in Object(ie)?lRe(ie):pRe(ie)}function cm(ie){return hm(ie)&&Us(ie)==s}function Gs(ie,Ae,Fe,Je,Cn){return ie===Ae?!0:ie==null||Ae==null||!hm(ie)&&!hm(Ae)?ie!==ie&&Ae!==Ae:nRe(ie,Ae,Fe,Je,Gs,Cn)}function nRe(ie,Ae,Fe,Je,Cn,wt){var $n=BT(ie),cr=BT(Ae),br=$n?u:zs(ie),Mn=cr?u:zs(Ae);br=br==s?E:br,Mn=Mn==s?E:Mn;var Bi=br==E,wa=Mn==E,$r=br==Mn;if($r&&xI(ie)){if(!xI(Ae))return!1;$n=!0,Bi=!1}if($r&&!Bi)return wt||(wt=new ft),$n||TG(ie)?dG(ie,Ae,Fe,Je,Cn,wt):oRe(ie,Ae,br,Fe,Je,Cn,wt);if(!(Fe&r)){var na=Bi&&F.call(ie,"__wrapped__"),ra=wa&&F.call(Ae,"__wrapped__");if(na||ra){var js=na?ie.value():ie,Yo=ra?Ae.value():Ae;return wt||(wt=new ft),Cn(js,Yo,Fe,Je,wt)}}return $r?(wt||(wt=new ft),sRe(ie,Ae,Fe,Je,Cn,wt)):!1}function rRe(ie){if(!yG(ie)||fRe(ie))return!1;var Ae=gG(ie)?ve:H;return Ae.test(uu(ie))}function iRe(ie){return hm(ie)&&vG(ie.length)&&!!K[Us(ie)]}function aRe(ie){if(!dRe(ie))return Br(ie);var Ae=[];for(var Fe in Object(ie))F.call(ie,Fe)&&Fe!="constructor"&&Ae.push(Fe);return Ae}function dG(ie,Ae,Fe,Je,Cn,wt){var $n=Fe&r,cr=ie.length,br=Ae.length;if(cr!=br&&!($n&&br>cr))return!1;var Mn=wt.get(ie);if(Mn&&wt.get(Ae))return Mn==Ae;var Bi=-1,wa=!0,$r=Fe&a?new et:void 0;for(wt.set(ie,Ae),wt.set(Ae,ie);++Bi<cr;){var na=ie[Bi],ra=Ae[Bi];if(Je)var js=$n?Je(ra,na,Bi,Ae,ie,wt):Je(na,ra,Bi,ie,Ae,wt);if(js!==void 0){if(js)continue;wa=!1;break}if($r){if(!qe(Ae,function(Yo,cu){if(!Bt($r,cu)&&(na===Yo||Cn(na,Yo,Fe,Je,wt)))return $r.push(cu)})){wa=!1;break}}else if(!(na===ra||Cn(na,ra,Fe,Je,wt))){wa=!1;break}}return wt.delete(ie),wt.delete(Ae),wa}function oRe(ie,Ae,Fe,Je,Cn,wt,$n){switch(Fe){case L:if(ie.byteLength!=Ae.byteLength||ie.byteOffset!=Ae.byteOffset)return!1;ie=ie.buffer,Ae=Ae.buffer;case k:return!(ie.byteLength!=Ae.byteLength||!wt(new nt(ie),new nt(Ae)));case l:case f:case g:return mG(+ie,+Ae);case h:return ie.name==Ae.name&&ie.message==Ae.message;case b:case w:return ie==Ae+"";case m:var cr=gt;case S:var br=Je&r;if(cr||(cr=ne),ie.size!=Ae.size&&!br)return!1;var Mn=$n.get(ie);if(Mn)return Mn==Ae;Je|=a,$n.set(ie,Ae);var Bi=dG(cr(ie),cr(Ae),Je,Cn,wt,$n);return $n.delete(ie),Bi;case D:if(U)return U.call(ie)==U.call(Ae)}return!1}function sRe(ie,Ae,Fe,Je,Cn,wt){var $n=Fe&r,cr=pG(ie),br=cr.length,Mn=pG(Ae),Bi=Mn.length;if(br!=Bi&&!$n)return!1;for(var wa=br;wa--;){var $r=cr[wa];if(!($n?$r in Ae:F.call(Ae,$r)))return!1}var na=wt.get(ie);if(na&&wt.get(Ae))return na==Ae;var ra=!0;wt.set(ie,Ae),wt.set(Ae,ie);for(var js=$n;++wa<br;){$r=cr[wa];var Yo=ie[$r],cu=Ae[$r];if(Je)var EG=$n?Je(cu,Yo,$r,Ae,ie,wt):Je(Yo,cu,$r,ie,Ae,wt);if(!(EG===void 0?Yo===cu||Cn(Yo,cu,Fe,Je,wt):EG)){ra=!1;break}js||(js=$r=="constructor")}if(ra&&!js){var FT=ie.constructor,HT=Ae.constructor;FT!=HT&&"constructor"in ie&&"constructor"in Ae&&!(typeof FT=="function"&&FT instanceof FT&&typeof HT=="function"&&HT instanceof HT)&&(ra=!1)}return wt.delete(ie),wt.delete(Ae),ra}function pG(ie){return ta(ie,yRe,uRe)}function LT(ie,Ae){var Fe=ie.__data__;return hRe(Ae)?Fe[typeof Ae=="string"?"string":"hash"]:Fe.map}function jh(ie,Ae){var Fe=On(ie,Ae);return rRe(Fe)?Fe:void 0}function lRe(ie){var Ae=F.call(ie,xn),Fe=ie[xn];try{ie[xn]=void 0;var Je=!0}catch{}var Cn=le.call(ie);return Je&&(Ae?ie[xn]=Fe:delete ie[xn]),Cn}var uRe=Tr?function(ie){return ie==null?[]:(ie=Object(ie),dt(Tr(ie),function(Ae){return Qe.call(ie,Ae)}))}:TRe,zs=Us;(Fr&&zs(new Fr(new ArrayBuffer(1)))!=L||Ie&&zs(new Ie)!=m||ge&&zs(ge.resolve())!=y||W&&zs(new W)!=S||q&&zs(new q)!=M)&&(zs=function(ie){var Ae=Us(ie),Fe=Ae==E?ie.constructor:void 0,Je=Fe?uu(Fe):"";if(Je)switch(Je){case Se:return L;case De:return m;case be:return y;case de:return S;case ye:return M}return Ae});function cRe(ie,Ae){return Ae=Ae??o,!!Ae&&(typeof ie=="number"||G.test(ie))&&ie>-1&&ie%1==0&&ie<Ae}function hRe(ie){var Ae=typeof ie;return Ae=="string"||Ae=="number"||Ae=="symbol"||Ae=="boolean"?ie!=="__proto__":ie===null}function fRe(ie){return!!te&&te in ie}function dRe(ie){var Ae=ie&&ie.constructor,Fe=typeof Ae=="function"&&Ae.prototype||I;return ie===Fe}function pRe(ie){return le.call(ie)}function uu(ie){if(ie!=null){try{return C.call(ie)}catch{}try{return ie+""}catch{}}return""}function mG(ie,Ae){return ie===Ae||ie!==ie&&Ae!==Ae}var mRe=cm(function(){return arguments}())?cm:function(ie){return hm(ie)&&F.call(ie,"callee")&&!Qe.call(ie,"callee")},BT=Array.isArray;function gRe(ie){return ie!=null&&vG(ie.length)&&!gG(ie)}var xI=Li||ERe;function vRe(ie,Ae){return Gs(ie,Ae)}function gG(ie){if(!yG(ie))return!1;var Ae=Us(ie);return Ae==d||Ae==p||Ae==c||Ae==T}function vG(ie){return typeof ie=="number"&&ie>-1&&ie%1==0&&ie<=o}function yG(ie){var Ae=typeof ie;return ie!=null&&(Ae=="object"||Ae=="function")}function hm(ie){return ie!=null&&typeof ie=="object"}var TG=je?yt(je):iRe;function yRe(ie){return gRe(ie)?an(ie):aRe(ie)}function TRe(){return[]}function ERe(){return!1}e.exports=vRe})(Du,Du.exports);var r1={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i=[],r=0;r<arguments.length;r++){var a=arguments[r];if(!!a){var o=typeof a;if(o==="string"||o==="number")i.push(a);else if(Array.isArray(a)){if(a.length){var s=n.apply(null,a);s&&i.push(s)}}else if(o==="object"){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){i.push(a.toString());continue}for(var u in a)t.call(a,u)&&a[u]&&i.push(u)}}}return i.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(r1);var en={};en.__esModule=!0,en.noop=void 0;var FY=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};en.bottom=Ym,en.cloneLayout=GY,en.cloneLayoutItem=wu,en.childrenEqual=zY,en.collides=Wm,en.compact=ax,en.compactItem=ox,en.correctBounds=sx,en.getLayoutItem=lx,en.getFirstCollision=Iu,en.getAllCollisions=ux,en.getStatics=o1,en.moveElement=s1,en.moveElementAwayFromCollision=l1,en.perc=VY,en.setTransform=YY,en.setTopLeft=WY,en.sortLayoutItems=u1,en.sortLayoutItemsByRowCol=cx,en.sortLayoutItemsByColRow=hx,en.synchronizeLayoutWithChildren=qY,en.validateLayout=fx,en.autoBindHandlers=XY;var HY=Du.exports,$Y=rx(HY),UY=A.default,i1=rx(UY);function rx(e){return e&&e.__esModule?e:{default:e}}var ix=!0;function Ym(e){for(var t=0,n=void 0,i=0,r=e.length;i<r;i++)n=e[i].y+e[i].h,n>t&&(t=n);return t}function GY(e){for(var t=Array(e.length),n=0,i=e.length;n<i;n++)t[n]=wu(e[n]);return t}function wu(e){return{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,minW:e.minW,maxW:e.maxW,minH:e.minH,maxH:e.maxH,moved:Boolean(e.moved),static:Boolean(e.static),isDraggable:e.isDraggable,isResizable:e.isResizable}}function zY(e,t){return(0,$Y.default)(i1.default.Children.map(e,function(n){return n.key}),i1.default.Children.map(t,function(n){return n.key}))}function Wm(e,t){return!(e===t||e.x+e.w<=t.x||e.x>=t.x+t.w||e.y+e.h<=t.y||e.y>=t.y+t.h)}function ax(e,t,n){for(var i=o1(e),r=u1(e,t),a=Array(e.length),o=0,s=r.length;o<s;o++){var u=wu(r[o]);u.static||(u=ox(i,u,t,n,r),i.push(u)),a[e.indexOf(r[o])]=u,u.moved=!1}return a}var jY={x:"w",y:"h"};function a1(e,t,n,i){var r=jY[i];t[i]+=1;for(var a=e.indexOf(t),o=a+1;o<e.length;o++){var s=e[o];if(!s.static){if(s.y>t.y+t.h)break;Wm(t,s)&&a1(e,s,n+t[r],i)}}t[i]=n}function ox(e,t,n,i,r){var a=n==="vertical",o=n==="horizontal";if(a)for(t.y=Math.min(Ym(e),t.y);t.y>0&&!Iu(e,t);)t.y--;else if(o)for(t.y=Math.min(Ym(e),t.y);t.x>0&&!Iu(e,t);)t.x--;for(var s=void 0;s=Iu(e,t);)o?a1(r,t,s.x+s.w,"x"):a1(r,t,s.y+s.h,"y"),o&&t.x+t.w>i&&(t.x=i-t.w,t.y++);return t}function sx(e,t){for(var n=o1(e),i=0,r=e.length;i<r;i++){var a=e[i];if(a.x+a.w>t.cols&&(a.x=t.cols-a.w),a.x<0&&(a.x=0,a.w=t.cols),!a.static)n.push(a);else for(;Iu(n,a);)a.y++}return e}function lx(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n].i===t)return e[n]}function Iu(e,t){for(var n=0,i=e.length;n<i;n++)if(Wm(e[n],t))return e[n]}function ux(e,t){return e.filter(function(n){return Wm(n,t)})}function o1(e){return e.filter(function(t){return t.static})}function s1(e,t,n,i,r,a,o,s){if(t.static||t.y===i&&t.x===n)return e;""+t.i+String(n)+String(i)+t.x+t.y;var u=t.x,c=t.y;typeof n=="number"&&(t.x=n),typeof i=="number"&&(t.y=i),t.moved=!0;var l=u1(e,o),f=o==="vertical"&&typeof i=="number"?c>=i:o==="horizontal"&&typeof n=="number"?u>=n:!1;f&&(l=l.reverse());var h=ux(l,t);if(a&&h.length)return""+t.i,t.x=u,t.y=c,t.moved=!1,e;for(var d=0,p=h.length;d<p;d++){var m=h[d];""+t.i+t.x+t.y+m.i+m.x+m.y,!m.moved&&(m.static?e=l1(e,m,t,r,o):e=l1(e,t,m,r,o))}return e}function l1(e,t,n,i,r,a){var o=r==="horizontal",s=r==="vertical",u=!1;if(i){i=!1;var c={x:o?Math.max(t.x-n.w,0):n.x,y:s?Math.max(t.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"};if(!Iu(e,c))return""+n.i+c.x+c.y,s1(e,n,o?c.x:void 0,s?c.y:void 0,i,u,r)}return s1(e,n,o?n.x+1:void 0,s?n.y+1:void 0,i,u,r)}function VY(e){return e*100+"%"}function YY(e){var t=e.top,n=e.left,i=e.width,r=e.height,a="translate("+n+"px,"+t+"px)";return{transform:a,WebkitTransform:a,MozTransform:a,msTransform:a,OTransform:a,width:i+"px",height:r+"px",position:"absolute"}}function WY(e){var t=e.top,n=e.left,i=e.width,r=e.height;return{top:t+"px",left:n+"px",width:i+"px",height:r+"px",position:"absolute"}}function u1(e,t){return t==="horizontal"?hx(e):cx(e)}function cx(e){return[].concat(e).sort(function(t,n){return t.y>n.y||t.y===n.y&&t.x>n.x?1:t.y===n.y&&t.x===n.x?0:-1})}function hx(e){return[].concat(e).sort(function(t,n){return t.x>n.x||t.x===n.x&&t.y>n.y?1:-1})}function qY(e,t,n,i){e=e||[];var r=[];return i1.default.Children.forEach(t,function(a,o){var s=lx(e,String(a.key));if(s)r[o]=wu(s);else{!ix&&a.props._grid&&console.warn("`_grid` properties on children have been deprecated as of React 15.2. Please use `data-grid` or add your properties directly to the `layout`.");var u=a.props["data-grid"]||a.props._grid;u?(ix||fx([u],"ReactGridLayout.children"),r[o]=wu(FY({},u,{i:a.key}))):r[o]=wu({w:1,h:1,x:0,y:Ym(r),i:String(a.key)})}}),r=sx(r,{cols:n}),r=ax(r,i,n),r}function fx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout",n=["x","y","w","h"];if(!Array.isArray(e))throw new Error(t+" must be an array!");for(var i=0,r=e.length;i<r;i++){for(var a=e[i],o=0;o<n.length;o++)if(typeof a[n[o]]!="number")throw new Error("ReactGridLayout: "+t+"["+i+"]."+n[o]+" must be a number!");if(a.i&&typeof a.i!="string")throw new Error("ReactGridLayout: "+t+"["+i+"].i must be a string!");if(a.static!==void 0&&typeof a.static!="boolean")throw new Error("ReactGridLayout: "+t+"["+i+"].static must be a boolean!")}}function XY(e,t){t.forEach(function(n){return e[n]=e[n].bind(e)})}function wRe(){}en.noop=function(){};var c1={},dx={exports:{}};(function(e,t){(function(n,i){e.exports=i(Un.default,A.default)})(Pe,function(n,i){n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;function r(W,q){return q={exports:{}},W(q,q.exports),q.exports}function a(W){return function(){return W}}var o=function(){};o.thatReturns=a,o.thatReturnsFalse=a(!1),o.thatReturnsTrue=a(!0),o.thatReturnsNull=a(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(W){return W};var s=o,u=function(q){};u=function(q){if(q===void 0)throw new Error("invariant requires an error message argument")};function c(W,q,me,Se,De,be,de,ye){if(u(q),!W){var z;if(q===void 0)z=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var U=[me,Se,De,be,de,ye],re=0;z=new Error(q.replace(/%s/g,function(){return U[re++]})),z.name="Invariant Violation"}throw z.framesToPop=1,z}}var l=c,f=s;{var h=function(q){for(var me=arguments.length,Se=Array(me>1?me-1:0),De=1;De<me;De++)Se[De-1]=arguments[De];var be=0,de="Warning: "+q.replace(/%s/g,function(){return Se[be++]});typeof console<"u"&&console.error(de);try{throw new Error(de)}catch{}};f=function(q,me){if(me===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(me.indexOf("Failed Composite propType: ")!==0&&!q){for(var Se=arguments.length,De=Array(Se>2?Se-2:0),be=2;be<Se;be++)De[be-2]=arguments[be];h.apply(void 0,[me].concat(De))}}}var d=f;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;function v(W){if(W==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(W)}function E(){try{if(!Object.assign)return!1;var W=new String("abc");if(W[5]="de",Object.getOwnPropertyNames(W)[0]==="5")return!1;for(var q={},me=0;me<10;me++)q["_"+String.fromCharCode(me)]=me;var Se=Object.getOwnPropertyNames(q).map(function(be){return q[be]});if(Se.join("")!=="0123456789")return!1;var De={};return"abcdefghijklmnopqrst".split("").forEach(function(be){De[be]=be}),Object.keys(Object.assign({},De)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var y=E()?Object.assign:function(W,q){for(var me,Se=v(W),De,be=1;be<arguments.length;be++){me=Object(arguments[be]);for(var de in me)m.call(me,de)&&(Se[de]=me[de]);if(p){De=p(me);for(var ye=0;ye<De.length;ye++)g.call(me,De[ye])&&(Se[De[ye]]=me[De[ye]])}}return Se},T="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",b=T,S=l,w=d,D=b,R={};function M(W,q,me,Se,De){for(var be in W)if(W.hasOwnProperty(be)){var de;try{S(typeof W[be]=="function","%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",Se||"React class",me,be,typeof W[be]),de=W[be](q,be,Se,me,null,D)}catch(z){de=z}if(w(!de||de instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Se||"React class",me,be,typeof de),de instanceof Error&&!(de.message in R)){R[de.message]=!0;var ye=De?De():"";w(!1,"Failed %s type: %s%s",me,de.message,ye??"")}}}var k=M,L=function(W,q){var me=typeof Symbol=="function"&&Symbol.iterator,Se="@@iterator";function De($e){var et=$e&&(me&&$e[me]||$e[Se]);if(typeof et=="function")return et}var be="<<anonymous>>",de={array:re("array"),bool:re("boolean"),func:re("function"),number:re("number"),object:re("object"),string:re("string"),symbol:re("symbol"),any:_e(),arrayOf:Ce,element:Ge(),instanceOf:ze,node:pt(),objectOf:Tt,oneOf:ct,oneOfType:Ht,shape:Nt,exact:Qt};function ye($e,et){return $e===et?$e!==0||1/$e===1/et:$e!==$e&&et!==et}function z($e){this.message=$e,this.stack=""}z.prototype=Error.prototype;function U($e){var et={},Dt=0;function _t($t,Ct,kt,Wt,rn,an,Er){if(Wt=Wt||be,an=an||kt,Er!==b){if(q)l(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(typeof console<"u"){var ta=Wt+":"+kt;!et[ta]&&Dt<3&&(d(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",an,Wt),et[ta]=!0,Dt++)}}return Ct[kt]==null?$t?Ct[kt]===null?new z("The "+rn+" `"+an+"` is marked as required "+("in `"+Wt+"`, but its value is `null`.")):new z("The "+rn+" `"+an+"` is marked as required in "+("`"+Wt+"`, but its value is `undefined`.")):null:$e(Ct,kt,Wt,rn,an)}var ft=_t.bind(null,!1);return ft.isRequired=_t.bind(null,!0),ft}function re($e){function et(Dt,_t,ft,$t,Ct,kt){var Wt=Dt[_t],rn=Jt(Wt);if(rn!==$e){var an=nn(Wt);return new z("Invalid "+$t+" `"+Ct+"` of type "+("`"+an+"` supplied to `"+ft+"`, expected ")+("`"+$e+"`."))}return null}return U(et)}function _e(){return U(s.thatReturnsNull)}function Ce($e){function et(Dt,_t,ft,$t,Ct){if(typeof $e!="function")return new z("Property `"+Ct+"` of component `"+ft+"` has invalid PropType notation inside arrayOf.");var kt=Dt[_t];if(!Array.isArray(kt)){var Wt=Jt(kt);return new z("Invalid "+$t+" `"+Ct+"` of type "+("`"+Wt+"` supplied to `"+ft+"`, expected an array."))}for(var rn=0;rn<kt.length;rn++){var an=$e(kt,rn,ft,$t,Ct+"["+rn+"]",b);if(an instanceof Error)return an}return null}return U(et)}function Ge(){function $e(et,Dt,_t,ft,$t){var Ct=et[Dt];if(!W(Ct)){var kt=Jt(Ct);return new z("Invalid "+ft+" `"+$t+"` of type "+("`"+kt+"` supplied to `"+_t+"`, expected a single ReactElement."))}return null}return U($e)}function ze($e){function et(Dt,_t,ft,$t,Ct){if(!(Dt[_t]instanceof $e)){var kt=$e.name||be,Wt=Hr(Dt[_t]);return new z("Invalid "+$t+" `"+Ct+"` of type "+("`"+Wt+"` supplied to `"+ft+"`, expected ")+("instance of `"+kt+"`."))}return null}return U(et)}function ct($e){if(!Array.isArray($e))return d(!1,"Invalid argument supplied to oneOf, expected an instance of array."),s.thatReturnsNull;function et(Dt,_t,ft,$t,Ct){for(var kt=Dt[_t],Wt=0;Wt<$e.length;Wt++)if(ye(kt,$e[Wt]))return null;var rn=JSON.stringify($e);return new z("Invalid "+$t+" `"+Ct+"` of value `"+kt+"` "+("supplied to `"+ft+"`, expected one of "+rn+"."))}return U(et)}function Tt($e){function et(Dt,_t,ft,$t,Ct){if(typeof $e!="function")return new z("Property `"+Ct+"` of component `"+ft+"` has invalid PropType notation inside objectOf.");var kt=Dt[_t],Wt=Jt(kt);if(Wt!=="object")return new z("Invalid "+$t+" `"+Ct+"` of type "+("`"+Wt+"` supplied to `"+ft+"`, expected an object."));for(var rn in kt)if(kt.hasOwnProperty(rn)){var an=$e(kt,rn,ft,$t,Ct+"."+rn,b);if(an instanceof Error)return an}return null}return U(et)}function Ht($e){if(!Array.isArray($e))return d(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),s.thatReturnsNull;for(var et=0;et<$e.length;et++){var Dt=$e[et];if(typeof Dt!="function")return d(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",An(Dt),et),s.thatReturnsNull}function _t(ft,$t,Ct,kt,Wt){for(var rn=0;rn<$e.length;rn++){var an=$e[rn];if(an(ft,$t,Ct,kt,Wt,b)==null)return null}return new z("Invalid "+kt+" `"+Wt+"` supplied to "+("`"+Ct+"`."))}return U(_t)}function pt(){function $e(et,Dt,_t,ft,$t){return ht(et[Dt])?null:new z("Invalid "+ft+" `"+$t+"` supplied to "+("`"+_t+"`, expected a ReactNode."))}return U($e)}function Nt($e){function et(Dt,_t,ft,$t,Ct){var kt=Dt[_t],Wt=Jt(kt);if(Wt!=="object")return new z("Invalid "+$t+" `"+Ct+"` of type `"+Wt+"` "+("supplied to `"+ft+"`, expected `object`."));for(var rn in $e){var an=$e[rn];if(!!an){var Er=an(kt,rn,ft,$t,Ct+"."+rn,b);if(Er)return Er}}return null}return U(et)}function Qt($e){function et(Dt,_t,ft,$t,Ct){var kt=Dt[_t],Wt=Jt(kt);if(Wt!=="object")return new z("Invalid "+$t+" `"+Ct+"` of type `"+Wt+"` "+("supplied to `"+ft+"`, expected `object`."));var rn=y({},Dt[_t],$e);for(var an in rn){var Er=$e[an];if(!Er)return new z("Invalid "+$t+" `"+Ct+"` key `"+an+"` supplied to `"+ft+"`.\nBad object: "+JSON.stringify(Dt[_t],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys($e),null,"  "));var ta=Er(kt,an,ft,$t,Ct+"."+an,b);if(ta)return ta}return null}return U(et)}function ht($e){switch(typeof $e){case"number":case"string":case"undefined":return!0;case"boolean":return!$e;case"object":if(Array.isArray($e))return $e.every(ht);if($e===null||W($e))return!0;var et=De($e);if(et){var Dt=et.call($e),_t;if(et!==$e.entries){for(;!(_t=Dt.next()).done;)if(!ht(_t.value))return!1}else for(;!(_t=Dt.next()).done;){var ft=_t.value;if(ft&&!ht(ft[1]))return!1}}else return!1;return!0;default:return!1}}function Ft($e,et){return $e==="symbol"||et["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&et instanceof Symbol}function Jt($e){var et=typeof $e;return Array.isArray($e)?"array":$e instanceof RegExp?"object":Ft(et,$e)?"symbol":et}function nn($e){if(typeof $e>"u"||$e===null)return""+$e;var et=Jt($e);if(et==="object"){if($e instanceof Date)return"date";if($e instanceof RegExp)return"regexp"}return et}function An($e){var et=nn($e);switch(et){case"array":case"object":return"an "+et;case"boolean":case"date":case"regexp":return"a "+et;default:return et}}function Hr($e){return!$e.constructor||!$e.constructor.name?be:$e.constructor.name}return de.checkPropTypes=k,de.PropTypes=de,de},$=r(function(W){{var q=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103,me=function(De){return typeof De=="object"&&De!==null&&De.$$typeof===q},Se=!0;W.exports=L(me,Se)}}),P=r(function(W){/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(){var q={}.hasOwnProperty;function me(){for(var Se=[],De=0;De<arguments.length;De++){var be=arguments[De];if(!!be){var de=typeof be;if(de==="string"||de==="number")Se.push(be);else if(Array.isArray(be))Se.push(me.apply(null,be));else if(de==="object")for(var ye in be)q.call(be,ye)&&be[ye]&&Se.push(ye)}}return Se.join(" ")}W.exports?W.exports=me:window.classNames=me})()});function B(W,q){for(var me=0,Se=W.length;me<Se;me++)if(q.apply(q,[W[me],me,W]))return W[me]}function X(W){return typeof W=="function"||Object.prototype.toString.call(W)==="[object Function]"}function ee(W){return typeof W=="number"&&!isNaN(W)}function se(W){return parseInt(W,10)}function fe(W,q,me){if(W[q])return new Error("Invalid prop "+q+" passed to "+me+" - do not set this, set it on the child.")}var Z=["Moz","Webkit","O","ms"];function he(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u"||typeof window.document>"u")return"";var q=window.document.documentElement.style;if(W in q)return"";for(var me=0;me<Z.length;me++)if(j(W,Z[me])in q)return Z[me];return""}function j(W,q){return q?""+q+H(W):W}function H(W){for(var q="",me=!0,Se=0;Se<W.length;Se++)me?(q+=W[Se].toUpperCase(),me=!1):W[Se]==="-"?me=!0:q+=W[Se];return q}var G=he(),K=function(W,q){if(!(W instanceof q))throw new TypeError("Cannot call a class as a function")},ae=function(){function W(q,me){for(var Se=0;Se<me.length;Se++){var De=me[Se];De.enumerable=De.enumerable||!1,De.configurable=!0,"value"in De&&(De.writable=!0),Object.defineProperty(q,De.key,De)}}return function(q,me,Se){return me&&W(q.prototype,me),Se&&W(q,Se),q}}(),pe=function(W,q,me){return q in W?Object.defineProperty(W,q,{value:me,enumerable:!0,configurable:!0,writable:!0}):W[q]=me,W},we=Object.assign||function(W){for(var q=1;q<arguments.length;q++){var me=arguments[q];for(var Se in me)Object.prototype.hasOwnProperty.call(me,Se)&&(W[Se]=me[Se])}return W},Ee=function(W,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);W.prototype=Object.create(q&&q.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(W,q):W.__proto__=q)},xe=function(W,q){if(!W)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:W},He=function(){function W(q,me){var Se=[],De=!0,be=!1,de=void 0;try{for(var ye=q[Symbol.iterator](),z;!(De=(z=ye.next()).done)&&(Se.push(z.value),!(me&&Se.length===me));De=!0);}catch(U){be=!0,de=U}finally{try{!De&&ye.return&&ye.return()}finally{if(be)throw de}}return Se}return function(q,me){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return W(q,me);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ke="";function Ye(W,q){return ke||(ke=B(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(me){return X(W[me])})),X(W[ke])?W[ke](q):!1}function je(W,q,me){var Se=W;do{if(Ye(Se,q))return!0;if(Se===me)return!1;Se=Se.parentNode}while(Se);return!1}function dt(W,q,me){!W||(W.attachEvent?W.attachEvent("on"+q,me):W.addEventListener?W.addEventListener(q,me,!0):W["on"+q]=me)}function st(W,q,me){!W||(W.detachEvent?W.detachEvent("on"+q,me):W.removeEventListener?W.removeEventListener(q,me,!0):W["on"+q]=null)}function qe(W){var q=W.clientHeight,me=W.ownerDocument.defaultView.getComputedStyle(W);return q+=se(me.borderTopWidth),q+=se(me.borderBottomWidth),q}function bt(W){var q=W.clientWidth,me=W.ownerDocument.defaultView.getComputedStyle(W);return q+=se(me.borderLeftWidth),q+=se(me.borderRightWidth),q}function yt(W){var q=W.clientHeight,me=W.ownerDocument.defaultView.getComputedStyle(W);return q-=se(me.paddingTop),q-=se(me.paddingBottom),q}function Bt(W){var q=W.clientWidth,me=W.ownerDocument.defaultView.getComputedStyle(W);return q-=se(me.paddingLeft),q-=se(me.paddingRight),q}function On(W,q){var me=q===q.ownerDocument.body,Se=me?{left:0,top:0}:q.getBoundingClientRect(),De=W.clientX+q.scrollLeft-Se.left,be=W.clientY+q.scrollTop-Se.top;return{x:De,y:be}}function gt(W,q){var me=ne(W,q,"px");return pe({},j("transform",G),me)}function Oe(W,q){var me=ne(W,q,"");return me}function ne(W,q,me){var Se=W.x,De=W.y,be="translate("+Se+me+","+De+me+")";if(q){var de=""+(typeof q.x=="string"?q.x:q.x+me),ye=""+(typeof q.y=="string"?q.y:q.y+me);be="translate("+de+", "+ye+")"+be}return be}function oe(W,q){return W.targetTouches&&B(W.targetTouches,function(me){return q===me.identifier})||W.changedTouches&&B(W.changedTouches,function(me){return q===me.identifier})}function Te(W){if(W.targetTouches&&W.targetTouches[0])return W.targetTouches[0].identifier;if(W.changedTouches&&W.changedTouches[0])return W.changedTouches[0].identifier}function I(W){if(!!W){var q=W.getElementById("react-draggable-style-el");q||(q=W.createElement("style"),q.type="text/css",q.id="react-draggable-style-el",q.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,q.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,W.getElementsByTagName("head")[0].appendChild(q)),W.body&&F(W.body,"react-draggable-transparent-selection")}}function _(W){try{W&&W.body&&te(W.body,"react-draggable-transparent-selection"),W.selection?W.selection.empty():window.getSelection().removeAllRanges()}catch{}}function C(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return we({touchAction:"none"},W)}function F(W,q){W.classList?W.classList.add(q):W.className.match(new RegExp("(?:^|\\s)"+q+"(?!\\S)"))||(W.className+=" "+q)}function te(W,q){W.classList?W.classList.remove(q):W.className=W.className.replace(new RegExp("(?:^|\\s)"+q+"(?!\\S)","g"),"")}function le(W,q,me){if(!W.props.bounds)return[q,me];var Se=W.props.bounds;Se=typeof Se=="string"?Se:xn(Se);var De=Tr(W);if(typeof Se=="string"){var be=De.ownerDocument,de=be.defaultView,ye=void 0;if(Se==="parent"?ye=De.parentNode:ye=be.querySelector(Se),!(ye instanceof de.HTMLElement))throw new Error('Bounds selector "'+Se+'" could not find an element.');var z=de.getComputedStyle(De),U=de.getComputedStyle(ye);Se={left:-De.offsetLeft+se(U.paddingLeft)+se(z.marginLeft),top:-De.offsetTop+se(U.paddingTop)+se(z.marginTop),right:Bt(ye)-bt(De)-De.offsetLeft+se(U.paddingRight)-se(z.marginRight),bottom:yt(ye)-qe(De)-De.offsetTop+se(U.paddingBottom)-se(z.marginBottom)}}return ee(Se.right)&&(q=Math.min(q,Se.right)),ee(Se.bottom)&&(me=Math.min(me,Se.bottom)),ee(Se.left)&&(q=Math.max(q,Se.left)),ee(Se.top)&&(me=Math.max(me,Se.top)),[q,me]}function ve(W,q,me){var Se=Math.round(q/W[0])*W[0],De=Math.round(me/W[1])*W[1];return[Se,De]}function Ue(W){return W.props.axis==="both"||W.props.axis==="x"}function We(W){return W.props.axis==="both"||W.props.axis==="y"}function nt(W,q,me){var Se=typeof q=="number"?oe(W,q):null;if(typeof q=="number"&&!Se)return null;var De=Tr(me),be=me.props.offsetParent||De.offsetParent||De.ownerDocument.body;return On(Se||W,be)}function Qe(W,q,me){var Se=W.state,De=!ee(Se.lastX),be=Tr(W);return De?{node:be,deltaX:0,deltaY:0,lastX:q,lastY:me,x:q,y:me}:{node:be,deltaX:q-Se.lastX,deltaY:me-Se.lastY,lastX:Se.lastX,lastY:Se.lastY,x:q,y:me}}function ot(W,q){var me=W.props.scale;return{node:q.node,x:W.state.x+q.deltaX/me,y:W.state.y+q.deltaY/me,deltaX:q.deltaX/me,deltaY:q.deltaY/me,lastX:W.state.x,lastY:W.state.y}}function xn(W){return{left:W.left,top:W.top,right:W.right,bottom:W.bottom}}function Tr(W){var q=n.findDOMNode(W);if(!q)throw new Error("<DraggableCore>: Unmounted during event!");return q}function Li(){}var Br={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Fr=Br.mouse,Ie=function(W){Ee(q,W);function q(){var me,Se,De,be;K(this,q);for(var de=arguments.length,ye=Array(de),z=0;z<de;z++)ye[z]=arguments[z];return be=(Se=(De=xe(this,(me=q.__proto__||Object.getPrototypeOf(q)).call.apply(me,[this].concat(ye))),De),De.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null},De.handleDragStart=function(U){if(De.props.onMouseDown(U),!De.props.allowAnyClick&&typeof U.button=="number"&&U.button!==0)return!1;var re=n.findDOMNode(De);if(!re||!re.ownerDocument||!re.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var _e=re.ownerDocument;if(!(De.props.disabled||!(U.target instanceof _e.defaultView.Node)||De.props.handle&&!je(U.target,De.props.handle,re)||De.props.cancel&&je(U.target,De.props.cancel,re))){var Ce=Te(U);De.setState({touchIdentifier:Ce});var Ge=nt(U,Ce,De);if(Ge!=null){var ze=Ge.x,ct=Ge.y,Tt=Qe(De,ze,ct);De.props.onStart;var Ht=De.props.onStart(U,Tt);Ht!==!1&&(De.props.enableUserSelectHack&&I(_e),De.setState({dragging:!0,lastX:ze,lastY:ct}),dt(_e,Fr.move,De.handleDrag),dt(_e,Fr.stop,De.handleDragStop))}}},De.handleDrag=function(U){U.type==="touchmove"&&U.preventDefault();var re=nt(U,De.state.touchIdentifier,De);if(re!=null){var _e=re.x,Ce=re.y;if(Array.isArray(De.props.grid)){var Ge=_e-De.state.lastX,ze=Ce-De.state.lastY,ct=ve(De.props.grid,Ge,ze),Tt=He(ct,2);if(Ge=Tt[0],ze=Tt[1],!Ge&&!ze)return;_e=De.state.lastX+Ge,Ce=De.state.lastY+ze}var Ht=Qe(De,_e,Ce),pt=De.props.onDrag(U,Ht);if(pt===!1){try{De.handleDragStop(new MouseEvent("mouseup"))}catch{var Nt=document.createEvent("MouseEvents");Nt.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),De.handleDragStop(Nt)}return}De.setState({lastX:_e,lastY:Ce})}},De.handleDragStop=function(U){if(!!De.state.dragging){var re=nt(U,De.state.touchIdentifier,De);if(re!=null){var _e=re.x,Ce=re.y,Ge=Qe(De,_e,Ce),ze=n.findDOMNode(De);ze&&De.props.enableUserSelectHack&&_(ze.ownerDocument),De.setState({dragging:!1,lastX:NaN,lastY:NaN}),De.props.onStop(U,Ge),ze&&(st(ze.ownerDocument,Fr.move,De.handleDrag),st(ze.ownerDocument,Fr.stop,De.handleDragStop))}}},De.onMouseDown=function(U){return Fr=Br.mouse,De.handleDragStart(U)},De.onMouseUp=function(U){return Fr=Br.mouse,De.handleDragStop(U)},De.onTouchStart=function(U){return Fr=Br.touch,De.handleDragStart(U)},De.onTouchEnd=function(U){return Fr=Br.touch,De.handleDragStop(U)},Se),xe(De,be)}return ae(q,[{key:"componentWillUnmount",value:function(){var Se=n.findDOMNode(this);if(Se){var De=Se.ownerDocument;st(De,Br.mouse.move,this.handleDrag),st(De,Br.touch.move,this.handleDrag),st(De,Br.mouse.stop,this.handleDragStop),st(De,Br.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&_(De)}}},{key:"render",value:function(){return i.cloneElement(i.Children.only(this.props.children),{style:C(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),q}(i.Component);Ie.displayName="DraggableCore",Ie.propTypes={allowAnyClick:$.bool,disabled:$.bool,enableUserSelectHack:$.bool,offsetParent:function(q,me){if(q[me]&&q[me].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:$.arrayOf($.number),scale:$.number,handle:$.string,cancel:$.string,onStart:$.func,onDrag:$.func,onStop:$.func,onMouseDown:$.func,className:fe,style:fe,transform:fe},Ie.defaultProps={allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){}};var ge=function(W){Ee(q,W);function q(me){K(this,q);var Se=xe(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,me));return Se.onDragStart=function(De,be){var de=Se.props.onStart(De,ot(Se,be));if(de===!1)return!1;Se.setState({dragging:!0,dragged:!0})},Se.onDrag=function(De,be){if(!Se.state.dragging)return!1;var de=ot(Se,be),ye={x:de.x,y:de.y};if(Se.props.bounds){var z=ye.x,U=ye.y;ye.x+=Se.state.slackX,ye.y+=Se.state.slackY;var re=le(Se,ye.x,ye.y),_e=He(re,2),Ce=_e[0],Ge=_e[1];ye.x=Ce,ye.y=Ge,ye.slackX=Se.state.slackX+(z-ye.x),ye.slackY=Se.state.slackY+(U-ye.y),de.x=ye.x,de.y=ye.y,de.deltaX=ye.x-Se.state.x,de.deltaY=ye.y-Se.state.y}var ze=Se.props.onDrag(De,de);if(ze===!1)return!1;Se.setState(ye)},Se.onDragStop=function(De,be){if(!Se.state.dragging)return!1;var de=Se.props.onStop(De,ot(Se,be));if(de===!1)return!1;var ye={dragging:!1,slackX:0,slackY:0},z=Boolean(Se.props.position);if(z){var U=Se.props.position,re=U.x,_e=U.y;ye.x=re,ye.y=_e}Se.setState(ye)},Se.state={dragging:!1,dragged:!1,x:me.position?me.position.x:me.defaultPosition.x,y:me.position?me.position.y:me.defaultPosition.y,slackX:0,slackY:0,isElementSVG:!1},me.position&&!(me.onDrag||me.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),Se}return ae(q,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&n.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillReceiveProps",value:function(Se){Se.position&&(!this.props.position||Se.position.x!==this.props.position.x||Se.position.y!==this.props.position.y)&&this.setState({x:Se.position.x,y:Se.position.y})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"render",value:function(){var Se,De={},be=null,de=Boolean(this.props.position),ye=!de||this.state.dragging,z=this.props.position||this.props.defaultPosition,U={x:Ue(this)&&ye?this.state.x:z.x,y:We(this)&&ye?this.state.y:z.y};this.state.isElementSVG?be=Oe(U,this.props.positionOffset):De=gt(U,this.props.positionOffset);var re=this.props,_e=re.defaultClassName,Ce=re.defaultClassNameDragging,Ge=re.defaultClassNameDragged,ze=i.Children.only(this.props.children),ct=P(ze.props.className||"",_e,(Se={},pe(Se,Ce,this.state.dragging),pe(Se,Ge,this.state.dragged),Se));return i.createElement(Ie,we({},this.props,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),i.cloneElement(ze,{className:ct,style:we({},ze.props.style,De),transform:be}))}}]),q}(i.Component);return ge.displayName="Draggable",ge.propTypes=we({},Ie.propTypes,{axis:$.oneOf(["both","x","y","none"]),bounds:$.oneOfType([$.shape({left:$.number,right:$.number,top:$.number,bottom:$.number}),$.string,$.oneOf([!1])]),defaultClassName:$.string,defaultClassNameDragging:$.string,defaultClassNameDragged:$.string,defaultPosition:$.shape({x:$.number,y:$.number}),positionOffset:$.shape({x:$.oneOfType([$.number,$.string]),y:$.oneOfType([$.number,$.string])}),position:$.shape({x:$.number,y:$.number}),className:fe,style:fe,transform:fe}),ge.defaultProps=we({},Ie.defaultProps,{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null,scale:1}),ge.default=ge,ge.DraggableCore=Ie,ge})})(dx);var qm={exports:{}},sf={},Xm={exports:{}},px={};function mx(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=mx(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function qt(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=mx(e))&&(i&&(i+=" "),i+=t);return i}const KY=fo(Object.freeze(Object.defineProperty({__proto__:null,clsx:qt,default:qt},Symbol.toStringTag,{value:"Module"})));var Ln={},xa={};Object.defineProperty(xa,"__esModule",{value:!0}),xa.dontSetMe=tW,xa.findInArray=ZY,xa.int=eW,xa.isFunction=QY,xa.isNum=JY;function ZY(e,t){for(var n=0,i=e.length;n<i;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function QY(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function JY(e){return typeof e=="number"&&!isNaN(e)}function eW(e){return parseInt(e,10)}function tW(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))}var tl={};Object.defineProperty(tl,"__esModule",{value:!0}),tl.browserPrefixToKey=vx,tl.browserPrefixToStyle=nW,tl.default=void 0,tl.getPrefix=gx;var h1=["Moz","Webkit","O","ms"];function gx(){var e,t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var i=(e=window.document)===null||e===void 0||(t=e.documentElement)===null||t===void 0?void 0:t.style;if(!i||n in i)return"";for(var r=0;r<h1.length;r++)if(vx(n,h1[r])in i)return h1[r];return""}function vx(e,t){return t?"".concat(t).concat(rW(e)):e}function nW(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function rW(e){for(var t="",n=!0,i=0;i<e.length;i++)n?(t+=e[i].toUpperCase(),n=!1):e[i]==="-"?n=!0:t+=e[i];return t}var iW=gx();tl.default=iW;function f1(e){return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f1(e)}Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.addClassName=Ax,Ln.addEvent=sW,Ln.addUserSelectStyles=yW,Ln.createCSSTransform=pW,Ln.createSVGTransform=mW,Ln.getTouch=gW,Ln.getTouchIdentifier=vW,Ln.getTranslation=d1,Ln.innerHeight=hW,Ln.innerWidth=fW,Ln.matchesSelector=Sx,Ln.matchesSelectorAndParentsTo=oW,Ln.offsetXYFromParent=dW,Ln.outerHeight=uW,Ln.outerWidth=cW,Ln.removeClassName=Cx,Ln.removeEvent=lW,Ln.removeUserSelectStyles=TW;var _i=xa,yx=aW(tl);function Tx(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Tx=function(r){return r?n:t})(e)}function aW(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||f1(e)!=="object"&&typeof e!="function")return{default:e};var n=Tx(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}function Ex(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function bx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ex(Object(n),!0).forEach(function(i){_x(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ex(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function _x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Km="";function Sx(e,t){return Km||(Km=(0,_i.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,_i.isFunction)(e[n])})),(0,_i.isFunction)(e[Km])?e[Km](t):!1}function oW(e,t,n){var i=e;do{if(Sx(i,t))return!0;if(i===n)return!1;i=i.parentNode}while(i);return!1}function sW(e,t,n,i){if(!!e){var r=bx({capture:!0},i);e.addEventListener?e.addEventListener(t,n,r):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}}function lW(e,t,n,i){if(!!e){var r=bx({capture:!0},i);e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}}function uW(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,_i.int)(n.borderTopWidth),t+=(0,_i.int)(n.borderBottomWidth),t}function cW(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,_i.int)(n.borderLeftWidth),t+=(0,_i.int)(n.borderRightWidth),t}function hW(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,_i.int)(n.paddingTop),t-=(0,_i.int)(n.paddingBottom),t}function fW(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,_i.int)(n.paddingLeft),t-=(0,_i.int)(n.paddingRight),t}function dW(e,t,n){var i=t===t.ownerDocument.body,r=i?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-r.left)/n,o=(e.clientY+t.scrollTop-r.top)/n;return{x:a,y:o}}function pW(e,t){var n=d1(e,t,"px");return _x({},(0,yx.browserPrefixToKey)("transform",yx.default),n)}function mW(e,t){var n=d1(e,t,"");return n}function d1(e,t,n){var i=e.x,r=e.y,a="translate(".concat(i).concat(n,",").concat(r).concat(n,")");if(t){var o="".concat(typeof t.x=="string"?t.x:t.x+n),s="".concat(typeof t.y=="string"?t.y:t.y+n);a="translate(".concat(o,", ").concat(s,")")+a}return a}function gW(e,t){return e.targetTouches&&(0,_i.findInArray)(e.targetTouches,function(n){return t===n.identifier})||e.changedTouches&&(0,_i.findInArray)(e.changedTouches,function(n){return t===n.identifier})}function vW(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function yW(e){if(!!e){var t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&Ax(e.body,"react-draggable-transparent-selection")}}function TW(e){if(!!e)try{if(e.body&&Cx(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function Ax(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function Cx(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Pa={};Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.canDragX=_W,Pa.canDragY=SW,Pa.createCoreData=CW,Pa.createDraggableData=DW,Pa.getBoundPosition=EW,Pa.getControlPosition=AW,Pa.snapToGrid=bW;var Si=xa,ku=Ln;function EW(e,t,n){if(!e.props.bounds)return[t,n];var i=e.props.bounds;i=typeof i=="string"?i:wW(i);var r=p1(e);if(typeof i=="string"){var a=r.ownerDocument,o=a.defaultView,s;if(i==="parent"?s=r.parentNode:s=a.querySelector(i),!(s instanceof o.HTMLElement))throw new Error('Bounds selector "'+i+'" could not find an element.');var u=s,c=o.getComputedStyle(r),l=o.getComputedStyle(u);i={left:-r.offsetLeft+(0,Si.int)(l.paddingLeft)+(0,Si.int)(c.marginLeft),top:-r.offsetTop+(0,Si.int)(l.paddingTop)+(0,Si.int)(c.marginTop),right:(0,ku.innerWidth)(u)-(0,ku.outerWidth)(r)-r.offsetLeft+(0,Si.int)(l.paddingRight)-(0,Si.int)(c.marginRight),bottom:(0,ku.innerHeight)(u)-(0,ku.outerHeight)(r)-r.offsetTop+(0,Si.int)(l.paddingBottom)-(0,Si.int)(c.marginBottom)}}return(0,Si.isNum)(i.right)&&(t=Math.min(t,i.right)),(0,Si.isNum)(i.bottom)&&(n=Math.min(n,i.bottom)),(0,Si.isNum)(i.left)&&(t=Math.max(t,i.left)),(0,Si.isNum)(i.top)&&(n=Math.max(n,i.top)),[t,n]}function bW(e,t,n){var i=Math.round(t/e[0])*e[0],r=Math.round(n/e[1])*e[1];return[i,r]}function _W(e){return e.props.axis==="both"||e.props.axis==="x"}function SW(e){return e.props.axis==="both"||e.props.axis==="y"}function AW(e,t,n){var i=typeof t=="number"?(0,ku.getTouch)(e,t):null;if(typeof t=="number"&&!i)return null;var r=p1(n),a=n.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,ku.offsetXYFromParent)(i||e,a,n.props.scale)}function CW(e,t,n){var i=e.state,r=!(0,Si.isNum)(i.lastX),a=p1(e);return r?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-i.lastX,deltaY:n-i.lastY,lastX:i.lastX,lastY:i.lastY,x:t,y:n}}function DW(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function wW(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function p1(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Zm={},Qm={};Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.default=IW;function IW(){}function Jm(e){return Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jm(e)}Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.default=void 0;var m1=OW(A.default),Ai=v1(N.exports),kW=v1(Un.default),wr=Ln,Qo=Pa,g1=xa,lf=v1(Qm);function v1(e){return e&&e.__esModule?e:{default:e}}function Dx(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Dx=function(r){return r?n:t})(e)}function OW(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Jm(e)!=="object"&&typeof e!="function")return{default:e};var n=Dx(t);if(n&&n.has(e))return n.get(e);var i={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var o=r?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,n&&n.set(e,i),i}function wx(e,t){return NW(e)||RW(e,t)||PW(e,t)||xW()}function xW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PW(e,t){if(!!e){if(typeof e=="string")return Ix(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ix(e,t)}}function Ix(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function RW(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],r=!0,a=!1,o,s;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(i.push(o.value),!(t&&i.length===t));r=!0);}catch(u){a=!0,s=u}finally{try{!r&&n.return!=null&&n.return()}finally{if(a)throw s}}return i}}function NW(e){if(Array.isArray(e))return e}function MW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kx(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function LW(e,t,n){return t&&kx(e.prototype,t),n&&kx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function BW(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y1(e,t)}function y1(e,t){return y1=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},y1(e,t)}function FW(e){var t=$W();return function(){var i=eg(e),r;if(t){var a=eg(this).constructor;r=Reflect.construct(i,arguments,a)}else r=i.apply(this,arguments);return HW(this,r)}}function HW(e,t){if(t&&(Jm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ir(e)}function Ir(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $W(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function eg(e){return eg=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},eg(e)}function Gi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oa={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},Jo=oa.mouse,tg=function(e){BW(n,e);var t=FW(n);function n(){var i;MW(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a)),Gi(Ir(i),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Gi(Ir(i),"mounted",!1),Gi(Ir(i),"handleDragStart",function(s){if(i.props.onMouseDown(s),!i.props.allowAnyClick&&typeof s.button=="number"&&s.button!==0)return!1;var u=i.findDOMNode();if(!u||!u.ownerDocument||!u.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var c=u.ownerDocument;if(!(i.props.disabled||!(s.target instanceof c.defaultView.Node)||i.props.handle&&!(0,wr.matchesSelectorAndParentsTo)(s.target,i.props.handle,u)||i.props.cancel&&(0,wr.matchesSelectorAndParentsTo)(s.target,i.props.cancel,u))){s.type==="touchstart"&&s.preventDefault();var l=(0,wr.getTouchIdentifier)(s);i.setState({touchIdentifier:l});var f=(0,Qo.getControlPosition)(s,l,Ir(i));if(f!=null){var h=f.x,d=f.y,p=(0,Qo.createCoreData)(Ir(i),h,d);(0,lf.default)("DraggableCore: handleDragStart: %j",p),(0,lf.default)("calling",i.props.onStart);var m=i.props.onStart(s,p);m===!1||i.mounted===!1||(i.props.enableUserSelectHack&&(0,wr.addUserSelectStyles)(c),i.setState({dragging:!0,lastX:h,lastY:d}),(0,wr.addEvent)(c,Jo.move,i.handleDrag),(0,wr.addEvent)(c,Jo.stop,i.handleDragStop))}}}),Gi(Ir(i),"handleDrag",function(s){var u=(0,Qo.getControlPosition)(s,i.state.touchIdentifier,Ir(i));if(u!=null){var c=u.x,l=u.y;if(Array.isArray(i.props.grid)){var f=c-i.state.lastX,h=l-i.state.lastY,d=(0,Qo.snapToGrid)(i.props.grid,f,h),p=wx(d,2);if(f=p[0],h=p[1],!f&&!h)return;c=i.state.lastX+f,l=i.state.lastY+h}var m=(0,Qo.createCoreData)(Ir(i),c,l);(0,lf.default)("DraggableCore: handleDrag: %j",m);var g=i.props.onDrag(s,m);if(g===!1||i.mounted===!1){try{i.handleDragStop(new MouseEvent("mouseup"))}catch{var v=document.createEvent("MouseEvents");v.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.handleDragStop(v)}return}i.setState({lastX:c,lastY:l})}}),Gi(Ir(i),"handleDragStop",function(s){if(!!i.state.dragging){var u=(0,Qo.getControlPosition)(s,i.state.touchIdentifier,Ir(i));if(u!=null){var c=u.x,l=u.y;if(Array.isArray(i.props.grid)){var f=c-i.state.lastX||0,h=l-i.state.lastY||0,d=(0,Qo.snapToGrid)(i.props.grid,f,h),p=wx(d,2);f=p[0],h=p[1],c=i.state.lastX+f,l=i.state.lastY+h}var m=(0,Qo.createCoreData)(Ir(i),c,l),g=i.props.onStop(s,m);if(g===!1||i.mounted===!1)return!1;var v=i.findDOMNode();v&&i.props.enableUserSelectHack&&(0,wr.removeUserSelectStyles)(v.ownerDocument),(0,lf.default)("DraggableCore: handleDragStop: %j",m),i.setState({dragging:!1,lastX:NaN,lastY:NaN}),v&&((0,lf.default)("DraggableCore: Removing handlers"),(0,wr.removeEvent)(v.ownerDocument,Jo.move,i.handleDrag),(0,wr.removeEvent)(v.ownerDocument,Jo.stop,i.handleDragStop))}}}),Gi(Ir(i),"onMouseDown",function(s){return Jo=oa.mouse,i.handleDragStart(s)}),Gi(Ir(i),"onMouseUp",function(s){return Jo=oa.mouse,i.handleDragStop(s)}),Gi(Ir(i),"onTouchStart",function(s){return Jo=oa.touch,i.handleDragStart(s)}),Gi(Ir(i),"onTouchEnd",function(s){return Jo=oa.touch,i.handleDragStop(s)}),i}return LW(n,[{key:"componentDidMount",value:function(){this.mounted=!0;var r=this.findDOMNode();r&&(0,wr.addEvent)(r,oa.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var r=this.findDOMNode();if(r){var a=r.ownerDocument;(0,wr.removeEvent)(a,oa.mouse.move,this.handleDrag),(0,wr.removeEvent)(a,oa.touch.move,this.handleDrag),(0,wr.removeEvent)(a,oa.mouse.stop,this.handleDragStop),(0,wr.removeEvent)(a,oa.touch.stop,this.handleDragStop),(0,wr.removeEvent)(r,oa.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,wr.removeUserSelectStyles)(a)}}},{key:"findDOMNode",value:function(){var r,a,o;return(r=this.props)!==null&&r!==void 0&&r.nodeRef?(a=this.props)===null||a===void 0||(o=a.nodeRef)===null||o===void 0?void 0:o.current:kW.default.findDOMNode(this)}},{key:"render",value:function(){return m1.cloneElement(m1.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),n}(m1.Component);Zm.default=tg,Gi(tg,"displayName","DraggableCore"),Gi(tg,"propTypes",{allowAnyClick:Ai.default.bool,disabled:Ai.default.bool,enableUserSelectHack:Ai.default.bool,offsetParent:function(t,n){if(t[n]&&t[n].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Ai.default.arrayOf(Ai.default.number),handle:Ai.default.string,cancel:Ai.default.string,nodeRef:Ai.default.object,onStart:Ai.default.func,onDrag:Ai.default.func,onStop:Ai.default.func,onMouseDown:Ai.default.func,scale:Ai.default.number,className:g1.dontSetMe,style:g1.dontSetMe,transform:g1.dontSetMe}),Gi(tg,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(j){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},t(j)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),e.default=void 0;var n=p(A.default),i=h(N.exports),r=h(Un.default),a=h(KY),o=Ln,s=Pa,u=xa,c=h(Zm),l=h(Qm),f=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function h(j){return j&&j.__esModule?j:{default:j}}function d(j){if(typeof WeakMap!="function")return null;var H=new WeakMap,G=new WeakMap;return(d=function(ae){return ae?G:H})(j)}function p(j,H){if(!H&&j&&j.__esModule)return j;if(j===null||t(j)!=="object"&&typeof j!="function")return{default:j};var G=d(H);if(G&&G.has(j))return G.get(j);var K={},ae=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var pe in j)if(pe!=="default"&&Object.prototype.hasOwnProperty.call(j,pe)){var we=ae?Object.getOwnPropertyDescriptor(j,pe):null;we&&(we.get||we.set)?Object.defineProperty(K,pe,we):K[pe]=j[pe]}return K.default=j,G&&G.set(j,K),K}function m(){return m=Object.assign||function(j){for(var H=1;H<arguments.length;H++){var G=arguments[H];for(var K in G)Object.prototype.hasOwnProperty.call(G,K)&&(j[K]=G[K])}return j},m.apply(this,arguments)}function g(j,H){if(j==null)return{};var G=v(j,H),K,ae;if(Object.getOwnPropertySymbols){var pe=Object.getOwnPropertySymbols(j);for(ae=0;ae<pe.length;ae++)K=pe[ae],!(H.indexOf(K)>=0)&&(!Object.prototype.propertyIsEnumerable.call(j,K)||(G[K]=j[K]))}return G}function v(j,H){if(j==null)return{};var G={},K=Object.keys(j),ae,pe;for(pe=0;pe<K.length;pe++)ae=K[pe],!(H.indexOf(ae)>=0)&&(G[ae]=j[ae]);return G}function E(j,H){var G=Object.keys(j);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(j);H&&(K=K.filter(function(ae){return Object.getOwnPropertyDescriptor(j,ae).enumerable})),G.push.apply(G,K)}return G}function y(j){for(var H=1;H<arguments.length;H++){var G=arguments[H]!=null?arguments[H]:{};H%2?E(Object(G),!0).forEach(function(K){Z(j,K,G[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(j,Object.getOwnPropertyDescriptors(G)):E(Object(G)).forEach(function(K){Object.defineProperty(j,K,Object.getOwnPropertyDescriptor(G,K))})}return j}function T(j,H){return R(j)||D(j,H)||S(j,H)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(j,H){if(!!j){if(typeof j=="string")return w(j,H);var G=Object.prototype.toString.call(j).slice(8,-1);if(G==="Object"&&j.constructor&&(G=j.constructor.name),G==="Map"||G==="Set")return Array.from(j);if(G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G))return w(j,H)}}function w(j,H){(H==null||H>j.length)&&(H=j.length);for(var G=0,K=new Array(H);G<H;G++)K[G]=j[G];return K}function D(j,H){var G=j==null?null:typeof Symbol<"u"&&j[Symbol.iterator]||j["@@iterator"];if(G!=null){var K=[],ae=!0,pe=!1,we,Ee;try{for(G=G.call(j);!(ae=(we=G.next()).done)&&(K.push(we.value),!(H&&K.length===H));ae=!0);}catch(xe){pe=!0,Ee=xe}finally{try{!ae&&G.return!=null&&G.return()}finally{if(pe)throw Ee}}return K}}function R(j){if(Array.isArray(j))return j}function M(j,H){if(!(j instanceof H))throw new TypeError("Cannot call a class as a function")}function k(j,H){for(var G=0;G<H.length;G++){var K=H[G];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(j,K.key,K)}}function L(j,H,G){return H&&k(j.prototype,H),G&&k(j,G),Object.defineProperty(j,"prototype",{writable:!1}),j}function $(j,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(H&&H.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Object.defineProperty(j,"prototype",{writable:!1}),H&&P(j,H)}function P(j,H){return P=Object.setPrototypeOf||function(K,ae){return K.__proto__=ae,K},P(j,H)}function B(j){var H=se();return function(){var K=fe(j),ae;if(H){var pe=fe(this).constructor;ae=Reflect.construct(K,arguments,pe)}else ae=K.apply(this,arguments);return X(this,ae)}}function X(j,H){if(H&&(t(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ee(j)}function ee(j){if(j===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}function se(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fe(j){return fe=Object.setPrototypeOf?Object.getPrototypeOf:function(G){return G.__proto__||Object.getPrototypeOf(G)},fe(j)}function Z(j,H,G){return H in j?Object.defineProperty(j,H,{value:G,enumerable:!0,configurable:!0,writable:!0}):j[H]=G,j}var he=function(j){$(G,j);var H=B(G);function G(K){var ae;return M(this,G),ae=H.call(this,K),Z(ee(ae),"onDragStart",function(pe,we){(0,l.default)("Draggable: onDragStart: %j",we);var Ee=ae.props.onStart(pe,(0,s.createDraggableData)(ee(ae),we));if(Ee===!1)return!1;ae.setState({dragging:!0,dragged:!0})}),Z(ee(ae),"onDrag",function(pe,we){if(!ae.state.dragging)return!1;(0,l.default)("Draggable: onDrag: %j",we);var Ee=(0,s.createDraggableData)(ee(ae),we),xe={x:Ee.x,y:Ee.y};if(ae.props.bounds){var He=xe.x,ke=xe.y;xe.x+=ae.state.slackX,xe.y+=ae.state.slackY;var Ye=(0,s.getBoundPosition)(ee(ae),xe.x,xe.y),je=T(Ye,2),dt=je[0],st=je[1];xe.x=dt,xe.y=st,xe.slackX=ae.state.slackX+(He-xe.x),xe.slackY=ae.state.slackY+(ke-xe.y),Ee.x=xe.x,Ee.y=xe.y,Ee.deltaX=xe.x-ae.state.x,Ee.deltaY=xe.y-ae.state.y}var qe=ae.props.onDrag(pe,Ee);if(qe===!1)return!1;ae.setState(xe)}),Z(ee(ae),"onDragStop",function(pe,we){if(!ae.state.dragging)return!1;var Ee=ae.props.onStop(pe,(0,s.createDraggableData)(ee(ae),we));if(Ee===!1)return!1;(0,l.default)("Draggable: onDragStop: %j",we);var xe={dragging:!1,slackX:0,slackY:0},He=Boolean(ae.props.position);if(He){var ke=ae.props.position,Ye=ke.x,je=ke.y;xe.x=Ye,xe.y=je}ae.setState(xe)}),ae.state={dragging:!1,dragged:!1,x:K.position?K.position.x:K.defaultPosition.x,y:K.position?K.position.y:K.defaultPosition.y,prevPropsPosition:y({},K.position),slackX:0,slackY:0,isElementSVG:!1},K.position&&!(K.onDrag||K.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),ae}return L(G,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var ae,pe,we;return(ae=(pe=this.props)===null||pe===void 0||(we=pe.nodeRef)===null||we===void 0?void 0:we.current)!==null&&ae!==void 0?ae:r.default.findDOMNode(this)}},{key:"render",value:function(){var ae,pe=this.props;pe.axis,pe.bounds;var we=pe.children,Ee=pe.defaultPosition,xe=pe.defaultClassName,He=pe.defaultClassNameDragging,ke=pe.defaultClassNameDragged,Ye=pe.position,je=pe.positionOffset;pe.scale;var dt=g(pe,f),st={},qe=null,bt=Boolean(Ye),yt=!bt||this.state.dragging,Bt=Ye||Ee,On={x:(0,s.canDragX)(this)&&yt?this.state.x:Bt.x,y:(0,s.canDragY)(this)&&yt?this.state.y:Bt.y};this.state.isElementSVG?qe=(0,o.createSVGTransform)(On,je):st=(0,o.createCSSTransform)(On,je);var gt=(0,a.default)(we.props.className||"",xe,(ae={},Z(ae,He,this.state.dragging),Z(ae,ke,this.state.dragged),ae));return n.createElement(c.default,m({},dt,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(we),{className:gt,style:y(y({},we.props.style),st),transform:qe}))}}],[{key:"getDerivedStateFromProps",value:function(ae,pe){var we=ae.position,Ee=pe.prevPropsPosition;return we&&(!Ee||we.x!==Ee.x||we.y!==Ee.y)?((0,l.default)("Draggable: getDerivedStateFromProps %j",{position:we,prevPropsPosition:Ee}),{x:we.x,y:we.y,prevPropsPosition:y({},we)}):null}}]),G}(n.Component);e.default=he,Z(he,"displayName","Draggable"),Z(he,"propTypes",y(y({},c.default.propTypes),{},{axis:i.default.oneOf(["both","x","y","none"]),bounds:i.default.oneOfType([i.default.shape({left:i.default.number,right:i.default.number,top:i.default.number,bottom:i.default.number}),i.default.string,i.default.oneOf([!1])]),defaultClassName:i.default.string,defaultClassNameDragging:i.default.string,defaultClassNameDragged:i.default.string,defaultPosition:i.default.shape({x:i.default.number,y:i.default.number}),positionOffset:i.default.shape({x:i.default.oneOfType([i.default.number,i.default.string]),y:i.default.oneOfType([i.default.number,i.default.string])}),position:i.default.shape({x:i.default.number,y:i.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe})),Z(he,"defaultProps",y(y({},c.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(px);var Ox=px,xx=Ox.default,UW=Ox.DraggableCore;Xm.exports=xx,Xm.exports.default=xx,Xm.exports.DraggableCore=UW;var T1={};T1.__esModule=!0,T1.cloneElement=VW;var GW=zW(A.default);function zW(e){return e&&e.__esModule?e:{default:e}}function Px(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Rx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Px(Object(n),!0).forEach(function(i){jW(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Px(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function jW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VW(e,t){return t.style&&e.props.style&&(t.style=Rx(Rx({},e.props.style),t.style)),t.className&&e.props.className&&(t.className=e.props.className+" "+t.className),GW.default.cloneElement(e,t)}var uf={};uf.__esModule=!0,uf.resizableProps=void 0;var Mt=YW(N.exports);function YW(e){return e&&e.__esModule?e:{default:e}}var WW={axis:Mt.default.oneOf(["both","x","y","none"]),className:Mt.default.string,children:Mt.default.element.isRequired,draggableOpts:Mt.default.shape({allowAnyClick:Mt.default.bool,cancel:Mt.default.string,children:Mt.default.node,disabled:Mt.default.bool,enableUserSelectHack:Mt.default.bool,offsetParent:Mt.default.node,grid:Mt.default.arrayOf(Mt.default.number),handle:Mt.default.string,nodeRef:Mt.default.object,onStart:Mt.default.func,onDrag:Mt.default.func,onStop:Mt.default.func,onMouseDown:Mt.default.func,scale:Mt.default.number}),height:Mt.default.number.isRequired,handle:Mt.default.oneOfType([Mt.default.node,Mt.default.func]),handleSize:Mt.default.arrayOf(Mt.default.number),lockAspectRatio:Mt.default.bool,maxConstraints:Mt.default.arrayOf(Mt.default.number),minConstraints:Mt.default.arrayOf(Mt.default.number),onResizeStop:Mt.default.func,onResizeStart:Mt.default.func,onResize:Mt.default.func,resizeHandles:Mt.default.arrayOf(Mt.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:Mt.default.number,width:Mt.default.number.isRequired};uf.resizableProps=WW,sf.__esModule=!0,sf.default=void 0;var E1=ZW(A.default),qW=Xm.exports,XW=T1,KW=uf;function ZW(e){return e&&e.__esModule?e:{default:e}}function b1(){return b1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},b1.apply(this,arguments)}function Nx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Mx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nx(Object(n),!0).forEach(function(i){Ou(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nx(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function QW(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,a;for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function _1(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JW(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Ou(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S1=function(e){JW(t,e);function t(){for(var i,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return i=e.call.apply(e,[this].concat(a))||this,Ou(_1(i),"state",void 0),Ou(_1(i),"lastHandleRect",null),Ou(_1(i),"slack",null),i}var n=t.prototype;return n.componentWillUnmount=function(){this.resetData()},n.lockAspectRatio=function(r,a,o){return a=r/o,r=a*o,[r,a]},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(r,a){var o=[this.props.minConstraints,this.props.maxConstraints],s=o[0],u=o[1];if(!s&&!u)return[r,a];if(this.props.lockAspectRatio){var c=a===this.props.height;if(c){var l=this.props.width/this.props.height;a=r/l,r=a*l}else{var f=this.props.height/this.props.width;r=a/f,a=r*f}}var h=r,d=a,p=this.slack||[0,0],m=p[0],g=p[1];return r+=m,a+=g,s&&(r=Math.max(s[0],r),a=Math.max(s[1],a)),u&&(r=Math.min(u[0],r),a=Math.min(u[1],a)),this.slack=[m+(h-r),g+(d-a)],[r,a]},n.resizeHandler=function(r,a){var o=this;return function(s,u){var c=u.node,l=u.deltaX,f=u.deltaY;r==="onResizeStart"&&o.resetData();var h=(o.props.axis==="both"||o.props.axis==="x")&&a!=="n"&&a!=="s",d=(o.props.axis==="both"||o.props.axis==="y")&&a!=="e"&&a!=="w";if(!(!h&&!d)){var p=a[0],m=a[a.length-1],g=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(m==="w"){var v=g.left-o.lastHandleRect.left;l+=v}if(p==="n"){var E=g.top-o.lastHandleRect.top;f+=E}}o.lastHandleRect=g,m==="w"&&(l=-l),p==="n"&&(f=-f);var y=o.props.width+(h?l/o.props.transformScale:0),T=o.props.height+(d?f/o.props.transformScale:0),b=o.runConstraints(y,T);y=b[0],T=b[1];var S=y!==o.props.width||T!==o.props.height,w=typeof o.props[r]=="function"?o.props[r]:null,D=r==="onResize"&&!S;w&&!D&&(typeof s.persist=="function"&&s.persist(),w(s,{node:c,size:{width:y,height:T},handle:a})),r==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(r){var a=this.props.handle;return a?typeof a=="function"?a(r):a:E1.default.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+r})},n.render=function(){var r=this,a=this.props,o=a.children,s=a.className,u=a.draggableOpts;a.width,a.height,a.handle,a.handleSize,a.lockAspectRatio,a.axis,a.minConstraints,a.maxConstraints,a.onResize,a.onResizeStop,a.onResizeStart;var c=a.resizeHandles;a.transformScale;var l=QW(a,["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"]);return(0,XW.cloneElement)(o,Mx(Mx({},l),{},{className:(s?s+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(f){return E1.default.createElement(qW.DraggableCore,b1({},u,{key:"resizableHandle-"+f,onStop:r.resizeHandler("onResizeStop",f),onStart:r.resizeHandler("onResizeStart",f),onDrag:r.resizeHandler("onResize",f)}),r.renderResizeHandle(f))}))}))},t}(E1.default.Component);sf.default=S1,Ou(S1,"propTypes",KW.resizableProps),Ou(S1,"defaultProps",{handleSize:[20,20],lockAspectRatio:!1,axis:"both",minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1});var ng={};ng.__esModule=!0,ng.default=void 0;var A1=rq(A.default),eq=Lx(N.exports),tq=Lx(sf),nq=uf;function Lx(e){return e&&e.__esModule?e:{default:e}}function Bx(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return Bx=function(){return e},e}function rq(e){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var t=Bx();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var a=i?Object.getOwnPropertyDescriptor(e,r):null;a&&(a.get||a.set)?Object.defineProperty(n,r,a):n[r]=e[r]}return n.default=e,t&&t.set(e,n),n}function C1(){return C1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},C1.apply(this,arguments)}function Fx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function rg(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Fx(Object(n),!0).forEach(function(i){ig(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fx(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function iq(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,a;for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Hx(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aq(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function ig(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $x=function(e){aq(t,e);function t(){for(var i,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return i=e.call.apply(e,[this].concat(a))||this,ig(Hx(i),"state",{width:i.props.width,height:i.props.height,propsWidth:i.props.width,propsHeight:i.props.height}),ig(Hx(i),"onResize",function(s,u){var c=u.size;i.props.onResize?(s.persist&&s.persist(),i.setState(c,function(){return i.props.onResize&&i.props.onResize(s,u)})):i.setState(c)}),i}t.getDerivedStateFromProps=function(r,a){return a.propsWidth!==r.width||a.propsHeight!==r.height?{width:r.width,height:r.height,propsWidth:r.width,propsHeight:r.height}:null};var n=t.prototype;return n.render=function(){var r=this.props,a=r.handle,o=r.handleSize;r.onResize;var s=r.onResizeStart,u=r.onResizeStop,c=r.draggableOpts,l=r.minConstraints,f=r.maxConstraints,h=r.lockAspectRatio,d=r.axis;r.width,r.height;var p=r.resizeHandles,m=r.style,g=r.transformScale,v=iq(r,["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"]);return A1.createElement(tq.default,{axis:d,draggableOpts:c,handle:a,handleSize:o,height:this.state.height,lockAspectRatio:h,maxConstraints:f,minConstraints:l,onResizeStart:s,onResize:this.onResize,onResizeStop:u,resizeHandles:p,transformScale:g,width:this.state.width},A1.createElement("div",C1({},v,{style:rg(rg({},m),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},t}(A1.Component);ng.default=$x,ig($x,"propTypes",rg(rg({},nq.resizableProps),{},{children:eq.default.element})),qm.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},qm.exports.Resizable=sf.default,qm.exports.ResizableBox=ng.default,c1.__esModule=!0;var oq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},sq=A.default,cf=D1(sq),lq=N.exports,bn=D1(lq),uq=dx.exports,cq=qm.exports,ag=en,hq=r1.exports,fq=D1(hq);function D1(e){return e&&e.__esModule?e:{default:e}}function dq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ux(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function pq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w1=function(e){pq(t,e);function t(){var n,i,r;dq(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return r=(n=(i=Ux(this,e.call.apply(e,[this].concat(o))),i),i.state={resizing:null,dragging:null,className:""},n),Ux(i,r)}return t.prototype.calcColWidth=function(){var i=this.props,r=i.margin,a=i.containerPadding,o=i.containerWidth,s=i.cols;return(o-r[0]*(s-1)-a[0]*2)/s},t.prototype.calcPosition=function(i,r,a,o,s){var u=this.props,c=u.margin,l=u.containerPadding,f=u.rowHeight,h=this.calcColWidth(),d={left:Math.round((h+c[0])*i+l[0]),top:Math.round((f+c[1])*r+l[1]),width:a===1/0?a:Math.round(h*a+Math.max(0,a-1)*c[0]),height:o===1/0?o:Math.round(f*o+Math.max(0,o-1)*c[1])};return s&&s.resizing&&(d.width=Math.round(s.resizing.width),d.height=Math.round(s.resizing.height)),s&&s.dragging&&(d.top=Math.round(s.dragging.top),d.left=Math.round(s.dragging.left)),d},t.prototype.calcXY=function(i,r){var a=this.props,o=a.margin,s=a.cols,u=a.rowHeight,c=a.w,l=a.h,f=a.maxRows,h=this.calcColWidth(),d=Math.round((r-o[0])/(h+o[0])),p=Math.round((i-o[1])/(u+o[1]));return d=Math.max(Math.min(d,s-c),0),p=Math.max(Math.min(p,f-l),0),{x:d,y:p}},t.prototype.calcWH=function(i){var r=i.height,a=i.width,o=this.props,s=o.margin,u=o.maxRows,c=o.cols,l=o.rowHeight,f=o.x,h=o.y,d=this.calcColWidth(),p=Math.round((a+s[0])/(d+s[0])),m=Math.round((r+s[1])/(l+s[1]));return p=Math.max(Math.min(p,c-f),0),m=Math.max(Math.min(m,u-h),0),{w:p,h:m}},t.prototype.createStyle=function(i){var r=this.props,a=r.usePercentages,o=r.containerWidth,s=r.useCSSTransforms,u=void 0;return s?u=(0,ag.setTransform)(i):(u=(0,ag.setTopLeft)(i),a&&(u.left=(0,ag.perc)(i.left/o),u.width=(0,ag.perc)(i.width/o))),u},t.prototype.mixinDraggable=function(i){return cf.default.createElement(uq.DraggableCore,{onStart:this.onDragHandler("onDragStart"),onDrag:this.onDragHandler("onDrag"),onStop:this.onDragHandler("onDragStop"),handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:"")},i)},t.prototype.mixinResizable=function(i,r){var a=this.props,o=a.cols,s=a.x,u=a.minW,c=a.minH,l=a.maxW,f=a.maxH,h=this.calcPosition(0,0,o-s,0).width,d=this.calcPosition(0,0,u,c),p=this.calcPosition(0,0,l,f),m=[d.width,d.height],g=[Math.min(p.width,h),Math.min(p.height,1/0)];return cf.default.createElement(cq.Resizable,{width:r.width,height:r.height,minConstraints:m,maxConstraints:g,onResizeStop:this.onResizeHandler("onResizeStop"),onResizeStart:this.onResizeHandler("onResizeStart"),onResize:this.onResizeHandler("onResize")},i)},t.prototype.onDragHandler=function(i){var r=this;return function(a,o){var s=o.node,u=o.deltaX,c=o.deltaY,l=r.props[i];if(!!l){var f={top:0,left:0};switch(i){case"onDragStart":{var h=s.offsetParent;if(!h)return;var d=h.getBoundingClientRect(),p=s.getBoundingClientRect();f.left=p.left-d.left+h.scrollLeft,f.top=p.top-d.top+h.scrollTop,r.setState({dragging:f});break}case"onDrag":if(!r.state.dragging)throw new Error("onDrag called before onDragStart.");f.left=r.state.dragging.left+u,f.top=r.state.dragging.top+c,r.setState({dragging:f});break;case"onDragStop":if(!r.state.dragging)throw new Error("onDragEnd called before onDragStart.");f.left=r.state.dragging.left,f.top=r.state.dragging.top,r.setState({dragging:null});break;default:throw new Error("onDragHandler called with unrecognized handlerName: "+i)}var m=r.calcXY(f.top,f.left),g=m.x,v=m.y;return l.call(r,r.props.i,g,v,{e:a,node:s,newPosition:f})}}},t.prototype.onResizeHandler=function(i){var r=this;return function(a,o){var s=o.node,u=o.size,c=r.props[i];if(!!c){var l=r.props,f=l.cols,h=l.x,d=l.i,p=l.maxW,m=l.minW,g=l.maxH,v=l.minH,E=r.calcWH(u),y=E.w,T=E.h;y=Math.min(y,f-h),y=Math.max(y,1),y=Math.max(Math.min(y,p),m),T=Math.max(Math.min(T,g),v),r.setState({resizing:i==="onResizeStop"?null:u}),c.call(r,d,y,T,{e:a,node:s,size:u})}}},t.prototype.render=function(){var i=this.props,r=i.x,a=i.y,o=i.w,s=i.h,u=i.isDraggable,c=i.isResizable,l=i.useCSSTransforms,f=this.calcPosition(r,a,o,s,this.state),h=cf.default.Children.only(this.props.children),d=cf.default.cloneElement(h,{className:(0,fq.default)("react-grid-item",h.props.className,this.props.className,{static:this.props.static,resizing:Boolean(this.state.resizing),"react-draggable":u,"react-draggable-dragging":Boolean(this.state.dragging),cssTransforms:l}),style:oq({},this.props.style,h.props.style,this.createStyle(f))});return c&&(d=this.mixinResizable(d,f)),u&&(d=this.mixinDraggable(d)),d},t}(cf.default.Component);w1.propTypes={children:bn.default.element,cols:bn.default.number.isRequired,containerWidth:bn.default.number.isRequired,rowHeight:bn.default.number.isRequired,margin:bn.default.array.isRequired,maxRows:bn.default.number.isRequired,containerPadding:bn.default.array.isRequired,x:bn.default.number.isRequired,y:bn.default.number.isRequired,w:bn.default.number.isRequired,h:bn.default.number.isRequired,minW:function(t,n){var i=t[n];if(typeof i!="number")return new Error("minWidth not Number");if(i>t.w||i>t.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(t,n){var i=t[n];if(typeof i!="number")return new Error("maxWidth not Number");if(i<t.w||i<t.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(t,n){var i=t[n];if(typeof i!="number")return new Error("minHeight not Number");if(i>t.h||i>t.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(t,n){var i=t[n];if(typeof i!="number")return new Error("maxHeight not Number");if(i<t.h||i<t.minH)return new Error("maxHeight smaller than item height/minHeight")},i:bn.default.string.isRequired,onDragStop:bn.default.func,onDragStart:bn.default.func,onDrag:bn.default.func,onResizeStop:bn.default.func,onResizeStart:bn.default.func,onResize:bn.default.func,isDraggable:bn.default.bool.isRequired,isResizable:bn.default.bool.isRequired,static:bn.default.bool,useCSSTransforms:bn.default.bool.isRequired,className:bn.default.string,handle:bn.default.string,cancel:bn.default.string},w1.defaultProps={className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0},c1.default=w1,Vm.__esModule=!0;var Gx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mq=A.default,nl=hf(mq),gq=N.exports,_n=hf(gq),vq=Du.exports,zx=hf(vq),yq=r1.exports,Tq=hf(yq),ln=en,Eq=c1,jx=hf(Eq);function hf(e){return e&&e.__esModule?e:{default:e}}function bq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _q(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Sq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var og=function(e){Sq(t,e);function t(n,i){bq(this,t);var r=_q(this,e.call(this,n,i));return Aq.call(r),(0,ln.autoBindHandlers)(r,["onDragStart","onDrag","onDragStop","onResizeStart","onResize","onResizeStop"]),r}return t.prototype.componentDidMount=function(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)},t.prototype.componentWillReceiveProps=function(i){var r=void 0;if(!(0,zx.default)(i.layout,this.props.layout)||i.compactType!==this.props.compactType?r=i.layout:(0,ln.childrenEqual)(this.props.children,i.children)||(r=this.state.layout),r){var a=(0,ln.synchronizeLayoutWithChildren)(r,i.children,i.cols,this.compactType(i)),o=this.state.layout;this.setState({layout:a}),this.onLayoutMaybeChanged(a,o)}},t.prototype.containerHeight=function(){if(!!this.props.autoSize){var i=(0,ln.bottom)(this.state.layout),r=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return i*this.props.rowHeight+(i-1)*this.props.margin[1]+r*2+"px"}},t.prototype.compactType=function(i){return i||(i=this.props),i.verticalCompact===!1?null:i.compactType},t.prototype.onDragStart=function(i,r,a,o){var s=o.e,u=o.node,c=this.state.layout,l=(0,ln.getLayoutItem)(c,i);if(!!l)return this.setState({oldDragItem:(0,ln.cloneLayoutItem)(l),oldLayout:this.state.layout}),this.props.onDragStart(c,l,l,null,s,u)},t.prototype.onDrag=function(i,r,a,o){var s=o.e,u=o.node,c=this.state.oldDragItem,l=this.state.layout,f=this.props.cols,h=(0,ln.getLayoutItem)(l,i);if(!!h){var d={w:h.w,h:h.h,x:h.x,y:h.y,placeholder:!0,i},p=!0;l=(0,ln.moveElement)(l,h,r,a,p,this.props.preventCollision,this.compactType(),f),this.props.onDrag(l,c,h,d,s,u),this.setState({layout:(0,ln.compact)(l,this.compactType(),f),activeDrag:d})}},t.prototype.onDragStop=function(i,r,a,o){var s=o.e,u=o.node,c=this.state.oldDragItem,l=this.state.layout,f=this.props,h=f.cols,d=f.preventCollision,p=(0,ln.getLayoutItem)(l,i);if(!!p){var m=!0;l=(0,ln.moveElement)(l,p,r,a,m,d,this.compactType(),h),this.props.onDragStop(l,c,p,null,s,u);var g=(0,ln.compact)(l,this.compactType(),h),v=this.state.oldLayout;this.setState({activeDrag:null,layout:g,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(g,v)}},t.prototype.onLayoutMaybeChanged=function(i,r){r||(r=this.state.layout),(0,zx.default)(r,i)||this.props.onLayoutChange(i)},t.prototype.onResizeStart=function(i,r,a,o){var s=o.e,u=o.node,c=this.state.layout,l=(0,ln.getLayoutItem)(c,i);!l||(this.setState({oldResizeItem:(0,ln.cloneLayoutItem)(l),oldLayout:this.state.layout}),this.props.onResizeStart(c,l,l,null,s,u))},t.prototype.onResize=function(i,r,a,o){var s=o.e,u=o.node,c=this.state,l=c.layout,f=c.oldResizeItem,h=this.props,d=h.cols,p=h.preventCollision,m=(0,ln.getLayoutItem)(l,i);if(!!m){var g=void 0;if(p){var v=(0,ln.getAllCollisions)(l,Gx({},m,{w:r,h:a})).filter(function(b){return b.i!==m.i});if(g=v.length>0,g){var E=1/0,y=1/0;v.forEach(function(b){b.x>m.x&&(E=Math.min(E,b.x)),b.y>m.y&&(y=Math.min(y,b.y))}),Number.isFinite(E)&&(m.w=E-m.x),Number.isFinite(y)&&(m.h=y-m.y)}}g||(m.w=r,m.h=a);var T={w:m.w,h:m.h,x:m.x,y:m.y,static:!0,i};this.props.onResize(l,f,m,T,s,u),this.setState({layout:(0,ln.compact)(l,this.compactType(),d),activeDrag:T})}},t.prototype.onResizeStop=function(i,r,a,o){var s=o.e,u=o.node,c=this.state,l=c.layout,f=c.oldResizeItem,h=this.props.cols,d=(0,ln.getLayoutItem)(l,i);this.props.onResizeStop(l,f,d,null,s,u);var p=(0,ln.compact)(l,this.compactType(),h),m=this.state.oldLayout;this.setState({activeDrag:null,layout:p,oldResizeItem:null,oldLayout:null}),this.onLayoutMaybeChanged(p,m)},t.prototype.placeholder=function(){var i=this.state.activeDrag;if(!i)return null;var r=this.props,a=r.width,o=r.cols,s=r.margin,u=r.containerPadding,c=r.rowHeight,l=r.maxRows,f=r.useCSSTransforms;return nl.default.createElement(jx.default,{w:i.w,h:i.h,x:i.x,y:i.y,i:i.i,className:"react-grid-placeholder",containerWidth:a,cols:o,margin:s,containerPadding:u||s,maxRows:l,rowHeight:c,isDraggable:!1,isResizable:!1,useCSSTransforms:f},nl.default.createElement("div",null))},t.prototype.processGridItem=function(i){if(!(!i||!i.key)){var r=(0,ln.getLayoutItem)(this.state.layout,String(i.key));if(!r)return null;var a=this.props,o=a.width,s=a.cols,u=a.margin,c=a.containerPadding,l=a.rowHeight,f=a.maxRows,h=a.isDraggable,d=a.isResizable,p=a.useCSSTransforms,m=a.draggableCancel,g=a.draggableHandle,v=this.state.mounted,E=Boolean(!r.static&&h&&(r.isDraggable||r.isDraggable==null)),y=Boolean(!r.static&&d&&(r.isResizable||r.isResizable==null));return nl.default.createElement(jx.default,{containerWidth:o,cols:s,margin:u,containerPadding:c||u,maxRows:f,rowHeight:l,cancel:m,handle:g,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:E,isResizable:y,useCSSTransforms:p&&v,usePercentages:!v,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static},i)}},t.prototype.render=function(){var i=this,r=this.props,a=r.className,o=r.style,s=(0,Tq.default)("react-grid-layout",a),u=Gx({height:this.containerHeight()},o);return nl.default.createElement("div",{className:s,style:u},nl.default.Children.map(this.props.children,function(c){return i.processGridItem(c)}),this.placeholder())},t}(nl.default.Component);og.displayName="ReactGridLayout",og.propTypes={className:_n.default.string,style:_n.default.object,width:_n.default.number,autoSize:_n.default.bool,cols:_n.default.number,draggableCancel:_n.default.string,draggableHandle:_n.default.string,verticalCompact:function(t){t.verticalCompact},compactType:_n.default.oneOf(["vertical","horizontal"]),layout:function(t){var n=t.layout;n!==void 0&&(0,ln.validateLayout)(n,"layout")},margin:_n.default.arrayOf(_n.default.number),containerPadding:_n.default.arrayOf(_n.default.number),rowHeight:_n.default.number,maxRows:_n.default.number,isDraggable:_n.default.bool,isResizable:_n.default.bool,preventCollision:_n.default.bool,useCSSTransforms:_n.default.bool,onLayoutChange:_n.default.func,onDragStart:_n.default.func,onDrag:_n.default.func,onDragStop:_n.default.func,onResizeStart:_n.default.func,onResize:_n.default.func,onResizeStop:_n.default.func,children:function(t,n){var i=t[n],r={};nl.default.Children.forEach(i,function(a){if(r[a.key])throw new Error('Duplicate child key "'+a.key+'" found! This will cause problems in ReactGridLayout.');r[a.key]=!0})}},og.defaultProps={autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isDraggable:!0,isResizable:!0,useCSSTransforms:!0,verticalCompact:!0,compactType:"vertical",preventCollision:!1,onLayoutChange:ln.noop,onDragStart:ln.noop,onDrag:ln.noop,onDragStop:ln.noop,onResizeStart:ln.noop,onResize:ln.noop,onResizeStop:ln.noop};var Aq=function(){this.state={activeDrag:null,layout:(0,ln.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,this.compactType()),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null}};Vm.default=og;var I1={},rl={};rl.__esModule=!0,rl.getBreakpointFromWidth=Cq,rl.getColsFromBreakpoint=Dq,rl.findOrGenerateResponsiveLayout=wq,rl.sortBreakpoints=k1;var sg=en;function Cq(e,t){for(var n=k1(e),i=n[0],r=1,a=n.length;r<a;r++){var o=n[r];t>e[o]&&(i=o)}return i}function Dq(e,t){if(!t[e])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+e+" is missing!");return t[e]}function wq(e,t,n,i,r,a){if(e[n])return(0,sg.cloneLayout)(e[n]);for(var o=e[i],s=k1(t),u=s.slice(s.indexOf(n)),c=0,l=u.length;c<l;c++){var f=u[c];if(e[f]){o=e[f];break}}return o=(0,sg.cloneLayout)(o||[]),(0,sg.compact)((0,sg.correctBounds)(o,{cols:r}),a,r)}function k1(e){var t=Object.keys(e);return t.sort(function(n,i){return e[n]-e[i]})}I1.__esModule=!0;var Vx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Iq=A.default,Yx=lg(Iq),kq=N.exports,il=lg(kq),Oq=Du.exports,O1=lg(Oq),xu=en,al=rl,xq=Vm,Pq=lg(xq);function lg(e){return e&&e.__esModule?e:{default:e}}function Rq(e,t){var n={};for(var i in e)t.indexOf(i)>=0||!Object.prototype.hasOwnProperty.call(e,i)||(n[i]=e[i]);return n}function Nq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wx(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Mq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var qx=function(t){return Object.prototype.toString.call(t)},x1=function(e){Mq(t,e);function t(){var n,i,r;Nq(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return r=(n=(i=Wx(this,e.call.apply(e,[this].concat(o))),i),i.state=i.generateInitialState(),i.onLayoutChange=function(u){var c;i.props.onLayoutChange(u,Vx({},i.props.layouts,(c={},c[i.state.breakpoint]=u,c)))},n),Wx(i,r)}return t.prototype.generateInitialState=function(){var i=this.props,r=i.width,a=i.breakpoints,o=i.layouts,s=i.cols,u=(0,al.getBreakpointFromWidth)(a,r),c=(0,al.getColsFromBreakpoint)(u,s),l=this.props.verticalCompact===!1?null:this.props.compactType,f=(0,al.findOrGenerateResponsiveLayout)(o,a,u,u,c,l);return{layout:f,breakpoint:u,cols:c}},t.prototype.componentWillReceiveProps=function(i){if(i.width!=this.props.width||i.breakpoint!==this.props.breakpoint||!(0,O1.default)(i.breakpoints,this.props.breakpoints)||!(0,O1.default)(i.cols,this.props.cols))this.onWidthChange(i);else if(!(0,O1.default)(i.layouts,this.props.layouts)){var r=this.state,a=r.breakpoint,o=r.cols,s=(0,al.findOrGenerateResponsiveLayout)(i.layouts,i.breakpoints,a,a,o,i.compactType);this.setState({layout:s})}},t.prototype.onWidthChange=function(i){var r=i.breakpoints,a=i.cols,o=i.layouts,s=i.compactType,u=i.breakpoint||(0,al.getBreakpointFromWidth)(i.breakpoints,i.width),c=this.state.breakpoint;if(c!==u||this.props.breakpoints!==r||this.props.cols!==a){c in o||(o[c]=(0,xu.cloneLayout)(this.state.layout));var l=(0,al.getColsFromBreakpoint)(u,a),f=(0,al.findOrGenerateResponsiveLayout)(o,r,u,c,l,s);f=(0,xu.synchronizeLayoutWithChildren)(f,i.children,l,s),o[u]=f,this.props.onLayoutChange(f,o),this.props.onBreakpointChange(u,l),this.props.onWidthChange(i.width,i.margin,l,i.containerPadding),this.setState({breakpoint:u,layout:f,cols:l})}},t.prototype.render=function(){var i=this.props;i.breakpoint,i.breakpoints,i.cols,i.layouts,i.onBreakpointChange,i.onLayoutChange,i.onWidthChange;var r=Rq(i,["breakpoint","breakpoints","cols","layouts","onBreakpointChange","onLayoutChange","onWidthChange"]);return Yx.default.createElement(Pq.default,Vx({},r,{onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))},t}(Yx.default.Component);x1.propTypes={breakpoint:il.default.string,breakpoints:il.default.object,cols:il.default.object,layouts:function(t,n){if(qx(t[n])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+qx(t[n]));Object.keys(t[n]).forEach(function(i){if(!(i in t.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,xu.validateLayout)(t.layouts[i],"layouts."+i)})},width:il.default.number.isRequired,onBreakpointChange:il.default.func,onLayoutChange:il.default.func,onWidthChange:il.default.func},x1.defaultProps={breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},layouts:{},onBreakpointChange:xu.noop,onLayoutChange:xu.noop,onWidthChange:xu.noop},I1.default=x1;var P1={};P1.__esModule=!0;var Lq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};P1.default=Vq;var Bq=A.default,R1=N1(Bq),Fq=N.exports,Hq=N1(Fq),$q=Un.default,Uq=N1($q);function N1(e){return e&&e.__esModule?e:{default:e}}function Gq(e,t){var n={};for(var i in e)t.indexOf(i)>=0||!Object.prototype.hasOwnProperty.call(e,i)||(n[i]=e[i]);return n}function zq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xx(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function jq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Vq(e){var t,n;return n=t=function(i){jq(r,i);function r(){var a,o,s;zq(this,r);for(var u=arguments.length,c=Array(u),l=0;l<u;l++)c[l]=arguments[l];return s=(a=(o=Xx(this,i.call.apply(i,[this].concat(c))),o),o.state={width:1280},o.mounted=!1,o.onWindowResize=function(){if(!!o.mounted){var f=Uq.default.findDOMNode(o);f instanceof HTMLElement&&o.setState({width:f.offsetWidth})}},a),Xx(o,s)}return r.prototype.componentDidMount=function(){this.mounted=!0,window.addEventListener("resize",this.onWindowResize),this.onWindowResize()},r.prototype.componentWillUnmount=function(){this.mounted=!1,window.removeEventListener("resize",this.onWindowResize)},r.prototype.render=function(){var o=this.props,s=o.measureBeforeMount,u=Gq(o,["measureBeforeMount"]);return s&&!this.mounted?R1.default.createElement("div",{className:this.props.className,style:this.props.style}):R1.default.createElement(e,Lq({},u,this.state))},r}(R1.default.Component),t.defaultProps={measureBeforeMount:!1},t.propTypes={measureBeforeMount:Hq.default.bool},n}(function(e){e.exports=Vm.default,e.exports.utils=en,e.exports.Responsive=I1.default,e.exports.Responsive.utils=rl,e.exports.WidthProvider=P1.default})(nx);const Yq=nx.exports;var M1={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(typeof window<"u"?window:Pe,function(){if(typeof window>"u")return null;var n=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),i=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(l){return n.setTimeout(l,20)},r=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||function(l){n.clearTimeout(l)};function a(l,f){var h=Object.prototype.toString.call(l),d=h==="[object Array]"||h==="[object NodeList]"||h==="[object HTMLCollection]"||h==="[object Object]"||typeof jQuery<"u"&&l instanceof jQuery||typeof Elements<"u"&&l instanceof Elements,p=0,m=l.length;if(d)for(;p<m;p++)f(l[p]);else f(l)}function o(l){if(!l.getBoundingClientRect)return{width:l.offsetWidth,height:l.offsetHeight};var f=l.getBoundingClientRect();return{width:Math.round(f.width),height:Math.round(f.height)}}function s(l,f){Object.keys(f).forEach(function(h){l.style[h]=f[h]})}var u=function(l,f){var h=0;function d(){var m=[];this.add=function(E){m.push(E)};var g,v;this.call=function(E){for(g=0,v=m.length;g<v;g++)m[g].call(this,E)},this.remove=function(E){var y=[];for(g=0,v=m.length;g<v;g++)m[g]!==E&&y.push(m[g]);m=y},this.length=function(){return m.length}}function p(m,g){if(!!m){if(m.resizedAttached){m.resizedAttached.add(g);return}m.resizedAttached=new d,m.resizedAttached.add(g),m.resizeSensor=document.createElement("div"),m.resizeSensor.dir="ltr",m.resizeSensor.className="resize-sensor";var v={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},E={position:"absolute",left:"0px",top:"0px",transition:"0s"};s(m.resizeSensor,v);var y=document.createElement("div");y.className="resize-sensor-expand",s(y,v);var T=document.createElement("div");s(T,E),y.appendChild(T);var b=document.createElement("div");b.className="resize-sensor-shrink",s(b,v);var S=document.createElement("div");s(S,E),s(S,{width:"200%",height:"200%"}),b.appendChild(S),m.resizeSensor.appendChild(y),m.resizeSensor.appendChild(b),m.appendChild(m.resizeSensor);var w=window.getComputedStyle(m),D=w?w.getPropertyValue("position"):null;D!=="absolute"&&D!=="relative"&&D!=="fixed"&&D!=="sticky"&&(m.style.position="relative");var R=!1,M=0,k=o(m),L=0,$=0,P=!0;h=0;var B=function(){var Z=m.offsetWidth,he=m.offsetHeight;T.style.width=Z+10+"px",T.style.height=he+10+"px",y.scrollLeft=Z+10,y.scrollTop=he+10,b.scrollLeft=Z+10,b.scrollTop=he+10},X=function(){if(P){var Z=m.offsetWidth===0&&m.offsetHeight===0;if(Z){h||(h=i(function(){h=0,X()}));return}else P=!1}B()};m.resizeSensor.resetSensor=X;var ee=function(){M=0,R&&(L=k.width,$=k.height,m.resizedAttached&&m.resizedAttached.call(k))},se=function(){k=o(m),R=k.width!==L||k.height!==$,R&&!M&&(M=i(ee)),X()},fe=function(Z,he,j){Z.attachEvent?Z.attachEvent("on"+he,j):Z.addEventListener(he,j)};fe(y,"scroll",se),fe(b,"scroll",se),h=i(function(){h=0,X()})}}a(l,function(m){p(m,f)}),this.detach=function(m){h||(r(h),h=0),u.detach(l,m)},this.reset=function(){l.resizeSensor.resetSensor()}};if(u.reset=function(l){a(l,function(f){f.resizeSensor.resetSensor()})},u.detach=function(l,f){a(l,function(h){!h||h.resizedAttached&&typeof f=="function"&&(h.resizedAttached.remove(f),h.resizedAttached.length())||h.resizeSensor&&(h.contains(h.resizeSensor)&&h.removeChild(h.resizeSensor),delete h.resizeSensor,delete h.resizedAttached)})},typeof MutationObserver<"u"){var c=new MutationObserver(function(l){for(var f in l)if(l.hasOwnProperty(f))for(var h=l[f].addedNodes,d=0;d<h.length;d++)h[d].resizeSensor&&u.reset(h[d])});document.addEventListener("DOMContentLoaded",function(l){c.observe(document.body,{childList:!0,subtree:!0})})}return u})})(M1);var Kx={exports:{}};(function(e,t){(function(n,i){e.exports=i(M1.exports)})(typeof window<"u"?window:Pe,function(n){var i=function(){var a,o={},s=[];function u(w){w||(w=document.documentElement);var D=window.getComputedStyle(w,null).fontSize;return parseFloat(D)||16}function c(w){if(!w.getBoundingClientRect)return{width:w.offsetWidth,height:w.offsetHeight};var D=w.getBoundingClientRect();return{width:Math.round(D.width),height:Math.round(D.height)}}function l(w,D){var R=D.split(/\d/),M=R[R.length-1];switch(D=parseFloat(D),M){case"px":return D;case"em":return D*u(w);case"rem":return D*u();case"vw":return D*document.documentElement.clientWidth/100;case"vh":return D*document.documentElement.clientHeight/100;case"vmin":case"vmax":var k=document.documentElement.clientWidth/100,L=document.documentElement.clientHeight/100,$=Math[M==="vmin"?"min":"max"];return D*$(k,L);default:return D}}function f(w,D){this.element=w;var R,M,k,L,$,P,B,X,ee=["min-width","min-height","max-width","max-height"];this.call=function(){k=c(this.element),P={};for(R in o[D])!o[D].hasOwnProperty(R)||(M=o[D][R],L=l(this.element,M.value),$=M.property==="width"?k.width:k.height,X=M.mode+"-"+M.property,B="",M.mode==="min"&&$>=L&&(B+=M.value),M.mode==="max"&&$<=L&&(B+=M.value),P[X]||(P[X]=""),B&&(" "+P[X]+" ").indexOf(" "+B+" ")===-1&&(P[X]+=" "+B));for(var se in ee)!ee.hasOwnProperty(se)||(P[ee[se]]?this.element.setAttribute(ee[se],P[ee[se]].substr(1)):this.element.removeAttribute(ee[se]))}}function h(w,D){w.elementQueriesSetupInformation||(w.elementQueriesSetupInformation=new f(w,D)),w.elementQueriesSensor||(w.elementQueriesSensor=new n(w,function(){w.elementQueriesSetupInformation.call()}))}function d(w,D,R,M){if(typeof o[w]>"u"){o[w]=[];var k=s.length;a.innerHTML+=`
`+w+" {animation: 0.1s element-queries;}",a.innerHTML+=`
`+w+" > .resize-sensor {min-width: "+k+"px;}",s.push(w)}o[w].push({mode:D,property:R,value:M})}function p(w){var D;if(document.querySelectorAll&&(D=w?w.querySelectorAll.bind(w):document.querySelectorAll.bind(document)),!D&&typeof $$<"u"&&(D=$$),!D&&typeof jQuery<"u"&&(D=jQuery),!D)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return D}function m(w){var D=p(w);for(var R in o)if(o.hasOwnProperty(R))for(var M=D(R,w),k=0,L=M.length;k<L;k++)h(M[k],R)}function g(w){var D=[],R=[],M=[],k=0,L=-1,$=[];for(var P in w.children)if(!!w.children.hasOwnProperty(P)&&w.children[P].tagName&&w.children[P].tagName.toLowerCase()==="img"){D.push(w.children[P]);var B=w.children[P].getAttribute("min-width")||w.children[P].getAttribute("data-min-width"),X=w.children[P].getAttribute("data-src")||w.children[P].getAttribute("url");M.push(X);var ee={minWidth:B};R.push(ee),B?w.children[P].style.display="none":(k=D.length-1,w.children[P].style.display="block")}L=k;function se(){var fe=!1,Z;for(Z in D)!D.hasOwnProperty(Z)||R[Z].minWidth&&w.offsetWidth>R[Z].minWidth&&(fe=Z);if(fe||(fe=k),L!==fe)if($[fe])D[L].style.display="none",D[fe].style.display="block",L=fe;else{var he=new Image;he.onload=function(){D[fe].src=M[fe],D[L].style.display="none",D[fe].style.display="block",$[fe]=!0,L=fe},he.src=M[fe]}else D[fe].src=M[fe]}w.resizeSensorInstance=new n(w,se),se()}function v(){for(var w=p(),D=w("[data-responsive-image],[responsive-image]"),R=0,M=D.length;R<M;R++)g(D[R])}var E=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/mgi,y=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/mgi;function T(w){var D,R,M,k;for(w=w.replace(/'/g,'"');(D=E.exec(w))!==null;)for(R=D[1]+D[3],M=D[2];(k=y.exec(M))!==null;)d(R,k[1],k[2],k[3])}function b(w){var D="";if(!!w)if(typeof w=="string")w=w.toLowerCase(),(w.indexOf("min-width")!==-1||w.indexOf("max-width")!==-1)&&T(w);else for(var R=0,M=w.length;R<M;R++)w[R].type===1?(D=w[R].selectorText||w[R].cssText,(D.indexOf("min-height")!==-1||D.indexOf("max-height")!==-1||D.indexOf("min-width")!==-1||D.indexOf("max-width")!==-1)&&T(D)):w[R].type===4?b(w[R].cssRules||w[R].rules):w[R].type===3&&w[R].styleSheet.hasOwnProperty("cssRules")&&b(w[R].styleSheet.cssRules)}var S=!1;this.init=function(){var w="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?w="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?w="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(w="oanimationstart"),document.body.addEventListener(w,function(M){var k=M.target,L=k&&window.getComputedStyle(k,null),$=L&&L.getPropertyValue("animation-name"),P=$&&$.indexOf("element-queries")!==-1;if(P){k.elementQueriesSensor=new n(k,function(){k.elementQueriesSetupInformation&&k.elementQueriesSetupInformation.call()});var B=window.getComputedStyle(k.resizeSensor,null),X=B.getPropertyValue("min-width");X=parseInt(X.replace("px","")),h(M.target,s[X])}}),S||(a=document.createElement("style"),a.type="text/css",a.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",a.innerHTML+=`
@keyframes element-queries { 0% { visibility: inherit; } }`,document.getElementsByTagName("head")[0].appendChild(a),S=!0);for(var D=0,R=document.styleSheets.length;D<R;D++)try{document.styleSheets[D].href&&document.styleSheets[D].href.indexOf("file://")===0&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[D].href),b(document.styleSheets[D].cssRules||document.styleSheets[D].rules||document.styleSheets[D].cssText)}catch{}v()},this.findElementQueriesElements=function(w){m(w)},this.update=function(){this.init()}};i.update=function(){i.instance.update()},i.detach=function(a){a.elementQueriesSetupInformation?(a.elementQueriesSensor.detach(),delete a.elementQueriesSetupInformation,delete a.elementQueriesSensor):a.resizeSensorInstance&&(a.resizeSensorInstance.detach(),delete a.resizeSensorInstance)},i.init=function(){i.instance||(i.instance=new i),i.instance.init()};var r=function(a){if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var o=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(a(),clearInterval(o))},10);else window.onload=a};return i.findElementQueriesElements=function(a){i.instance.findElementQueriesElements(a)},i.listen=function(){r(i.init)},i})})(Kx);var ug={ResizeSensor:M1.exports,ElementQueries:Kx.exports};function cg(e){var t="    ";if(isNaN(parseInt(e)))t=e;else switch(e){case 1:t=" ";break;case 2:t="  ";break;case 3:t="   ";break;case 4:t="    ";break;case 5:t="     ";break;case 6:t="      ";break;case 7:t="       ";break;case 8:t="        ";break;case 9:t="         ";break;case 10:t="          ";break;case 11:t="           ";break;case 12:t="            ";break}for(var n=[`
`],i=0;i<100;i++)n.push(n[i]+t);return n}function Eo(){this.step="    ",this.shift=cg(this.step)}Eo.prototype.xml=function(e,t){var n=e.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),i=n.length,r=!1,a=0,o="",s=0,u=t?cg(t):this.shift;for(s=0;s<i;s++)n[s].search(/<!/)>-1?(o+=u[a]+n[s],r=!0,(n[s].search(/-->/)>-1||n[s].search(/\]>/)>-1||n[s].search(/!DOCTYPE/)>-1)&&(r=!1)):n[s].search(/-->/)>-1||n[s].search(/\]>/)>-1?(o+=n[s],r=!1):/^<\w/.exec(n[s-1])&&/^<\/\w/.exec(n[s])&&/^<[\w:\-\.\,]+/.exec(n[s-1])==/^<\/[\w:\-\.\,]+/.exec(n[s])[0].replace("/","")?(o+=n[s],r||a--):n[s].search(/<\w/)>-1&&n[s].search(/<\//)==-1&&n[s].search(/\/>/)==-1?o=r?o+=n[s]:o+=u[a++]+n[s]:n[s].search(/<\w/)>-1&&n[s].search(/<\//)>-1?o=r?o+=n[s]:o+=u[a]+n[s]:n[s].search(/<\//)>-1?o=r?o+=n[s]:o+=u[--a]+n[s]:n[s].search(/\/>/)>-1?o=r?o+=n[s]:o+=u[a]+n[s]:n[s].search(/<\?/)>-1||n[s].search(/xmlns\:/)>-1||n[s].search(/xmlns\=/)>-1?o+=u[a]+n[s]:o+=n[s];return o[0]==`
`?o.slice(1):o},Eo.prototype.json=function(e,n){var n=n||this.step;return typeof JSON>"u"?e:typeof e=="string"?JSON.stringify(JSON.parse(e),null,n):typeof e=="object"?JSON.stringify(e,null,n):e},Eo.prototype.css=function(e,t){var n=e.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),i=n.length,r=0,a="",o=0,s=t?cg(t):this.shift;for(o=0;o<i;o++)/\{/.exec(n[o])?a+=s[r++]+n[o]:/\}/.exec(n[o])?a+=s[--r]+n[o]:(/\*\\/.exec(n[o]),a+=s[r]+n[o]);return a.replace(/^\n{1,}/,"")};function Wq(e,t){return t-(e.replace(/\(/g,"").length-e.replace(/\)/g,"").length)}function qq(e,t){return e.replace(/\s{1,}/g," ").replace(/ AND /ig,"~::~"+t+t+"AND ").replace(/ BETWEEN /ig,"~::~"+t+"BETWEEN ").replace(/ CASE /ig,"~::~"+t+"CASE ").replace(/ ELSE /ig,"~::~"+t+"ELSE ").replace(/ END /ig,"~::~"+t+"END ").replace(/ FROM /ig,"~::~FROM ").replace(/ GROUP\s{1,}BY/ig,"~::~GROUP BY ").replace(/ HAVING /ig,"~::~HAVING ").replace(/ IN /ig," IN ").replace(/ JOIN /ig,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /ig,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /ig,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /ig,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /ig,"~::~RIGHT JOIN ").replace(/ ON /ig,"~::~"+t+"ON ").replace(/ OR /ig,"~::~"+t+t+"OR ").replace(/ ORDER\s{1,}BY/ig,"~::~ORDER BY ").replace(/ OVER /ig,"~::~"+t+"OVER ").replace(/\(\s{0,}SELECT /ig,"~::~(SELECT ").replace(/\)\s{0,}SELECT /ig,")~::~SELECT ").replace(/ THEN /ig," THEN~::~"+t).replace(/ UNION /ig,"~::~UNION~::~").replace(/ USING /ig,"~::~USING ").replace(/ WHEN /ig,"~::~"+t+"WHEN ").replace(/ WHERE /ig,"~::~WHERE ").replace(/ WITH /ig,"~::~WITH ").replace(/ ALL /ig," ALL ").replace(/ AS /ig," AS ").replace(/ ASC /ig," ASC ").replace(/ DESC /ig," DESC ").replace(/ DISTINCT /ig," DISTINCT ").replace(/ EXISTS /ig," EXISTS ").replace(/ NOT /ig," NOT ").replace(/ NULL /ig," NULL ").replace(/ LIKE /ig," LIKE ").replace(/\s{0,}SELECT /ig,"SELECT ").replace(/\s{0,}UPDATE /ig,"UPDATE ").replace(/ SET /ig," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}Eo.prototype.sql=function(e,t){var n=e.replace(/\s{1,}/g," ").replace(/\'/ig,"~::~'").split("~::~"),i=n.length,r=[],a=0,o=this.step,s=0,u="",c=0,l=t?cg(t):this.shift;for(c=0;c<i;c++)c%2?r=r.concat(n[c]):r=r.concat(qq(n[c],o));for(i=r.length,c=0;c<i;c++)s=Wq(r[c],s),/\s{0,}\s{0,}SELECT\s{0,}/.exec(r[c])&&(r[c]=r[c].replace(/\,/g,`,
`+o+o)),/\s{0,}\s{0,}SET\s{0,}/.exec(r[c])&&(r[c]=r[c].replace(/\,/g,`,
`+o+o)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(r[c])?(a++,u+=l[a]+r[c]):/\'/.exec(r[c])?(s<1&&a&&a--,u+=r[c]):(u+=l[a]+r[c],s<1&&a&&a--);return u=u.replace(/^\n{1,}/,"").replace(/\n{1,}/g,`
`),u},Eo.prototype.xmlmin=function(e,t){var n=t?e:e.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns");return n.replace(/>\s{0,}</g,"><")},Eo.prototype.jsonmin=function(e){return typeof JSON>"u"?e:JSON.stringify(JSON.parse(e),null,0)},Eo.prototype.cssmin=function(e,t){var n=t?e:e.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"");return n.replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},Eo.prototype.sqlmin=function(e){return e.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")};var Xq=new Eo,Kq=function(t,n){if(n=n.split(":")[0],t=+t,!t)return!1;switch(n){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0},L1={},Zq=Object.prototype.hasOwnProperty,Qq;function Zx(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function Qx(e){try{return encodeURIComponent(e)}catch{return null}}function Jq(e){for(var t=/([^=?#&]+)=?([^&]*)/g,n={},i;i=t.exec(e);){var r=Zx(i[1]),a=Zx(i[2]);r===null||a===null||r in n||(n[r]=a)}return n}function eX(e,t){t=t||"";var n=[],i,r;typeof t!="string"&&(t="?");for(r in e)if(Zq.call(e,r)){if(i=e[r],!i&&(i===null||i===Qq||isNaN(i))&&(i=""),r=Qx(r),i=Qx(i),r===null||i===null)continue;n.push(r+"="+i)}return n.length?t+n.join("&"):""}L1.stringify=eX,L1.parse=Jq;var Jx=Kq,hg=L1,tX=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,eP=/[\n\r\t]/g,nX=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,tP=/:\d+$/,rX=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,iX=/^[a-zA-Z]:/;function B1(e){return(e||"").toString().replace(tX,"")}var F1=[["#","hash"],["?","query"],function(t,n){return Ra(n.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],nP={hash:1,query:1};function rP(e){var t;typeof window<"u"?t=window:typeof globalThis<"u"?t=globalThis:typeof self<"u"?t=self:t={};var n=t.location||{};e=e||n;var i={},r=typeof e,a;if(e.protocol==="blob:")i=new Na(unescape(e.pathname),{});else if(r==="string"){i=new Na(e,{});for(a in nP)delete i[a]}else if(r==="object"){for(a in e)a in nP||(i[a]=e[a]);i.slashes===void 0&&(i.slashes=nX.test(e.href))}return i}function Ra(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function iP(e,t){e=B1(e),e=e.replace(eP,""),t=t||{};var n=rX.exec(e),i=n[1]?n[1].toLowerCase():"",r=!!n[2],a=!!n[3],o=0,s;return r?a?(s=n[2]+n[3]+n[4],o=n[2].length+n[3].length):(s=n[2]+n[4],o=n[2].length):a?(s=n[3]+n[4],o=n[3].length):s=n[4],i==="file:"?o>=2&&(s=s.slice(2)):Ra(i)?s=n[4]:i?r&&(s=s.slice(2)):o>=2&&Ra(t.protocol)&&(s=n[4]),{protocol:i,slashes:r||Ra(i),slashesCount:o,rest:s}}function aX(e,t){if(e==="")return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),i=n.length,r=n[i-1],a=!1,o=0;i--;)n[i]==="."?n.splice(i,1):n[i]===".."?(n.splice(i,1),o++):o&&(i===0&&(a=!0),n.splice(i,1),o--);return a&&n.unshift(""),(r==="."||r==="..")&&n.push(""),n.join("/")}function Na(e,t,n){if(e=B1(e),e=e.replace(eP,""),!(this instanceof Na))return new Na(e,t,n);var i,r,a,o,s,u,c=F1.slice(),l=typeof t,f=this,h=0;for(l!=="object"&&l!=="string"&&(n=t,t=null),n&&typeof n!="function"&&(n=hg.parse),t=rP(t),r=iP(e||"",t),i=!r.protocol&&!r.slashes,f.slashes=r.slashes||i&&t.slashes,f.protocol=r.protocol||t.protocol||"",e=r.rest,(r.protocol==="file:"&&(r.slashesCount!==2||iX.test(e))||!r.slashes&&(r.protocol||r.slashesCount<2||!Ra(f.protocol)))&&(c[3]=[/(.*)/,"pathname"]);h<c.length;h++){if(o=c[h],typeof o=="function"){e=o(e,f);continue}a=o[0],u=o[1],a!==a?f[u]=e:typeof a=="string"?(s=a==="@"?e.lastIndexOf(a):e.indexOf(a),~s&&(typeof o[2]=="number"?(f[u]=e.slice(0,s),e=e.slice(s+o[2])):(f[u]=e.slice(s),e=e.slice(0,s)))):(s=a.exec(e))&&(f[u]=s[1],e=e.slice(0,s.index)),f[u]=f[u]||i&&o[3]&&t[u]||"",o[4]&&(f[u]=f[u].toLowerCase())}n&&(f.query=n(f.query)),i&&t.slashes&&f.pathname.charAt(0)!=="/"&&(f.pathname!==""||t.pathname!=="")&&(f.pathname=aX(f.pathname,t.pathname)),f.pathname.charAt(0)!=="/"&&Ra(f.protocol)&&(f.pathname="/"+f.pathname),Jx(f.port,f.protocol)||(f.host=f.hostname,f.port=""),f.username=f.password="",f.auth&&(s=f.auth.indexOf(":"),~s?(f.username=f.auth.slice(0,s),f.username=encodeURIComponent(decodeURIComponent(f.username)),f.password=f.auth.slice(s+1),f.password=encodeURIComponent(decodeURIComponent(f.password))):f.username=encodeURIComponent(decodeURIComponent(f.auth)),f.auth=f.password?f.username+":"+f.password:f.username),f.origin=f.protocol!=="file:"&&Ra(f.protocol)&&f.host?f.protocol+"//"+f.host:"null",f.href=f.toString()}function oX(e,t,n){var i=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(n||hg.parse)(t)),i[e]=t;break;case"port":i[e]=t,Jx(t,i.protocol)?t&&(i.host=i.hostname+":"+t):(i.host=i.hostname,i[e]="");break;case"hostname":i[e]=t,i.port&&(t+=":"+i.port),i.host=t;break;case"host":i[e]=t,tP.test(t)?(t=t.split(":"),i.port=t.pop(),i.hostname=t.join(":")):(i.hostname=t,i.port="");break;case"protocol":i.protocol=t.toLowerCase(),i.slashes=!n;break;case"pathname":case"hash":if(t){var r=e==="pathname"?"/":"#";i[e]=t.charAt(0)!==r?r+t:t}else i[e]=t;break;case"username":case"password":i[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(i.username=t.slice(0,a),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=t.slice(a+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(t))}for(var o=0;o<F1.length;o++){var s=F1[o];s[4]&&(i[s[1]]=i[s[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin=i.protocol!=="file:"&&Ra(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i}function sX(e){(!e||typeof e!="function")&&(e=hg.stringify);var t,n=this,i=n.host,r=n.protocol;r&&r.charAt(r.length-1)!==":"&&(r+=":");var a=r+(n.protocol&&n.slashes||Ra(n.protocol)?"//":"");return n.username?(a+=n.username,n.password&&(a+=":"+n.password),a+="@"):n.password?(a+=":"+n.password,a+="@"):n.protocol!=="file:"&&Ra(n.protocol)&&!i&&n.pathname!=="/"&&(a+="@"),(i[i.length-1]===":"||tP.test(n.hostname)&&!n.port)&&(i+=":"),a+=i+n.pathname,t=typeof n.query=="object"?e(n.query):n.query,t&&(a+=t.charAt(0)!=="?"?"?"+t:t),n.hash&&(a+=n.hash),a}Na.prototype={set:oX,toString:sX},Na.extractProtocol=iP,Na.location=rP,Na.trimLeft=B1,Na.qs=hg;var lX=Na;const aP=(()=>{try{return new window.BroadcastChannel("pub-sub-es")}catch{return{postMessage:()=>{}}}})(),H1=(e,t)=>t?e.toLowerCase():e,oP=(e,{caseInsensitive:t}={})=>(n,i,r=1/0)=>{const a=H1(n,t);return e[a]||(e[a]=[],e.__times__[a]=[]),e[a].push(i),e.__times__[a].push(+r||1/0),{event:a,handler:i}},$1=(e,{caseInsensitive:t}={})=>(n,i)=>{typeof n=="object"&&(i=n.handler,n=n.event);const r=H1(n,t);if(!e[r])return;const a=e[r].indexOf(i);a===-1||a>=e[r].length||(e[r].splice(a,1),e.__times__[r].splice(a,1))},sP=(e,t)=>()=>{e.forEach(n=>n(t))},lP=(e,{isGlobal:t,caseInsensitive:n,async:i}={})=>{const r=$1(e);return(a,o,s={})=>{const u=H1(a,n);if(!e[u])return;const c=[...e[u]];if(c.forEach((l,f)=>{--e.__times__[u][f]<1&&r(u,l)}),i||s.async?setTimeout(sP(c,o),0):sP(c,o)(),t&&!s.isNoGlobalBroadcast)try{aP.postMessage({event:u,news:o})}catch(l){if(l instanceof DOMException)console.warn(`Could not broadcast '${u}' globally. Payload is not clonable.`);else throw l}}},uX=e=>()=>{Object.keys(e).filter(t=>t[0]!=="_").forEach(t=>{e[t]=void 0,e.__times__[t]=void 0,delete e[t],delete e.__times__[t]})},uP=()=>({__times__:{}}),fg=({async:e=!1,caseInsensitive:t=!1,stack:n=uP()}={})=>(n.__times__||(n.__times__={}),{publish:lP(n,{async:e,caseInsensitive:t}),subscribe:oP(n,{caseInsensitive:t}),unsubscribe:$1(n,{caseInsensitive:t}),clear:uX(n),stack:n}),dg=uP(),ff={publish:lP(dg,{isGlobal:!0}),subscribe:oP(dg),unsubscribe:$1(dg),stack:dg};aP.onmessage=({data:{event:e,news:t}})=>ff.publish(e,t,!0);const mt={"context-menu":"_context-menu_18ock_1","context-menu-dark":"_context-menu-dark_18ock_12","context-menu-icon":"_context-menu-icon_18ock_17","context-menu-item":"_context-menu-item_18ock_27","context-menu-hr":"_context-menu-hr_18ock_38","play-icon":"_play-icon_18ock_45","context-menu-span":"_context-menu-span_18ock_52","context-menu-thumbnail":"_context-menu-thumbnail_18ock_60","context-menu-thumbnail-inline":"_context-menu-thumbnail-inline_18ock_65"};function St(e){return A.default.createElement("div",{"data-menu-item-for":typeof e.children=="string"?e.children:null,className:mt["context-menu-item"],onClick:t=>e.onClick(t),onMouseEnter:t=>e.onMouseEnter(t),onMouseLeave:t=>e.onMouseLeave(t),role:"button",tabIndex:0},A.default.createElement("span",{className:mt["context-menu-span"]},e.children))}St.defaultProps={onMouseEnter:()=>{},onMouseLeave:()=>{}},St.propTypes={children:N.exports.node.isRequired,onClick:N.exports.func.isRequired,onMouseEnter:N.exports.func,onMouseLeave:N.exports.func};var cX={value:()=>{}};function Pu(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new pg(n)}function pg(e){this._=e}function hX(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}pg.prototype=Pu.prototype={constructor:pg,on:function(e,t){var n=this._,i=hX(e+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(e=i[a]).type)&&(r=fX(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(r=(e=i[a]).type)n[r]=cP(n[r],e.name,t);else if(t==null)for(r in n)n[r]=cP(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new pg(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function fX(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function cP(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=cX,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}function U1(e){e.stopImmediatePropagation()}function Ru(e){e.preventDefault(),e.stopImmediatePropagation()}function mg(e){var t=e.document.documentElement,n=xt(e).on("dragstart.drag",Ru,!0);"onselectstart"in t?n.on("selectstart.drag",Ru,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function gg(e,t){var n=e.document.documentElement,i=xt(e).on("dragstart.drag",null);t&&(i.on("click.drag",Ru,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const vg=e=>()=>e;function G1(e,{sourceEvent:t,subject:n,target:i,identifier:r,active:a,x:o,y:s,dx:u,dy:c,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:l}})}G1.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function dX(e){return!e.ctrlKey&&!e.button}function pX(){return this.parentNode}function mX(e,t){return t??{x:e.x,y:e.y}}function gX(){return navigator.maxTouchPoints||"ontouchstart"in this}function bo(){var e=dX,t=pX,n=mX,i=gX,r={},a=Pu("start","drag","end"),o=0,s,u,c,l,f=0;function h(T){T.on("mousedown.drag",d).filter(i).on("touchstart.drag",g).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(T,b){if(!(l||!e.call(this,T,b))){var S=y(this,t.call(this,T,b),T,b,"mouse");!S||(xt(T.view).on("mousemove.drag",p,!0).on("mouseup.drag",m,!0),mg(T.view),U1(T),c=!1,s=T.clientX,u=T.clientY,S("start",T))}}function p(T){if(Ru(T),!c){var b=T.clientX-s,S=T.clientY-u;c=b*b+S*S>f}r.mouse("drag",T)}function m(T){xt(T.view).on("mousemove.drag mouseup.drag",null),gg(T.view,c),Ru(T),r.mouse("end",T)}function g(T,b){if(!!e.call(this,T,b)){var S=T.changedTouches,w=t.call(this,T,b),D=S.length,R,M;for(R=0;R<D;++R)(M=y(this,w,T,b,S[R].identifier,S[R]))&&(U1(T),M("start",T,S[R]))}}function v(T){var b=T.changedTouches,S=b.length,w,D;for(w=0;w<S;++w)(D=r[b[w].identifier])&&(Ru(T),D("drag",T,b[w]))}function E(T){var b=T.changedTouches,S=b.length,w,D;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),w=0;w<S;++w)(D=r[b[w].identifier])&&(U1(T),D("end",T,b[w]))}function y(T,b,S,w,D,R){var M=a.copy(),k=sn(R||S,b),L,$,P;if((P=n.call(T,new G1("beforestart",{sourceEvent:S,target:h,identifier:D,active:o,x:k[0],y:k[1],dx:0,dy:0,dispatch:M}),w))!=null)return L=P.x-k[0]||0,$=P.y-k[1]||0,function B(X,ee,se){var fe=k,Z;switch(X){case"start":r[D]=B,Z=o++;break;case"end":delete r[D],--o;case"drag":k=sn(se||ee,b),Z=o;break}M.call(X,T,new G1(X,{sourceEvent:ee,subject:P,target:h,identifier:D,active:Z,x:k[0]+L,y:k[1]+$,dx:k[0]-fe[0],dy:k[1]-fe[1],dispatch:M}),w)}}return h.filter=function(T){return arguments.length?(e=typeof T=="function"?T:vg(!!T),h):e},h.container=function(T){return arguments.length?(t=typeof T=="function"?T:vg(T),h):t},h.subject=function(T){return arguments.length?(n=typeof T=="function"?T:vg(T),h):n},h.touchable=function(T){return arguments.length?(i=typeof T=="function"?T:vg(!!T),h):i},h.on=function(){var T=a.on.apply(a,arguments);return T===a?h:T},h.clickDistance=function(T){return arguments.length?(f=(T=+T)*T,h):Math.sqrt(f)},h}const vX=Object.freeze(Object.defineProperty({__proto__:null,drag:bo,dragDisable:mg,dragEnable:gg},Symbol.toStringTag,{value:"Module"}));var Nu=0,df=0,pf=0,hP=1e3,yg,mf,Tg=0,ol=0,Eg=0,gf=typeof performance=="object"&&performance.now?performance:Date,fP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function z1(){return ol||(fP(yX),ol=gf.now()+Eg)}function yX(){ol=0}function bg(){this._call=this._time=this._next=null}bg.prototype=dP.prototype={constructor:bg,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?z1():+n)+(t==null?0:+t),!this._next&&mf!==this&&(mf?mf._next=this:yg=this,mf=this),this._call=e,this._time=n,j1()},stop:function(){this._call&&(this._call=null,this._time=1/0,j1())}};function dP(e,t,n){var i=new bg;return i.restart(e,t,n),i}function TX(){z1(),++Nu;for(var e=yg,t;e;)(t=ol-e._time)>=0&&e._call.call(null,t),e=e._next;--Nu}function pP(){ol=(Tg=gf.now())+Eg,Nu=df=0;try{TX()}finally{Nu=0,bX(),ol=0}}function EX(){var e=gf.now(),t=e-Tg;t>hP&&(Eg-=t,Tg=e)}function bX(){for(var e,t=yg,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:yg=n);mf=e,j1(i)}function j1(e){if(!Nu){df&&(df=clearTimeout(df));var t=e-ol;t>24?(e<1/0&&(df=setTimeout(pP,e-gf.now()-Eg)),pf&&(pf=clearInterval(pf))):(pf||(Tg=gf.now(),pf=setInterval(EX,hP)),Nu=1,fP(pP))}}function mP(e,t,n){var i=new bg;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var _X=Pu("start","end","cancel","interrupt"),SX=[],gP=0,vP=1,V1=2,_g=3,yP=4,Y1=5,Sg=6;function Ag(e,t,n,i,r,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;AX(e,n,{name:t,index:i,group:r,on:_X,tween:SX,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:gP})}function W1(e,t){var n=sa(e,t);if(n.state>gP)throw new Error("too late; already scheduled");return n}function Ma(e,t){var n=sa(e,t);if(n.state>_g)throw new Error("too late; already running");return n}function sa(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function AX(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=dP(a,0,n.time);function a(c){n.state=vP,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var l,f,h,d;if(n.state!==vP)return u();for(l in i)if(d=i[l],d.name===n.name){if(d.state===_g)return mP(o);d.state===yP?(d.state=Sg,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[l]):+l<t&&(d.state=Sg,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[l])}if(mP(function(){n.state===_g&&(n.state=yP,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=V1,n.on.call("start",e,e.__data__,n.index,n.group),n.state===V1){for(n.state=_g,r=new Array(h=n.tween.length),l=0,f=-1;l<h;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=d);r.length=f+1}}function s(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=Y1,1),f=-1,h=r.length;++f<h;)r[f].call(e,l);n.state===Y1&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Sg,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function q1(e,t){var n=e.__transition,i,r,a=!0,o;if(!!n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){a=!1;continue}r=i.state>V1&&i.state<Y1,i.state=Sg,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}a&&delete e.__transition}}function CX(e){return this.each(function(){q1(this,e)})}function DX(e,t){var n,i;return function(){var r=Ma(this,e),a=r.tween;if(a!==n){i=n=a;for(var o=0,s=i.length;o<s;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function wX(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var a=Ma(this,e),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:t,value:n},u=0,c=r.length;u<c;++u)if(r[u].name===t){r[u]=s;break}u===c&&r.push(s)}a.tween=r}}function IX(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=sa(this.node(),n).tween,r=0,a=i.length,o;r<a;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?DX:wX)(n,e,t))}function X1(e,t,n){var i=e._id;return e.each(function(){var r=Ma(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return sa(r,i).value[t]}}function TP(e,t){var n;return(typeof t=="number"?$i:t instanceof Kn?Tu:(n=Kn(t))?(t=n,Tu):wE)(e,t)}function kX(e){return function(){this.removeAttribute(e)}}function OX(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xX(e,t,n){var i,r=n+"",a;return function(){var o=this.getAttribute(e);return o===r?null:o===i?a:a=t(i=o,n)}}function PX(e,t,n){var i,r=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?a:a=t(i=o,n)}}function RX(e,t,n){var i,r,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===i&&u===r?a:(r=u,a=t(i=o,s)))}}function NX(e,t,n){var i,r,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===i&&u===r?a:(r=u,a=t(i=o,s)))}}function MX(e,t){var n=Vs(e),i=n==="transform"?Zk:TP;return this.attrTween(e,typeof t=="function"?(n.local?NX:RX)(n,i,X1(this,"attr."+e,t)):t==null?(n.local?OX:kX)(n):(n.local?PX:xX)(n,i,t))}function LX(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function BX(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function FX(e,t){var n,i;function r(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&BX(e,a)),n}return r._value=t,r}function HX(e,t){var n,i;function r(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&LX(e,a)),n}return r._value=t,r}function $X(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Vs(e);return this.tween(n,(i.local?FX:HX)(i,t))}function UX(e,t){return function(){W1(this,e).delay=+t.apply(this,arguments)}}function GX(e,t){return t=+t,function(){W1(this,e).delay=t}}function zX(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?UX:GX)(t,e)):sa(this.node(),t).delay}function jX(e,t){return function(){Ma(this,e).duration=+t.apply(this,arguments)}}function VX(e,t){return t=+t,function(){Ma(this,e).duration=t}}function YX(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jX:VX)(t,e)):sa(this.node(),t).duration}function WX(e,t){if(typeof t!="function")throw new Error;return function(){Ma(this,e).ease=t}}function qX(e){var t=this._id;return arguments.length?this.each(WX(t,e)):sa(this.node(),t).ease}function XX(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ma(this,e).ease=n}}function KX(e){if(typeof e!="function")throw new Error;return this.each(XX(this._id,e))}function ZX(e){typeof e!="function"&&(e=pm(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a=t[r],o=a.length,s=i[r]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new _o(i,this._parents,this._name,this._id)}function QX(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var u=t[s],c=n[s],l=u.length,f=o[s]=new Array(l),h,d=0;d<l;++d)(h=u[d]||c[d])&&(f[d]=h);for(;s<i;++s)o[s]=t[s];return new _o(o,this._parents,this._name,this._id)}function JX(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function eK(e,t,n){var i,r,a=JX(t)?W1:Ma;return function(){var o=a(this,e),s=o.on;s!==i&&(r=(i=s).copy()).on(t,n),o.on=r}}function tK(e,t){var n=this._id;return arguments.length<2?sa(this.node(),n).on.on(e):this.each(eK(n,e,t))}function nK(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function rK(){return this.on("end.remove",nK(this._id))}function iK(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Yh(e));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s=i[o],u=s.length,c=a[o]=new Array(u),l,f,h=0;h<u;++h)(l=s[h])&&(f=e.call(l,l.__data__,h,s))&&("__data__"in l&&(f.__data__=l.__data__),c[h]=f,Ag(c[h],t,n,h,c,sa(l,n)));return new _o(a,this._parents,t,n)}function aK(e){var t=this._name,n=this._id;typeof e!="function"&&(e=dm(e));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var u=i[s],c=u.length,l,f=0;f<c;++f)if(l=u[f]){for(var h=e.call(l,l.__data__,f,u),d,p=sa(l,n),m=0,g=h.length;m<g;++m)(d=h[m])&&Ag(d,t,n,m,h,p);a.push(h),o.push(l)}return new _o(a,o,t,n)}var oK=ia.prototype.constructor;function sK(){return new oK(this._groups,this._parents)}function lK(e,t){var n,i,r;return function(){var a=Fi(this,e),o=(this.style.removeProperty(e),Fi(this,e));return a===o?null:a===n&&o===i?r:r=t(n=a,i=o)}}function EP(e){return function(){this.style.removeProperty(e)}}function uK(e,t,n){var i,r=n+"",a;return function(){var o=Fi(this,e);return o===r?null:o===i?a:a=t(i=o,n)}}function cK(e,t,n){var i,r,a;return function(){var o=Fi(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Fi(this,e))),o===u?null:o===i&&u===r?a:(r=u,a=t(i=o,s))}}function hK(e,t){var n,i,r,a="style."+t,o="end."+a,s;return function(){var u=Ma(this,e),c=u.on,l=u.value[a]==null?s||(s=EP(t)):void 0;(c!==n||r!==l)&&(i=(n=c).copy()).on(o,r=l),u.on=i}}function fK(e,t,n){var i=(e+="")=="transform"?Kk:TP;return t==null?this.styleTween(e,lK(e,i)).on("end.style."+e,EP(e)):typeof t=="function"?this.styleTween(e,cK(e,i,X1(this,"style."+e,t))).each(hK(this._id,e)):this.styleTween(e,uK(e,i,t),n).on("end.style."+e,null)}function dK(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function pK(e,t,n){var i,r;function a(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&dK(e,o,n)),i}return a._value=t,a}function mK(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,pK(e,t,n??""))}function gK(e){return function(){this.textContent=e}}function vK(e){return function(){var t=e(this);this.textContent=t??""}}function yK(e){return this.tween("text",typeof e=="function"?vK(X1(this,"text",e)):gK(e==null?"":e+""))}function TK(e){return function(t){this.textContent=e.call(this,t)}}function EK(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&TK(r)),t}return i._value=e,i}function bK(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,EK(e))}function _K(){for(var e=this._name,t=this._id,n=bP(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],s=o.length,u,c=0;c<s;++c)if(u=o[c]){var l=sa(u,t);Ag(u,e,n,c,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new _o(i,this._parents,e,n)}function SK(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--r===0&&a()}};n.each(function(){var c=Ma(this,i),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),c.on=t}),r===0&&a()})}var AK=0;function _o(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function bP(){return++AK}var sl=ia.prototype;_o.prototype={constructor:_o,select:iK,selectAll:aK,filter:ZX,merge:QX,selection:sK,transition:_K,call:sl.call,nodes:sl.nodes,node:sl.node,size:sl.size,empty:sl.empty,each:sl.each,on:tK,attr:MX,attrTween:$X,style:fK,styleTween:mK,text:yK,textTween:bK,remove:rK,tween:IX,delay:zX,duration:YX,ease:qX,easeVarying:KX,end:SK,[Symbol.iterator]:sl[Symbol.iterator]};function CK(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var DK={time:null,delay:0,duration:250,ease:CK};function wK(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function IK(e){var t,n;e instanceof _o?(t=e._id,e=e._name):(t=bP(),(n=DK).time=z1(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],s=o.length,u,c=0;c<s;++c)(u=o[c])&&Ag(u,e,t,c,o,n||wK(u,t));return new _o(i,this._parents,e,t)}ia.prototype.interrupt=CX,ia.prototype.transition=IK;const K1=e=>()=>e;function kK(e,{sourceEvent:t,target:n,selection:i,mode:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:i,enumerable:!0,configurable:!0},mode:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function OK(e){e.stopImmediatePropagation()}function Z1(e){e.preventDefault(),e.stopImmediatePropagation()}var _P={name:"drag"},Q1={name:"space"},Mu={name:"handle"},Lu={name:"center"};const{abs:SP,max:kr,min:Or}=Math;function AP(e){return[+e[0],+e[1]]}function J1(e){return[AP(e[0]),AP(e[1])]}var Cg={name:"x",handles:["w","e"].map(vf),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Dg={name:"y",handles:["n","s"].map(vf),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},xK={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(vf),input:function(e){return e==null?null:J1(e)},output:function(e){return e}},So={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},CP={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},DP={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},PK={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},RK={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function vf(e){return{type:e}}function NK(e){return!e.ctrlKey&&!e.button}function MK(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function LK(){return navigator.maxTouchPoints||"ontouchstart"in this}function eb(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function BK(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function FK(e){var t=e.__brush;return t?t.dim.output(t.selection):null}function wg(){return nb(Cg)}function yf(){return nb(Dg)}function tb(){return nb(xK)}function nb(e){var t=MK,n=NK,i=LK,r=!0,a=Pu("start","brush","end"),o=6,s;function u(g){var v=g.property("__brush",m).selectAll(".overlay").data([vf("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",So.overlay).merge(v).each(function(){var y=eb(this).extent;xt(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),g.selectAll(".selection").data([vf("selection")]).enter().append("rect").attr("class","selection").attr("cursor",So.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var E=g.selectAll(".handle").data(e.handles,function(y){return y.type});E.exit().remove(),E.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return So[y.type]}),g.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",h).filter(i).on("touchstart.brush",h).on("touchmove.brush",d).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,v){g.tween?g.on("start.brush",function(E){l(this,arguments).beforestart().start(E)}).on("interrupt.brush end.brush",function(E){l(this,arguments).end(E)}).tween("brush",function(){var E=this,y=E.__brush,T=l(E,arguments),b=y.selection,S=e.input(typeof v=="function"?v.apply(this,arguments):v,y.extent),w=Ks(b,S);function D(R){y.selection=R===1&&S===null?null:w(R),c.call(E),T.brush()}return b!==null&&S!==null?D:D(1)}):g.each(function(){var E=this,y=arguments,T=E.__brush,b=e.input(typeof v=="function"?v.apply(E,y):v,T.extent),S=l(E,y).beforestart();q1(E),T.selection=b===null?null:b,c.call(E),S.start().brush().end()})},u.clear=function(g){u.move(g,null)};function c(){var g=xt(this),v=eb(this).selection;v?(g.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(E){return E.type[E.type.length-1]==="e"?v[1][0]-o/2:v[0][0]-o/2}).attr("y",function(E){return E.type[0]==="s"?v[1][1]-o/2:v[0][1]-o/2}).attr("width",function(E){return E.type==="n"||E.type==="s"?v[1][0]-v[0][0]+o:o}).attr("height",function(E){return E.type==="e"||E.type==="w"?v[1][1]-v[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function l(g,v,E){var y=g.__brush.emitter;return y&&(!E||!y.clean)?y:new f(g,v,E)}function f(g,v,E){this.that=g,this.args=v,this.state=g.__brush,this.active=0,this.clean=E}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,v){return this.starting?(this.starting=!1,this.emit("start",g,v)):this.emit("brush",g),this},brush:function(g,v){return this.emit("brush",g,v),this},end:function(g,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,v)),this},emit:function(g,v,E){var y=xt(this.that).datum();a.call(g,this.that,new kK(g,{sourceEvent:v,target:u,selection:e.output(this.state.selection),mode:E,dispatch:a}),y)}};function h(g){if(s&&!g.touches||!n.apply(this,arguments))return;var v=this,E=g.target.__data__.type,y=(r&&g.metaKey?E="overlay":E)==="selection"?_P:r&&g.altKey?Lu:Mu,T=e===Dg?null:PK[E],b=e===Cg?null:RK[E],S=eb(v),w=S.extent,D=S.selection,R=w[0][0],M,k,L=w[0][1],$,P,B=w[1][0],X,ee,se=w[1][1],fe,Z,he=0,j=0,H,G=T&&b&&r&&g.shiftKey,K,ae,pe=Array.from(g.touches||[g],qe=>{const bt=qe.identifier;return qe=sn(qe,v),qe.point0=qe.slice(),qe.identifier=bt,qe});if(E==="overlay"){D&&(H=!0);const qe=[pe[0],pe[1]||pe[0]];S.selection=D=[[M=e===Dg?R:Or(qe[0][0],qe[1][0]),$=e===Cg?L:Or(qe[0][1],qe[1][1])],[X=e===Dg?B:kr(qe[0][0],qe[1][0]),fe=e===Cg?se:kr(qe[0][1],qe[1][1])]],pe.length>1&&Ye()}else M=D[0][0],$=D[0][1],X=D[1][0],fe=D[1][1];k=M,P=$,ee=X,Z=fe;var we=xt(v).attr("pointer-events","none"),Ee=we.selectAll(".overlay").attr("cursor",So[E]);q1(v);var xe=l(v,arguments,!0).beforestart();if(g.touches)xe.moved=ke,xe.ended=je;else{var He=xt(g.view).on("mousemove.brush",ke,!0).on("mouseup.brush",je,!0);r&&He.on("keydown.brush",dt,!0).on("keyup.brush",st,!0),mg(g.view)}c.call(v),xe.start(g,y.name);function ke(qe){for(const bt of qe.changedTouches||[qe])for(const yt of pe)yt.identifier===bt.identifier&&(yt.cur=sn(bt,v));if(G&&!K&&!ae&&pe.length===1){const bt=pe[0];SP(bt.cur[0]-bt[0])>SP(bt.cur[1]-bt[1])?ae=!0:K=!0}for(const bt of pe)bt.cur&&(bt[0]=bt.cur[0],bt[1]=bt.cur[1]);H=!0,Z1(qe),Ye(qe)}function Ye(qe){const bt=pe[0],yt=bt.point0;var Bt;switch(he=bt[0]-yt[0],j=bt[1]-yt[1],y){case Q1:case _P:{T&&(he=kr(R-M,Or(B-X,he)),k=M+he,ee=X+he),b&&(j=kr(L-$,Or(se-fe,j)),P=$+j,Z=fe+j);break}case Mu:{pe[1]?(T&&(k=kr(R,Or(B,pe[0][0])),ee=kr(R,Or(B,pe[1][0])),T=1),b&&(P=kr(L,Or(se,pe[0][1])),Z=kr(L,Or(se,pe[1][1])),b=1)):(T<0?(he=kr(R-M,Or(B-M,he)),k=M+he,ee=X):T>0&&(he=kr(R-X,Or(B-X,he)),k=M,ee=X+he),b<0?(j=kr(L-$,Or(se-$,j)),P=$+j,Z=fe):b>0&&(j=kr(L-fe,Or(se-fe,j)),P=$,Z=fe+j));break}case Lu:{T&&(k=kr(R,Or(B,M-he*T)),ee=kr(R,Or(B,X+he*T))),b&&(P=kr(L,Or(se,$-j*b)),Z=kr(L,Or(se,fe+j*b)));break}}ee<k&&(T*=-1,Bt=M,M=X,X=Bt,Bt=k,k=ee,ee=Bt,E in CP&&Ee.attr("cursor",So[E=CP[E]])),Z<P&&(b*=-1,Bt=$,$=fe,fe=Bt,Bt=P,P=Z,Z=Bt,E in DP&&Ee.attr("cursor",So[E=DP[E]])),S.selection&&(D=S.selection),K&&(k=D[0][0],ee=D[1][0]),ae&&(P=D[0][1],Z=D[1][1]),(D[0][0]!==k||D[0][1]!==P||D[1][0]!==ee||D[1][1]!==Z)&&(S.selection=[[k,P],[ee,Z]],c.call(v),xe.brush(qe,y.name))}function je(qe){if(OK(qe),qe.touches){if(qe.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else gg(qe.view,H),He.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);we.attr("pointer-events","all"),Ee.attr("cursor",So.overlay),S.selection&&(D=S.selection),BK(D)&&(S.selection=null,c.call(v)),xe.end(qe,y.name)}function dt(qe){switch(qe.keyCode){case 16:{G=T&&b;break}case 18:{y===Mu&&(T&&(X=ee-he*T,M=k+he*T),b&&(fe=Z-j*b,$=P+j*b),y=Lu,Ye());break}case 32:{(y===Mu||y===Lu)&&(T<0?X=ee-he:T>0&&(M=k-he),b<0?fe=Z-j:b>0&&($=P-j),y=Q1,Ee.attr("cursor",So.selection),Ye());break}default:return}Z1(qe)}function st(qe){switch(qe.keyCode){case 16:{G&&(K=ae=G=!1,Ye());break}case 18:{y===Lu&&(T<0?X=ee:T>0&&(M=k),b<0?fe=Z:b>0&&($=P),y=Mu,Ye());break}case 32:{y===Q1&&(qe.altKey?(T&&(X=ee-he*T,M=k+he*T),b&&(fe=Z-j*b,$=P+j*b),y=Lu):(T<0?X=ee:T>0&&(M=k),b<0?fe=Z:b>0&&($=P),y=Mu),Ee.attr("cursor",So[E]),Ye());break}default:return}Z1(qe)}}function d(g){l(this,arguments).moved(g)}function p(g){l(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=J1(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:K1(J1(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:K1(!!g),u):n},u.touchable=function(g){return arguments.length?(i=typeof g=="function"?g:K1(!!g),u):i},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(r=!!g,u):r},u.on=function(){var g=a.on.apply(a,arguments);return g===a?u:g},u}const HK=Object.freeze(Object.defineProperty({__proto__:null,brush:tb,brushX:wg,brushY:yf,brushSelection:FK},Symbol.toStringTag,{value:"Module"}));function Tf(){return Tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Tf.apply(this,arguments)}function $K(e){if(Array.isArray(e))return e}function UK(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i,r,a,o,s=[],u=!0,c=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;u=!1}else for(;!(u=(i=a.call(n)).done)&&(s.push(i.value),s.length!==t);u=!0);}catch(l){c=!0,r=l}finally{try{if(!u&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw r}}return s}}function rb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function wP(e,t){if(!!e){if(typeof e=="string")return rb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rb(e,t)}}function GK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IP(e,t){return $K(e)||UK(e,t)||wP(e,t)||GK()}function Bu(e){return Bu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bu(e)}function zK(e,t){if(Bu(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(Bu(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kP(e){var t=zK(e,"string");return Bu(t)==="symbol"?t:String(t)}function hn(e,t,n){return t=kP(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ib(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},i=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&i.push.apply(i,Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),i.forEach(function(r){hn(e,r,n[r])})}return e}function Ef(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,kP(i.key),i)}}function bf(e,t,n){return t&&OP(e.prototype,t),n&&OP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ut(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ab(e,t){if(t&&(Bu(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ut(e)}function _f(e){return _f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_f(e)}function ob(e,t){return ob=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},ob(e,t)}function sb(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ob(e,t)}var jK=function(e,t,n,i,r,a,o,s){if(!e){var u;if(t===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,i,r,a,o,s],l=0;u=new Error(t.replace(/%s/g,function(){return c[l++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}},ll=jK;function VK(e){if(Array.isArray(e))return rb(e)}function YK(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function WK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qK(e){return VK(e)||YK(e)||wP(e)||WK()}var XK=function(){function e(){Ef(this,e),hn(this,"refs",{})}return bf(e,[{key:"add",value:function(n,i){this.refs[n]||(this.refs[n]=[]),this.refs[n].push(i)}},{key:"remove",value:function(n,i){var r=this.getIndex(n,i);r!==-1&&this.refs[n].splice(r,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var n=this;return this.refs[this.active.collection].find(function(i){var r=i.node;return r.sortableInfo.index==n.active.index})}},{key:"getIndex",value:function(n,i){return this.refs[n].indexOf(i)}},{key:"getOrderedRefs",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.active.collection;return this.refs[n].sort(KK)}}]),e}();function KK(e,t){var n=e.node.sortableInfo.index,i=t.node.sortableInfo.index;return n-i}function ZK(e,t,n){return e=e.slice(),e.splice(n<0?e.length+n:n,0,e.splice(t,1)[0]),e}function xP(e,t){return Object.keys(e).reduce(function(n,i){return t.indexOf(i)===-1&&(n[i]=e[i]),n},{})}var Fu={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},PP=function(){if(typeof window>"u"||typeof document>"u")return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||e.OLink===""&&["","o"])[1];switch(t){case"ms":return"ms";default:return t&&t.length?t[0].toUpperCase()+t.substr(1):""}}();function Ig(e,t){Object.keys(t).forEach(function(n){e.style[n]=t[n]})}function kg(e,t){e.style["".concat(PP,"Transform")]=t==null?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function lb(e,t){e.style["".concat(PP,"TransitionDuration")]=t==null?"":"".concat(t,"ms")}function Sf(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function RP(e,t,n){return Math.max(e,Math.min(n,t))}function Hu(e){return e.substr(-2)==="px"?parseFloat(e):0}function QK(e){var t=window.getComputedStyle(e);return{bottom:Hu(t.marginBottom),left:Hu(t.marginLeft),right:Hu(t.marginRight),top:Hu(t.marginTop)}}function ub(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function cb(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function Af(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function JK(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}function Og(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{left:0,top:0};if(!!e){var i={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?i:Og(e.parentNode,t,i)}}function eZ(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}function NP(e){var t=e.lockOffset,n=e.width,i=e.height,r=t,a=t,o="px";if(typeof t=="string"){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);ll(s!==null,'lockOffset value should be a number or a string of a number followed by "px" or "%". Given %s',t),r=parseFloat(t),a=parseFloat(t),o=s[1]}return ll(isFinite(r)&&isFinite(a),"lockOffset value should be a finite. Given %s",t),o==="%"&&(r=r*n/100,a=a*i/100),{x:r,y:a}}function tZ(e){var t=e.height,n=e.width,i=e.lockOffset,r=Array.isArray(i)?i:[i,i];ll(r.length===2,"lockOffset prop of SortableContainer should be a single value or an array of exactly two values. Given %s",i);var a=IP(r,2),o=a[0],s=a[1];return[NP({height:t,lockOffset:o,width:n}),NP({height:t,lockOffset:s,width:n})]}function nZ(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/,i=["overflow","overflowX","overflowY"];return i.find(function(r){return n.test(t[r])})}function MP(e){return e instanceof HTMLElement?nZ(e)?e:MP(e.parentNode):null}function rZ(e){var t=window.getComputedStyle(e);return t.display==="grid"?{x:Hu(t.gridColumnGap),y:Hu(t.gridRowGap)}:{x:0,y:0}}var ul={TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40},cl={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function iZ(e){var t="input, textarea, select, canvas, [contenteditable]",n=e.querySelectorAll(t),i=e.cloneNode(!0),r=qK(i.querySelectorAll(t));return r.forEach(function(a,o){if(a.type!=="file"&&(a.value=n[o].value),a.type==="radio"&&a.name&&(a.name="__sortableClone__".concat(a.name)),a.tagName===cl.Canvas&&n[o].width>0&&n[o].height>0){var s=a.getContext("2d");s.drawImage(n[o],0,0)}}),i}function hb(e){var t,n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return n=t=function(r){sb(a,r);function a(){return Ef(this,a),ab(this,_f(a).apply(this,arguments))}return bf(a,[{key:"componentDidMount",value:function(){var s=gn.findDOMNode(this);s.sortableHandle=!0}},{key:"getWrappedInstance",value:function(){return ll(i.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableHandle() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var s=i.withRef?"wrappedInstance":null;return Ze.createElement(e,Tf({ref:s},this.props))}}]),a}(Ze.Component),hn(t,"displayName",ub("sortableHandle",e)),n}function LP(e){return e.sortableHandle!=null}var aZ=function(){function e(t,n){Ef(this,e),this.container=t,this.onScrollCallback=n}return bf(e,[{key:"clear",value:function(){this.interval!=null&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(n){var i=this,r=n.translate,a=n.minTranslate,o=n.maxTranslate,s=n.width,u=n.height,c={x:0,y:0},l={x:1,y:1},f={x:10,y:10},h=this.container,d=h.scrollTop,p=h.scrollLeft,m=h.scrollHeight,g=h.scrollWidth,v=h.clientHeight,E=h.clientWidth,y=d===0,T=m-d-v===0,b=p===0,S=g-p-E===0;r.y>=o.y-u/2&&!T?(c.y=1,l.y=f.y*Math.abs((o.y-u/2-r.y)/u)):r.x>=o.x-s/2&&!S?(c.x=1,l.x=f.x*Math.abs((o.x-s/2-r.x)/s)):r.y<=a.y+u/2&&!y?(c.y=-1,l.y=f.y*Math.abs((r.y-u/2-a.y)/u)):r.x<=a.x+s/2&&!b&&(c.x=-1,l.x=f.x*Math.abs((r.x-s/2-a.x)/s)),this.interval&&(this.clear(),this.isAutoScrolling=!1),(c.x!==0||c.y!==0)&&(this.interval=setInterval(function(){i.isAutoScrolling=!0;var w={left:l.x*c.x,top:l.y*c.y};i.container.scrollTop+=w.top,i.container.scrollLeft+=w.left,i.onScrollCallback(w)},5))}}]),e}();function oZ(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}}function sZ(e){var t=[cl.Input,cl.Textarea,cl.Select,cl.Option,cl.Button];return!!(t.indexOf(e.target.tagName)!==-1||Sf(e.target,function(n){return n.contentEditable==="true"}))}var BP={axis:N.exports.oneOf(["x","y","xy"]),contentWindow:N.exports.any,disableAutoscroll:N.exports.bool,distance:N.exports.number,getContainer:N.exports.func,getHelperDimensions:N.exports.func,helperClass:N.exports.string,helperContainer:N.exports.oneOfType([N.exports.func,typeof HTMLElement>"u"?N.exports.any:N.exports.instanceOf(HTMLElement)]),hideSortableGhost:N.exports.bool,keyboardSortingTransitionDuration:N.exports.number,lockAxis:N.exports.string,lockOffset:N.exports.oneOfType([N.exports.number,N.exports.string,N.exports.arrayOf(N.exports.oneOfType([N.exports.number,N.exports.string]))]),lockToContainerEdges:N.exports.bool,onSortEnd:N.exports.func,onSortMove:N.exports.func,onSortOver:N.exports.func,onSortStart:N.exports.func,pressDelay:N.exports.number,pressThreshold:N.exports.number,keyCodes:N.exports.shape({lift:N.exports.arrayOf(N.exports.number),drop:N.exports.arrayOf(N.exports.number),cancel:N.exports.arrayOf(N.exports.number),up:N.exports.arrayOf(N.exports.number),down:N.exports.arrayOf(N.exports.number)}),shouldCancelStart:N.exports.func,transitionDuration:N.exports.number,updateBeforeSortStart:N.exports.func,useDragHandle:N.exports.bool,useWindowAsScrollContainer:N.exports.bool},FP={lift:[ul.SPACE],drop:[ul.SPACE],cancel:[ul.ESC],up:[ul.UP,ul.LEFT],down:[ul.DOWN,ul.RIGHT]},lZ={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:oZ,hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:FP,shouldCancelStart:sZ,transitionDuration:300,useWindowAsScrollContainer:!1},uZ=Object.keys(BP);function cZ(e){ll(!(e.distance&&e.pressDelay),"Attempted to set both `pressDelay` and `distance` on SortableContainer, you may only use one or the other, not both at the same time.")}function hZ(e,t){try{var n=e()}catch(i){return t(!0,i)}return n&&n.then?n.then(t.bind(null,!1),t.bind(null,!0)):t(!1,value)}function fZ(e){var t,n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return n=t=function(r){sb(a,r);function a(o){var s;return Ef(this,a),s=ab(this,_f(a).call(this,o)),hn(Ut(Ut(s)),"state",{}),hn(Ut(Ut(s)),"handleStart",function(u){var c=s.props,l=c.distance,f=c.shouldCancelStart;if(!(u.button===2||f(u))){s.touched=!0,s.position=Af(u);var h=Sf(u.target,function(E){return E.sortableInfo!=null});if(h&&h.sortableInfo&&s.nodeIsChild(h)&&!s.state.sorting){var d=s.props.useDragHandle,p=h.sortableInfo,m=p.index,g=p.collection,v=p.disabled;if(v||d&&!Sf(u.target,LP))return;s.manager.active={collection:g,index:m},!JK(u)&&u.target.tagName===cl.Anchor&&u.preventDefault(),l||(s.props.pressDelay===0?s.handlePress(u):s.pressTimer=setTimeout(function(){return s.handlePress(u)},s.props.pressDelay))}}}),hn(Ut(Ut(s)),"nodeIsChild",function(u){return u.sortableInfo.manager===s.manager}),hn(Ut(Ut(s)),"handleMove",function(u){var c=s.props,l=c.distance,f=c.pressThreshold;if(!s.state.sorting&&s.touched&&!s._awaitingUpdateBeforeSortStart){var h=Af(u),d={x:s.position.x-h.x,y:s.position.y-h.y},p=Math.abs(d.x)+Math.abs(d.y);s.delta=d,!l&&(!f||p>=f)?(clearTimeout(s.cancelTimer),s.cancelTimer=setTimeout(s.cancel,0)):l&&p>=l&&s.manager.isActive()&&s.handlePress(u)}}),hn(Ut(Ut(s)),"handleEnd",function(){s.touched=!1,s.cancel()}),hn(Ut(Ut(s)),"cancel",function(){var u=s.props.distance,c=s.state.sorting;c||(u||clearTimeout(s.pressTimer),s.manager.active=null)}),hn(Ut(Ut(s)),"handlePress",function(u){try{var c=s.manager.getActive(),l=function(){if(c){var f=function(){var R=T.sortableInfo.index,M=QK(T),k=rZ(s.container),L=s.scrollContainer.getBoundingClientRect(),$=p({index:R,node:T,collection:b});if(s.node=T,s.margin=M,s.gridGap=k,s.width=$.width,s.height=$.height,s.marginOffset={x:s.margin.left+s.margin.right+s.gridGap.x,y:Math.max(s.margin.top,s.margin.bottom,s.gridGap.y)},s.boundingClientRect=T.getBoundingClientRect(),s.containerBoundingRect=L,s.index=R,s.newIndex=R,s.axis={x:d.indexOf("x")>=0,y:d.indexOf("y")>=0},s.offsetEdge=Og(T,s.container),S?s.initialOffset=Af(ib({},u,{pageX:s.boundingClientRect.left,pageY:s.boundingClientRect.top})):s.initialOffset=Af(u),s.initialScroll={left:s.scrollContainer.scrollLeft,top:s.scrollContainer.scrollTop},s.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},s.helper=s.helperContainer.appendChild(iZ(T)),Ig(s.helper,{boxSizing:"border-box",height:"".concat(s.height,"px"),left:"".concat(s.boundingClientRect.left-M.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(s.boundingClientRect.top-M.top,"px"),width:"".concat(s.width,"px")}),S&&s.helper.focus(),g&&(s.sortableGhost=T,Ig(T,{opacity:0,visibility:"hidden"})),s.minTranslate={},s.maxTranslate={},S){var P=y?{top:0,left:0,width:s.contentWindow.innerWidth,height:s.contentWindow.innerHeight}:s.containerBoundingRect,B=P.top,X=P.left,ee=P.width,se=P.height,fe=B+se,Z=X+ee;s.axis.x&&(s.minTranslate.x=X-s.boundingClientRect.left,s.maxTranslate.x=Z-(s.boundingClientRect.left+s.width)),s.axis.y&&(s.minTranslate.y=B-s.boundingClientRect.top,s.maxTranslate.y=fe-(s.boundingClientRect.top+s.height))}else s.axis.x&&(s.minTranslate.x=(y?0:L.left)-s.boundingClientRect.left-s.width/2,s.maxTranslate.x=(y?s.contentWindow.innerWidth:L.left+L.width)-s.boundingClientRect.left-s.width/2),s.axis.y&&(s.minTranslate.y=(y?0:L.top)-s.boundingClientRect.top-s.height/2,s.maxTranslate.y=(y?s.contentWindow.innerHeight:L.top+L.height)-s.boundingClientRect.top-s.height/2);m&&m.split(" ").forEach(function(he){return s.helper.classList.add(he)}),s.listenerNode=u.touches?T:s.contentWindow,S?(s.listenerNode.addEventListener("wheel",s.handleKeyEnd,!0),s.listenerNode.addEventListener("mousedown",s.handleKeyEnd,!0),s.listenerNode.addEventListener("keydown",s.handleKeyDown)):(Fu.move.forEach(function(he){return s.listenerNode.addEventListener(he,s.handleSortMove,!1)}),Fu.end.forEach(function(he){return s.listenerNode.addEventListener(he,s.handleSortEnd,!1)})),s.setState({sorting:!0,sortingIndex:R}),E&&E({node:T,index:R,collection:b,isKeySorting:S,nodes:s.manager.getOrderedRefs(),helper:s.helper},u),S&&s.keyMove(0)},h=s.props,d=h.axis,p=h.getHelperDimensions,m=h.helperClass,g=h.hideSortableGhost,v=h.updateBeforeSortStart,E=h.onSortStart,y=h.useWindowAsScrollContainer,T=c.node,b=c.collection,S=s.manager.isKeySorting,w=function(){if(typeof v=="function"){s._awaitingUpdateBeforeSortStart=!0;var D=hZ(function(){var R=T.sortableInfo.index;return Promise.resolve(v({collection:b,index:R,node:T,isKeySorting:S},u)).then(function(){})},function(R,M){if(s._awaitingUpdateBeforeSortStart=!1,R)throw M;return M});if(D&&D.then)return D.then(function(){})}}();return w&&w.then?w.then(f):f(w)}}();return Promise.resolve(l&&l.then?l.then(function(){}):void 0)}catch(f){return Promise.reject(f)}}),hn(Ut(Ut(s)),"handleSortMove",function(u){var c=s.props.onSortMove;typeof u.preventDefault=="function"&&u.preventDefault(),s.updateHelperPosition(u),s.animateNodes(),s.autoscroll(),c&&c(u)}),hn(Ut(Ut(s)),"handleSortEnd",function(u){var c=s.props,l=c.hideSortableGhost,f=c.onSortEnd,h=s.manager,d=h.active.collection,p=h.isKeySorting,m=s.manager.getOrderedRefs();s.listenerNode&&(p?(s.listenerNode.removeEventListener("wheel",s.handleKeyEnd,!0),s.listenerNode.removeEventListener("mousedown",s.handleKeyEnd,!0),s.listenerNode.removeEventListener("keydown",s.handleKeyDown)):(Fu.move.forEach(function(T){return s.listenerNode.removeEventListener(T,s.handleSortMove)}),Fu.end.forEach(function(T){return s.listenerNode.removeEventListener(T,s.handleSortEnd)}))),s.helper.parentNode.removeChild(s.helper),l&&s.sortableGhost&&Ig(s.sortableGhost,{opacity:"",visibility:""});for(var g=0,v=m.length;g<v;g++){var E=m[g],y=E.node;E.edgeOffset=null,E.boundingClientRect=null,kg(y,null),lb(y,null),E.translate=null}s.autoScroller.clear(),s.manager.active=null,s.manager.isKeySorting=!1,s.setState({sorting:!1,sortingIndex:null}),typeof f=="function"&&f({collection:d,newIndex:s.newIndex,oldIndex:s.index,isKeySorting:p,nodes:m},u),s.touched=!1}),hn(Ut(Ut(s)),"autoscroll",function(){var u=s.props.disableAutoscroll,c=s.manager.isKeySorting;if(u){s.autoScroller.clear();return}if(c){var l=ib({},s.translate),f=0,h=0;s.axis.x&&(l.x=Math.min(s.maxTranslate.x,Math.max(s.minTranslate.x,s.translate.x)),f=s.translate.x-l.x),s.axis.y&&(l.y=Math.min(s.maxTranslate.y,Math.max(s.minTranslate.y,s.translate.y)),h=s.translate.y-l.y),s.translate=l,kg(s.helper,s.translate),s.scrollContainer.scrollLeft+=f,s.scrollContainer.scrollTop+=h;return}s.autoScroller.update({height:s.height,maxTranslate:s.maxTranslate,minTranslate:s.minTranslate,translate:s.translate,width:s.width})}),hn(Ut(Ut(s)),"onAutoScroll",function(u){s.translate.x+=u.left,s.translate.y+=u.top,s.animateNodes()}),hn(Ut(Ut(s)),"handleKeyDown",function(u){var c=u.keyCode,l=s.props,f=l.shouldCancelStart,h=l.keyCodes,d=h===void 0?{}:h,p=ib({},FP,d);s.manager.active&&!s.manager.isKeySorting||!s.manager.active&&(!p.lift.includes(c)||f(u)||!s.isValidSortingTarget(u))||(u.stopPropagation(),u.preventDefault(),p.lift.includes(c)&&!s.manager.active?s.keyLift(u):p.drop.includes(c)&&s.manager.active?s.keyDrop(u):p.cancel.includes(c)?(s.newIndex=s.manager.active.index,s.keyDrop(u)):p.up.includes(c)?s.keyMove(-1):p.down.includes(c)&&s.keyMove(1))}),hn(Ut(Ut(s)),"keyLift",function(u){var c=u.target,l=Sf(c,function(p){return p.sortableInfo!=null}),f=l.sortableInfo,h=f.index,d=f.collection;s.initialFocusedNode=c,s.manager.isKeySorting=!0,s.manager.active={index:h,collection:d},s.handlePress(u)}),hn(Ut(Ut(s)),"keyMove",function(u){var c=s.manager.getOrderedRefs(),l=c[c.length-1].node.sortableInfo.index,f=s.newIndex+u,h=s.newIndex;if(!(f<0||f>l)){s.prevIndex=h,s.newIndex=f;var d=eZ(s.newIndex,s.prevIndex,s.index),p=c.find(function(S){var w=S.node;return w.sortableInfo.index===d}),m=p.node,g=s.containerScrollDelta,v=p.boundingClientRect||cb(m,g),E=p.translate||{x:0,y:0},y={top:v.top+E.y-g.top,left:v.left+E.x-g.left},T=h<f,b={x:T&&s.axis.x?m.offsetWidth-s.width:0,y:T&&s.axis.y?m.offsetHeight-s.height:0};s.handleSortMove({pageX:y.left+b.x,pageY:y.top+b.y,ignoreTransition:u===0})}}),hn(Ut(Ut(s)),"keyDrop",function(u){s.handleSortEnd(u),s.initialFocusedNode&&s.initialFocusedNode.focus()}),hn(Ut(Ut(s)),"handleKeyEnd",function(u){s.manager.active&&s.keyDrop(u)}),hn(Ut(Ut(s)),"isValidSortingTarget",function(u){var c=s.props.useDragHandle,l=u.target,f=Sf(l,function(h){return h.sortableInfo!=null});return f&&f.sortableInfo&&!f.sortableInfo.disabled&&(c?LP(l):l.sortableInfo)}),cZ(o),s.manager=new XK,s.events={end:s.handleEnd,move:s.handleMove,start:s.handleStart},s}return bf(a,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var s=this,u=this.props.useWindowAsScrollContainer,c=this.getContainer();Promise.resolve(c).then(function(l){s.container=l,s.document=s.container.ownerDocument||document;var f=s.props.contentWindow||s.document.defaultView||window;s.contentWindow=typeof f=="function"?f():f,s.scrollContainer=u?s.document.scrollingElement||s.document.documentElement:MP(s.container)||s.container,s.autoScroller=new aZ(s.scrollContainer,s.onAutoScroll),Object.keys(s.events).forEach(function(h){return Fu[h].forEach(function(d){return s.container.addEventListener(d,s.events[h],!1)})}),s.container.addEventListener("keydown",s.handleKeyDown)})}},{key:"componentWillUnmount",value:function(){var s=this;this.helper&&this.helper.parentNode&&this.helper.parentNode.removeChild(this.helper),this.container&&(Object.keys(this.events).forEach(function(u){return Fu[u].forEach(function(c){return s.container.removeEventListener(c,s.events[u])})}),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(s){var u=this.props,c=u.lockAxis,l=u.lockOffset,f=u.lockToContainerEdges,h=u.transitionDuration,d=u.keyboardSortingTransitionDuration,p=d===void 0?h:d,m=this.manager.isKeySorting,g=s.ignoreTransition,v=Af(s),E={x:v.x-this.initialOffset.x,y:v.y-this.initialOffset.y};if(E.y-=window.pageYOffset-this.initialWindowScroll.top,E.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=E,f){var y=tZ({height:this.height,lockOffset:l,width:this.width}),T=IP(y,2),b=T[0],S=T[1],w={x:this.width/2-b.x,y:this.height/2-b.y},D={x:this.width/2-S.x,y:this.height/2-S.y};E.x=RP(this.minTranslate.x+w.x,this.maxTranslate.x-D.x,E.x),E.y=RP(this.minTranslate.y+w.y,this.maxTranslate.y-D.y,E.y)}c==="x"?E.y=0:c==="y"&&(E.x=0),m&&p&&!g&&lb(this.helper,p),kg(this.helper,E)}},{key:"animateNodes",value:function(){var s=this.props,u=s.transitionDuration,c=s.hideSortableGhost,l=s.onSortOver,f=this.containerScrollDelta,h=this.windowScrollDelta,d=this.manager.getOrderedRefs(),p={left:this.offsetEdge.left+this.translate.x+f.left,top:this.offsetEdge.top+this.translate.y+f.top},m=this.manager.isKeySorting,g=this.newIndex;this.newIndex=null;for(var v=0,E=d.length;v<E;v++){var y=d[v].node,T=y.sortableInfo.index,b=y.offsetWidth,S=y.offsetHeight,w={height:this.height>S?S/2:this.height/2,width:this.width>b?b/2:this.width/2},D=m&&T>this.index&&T<=g,R=m&&T<this.index&&T>=g,M={x:0,y:0},k=d[v].edgeOffset;k||(k=Og(y,this.container),d[v].edgeOffset=k,m&&(d[v].boundingClientRect=cb(y,f)));var L=v<d.length-1&&d[v+1],$=v>0&&d[v-1];if(L&&!L.edgeOffset&&(L.edgeOffset=Og(L.node,this.container),m&&(L.boundingClientRect=cb(L.node,f))),T===this.index){c&&(this.sortableGhost=y,Ig(y,{opacity:0,visibility:"hidden"}));continue}u&&lb(y,u),this.axis.x?this.axis.y?R||T<this.index&&(p.left+h.left-w.width<=k.left&&p.top+h.top<=k.top+w.height||p.top+h.top+w.height<=k.top)?(M.x=this.width+this.marginOffset.x,k.left+M.x>this.containerBoundingRect.width-w.width&&L&&(M.x=L.edgeOffset.left-k.left,M.y=L.edgeOffset.top-k.top),this.newIndex===null&&(this.newIndex=T)):(D||T>this.index&&(p.left+h.left+w.width>=k.left&&p.top+h.top+w.height>=k.top||p.top+h.top+w.height>=k.top+S))&&(M.x=-(this.width+this.marginOffset.x),k.left+M.x<this.containerBoundingRect.left+w.width&&$&&(M.x=$.edgeOffset.left-k.left,M.y=$.edgeOffset.top-k.top),this.newIndex=T):D||T>this.index&&p.left+h.left+w.width>=k.left?(M.x=-(this.width+this.marginOffset.x),this.newIndex=T):(R||T<this.index&&p.left+h.left<=k.left+w.width)&&(M.x=this.width+this.marginOffset.x,this.newIndex==null&&(this.newIndex=T)):this.axis.y&&(D||T>this.index&&p.top+h.top+w.height>=k.top?(M.y=-(this.height+this.marginOffset.y),this.newIndex=T):(R||T<this.index&&p.top+h.top<=k.top+w.height)&&(M.y=this.height+this.marginOffset.y,this.newIndex==null&&(this.newIndex=T))),kg(y,M),d[v].translate=M}this.newIndex==null&&(this.newIndex=this.index),m&&(this.newIndex=g);var P=m?this.prevIndex:g;l&&this.newIndex!==P&&l({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:P,isKeySorting:m,nodes:d,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return ll(i.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableContainer() call"),this.refs.wrappedInstance}},{key:"getContainer",value:function(){var s=this.props.getContainer;return typeof s!="function"?gn.findDOMNode(this):s(i.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var s=i.withRef?"wrappedInstance":null;return Ze.createElement(e,Tf({ref:s},xP(this.props,uZ)))}},{key:"helperContainer",get:function(){var s=this.props.helperContainer;return typeof s=="function"?s():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){var s=this.props.useWindowAsScrollContainer;return s?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),a}(Ze.Component),hn(t,"displayName",ub("sortableList",e)),hn(t,"defaultProps",lZ),hn(t,"propTypes",BP),hn(t,"childContextTypes",{manager:N.exports.object.isRequired}),n}var HP={index:N.exports.number.isRequired,collection:N.exports.oneOfType([N.exports.number,N.exports.string]),disabled:N.exports.bool},dZ=Object.keys(HP);function $P(e){var t,n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{withRef:!1};return n=t=function(r){sb(a,r);function a(){return Ef(this,a),ab(this,_f(a).apply(this,arguments))}return bf(a,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(s){this.node&&(s.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),s.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),s.collection!==this.props.collection&&(this.unregister(s.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var s=this.props,u=s.collection,c=s.disabled,l=s.index,f=gn.findDOMNode(this);f.sortableInfo={collection:u,disabled:c,index:l,manager:this.context.manager},this.node=f,this.ref={node:f},this.context.manager.add(u,this.ref)}},{key:"unregister",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.collection;this.context.manager.remove(s,this.ref)}},{key:"getWrappedInstance",value:function(){return ll(i.withRef,"To access the wrapped instance, you need to pass in {withRef: true} as the second argument of the SortableElement() call"),this.refs.wrappedInstance}},{key:"render",value:function(){var s=i.withRef?"wrappedInstance":null;return Ze.createElement(e,Tf({ref:s},xP(this.props,dZ)))}}]),a}(Ze.Component),hn(t,"displayName",ub("sortableElement",e)),hn(t,"contextTypes",{manager:N.exports.object.isRequired}),hn(t,"propTypes",HP),hn(t,"defaultProps",{collection:0}),n}const UP=hu(e=>e.pos).left,Wn=(e,t)=>{if(!t||!t.cumPositions||!t.cumPositions.length)return null;let n=UP(t.cumPositions,e);const i=t.cumPositions[t.cumPositions.length-1].chr,r=t.chromLengths[i];n-=n>0&&1;let a=Math.floor(e-t.cumPositions[n].pos),o=0;return a<0&&(o=a-1,a=1),n===t.cumPositions.length-1&&a>r&&(o=a-r,a=r),[t.cumPositions[n].chr,a,o,n]},GP=(e,t)=>n=>n%e*t+Math.floor(n/e),pZ=e=>e,zP=(e,t,n=pZ)=>e.map((i,r)=>i+t[n(r)]),mZ="http://www.w3.org/2000/svg",xg=(e,t)=>{if(e.namespaceURI===mZ){const n=e.getAttribute("class");return n&&!!n.match(new RegExp(`(\\s|^)${t}(\\s|$)`))}return e.classList?e.classList.contains(t):!!e.className.match(new RegExp(`(\\s|^)${t}(\\s|$)`))},gZ="http://www.w3.org/2000/svg",vZ=(e,t)=>{if(e.namespaceURI===gZ){if(!xg(e,t)){const n=e.getAttribute("class")||"";e.setAttribute("class",`${n} ${t}`)}}else e.classList?e.classList.add(t):xg(e,t)||(e.className+=` ${t}`)},yZ=(e,t,n)=>{const i=document.createElement("canvas");return new Promise((r,a)=>{const o=new window.Image;o.onload=()=>{i.width=t||o.width,i.height=n||o.height,i.getContext("2d").drawImage(o,0,0),r(i)},o.onerror=()=>{a(new Error("Could not convert base64 to canvas"))},o.src=`data:image/png;base64,${e}`})},Pg=(e,t,n)=>n.chrPositions[e].pos+t,jP=e=>{const t=new e.constructor(e.type,e);return t.sourceUid=e.sourceUid,t.forwarded=e.forwarded,t},Ao=(e,t=!1)=>{const n=e.map((o,s)=>s*(255/(e.length-1))),i=Et().domain(n).range(e),a=Ur(t?255:254,-1,-1).map(i).map(o=>{const s=vu(o);return[s.r,s.g,s.b,s.opacity*255]});return a.length<256&&a.push([255,255,255,0]),a},Cf=0,Df=5,VP=10,YP=10,WP=300,Rg="move",zi="select",fb=100,Ng=10,qP=110,wf=3e3,If="locationListenerPrefix",XP=1e3,db="http://higlass.io/api/v1",KP=400,ZP=300,pb=["top","left","right","bottom","center","whole","gallery"],QP=20,JP=20,Mg=Symbol("Light theme"),pn=Symbol("Dark theme"),TZ=Mg,Be={PIXI:Vh},ji={"multitrack-header":"_multitrack-header_1yz7l_1","multitrack-header-focus":"_multitrack-header-focus_1yz7l_2","multitrack-header-squeazed":"_multitrack-header-squeazed_1yz7l_3","multitrack-header-dark":"_multitrack-header-dark_1yz7l_20","multitrack-header-id":"_multitrack-header-id_1yz7l_30","multitrack-header-left":"_multitrack-header-left_1yz7l_39","multitrack-header-grabber":"_multitrack-header-grabber_1yz7l_44","multitrack-header-grabber-squeazed":"_multitrack-header-grabber-squeazed_1yz7l_45","multitrack-header-search":"_multitrack-header-search_1yz7l_80","multitrack-header-nav-list":"_multitrack-header-nav-list_1yz7l_102","multitrack-header-icon":"_multitrack-header-icon_1yz7l_107","multitrack-header-icon-squeazed":"_multitrack-header-icon-squeazed_1yz7l_108","mouse-tool-selection":"_mouse-tool-selection_1yz7l_136"},EZ=[{id:"cog",paths:["M466.895 305.125c-26.863-46.527-10.708-106.152 36.076-133.244l-50.313-87.146c-14.375 8.427-31.088 13.259-48.923 13.259-53.768 0-97.354-43.873-97.354-97.995h-100.629c0.133 16.705-4.037 33.641-12.979 49.126-26.862 46.528-86.578 62.351-133.431 35.379l-50.312 87.146c14.485 8.236 27.025 20.294 35.943 35.739 26.819 46.454 10.756 105.96-35.854 133.112l50.313 87.146c14.325-8.348 30.958-13.127 48.7-13.127 53.598 0 97.072 43.596 97.35 97.479h100.627c-0.043-16.537 4.136-33.285 12.983-48.609 26.818-46.453 86.388-62.297 133.207-35.506l50.313-87.145c-14.39-8.233-26.846-20.249-35.717-35.614zM256 359.666c-57.254 0-103.668-46.412-103.668-103.667 0-57.254 46.413-103.667 103.668-103.667s103.666 46.413 103.666 103.667c-0.001 57.255-46.412 103.667-103.666 103.667z"],viewBox:"0 0 512 512"},{id:"cross",paths:["M507.331 411.33c-0.002-0.002-0.004-0.004-0.006-0.005l-155.322-155.325 155.322-155.325c0.002-0.002 0.004-0.003 0.006-0.005 1.672-1.673 2.881-3.627 3.656-5.708 2.123-5.688 0.912-12.341-3.662-16.915l-73.373-73.373c-4.574-4.573-11.225-5.783-16.914-3.66-2.080 0.775-4.035 1.984-5.709 3.655 0 0.002-0.002 0.003-0.004 0.005l-155.324 155.326-155.324-155.325c-0.002-0.002-0.003-0.003-0.005-0.005-1.673-1.671-3.627-2.88-5.707-3.655-5.69-2.124-12.341-0.913-16.915 3.66l-73.374 73.374c-4.574 4.574-5.784 11.226-3.661 16.914 0.776 2.080 1.985 4.036 3.656 5.708 0.002 0.001 0.003 0.003 0.005 0.005l155.325 155.324-155.325 155.326c-0.001 0.002-0.003 0.003-0.004 0.005-1.671 1.673-2.88 3.627-3.657 5.707-2.124 5.688-0.913 12.341 3.661 16.915l73.374 73.373c4.575 4.574 11.226 5.784 16.915 3.661 2.080-0.776 4.035-1.985 5.708-3.656 0.001-0.002 0.003-0.003 0.005-0.005l155.324-155.325 155.324 155.325c0.002 0.001 0.004 0.003 0.006 0.004 1.674 1.672 3.627 2.881 5.707 3.657 5.689 2.123 12.342 0.913 16.914-3.661l73.373-73.374c4.574-4.574 5.785-11.227 3.662-16.915-0.776-2.080-1.985-4.034-3.657-5.707z"],viewBox:"0 0 512 512"},{id:"enlarge",paths:["M512 0h-208l80 80-96 96 48 48 96-96 80 80z","M512 512v-208l-80 80-96-96-48 48 96 96-80 80z","M0 512h208l-80-80 96-96-48-48-96 96-80-80z","M0 0v208l80-80 96 96 48-48-96-96 80-80z"],viewBox:"0 0 512 512"},{id:"minus",paths:["M0 208v96c0 8.836 7.164 16 16 16h480c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16h-480c-8.836 0-16 7.164-16 16z"],viewBox:"0 0 512 512"},{id:"move",paths:["M512,260.096L405.5,161.79v49.155H301.061v-104.45h49.149L251.904,0L160.77,106.495h49.15v104.45H106.495V161.79L0,260.096l106.495,91.135v-49.149h104.45v104.45H161.79L251.904,512l98.306-106.5h-49.149V301.061H405.5v49.149L512,260.096z"],viewBox:"0 0 512 512"},{id:"play",paths:["M96 64l320 192-320 192z"],viewBox:"0 0 512 512"},{id:"plus",paths:["M496 192h-176v-176c0-8.836-7.164-16-16-16h-96c-8.836 0-16 7.164-16 16v176h-176c-8.836 0-16 7.164-16 16v96c0 8.836 7.164 16 16 16h176v176c0 8.836 7.164 16 16 16h96c8.836 0 16-7.164 16-16v-176h176c8.836 0 16-7.164 16-16v-96c0-8.836-7.164-16-16-16z"],viewBox:"0 0 512 512"},{id:"copy",paths:["M607.5 672v-448.5h-351v448.5h351zM607.5 160.5c34.5 0 64.5 28.5 64.5 63v448.5c0 34.5-30 64.5-64.5 64.5h-351c-34.5 0-64.5-30-64.5-64.5v-448.5c0-34.5 30-63 64.5-63h351zM511.5 31.5v64.5h-384v448.5h-63v-448.5c0-34.5 28.5-64.5 63-64.5h384z"],viewBox:"0 0 712 712"},{id:"select",viewBox:"0 0 16 16",paths:["M2 14h2v1H1v-3h1v2zm8 1H6v-1h4v1zm5 0h-3v-1h2v-2h1v3zm0-5h-1V6h1v4zM2 10H1V6h1v4zm13-6h-1V2h-2V1h3v3zM4 2H2v2H1V1h3v1zm6 0H6V1h4.03L10 2z"]},{id:"check_square_o",viewBox:"0 0 1792 1792",paths:["M1472 930v318q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q63 0 117 25 15 7 18 23 3 17-9 29l-49 49q-10 10-23 10-3 0-9-2-23-6-45-6h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-254q0-13 9-22l64-64q10-10 23-10 6 0 12 3 20 8 20 29zm231-489l-814 814q-24 24-57 24t-57-24l-430-430q-24-24-24-57t24-57l110-110q24-24 57-24t57 24l263 263 647-647q24-24 57-24t57 24l110 110q24 24 24 57t-24 57z"]},{id:"square_o",viewBox:"0 0 1792 1792",paths:["M1312 256h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113v-832q0-66-47-113t-113-47zm288 160v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"]},{id:"file_o",viewBox:"0 0 1792 1792",paths:["M1596 380q28 28 48 76t20 88v1152q0 40-28 68t-68 28h-1344q-40 0-68-28t-28-68v-1600q0-40 28-68t68-28h896q40 0 88 20t76 48zm-444-244v376h376q-10-29-22-41l-313-313q-12-12-41-22zm384 1528v-1024h-416q-40 0-68-28t-28-68v-416h-768v1536h1280z"]},{id:"folder_o",viewBox:"0 0 1792 1792",paths:["M1600 1312v-704q0-40-28-68t-68-28h-704q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v960q0 40 28 68t68 28h1216q40 0 68-28t28-68zm128-704v704q0 92-66 158t-158 66h-1216q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h672q92 0 158 66t66 158z"]},{id:"folder_open_o",viewBox:"0 0 1792 1792",paths:["M1845 931q0-35-53-35h-1088q-40 0-85.5 21.5t-71.5 52.5l-294 363q-18 24-18 40 0 35 53 35h1088q40 0 86-22t71-53l294-363q18-22 18-39zm-1141-163h768v-160q0-40-28-68t-68-28h-576q-40 0-68-28t-28-68v-64q0-40-28-68t-68-28h-320q-40 0-68 28t-28 68v853l256-315q44-53 116-87.5t140-34.5zm1269 163q0 62-46 120l-295 363q-43 53-116 87.5t-140 34.5h-1088q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h544q92 0 158 66t66 158v160h192q54 0 99 24.5t67 70.5q15 32 15 68z"]},{id:"chevron_right",viewBox:"0 0 1792 1792",paths:["M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"]},{id:"chevron_down",viewBox:"0 0 1792 1792",paths:["M1683 808l-742 741q-19 19-45 19t-45-19l-742-741q-19-19-19-45.5t19-45.5l166-165q19-19 45-19t45 19l531 531 531-531q19-19 45-19t45 19l166 165q19 19 19 45.5t-19 45.5z"]}],la=new DOMParser,bZ='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="1.5"><path d="M4 2.1L.5 3.5v12l5-2 5 2 5-2v-12l-5 2-3.17-1.268M10.5 3.5v12" fill="none" stroke="currentColor"/><path d="M5.5 13.5v-7" fill="none" stroke="currentColor" stroke-width=".9969299999999999"/><path d="M5.494 0c-1.803 0-3.26 1.496-3.26 3.35 0 .427.124.97.264 1.343L5.5 11l3.003-6.306c.142-.375.263-.916.263-1.342C8.766 1.496 7.3 0 5.494 0zM5.5 4.64c-.76 0-1.375-.616-1.375-1.374 0-.76.616-1.376 1.375-1.376.76 0 1.374.616 1.374 1.376 0 .758-.614 1.375-1.374 1.375z" fill="currentColor"/></svg>',mb=la.parseFromString(bZ,"text/xml").documentElement,_Z=`
<svg width="20px" height="20px" viewBox="0 0 20 20">
  <rect x="0" y="3" width="4" height="14" fill="#637993"/>
  <rect x="4" y="3" width="2" height="14" fill="#c7d1de"/>
  <rect x="6" y="3" width="5" height="14" fill="#3c5068"/>
  <rect x="11" y="3" width="3" height="14" fill="#92a3ba"/>
  <rect x="14" y="3" width="2" height="14" fill="#000000"/>
  <rect x="16" y="3" width="4" height="14" fill="#637993"/>
</svg>
`,SZ=la.parseFromString(_Z,"text/xml").documentElement,AZ=`
<svg width="20px" height="20px" viewBox="0 0 135 85" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <title>line</title>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polyline id="Path" stroke="#4990E2" stroke-width="8" points="2 45.5625 20.7460938 6.3359375 36.828125 86.6484375 59.8945312 17.5742188 79.0390625 70.703125 99.9335938 27 112.769531 81.1601562 132.078125 3"></polyline>
    </g>
</svg>
`,CZ=la.parseFromString(AZ,"text/xml").documentElement,DZ=`
<svg width="20px" height="20px" viewBox="0 0 60 60" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>2d-tiles-icon</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="tiles2DIconStr-path-1" x="0" y="0" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-1"></use>
        </mask>
        <rect id="tiles2DIconStr-path-3" x="0" y="30" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-3"></use>
        </mask>
        <rect id="tiles2DIconStr-path-5" x="30" y="0" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-5"></use>
        </mask>
        <rect id="tiles2DIconStr-path-7" x="30" y="30" width="30" height="30"></rect>
        <mask id="tiles2DIconStr-mask-8" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="30" height="30" fill="white">
            <use xlink:href="#tiles2DIconStr-path-7"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-2)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-4)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-3"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-6)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-5"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles2DIconStr-mask-8)" stroke-width="6" fill="#EEE0E0" xlink:href="#tiles2DIconStr-path-7"></use>
    </g>
</svg>
`,eR=la.parseFromString(DZ,"text/xml").documentElement,wZ=`
<svg width="20px" height="20px" viewBox="0 0 90 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>2d-heatmap</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="heatmap2DStr-path-1" x="0" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-2" x="30" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-3" x="60" y="0" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-4" x="0" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-5" x="30" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-6" x="60" y="30" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-7" x="0" y="60" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-8" x="30" y="60" width="30" height="30"></rect>
        <rect id="heatmap2DStr-path-9" x="60" y="60" width="30" height="30"></rect>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" fill="#858372" xlink:href="#heatmap2DStr-path-1"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-2"></use>
        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-3"></use>
        <use id="Rectangle" fill="#BCBD9E" xlink:href="#heatmap2DStr-path-4"></use>
        <use id="Rectangle" fill="#817C7C" xlink:href="#heatmap2DStr-path-5"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-6"></use>
        <use id="Rectangle" fill="#ECECD5" xlink:href="#heatmap2DStr-path-7"></use>
        <use id="Rectangle" fill="#BBBAA4" xlink:href="#heatmap2DStr-path-8"></use>
        <use id="Rectangle" fill="#7B7777" xlink:href="#heatmap2DStr-path-9"></use>
    </g>
</svg>
`,tR=la.parseFromString(wZ,"text/xml").documentElement,nR=`
<svg width="20px" height="20px" viewBox="0 0 77 33" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>axis-1d</title>
    <desc>Created with Sketch.</desc>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <polyline id="Path" stroke="#979797" stroke-width="8" transform="translate(38.258485, 27.557860) scale(1, -1) translate(-38.258485, -27.557860) " points="4 27.05786 36.7512307 27.05786 72.5169695 27.05786"></polyline>
        <path d="M38,24.484375 L38,3" id="Path-2" stroke="#979797" stroke-width="4"></path>
    </g>
</svg>
`,IZ=la.parseFromString(nR,"text/xml").documentElement,kZ=xt(la.parseFromString(nR,"text/xml").documentElement).style("transform","rotate(90deg)").node(),OZ=`
<svg width="20px" height="20px" viewBox="0 0 171 116" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 41 (35326) - http://www.bohemiancoding.com/sketch -->
    <title>gene-annotations</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="geneAnnotations-path-1" x="34" y="0" width="24" height="116"></rect>
        <mask id="geneAnnotations-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="116" fill="white">
            <use xlink:href="#geneAnnotations-path-1"></use>
        </mask>
        <rect id="geneAnnotations-path-3" x="80" y="0" width="56" height="116"></rect>
        <mask id="geneAnnotations-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="56" height="116" fill="white">
            <use xlink:href="#geneAnnotations-path-3"></use>
        </mask>
        <rect id="geneAnnotations-path-5" x="147" y="40" width="24" height="35"></rect>
        <mask id="geneAnnotations-mask-6" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="24" height="35" fill="white">
            <use xlink:href="#geneAnnotations-path-5"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M12.71875,58 L147.10172,58" id="Path" stroke="#979797" stroke-width="8"></path>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-2)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-4)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-3"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#geneAnnotations-mask-6)" stroke-width="4" fill="#DDDD66" xlink:href="#geneAnnotations-path-5"></use>
        <polygon id="Triangle" stroke="#979797" fill="#D8D8D8" points="25 57.5 1 75 1 40"></polygon>
    </g>
</svg>
`,xZ=la.parseFromString(OZ,"text/xml").documentElement,rR=`
<svg width="20px" height="20px" viewBox="0 0 180 90" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch -->
    <title>1d-tiles-icon</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="tiles1DIconStr-path-1" x="0" y="0" width="90" height="90"></rect>
        <mask id="tiles1DIconStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#tiles1DIconStr-path-1"></use>
        </mask>
        <rect id="tiles1DIconStr-path-3" x="90" y="0" width="90" height="90"></rect>
        <mask id="tiles1DIconStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#tiles1DIconStr-path-3"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-2)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#tiles1DIconStr-mask-4)" stroke-width="12" fill="#E6D5D5" xlink:href="#tiles1DIconStr-path-3"></use>
    </g>
</svg>
`,PZ=la.parseFromString(rR,"text/xml").documentElement,RZ=xt(la.parseFromString(rR,"text/xml").documentElement).style("transform","rotate(90deg)").node(),NZ=`
<svg width="20px" height="20px" viewBox="0 0 111 111" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <!-- Generator: Sketch 42 (36781) - http://www.bohemiancoding.com/sketch -->
    <title>arrowhead-domains</title>
    <desc>Created with Sketch.</desc>
    <defs>
        <rect id="arrowHeadDomainsStr-path-1" x="0" y="0" width="90" height="90"></rect>
        <mask id="arrowHeadDomainsStr-mask-2" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="90" height="90" fill="white">
            <use xlink:href="#arrowHeadDomainsStr-path-1"></use>
        </mask>
        <rect id="arrowHeadDomainsStr-path-3" x="52" y="52" width="59" height="59"></rect>
        <mask id="arrowHeadDomainsStr-mask-4" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="59" height="59" fill="white">
            <use xlink:href="#arrowHeadDomainsStr-path-3"></use>
        </mask>
    </defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" fill-opacity="0">
        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-2)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-1"></use>
        <use id="Rectangle" stroke="#979797" mask="url(#arrowHeadDomainsStr-mask-4)" stroke-width="22" fill="#D8D8D8" xlink:href="#arrowHeadDomainsStr-path-3"></use>
    </g>
</svg>
`,kf=la.parseFromString(NZ,"text/xml").documentElement;function MZ({theStyle:e,onClick:t}){return A.default.createElement("svg",{className:ji[e],viewBox:"0 0 12 13",onClick:t,xmlns:"http://www.w3.org/2000/svg"},A.default.createElement("g",{fill:"none",stroke:"#6c6c6c",strokeWidth:"2"},A.default.createElement("path",{d:"M11.29 11.71l-4-4"}),A.default.createElement("circle",{cx:"5",cy:"5",r:"4"})))}const iR={type:"osm-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"OSM Tiles",thumbnail:mb,availableOptions:["minPos","maxPos","maxZoom","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{minPos:-180,maxPos:180,maxZoom:19,labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},aR={type:"mapbox-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Mapbox Tiles",thumbnail:mb,availableOptions:["style","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{style:"mapbox.streets",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},hl=[iR,{...iR,type:"osm"},aR,{...aR,type:"mapbox"},{type:"left-axis",datatype:["axis"],local:!0,orientation:"1d-vertical",name:"Left Axis",thumbnail:kZ,availableOptions:["minWidth"],defaultOptions:{minWidth:100}},{type:"top-axis",datatype:["axis"],local:!0,orientation:"1d-horizontal",name:"Top Axis",thumbnail:IZ,defaultOptions:{}},{type:"horizontal-rule",datatype:["x-coord"],local:!0,orientation:"whole",name:"Horizontal Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"vertical-rule",datatype:["y-coord"],local:!0,orientation:"whole",name:"Vertical Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"cross-rule",datatype:["xy-coord"],local:!0,orientation:"whole",name:"Cross Rule",thumbnail:null,availableOptions:["color"],defaultOptions:{color:"black"}},{type:"simple-svg",datatype:[],local:!1,orientation:"2d",exportable:!0,availableOptions:["minWidth","minHeight"],defaultOptions:{minWidth:100,minHeight:100}},{type:"heatmap",datatype:["matrix"],local:!1,orientation:"2d",thumbnail:tR,exportable:!0,availableOptions:["backgroundColor","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","colorbarBackgroundColor","maxZoom","minWidth","minHeight","dataTransform","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling","showMousePosition","mousePositionColor","showTooltip","extent","zeroValueColor"],defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],colorbarBackgroundColor:"#ffffff",maxZoom:null,minWidth:100,minHeight:100,colorbarPosition:"topRight",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log",showMousePosition:!1,mousePositionColor:"#000000",showTooltip:!1,extent:"full",zeroValueColor:null},defaultOptionsByTheme:{[pn]:{backgroundColor:"#000000",colorRange:["black","rgba(208,2,27,1.0)","rgba(245,166,35,1.0)","white"],colorbarBackgroundColor:"#000000",labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff"}}},{type:"linear-heatmap",aliases:["horizontal-heatmap","vertical-heatmap"],datatype:["matrix"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:tR,defaultOptions:{backgroundColor:"#eeeeee",labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,labelColor:"black",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],maxZoom:null,minWidth:100,minHeight:40,trackBorderWidth:0,trackBorderColor:"black"},availableOptions:["backgroundColor","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","colorRange","maxZoom","minWidth","minHeight","dataTransform","oneDHeatmapFlipped","colorbarPosition","trackBorderWidth","trackBorderColor","heatmapValueScaling"]},{type:"line",aliases:["horizontal-line","vertical-line"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:CZ,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","lineStrokeWidth","lineStrokeColor","valueScaling","valueScaleMin","valueScaleMax","trackBorderWidth","trackBorderColor","trackType","showMousePosition","showTooltip","mousePositionColor","aggregationMode","minHeight"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelBackgroundColor:"white",labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",lineStrokeColor:"blue",lineStrokeWidth:1,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,minHeight:20,mousePositionColor:"#000000",showTooltip:!1},defaultOptionsByTheme:{[pn]:{labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff"}}},{type:"1d-heatmap",aliases:["horizontal-1d-heatmap","vertical-1d-heatmap"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:SZ,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","axisMargin","colorRange","valueScaling","trackBorderWidth","trackBorderColor","trackType","showMousePosition","showTooltip","mousePositionColor","aggregationMode"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisPositionHorizontal:"right",colorRange:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"],valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,showMousePosition:!1,mousePositionColor:"#000000",showTooltip:!1}},{type:"vector-heatmap",aliases:["horizontal-vector-heatmap","vertical-vector-heatmap"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,minHeight:1,thumbnail:null,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","valueScaling","labelTextOpacity","labelBackgroundOpacity","colorRange","trackBorderWidth","trackBorderColor","trackType","heatmapValueScaling"],defaultOptions:{labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,labelColor:"black",labelTextOpacity:.4,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log"}},{type:"multivec",aliases:["horizontal-multivec","vertical-multivec"],datatype:["multivec"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:null,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","minHeight","valueScaling","labelTextOpacity","labelBackgroundOpacity","colorRange","trackBorderWidth","trackBorderColor","trackType","heatmapValueScaling","selectRows","selectRowsAggregationMode","selectRowsAggregationWithRelativeHeight","selectRowsAggregationMethod","colorbarBackgroundColor","colorbarPosition","zeroValueColor"],defaultOptions:{labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!0,labelShowAssembly:!0,labelColor:"black",labelTextOpacity:.4,minHeight:100,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",heatmapValueScaling:"log",selectRows:null,selectRowsAggregationMode:"mean",selectRowsAggregationWithRelativeHeight:!0,selectRowsAggregationMethod:"client",colorbarBackgroundColor:"#ffffff",colorbarPosition:"topRight",zeroValueColor:null},defaultOptionsByTheme:{[pn]:{colorbarBackgroundColor:"#000000"}}},{type:"point",aliases:["horizontal-point","vertical-point"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","pointColor","pointSize","valueScaling","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",pointColor:"red",pointSize:3,valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4}},{type:"divergent-bar",aliases:["horizontal-divergent-bar","vertical-divergent-bar"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","barFillColorTop","barFillColorBottom","valueScaling","trackBorderWidth","trackBorderColor","barOpacity"],defaultOptions:{labelColor:"black",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisPositionHorizontal:"right",axisLabelFormatting:"scientific",barFillColorBottom:"red",barFillColorTop:"green",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"bar",aliases:["horizontal-bar","vertical-bar"],datatype:["vector"],local:!1,orientation:"1d-horizontal",rotatable:!0,availableOptions:["align","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelShowResolution","labelShowAssembly","labelColor","labelTextOpacity","labelBackgroundOpacity","axisLabelFormatting","axisPositionHorizontal","axisMargin","barFillColor","colorRange","colorRangeGradient","valueScaling","valueScaleMin","valueScaleMax","trackBorderWidth","trackBorderColor","barOpacity","showMousePosition","showTooltip","aggregationMode","zeroLineVisible","zeroLineColor","zeroLineOpacity"],defaultOptions:{align:"bottom",labelColor:"[glyph-color]",labelPosition:"topLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,labelShowResolution:!1,labelShowAssembly:!0,axisLabelFormatting:"scientific",axisPositionHorizontal:"right",barFillColor:"darkgreen",valueScaling:"linear",trackBorderWidth:0,trackBorderColor:"black",labelTextOpacity:.4,barOpacity:1}},{type:"2d-tiles",datatype:["matrix"],local:!1,orientation:"2d",name:"2D Tile Outlines",thumbnail:eR},{type:"1d-value-interval",aliases:["horizontal-1d-value-interval","vertical-1d-value-interval"],datatype:["bed-value"],local:!1,orientation:["1d-horizontal"],rotatable:!0,name:"1D Rectangles",availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","axisPositionHorizontal","axisMargin"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,axisPositionHorizontal:"left",lineStrokeColor:"blue",valueScaling:"linear"}},{type:"stacked-interval",aliases:["top-stacked-interval","left-stacked-interval"],datatype:["stacked-interval"],local:!1,orientation:"1d-horizontal",rotatable:!0,thumbnail:"horizontal-stacked-interval.png",availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity"]},{type:"viewport-projection-vertical",datatype:["1d-projection"],local:!0,hidden:!0,projection:!0,orientation:"1d-vertical",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-horizontal",datatype:["1d-projection"],local:!0,hidden:!0,projection:!0,orientation:"1d-horizontal",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"viewport-projection-center",datatype:["2d-projection"],local:!0,hidden:!0,projection:!0,orientation:"2d",name:"Viewport Projection",thumbnail:"viewport-projection-center.png",availableOptions:["projectionFillColor","projectionStrokeColor","strokeWidth"],defaultOptions:{projectionFillColor:"#777",projectionStrokeColor:"#777",projectionFillOpacity:.3,projectionStrokeOpacity:.7,strokeWidth:1}},{type:"gene-annotations",aliases:["horizontal-gene-annotations","vertical-gene-annotations"],datatype:["gene-annotation"],local:!1,defaultHeight:90,defaultWidth:90,rotatable:!0,orientation:"1d-horizontal",name:"Gene Annotations",thumbnail:xZ,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundColor","labelBackgroundOpacity","minHeight","plusStrandColor","minusStrandColor","trackBorderWidth","trackBorderColor","showMousePosition","mousePositionColor","fontSize","geneAnnotationHeight","geneLabelPosition","geneStrandSpacing"],defaultOptions:{fontSize:10,labelColor:"black",labelBackgroundColor:"#ffffff",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:24,plusStrandColor:"blue",minusStrandColor:"red",trackBorderWidth:0,trackBorderColor:"black",showMousePosition:!1,mousePositionColor:"#000000",geneAnnotationHeight:16,geneLabelPosition:"outside",geneStrandSpacing:4},defaultOptionsByTheme:{[pn]:{labelColor:"#ffffff",labelBackgroundColor:"#000000",trackBorderColor:"#ffffff",mousePositionColor:"#ffffff",plusStrandColor:"#40a0ff"}}},{type:"arrowhead-domains",datatype:["arrowhead-domains"],local:!1,orientation:"2d",name:"Arrowhead Domains",thumbnail:kf,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black"}},{type:"linear-2d-rectangle-domains",aliases:["horizontal-2d-rectangle-domains","vertical-2d-rectangle-domains"],datatype:["2d-rectangle-domains"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"Horizontal 2D Rectangle Domains",thumbnail:kf,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{labelColor:"black",labelPosition:"bottomLeft",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"2d-rectangle-domains",datatype:["2d-rectangle-domains"],local:!1,orientation:"2d",name:"2D Rectangle Domains",thumbnail:kf,availableOptions:["flipDiagonal","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainFillOpacity","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize"],defaultOptions:{flipDiagonal:"none",labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainFillOpacity:.4,rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none"}},{type:"horizontal-1d-annotations",datatype:["nothing"],local:!1,orientation:"1d-horizontal",name:"Horizontal 1D Annotations",thumbnail:null,availableOptions:["fill","fillOpacity","stroke","strokeOpacity","strokeWidth","strokePos","regions"],defaultOptions:{fill:"red",fillOpacity:.2,stroke:"red",strokeOpacity:0,strokeWidth:1,regions:[],strokePos:[]}},{type:"vertical-1d-annotations",datatype:["nothing"],local:!1,orientation:"1d-vertical",name:"Vertical 1D Annotations",thumbnail:null,availableOptions:["fill","fillOpacity","stroke","strokeOpacity","regions"],defaultOptions:{fill:"red",fillOpacity:"0.2",stroke:"red",strokeOpacity:"0",regions:[]}},{type:"2d-annotations",datatype:["2d-annotations"],local:!1,orientation:"2d",name:"2D Annotations",thumbnail:kf,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor","labelTextOpacity","labelBackgroundOpacity","trackBorderWidth","trackBorderColor","rectangleDomainFillColor","rectangleDomainStrokeColor","rectangleDomainOpacity","minSquareSize","isClickable","hoverColor","selectColor","exclude","trackBorderBgWidth","trackBorderBgColor","trackBorderBgAlpha"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black",rectangleDomainFillColor:"grey",rectangleDomainStrokeColor:"black",rectangleDomainOpacity:.6,minSquareSize:"none",isClickable:!1,hoverColor:"orange",selectColor:"fuchsia",exclude:[],trackBorderBgWidth:0,trackBorderBgColor:"black",trackBorderBgAlpha:.33}},{type:"square-markers",datatype:["bedpe"],local:!1,orientation:"2d",name:"Square Markers",thumbnail:kf,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","labelColor"],defaultOptions:{labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,trackBorderWidth:0,trackBorderColor:"black"}},{type:"combined",datatype:"any",local:!0,orientation:"any"},{type:"horizontal-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"1d-horizontal",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor","showMousePosition"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey",showMousePosition:!1}},{type:"vertical-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"1d-vertical",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor","showMousePosition"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey",showMousePosition:!1}},{type:"2d-chromosome-grid",datatype:["chromsizes"],local:!1,orientation:"2d",name:"Chromosome Grid",chromInfoPath:"//s3.amazonaws.com/pkerp/data/hg19/chromSizes.tsv",thumbnail:null,availableOptions:["lineStrokeWidth","lineStrokeColor"],defaultOptions:{lineStrokeWidth:1,lineStrokeColor:"grey"}},{type:"2d-chromosome-annotations",datatype:["chromsizes"],local:!0,orientation:"2d",name:"2D Chromosome Annotations",thumbnail:null,hidden:!0},{type:"2d-chromosome-labels",datatype:["chromsizes"],local:!0,orientation:"2d",name:"Pairwise Chromosome Labels",thumbnail:null},{type:"chromosome-labels",aliases:["horizontal-chromosome-labels","vertical-chromosome-labels"],datatype:["chromsizes"],orientation:"1d-horizontal",rotatable:!0,minHeight:35,defaultHeight:30,name:"Chromosome Axis",thumbnail:null,availableOptions:["color","stroke","fontSize","fontIsLeftAligned","showMousePosition","mousePositionColor","tickPositions","tickFormat","reverseOrientation"],defaultOptions:{color:"#808080",stroke:"#ffffff",fontSize:12,fontIsLeftAligned:!1,showMousePosition:!1,mousePositionColor:"#000000",reverseOrientation:!1},defaultOptionsByTheme:{[pn]:{color:"#808080",stroke:"#000000",mousePositionColor:"#ffffff"}}},{type:"vertical-1d-tiles",datatype:["1d-tiles"],local:!1,orientation:"1d-vertical",name:"Vertical 1D Tile Outlines",thumbnail:RZ},{type:"horizontal-1d-tiles",datatype:["vector","stacked-interval","gene-annotation"],local:!1,orientation:"1d-horizontal",name:"Horizontal 1D Tile Outlines",thumbnail:PZ},{type:"osm-2d-tile-ids",datatype:["map-tiles"],local:!1,orientation:"2d",name:"OSM Tile Outlines",thumbnail:eR,availableOptions:["minPos","maxPos","maxZoom","labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{minPos:-180,maxPos:180,maxZoom:19,labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},{type:"raster-tiles",datatype:["map-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Raster Tiles",thumbnail:mb,availableOptions:["labelPosition","labelLeftMargin","labelRightMargin","labelTopMargin","labelBottomMargin","name"],defaultOptions:{labelPosition:"bottomRight",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0}},{type:"image-tiles",datatype:["image-tiles"],local:!0,orientation:"2d",hidden:!0,name:"Image Tiles",thumbnail:null},{type:"bedlike",datatype:["bedlike"],aliases:["vertical-bedlike"],local:!1,orientation:"1d-horizontal",rotatable:!0,name:"BED-like track",thumbnail:null,availableOptions:["alternating","annotationHeight","annotationStyle","fillColor","fillOpacity","fontColor","fontSize","minusStrandColor","plusStrandColor","labelBottomMargin","labelColor","labelLeftMargin","labelPosition","labelRightMargin","labelTopMargin","labelTextOpacity","labelBackgroundOpacity","maxAnnotationHeight","minHeight","trackBorderWidth","trackBorderColor","valueColumn","colorEncoding","colorRange","colorEncodingRange","separatePlusMinusStrands","showTexts","axisPositionHorizontal","axisMargin"],defaultOptions:{alternating:!1,annotationStyle:"box",fillColor:"blue",fillOpacity:.3,fontSize:"10",axisPositionHorizontal:"right",labelColor:"black",labelPosition:"hidden",labelLeftMargin:0,labelRightMargin:0,labelTopMargin:0,labelBottomMargin:0,minHeight:20,maxAnnotationHeight:null,trackBorderWidth:0,trackBorderColor:"black",valueColumn:null,colorEncoding:"itemRgb",showTexts:!1,colorRange:["#000000","#652537","#bf5458","#fba273","#ffffe0"],colorEncodingRange:!1,separatePlusMinusStrands:!0,annotationHeight:16}},{type:"empty",datatype:[],orientation:"1d-horizontal",name:"Empty track",thumbnail:null,availableOptions:[],defaultOptions:{}}],gb=e=>{const t={},n=i=>!!(i.orientation===e||e==="1d-vertical"&&i.orientation==="1d-horizontal"&&i.rotatable);return hl.filter(n).forEach(i=>{let r=i.datatype;Array.isArray(i.datatype)||(r=[r]),r.forEach(a=>{a in t||(t[a]=[]),t[a].push(i)})}),t.none=[],t},$u=[[0,0,0,255],[35,0,0,255],[52,0,0,255],[60,0,0,255],[63,1,0,255],[64,2,0,255],[68,5,0,255],[69,6,0,255],[72,8,0,255],[74,10,0,255],[77,12,0,255],[78,14,0,255],[81,16,0,255],[83,17,0,255],[85,19,0,255],[86,20,0,255],[89,22,0,255],[91,24,0,255],[92,25,0,255],[94,26,0,255],[95,28,0,255],[98,30,0,255],[100,31,0,255],[102,33,0,255],[103,34,0,255],[105,35,0,255],[106,36,0,255],[108,38,0,255],[109,39,0,255],[111,40,0,255],[112,42,0,255],[114,43,0,255],[115,44,0,255],[117,45,0,255],[119,47,0,255],[119,47,0,255],[120,48,0,255],[122,49,0,255],[123,51,0,255],[125,52,0,255],[125,52,0,255],[126,53,0,255],[128,54,0,255],[129,56,0,255],[129,56,0,255],[131,57,0,255],[132,58,0,255],[134,59,0,255],[134,59,0,255],[136,61,0,255],[137,62,0,255],[137,62,0,255],[139,63,0,255],[139,63,0,255],[140,65,0,255],[142,66,0,255],[142,66,0,255],[143,67,0,255],[143,67,0,255],[145,68,0,255],[145,68,0,255],[146,70,0,255],[146,70,0,255],[148,71,0,255],[148,71,0,255],[149,72,0,255],[149,72,0,255],[151,73,0,255],[151,73,0,255],[153,75,0,255],[153,75,0,255],[154,76,0,255],[154,76,0,255],[154,76,0,255],[156,77,0,255],[156,77,0,255],[157,79,0,255],[157,79,0,255],[159,80,0,255],[159,80,0,255],[159,80,0,255],[160,81,0,255],[160,81,0,255],[162,82,0,255],[162,82,0,255],[163,84,0,255],[163,84,0,255],[165,85,0,255],[165,85,0,255],[166,86,0,255],[166,86,0,255],[166,86,0,255],[168,87,0,255],[168,87,0,255],[170,89,0,255],[170,89,0,255],[171,90,0,255],[171,90,0,255],[173,91,0,255],[173,91,0,255],[174,93,0,255],[174,93,0,255],[176,94,0,255],[176,94,0,255],[177,95,0,255],[177,95,0,255],[179,96,0,255],[179,96,0,255],[180,98,0,255],[182,99,0,255],[182,99,0,255],[183,100,0,255],[183,100,0,255],[185,102,0,255],[185,102,0,255],[187,103,0,255],[187,103,0,255],[188,104,0,255],[188,104,0,255],[190,105,0,255],[191,107,0,255],[191,107,0,255],[193,108,0,255],[193,108,0,255],[194,109,0,255],[196,110,0,255],[196,110,0,255],[197,112,0,255],[197,112,0,255],[199,113,0,255],[200,114,0,255],[200,114,0,255],[202,116,0,255],[202,116,0,255],[204,117,0,255],[205,118,0,255],[205,118,0,255],[207,119,0,255],[208,121,0,255],[208,121,0,255],[210,122,0,255],[211,123,0,255],[211,123,0,255],[213,124,0,255],[214,126,0,255],[214,126,0,255],[216,127,0,255],[217,128,0,255],[217,128,0,255],[219,130,0,255],[221,131,0,255],[221,131,0,255],[222,132,0,255],[224,133,0,255],[224,133,0,255],[225,135,0,255],[227,136,0,255],[227,136,0,255],[228,137,0,255],[230,138,0,255],[230,138,0,255],[231,140,0,255],[233,141,0,255],[233,141,0,255],[234,142,0,255],[236,144,0,255],[236,144,0,255],[238,145,0,255],[239,146,0,255],[241,147,0,255],[241,147,0,255],[242,149,0,255],[244,150,0,255],[244,150,0,255],[245,151,0,255],[247,153,0,255],[247,153,0,255],[248,154,0,255],[250,155,0,255],[251,156,0,255],[251,156,0,255],[253,158,0,255],[255,159,0,255],[255,159,0,255],[255,160,0,255],[255,161,0,255],[255,163,0,255],[255,163,0,255],[255,164,0,255],[255,165,0,255],[255,167,0,255],[255,167,0,255],[255,168,0,255],[255,169,0,255],[255,169,0,255],[255,170,0,255],[255,172,0,255],[255,173,0,255],[255,173,0,255],[255,174,0,255],[255,175,0,255],[255,177,0,255],[255,178,0,255],[255,179,0,255],[255,181,0,255],[255,181,0,255],[255,182,0,255],[255,183,0,255],[255,184,0,255],[255,187,7,255],[255,188,10,255],[255,189,14,255],[255,191,18,255],[255,192,21,255],[255,193,25,255],[255,195,29,255],[255,197,36,255],[255,198,40,255],[255,200,43,255],[255,202,51,255],[255,204,54,255],[255,206,61,255],[255,207,65,255],[255,210,72,255],[255,211,76,255],[255,214,83,255],[255,216,91,255],[255,219,98,255],[255,221,105,255],[255,223,109,255],[255,225,116,255],[255,228,123,255],[255,232,134,255],[255,234,142,255],[255,237,149,255],[255,239,156,255],[255,240,160,255],[255,243,167,255],[255,246,174,255],[255,248,182,255],[255,249,185,255],[255,252,193,255],[255,253,196,255],[255,255,204,255],[255,255,207,255],[255,255,211,255],[255,255,218,255],[255,255,222,255],[255,255,225,255],[255,255,229,255],[255,255,233,255],[255,255,236,255],[255,255,240,255],[255,255,244,255],[255,255,247,255],[255,255,255,0]],fn=hl.reduce((e,t)=>{if(e[t.type]=t,t.aliases)for(const n of t.aliases)e[n]=t;return e},{}),LZ=hl.reduce((e,t)=>{for(let n=0;n<t.datatype.length;n++){const i=t.datatype[n];return e[i]?e[i].add(t.orientation):e[i]=new Set,e}return{}},{}),Of={chromsizes:{center:"2d-chromosome-grid",top:"chromosome-labels",left:"chromosome-labels",bottom:"chromosome-labels",right:"chromosome-labels"},matrix:{center:"heatmap",top:"linear-heatmap",left:"linear-heatmap",right:"linear-heatmap",bottom:"linear-heatmap"},vector:{top:"bar",bottom:"bar",left:"bar",right:"bar"},"geo-json":{center:"geo-json"},"gene-annotation":{top:"gene-annotations",bottom:"gene-annotations",left:"gene-annotations",right:"gene-annotations"},bedlike:{top:"bedlike",bottom:"bedlike",left:"vertical-bedlike",right:"vertical-bedlike"}},Lg=(e,t)=>{const n=gb(t);let i=new Set(Object.values(n).flatMap(r=>r));for(const r of e){const a=new Set(r);i=new Set([...i].filter(o=>o.datatype.filter(s=>a.has(s)).length>0))}return[...i]},oR=8,vb=8,BZ=Object.freeze(Object.defineProperty({__proto__:null,THEME_LIGHT:Mg,THEME_DARK:pn,THEME_DEFAULT:TZ,GLOBALS:Be,DATATYPE_TO_TRACK_TYPE:gb,HEATED_OBJECT_MAP:$u,TRACKS_INFO:hl,TRACKS_INFO_BY_TYPE:fn,POSITIONS_BY_DATATYPE:LZ,DEFAULT_TRACKS_FOR_DATATYPE:Of,AVAILABLE_TRACK_TYPES:Lg,NUM_PRECOMP_SUBSETS_PER_1D_TTILE:oR,NUM_PRECOMP_SUBSETS_PER_2D_TTILE:vb,DEFAULT_VIEW_MARGIN:Cf,DEFAULT_VIEW_PADDING:Df,DEFAULT_CONTAINER_PADDING_X:VP,DEFAULT_CONTAINER_PADDING_Y:YP,MAX_CLICK_DELAY:WP,MOUSE_TOOL_MOVE:Rg,MOUSE_TOOL_SELECT:zi,TILE_FETCH_DEBOUNCE:fb,ZOOM_DEBOUNCE:Ng,SHORT_DRAG_TIMEOUT:qP,LONG_DRAG_TIMEOUT:wf,LOCATION_LISTENER_PREFIX:If,ZOOM_TRANSITION_DURATION:XP,DEFAULT_SERVER:db,VIEW_HEADER_MED_WIDTH_SEARCH_BAR:KP,VIEW_HEADER_MIN_WIDTH_SEARCH_BAR:ZP,TRACK_LOCATIONS:pb,MIN_HORIZONTAL_HEIGHT:QP,MIN_VERTICAL_WIDTH:JP},Symbol.toStringTag,{value:"Module"})),at=e=>{const t=Kn(e);return Be.PIXI.utils.rgb2hex([t.r/255,t.g/255,t.b/255])},sR=e=>{if(e==="transparent")return[255,255,255,0];const t=Kn(e);return[t.r,t.g,t.b,255]},Bg=(e,t,n)=>{const i=Wn(e,n),r=Wn(t,n);return[i[0],Math.round(i[1]),r[0],Math.round(r[1])]},Fg=(e,t,n)=>{let i;const r=(...a)=>{const o=()=>{i=null,n||e(...a)},s=n&&!i;clearTimeout(i),i=setTimeout(o,t),s&&e(...a)};return Fg.cancel=()=>{clearTimeout(i),i=null},r},yb=e=>(e+16**6).toString(16).substr(-6),lR=e=>{const t={};return e.forEach(n=>{t[n[0]]=n[1]}),t},Vi=e=>{const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push([n,e[n]]);return t};function Yi(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(n);return t}function un(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t}function xf(e,t){const n=typeof t=="string"?new Blob([t],{type:"application/octet-stream"}):t;if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(n,e);else{const i=window.document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(i.href)}}const uR=e=>{const t=["top","bottom","gallery"],n=["left","right","gallery"];return e.center=e.center||[],e.left=e.left||[],e.right=e.right||[],e.top=e.top||[],e.bottom=e.bottom||[],e.whole=e.whole||[],e.gallery=e.gallery||[],t.map(i=>e[i]).forEach(i=>i.forEach(r=>{const a=fn[r.type],o=a&&a.defaultOptions||{},s=r.options?{...o,...r.options}:o;s.minHeight!==void 0&&r.height===void 0&&(r.height=s.minHeight),r.height===void 0&&(r.height=a&&a.defaultHeight||QP)})),n.map(i=>e[i]).forEach(i=>i.forEach(r=>{const a=fn[r.type],o=a&&a.defaultOptions||{},s=r.options?{...o,...r.options}:o;s.minWidth!==void 0&&r.width===void 0&&(r.width=s.minWidth),r.width===void 0&&(r.width=a&&a.defaultWidth||JP)})),e},cR=e=>t=>Array.prototype.reduce.call(t,e),FZ=cR((e,t)=>e.concat(t)),HZ=e=>t=>Array.prototype.forEach.call(t,e),Hg=(e,t)=>{t.dispatchEvent(jP(e))},$Z=(e,t)=>[Pg(e[0],e[1],t),Pg(e[2],e[3],t)];function UZ(e,t,n,i,r){const{chr:a,pos:o}=t,{chr:s,pos:u}=n,c=[];if(a===s){const l=a,f=Math.floor(o/i),h=Math.min(f+r,Math.ceil(u/i));c.push([l,f,h])}else{let l=r;const f=e.findIndex(([d])=>d===a),h=e.findIndex(([d])=>d===s);for(let d=f;d<=h;d++){let p,m;const[g,v]=e[d];d<h?(d===f?p=o:p=0,m=v):(p=0,m=u);const E=Math.floor(p/i),y=Math.min(E+l,Math.ceil(m/i));c.push([g,E,y]),l-=y-E}}return c}const Tb=(e,t,n)=>{if(n.length===0)return;if(n.length===1)return n[0];let i=n[0];const r=Of[e]!==void 0?Of[e][t]:void 0;return r!==void 0&&(i=n.find(a=>a.type===r)||i),i};var hR={},Eb={},bb=34,Pf=10,_b=13;function fR(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function GZ(e,t){var n=fR(e);return function(i,r){return t(n(i),r,e)}}function dR(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function li(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function zZ(e){return e<0?"-"+li(-e,6):e>9999?"+"+li(e,6):li(e,4)}function jZ(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":zZ(e.getUTCFullYear())+"-"+li(e.getUTCMonth()+1,2)+"-"+li(e.getUTCDate(),2)+(r?"T"+li(t,2)+":"+li(n,2)+":"+li(i,2)+"."+li(r,3)+"Z":i?"T"+li(t,2)+":"+li(n,2)+":"+li(i,2)+"Z":n||t?"T"+li(t,2)+":"+li(n,2)+"Z":"")}function Sb(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(f,h){var d,p,m=r(f,function(g,v){if(d)return d(g,v-1);p=g,d=h?GZ(g,h):fR(g)});return m.columns=p||[],m}function r(f,h){var d=[],p=f.length,m=0,g=0,v,E=p<=0,y=!1;f.charCodeAt(p-1)===Pf&&--p,f.charCodeAt(p-1)===_b&&--p;function T(){if(E)return Eb;if(y)return y=!1,hR;var S,w=m,D;if(f.charCodeAt(w)===bb){for(;m++<p&&f.charCodeAt(m)!==bb||f.charCodeAt(++m)===bb;);return(S=m)>=p?E=!0:(D=f.charCodeAt(m++))===Pf?y=!0:D===_b&&(y=!0,f.charCodeAt(m)===Pf&&++m),f.slice(w+1,S-1).replace(/""/g,'"')}for(;m<p;){if((D=f.charCodeAt(S=m++))===Pf)y=!0;else if(D===_b)y=!0,f.charCodeAt(m)===Pf&&++m;else if(D!==n)continue;return f.slice(w,S)}return E=!0,f.slice(w,p)}for(;(v=T())!==Eb;){for(var b=[];v!==hR&&v!==Eb;)b.push(v),v=T();h&&(b=h(b,g++))==null||d.push(b)}return d}function a(f,h){return f.map(function(d){return h.map(function(p){return l(d[p])}).join(e)})}function o(f,h){return h==null&&(h=dR(f)),[h.map(l).join(e)].concat(a(f,h)).join(`
`)}function s(f,h){return h==null&&(h=dR(f)),a(f,h).join(`
`)}function u(f){return f.map(c).join(`
`)}function c(f){return f.map(l).join(e)}function l(f){return f==null?"":f instanceof Date?jZ(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:r,format:o,formatBody:s,formatRows:u,formatRow:c,formatValue:l}}var fl=Sb(","),VZ=fl.parse,YZ=fl.parseRows,WZ=fl.format,qZ=fl.formatBody,XZ=fl.formatRows,KZ=fl.formatRow,ZZ=fl.formatValue,dl=Sb("	"),QZ=dl.parse,Ab=dl.parseRows,JZ=dl.format,eQ=dl.formatBody,tQ=dl.formatRows,nQ=dl.formatRow,rQ=dl.formatValue;function iQ(e){for(var t in e){var n=e[t].trim(),i,r;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(r=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))aQ&&!!r[4]&&!r[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;e[t]=n}return e}const aQ=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),oQ=Object.freeze(Object.defineProperty({__proto__:null,dsvFormat:Sb,csvParse:VZ,csvParseRows:YZ,csvFormat:WZ,csvFormatBody:qZ,csvFormatRows:XZ,csvFormatRow:KZ,csvFormatValue:ZZ,tsvParse:QZ,tsvParseRows:Ab,tsvFormat:JZ,tsvFormatBody:eQ,tsvFormatRows:tQ,tsvFormatRow:nQ,tsvFormatValue:rQ,autoType:iQ},Symbol.toStringTag,{value:"Module"})),$g={},sQ=(e,t)=>$g[e]?Promise.resolve($g[e]):t(e),lQ=e=>{if(e.length===0)return null;const t=Ab(e);return jg(t)},uQ=e=>fetch(e,{credentials:"same-origin"}).then(t=>t.text()).then(t=>lQ(t)).catch(t=>{console.error("Could not retrieve or parse chrom info.",t)}),cQ=(e,t,n)=>t(e,n).then(i=>($g[e]=i,$g[e])),Cb={get:e=>cQ(e,sQ,uQ)};let hQ=function(){function e(t){_classCallCheck3(this,e),this.customEventHandlers={},this.registeredEls={},this.pubSub=t}return _createClass3(e,[{key:"getEventHandler",value:function(n){return this.customEventHandlers[n]?this.customEventHandlers[n]:i=>this.pubSub.publish(n,i)}},{key:"unregister",value:function(n,i){!this.registeredEls[n]&&this.registeredEls[n]!==i||(this.registeredEls[n].removeEventListener(n,this.registeredEls[n].__handler__),this.registeredEls[n]=void 0,delete this.registeredEls[n])}},{key:"register",value:function(n,i,r=!1){!i||this.registeredEls[n]===i||(this.registeredEls[n]&&this.unregister(this.registeredEls[n]),this.registeredEls[n]=i,this.registeredEls[n].__handler__=this.getEventHandler(n),this.registeredEls[n].addEventListener(n,this.registeredEls[n].__handler__,{capture:r,passive:!1}))}}]),e}();const pR=e=>new hQ(e);let mR=!1;const gR={listen:()=>{if(mR)return;const[e,t]=bR(),n="102117110099116105111110040041123115101108102046099111110115111108101046108111103040039",i="072",r="105",a="071",o="108097115115",s="032118",u="058032104116116112058047047104105103108097115115046105111039041125",c=[String.fromCharCode(...n.match(/.{1,3}/g).map(w=>+w)).toLowerCase(),String.fromCharCode(...i.match(/.{1,3}/g).map(w=>+w)),String.fromCharCode(...r.match(/.{1,3}/g).map(w=>+w)).toLowerCase(),String.fromCharCode(...a.match(/.{1,3}/g).map(w=>+w)),String.fromCharCode(...o.match(/.{1,3}/g).map(w=>+w)).toLowerCase(),String.fromCharCode(...s.match(/.{1,3}/g).map(w=>+w)).toLowerCase(),String.fromCharCode(...t.match(/.{1,3}/g).map(w=>+w)).toLowerCase(),String.fromCharCode(...u.match(/.{1,3}/g).map(w=>+w)).toLowerCase()].join(""),l="085082076",f="066076079066",h="087111114107101114",d="099114101097116101079098106101099116085082076",p="114101118111107101079098106101099116085082076",m=w=>w.charAt(0).toUpperCase()+w.slice(1),g=w=>w.slice(0,6)+w.charAt(6).toUpperCase()+w.slice(7,12)+w.slice(12).toUpperCase(),v=e[String.fromCharCode(...l.match(/.{1,3}/g).map(w=>+w))],E=e[m(String.fromCharCode(...f.match(/.{1,3}/g).map(w=>+w)).toLowerCase())],y=e[m(String.fromCharCode(...h.match(/.{1,3}/g).map(w=>+w)).toLowerCase())],T=g(String.fromCharCode(...d.match(/.{1,3}/g).map(w=>+w)).toLowerCase()),b=g(String.fromCharCode(...p.match(/.{1,3}/g).map(w=>+w)).toLowerCase()),S=v[T](new E([`(${c})()`],{type:"application/javascript"}));new y(S),v[b](S),mR=!0}};function fQ(e,t,n,i,r,a,o){let s,u;r&&(s=Ub(r),u=(p,m)=>s(m.map(g=>e[g*t[1]+p])));let c,l,f,h,d;for(f=0;f<t[1];f++)for(l=0,h=0;h<i.length;h++)if(s&&o==="server"?c=e[h*t[1]+f]:Array.isArray(i[h])&&s?c=u(f,i[h]):c=e[i[h]*t[1]+f],a&&Array.isArray(i[h]))for(d=0;d<i[h].length;d++)n(l*t[1]+f,c),l++;else n(l*t[1]+f,c),l++}function dQ(e,t,n,i,r,a,o=!1,s=!1,u=null,c=null,l=null){let f=null;n==="log"?f=Xo().range([254,0]).domain(i):(n!=="linear"&&console.warn("Unknown value scale type:",n," Defaulting to linear"),f=Et().range([254,0]).domain(i));const{selectedRows:h=null,selectedRowsAggregationMode:d=null,selectedRowsAggregationWithRelativeHeight:p=null,selectedRowsAggregationMethod:m=null}=l||{};let g=e;u&&h&&(g=Ff(h,p)*u[1]);let v,E=0;const y=u?u[1]:Math.sqrt(e),T=new Uint8ClampedArray(g*4),b=D=>{const R=f(D);return Number.isNaN(R)?254:Math.max(0,Math.min(254,Math.floor(R)))},S=(D,R)=>{E=255,!(o&&Math.floor(D/y)<D%y)&&!(s&&Math.floor(D/y)>D%y)&&!Number.isNaN(+R)&&(E=b(R+r)),(E<0||E>255)&&console.warn("out of bounds rgbIdx:",E," (should be 0 <= rgbIdx <= 255)"),c&&!Number.isNaN(+R)&&+R==0?v=c:v=a[E],T[D*4]=v[0],T[D*4+1]=v[1],T[D*4+2]=v[2],T[D*4+3]=v[3]};let w;try{if(h)fQ(t,u,S,h,d,p,m);else for(let D=0;D<t.length;D++)w=t[D],S(D,w)}catch(D){return console.warn("Odd datapoint"),console.warn("valueScale.domain():",f.domain()),console.warn("valueScale.range():",f.range()),console.warn("value:",f(w+r)),console.warn("pseudocount:",r),console.warn("rgbIdx:",E,"d:",w,"ct:",f(w)),console.error("ERROR:",D),T}return T}function pQ(e){let t=e&31744,n,i,r;const a=(e&32768)<<16;switch(t){case 0:if(n=e&1023,n===0)return a;for(n<<=1;(n&1024)===0;)n<<=1,t++;return i=127-15-t<<23,r=(n&1023)<<13,a+i+r;case 31744:return a+2139095040+((e&1023)<<13);default:return a+((e&32767)+114688<<13)}}function mQ(e){const t=atob(e),n=t.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer}function gQ(e){const t=new Uint32Array(e.length);for(let i=0;i<e.length;i++)t[i]=pQ(e[i]);return new Float32Array(t.buffer)}function Db(e,t,n){e||(e={});for(const i of n){i in e||(e[i]={});const r=i,a=r.split(".");if(e[r].server=t,e[r].tileId=r,e[r].zoomLevel=+a[1],e[r].tilePos=a.slice(2,a.length).map(o=>+o).filter(o=>!Number.isNaN(o)),e[r].tilesetUid=a[0],"dense"in e[r]){const o=mQ(e[r].dense);let s;if(e[r].dtype==="float16"){const c=new Uint16Array(o);s=gQ(c)}else s=new Float32Array(o);const u=e[r].tilePos.length===2?new $b(s):new qg(s);e[r].dense=s,e[r].denseDataExtrema=u,e[r].minNonZero=u.minNonZeroInTile,e[r].maxNonZero=u.maxNonZeroInTile}}return e}function vQ(e,t,n,i,r,a){const o={"content-type":"application/json"};i&&(o.Authorization=i),fetch(e,{credentials:"same-origin",headers:o,...a&&Object.keys(a).length>0?{method:"POST",body:JSON.stringify(a)}:{}}).then(s=>s.json()).then(s=>{r(Db(s,t,n))}).catch(s=>console.warn("err:",s))}const vR=15,Ug=Pt.nice();let Rf=0,Uu=null;const yQ=(e,t,n)=>{let i,r=[],a={},o=0;const s=d=>{const p=a[d.id];p&&r[p]?r[p].ids=r[p].ids.concat(d.ids):(a[d.id]=r.length,r.push(d))},u=()=>{i=null,r=[],a={}},c=(d,...p)=>{e({sessionId:Ug,requests:r},...p),u()},l=(d,...p)=>{const m=()=>{o>0&&(c(d,...p),o=0)};clearTimeout(i),i=setTimeout(m,n)};l.cancel=()=>{clearTimeout(i),u()},l.immediate=()=>{e({sessionId:Ug,requests:r})};let f=!1;return(d,...p)=>{s(d),f?o++:(c(d,...p),l(d,...p),f=!0,o=0,setTimeout(()=>{f=!1},t))}},Nf=e=>{Uu=e},TQ=()=>Uu;function EQ(e,t){const n=e.requests,i=[],r={},a={};for(const s of n){r[s.server]||(r[s.server]={},a[s.server]=[]);for(const u of s.ids)if(r[s.server][u]=!0,s.options){const c=u.indexOf("."),l=u.substring(0,c),f=u.substring(c+1),h=a[s.server].find(d=>d.tilesetUid===l);h?h.tileIds.push(f):a[s.server].push({tilesetUid:l,tileIds:[f],options:s.options})}}const o=Object.keys(r);for(const s of o){const u=Object.keys(r[s]),c=a[s];for(let l=0;l<u.length;l+=vR){const f=u.slice(l,l+Math.min(u.length-l,vR)),h=f.map(m=>`d=${m}`).join("&"),d=`${s}/tiles/?${h}&s=${Ug}`,p=new Promise((m,g)=>{t.publish("requestSent",d);const v={};v.outUrl=d,v.server=s,v.theseTileIds=f,v.authHeader=Uu,vQ(v.outUrl,v.server,v.theseTileIds,v.authHeader,m,c),t.publish("requestReceived",d)});i.push(p)}}Promise.all(i).then(s=>{const u={};for(const c of s){const l=Object.keys(c);for(const f of l)u[`${c[f].server}/${f}`]=c[f]}for(const c of n){const l={},{server:f}=c;for(const h of c.ids)l[h]=u[`${f}/${h}`];c.done(l)}})}const bQ=yQ(EQ,fb,fb),_Q=(e,t)=>{const n=e.map(s=>+s).sort((s,u)=>u-s),i=t.range()[1]-t.range()[0],a=n.map(s=>(t.domain()[1]-t.domain()[0])/s).map(s=>s/i),o=a.filter(s=>s<1);return o.length===0?0:a.indexOf(o[o.length-1])},SQ=(e,t)=>{if(e.resolutions)return e.resolutions.map(s=>+s).sort((s,u)=>u-s)[t];const n=e.max_width,i=+e.bins_per_dimension;return n/(2**t*i)},AQ=(e,t,n,i)=>{const r=e.range()[1]-e.range()[0],a=Math.max((n-t)/(e.domain()[1]-e.domain()[0]),1),s=Math.max(0,Math.ceil(Math.log(r/384)/Math.LN2));let u=Math.round(Math.log(a)/Math.LN2)+s,c=0;return i&&(c=Math.floor(Math.log(256)/Math.log(2)-Math.log(i)/Math.log(2))),u+=c,u};function CQ(e,t,n,i,r){let a=null;const o=e.bins_per_dimension||256;e.resolutions?a=e.resolutions[i]*o:a=t/2**i;const s=Math.floor((r-n)/a),u=Math.floor(o*(r-s*a)/a);return[s,u]}const DQ=(e,t,n,i,r,a)=>{const o=Math.min(e,r),s=a/2**o,u=1e-7;return Ur(Math.max(0,Math.floor((t.domain()[0]-n)/s)),Math.min(2**o,Math.ceil((t.domain()[1]-n-u)/s)))},wQ=(e,t,n)=>e.resolutions?e.resolutions.map(r=>+r).sort((r,a)=>a-r)[t]*n:e.max_width/2**t,IQ=(e,t,n,i,r)=>{const s=e*(r||256),u=20;i||(i=Number.MAX_VALUE);const c=Math.max(0,Math.floor((t.domain()[0]-n)/s)),l=Math.ceil(Math.min(i,t.domain()[1]-n-1e-7)/s);let f=Ur(c,l);return f.length>u&&(console.warn(`Too many visible tiles: ${f.length} truncating to ${u}`),f=f.slice(0,u)),f},kQ=(e,t,n,i,r,a,o,s,u,c)=>{const{tileData:l}=e;if(!l.dense){a(null);return}if(e.mirrored&&!e.isMirrored&&e.tileData.tilePos.length>0&&e.tileData.tilePos[0]===e.tileData.tilePos[1]){e.tileData.dense=e.tileData.dense.slice();const h=Math.floor(Math.sqrt(e.tileData.dense.length));for(let d=0;d<h;d++)for(let p=d+1;p<h;p++)e.tileData.dense[d*h+p]=e.tileData.dense[p*h+d];if(s)for(let d=0;d<h;d++)for(let p=0;p<d;p++)e.tileData.dense[d*h+p]=NaN;e.isMirrored=!0}const f=dQ(l.dense.length,l.dense,t,n,i,r,o,s,e.tileData.shape,u,c);a({pixData:f})};function yR(e,t,n,i){Rf+=1,i.publish("requestSent",e);let r=null;if(n==="text")r=null;else if(n==="json")r="application/json";else throw new Error(`fetch either "text" or "json", not "${n}"`);const a={};return r&&(a["Content-Type"]=r),Uu&&(a.Authorization=Uu),fetch(e,{credentials:"same-origin",headers:a}).then(o=>{if(!o.ok)throw Error(o.statusText);return o[n]()}).then(o=>(t(void 0,o),o)).catch(o=>(console.error(`Could not fetch ${e}`,o),t(o,void 0),o)).finally(()=>{i.publish("requestReceived",e),Rf-=1})}function OQ(e,t,n){return yR(e,t,"text",n)}async function TR(e,t,n){return e.indexOf("hg19")>=0&&await Lb(1),yR(e,t,"json",n)}const Xe={calculateResolution:SQ,calculateTileAndPosInTile:CQ,calculateTiles:DQ,calculateTilesFromResolution:IQ,calculateTileWidth:wQ,calculateZoomLevel:AQ,calculateZoomLevelFromResolutions:_Q,fetchTilesDebounced:bQ,json:TR,text:OQ,tileDataToPixData:kQ,trackInfo:(e,t,n,i,r)=>{const a=`${Vg(e)}/tileset_info/?d=${t}&s=${Ug}`;r.publish("requestSent",a),TR(a,(o,s)=>{r.publish("requestReceived",a),o?i?i(`Error retrieving tilesetInfo from: ${e}`):console.warn("Error retrieving: ",a):n(s)},r)}},xQ=Object.freeze(Object.defineProperty({__proto__:null,chromInfo:Cb,createDomEvent:pR,ElementResizeListener:gR,tileProxy:Xe,get requestsInFlight(){return Rf},setTileProxyAuthHeader:Nf,getTileProxyAuthHeader:TQ,get authHeader(){return Uu},tileResponseToData:Db},Symbol.toStringTag,{value:"Module"})),ER=e=>(gR.listen(),[e.clientWidth,e.clientHeight]),Ci=(e,t)=>{let n=null;const i=r=>(r.uid===t&&(n=r),r.type.substr(0,8)==="combined"&&r.contents.forEach(i),null);return Object.keys(e).map(r=>e[r]).filter(r=>r.filter).reduce((r,a)=>r.concat(a),[]).forEach(i),n},PQ=(e,t,n)=>{const r=e.state.views[t];if(!r)return null;let a=null;const o=u=>(u.uid===n&&(a=u),u.type.substr(0,8)==="combined"&&u.contents.forEach(o),null),s=r.tracks;return Object.keys(s).map(u=>s[u]).filter(u=>u.filter).reduce((u,c)=>u.concat(c),[]).forEach(o),a},Mf=(e,t,n)=>{const i=t?e[t]:Object.values(e)[0];if(!i){console.warn(t?`Could't find view with id "${t}"`:"No views available.");return}let r=i.trackRenderer.trackDefObjects[n];return r?r=r.trackObject:Object.values(i.trackRenderer.trackDefObjects).map(a=>a.trackObject).filter(a=>a.childTracks).forEach(a=>{a.createdTracks[n]&&(r=a.createdTracks[n])}),r},wb=(e,t,n=!0,i=null)=>e.forEach(r=>{r.type==="combined"?n&&(wb(r.contents,t,n,i),t(r,i)):t(r,i)}),Co=(e,t,n=!0)=>{const i=[];return Object.keys(e).forEach(r=>{wb(e[r],t,n,r)}),i},Lf=(e,t)=>{let n=null;return Co(e,(i,r)=>{i.uid===t&&(n=r)}),n},Ib=e=>t=>Array.prototype.map.call(t,e),bR=()=>[window,Ib(e=>e.charCodeAt(0))("1.12.4").map(e=>e<=999?`00${e}`.slice(-3):e).join("")],_R=(e,t=1,n=100,i=0,r=0,a=0,o=100)=>{const s=document.createElement("canvas");s.width=t,s.height=n;const u=s.getContext("2d"),c=u.createLinearGradient(i,r,a,o);return e.forEach(l=>{c.addColorStop(l.from,l.color)}),u.fillStyle=c,u.fillRect(0,0,t,n),s},SR=(e,t)=>{let n=e;for(;n&&n!==t&&n.tagName!=="HTML";)n=n.parentNode;return n===t},AR=e=>parseInt(e.replace(/^#/,""),16),CR=()=>{};let kb=function(){function e(t){_classCallCheck3(this,e),this.context=t;const{tracks:n,createTrackObject:i}=t;this.childTracks=n.map(i),this.createdTracks={},this.uid=Pt.nice(),this.childTracks.forEach((r,a)=>{this.createdTracks[n[a].uid]=r});for(let r=0;r<this.childTracks.length;r++)this.childTracks[r]||console.error("Empty child track in CombinedTrack:",this)}return _createClass3(e,[{key:"updateContents",value:function(n,i){const r=[],a=new Set;n.forEach(u=>{if(a.add(u.uid),u.uid in this.createdTracks)r.push(this.createdTracks[u.uid]);else{const c=i(u);c.setPosition(this.position),c.setDimensions(this.dimensions),r.push(c),c.zoomed(this._xScale,this._yScale),this.createdTracks[u.uid]=c}}),this.childTracks=r;const o=new Set(Object.keys(this.createdTracks));return[...new Set([...o].filter(u=>!a.has(u)))].forEach(u=>{this.createdTracks[u].remove(),delete this.createdTracks[u]}),this}},{key:"setPosition",value:function(n){this.position=n;for(let i=0;i<this.childTracks.length;i++)this.childTracks[i].setPosition(n)}},{key:"setDimensions",value:function(n){this.dimensions=n;for(let i=0;i<this.childTracks.length;i++)this.childTracks[i].setDimensions(n)}},{key:"zoomed",value:function(n,i,r,a,o,s,u){this._xScale=n,this._yScale=i;for(let c=0;c<this.childTracks.length;c++)this.childTracks[c].zoomed(n,i,r,a,o,s,u)}},{key:"clickOutside",value:function(){for(let n=0;n<this.childTracks.length;n++)this.childTracks[n].clickOutside()}},{key:"click",value:function(...n){for(let i=0;i<this.childTracks.length;i++)this.childTracks[i].click(...n)}},{key:"draw",value:function(){}},{key:"refScalesChanged",value:function(n,i){for(let r=0;r<this.childTracks.length;r++)this.childTracks[r].refScalesChanged(n,i)}},{key:"remove",value:function(){for(let n=0;n<this.childTracks.length;n++)this.childTracks[n].remove()}},{key:"exportSVG",value:function(){const n=document.createElement("g");for(const i of this.childTracks)i.exportSVG&&n.appendChild(i.exportSVG()[0]);return[n,n]}},{key:"rerender",value:function(n){}},{key:"minValue",value:function(n){if(arguments.length===0){const i=this.childTracks.filter(r=>r.minValue).map(r=>r.minValue()).filter(r=>r);return Math.min(...i)}for(const i of this.childTracks)i.minValue&&i.minValue(n)}},{key:"maxValue",value:function(n){if(arguments.length===0){const i=this.childTracks.filter(r=>r.maxValue).map(r=>r.maxValue()).filter(r=>r);return Math.max(...i)}for(const i of this.childTracks)i.maxValue&&i.maxValue(n)}},{key:"respondsToPosition",value:function(n,i){return n>=this.position[0]&&n<=this.dimensions[0]+this.position[0]&&i>=this.position[1]&&i<=this.dimensions[1]+this.position[1]}},{key:"stopHover",value:function(){for(const n of this.childTracks)n.stopHover&&n.stopHover()}},{key:"getMouseOverHtml",value:function(n,i){let r="";for(const a of this.childTracks)if(a.getMouseOverHtml){const o=a.getMouseOverHtml(n,i);o&&o.length&&(r+=o)}return r}}]),e}();const DR=(e,t)=>t===e?!0:t instanceof kb?Object.keys(t.createdTracks).map(n=>t.createdTracks[n]).some(n=>DR(e,n)):!1,Ob=(e,t,n,i,r,a,o=!1)=>o?e>=n&&e<=i||t>=r&&t<=a:e>=n&&e<=i&&t>=r&&t<=a,RQ=e=>Math.log(Math.tan((e+Math.PI/2)/2)),NQ=(e,t)=>{let n=e*Math.PI/180;return n=RQ(n),2**t*(Math.PI-n)/(2*Math.PI)},Gg=e=>Ib(t=>e[t])(Object.keys(e)),MQ=e=>Gg(e).map(t=>t.chromInfoPath).forEach(t=>Cb.get(t)),LQ=(e,t)=>2**t*(e+180)/360,xb=(e,t)=>e>t?e:t,wR=1e-7;function Pb(e){let t=Number.MIN_SAFE_INTEGER;for(let n=0;n<e.length;n++){const i=e[n];i<wR&&i>-wR||i>t&&(t=i)}return t}const IR=(e,t)=>e<t?e:t,kR=1e-7;function Rb(e){let t=Number.MAX_SAFE_INTEGER;for(let n=0;n<e.length;n++){const i=e[n];i<kR&&i>-kR||i<t&&(t=i)}return t}const BQ=(e,t)=>(e%t+t)%t,OR=(e,t)=>{const n=+t;if(!Number.isNaN(n))if(e.dimension===1)for(let r=0;r<e.shape[0];++r)e.set(r,n);else for(let r=0;r<e.shape[0];++r)for(let a=0;a<e.shape[1];++a)e.set(r,a,n);else{const r=e.shape[0],a=e.shape[1],o=t.shape[0],s=t.shape[1];if(r!==o||a!==s){console.warn("Cannot assign source to target ndarray as the dimensions do not match",r,o,a,s);return}if(e.dimension===1)for(let u=0;u<e.shape[0];++u)e.set(u,t.get(u));else for(let u=0;u<e.shape[0];++u)for(let c=0;c<e.shape[1];++c)e.set(u,c,t.get(u,c))}};function FQ(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}var HQ=FQ;/*!
* Determine if an object is a Buffer
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/var $Q=function(e){return e!=null&&(xR(e)||UQ(e)||!!e._isBuffer)};function xR(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function UQ(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&xR(e.slice(0,0))}var GQ=HQ,zQ=$Q,jQ=typeof Float64Array<"u";function VQ(e,t){return e[0]-t[0]}function YQ(){var e=this.stride,t=new Array(e.length),n;for(n=0;n<t.length;++n)t[n]=[Math.abs(e[n]),n];t.sort(VQ);var i=new Array(t.length);for(n=0;n<i.length;++n)i[n]=t[n][1];return i}function WQ(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i=e==="generic";if(t===-1){var r="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",m=new Function(r);return m()}else if(t===0){var r="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",m=new Function("TrivialArray",r);return m(zg[e][0])}var r=["'use strict'"],a=GQ(t),o=a.map(function(g){return"i"+g}),s="this.offset+"+a.map(function(g){return"this.stride["+g+"]*i"+g}).join("+"),u=a.map(function(g){return"b"+g}).join(","),c=a.map(function(g){return"c"+g}).join(",");r.push("function "+n+"(a,"+u+","+c+",d){this.data=a","this.shape=["+u+"]","this.stride=["+c+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),r.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+a.map(function(g){return"this.shape["+g+"]"}).join("*"),"}})"),t===1?r.push("proto.order=[0]"):(r.push("Object.defineProperty(proto,'order',{get:"),t<4?(r.push("function "+n+"_order(){"),t===2?r.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):t===3&&r.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):r.push("ORDER})")),r.push("proto.set=function "+n+"_set("+o.join(",")+",v){"),i?r.push("return this.data.set("+s+",v)}"):r.push("return this.data["+s+"]=v}"),r.push("proto.get=function "+n+"_get("+o.join(",")+"){"),i?r.push("return this.data.get("+s+")}"):r.push("return this.data["+s+"]}"),r.push("proto.index=function "+n+"_index(",o.join(),"){return "+s+"}"),r.push("proto.hi=function "+n+"_hi("+o.join(",")+"){return new "+n+"(this.data,"+a.map(function(g){return["(typeof i",g,"!=='number'||i",g,"<0)?this.shape[",g,"]:i",g,"|0"].join("")}).join(",")+","+a.map(function(g){return"this.stride["+g+"]"}).join(",")+",this.offset)}");var l=a.map(function(g){return"a"+g+"=this.shape["+g+"]"}),f=a.map(function(g){return"c"+g+"=this.stride["+g+"]"});r.push("proto.lo=function "+n+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+l.join(",")+","+f.join(","));for(var h=0;h<t;++h)r.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");r.push("return new "+n+"(this.data,"+a.map(function(g){return"a"+g}).join(",")+","+a.map(function(g){return"c"+g}).join(",")+",b)}"),r.push("proto.step=function "+n+"_step("+o.join(",")+"){var "+a.map(function(g){return"a"+g+"=this.shape["+g+"]"}).join(",")+","+a.map(function(g){return"b"+g+"=this.stride["+g+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var h=0;h<t;++h)r.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");r.push("return new "+n+"(this.data,"+a.map(function(g){return"a"+g}).join(",")+","+a.map(function(g){return"b"+g}).join(",")+",c)}");for(var d=new Array(t),p=new Array(t),h=0;h<t;++h)d[h]="a[i"+h+"]",p[h]="b[i"+h+"]";r.push("proto.transpose=function "+n+"_transpose("+o+"){"+o.map(function(g,v){return g+"=("+g+"===undefined?"+v+":"+g+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+d.join(",")+","+p.join(",")+",this.offset)}"),r.push("proto.pick=function "+n+"_pick("+o+"){var a=[],b=[],c=this.offset");for(var h=0;h<t;++h)r.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");r.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),r.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+a.map(function(g){return"shape["+g+"]"}).join(",")+","+a.map(function(g){return"stride["+g+"]"}).join(",")+",offset)}");var m=new Function("CTOR_LIST","ORDER",r.join(`
`));return m(zg[e],YQ)}function qQ(e){if(zQ(e))return"buffer";if(jQ)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}var zg={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function XQ(e,t,n,i){if(e===void 0){var c=zg.array[0];return c([])}else typeof e=="number"&&(e=[e]);t===void 0&&(t=[e.length]);var r=t.length;if(n===void 0){n=new Array(r);for(var a=r-1,o=1;a>=0;--a)n[a]=o,o*=t[a]}if(i===void 0){i=0;for(var a=0;a<r;++a)n[a]<0&&(i-=(t[a]-1)*n[a])}for(var s=qQ(e),u=zg[s];u.length<=r+1;)u.push(WQ(s,u.length-1));var c=u[r+1];return c(e,t,n,i)}var Gu=XQ;const PR=e=>{const t=e.shape.reduce((i,r)=>i*r,1),n=new Array(t);if(e.dimension===1){let i=0;for(let r=0;r<e.shape[0];++r)n[i]=e.get(r),i++}else{let i=0;for(let r=0;r<e.shape[0];++r)for(let a=0;a<e.shape[1];++a)n[i]=e.get(r,a),i++}return n},RR=e=>e.shape.length===1?e:Gu(PR(e)),NR=e=>{const t=e.split("."),n=t.slice(1).join("").length;return+t.join("")/10**n},Bf=(e,t)=>e||t;function jg(e){const t=[],n={},i={};let r=0;for(let a=0;a<e.length;a++){const o=Number(e[a][1]);r+=o;const s={id:a,chr:e[a][0],pos:r-o};t.push(s),i[s.chr]=s,n[e[a][0]]=o}return{cumPositions:t,chrPositions:i,totalLength:r,chromLengths:n}}const Nb=e=>{const t=document.createElement("g"),n=document.createElement("text");return e.anchor.x===0?n.setAttribute("text-anchor","start"):e.anchor.x===1?n.setAttribute("text-anchor","end"):n.setAttribute("text-anchor","middle"),n.setAttribute("font-family",e.style.fontFamily),n.setAttribute("font-size",e.style.fontSize),t.setAttribute("transform",`scale(${e.scale.x},1)`),n.setAttribute("fill",e.style.fill),n.innerHTML=e.text,t.appendChild(n),t.setAttribute("transform",`translate(${e.x},${e.y})scale(${e.scale.x},1)`),t},KQ=e=>{try{const t=e.split(".");return n=>{let i=n;return t.forEach(r=>{i=i[r]}),i}}catch{return}},ZQ=(e,t,n,i,r,a,o=0,s=0,u)=>{const c=a?r:i,l=a?i:r,f=a?s:o,h=a?o:s,d=Math.max(0,+c[0]||0),p=Math.max(0,+c[1]||0),m=Math.max(0,+l[0]||0),g=Math.max(0,+l[1]||0);let v=[];ArrayBuffer.isView(u)||console.warn("Not supported yet");try{const E=new u.constructor(u.length);let y=0+h;for(let b=m;b<g;b++)E.set(e.slice(b*t+d,b*t+p),f+y*n),y+=1;const T=a?GP(n,n):void 0;v=zP(u,E,T)}catch{}return v},QQ=(e,t,n,i)=>[i.chrPositions[e].pos+ +t,i.chrPositions[e].pos+ +n],JQ="http://www.w3.org/2000/svg",eJ=(e,t)=>{const n=new RegExp(`(\\s|^)${t}(\\s|$)`);if(e.namespaceURI===JQ){const i=e.getAttribute("class")||"";e.setAttribute("class",i.replace(n," "))}else e.classList?e.classList.remove(t):xg(e,t)&&(e.className=e.className.replace(n," "))},zu=(e,t)=>{e.select(".selection").attr("fill",null).attr("fill-opacity",null).attr("stroke",null).classed(t,!0)},Mb=e=>{const t=e.toString(16);return t.length===1?`0${t}`:t},tJ=(e,t,n)=>`#${Mb(e)}${Mb(t)}${Mb(n)}`,Qn=(e,t)=>{const n=e.invert((e.range()[0]+e.range()[1])/2),i=t.invert((t.range()[0]+t.range()[1])/2),r=e.invert(1)-e.invert(0);return[n,i,r]},MR=(e,t,n)=>{if(n===null||!e||!t)return;const i=e.domain()[0],r=e.domain()[1],a=t.domain()[0],o=t.domain()[1];return[...Bg(i,r,n),...Bg(a,o,n)]},nJ=11184810,rJ=1,iJ=(e,t,n,i,r,a,o,s,u)=>{e.publish("app.animateOnMouseMove",!0);const c=n.mousePositionColor?AR(n.mousePositionColor):nJ,l=n.mousePositionAlpha||rJ,f=new Be.PIXI.Graphics,h=()=>{f.clear()},d=(m,g,v)=>{if(v||h(),f.lineStyle(1,c,l),g){const E=s?r()[0]:0;f.moveTo(0,m),f.lineTo(a()[0]+E,m)}else{const E=s?r()[1]:0;f.moveTo(m,0),f.lineTo(m,a()[1]+E)}},p=m=>{if(m.noHoveredTracks)return h(),f;let g,v;m.isFromVerticalTrack?(g=m.dataY,v=m.dataY):(g=m.dataX,v=m.isFrom2dTrack?m.dataY:m.dataX);const E=s?r():[0,0],y=o()?i()[0](v)+E[1]:i()[0](g)+E[0];return d(y),s&&d(i()[1](v)+E[1],!0,!0),f};return t.push(e.subscribe("app.mouseMove",p)),t.push(e.subscribe("app.mouseLeave",h)),t.push(e.subscribe("blur",h)),u&&t.push(ff.subscribe("higlass.mouseMove",p)),f},pl=(e,t=!1,n=!1)=>{const i=t?e.pMasked:e.pForeground||e.pMain,r=()=>[e.xScale(),e.yScale()],a=iJ(e.pubSub,e.pubSubs,e.options,r,e.getPosition.bind(e),e.getDimensions.bind(e),e.getProp("flipText"),t,n);return i.addChild(a),()=>{i.removeChild(a)}},aJ=e=>t=>Array.prototype.some.call(t,e),es=(e,t)=>e+t,LR=(e,t,n,i,r,a)=>{const o=document.createElement("line");return o.setAttribute("x1",e),o.setAttribute("x2",n),o.setAttribute("y1",t),o.setAttribute("y2",i),r&&o.setAttribute("stroke-width",r),a&&o.setAttribute("stroke",a),o},BR=(e,t,n)=>{let i,r=0;const a=()=>{i=null},o=(...c)=>{const l=()=>{r>0&&(e(...c),r=0)};clearTimeout(i),i=setTimeout(l,n)};o.cancel=()=>{clearTimeout(i),a()},o.immediate=(...c)=>{e(...c)};let s=!1;return(c,...l)=>{s?r++:(e(...l),o(...l),s=!0,r=0,setTimeout(()=>{s=!1},t))}},oJ=(e,t=256,n=256)=>{const i=document.createElement("canvas");i.width=t,i.height=n;const r=i.getContext("2d");r.fillStyle="transparent",r.fillRect(0,0,i.width,i.height);const a=new ImageData(e,i.width,i.height);return r.putImageData(a,0,0),i},Lb=e=>new Promise(t=>{setTimeout(t,e)}),sJ=e=>{if(!e.tracks)return 0;let t=0;return e.tracks.top&&(t+=e.tracks.top.map(n=>n.height).reduce((n,i)=>n+i,0)),e.tracks.center&&(t+=e.tracks.center.map(n=>n.height).reduce((n,i)=>n+i,0)),e.tracks.bottom&&(t+=e.tracks.bottom.map(n=>n.height).reduce((n,i)=>n+i,0)),t},La=()=>{},Vg=e=>(e||"").replace(/\/$/,""),Bb=(e,t,n=0,i=1e-6)=>r=>{let a=255;return r>i&&(a=Math.max(0,Math.min(255,Math.floor(e(r+n))))),t[a]},Yg=e=>{let t=[];for(let n=0;n<e.length;n++)e[n].contents?t=t.concat(e[n].contents):t.push(e[n]);return t};function FR(e,t,n,i){this.interval=[e,t],this.max=-1/0,this.parentNode=null,this.left=n,this.right=i}function Do(){this.root=null}function HR(e,t,n){let i=new FR(n[0],n[1]);if(i.max=n[1],i.parentNode=e,e[t]=i,e.max<n[1])for(;i;)i.max<n[1]&&(i.max=n[1]),i=i.parentNode}function Fb(e,t){e.interval[0]>t[0]?e.left?Fb(e.left,t):HR(e,"left",t):e.right?Fb(e.right,t):HR(e,"right",t)}Do.prototype.add=function(t){if(!this.root){this.root=new FR(t[0],t[1]),this.root.max=t[1];return}Fb(this.root,t)};function $R(e,t){if(!t)return!1;if(t.interval[0]<=e&&t.interval[1]>=e)return!0;let n=!1,i;return["left","right"].forEach(r=>{i=t[r],i&&i.max>e&&(n=n||$R(e,i))}),n}Do.prototype.contains=function(t){return $R(t,this.root)};function lJ(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]<t[0]&&e[1]>t[0]||e[0]<t[1]&&e[1]>t[1]||t[0]<e[0]&&t[1]>e[0]||t[0]<e[1]&&t[1]>e[1]}function UR(e,t){if(!t)return!1;if(lJ(t.interval,e))return!0;let n=!1,i;return["left","right"].forEach(r=>{i=t[r],i&&i.max>=e[0]&&(n=n||UR(e,i))}),n}Do.prototype.intersects=function(t){return UR(t,this.root)};function Hb(e){return e?1+Math.max(Hb(e.left),Hb(e.right)):0}Do.prototype.height=function(){return Hb(this.root)},Do.prototype.findMax=function(t){const n=[t];let i,r=-1/0,a;for(;n.length;)i=n.pop(),i.left&&n.push(i.left),i.right&&n.push(i.right),i.interval[1]>r&&(r=i.interval[1],a=i);return a},Do.prototype._removeHelper=function(t,n){if(!!n)if(n.interval[0]===t[0]&&n.interval[1]===t[1]){if(n.left&&n.right){let r=n.left;for(;r.left;)r=r.left;const a=r.interval;r.interval=n.interval,n.interval=a,this._removeHelper(r.interval,n)}else{let r="left";n.right&&(r="right");const a=n.parentNode;a?(a.left===n?a.left=n[r]:a.right=n[r],n[r]&&(n[r].parentNode=a)):(this.root=n[r],this.root&&(this.root.parentNode=null))}const i=n.parentNode;if(i){let r=this.findMax(i);const a=r.interval[1];for(;r;)r.max===n.interval[1]?(r.max=a,r=r.parentNode):r=!1}}else this._removeHelper(t,n.left),this._removeHelper(t,n.right)},Do.prototype.remove=function(t){return this._removeHelper(t,this.root)};function Wg(e){e.sort((i,r)=>r.to-r.from-(i.to-i.from));const t=[[]],n=[new Do];for(let i=0;i<e.length;i++){let r=!1;for(let a=0;a<t.length;a++){const o=n[a],s=[+e[i].from,+e[i].to];if(!o.intersects(s)){o.add(s),t[a].push(e[i]),r=!0;break}}if(!r){const a=new Do;a.add([e[i].from,e[i].to]),t.push([e[i]]),n.push(a)}}return t}let qg=function(){function e(t){_classCallCheck3(this,e),this.epsilon=1e-6,this.data=t,this.tileSize=this.data.length,this.paddedTileSize=2**Math.ceil(Math.log2(this.tileSize)),this.numSubsets=Math.min(oR,this.paddedTileSize),this.subsetSize=this.paddedTileSize/this.numSubsets,this.subsetMinimums=this.computeSubsetNonZeroMinimums(),this.subsetMaximums=this.computeSubsetNonZeroMaximums(),this.minNonZeroInTile=this.getMinNonZeroInTile(),this.maxNonZeroInTile=this.getMaxNonZeroInTile()}return _createClass3(e,[{key:"getMinNonZeroInSubset",value:function(n){const i=n[0],r=n[1];let a=Number.MAX_SAFE_INTEGER;if(i===0&&r===this.tileSize)return this.minNonZeroInTile;const o=Math.ceil(i/this.subsetSize),s=Math.floor((r-1)/this.subsetSize);return o>=s?this.minNonZero(this.data,i,r):(i<o*this.subsetSize&&(a=Math.min(a,this.minNonZero(this.data,i,o*this.subsetSize))),a=Math.min(a,this.minNonZero(this.subsetMinimums,o,s)),r>s*this.subsetSize&&(a=Math.min(a,this.minNonZero(this.data,s*this.subsetSize,r))),a)}},{key:"getMaxNonZeroInSubset",value:function(n){const i=n[0],r=n[1];let a=Number.MIN_SAFE_INTEGER;if(i===0&&r===this.tileSize)return this.maxNonZeroInTile;const o=Math.ceil(i/this.subsetSize),s=Math.floor((r-1)/this.subsetSize);return o>=s?this.maxNonZero(this.data,i,r):(i<o*this.subsetSize&&(a=Math.max(a,this.maxNonZero(this.data,i,o*this.subsetSize))),a=Math.max(a,this.maxNonZero(this.subsetMaximums,o,s)),r>s*this.subsetSize&&(a=Math.max(a,this.maxNonZero(this.data,s*this.subsetSize,r))),a)}},{key:"computeSubsetNonZeroMinimums",value:function(){const n=[];for(let i=0;i<this.numSubsets;i++){let r=Number.MAX_SAFE_INTEGER;for(let a=0;a<this.subsetSize;a++){const o=this.data[i*this.subsetSize+a];o!==void 0&&(o<this.epsilon&&o>-this.epsilon||o<r&&(r=o))}n.push(r)}return n}},{key:"computeSubsetNonZeroMaximums",value:function(){const n=[];for(let i=0;i<this.numSubsets;i++){let r=Number.MIN_SAFE_INTEGER;for(let a=0;a<this.subsetSize;a++){const o=this.data[i*this.subsetSize+a];o!==void 0&&(o<this.epsilon&&o>-this.epsilon||o>r&&(r=o))}n.push(r)}return n}},{key:"getMinNonZeroInTile",value:function(){return Math.min(...this.subsetMinimums)}},{key:"getMaxNonZeroInTile",value:function(){return Math.max(...this.subsetMaximums)}},{key:"minNonZero",value:function(n,i,r){let a=Number.MAX_SAFE_INTEGER;for(let o=i;o<r;o++){const s=n[o];s<this.epsilon&&s>-this.epsilon||s<a&&(a=s)}return a}},{key:"maxNonZero",value:function(n,i,r){let a=Number.MIN_SAFE_INTEGER;for(let o=i;o<r;o++){const s=n[o];s<this.epsilon&&s>-this.epsilon||s>a&&(a=s)}return a}}]),e}(),$b=function(){function e(t){_classCallCheck3(this,e),this.epsilon=1e-6,this.tileSize=Math.sqrt(t.length),Number.isSafeInteger(this.tileSize)||console.error("The DenseDataExtrema2D module only works for data of quadratic length."),this.numSubsets=Math.min(vb,this.tileSize),this.subsetSize=this.tileSize/this.numSubsets;const n=Gu(Array.from(t),[this.tileSize,this.tileSize]);this.subsetMinimums=this.computeSubsetNonZeroMinimums(n),this.subsetMaximums=this.computeSubsetNonZeroMaximums(n),this.minNonZeroInTile=this.getMinNonZeroInTile(),this.maxNonZeroInTile=this.getMaxNonZeroInTile()}return _createClass3(e,[{key:"getMinNonZeroInSubset",value:function(n){const i=n[0],r=n[1],a=n[2],o=n[3],s=Math.floor(r/this.subsetSize),u=Math.floor(i/this.subsetSize),c=Math.ceil((o+1)/this.subsetSize)-s,l=Math.ceil((a+1)/this.subsetSize)-u;return this.getMinNonZeroInNdarraySubset(this.subsetMinimums,s,u,l,c)}},{key:"getMaxNonZeroInSubset",value:function(n){const i=n[0],r=n[1],a=n[2],o=n[3],s=Math.floor(r/this.subsetSize),u=Math.floor(i/this.subsetSize),c=Math.ceil((o+1)/this.subsetSize)-s,l=Math.ceil((a+1)/this.subsetSize)-u;return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums,s,u,l,c)}},{key:"computeSubsetNonZeroMinimums",value:function(n){let i=new Array(this.numSubsets**2);i=Gu(i,[this.numSubsets,this.numSubsets]);for(let r=0;r<this.numSubsets;r++)for(let a=0;a<this.numSubsets;a++){const o=this.getMinNonZeroInNdarraySubset(n,r*this.subsetSize,a*this.subsetSize,this.subsetSize,this.subsetSize);i.set(r,a,o)}return i}},{key:"computeSubsetNonZeroMaximums",value:function(n){let i=new Array(this.numSubsets**2);i=Gu(i,[this.numSubsets,this.numSubsets]);for(let r=0;r<this.numSubsets;r++)for(let a=0;a<this.numSubsets;a++){const o=this.getMaxNonZeroInNdarraySubset(n,r*this.subsetSize,a*this.subsetSize,this.subsetSize,this.subsetSize);i.set(r,a,o)}return i}},{key:"getMinNonZeroInNdarraySubset",value:function(n,i,r,a,o){let s=Number.MAX_SAFE_INTEGER;for(let u=0;u<a;u++)for(let c=0;c<o;c++){const l=n.get(i+c,r+u);l<this.epsilon&&l>-this.epsilon||l<s&&(s=l)}return s}},{key:"getMaxNonZeroInNdarraySubset",value:function(n,i,r,a,o){let s=Number.MIN_SAFE_INTEGER;for(let u=0;u<a;u++)for(let c=0;c<o;c++){const l=n.get(i+c,r+u);l<this.epsilon&&l>-this.epsilon||l>s&&(s=l)}return s}},{key:"mirrorPrecomputedExtrema",value:function(){for(let n=1;n<this.numSubsets;n++)for(let i=0;i<n;i++)this.subsetMinimums.set(i,n,this.subsetMinimums.get(n,i)),this.subsetMaximums.set(i,n,this.subsetMaximums.get(n,i))}},{key:"getMinNonZeroInTile",value:function(){return this.getMinNonZeroInNdarraySubset(this.subsetMinimums,0,0,this.numSubsets,this.numSubsets)}},{key:"getMaxNonZeroInTile",value:function(){return this.getMaxNonZeroInNdarraySubset(this.subsetMaximums,0,0,this.numSubsets,this.numSubsets)}}]),e}();const Ub=e=>{let t;switch(e&&e.toLowerCase()){case"mean":t=cE;break;case"sum":t=gk;break;case"variance":t=tE;break;case"deviation":t=nE;break;default:t=cE,console.warn("Encountered an unsupported selectedRowsAggregationMode option.")}return t},Ff=(e,t)=>e.reduce((n,i)=>n+(Array.isArray(i)&&t?i.length:1),0),ju=e=>{switch(e.type){case"heatmap":case"horizontal-1d-heatmap":case"horizontal-bar":case"horizontal-line":case"horizontal-point":case"vertical-1d-heatmap":case"vertical-bar":case"vertical-line":case"vertical-point":case"horizontal-1d-tiles":case"vertical-1d-tiles":case"2d-tiles":case"horizontal-gene-annotations":case"vertical-gene-annotations":case"horizontal-heatmap":case"vertical-heatmap":case"osm-tiles":case"mapbox-tiles":case"horizontal-multivec":return!0;case"combined":return e.contents.map(t=>ju(t)).reduce(Bf,!1);default:return!1}},Xg=(e,t,n)=>{let i=t,r=n;return n||(r=t,i=Object.values(e.state.views)[0].uid),e.tiledPlots[i].trackRenderer.getTrackObject(r)},GR=(e,t)=>e.tiledPlots[t].trackRenderer,uJ=(e,t)=>e.tiledPlots[t];var Gb={},zR=Object.prototype.toString,jR=function(t){var n=zR.call(t),i=n==="[object Arguments]";return i||(i=n!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&zR.call(t.callee)==="[object Function]"),i},zb,VR;function cJ(){if(VR)return zb;VR=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=jR,r=Object.prototype.propertyIsEnumerable,a=!r.call({toString:null},"toString"),o=r.call(function(){},"prototype"),s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],u=function(h){var d=h.constructor;return d&&d.prototype===h},c={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},l=function(){if(typeof window>"u")return!1;for(var h in window)try{if(!c["$"+h]&&t.call(window,h)&&window[h]!==null&&typeof window[h]=="object")try{u(window[h])}catch{return!0}}catch{return!0}return!1}(),f=function(h){if(typeof window>"u"||!l)return u(h);try{return u(h)}catch{return!1}};e=function(d){var p=d!==null&&typeof d=="object",m=n.call(d)==="[object Function]",g=i(d),v=p&&n.call(d)==="[object String]",E=[];if(!p&&!m&&!g)throw new TypeError("Object.keys called on a non-object");var y=o&&m;if(v&&d.length>0&&!t.call(d,0))for(var T=0;T<d.length;++T)E.push(String(T));if(g&&d.length>0)for(var b=0;b<d.length;++b)E.push(String(b));else for(var S in d)!(y&&S==="prototype")&&t.call(d,S)&&E.push(String(S));if(a)for(var w=f(d),D=0;D<s.length;++D)!(w&&s[D]==="constructor")&&t.call(d,s[D])&&E.push(s[D]);return E}}return zb=e,zb}var hJ=Array.prototype.slice,fJ=jR,YR=Object.keys,Kg=YR?function(t){return YR(t)}:cJ(),WR=Object.keys;Kg.shim=function(){if(Object.keys){var t=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);t||(Object.keys=function(i){return fJ(i)?WR(hJ.call(i)):WR(i)})}else Object.keys=Kg;return Object.keys||Kg};var qR=Kg,jb=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var r=42;t[n]=r;for(n in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var a=Object.getOwnPropertySymbols(t);if(a.length!==1||a[0]!==n||!Object.prototype.propertyIsEnumerable.call(t,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(t,n);if(o.value!==r||o.enumerable!==!0)return!1}return!0},XR=typeof Symbol<"u"&&Symbol,dJ=jb,KR=function(){return typeof XR!="function"||typeof Symbol!="function"||typeof XR("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:dJ()},pJ="Function.prototype.bind called on incompatible ",Vb=Array.prototype.slice,mJ=Object.prototype.toString,gJ="[object Function]",vJ=function(t){var n=this;if(typeof n!="function"||mJ.call(n)!==gJ)throw new TypeError(pJ+n);for(var i=Vb.call(arguments,1),r,a=function(){if(this instanceof r){var l=n.apply(this,i.concat(Vb.call(arguments)));return Object(l)===l?l:this}else return n.apply(t,i.concat(Vb.call(arguments)))},o=Math.max(0,n.length-i.length),s=[],u=0;u<o;u++)s.push("$"+u);if(r=Function("binder","return function ("+s.join(",")+"){ return binder.apply(this,arguments); }")(a),n.prototype){var c=function(){};c.prototype=n.prototype,r.prototype=new c,c.prototype=null}return r},yJ=vJ,Yb=Function.prototype.bind||yJ,TJ=Yb,zr=TJ.call(Function.call,Object.prototype.hasOwnProperty),Gt,Vu=SyntaxError,ZR=Function,Yu=TypeError,Wb=function(e){try{return ZR('"use strict"; return ('+e+").constructor;")()}catch{}},ml=Object.getOwnPropertyDescriptor;if(ml)try{ml({},"")}catch{ml=null}var qb=function(){throw new Yu},EJ=ml?function(){try{return arguments.callee,qb}catch{try{return ml(arguments,"callee").get}catch{return qb}}}():qb,Wu=KR(),Ba=Object.getPrototypeOf||function(e){return e.__proto__},qu={},bJ=typeof Uint8Array>"u"?Gt:Ba(Uint8Array),gl={"%AggregateError%":typeof AggregateError>"u"?Gt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Gt:ArrayBuffer,"%ArrayIteratorPrototype%":Wu?Ba([][Symbol.iterator]()):Gt,"%AsyncFromSyncIteratorPrototype%":Gt,"%AsyncFunction%":qu,"%AsyncGenerator%":qu,"%AsyncGeneratorFunction%":qu,"%AsyncIteratorPrototype%":qu,"%Atomics%":typeof Atomics>"u"?Gt:Atomics,"%BigInt%":typeof BigInt>"u"?Gt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Gt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Gt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Gt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Gt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Gt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Gt:FinalizationRegistry,"%Function%":ZR,"%GeneratorFunction%":qu,"%Int8Array%":typeof Int8Array>"u"?Gt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Gt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Gt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Wu?Ba(Ba([][Symbol.iterator]())):Gt,"%JSON%":typeof JSON=="object"?JSON:Gt,"%Map%":typeof Map>"u"?Gt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Wu?Gt:Ba(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Gt:Promise,"%Proxy%":typeof Proxy>"u"?Gt:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Gt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Gt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Wu?Gt:Ba(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Gt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Wu?Ba(""[Symbol.iterator]()):Gt,"%Symbol%":Wu?Symbol:Gt,"%SyntaxError%":Vu,"%ThrowTypeError%":EJ,"%TypedArray%":bJ,"%TypeError%":Yu,"%Uint8Array%":typeof Uint8Array>"u"?Gt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Gt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Gt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Gt:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Gt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Gt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Gt:WeakSet};try{null.error}catch(e){var _J=Ba(Ba(e));gl["%Error.prototype%"]=_J}var SJ=function e(t){var n;if(t==="%AsyncFunction%")n=Wb("async function () {}");else if(t==="%GeneratorFunction%")n=Wb("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=Wb("async function* () {}");else if(t==="%AsyncGenerator%"){var i=e("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(t==="%AsyncIteratorPrototype%"){var r=e("%AsyncGenerator%");r&&(n=Ba(r.prototype))}return gl[t]=n,n},QR={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Hf=Yb,Zg=zr,AJ=Hf.call(Function.call,Array.prototype.concat),CJ=Hf.call(Function.apply,Array.prototype.splice),JR=Hf.call(Function.call,String.prototype.replace),Qg=Hf.call(Function.call,String.prototype.slice),DJ=Hf.call(Function.call,RegExp.prototype.exec),wJ=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,IJ=/\\(\\)?/g,kJ=function(t){var n=Qg(t,0,1),i=Qg(t,-1);if(n==="%"&&i!=="%")throw new Vu("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new Vu("invalid intrinsic syntax, expected opening `%`");var r=[];return JR(t,wJ,function(a,o,s,u){r[r.length]=s?JR(u,IJ,"$1"):o||a}),r},OJ=function(t,n){var i=t,r;if(Zg(QR,i)&&(r=QR[i],i="%"+r[0]+"%"),Zg(gl,i)){var a=gl[i];if(a===qu&&(a=SJ(i)),typeof a>"u"&&!n)throw new Yu("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:a}}throw new Vu("intrinsic "+t+" does not exist!")},tn=function(t,n){if(typeof t!="string"||t.length===0)throw new Yu("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new Yu('"allowMissing" argument must be a boolean');if(DJ(/^%?[^%]*%?$/,t)===null)throw new Vu("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=kJ(t),r=i.length>0?i[0]:"",a=OJ("%"+r+"%",n),o=a.name,s=a.value,u=!1,c=a.alias;c&&(r=c[0],CJ(i,AJ([0,1],c)));for(var l=1,f=!0;l<i.length;l+=1){var h=i[l],d=Qg(h,0,1),p=Qg(h,-1);if((d==='"'||d==="'"||d==="`"||p==='"'||p==="'"||p==="`")&&d!==p)throw new Vu("property names with quotes must have matching quotes");if((h==="constructor"||!f)&&(u=!0),r+="."+h,o="%"+r+"%",Zg(gl,o))s=gl[o];else if(s!=null){if(!(h in s)){if(!n)throw new Yu("base intrinsic for "+t+" exists, but the property is not available.");return}if(ml&&l+1>=i.length){var m=ml(s,h);f=!!m,f&&"get"in m&&!("originalValue"in m.get)?s=m.get:s=s[h]}else f=Zg(s,h),s=s[h];f&&!u&&(gl[o]=s)}}return s},xJ=tn,Xb=xJ("%Object.defineProperty%",!0),Kb=function(){if(Xb)try{return Xb({},"a",{value:1}),!0}catch{return!1}return!1};Kb.hasArrayLengthDefineBug=function(){if(!Kb())return null;try{return Xb([],"length",{value:1}).length!==1}catch{return!0}};var eN=Kb,PJ=qR,RJ=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",NJ=Object.prototype.toString,MJ=Array.prototype.concat,tN=Object.defineProperty,LJ=function(e){return typeof e=="function"&&NJ.call(e)==="[object Function]"},BJ=eN(),nN=tN&&BJ,FJ=function(e,t,n,i){t in e&&(!LJ(i)||!i())||(nN?tN(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},rN=function(e,t){var n=arguments.length>2?arguments[2]:{},i=PJ(t);RJ&&(i=MJ.call(i,Object.getOwnPropertySymbols(t)));for(var r=0;r<i.length;r+=1)FJ(e,i[r],t[i[r]],n[i[r]])};rN.supportsDescriptors=!!nN;var xr=rN,Fa={exports:{}};(function(e){var t=Yb,n=tn,i=n("%Function.prototype.apply%"),r=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||t.call(r,i),o=n("%Object.getOwnPropertyDescriptor%",!0),s=n("%Object.defineProperty%",!0),u=n("%Math.max%");if(s)try{s({},"a",{value:1})}catch{s=null}e.exports=function(f){var h=a(t,r,arguments);if(o&&s){var d=o(h,"length");d.configurable&&s(h,"length",{value:1+u(0,f.length-(arguments.length-1))})}return h};var c=function(){return a(t,i,arguments)};s?s(e.exports,"apply",{value:c}):e.exports.apply=c})(Fa);var iN=tn,aN=Fa.exports,HJ=aN(iN("String.prototype.indexOf")),Pr=function(t,n){var i=iN(t,!!n);return typeof i=="function"&&HJ(t,".prototype.")>-1?aN(i):i},$J=qR,oN=jb(),sN=Pr,lN=Object,UJ=sN("Array.prototype.push"),uN=sN("Object.prototype.propertyIsEnumerable"),GJ=oN?Object.getOwnPropertySymbols:null,cN=function(t,n){if(t==null)throw new TypeError("target must be an object");var i=lN(t);if(arguments.length===1)return i;for(var r=1;r<arguments.length;++r){var a=lN(arguments[r]),o=$J(a),s=oN&&(Object.getOwnPropertySymbols||GJ);if(s)for(var u=s(a),c=0;c<u.length;++c){var l=u[c];uN(a,l)&&UJ(o,l)}for(var f=0;f<o.length;++f){var h=o[f];if(uN(a,h)){var d=a[h];i[h]=d}}}return i},Zb=cN,zJ=function(){if(!Object.assign)return!1;for(var e="abcdefghijklmnopqrst",t=e.split(""),n={},i=0;i<t.length;++i)n[t[i]]=t[i];var r=Object.assign({},n),a="";for(var o in r)a+=o;return e!==a},jJ=function(){if(!Object.assign||!Object.preventExtensions)return!1;var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch{return e[1]==="y"}return!1},hN=function(){return!Object.assign||zJ()||jJ()?Zb:Object.assign},VJ=xr,YJ=hN,WJ=function(){var t=YJ();return VJ(Object,{assign:t},{assign:function(){return Object.assign!==t}}),t},qJ=xr,XJ=Fa.exports,KJ=cN,fN=hN,ZJ=WJ,QJ=XJ.apply(fN()),dN=function(t,n){return QJ(Object,arguments)};qJ(dN,{getPolyfill:fN,implementation:KJ,shim:ZJ});var Xu=dN,JJ=tn,eee=JJ("%Math.abs%"),pN=function(t){return eee(t)},Qb,mN;function tee(){return mN||(mN=1,Qb=function(t){if(t===null)return"Null";if(typeof t>"u")return"Undefined";if(typeof t=="function"||typeof t=="object")return"Object";if(typeof t=="number")return"Number";if(typeof t=="boolean")return"Boolean";if(typeof t=="string")return"String"}),Qb}var Jb,gN;function jr(){if(gN)return Jb;gN=1;var e=tee();return Jb=function(n){return typeof n=="symbol"?"Symbol":typeof n=="bigint"?"BigInt":e(n)},Jb}var nee=jr(),ree=Math.floor,vN=function(t){return nee(t)==="BigInt"?t:ree(t)},Jg=Number.isNaN||function(t){return t!==t},iee=Jg,yN=function(e){return(typeof e=="number"||typeof e=="bigint")&&!iee(e)&&e!==1/0&&e!==-1/0},e_,TN;function EN(){if(TN)return e_;TN=1;var e=pN,t=vN,n=jr(),i=Jg,r=yN;return e_=function(o){if(n(o)!=="Number"||i(o)||!r(o))return!1;var s=e(o);return t(s)===s},e_}var t_,bN;function aee(){if(bN)return t_;bN=1;var e={foo:{}},t=Object;return t_=function(){return{__proto__:e}.foo===e.foo&&!({__proto__:null}instanceof t)},t_}var n_,_N;function oee(){if(_N)return n_;_N=1;var e=tn,t=e("%Array.prototype%"),n=e("%RangeError%"),i=e("%SyntaxError%"),r=e("%TypeError%"),a=EN(),o=Math.pow(2,32)-1,s=aee()(),u=e("%Object.setPrototypeOf%",!0)||(s?function(c,l){return c.__proto__=l,c}:null);return n_=function(l){if(!a(l)||l<0)throw new r("Assertion failed: `length` must be an integer Number >= 0");if(l>o)throw new n("length is greater than (2**32 - 1)");var f=arguments.length>1?arguments[1]:t,h=[];if(f!==t){if(!u)throw new i("ArrayCreate: a `proto` argument that is not `Array.prototype` is not supported in an environment that does not support setting the [[Prototype]]");u(h,f)}return l!==0&&(h.length=l),h},n_}const see=fo(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var r_=typeof Map=="function"&&Map.prototype,i_=Object.getOwnPropertyDescriptor&&r_?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,e0=r_&&i_&&typeof i_.get=="function"?i_.get:null,SN=r_&&Map.prototype.forEach,a_=typeof Set=="function"&&Set.prototype,o_=Object.getOwnPropertyDescriptor&&a_?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,t0=a_&&o_&&typeof o_.get=="function"?o_.get:null,AN=a_&&Set.prototype.forEach,lee=typeof WeakMap=="function"&&WeakMap.prototype,$f=lee?WeakMap.prototype.has:null,uee=typeof WeakSet=="function"&&WeakSet.prototype,Uf=uee?WeakSet.prototype.has:null,cee=typeof WeakRef=="function"&&WeakRef.prototype,CN=cee?WeakRef.prototype.deref:null,hee=Boolean.prototype.valueOf,fee=Object.prototype.toString,dee=Function.prototype.toString,pee=String.prototype.match,s_=String.prototype.slice,ts=String.prototype.replace,mee=String.prototype.toUpperCase,DN=String.prototype.toLowerCase,wN=RegExp.prototype.test,IN=Array.prototype.concat,Ha=Array.prototype.join,gee=Array.prototype.slice,kN=Math.floor,l_=typeof BigInt=="function"?BigInt.prototype.valueOf:null,u_=Object.getOwnPropertySymbols,c_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ku=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Rr=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ku?"object":"symbol")?Symbol.toStringTag:null,ON=Object.prototype.propertyIsEnumerable,xN=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function PN(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||wN.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var i=e<0?-kN(-e):kN(e);if(i!==e){var r=String(i),a=s_.call(t,r.length+1);return ts.call(r,n,"$&_")+"."+ts.call(ts.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return ts.call(t,n,"$&_")}var h_=see,RN=h_.custom,NN=FN(RN)?RN:null,MN=function e(t,n,i,r){var a=n||{};if(ns(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(ns(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=ns(a,"customInspect")?a.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(ns(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(ns(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=a.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return $N(t,a);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var u=String(t);return s?PN(t,u):u}if(typeof t=="bigint"){var c=String(t)+"n";return s?PN(t,c):c}var l=typeof a.depth>"u"?5:a.depth;if(typeof i>"u"&&(i=0),i>=l&&l>0&&typeof t=="object")return f_(t)?"[Array]":"[Object]";var f=Nee(a,i);if(typeof r>"u")r=[];else if(HN(r,t)>=0)return"[Circular]";function h($,P,B){if(P&&(r=gee.call(r),r.push(P)),B){var X={depth:a.depth};return ns(a,"quoteStyle")&&(X.quoteStyle=a.quoteStyle),e($,X,i+1,r)}return e($,a,i+1,r)}if(typeof t=="function"&&!BN(t)){var d=Cee(t),p=n0(t,h);return"[Function"+(d?": "+d:" (anonymous)")+"]"+(p.length>0?" { "+Ha.call(p,", ")+" }":"")}if(FN(t)){var m=Ku?ts.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):c_.call(t);return typeof t=="object"&&!Ku?Gf(m):m}if(xee(t)){for(var g="<"+DN.call(String(t.nodeName)),v=t.attributes||[],E=0;E<v.length;E++)g+=" "+v[E].name+"="+LN(vee(v[E].value),"double",a);return g+=">",t.childNodes&&t.childNodes.length&&(g+="..."),g+="</"+DN.call(String(t.nodeName))+">",g}if(f_(t)){if(t.length===0)return"[]";var y=n0(t,h);return f&&!Ree(y)?"["+p_(y,f)+"]":"[ "+Ha.call(y,", ")+" ]"}if(Tee(t)){var T=n0(t,h);return!("cause"in Error.prototype)&&"cause"in t&&!ON.call(t,"cause")?"{ ["+String(t)+"] "+Ha.call(IN.call("[cause]: "+h(t.cause),T),", ")+" }":T.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Ha.call(T,", ")+" }"}if(typeof t=="object"&&o){if(NN&&typeof t[NN]=="function"&&h_)return h_(t,{depth:l-i});if(o!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(Dee(t)){var b=[];return SN&&SN.call(t,function($,P){b.push(h(P,t,!0)+" => "+h($,t))}),UN("Map",e0.call(t),b,f)}if(kee(t)){var S=[];return AN&&AN.call(t,function($){S.push(h($,t))}),UN("Set",t0.call(t),S,f)}if(wee(t))return d_("WeakMap");if(Oee(t))return d_("WeakSet");if(Iee(t))return d_("WeakRef");if(bee(t))return Gf(h(Number(t)));if(See(t))return Gf(h(l_.call(t)));if(_ee(t))return Gf(hee.call(t));if(Eee(t))return Gf(h(String(t)));if(!yee(t)&&!BN(t)){var w=n0(t,h),D=xN?xN(t)===Object.prototype:t instanceof Object||t.constructor===Object,R=t instanceof Object?"":"null prototype",M=!D&&Rr&&Object(t)===t&&Rr in t?s_.call(rs(t),8,-1):R?"Object":"",k=D||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",L=k+(M||R?"["+Ha.call(IN.call([],M||[],R||[]),": ")+"] ":"");return w.length===0?L+"{}":f?L+"{"+p_(w,f)+"}":L+"{ "+Ha.call(w,", ")+" }"}return String(t)};function LN(e,t,n){var i=(n.quoteStyle||t)==="double"?'"':"'";return i+e+i}function vee(e){return ts.call(String(e),/"/g,"&quot;")}function f_(e){return rs(e)==="[object Array]"&&(!Rr||!(typeof e=="object"&&Rr in e))}function yee(e){return rs(e)==="[object Date]"&&(!Rr||!(typeof e=="object"&&Rr in e))}function BN(e){return rs(e)==="[object RegExp]"&&(!Rr||!(typeof e=="object"&&Rr in e))}function Tee(e){return rs(e)==="[object Error]"&&(!Rr||!(typeof e=="object"&&Rr in e))}function Eee(e){return rs(e)==="[object String]"&&(!Rr||!(typeof e=="object"&&Rr in e))}function bee(e){return rs(e)==="[object Number]"&&(!Rr||!(typeof e=="object"&&Rr in e))}function _ee(e){return rs(e)==="[object Boolean]"&&(!Rr||!(typeof e=="object"&&Rr in e))}function FN(e){if(Ku)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!c_)return!1;try{return c_.call(e),!0}catch{}return!1}function See(e){if(!e||typeof e!="object"||!l_)return!1;try{return l_.call(e),!0}catch{}return!1}var Aee=Object.prototype.hasOwnProperty||function(e){return e in this};function ns(e,t){return Aee.call(e,t)}function rs(e){return fee.call(e)}function Cee(e){if(e.name)return e.name;var t=pee.call(dee.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function HN(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}function Dee(e){if(!e0||!e||typeof e!="object")return!1;try{e0.call(e);try{t0.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function wee(e){if(!$f||!e||typeof e!="object")return!1;try{$f.call(e,$f);try{Uf.call(e,Uf)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function Iee(e){if(!CN||!e||typeof e!="object")return!1;try{return CN.call(e),!0}catch{}return!1}function kee(e){if(!t0||!e||typeof e!="object")return!1;try{t0.call(e);try{e0.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function Oee(e){if(!Uf||!e||typeof e!="object")return!1;try{Uf.call(e,Uf);try{$f.call(e,$f)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function xee(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function $N(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return $N(s_.call(e,0,t.maxStringLength),t)+i}var r=ts.call(ts.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,Pee);return LN(r,"single",t)}function Pee(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+mee.call(t.toString(16))}function Gf(e){return"Object("+e+")"}function d_(e){return e+" { ? }"}function UN(e,t,n,i){var r=i?p_(n,i):Ha.call(n,", ");return e+" ("+t+") {"+r+"}"}function Ree(e){for(var t=0;t<e.length;t++)if(HN(e[t],`
`)>=0)return!1;return!0}function Nee(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=Ha.call(Array(e.indent+1)," ");else return null;return{base:n,prev:Ha.call(Array(t+1),n)}}function p_(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+Ha.call(e,","+n)+`
`+t.prev}function n0(e,t){var n=f_(e),i=[];if(n){i.length=e.length;for(var r=0;r<e.length;r++)i[r]=ns(e,r)?t(e[r],e):""}var a=typeof u_=="function"?u_(e):[],o;if(Ku){o={};for(var s=0;s<a.length;s++)o["$"+a[s]]=a[s]}for(var u in e)!ns(e,u)||n&&String(Number(u))===u&&u<e.length||Ku&&o["$"+u]instanceof Symbol||(wN.call(/[^\w$]/,u)?i.push(t(u,e)+": "+t(e[u],e)):i.push(u+": "+t(e[u],e)));if(typeof u_=="function")for(var c=0;c<a.length;c++)ON.call(e,a[c])&&i.push("["+t(a[c])+"]: "+t(e[a[c]],e));return i}var m_,GN;function Zu(){return GN||(GN=1,m_=function(t){return typeof t=="string"||typeof t=="symbol"}),m_}var Mee=tn,zN=Mee("%TypeError%"),Lee=MN,Bee=Zu(),Fee=jr(),zf=function(t,n){if(Fee(t)!=="Object")throw new zN("Assertion failed: Type(O) is not Object");if(!Bee(n))throw new zN("Assertion failed: IsPropertyKey(P) is not true, got "+Lee(n));return t[n]},g_={exports:{}},v_,jN;function VN(){if(jN)return v_;jN=1;var e=tn,t=e("%Array%"),n=!t.isArray&&Pr("Object.prototype.toString");return v_=t.isArray||function(r){return n(r)==="[object Array]"},v_}var YN;function r0(){return YN||(YN=1,function(e){e.exports=VN()}(g_)),g_.exports}var i0={exports:{}},y_={exports:{}},WN;function Hee(){return WN||(WN=1,function(e){e.exports=tn}(y_)),y_.exports}var T_,qN;function $ee(){if(qN)return T_;qN=1;var e=tn,t=zr,n=e("%TypeError%");return T_=function(r,a){if(r.Type(a)!=="Object")return!1;var o={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var s in a)if(t(a,s)&&!o[s])return!1;if(r.IsDataDescriptor(a)&&r.IsAccessorDescriptor(a))throw new n("Property Descriptors may not be both accessor and data descriptors");return!0},T_}var E_,XN;function KN(){if(XN)return E_;XN=1;var e=eN,t=tn,n=e()&&t("%Object.defineProperty%",!0),i=e.hasArrayLengthDefineBug(),r=i&&VN(),a=Pr,o=a("Object.prototype.propertyIsEnumerable");return E_=function(u,c,l,f,h,d){if(!n){if(!u(d)||!d["[[Configurable]]"]||!d["[[Writable]]"]||h in f&&o(f,h)!==!!d["[[Enumerable]]"])return!1;var p=d["[[Value]]"];return f[h]=p,c(f[h],p)}return i&&h==="length"&&"[[Value]]"in d&&r(f)&&f.length!==d["[[Value]]"]?(f.length=d["[[Value]]"],f.length===d["[[Value]]"]):(n(f,h,l(d)),!0)},E_}var b_,ZN;function Uee(){if(ZN)return b_;ZN=1;var e=zr;return b_=function(n){return e(n,"[[StartIndex]]")&&e(n,"[[EndIndex]]")&&n["[[StartIndex]]"]>=0&&n["[[EndIndex]]"]>=n["[[StartIndex]]"]&&String(parseInt(n["[[StartIndex]]"],10))===String(n["[[StartIndex]]"])&&String(parseInt(n["[[EndIndex]]"],10))===String(n["[[EndIndex]]"])},b_}var __,QN;function S_(){if(QN)return __;QN=1;var e=tn,t=e("%TypeError%"),n=e("%SyntaxError%"),i=zr,r=Uee(),a={"Property Descriptor":function(s){var u={"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Get]]":!0,"[[Set]]":!0,"[[Value]]":!0,"[[Writable]]":!0};for(var c in s)if(i(s,c)&&!u[c])return!1;var l=i(s,"[[Value]]"),f=i(s,"[[Get]]")||i(s,"[[Set]]");if(l&&f)throw new t("Property Descriptors may not be both accessor and data descriptors");return!0},"Match Record":r,"Iterator Record":function(s){return i(s,"[[Iterator]]")&&i(s,"[[NextMethod]]")&&i(s,"[[Done]]")},"PromiseCapability Record":function(s){return s&&i(s,"[[Resolve]]")&&typeof s["[[Resolve]]"]=="function"&&i(s,"[[Reject]]")&&typeof s["[[Reject]]"]=="function"&&i(s,"[[Promise]]")&&s["[[Promise]]"]&&typeof s["[[Promise]]"].then=="function"},"AsyncGeneratorRequest Record":function(s){return s&&i(s,"[[Completion]]")&&i(s,"[[Capability]]")&&a["PromiseCapability Record"](s["[[Capability]]"])}};return __=function(s,u,c,l){var f=a[u];if(typeof f!="function")throw new n("unknown record type: "+u);if(s(l)!=="Object"||!f(l))throw new t(c+" must be a "+u)},__}var A_,JN;function Gee(){return JN||(JN=1,A_=function(t){if(typeof t>"u")return t;var n={};return"[[Value]]"in t&&(n.value=t["[[Value]]"]),"[[Writable]]"in t&&(n.writable=!!t["[[Writable]]"]),"[[Get]]"in t&&(n.get=t["[[Get]]"]),"[[Set]]"in t&&(n.set=t["[[Set]]"]),"[[Enumerable]]"in t&&(n.enumerable=!!t["[[Enumerable]]"]),"[[Configurable]]"in t&&(n.configurable=!!t["[[Configurable]]"]),n}),A_}var C_,eM;function tM(){if(eM)return C_;eM=1;var e=S_(),t=Gee(),n=jr();return C_=function(r){return typeof r<"u"&&e(n,"Property Descriptor","Desc",r),t(r)},C_}var D_,nM;function zee(){if(nM)return D_;nM=1;var e=zr,t=S_(),n=jr();return D_=function(r){return!(typeof r>"u"||(t(n,"Property Descriptor","Desc",r),!e(r,"[[Get]]")&&!e(r,"[[Set]]")))},D_}var w_,rM;function iM(){if(rM)return w_;rM=1;var e=zr,t=S_(),n=jr();return w_=function(r){return!(typeof r>"u"||(t(n,"Property Descriptor","Desc",r),!e(r,"[[Value]]")&&!e(r,"[[Writable]]")))},w_}var I_,aM;function oM(){if(aM)return I_;aM=1;var e=Jg;return I_=function(n,i){return n===i?n===0?1/n===1/i:!0:e(n)&&e(i)},I_}var k_=function(t){return!!t},O_={exports:{}},sM=Function.prototype.toString,Qu=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,x_,a0;if(typeof Qu=="function"&&typeof Object.defineProperty=="function")try{x_=Object.defineProperty({},"length",{get:function(){throw a0}}),a0={},Qu(function(){throw 42},null,x_)}catch(e){e!==a0&&(Qu=null)}else Qu=null;var jee=/^\s*class\b/,P_=function(t){try{var n=sM.call(t);return jee.test(n)}catch{return!1}},R_=function(t){try{return P_(t)?!1:(sM.call(t),!0)}catch{return!1}},o0=Object.prototype.toString,Vee="[object Object]",Yee="[object Function]",Wee="[object GeneratorFunction]",qee="[object HTMLAllCollection]",Xee="[object HTML document.all class]",Kee="[object HTMLCollection]",Zee=typeof Symbol=="function"&&!!Symbol.toStringTag,Qee=!(0 in[,]),N_=function(){return!1};if(typeof document=="object"){var Jee=document.all;o0.call(Jee)===o0.call(document.all)&&(N_=function(t){if((Qee||!t)&&(typeof t>"u"||typeof t=="object"))try{var n=o0.call(t);return(n===qee||n===Xee||n===Kee||n===Vee)&&t("")==null}catch{}return!1})}var s0=Qu?function(t){if(N_(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;try{Qu(t,null,x_)}catch(n){if(n!==a0)return!1}return!P_(t)&&R_(t)}:function(t){if(N_(t))return!0;if(!t||typeof t!="function"&&typeof t!="object")return!1;if(Zee)return R_(t);if(P_(t))return!1;var n=o0.call(t);return n!==Yee&&n!==Wee&&!/^\[object HTML/.test(n)?!1:R_(t)};(function(e){e.exports=s0})(O_);var M_,lM;function uM(){if(lM)return M_;lM=1;var e=zr,t=tn,n=t("%TypeError%"),i=jr(),r=k_,a=O_.exports;return M_=function(s){if(i(s)!=="Object")throw new n("ToPropertyDescriptor requires an object");var u={};if(e(s,"enumerable")&&(u["[[Enumerable]]"]=r(s.enumerable)),e(s,"configurable")&&(u["[[Configurable]]"]=r(s.configurable)),e(s,"value")&&(u["[[Value]]"]=s.value),e(s,"writable")&&(u["[[Writable]]"]=r(s.writable)),e(s,"get")){var c=s.get;if(typeof c<"u"&&!a(c))throw new n("getter must be a function");u["[[Get]]"]=c}if(e(s,"set")){var l=s.set;if(typeof l<"u"&&!a(l))throw new n("setter must be a function");u["[[Set]]"]=l}if((e(u,"[[Get]]")||e(u,"[[Set]]"))&&(e(u,"[[Value]]")||e(u,"[[Writable]]")))throw new n("Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");return u},M_}var L_,cM;function ete(){if(cM)return L_;cM=1;var e=tn,t=e("%TypeError%"),n=$ee(),i=KN(),r=tM(),a=zee(),o=iM(),s=Zu(),u=oM(),c=uM(),l=jr();return L_=function(h,d,p){if(l(h)!=="Object")throw new t("Assertion failed: Type(O) is not Object");if(!s(d))throw new t("Assertion failed: IsPropertyKey(P) is not true");var m=n({Type:l,IsDataDescriptor:o,IsAccessorDescriptor:a},p)?p:c(p);if(!n({Type:l,IsDataDescriptor:o,IsAccessorDescriptor:a},m))throw new t("Assertion failed: Desc is not a valid Property Descriptor");return i(o,u,r,h,d,m)},L_}var hM;function tte(){if(hM)return i0.exports;hM=1;var e=Hee(),t=e("%Reflect.construct%",!0),n=ete();try{n({},"",{"[[Get]]":function(){}})}catch{n=null}if(n&&t){var i={},r={};n(r,"length",{"[[Get]]":function(){throw i},"[[Enumerable]]":!0}),i0.exports=function(o){try{t(o,r)}catch(s){return s===i}}}else i0.exports=function(o){return typeof o=="function"&&!!o.prototype};return i0.exports}var fM=tn,dM=fM("%Symbol.species%",!0),pM=fM("%TypeError%"),mM=oee(),gM=zf,nte=r0(),rte=tte(),ite=EN(),ate=jr(),vM=function(t,n){if(!ite(n)||n<0)throw new pM("Assertion failed: length must be an integer >= 0");var i=nte(t);if(!i)return mM(n);var r=gM(t,"constructor");if(dM&&ate(r)==="Object"&&(r=gM(r,dM),r===null&&(r=void 0)),typeof r>"u")return mM(n);if(!rte(r))throw new pM("C must be a constructor");return new r(n)},yM=tn,ote=yM("%Math%"),ste=yM("%Number%"),TM=ste.MAX_SAFE_INTEGER||ote.pow(2,53)-1,B_,EM;function bM(){if(EM)return B_;EM=1;var e=tn,t=Pr,n=e("%TypeError%"),i=r0(),r=e("%Reflect.apply%",!0)||t("%Function.prototype.apply%");return B_=function(o,s){var u=arguments.length>2?arguments[2]:[];if(!i(u))throw new n("Assertion failed: optional `argumentsList`, if provided, must be a List");return r(o,s,u)},B_}var F_,_M;function lte(){if(_M)return F_;_M=1;var e=tn,t=e("%Object.getOwnPropertyDescriptor%",!0);if(t)try{t([],"length")}catch{t=null}return F_=t,F_}var ute=jb,jf=function(){return ute()&&!!Symbol.toStringTag},H_=Pr,SM=jf(),AM,CM,$_,U_;if(SM){AM=H_("Object.prototype.hasOwnProperty"),CM=H_("RegExp.prototype.exec"),$_={};var G_=function(){throw $_};U_={toString:G_,valueOf:G_},typeof Symbol.toPrimitive=="symbol"&&(U_[Symbol.toPrimitive]=G_)}var cte=H_("Object.prototype.toString"),hte=Object.getOwnPropertyDescriptor,fte="[object RegExp]",z_=SM?function(t){if(!t||typeof t!="object")return!1;var n=hte(t,"lastIndex"),i=n&&AM(n,"value");if(!i)return!1;try{CM(t,U_)}catch(r){return r===$_}}:function(t){return!t||typeof t!="object"&&typeof t!="function"?!1:cte(t)===fte},j_,DM;function dte(){if(DM)return j_;DM=1;var e=tn,t=e("%Symbol.match%",!0),n=z_,i=k_;return j_=function(a){if(!a||typeof a!="object")return!1;if(t){var o=a[t];if(typeof o<"u")return i(o)}return n(a)},j_}var V_,wM;function pte(){if(wM)return V_;wM=1;var e=tn,t=lte(),n=e("%TypeError%"),i=Pr,r=i("Object.prototype.propertyIsEnumerable"),a=zr,o=r0(),s=Zu(),u=dte(),c=uM(),l=jr();return V_=function(h,d){if(l(h)!=="Object")throw new n("Assertion failed: O must be an Object");if(!s(d))throw new n("Assertion failed: P must be a Property Key");if(!!a(h,d)){if(!t){var p=o(h)&&d==="length",m=u(h)&&d==="lastIndex";return{"[[Configurable]]":!(p||m),"[[Enumerable]]":r(h,d),"[[Value]]":h[d],"[[Writable]]":!0}}return c(t(h,d))}},V_}var Y_,IM;function kM(){return IM||(IM=1,Y_=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),Y_}var W_,OM;function mte(){if(OM)return W_;OM=1;var e=tn,t=e("%Object.preventExtensions%",!0),n=e("%Object.isExtensible%",!0),i=kM();return W_=t?function(a){return!i(a)&&n(a)}:function(a){return!i(a)},W_}var q_,xM;function gte(){if(xM)return q_;xM=1;var e=tn,t=e("%TypeError%"),n=KN(),i=tM(),r=pte(),a=iM(),o=mte(),s=Zu(),u=oM(),c=jr();return q_=function(f,h,d){if(c(f)!=="Object")throw new t("Assertion failed: Type(O) is not Object");if(!s(h))throw new t("Assertion failed: IsPropertyKey(P) is not true");var p=r(f,h),m=!p||o(f),g=p&&!p["[[Configurable]]"];return g||!m?!1:n(a,u,i,f,h,{"[[Configurable]]":!0,"[[Enumerable]]":!0,"[[Value]]":d,"[[Writable]]":!0})},q_}var X_,PM;function RM(){if(PM)return X_;PM=1;var e=tn,t=e("%TypeError%"),n=gte(),i=Zu(),r=jr();return X_=function(o,s,u){if(r(o)!=="Object")throw new t("Assertion failed: Type(O) is not Object");if(!i(s))throw new t("Assertion failed: IsPropertyKey(P) is not true");var c=n(o,s,u);if(!c)throw new t("unable to create data property");return c},X_}var K_,NM;function MM(){if(NM)return K_;NM=1;var e=tn,t=e("%TypeError%"),n=Zu(),i=jr();return K_=function(a,o){if(i(a)!=="Object")throw new t("Assertion failed: `O` must be an Object");if(!n(o))throw new t("Assertion failed: `P` must be a Property Key");return o in a},K_}var Z_,LM;function vte(){return LM||(LM=1,Z_=function(t){return t===null||typeof t!="function"&&typeof t!="object"}),Z_}var Q_,BM;function yte(){if(BM)return Q_;BM=1;var e=Date.prototype.getDay,t=function(o){try{return e.call(o),!0}catch{return!1}},n=Object.prototype.toString,i="[object Date]",r=jf();return Q_=function(o){return typeof o!="object"||o===null?!1:r?t(o):n.call(o)===i},Q_}var l0={exports:{}},FM;function Tte(){if(FM)return l0.exports;FM=1;var e=Object.prototype.toString,t=KR();if(t){var n=Symbol.prototype.toString,i=/^Symbol\(.*\)$/,r=function(o){return typeof o.valueOf()!="symbol"?!1:i.test(n.call(o))};l0.exports=function(o){if(typeof o=="symbol")return!0;if(e.call(o)!=="[object Symbol]")return!1;try{return r(o)}catch{return!1}}}else l0.exports=function(o){return!1};return l0.exports}var J_,HM;function Ete(){if(HM)return J_;HM=1;var e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol",t=vte(),n=s0,i=yte(),r=Tte(),a=function(u,c){if(typeof u>"u"||u===null)throw new TypeError("Cannot call method on "+u);if(typeof c!="string"||c!=="number"&&c!=="string")throw new TypeError('hint must be "string" or "number"');var l=c==="string"?["toString","valueOf"]:["valueOf","toString"],f,h,d;for(d=0;d<l.length;++d)if(f=u[l[d]],n(f)&&(h=f.call(u),t(h)))return h;throw new TypeError("No default value")},o=function(u,c){var l=u[c];if(l!==null&&typeof l<"u"){if(!n(l))throw new TypeError(l+" returned for property "+c+" of object "+u+" is not a function");return l}};return J_=function(u){if(t(u))return u;var c="default";arguments.length>1&&(arguments[1]===String?c="string":arguments[1]===Number&&(c="number"));var l;if(e&&(Symbol.toPrimitive?l=o(u,Symbol.toPrimitive):r(u)&&(l=Symbol.prototype.valueOf)),typeof l<"u"){var f=l.call(u,c);if(t(f))return f;throw new TypeError("unable to convert exotic object to primitive")}return c==="default"&&(i(u)||r(u))&&(c="string"),a(u,c==="default"?"number":c)},J_}var eS,$M;function bte(){if($M)return eS;$M=1;var e=Ete();return eS=function(n){return arguments.length>1?e(n,arguments[1]):e(n)},eS}var tS,UM;function _te(){if(UM)return tS;UM=1;var e=Pr,t=tn,n=z_,i=e("RegExp.prototype.exec"),r=t("%TypeError%");return tS=function(o){if(!n(o))throw new r("`regex` must be a RegExp");return function(u){return i(o,u)!==null}},tS}var nS,GM;function Ste(){if(GM)return nS;GM=1;var e=tn,t=e("%Number%"),n=e("%RegExp%"),i=e("%TypeError%"),r=e("%parseInt%"),a=Pr,o=_te(),s=a("String.prototype.slice"),u=o(/^0b[01]+$/i),c=o(/^0o[0-7]+$/i),l=o(/^[-+]0x[0-9a-f]+$/i),f=["\x85","\u200B","\uFFFE"].join(""),h=new n("["+f+"]","g"),d=o(h),p=[`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003`,"\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028","\u2029\uFEFF"].join(""),m=new RegExp("(^["+p+"]+)|(["+p+"]+$)","g"),g=a("String.prototype.replace"),v=function(y){return g(y,m,"")},E=jr();return nS=function y(T){if(E(T)!=="String")throw new i("Assertion failed: `argument` is not a String");if(u(T))return t(r(s(T,2),2));if(c(T))return t(r(s(T,2),8));if(d(T)||l(T))return NaN;var b=v(T);return b!==T?y(b):t(T)},nS}var zM=tn,jM=zM("%TypeError%"),VM=zM("%Number%"),Ate=kM(),Cte=bte(),Dte=Ste(),wte=function(t){var n=Ate(t)?t:Cte(t,VM);if(typeof n=="symbol")throw new jM("Cannot convert a Symbol value to a number");if(typeof n=="bigint")throw new jM("Conversion from 'BigInt' to 'number' is not allowed.");return typeof n=="string"?Dte(n):VM(n)},Ite=function(t){return t>=0?1:-1},kte=pN,Ote=vN,xte=wte,Pte=Jg,Rte=yN,Nte=Ite,YM=function(t){var n=xte(t);if(Pte(n)||n===0)return 0;if(!Rte(n))return n;var i=Ote(kte(n));return i===0?0:Nte(n)*i},WM=TM,Mte=YM,qM=function(t){var n=Mte(t);return n<=0?0:n>WM?WM:n},rS,XM;function KM(){if(XM)return rS;XM=1;var e=tn,t=e("%TypeError%"),n=zf,i=qM,r=jr();return rS=function(o){if(r(o)!=="Object")throw new t("Assertion failed: `obj` must be an Object");return i(n(o,"length"))},rS}var ZM=tn,Lte=ZM("%String%"),Bte=ZM("%TypeError%"),iS=function(t){if(typeof t=="symbol")throw new Bte("Cannot convert a Symbol value to a string");return Lte(t)},Fte=tn,QM=Fte("%TypeError%"),Hte=TM,$te=bM(),Ute=RM(),Gte=zf,zte=MM(),jte=r0(),Vte=KM(),JM=iS,Yte=function e(t,n,i,r,a){var o;arguments.length>5&&(o=arguments[5]);for(var s=r,u=0;u<i;){var c=JM(u),l=zte(n,c);if(l===!0){var f=Gte(n,c);if(typeof o<"u"){if(arguments.length<=6)throw new QM("Assertion failed: thisArg is required when mapperFunction is provided");f=$te(o,arguments[6],[f,u,n])}var h=!1;if(a>0&&(h=jte(f)),h){var d=Vte(f);s=e(t,f,d,s,a-1)}else{if(s>=Hte)throw new QM("index too large");Ute(t,JM(s),f),s+=1}}u+=1}return s},vl={exports:{}},Wte=tn,qte=Wte("%TypeError%"),Xte=function(t,n){if(t==null)throw new qte(n||"Cannot call method on "+t);return t};(function(e){e.exports=Xte})(vl);var Kte=tn,Zte=Kte("%Object%"),Qte=vl.exports,eL=function(t){return Qte(t),Zte(t)},Jte=vM,ene=Yte,tne=zf,nne=YM,rne=qM,ine=eL,tL=function(){var t=ine(this),n=rne(tne(t,"length")),i=1;arguments.length>0&&typeof arguments[0]<"u"&&(i=nne(arguments[0]));var r=Jte(t,0);return ene(r,t,n,0,i),r},ane=tL,nL=function(){return Array.prototype.flat||ane},aS,rL;function one(){if(rL)return aS;rL=1;var e=zr,t=typeof Symbol=="function"&&typeof Symbol.unscopables=="symbol",n=t&&Array.prototype[Symbol.unscopables],i=TypeError;return aS=function(a){if(typeof a!="string"||!a)throw new i("method must be a non-empty string");if(!e(Array.prototype,a))throw new i("method must be on Array.prototype");t&&(n[a]=!0)},aS}var oS,iL;function sne(){if(iL)return oS;iL=1;var e=xr,t=one(),n=nL;return oS=function(){var r=n();return e(Array.prototype,{flat:r},{flat:function(){return Array.prototype.flat!==r}}),t("flat"),r},oS}var lne=xr,une=Fa.exports,cne=tL,aL=nL,hne=aL(),fne=sne(),oL=une(hne);lne(oL,{getPolyfill:aL,implementation:cne,shim:fne});var Vf=oL,Yf={},u0={exports:{}},sL=function(e){return e!==e},lL=function(t,n){return t===0&&n===0?1/t===1/n:!!(t===n||sL(t)&&sL(n))},dne=lL,uL=function(){return typeof Object.is=="function"?Object.is:dne},pne=uL,mne=xr,gne=function(){var t=pne();return mne(Object,{is:t},{is:function(){return Object.is!==t}}),t},vne=xr,yne=Fa.exports,Tne=lL,cL=uL,Ene=gne,hL=yne(cL(),Object);vne(hL,{getPolyfill:cL,implementation:Tne,shim:Ene});var sS=hL;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var n=r(sS),i=r(zr);function r(s){return s&&s.__esModule?s:{default:s}}function a(s){return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},a(s)}function o(s,u){if((0,n.default)(s,u))return!0;if(!s||!u||a(s)!=="object"||a(u)!=="object")return!1;var c=Object.keys(s),l=Object.keys(u);if(c.length!==l.length)return!1;c.sort(),l.sort();for(var f=0;f<c.length;f+=1)if(!(0,i.default)(u,c[f])||!(0,n.default)(s[c[f]],u[c[f]]))return!1;return!0}e.exports=t.default})(u0,u0.exports);var bne=vl.exports,fL=Pr,_ne=fL("Object.prototype.propertyIsEnumerable"),Sne=fL("Array.prototype.push"),dL=function(t){var n=bne(t),i=[];for(var r in n)_ne(n,r)&&Sne(i,[r,n[r]]);return i},Ane=dL,pL=function(){return typeof Object.entries=="function"?Object.entries:Ane},Cne=pL,Dne=xr,wne=function(){var t=Cne();return Dne(Object,{entries:t},{entries:function(){return Object.entries!==t}}),t},Ine=xr,kne=Fa.exports,One=dL,mL=pL,xne=wne,gL=kne(mL(),Object);Ine(gL,{getPolyfill:mL,implementation:One,shim:xne});var vL=gL,yL={exports:{}};(function(e){e.exports=s0})(yL);var Wf=function(){return typeof function(){}.name=="string"},qf=Object.getOwnPropertyDescriptor;if(qf)try{qf([],"length")}catch{qf=null}Wf.functionsHaveConfigurableNames=function(){if(!Wf()||!qf)return!1;var t=qf(function(){},"name");return!!t&&!!t.configurable};var Pne=Function.prototype.bind;Wf.boundFunctionsHaveNames=function(){return Wf()&&typeof Pne=="function"&&function(){}.bind().name!==""};var TL=Wf,EL=yL.exports,Rne=TL(),bL=Pr,_L=bL("Function.prototype.toString"),SL=bL("String.prototype.match"),Nne=/^class /,Mne=function(t){if(EL(t)||typeof t!="function")return!1;try{var n=SL(_L(t),Nne);return!!n}catch{}return!1},Lne=/\s*function\s+([^(\s]*)\s*/,Bne=Function.prototype,AL=function(){if(!Mne(this)&&!EL(this))throw new TypeError("Function.prototype.name sham getter called on non-function");if(Rne)return this.name;if(this===Bne)return"";var t=_L(this),n=SL(t,Lne),i=n&&n[1];return i},Fne=AL,CL=function(){return Fne},Hne=xr.supportsDescriptors,$ne=TL(),Une=CL,DL=Object.defineProperty,Gne=TypeError,zne=function(){var t=Une();if($ne)return t;if(!Hne)throw new Gne("Shimming Function.prototype.name support requires ES5 property descriptor support.");var n=Function.prototype;return DL(n,"name",{configurable:!0,enumerable:!1,get:function(){var i=t.call(this);return this!==n&&DL(this,"name",{configurable:!0,enumerable:!1,value:i,writable:!1}),i}}),t},jne=xr,Vne=Fa.exports,wL=AL,Yne=CL,Wne=zne,IL=Vne(wL);jne(IL,{getPolyfill:Yne,implementation:wL,shim:Wne});var lS=IL,qne=vl.exports,Xne=iS,Kne=Pr,kL=Kne("String.prototype.replace"),OL=/^\s$/.test("\u180E"),Zne=OL?/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/:/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+/,Qne=OL?/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/:/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]+$/,xL=function(){var t=Xne(qne(this));return kL(kL(t,Zne,""),Qne,"")},Jne=xL,PL="\u200B",Ju="\u180E",RL=function(){return String.prototype.trim&&PL.trim()===PL&&Ju.trim()===Ju&&("_"+Ju).trim()==="_"+Ju&&(Ju+"_").trim()===Ju+"_"?String.prototype.trim:Jne},ere=xr,tre=RL,nre=function(){var t=tre();return ere(String.prototype,{trim:t},{trim:function(){return String.prototype.trim!==t}}),t},rre=Fa.exports,ire=xr,are=vl.exports,ore=xL,NL=RL,sre=nre,lre=rre(NL()),ML=function(t){return are(t),lre(t)};ire(ML,{getPolyfill:NL,implementation:ore,shim:sre});var ure=ML,LL={},BL={};Object.defineProperty(BL,"__esModule",{value:!0});var c0={},ec={},h0=Pe&&Pe.__assign||function(){return h0=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},h0.apply(this,arguments)};Object.defineProperty(ec,"__esModule",{value:!0}),ec.flatten=void 0;var cre={xml:!1,decodeEntities:!0};ec.default=cre;var FL={_useHtmlParser2:!0,xmlMode:!0};function hre(e){return e?.xml?typeof e.xml=="boolean"?FL:h0(h0({},FL),e.xml):e??void 0}ec.flatten=hre;var Gn={},$a={},Di={},Vr={},tc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(i){i.Root="root",i.Text="text",i.Directive="directive",i.Comment="comment",i.Script="script",i.Style="style",i.Tag="tag",i.CDATA="cdata",i.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(i){return i.type===t.Tag||i.type===t.Script||i.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(tc);var Lt={},is=Pe&&Pe.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xf=Pe&&Pe.__assign||function(){return Xf=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Xf.apply(this,arguments)};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.cloneNode=Lt.hasChildren=Lt.isDocument=Lt.isDirective=Lt.isComment=Lt.isText=Lt.isCDATA=Lt.isTag=Lt.Element=Lt.Document=Lt.CDATA=Lt.NodeWithChildren=Lt.ProcessingInstruction=Lt.Comment=Lt.Text=Lt.DataNode=Lt.Node=void 0;var ui=tc,uS=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),cS(this,t)},e}();Lt.Node=uS;var f0=function(e){is(t,e);function t(n){var i=e.call(this)||this;return i.data=n,i}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(uS);Lt.DataNode=f0;var HL=function(e){is(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=ui.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(f0);Lt.Text=HL;var $L=function(e){is(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=ui.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(f0);Lt.Comment=$L;var UL=function(e){is(t,e);function t(n,i){var r=e.call(this,i)||this;return r.name=n,r.type=ui.ElementType.Directive,r}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(f0);Lt.ProcessingInstruction=UL;var d0=function(e){is(t,e);function t(n){var i=e.call(this)||this;return i.children=n,i}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(uS);Lt.NodeWithChildren=d0;var GL=function(e){is(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=ui.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(d0);Lt.CDATA=GL;var zL=function(e){is(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=ui.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(d0);Lt.Document=zL;var jL=function(e){is(t,e);function t(n,i,r,a){r===void 0&&(r=[]),a===void 0&&(a=n==="script"?ui.ElementType.Script:n==="style"?ui.ElementType.Style:ui.ElementType.Tag);var o=e.call(this,r)||this;return o.name=n,o.attribs=i,o.type=a,o}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(i){var r,a;return{name:i,value:n.attribs[i],namespace:(r=n["x-attribsNamespace"])===null||r===void 0?void 0:r[i],prefix:(a=n["x-attribsPrefix"])===null||a===void 0?void 0:a[i]}})},enumerable:!1,configurable:!0}),t}(d0);Lt.Element=jL;function VL(e){return(0,ui.isTag)(e)}Lt.isTag=VL;function YL(e){return e.type===ui.ElementType.CDATA}Lt.isCDATA=YL;function WL(e){return e.type===ui.ElementType.Text}Lt.isText=WL;function qL(e){return e.type===ui.ElementType.Comment}Lt.isComment=qL;function XL(e){return e.type===ui.ElementType.Directive}Lt.isDirective=XL;function KL(e){return e.type===ui.ElementType.Root}Lt.isDocument=KL;function fre(e){return Object.prototype.hasOwnProperty.call(e,"children")}Lt.hasChildren=fre;function cS(e,t){t===void 0&&(t=!1);var n;if(WL(e))n=new HL(e.data);else if(qL(e))n=new $L(e.data);else if(VL(e)){var i=t?hS(e.children):[],r=new jL(e.name,Xf({},e.attribs),i);i.forEach(function(u){return u.parent=r}),e.namespace!=null&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]=Xf({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]=Xf({},e["x-attribsPrefix"])),n=r}else if(YL(e)){var i=t?hS(e.children):[],a=new GL(i);i.forEach(function(c){return c.parent=a}),n=a}else if(KL(e)){var i=t?hS(e.children):[],o=new zL(i);i.forEach(function(c){return c.parent=o}),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),n=o}else if(XL(e)){var s=new UL(e.name,e.data);e["x-name"]!=null&&(s["x-name"]=e["x-name"],s["x-publicId"]=e["x-publicId"],s["x-systemId"]=e["x-systemId"]),n=s}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}Lt.cloneNode=cS;function hS(e){for(var t=e.map(function(i){return cS(i,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(s,u,c,l){l===void 0&&(l=c);var f=Object.getOwnPropertyDescriptor(u,c);(!f||("get"in f?!u.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return u[c]}}),Object.defineProperty(s,l,f)}:function(s,u,c,l){l===void 0&&(l=c),s[l]=u[c]}),n=Pe&&Pe.__exportStar||function(s,u){for(var c in s)c!=="default"&&!Object.prototype.hasOwnProperty.call(u,c)&&t(u,s,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var i=tc,r=Lt;n(Lt,e);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function s(u,c,l){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof c=="function"&&(l=c,c=a),typeof u=="object"&&(c=u,u=void 0),this.callback=u??null,this.options=c??a,this.elementCB=l??null}return s.prototype.onparserinit=function(u){this.parser=u},s.prototype.onreset=function(){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},s.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},s.prototype.onerror=function(u){this.handleCallback(u)},s.prototype.onclosetag=function(){this.lastNode=null;var u=this.tagStack.pop();this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(u)},s.prototype.onopentag=function(u,c){var l=this.options.xmlMode?i.ElementType.Tag:void 0,f=new r.Element(u,c,void 0,l);this.addNode(f),this.tagStack.push(f)},s.prototype.ontext=function(u){var c=this.lastNode;if(c&&c.type===i.ElementType.Text)c.data+=u,this.options.withEndIndices&&(c.endIndex=this.parser.endIndex);else{var l=new r.Text(u);this.addNode(l),this.lastNode=l}},s.prototype.oncomment=function(u){if(this.lastNode&&this.lastNode.type===i.ElementType.Comment){this.lastNode.data+=u;return}var c=new r.Comment(u);this.addNode(c),this.lastNode=c},s.prototype.oncommentend=function(){this.lastNode=null},s.prototype.oncdatastart=function(){var u=new r.Text(""),c=new r.CDATA([u]);this.addNode(c),u.parent=c,this.lastNode=u},s.prototype.oncdataend=function(){this.lastNode=null},s.prototype.onprocessinginstruction=function(u,c){var l=new r.ProcessingInstruction(u,c);this.addNode(l)},s.prototype.handleCallback=function(u){if(typeof this.callback=="function")this.callback(u,this.dom);else if(u)throw u},s.prototype.addNode=function(u){var c=this.tagStack[this.tagStack.length-1],l=c.children[c.children.length-1];this.options.withStartIndices&&(u.startIndex=this.parser.startIndex),this.options.withEndIndices&&(u.endIndex=this.parser.endIndex),c.children.push(u),l&&(u.prev=l,l.next=u),u.parent=c,this.lastNode=null},s}();e.DomHandler=o,e.default=o})(Vr);var nc={},ZL={},yl={},fS={};Object.defineProperty(fS,"__esModule",{value:!0}),fS.default=new Uint16Array('\u1D41<\xD5\u0131\u028A\u049D\u057B\u05D0\u0675\u06DE\u07A2\u07D6\u080F\u0A4A\u0A91\u0DA1\u0E6D\u0F09\u0F26\u10CA\u1228\u12E1\u1415\u149D\u14C3\u14DF\u1525\0\0\0\0\0\0\u156B\u16CD\u198D\u1C12\u1DDD\u1F7E\u2060\u21B0\u228D\u23C0\u23FB\u2442\u2824\u2912\u2D08\u2E48\u2FCE\u3016\u32BA\u3639\u37AC\u38FE\u3A28\u3A71\u3AE0\u3B2E\u0800EMabcfglmnoprstu\\bfms\x7F\x84\x8B\x90\x95\x98\xA6\xB3\xB9\xC8\xCFlig\u803B\xC6\u40C6P\u803B&\u4026cute\u803B\xC1\u40C1reve;\u4102\u0100iyx}rc\u803B\xC2\u40C2;\u4410r;\uC000\u{1D504}rave\u803B\xC0\u40C0pha;\u4391acr;\u4100d;\u6A53\u0100gp\x9D\xA1on;\u4104f;\uC000\u{1D538}plyFunction;\u6061ing\u803B\xC5\u40C5\u0100cs\xBE\xC3r;\uC000\u{1D49C}ign;\u6254ilde\u803B\xC3\u40C3ml\u803B\xC4\u40C4\u0400aceforsu\xE5\xFB\xFE\u0117\u011C\u0122\u0127\u012A\u0100cr\xEA\xF2kslash;\u6216\u0176\xF6\xF8;\u6AE7ed;\u6306y;\u4411\u0180crt\u0105\u010B\u0114ause;\u6235noullis;\u612Ca;\u4392r;\uC000\u{1D505}pf;\uC000\u{1D539}eve;\u42D8c\xF2\u0113mpeq;\u624E\u0700HOacdefhilorsu\u014D\u0151\u0156\u0180\u019E\u01A2\u01B5\u01B7\u01BA\u01DC\u0215\u0273\u0278\u027Ecy;\u4427PY\u803B\xA9\u40A9\u0180cpy\u015D\u0162\u017Aute;\u4106\u0100;i\u0167\u0168\u62D2talDifferentialD;\u6145leys;\u612D\u0200aeio\u0189\u018E\u0194\u0198ron;\u410Cdil\u803B\xC7\u40C7rc;\u4108nint;\u6230ot;\u410A\u0100dn\u01A7\u01ADilla;\u40B8terDot;\u40B7\xF2\u017Fi;\u43A7rcle\u0200DMPT\u01C7\u01CB\u01D1\u01D6ot;\u6299inus;\u6296lus;\u6295imes;\u6297o\u0100cs\u01E2\u01F8kwiseContourIntegral;\u6232eCurly\u0100DQ\u0203\u020FoubleQuote;\u601Duote;\u6019\u0200lnpu\u021E\u0228\u0247\u0255on\u0100;e\u0225\u0226\u6237;\u6A74\u0180git\u022F\u0236\u023Aruent;\u6261nt;\u622FourIntegral;\u622E\u0100fr\u024C\u024E;\u6102oduct;\u6210nterClockwiseContourIntegral;\u6233oss;\u6A2Fcr;\uC000\u{1D49E}p\u0100;C\u0284\u0285\u62D3ap;\u624D\u0580DJSZacefios\u02A0\u02AC\u02B0\u02B4\u02B8\u02CB\u02D7\u02E1\u02E6\u0333\u048D\u0100;o\u0179\u02A5trahd;\u6911cy;\u4402cy;\u4405cy;\u440F\u0180grs\u02BF\u02C4\u02C7ger;\u6021r;\u61A1hv;\u6AE4\u0100ay\u02D0\u02D5ron;\u410E;\u4414l\u0100;t\u02DD\u02DE\u6207a;\u4394r;\uC000\u{1D507}\u0100af\u02EB\u0327\u0100cm\u02F0\u0322ritical\u0200ADGT\u0300\u0306\u0316\u031Ccute;\u40B4o\u0174\u030B\u030D;\u42D9bleAcute;\u42DDrave;\u4060ilde;\u42DCond;\u62C4ferentialD;\u6146\u0470\u033D\0\0\0\u0342\u0354\0\u0405f;\uC000\u{1D53B}\u0180;DE\u0348\u0349\u034D\u40A8ot;\u60DCqual;\u6250ble\u0300CDLRUV\u0363\u0372\u0382\u03CF\u03E2\u03F8ontourIntegra\xEC\u0239o\u0274\u0379\0\0\u037B\xBB\u0349nArrow;\u61D3\u0100eo\u0387\u03A4ft\u0180ART\u0390\u0396\u03A1rrow;\u61D0ightArrow;\u61D4e\xE5\u02CAng\u0100LR\u03AB\u03C4eft\u0100AR\u03B3\u03B9rrow;\u67F8ightArrow;\u67FAightArrow;\u67F9ight\u0100AT\u03D8\u03DErrow;\u61D2ee;\u62A8p\u0241\u03E9\0\0\u03EFrrow;\u61D1ownArrow;\u61D5erticalBar;\u6225n\u0300ABLRTa\u0412\u042A\u0430\u045E\u047F\u037Crrow\u0180;BU\u041D\u041E\u0422\u6193ar;\u6913pArrow;\u61F5reve;\u4311eft\u02D2\u043A\0\u0446\0\u0450ightVector;\u6950eeVector;\u695Eector\u0100;B\u0459\u045A\u61BDar;\u6956ight\u01D4\u0467\0\u0471eeVector;\u695Fector\u0100;B\u047A\u047B\u61C1ar;\u6957ee\u0100;A\u0486\u0487\u62A4rrow;\u61A7\u0100ct\u0492\u0497r;\uC000\u{1D49F}rok;\u4110\u0800NTacdfglmopqstux\u04BD\u04C0\u04C4\u04CB\u04DE\u04E2\u04E7\u04EE\u04F5\u0521\u052F\u0536\u0552\u055D\u0560\u0565G;\u414AH\u803B\xD0\u40D0cute\u803B\xC9\u40C9\u0180aiy\u04D2\u04D7\u04DCron;\u411Arc\u803B\xCA\u40CA;\u442Dot;\u4116r;\uC000\u{1D508}rave\u803B\xC8\u40C8ement;\u6208\u0100ap\u04FA\u04FEcr;\u4112ty\u0253\u0506\0\0\u0512mallSquare;\u65FBerySmallSquare;\u65AB\u0100gp\u0526\u052Aon;\u4118f;\uC000\u{1D53C}silon;\u4395u\u0100ai\u053C\u0549l\u0100;T\u0542\u0543\u6A75ilde;\u6242librium;\u61CC\u0100ci\u0557\u055Ar;\u6130m;\u6A73a;\u4397ml\u803B\xCB\u40CB\u0100ip\u056A\u056Fsts;\u6203onentialE;\u6147\u0280cfios\u0585\u0588\u058D\u05B2\u05CCy;\u4424r;\uC000\u{1D509}lled\u0253\u0597\0\0\u05A3mallSquare;\u65FCerySmallSquare;\u65AA\u0370\u05BA\0\u05BF\0\0\u05C4f;\uC000\u{1D53D}All;\u6200riertrf;\u6131c\xF2\u05CB\u0600JTabcdfgorst\u05E8\u05EC\u05EF\u05FA\u0600\u0612\u0616\u061B\u061D\u0623\u066C\u0672cy;\u4403\u803B>\u403Emma\u0100;d\u05F7\u05F8\u4393;\u43DCreve;\u411E\u0180eiy\u0607\u060C\u0610dil;\u4122rc;\u411C;\u4413ot;\u4120r;\uC000\u{1D50A};\u62D9pf;\uC000\u{1D53E}eater\u0300EFGLST\u0635\u0644\u064E\u0656\u065B\u0666qual\u0100;L\u063E\u063F\u6265ess;\u62DBullEqual;\u6267reater;\u6AA2ess;\u6277lantEqual;\u6A7Eilde;\u6273cr;\uC000\u{1D4A2};\u626B\u0400Aacfiosu\u0685\u068B\u0696\u069B\u069E\u06AA\u06BE\u06CARDcy;\u442A\u0100ct\u0690\u0694ek;\u42C7;\u405Eirc;\u4124r;\u610ClbertSpace;\u610B\u01F0\u06AF\0\u06B2f;\u610DizontalLine;\u6500\u0100ct\u06C3\u06C5\xF2\u06A9rok;\u4126mp\u0144\u06D0\u06D8ownHum\xF0\u012Fqual;\u624F\u0700EJOacdfgmnostu\u06FA\u06FE\u0703\u0707\u070E\u071A\u071E\u0721\u0728\u0744\u0778\u078B\u078F\u0795cy;\u4415lig;\u4132cy;\u4401cute\u803B\xCD\u40CD\u0100iy\u0713\u0718rc\u803B\xCE\u40CE;\u4418ot;\u4130r;\u6111rave\u803B\xCC\u40CC\u0180;ap\u0720\u072F\u073F\u0100cg\u0734\u0737r;\u412AinaryI;\u6148lie\xF3\u03DD\u01F4\u0749\0\u0762\u0100;e\u074D\u074E\u622C\u0100gr\u0753\u0758ral;\u622Bsection;\u62C2isible\u0100CT\u076C\u0772omma;\u6063imes;\u6062\u0180gpt\u077F\u0783\u0788on;\u412Ef;\uC000\u{1D540}a;\u4399cr;\u6110ilde;\u4128\u01EB\u079A\0\u079Ecy;\u4406l\u803B\xCF\u40CF\u0280cfosu\u07AC\u07B7\u07BC\u07C2\u07D0\u0100iy\u07B1\u07B5rc;\u4134;\u4419r;\uC000\u{1D50D}pf;\uC000\u{1D541}\u01E3\u07C7\0\u07CCr;\uC000\u{1D4A5}rcy;\u4408kcy;\u4404\u0380HJacfos\u07E4\u07E8\u07EC\u07F1\u07FD\u0802\u0808cy;\u4425cy;\u440Cppa;\u439A\u0100ey\u07F6\u07FBdil;\u4136;\u441Ar;\uC000\u{1D50E}pf;\uC000\u{1D542}cr;\uC000\u{1D4A6}\u0580JTaceflmost\u0825\u0829\u082C\u0850\u0863\u09B3\u09B8\u09C7\u09CD\u0A37\u0A47cy;\u4409\u803B<\u403C\u0280cmnpr\u0837\u083C\u0841\u0844\u084Dute;\u4139bda;\u439Bg;\u67EAlacetrf;\u6112r;\u619E\u0180aey\u0857\u085C\u0861ron;\u413Ddil;\u413B;\u441B\u0100fs\u0868\u0970t\u0500ACDFRTUVar\u087E\u08A9\u08B1\u08E0\u08E6\u08FC\u092F\u095B\u0390\u096A\u0100nr\u0883\u088FgleBracket;\u67E8row\u0180;BR\u0899\u089A\u089E\u6190ar;\u61E4ightArrow;\u61C6eiling;\u6308o\u01F5\u08B7\0\u08C3bleBracket;\u67E6n\u01D4\u08C8\0\u08D2eeVector;\u6961ector\u0100;B\u08DB\u08DC\u61C3ar;\u6959loor;\u630Aight\u0100AV\u08EF\u08F5rrow;\u6194ector;\u694E\u0100er\u0901\u0917e\u0180;AV\u0909\u090A\u0910\u62A3rrow;\u61A4ector;\u695Aiangle\u0180;BE\u0924\u0925\u0929\u62B2ar;\u69CFqual;\u62B4p\u0180DTV\u0937\u0942\u094CownVector;\u6951eeVector;\u6960ector\u0100;B\u0956\u0957\u61BFar;\u6958ector\u0100;B\u0965\u0966\u61BCar;\u6952ight\xE1\u039Cs\u0300EFGLST\u097E\u098B\u0995\u099D\u09A2\u09ADqualGreater;\u62DAullEqual;\u6266reater;\u6276ess;\u6AA1lantEqual;\u6A7Dilde;\u6272r;\uC000\u{1D50F}\u0100;e\u09BD\u09BE\u62D8ftarrow;\u61DAidot;\u413F\u0180npw\u09D4\u0A16\u0A1Bg\u0200LRlr\u09DE\u09F7\u0A02\u0A10eft\u0100AR\u09E6\u09ECrrow;\u67F5ightArrow;\u67F7ightArrow;\u67F6eft\u0100ar\u03B3\u0A0Aight\xE1\u03BFight\xE1\u03CAf;\uC000\u{1D543}er\u0100LR\u0A22\u0A2CeftArrow;\u6199ightArrow;\u6198\u0180cht\u0A3E\u0A40\u0A42\xF2\u084C;\u61B0rok;\u4141;\u626A\u0400acefiosu\u0A5A\u0A5D\u0A60\u0A77\u0A7C\u0A85\u0A8B\u0A8Ep;\u6905y;\u441C\u0100dl\u0A65\u0A6FiumSpace;\u605Flintrf;\u6133r;\uC000\u{1D510}nusPlus;\u6213pf;\uC000\u{1D544}c\xF2\u0A76;\u439C\u0480Jacefostu\u0AA3\u0AA7\u0AAD\u0AC0\u0B14\u0B19\u0D91\u0D97\u0D9Ecy;\u440Acute;\u4143\u0180aey\u0AB4\u0AB9\u0ABEron;\u4147dil;\u4145;\u441D\u0180gsw\u0AC7\u0AF0\u0B0Eative\u0180MTV\u0AD3\u0ADF\u0AE8ediumSpace;\u600Bhi\u0100cn\u0AE6\u0AD8\xEB\u0AD9eryThi\xEE\u0AD9ted\u0100GL\u0AF8\u0B06reaterGreate\xF2\u0673essLes\xF3\u0A48Line;\u400Ar;\uC000\u{1D511}\u0200Bnpt\u0B22\u0B28\u0B37\u0B3Areak;\u6060BreakingSpace;\u40A0f;\u6115\u0680;CDEGHLNPRSTV\u0B55\u0B56\u0B6A\u0B7C\u0BA1\u0BEB\u0C04\u0C5E\u0C84\u0CA6\u0CD8\u0D61\u0D85\u6AEC\u0100ou\u0B5B\u0B64ngruent;\u6262pCap;\u626DoubleVerticalBar;\u6226\u0180lqx\u0B83\u0B8A\u0B9Bement;\u6209ual\u0100;T\u0B92\u0B93\u6260ilde;\uC000\u2242\u0338ists;\u6204reater\u0380;EFGLST\u0BB6\u0BB7\u0BBD\u0BC9\u0BD3\u0BD8\u0BE5\u626Fqual;\u6271ullEqual;\uC000\u2267\u0338reater;\uC000\u226B\u0338ess;\u6279lantEqual;\uC000\u2A7E\u0338ilde;\u6275ump\u0144\u0BF2\u0BFDownHump;\uC000\u224E\u0338qual;\uC000\u224F\u0338e\u0100fs\u0C0A\u0C27tTriangle\u0180;BE\u0C1A\u0C1B\u0C21\u62EAar;\uC000\u29CF\u0338qual;\u62ECs\u0300;EGLST\u0C35\u0C36\u0C3C\u0C44\u0C4B\u0C58\u626Equal;\u6270reater;\u6278ess;\uC000\u226A\u0338lantEqual;\uC000\u2A7D\u0338ilde;\u6274ested\u0100GL\u0C68\u0C79reaterGreater;\uC000\u2AA2\u0338essLess;\uC000\u2AA1\u0338recedes\u0180;ES\u0C92\u0C93\u0C9B\u6280qual;\uC000\u2AAF\u0338lantEqual;\u62E0\u0100ei\u0CAB\u0CB9verseElement;\u620CghtTriangle\u0180;BE\u0CCB\u0CCC\u0CD2\u62EBar;\uC000\u29D0\u0338qual;\u62ED\u0100qu\u0CDD\u0D0CuareSu\u0100bp\u0CE8\u0CF9set\u0100;E\u0CF0\u0CF3\uC000\u228F\u0338qual;\u62E2erset\u0100;E\u0D03\u0D06\uC000\u2290\u0338qual;\u62E3\u0180bcp\u0D13\u0D24\u0D4Eset\u0100;E\u0D1B\u0D1E\uC000\u2282\u20D2qual;\u6288ceeds\u0200;EST\u0D32\u0D33\u0D3B\u0D46\u6281qual;\uC000\u2AB0\u0338lantEqual;\u62E1ilde;\uC000\u227F\u0338erset\u0100;E\u0D58\u0D5B\uC000\u2283\u20D2qual;\u6289ilde\u0200;EFT\u0D6E\u0D6F\u0D75\u0D7F\u6241qual;\u6244ullEqual;\u6247ilde;\u6249erticalBar;\u6224cr;\uC000\u{1D4A9}ilde\u803B\xD1\u40D1;\u439D\u0700Eacdfgmoprstuv\u0DBD\u0DC2\u0DC9\u0DD5\u0DDB\u0DE0\u0DE7\u0DFC\u0E02\u0E20\u0E22\u0E32\u0E3F\u0E44lig;\u4152cute\u803B\xD3\u40D3\u0100iy\u0DCE\u0DD3rc\u803B\xD4\u40D4;\u441Eblac;\u4150r;\uC000\u{1D512}rave\u803B\xD2\u40D2\u0180aei\u0DEE\u0DF2\u0DF6cr;\u414Cga;\u43A9cron;\u439Fpf;\uC000\u{1D546}enCurly\u0100DQ\u0E0E\u0E1AoubleQuote;\u601Cuote;\u6018;\u6A54\u0100cl\u0E27\u0E2Cr;\uC000\u{1D4AA}ash\u803B\xD8\u40D8i\u016C\u0E37\u0E3Cde\u803B\xD5\u40D5es;\u6A37ml\u803B\xD6\u40D6er\u0100BP\u0E4B\u0E60\u0100ar\u0E50\u0E53r;\u603Eac\u0100ek\u0E5A\u0E5C;\u63DEet;\u63B4arenthesis;\u63DC\u0480acfhilors\u0E7F\u0E87\u0E8A\u0E8F\u0E92\u0E94\u0E9D\u0EB0\u0EFCrtialD;\u6202y;\u441Fr;\uC000\u{1D513}i;\u43A6;\u43A0usMinus;\u40B1\u0100ip\u0EA2\u0EADncareplan\xE5\u069Df;\u6119\u0200;eio\u0EB9\u0EBA\u0EE0\u0EE4\u6ABBcedes\u0200;EST\u0EC8\u0EC9\u0ECF\u0EDA\u627Aqual;\u6AAFlantEqual;\u627Cilde;\u627Eme;\u6033\u0100dp\u0EE9\u0EEEuct;\u620Fortion\u0100;a\u0225\u0EF9l;\u621D\u0100ci\u0F01\u0F06r;\uC000\u{1D4AB};\u43A8\u0200Ufos\u0F11\u0F16\u0F1B\u0F1FOT\u803B"\u4022r;\uC000\u{1D514}pf;\u611Acr;\uC000\u{1D4AC}\u0600BEacefhiorsu\u0F3E\u0F43\u0F47\u0F60\u0F73\u0FA7\u0FAA\u0FAD\u1096\u10A9\u10B4\u10BEarr;\u6910G\u803B\xAE\u40AE\u0180cnr\u0F4E\u0F53\u0F56ute;\u4154g;\u67EBr\u0100;t\u0F5C\u0F5D\u61A0l;\u6916\u0180aey\u0F67\u0F6C\u0F71ron;\u4158dil;\u4156;\u4420\u0100;v\u0F78\u0F79\u611Cerse\u0100EU\u0F82\u0F99\u0100lq\u0F87\u0F8Eement;\u620Builibrium;\u61CBpEquilibrium;\u696Fr\xBB\u0F79o;\u43A1ght\u0400ACDFTUVa\u0FC1\u0FEB\u0FF3\u1022\u1028\u105B\u1087\u03D8\u0100nr\u0FC6\u0FD2gleBracket;\u67E9row\u0180;BL\u0FDC\u0FDD\u0FE1\u6192ar;\u61E5eftArrow;\u61C4eiling;\u6309o\u01F5\u0FF9\0\u1005bleBracket;\u67E7n\u01D4\u100A\0\u1014eeVector;\u695Dector\u0100;B\u101D\u101E\u61C2ar;\u6955loor;\u630B\u0100er\u102D\u1043e\u0180;AV\u1035\u1036\u103C\u62A2rrow;\u61A6ector;\u695Biangle\u0180;BE\u1050\u1051\u1055\u62B3ar;\u69D0qual;\u62B5p\u0180DTV\u1063\u106E\u1078ownVector;\u694FeeVector;\u695Cector\u0100;B\u1082\u1083\u61BEar;\u6954ector\u0100;B\u1091\u1092\u61C0ar;\u6953\u0100pu\u109B\u109Ef;\u611DndImplies;\u6970ightarrow;\u61DB\u0100ch\u10B9\u10BCr;\u611B;\u61B1leDelayed;\u69F4\u0680HOacfhimoqstu\u10E4\u10F1\u10F7\u10FD\u1119\u111E\u1151\u1156\u1161\u1167\u11B5\u11BB\u11BF\u0100Cc\u10E9\u10EEHcy;\u4429y;\u4428FTcy;\u442Ccute;\u415A\u0280;aeiy\u1108\u1109\u110E\u1113\u1117\u6ABCron;\u4160dil;\u415Erc;\u415C;\u4421r;\uC000\u{1D516}ort\u0200DLRU\u112A\u1134\u113E\u1149ownArrow\xBB\u041EeftArrow\xBB\u089AightArrow\xBB\u0FDDpArrow;\u6191gma;\u43A3allCircle;\u6218pf;\uC000\u{1D54A}\u0272\u116D\0\0\u1170t;\u621Aare\u0200;ISU\u117B\u117C\u1189\u11AF\u65A1ntersection;\u6293u\u0100bp\u118F\u119Eset\u0100;E\u1197\u1198\u628Fqual;\u6291erset\u0100;E\u11A8\u11A9\u6290qual;\u6292nion;\u6294cr;\uC000\u{1D4AE}ar;\u62C6\u0200bcmp\u11C8\u11DB\u1209\u120B\u0100;s\u11CD\u11CE\u62D0et\u0100;E\u11CD\u11D5qual;\u6286\u0100ch\u11E0\u1205eeds\u0200;EST\u11ED\u11EE\u11F4\u11FF\u627Bqual;\u6AB0lantEqual;\u627Dilde;\u627FTh\xE1\u0F8C;\u6211\u0180;es\u1212\u1213\u1223\u62D1rset\u0100;E\u121C\u121D\u6283qual;\u6287et\xBB\u1213\u0580HRSacfhiors\u123E\u1244\u1249\u1255\u125E\u1271\u1276\u129F\u12C2\u12C8\u12D1ORN\u803B\xDE\u40DEADE;\u6122\u0100Hc\u124E\u1252cy;\u440By;\u4426\u0100bu\u125A\u125C;\u4009;\u43A4\u0180aey\u1265\u126A\u126Fron;\u4164dil;\u4162;\u4422r;\uC000\u{1D517}\u0100ei\u127B\u1289\u01F2\u1280\0\u1287efore;\u6234a;\u4398\u0100cn\u128E\u1298kSpace;\uC000\u205F\u200ASpace;\u6009lde\u0200;EFT\u12AB\u12AC\u12B2\u12BC\u623Cqual;\u6243ullEqual;\u6245ilde;\u6248pf;\uC000\u{1D54B}ipleDot;\u60DB\u0100ct\u12D6\u12DBr;\uC000\u{1D4AF}rok;\u4166\u0AE1\u12F7\u130E\u131A\u1326\0\u132C\u1331\0\0\0\0\0\u1338\u133D\u1377\u1385\0\u13FF\u1404\u140A\u1410\u0100cr\u12FB\u1301ute\u803B\xDA\u40DAr\u0100;o\u1307\u1308\u619Fcir;\u6949r\u01E3\u1313\0\u1316y;\u440Eve;\u416C\u0100iy\u131E\u1323rc\u803B\xDB\u40DB;\u4423blac;\u4170r;\uC000\u{1D518}rave\u803B\xD9\u40D9acr;\u416A\u0100di\u1341\u1369er\u0100BP\u1348\u135D\u0100ar\u134D\u1350r;\u405Fac\u0100ek\u1357\u1359;\u63DFet;\u63B5arenthesis;\u63DDon\u0100;P\u1370\u1371\u62C3lus;\u628E\u0100gp\u137B\u137Fon;\u4172f;\uC000\u{1D54C}\u0400ADETadps\u1395\u13AE\u13B8\u13C4\u03E8\u13D2\u13D7\u13F3rrow\u0180;BD\u1150\u13A0\u13A4ar;\u6912ownArrow;\u61C5ownArrow;\u6195quilibrium;\u696Eee\u0100;A\u13CB\u13CC\u62A5rrow;\u61A5own\xE1\u03F3er\u0100LR\u13DE\u13E8eftArrow;\u6196ightArrow;\u6197i\u0100;l\u13F9\u13FA\u43D2on;\u43A5ing;\u416Ecr;\uC000\u{1D4B0}ilde;\u4168ml\u803B\xDC\u40DC\u0480Dbcdefosv\u1427\u142C\u1430\u1433\u143E\u1485\u148A\u1490\u1496ash;\u62ABar;\u6AEBy;\u4412ash\u0100;l\u143B\u143C\u62A9;\u6AE6\u0100er\u1443\u1445;\u62C1\u0180bty\u144C\u1450\u147Aar;\u6016\u0100;i\u144F\u1455cal\u0200BLST\u1461\u1465\u146A\u1474ar;\u6223ine;\u407Ceparator;\u6758ilde;\u6240ThinSpace;\u600Ar;\uC000\u{1D519}pf;\uC000\u{1D54D}cr;\uC000\u{1D4B1}dash;\u62AA\u0280cefos\u14A7\u14AC\u14B1\u14B6\u14BCirc;\u4174dge;\u62C0r;\uC000\u{1D51A}pf;\uC000\u{1D54E}cr;\uC000\u{1D4B2}\u0200fios\u14CB\u14D0\u14D2\u14D8r;\uC000\u{1D51B};\u439Epf;\uC000\u{1D54F}cr;\uC000\u{1D4B3}\u0480AIUacfosu\u14F1\u14F5\u14F9\u14FD\u1504\u150F\u1514\u151A\u1520cy;\u442Fcy;\u4407cy;\u442Ecute\u803B\xDD\u40DD\u0100iy\u1509\u150Drc;\u4176;\u442Br;\uC000\u{1D51C}pf;\uC000\u{1D550}cr;\uC000\u{1D4B4}ml;\u4178\u0400Hacdefos\u1535\u1539\u153F\u154B\u154F\u155D\u1560\u1564cy;\u4416cute;\u4179\u0100ay\u1544\u1549ron;\u417D;\u4417ot;\u417B\u01F2\u1554\0\u155BoWidt\xE8\u0AD9a;\u4396r;\u6128pf;\u6124cr;\uC000\u{1D4B5}\u0BE1\u1583\u158A\u1590\0\u15B0\u15B6\u15BF\0\0\0\0\u15C6\u15DB\u15EB\u165F\u166D\0\u1695\u169B\u16B2\u16B9\0\u16BEcute\u803B\xE1\u40E1reve;\u4103\u0300;Ediuy\u159C\u159D\u15A1\u15A3\u15A8\u15AD\u623E;\uC000\u223E\u0333;\u623Frc\u803B\xE2\u40E2te\u80BB\xB4\u0306;\u4430lig\u803B\xE6\u40E6\u0100;r\xB2\u15BA;\uC000\u{1D51E}rave\u803B\xE0\u40E0\u0100ep\u15CA\u15D6\u0100fp\u15CF\u15D4sym;\u6135\xE8\u15D3ha;\u43B1\u0100ap\u15DFc\u0100cl\u15E4\u15E7r;\u4101g;\u6A3F\u0264\u15F0\0\0\u160A\u0280;adsv\u15FA\u15FB\u15FF\u1601\u1607\u6227nd;\u6A55;\u6A5Clope;\u6A58;\u6A5A\u0380;elmrsz\u1618\u1619\u161B\u161E\u163F\u164F\u1659\u6220;\u69A4e\xBB\u1619sd\u0100;a\u1625\u1626\u6221\u0461\u1630\u1632\u1634\u1636\u1638\u163A\u163C\u163E;\u69A8;\u69A9;\u69AA;\u69AB;\u69AC;\u69AD;\u69AE;\u69AFt\u0100;v\u1645\u1646\u621Fb\u0100;d\u164C\u164D\u62BE;\u699D\u0100pt\u1654\u1657h;\u6222\xBB\xB9arr;\u637C\u0100gp\u1663\u1667on;\u4105f;\uC000\u{1D552}\u0380;Eaeiop\u12C1\u167B\u167D\u1682\u1684\u1687\u168A;\u6A70cir;\u6A6F;\u624Ad;\u624Bs;\u4027rox\u0100;e\u12C1\u1692\xF1\u1683ing\u803B\xE5\u40E5\u0180cty\u16A1\u16A6\u16A8r;\uC000\u{1D4B6};\u402Amp\u0100;e\u12C1\u16AF\xF1\u0288ilde\u803B\xE3\u40E3ml\u803B\xE4\u40E4\u0100ci\u16C2\u16C8onin\xF4\u0272nt;\u6A11\u0800Nabcdefiklnoprsu\u16ED\u16F1\u1730\u173C\u1743\u1748\u1778\u177D\u17E0\u17E6\u1839\u1850\u170D\u193D\u1948\u1970ot;\u6AED\u0100cr\u16F6\u171Ek\u0200ceps\u1700\u1705\u170D\u1713ong;\u624Cpsilon;\u43F6rime;\u6035im\u0100;e\u171A\u171B\u623Dq;\u62CD\u0176\u1722\u1726ee;\u62BDed\u0100;g\u172C\u172D\u6305e\xBB\u172Drk\u0100;t\u135C\u1737brk;\u63B6\u0100oy\u1701\u1741;\u4431quo;\u601E\u0280cmprt\u1753\u175B\u1761\u1764\u1768aus\u0100;e\u010A\u0109ptyv;\u69B0s\xE9\u170Cno\xF5\u0113\u0180ahw\u176F\u1771\u1773;\u43B2;\u6136een;\u626Cr;\uC000\u{1D51F}g\u0380costuvw\u178D\u179D\u17B3\u17C1\u17D5\u17DB\u17DE\u0180aiu\u1794\u1796\u179A\xF0\u0760rc;\u65EFp\xBB\u1371\u0180dpt\u17A4\u17A8\u17ADot;\u6A00lus;\u6A01imes;\u6A02\u0271\u17B9\0\0\u17BEcup;\u6A06ar;\u6605riangle\u0100du\u17CD\u17D2own;\u65BDp;\u65B3plus;\u6A04e\xE5\u1444\xE5\u14ADarow;\u690D\u0180ako\u17ED\u1826\u1835\u0100cn\u17F2\u1823k\u0180lst\u17FA\u05AB\u1802ozenge;\u69EBriangle\u0200;dlr\u1812\u1813\u1818\u181D\u65B4own;\u65BEeft;\u65C2ight;\u65B8k;\u6423\u01B1\u182B\0\u1833\u01B2\u182F\0\u1831;\u6592;\u65914;\u6593ck;\u6588\u0100eo\u183E\u184D\u0100;q\u1843\u1846\uC000=\u20E5uiv;\uC000\u2261\u20E5t;\u6310\u0200ptwx\u1859\u185E\u1867\u186Cf;\uC000\u{1D553}\u0100;t\u13CB\u1863om\xBB\u13CCtie;\u62C8\u0600DHUVbdhmptuv\u1885\u1896\u18AA\u18BB\u18D7\u18DB\u18EC\u18FF\u1905\u190A\u1910\u1921\u0200LRlr\u188E\u1890\u1892\u1894;\u6557;\u6554;\u6556;\u6553\u0280;DUdu\u18A1\u18A2\u18A4\u18A6\u18A8\u6550;\u6566;\u6569;\u6564;\u6567\u0200LRlr\u18B3\u18B5\u18B7\u18B9;\u655D;\u655A;\u655C;\u6559\u0380;HLRhlr\u18CA\u18CB\u18CD\u18CF\u18D1\u18D3\u18D5\u6551;\u656C;\u6563;\u6560;\u656B;\u6562;\u655Fox;\u69C9\u0200LRlr\u18E4\u18E6\u18E8\u18EA;\u6555;\u6552;\u6510;\u650C\u0280;DUdu\u06BD\u18F7\u18F9\u18FB\u18FD;\u6565;\u6568;\u652C;\u6534inus;\u629Flus;\u629Eimes;\u62A0\u0200LRlr\u1919\u191B\u191D\u191F;\u655B;\u6558;\u6518;\u6514\u0380;HLRhlr\u1930\u1931\u1933\u1935\u1937\u1939\u193B\u6502;\u656A;\u6561;\u655E;\u653C;\u6524;\u651C\u0100ev\u0123\u1942bar\u803B\xA6\u40A6\u0200ceio\u1951\u1956\u195A\u1960r;\uC000\u{1D4B7}mi;\u604Fm\u0100;e\u171A\u171Cl\u0180;bh\u1968\u1969\u196B\u405C;\u69C5sub;\u67C8\u016C\u1974\u197El\u0100;e\u1979\u197A\u6022t\xBB\u197Ap\u0180;Ee\u012F\u1985\u1987;\u6AAE\u0100;q\u06DC\u06DB\u0CE1\u19A7\0\u19E8\u1A11\u1A15\u1A32\0\u1A37\u1A50\0\0\u1AB4\0\0\u1AC1\0\0\u1B21\u1B2E\u1B4D\u1B52\0\u1BFD\0\u1C0C\u0180cpr\u19AD\u19B2\u19DDute;\u4107\u0300;abcds\u19BF\u19C0\u19C4\u19CA\u19D5\u19D9\u6229nd;\u6A44rcup;\u6A49\u0100au\u19CF\u19D2p;\u6A4Bp;\u6A47ot;\u6A40;\uC000\u2229\uFE00\u0100eo\u19E2\u19E5t;\u6041\xEE\u0693\u0200aeiu\u19F0\u19FB\u1A01\u1A05\u01F0\u19F5\0\u19F8s;\u6A4Don;\u410Ddil\u803B\xE7\u40E7rc;\u4109ps\u0100;s\u1A0C\u1A0D\u6A4Cm;\u6A50ot;\u410B\u0180dmn\u1A1B\u1A20\u1A26il\u80BB\xB8\u01ADptyv;\u69B2t\u8100\xA2;e\u1A2D\u1A2E\u40A2r\xE4\u01B2r;\uC000\u{1D520}\u0180cei\u1A3D\u1A40\u1A4Dy;\u4447ck\u0100;m\u1A47\u1A48\u6713ark\xBB\u1A48;\u43C7r\u0380;Ecefms\u1A5F\u1A60\u1A62\u1A6B\u1AA4\u1AAA\u1AAE\u65CB;\u69C3\u0180;el\u1A69\u1A6A\u1A6D\u42C6q;\u6257e\u0261\u1A74\0\0\u1A88rrow\u0100lr\u1A7C\u1A81eft;\u61BAight;\u61BB\u0280RSacd\u1A92\u1A94\u1A96\u1A9A\u1A9F\xBB\u0F47;\u64C8st;\u629Birc;\u629Aash;\u629Dnint;\u6A10id;\u6AEFcir;\u69C2ubs\u0100;u\u1ABB\u1ABC\u6663it\xBB\u1ABC\u02EC\u1AC7\u1AD4\u1AFA\0\u1B0Aon\u0100;e\u1ACD\u1ACE\u403A\u0100;q\xC7\xC6\u026D\u1AD9\0\0\u1AE2a\u0100;t\u1ADE\u1ADF\u402C;\u4040\u0180;fl\u1AE8\u1AE9\u1AEB\u6201\xEE\u1160e\u0100mx\u1AF1\u1AF6ent\xBB\u1AE9e\xF3\u024D\u01E7\u1AFE\0\u1B07\u0100;d\u12BB\u1B02ot;\u6A6Dn\xF4\u0246\u0180fry\u1B10\u1B14\u1B17;\uC000\u{1D554}o\xE4\u0254\u8100\xA9;s\u0155\u1B1Dr;\u6117\u0100ao\u1B25\u1B29rr;\u61B5ss;\u6717\u0100cu\u1B32\u1B37r;\uC000\u{1D4B8}\u0100bp\u1B3C\u1B44\u0100;e\u1B41\u1B42\u6ACF;\u6AD1\u0100;e\u1B49\u1B4A\u6AD0;\u6AD2dot;\u62EF\u0380delprvw\u1B60\u1B6C\u1B77\u1B82\u1BAC\u1BD4\u1BF9arr\u0100lr\u1B68\u1B6A;\u6938;\u6935\u0270\u1B72\0\0\u1B75r;\u62DEc;\u62DFarr\u0100;p\u1B7F\u1B80\u61B6;\u693D\u0300;bcdos\u1B8F\u1B90\u1B96\u1BA1\u1BA5\u1BA8\u622Arcap;\u6A48\u0100au\u1B9B\u1B9Ep;\u6A46p;\u6A4Aot;\u628Dr;\u6A45;\uC000\u222A\uFE00\u0200alrv\u1BB5\u1BBF\u1BDE\u1BE3rr\u0100;m\u1BBC\u1BBD\u61B7;\u693Cy\u0180evw\u1BC7\u1BD4\u1BD8q\u0270\u1BCE\0\0\u1BD2re\xE3\u1B73u\xE3\u1B75ee;\u62CEedge;\u62CFen\u803B\xA4\u40A4earrow\u0100lr\u1BEE\u1BF3eft\xBB\u1B80ight\xBB\u1BBDe\xE4\u1BDD\u0100ci\u1C01\u1C07onin\xF4\u01F7nt;\u6231lcty;\u632D\u0980AHabcdefhijlorstuwz\u1C38\u1C3B\u1C3F\u1C5D\u1C69\u1C75\u1C8A\u1C9E\u1CAC\u1CB7\u1CFB\u1CFF\u1D0D\u1D7B\u1D91\u1DAB\u1DBB\u1DC6\u1DCDr\xF2\u0381ar;\u6965\u0200glrs\u1C48\u1C4D\u1C52\u1C54ger;\u6020eth;\u6138\xF2\u1133h\u0100;v\u1C5A\u1C5B\u6010\xBB\u090A\u016B\u1C61\u1C67arow;\u690Fa\xE3\u0315\u0100ay\u1C6E\u1C73ron;\u410F;\u4434\u0180;ao\u0332\u1C7C\u1C84\u0100gr\u02BF\u1C81r;\u61CAtseq;\u6A77\u0180glm\u1C91\u1C94\u1C98\u803B\xB0\u40B0ta;\u43B4ptyv;\u69B1\u0100ir\u1CA3\u1CA8sht;\u697F;\uC000\u{1D521}ar\u0100lr\u1CB3\u1CB5\xBB\u08DC\xBB\u101E\u0280aegsv\u1CC2\u0378\u1CD6\u1CDC\u1CE0m\u0180;os\u0326\u1CCA\u1CD4nd\u0100;s\u0326\u1CD1uit;\u6666amma;\u43DDin;\u62F2\u0180;io\u1CE7\u1CE8\u1CF8\u40F7de\u8100\xF7;o\u1CE7\u1CF0ntimes;\u62C7n\xF8\u1CF7cy;\u4452c\u026F\u1D06\0\0\u1D0Arn;\u631Eop;\u630D\u0280lptuw\u1D18\u1D1D\u1D22\u1D49\u1D55lar;\u4024f;\uC000\u{1D555}\u0280;emps\u030B\u1D2D\u1D37\u1D3D\u1D42q\u0100;d\u0352\u1D33ot;\u6251inus;\u6238lus;\u6214quare;\u62A1blebarwedg\xE5\xFAn\u0180adh\u112E\u1D5D\u1D67ownarrow\xF3\u1C83arpoon\u0100lr\u1D72\u1D76ef\xF4\u1CB4igh\xF4\u1CB6\u0162\u1D7F\u1D85karo\xF7\u0F42\u026F\u1D8A\0\0\u1D8Ern;\u631Fop;\u630C\u0180cot\u1D98\u1DA3\u1DA6\u0100ry\u1D9D\u1DA1;\uC000\u{1D4B9};\u4455l;\u69F6rok;\u4111\u0100dr\u1DB0\u1DB4ot;\u62F1i\u0100;f\u1DBA\u1816\u65BF\u0100ah\u1DC0\u1DC3r\xF2\u0429a\xF2\u0FA6angle;\u69A6\u0100ci\u1DD2\u1DD5y;\u445Fgrarr;\u67FF\u0900Dacdefglmnopqrstux\u1E01\u1E09\u1E19\u1E38\u0578\u1E3C\u1E49\u1E61\u1E7E\u1EA5\u1EAF\u1EBD\u1EE1\u1F2A\u1F37\u1F44\u1F4E\u1F5A\u0100Do\u1E06\u1D34o\xF4\u1C89\u0100cs\u1E0E\u1E14ute\u803B\xE9\u40E9ter;\u6A6E\u0200aioy\u1E22\u1E27\u1E31\u1E36ron;\u411Br\u0100;c\u1E2D\u1E2E\u6256\u803B\xEA\u40EAlon;\u6255;\u444Dot;\u4117\u0100Dr\u1E41\u1E45ot;\u6252;\uC000\u{1D522}\u0180;rs\u1E50\u1E51\u1E57\u6A9Aave\u803B\xE8\u40E8\u0100;d\u1E5C\u1E5D\u6A96ot;\u6A98\u0200;ils\u1E6A\u1E6B\u1E72\u1E74\u6A99nters;\u63E7;\u6113\u0100;d\u1E79\u1E7A\u6A95ot;\u6A97\u0180aps\u1E85\u1E89\u1E97cr;\u4113ty\u0180;sv\u1E92\u1E93\u1E95\u6205et\xBB\u1E93p\u01001;\u1E9D\u1EA4\u0133\u1EA1\u1EA3;\u6004;\u6005\u6003\u0100gs\u1EAA\u1EAC;\u414Bp;\u6002\u0100gp\u1EB4\u1EB8on;\u4119f;\uC000\u{1D556}\u0180als\u1EC4\u1ECE\u1ED2r\u0100;s\u1ECA\u1ECB\u62D5l;\u69E3us;\u6A71i\u0180;lv\u1EDA\u1EDB\u1EDF\u43B5on\xBB\u1EDB;\u43F5\u0200csuv\u1EEA\u1EF3\u1F0B\u1F23\u0100io\u1EEF\u1E31rc\xBB\u1E2E\u0269\u1EF9\0\0\u1EFB\xED\u0548ant\u0100gl\u1F02\u1F06tr\xBB\u1E5Dess\xBB\u1E7A\u0180aei\u1F12\u1F16\u1F1Als;\u403Dst;\u625Fv\u0100;D\u0235\u1F20D;\u6A78parsl;\u69E5\u0100Da\u1F2F\u1F33ot;\u6253rr;\u6971\u0180cdi\u1F3E\u1F41\u1EF8r;\u612Fo\xF4\u0352\u0100ah\u1F49\u1F4B;\u43B7\u803B\xF0\u40F0\u0100mr\u1F53\u1F57l\u803B\xEB\u40EBo;\u60AC\u0180cip\u1F61\u1F64\u1F67l;\u4021s\xF4\u056E\u0100eo\u1F6C\u1F74ctatio\xEE\u0559nential\xE5\u0579\u09E1\u1F92\0\u1F9E\0\u1FA1\u1FA7\0\0\u1FC6\u1FCC\0\u1FD3\0\u1FE6\u1FEA\u2000\0\u2008\u205Allingdotse\xF1\u1E44y;\u4444male;\u6640\u0180ilr\u1FAD\u1FB3\u1FC1lig;\u8000\uFB03\u0269\u1FB9\0\0\u1FBDg;\u8000\uFB00ig;\u8000\uFB04;\uC000\u{1D523}lig;\u8000\uFB01lig;\uC000fj\u0180alt\u1FD9\u1FDC\u1FE1t;\u666Dig;\u8000\uFB02ns;\u65B1of;\u4192\u01F0\u1FEE\0\u1FF3f;\uC000\u{1D557}\u0100ak\u05BF\u1FF7\u0100;v\u1FFC\u1FFD\u62D4;\u6AD9artint;\u6A0D\u0100ao\u200C\u2055\u0100cs\u2011\u2052\u03B1\u201A\u2030\u2038\u2045\u2048\0\u2050\u03B2\u2022\u2025\u2027\u202A\u202C\0\u202E\u803B\xBD\u40BD;\u6153\u803B\xBC\u40BC;\u6155;\u6159;\u615B\u01B3\u2034\0\u2036;\u6154;\u6156\u02B4\u203E\u2041\0\0\u2043\u803B\xBE\u40BE;\u6157;\u615C5;\u6158\u01B6\u204C\0\u204E;\u615A;\u615D8;\u615El;\u6044wn;\u6322cr;\uC000\u{1D4BB}\u0880Eabcdefgijlnorstv\u2082\u2089\u209F\u20A5\u20B0\u20B4\u20F0\u20F5\u20FA\u20FF\u2103\u2112\u2138\u0317\u213E\u2152\u219E\u0100;l\u064D\u2087;\u6A8C\u0180cmp\u2090\u2095\u209Dute;\u41F5ma\u0100;d\u209C\u1CDA\u43B3;\u6A86reve;\u411F\u0100iy\u20AA\u20AErc;\u411D;\u4433ot;\u4121\u0200;lqs\u063E\u0642\u20BD\u20C9\u0180;qs\u063E\u064C\u20C4lan\xF4\u0665\u0200;cdl\u0665\u20D2\u20D5\u20E5c;\u6AA9ot\u0100;o\u20DC\u20DD\u6A80\u0100;l\u20E2\u20E3\u6A82;\u6A84\u0100;e\u20EA\u20ED\uC000\u22DB\uFE00s;\u6A94r;\uC000\u{1D524}\u0100;g\u0673\u061Bmel;\u6137cy;\u4453\u0200;Eaj\u065A\u210C\u210E\u2110;\u6A92;\u6AA5;\u6AA4\u0200Eaes\u211B\u211D\u2129\u2134;\u6269p\u0100;p\u2123\u2124\u6A8Arox\xBB\u2124\u0100;q\u212E\u212F\u6A88\u0100;q\u212E\u211Bim;\u62E7pf;\uC000\u{1D558}\u0100ci\u2143\u2146r;\u610Am\u0180;el\u066B\u214E\u2150;\u6A8E;\u6A90\u8300>;cdlqr\u05EE\u2160\u216A\u216E\u2173\u2179\u0100ci\u2165\u2167;\u6AA7r;\u6A7Aot;\u62D7Par;\u6995uest;\u6A7C\u0280adels\u2184\u216A\u2190\u0656\u219B\u01F0\u2189\0\u218Epro\xF8\u209Er;\u6978q\u0100lq\u063F\u2196les\xF3\u2088i\xED\u066B\u0100en\u21A3\u21ADrtneqq;\uC000\u2269\uFE00\xC5\u21AA\u0500Aabcefkosy\u21C4\u21C7\u21F1\u21F5\u21FA\u2218\u221D\u222F\u2268\u227Dr\xF2\u03A0\u0200ilmr\u21D0\u21D4\u21D7\u21DBrs\xF0\u1484f\xBB\u2024il\xF4\u06A9\u0100dr\u21E0\u21E4cy;\u444A\u0180;cw\u08F4\u21EB\u21EFir;\u6948;\u61ADar;\u610Firc;\u4125\u0180alr\u2201\u220E\u2213rts\u0100;u\u2209\u220A\u6665it\xBB\u220Alip;\u6026con;\u62B9r;\uC000\u{1D525}s\u0100ew\u2223\u2229arow;\u6925arow;\u6926\u0280amopr\u223A\u223E\u2243\u225E\u2263rr;\u61FFtht;\u623Bk\u0100lr\u2249\u2253eftarrow;\u61A9ightarrow;\u61AAf;\uC000\u{1D559}bar;\u6015\u0180clt\u226F\u2274\u2278r;\uC000\u{1D4BD}as\xE8\u21F4rok;\u4127\u0100bp\u2282\u2287ull;\u6043hen\xBB\u1C5B\u0AE1\u22A3\0\u22AA\0\u22B8\u22C5\u22CE\0\u22D5\u22F3\0\0\u22F8\u2322\u2367\u2362\u237F\0\u2386\u23AA\u23B4cute\u803B\xED\u40ED\u0180;iy\u0771\u22B0\u22B5rc\u803B\xEE\u40EE;\u4438\u0100cx\u22BC\u22BFy;\u4435cl\u803B\xA1\u40A1\u0100fr\u039F\u22C9;\uC000\u{1D526}rave\u803B\xEC\u40EC\u0200;ino\u073E\u22DD\u22E9\u22EE\u0100in\u22E2\u22E6nt;\u6A0Ct;\u622Dfin;\u69DCta;\u6129lig;\u4133\u0180aop\u22FE\u231A\u231D\u0180cgt\u2305\u2308\u2317r;\u412B\u0180elp\u071F\u230F\u2313in\xE5\u078Ear\xF4\u0720h;\u4131f;\u62B7ed;\u41B5\u0280;cfot\u04F4\u232C\u2331\u233D\u2341are;\u6105in\u0100;t\u2338\u2339\u621Eie;\u69DDdo\xF4\u2319\u0280;celp\u0757\u234C\u2350\u235B\u2361al;\u62BA\u0100gr\u2355\u2359er\xF3\u1563\xE3\u234Darhk;\u6A17rod;\u6A3C\u0200cgpt\u236F\u2372\u2376\u237By;\u4451on;\u412Ff;\uC000\u{1D55A}a;\u43B9uest\u803B\xBF\u40BF\u0100ci\u238A\u238Fr;\uC000\u{1D4BE}n\u0280;Edsv\u04F4\u239B\u239D\u23A1\u04F3;\u62F9ot;\u62F5\u0100;v\u23A6\u23A7\u62F4;\u62F3\u0100;i\u0777\u23AElde;\u4129\u01EB\u23B8\0\u23BCcy;\u4456l\u803B\xEF\u40EF\u0300cfmosu\u23CC\u23D7\u23DC\u23E1\u23E7\u23F5\u0100iy\u23D1\u23D5rc;\u4135;\u4439r;\uC000\u{1D527}ath;\u4237pf;\uC000\u{1D55B}\u01E3\u23EC\0\u23F1r;\uC000\u{1D4BF}rcy;\u4458kcy;\u4454\u0400acfghjos\u240B\u2416\u2422\u2427\u242D\u2431\u2435\u243Bppa\u0100;v\u2413\u2414\u43BA;\u43F0\u0100ey\u241B\u2420dil;\u4137;\u443Ar;\uC000\u{1D528}reen;\u4138cy;\u4445cy;\u445Cpf;\uC000\u{1D55C}cr;\uC000\u{1D4C0}\u0B80ABEHabcdefghjlmnoprstuv\u2470\u2481\u2486\u248D\u2491\u250E\u253D\u255A\u2580\u264E\u265E\u2665\u2679\u267D\u269A\u26B2\u26D8\u275D\u2768\u278B\u27C0\u2801\u2812\u0180art\u2477\u247A\u247Cr\xF2\u09C6\xF2\u0395ail;\u691Barr;\u690E\u0100;g\u0994\u248B;\u6A8Bar;\u6962\u0963\u24A5\0\u24AA\0\u24B1\0\0\0\0\0\u24B5\u24BA\0\u24C6\u24C8\u24CD\0\u24F9ute;\u413Amptyv;\u69B4ra\xEE\u084Cbda;\u43BBg\u0180;dl\u088E\u24C1\u24C3;\u6991\xE5\u088E;\u6A85uo\u803B\xAB\u40ABr\u0400;bfhlpst\u0899\u24DE\u24E6\u24E9\u24EB\u24EE\u24F1\u24F5\u0100;f\u089D\u24E3s;\u691Fs;\u691D\xEB\u2252p;\u61ABl;\u6939im;\u6973l;\u61A2\u0180;ae\u24FF\u2500\u2504\u6AABil;\u6919\u0100;s\u2509\u250A\u6AAD;\uC000\u2AAD\uFE00\u0180abr\u2515\u2519\u251Drr;\u690Crk;\u6772\u0100ak\u2522\u252Cc\u0100ek\u2528\u252A;\u407B;\u405B\u0100es\u2531\u2533;\u698Bl\u0100du\u2539\u253B;\u698F;\u698D\u0200aeuy\u2546\u254B\u2556\u2558ron;\u413E\u0100di\u2550\u2554il;\u413C\xEC\u08B0\xE2\u2529;\u443B\u0200cqrs\u2563\u2566\u256D\u257Da;\u6936uo\u0100;r\u0E19\u1746\u0100du\u2572\u2577har;\u6967shar;\u694Bh;\u61B2\u0280;fgqs\u258B\u258C\u0989\u25F3\u25FF\u6264t\u0280ahlrt\u2598\u25A4\u25B7\u25C2\u25E8rrow\u0100;t\u0899\u25A1a\xE9\u24F6arpoon\u0100du\u25AF\u25B4own\xBB\u045Ap\xBB\u0966eftarrows;\u61C7ight\u0180ahs\u25CD\u25D6\u25DErrow\u0100;s\u08F4\u08A7arpoon\xF3\u0F98quigarro\xF7\u21F0hreetimes;\u62CB\u0180;qs\u258B\u0993\u25FAlan\xF4\u09AC\u0280;cdgs\u09AC\u260A\u260D\u261D\u2628c;\u6AA8ot\u0100;o\u2614\u2615\u6A7F\u0100;r\u261A\u261B\u6A81;\u6A83\u0100;e\u2622\u2625\uC000\u22DA\uFE00s;\u6A93\u0280adegs\u2633\u2639\u263D\u2649\u264Bppro\xF8\u24C6ot;\u62D6q\u0100gq\u2643\u2645\xF4\u0989gt\xF2\u248C\xF4\u099Bi\xED\u09B2\u0180ilr\u2655\u08E1\u265Asht;\u697C;\uC000\u{1D529}\u0100;E\u099C\u2663;\u6A91\u0161\u2669\u2676r\u0100du\u25B2\u266E\u0100;l\u0965\u2673;\u696Alk;\u6584cy;\u4459\u0280;acht\u0A48\u2688\u268B\u2691\u2696r\xF2\u25C1orne\xF2\u1D08ard;\u696Bri;\u65FA\u0100io\u269F\u26A4dot;\u4140ust\u0100;a\u26AC\u26AD\u63B0che\xBB\u26AD\u0200Eaes\u26BB\u26BD\u26C9\u26D4;\u6268p\u0100;p\u26C3\u26C4\u6A89rox\xBB\u26C4\u0100;q\u26CE\u26CF\u6A87\u0100;q\u26CE\u26BBim;\u62E6\u0400abnoptwz\u26E9\u26F4\u26F7\u271A\u272F\u2741\u2747\u2750\u0100nr\u26EE\u26F1g;\u67ECr;\u61FDr\xEB\u08C1g\u0180lmr\u26FF\u270D\u2714eft\u0100ar\u09E6\u2707ight\xE1\u09F2apsto;\u67FCight\xE1\u09FDparrow\u0100lr\u2725\u2729ef\xF4\u24EDight;\u61AC\u0180afl\u2736\u2739\u273Dr;\u6985;\uC000\u{1D55D}us;\u6A2Dimes;\u6A34\u0161\u274B\u274Fst;\u6217\xE1\u134E\u0180;ef\u2757\u2758\u1800\u65CAnge\xBB\u2758ar\u0100;l\u2764\u2765\u4028t;\u6993\u0280achmt\u2773\u2776\u277C\u2785\u2787r\xF2\u08A8orne\xF2\u1D8Car\u0100;d\u0F98\u2783;\u696D;\u600Eri;\u62BF\u0300achiqt\u2798\u279D\u0A40\u27A2\u27AE\u27BBquo;\u6039r;\uC000\u{1D4C1}m\u0180;eg\u09B2\u27AA\u27AC;\u6A8D;\u6A8F\u0100bu\u252A\u27B3o\u0100;r\u0E1F\u27B9;\u601Arok;\u4142\u8400<;cdhilqr\u082B\u27D2\u2639\u27DC\u27E0\u27E5\u27EA\u27F0\u0100ci\u27D7\u27D9;\u6AA6r;\u6A79re\xE5\u25F2mes;\u62C9arr;\u6976uest;\u6A7B\u0100Pi\u27F5\u27F9ar;\u6996\u0180;ef\u2800\u092D\u181B\u65C3r\u0100du\u2807\u280Dshar;\u694Ahar;\u6966\u0100en\u2817\u2821rtneqq;\uC000\u2268\uFE00\xC5\u281E\u0700Dacdefhilnopsu\u2840\u2845\u2882\u288E\u2893\u28A0\u28A5\u28A8\u28DA\u28E2\u28E4\u0A83\u28F3\u2902Dot;\u623A\u0200clpr\u284E\u2852\u2863\u287Dr\u803B\xAF\u40AF\u0100et\u2857\u2859;\u6642\u0100;e\u285E\u285F\u6720se\xBB\u285F\u0100;s\u103B\u2868to\u0200;dlu\u103B\u2873\u2877\u287Bow\xEE\u048Cef\xF4\u090F\xF0\u13D1ker;\u65AE\u0100oy\u2887\u288Cmma;\u6A29;\u443Cash;\u6014asuredangle\xBB\u1626r;\uC000\u{1D52A}o;\u6127\u0180cdn\u28AF\u28B4\u28C9ro\u803B\xB5\u40B5\u0200;acd\u1464\u28BD\u28C0\u28C4s\xF4\u16A7ir;\u6AF0ot\u80BB\xB7\u01B5us\u0180;bd\u28D2\u1903\u28D3\u6212\u0100;u\u1D3C\u28D8;\u6A2A\u0163\u28DE\u28E1p;\u6ADB\xF2\u2212\xF0\u0A81\u0100dp\u28E9\u28EEels;\u62A7f;\uC000\u{1D55E}\u0100ct\u28F8\u28FDr;\uC000\u{1D4C2}pos\xBB\u159D\u0180;lm\u2909\u290A\u290D\u43BCtimap;\u62B8\u0C00GLRVabcdefghijlmoprstuvw\u2942\u2953\u297E\u2989\u2998\u29DA\u29E9\u2A15\u2A1A\u2A58\u2A5D\u2A83\u2A95\u2AA4\u2AA8\u2B04\u2B07\u2B44\u2B7F\u2BAE\u2C34\u2C67\u2C7C\u2CE9\u0100gt\u2947\u294B;\uC000\u22D9\u0338\u0100;v\u2950\u0BCF\uC000\u226B\u20D2\u0180elt\u295A\u2972\u2976ft\u0100ar\u2961\u2967rrow;\u61CDightarrow;\u61CE;\uC000\u22D8\u0338\u0100;v\u297B\u0C47\uC000\u226A\u20D2ightarrow;\u61CF\u0100Dd\u298E\u2993ash;\u62AFash;\u62AE\u0280bcnpt\u29A3\u29A7\u29AC\u29B1\u29CCla\xBB\u02DEute;\u4144g;\uC000\u2220\u20D2\u0280;Eiop\u0D84\u29BC\u29C0\u29C5\u29C8;\uC000\u2A70\u0338d;\uC000\u224B\u0338s;\u4149ro\xF8\u0D84ur\u0100;a\u29D3\u29D4\u666El\u0100;s\u29D3\u0B38\u01F3\u29DF\0\u29E3p\u80BB\xA0\u0B37mp\u0100;e\u0BF9\u0C00\u0280aeouy\u29F4\u29FE\u2A03\u2A10\u2A13\u01F0\u29F9\0\u29FB;\u6A43on;\u4148dil;\u4146ng\u0100;d\u0D7E\u2A0Aot;\uC000\u2A6D\u0338p;\u6A42;\u443Dash;\u6013\u0380;Aadqsx\u0B92\u2A29\u2A2D\u2A3B\u2A41\u2A45\u2A50rr;\u61D7r\u0100hr\u2A33\u2A36k;\u6924\u0100;o\u13F2\u13F0ot;\uC000\u2250\u0338ui\xF6\u0B63\u0100ei\u2A4A\u2A4Ear;\u6928\xED\u0B98ist\u0100;s\u0BA0\u0B9Fr;\uC000\u{1D52B}\u0200Eest\u0BC5\u2A66\u2A79\u2A7C\u0180;qs\u0BBC\u2A6D\u0BE1\u0180;qs\u0BBC\u0BC5\u2A74lan\xF4\u0BE2i\xED\u0BEA\u0100;r\u0BB6\u2A81\xBB\u0BB7\u0180Aap\u2A8A\u2A8D\u2A91r\xF2\u2971rr;\u61AEar;\u6AF2\u0180;sv\u0F8D\u2A9C\u0F8C\u0100;d\u2AA1\u2AA2\u62FC;\u62FAcy;\u445A\u0380AEadest\u2AB7\u2ABA\u2ABE\u2AC2\u2AC5\u2AF6\u2AF9r\xF2\u2966;\uC000\u2266\u0338rr;\u619Ar;\u6025\u0200;fqs\u0C3B\u2ACE\u2AE3\u2AEFt\u0100ar\u2AD4\u2AD9rro\xF7\u2AC1ightarro\xF7\u2A90\u0180;qs\u0C3B\u2ABA\u2AEAlan\xF4\u0C55\u0100;s\u0C55\u2AF4\xBB\u0C36i\xED\u0C5D\u0100;r\u0C35\u2AFEi\u0100;e\u0C1A\u0C25i\xE4\u0D90\u0100pt\u2B0C\u2B11f;\uC000\u{1D55F}\u8180\xAC;in\u2B19\u2B1A\u2B36\u40ACn\u0200;Edv\u0B89\u2B24\u2B28\u2B2E;\uC000\u22F9\u0338ot;\uC000\u22F5\u0338\u01E1\u0B89\u2B33\u2B35;\u62F7;\u62F6i\u0100;v\u0CB8\u2B3C\u01E1\u0CB8\u2B41\u2B43;\u62FE;\u62FD\u0180aor\u2B4B\u2B63\u2B69r\u0200;ast\u0B7B\u2B55\u2B5A\u2B5Flle\xEC\u0B7Bl;\uC000\u2AFD\u20E5;\uC000\u2202\u0338lint;\u6A14\u0180;ce\u0C92\u2B70\u2B73u\xE5\u0CA5\u0100;c\u0C98\u2B78\u0100;e\u0C92\u2B7D\xF1\u0C98\u0200Aait\u2B88\u2B8B\u2B9D\u2BA7r\xF2\u2988rr\u0180;cw\u2B94\u2B95\u2B99\u619B;\uC000\u2933\u0338;\uC000\u219D\u0338ghtarrow\xBB\u2B95ri\u0100;e\u0CCB\u0CD6\u0380chimpqu\u2BBD\u2BCD\u2BD9\u2B04\u0B78\u2BE4\u2BEF\u0200;cer\u0D32\u2BC6\u0D37\u2BC9u\xE5\u0D45;\uC000\u{1D4C3}ort\u026D\u2B05\0\0\u2BD6ar\xE1\u2B56m\u0100;e\u0D6E\u2BDF\u0100;q\u0D74\u0D73su\u0100bp\u2BEB\u2BED\xE5\u0CF8\xE5\u0D0B\u0180bcp\u2BF6\u2C11\u2C19\u0200;Ees\u2BFF\u2C00\u0D22\u2C04\u6284;\uC000\u2AC5\u0338et\u0100;e\u0D1B\u2C0Bq\u0100;q\u0D23\u2C00c\u0100;e\u0D32\u2C17\xF1\u0D38\u0200;Ees\u2C22\u2C23\u0D5F\u2C27\u6285;\uC000\u2AC6\u0338et\u0100;e\u0D58\u2C2Eq\u0100;q\u0D60\u2C23\u0200gilr\u2C3D\u2C3F\u2C45\u2C47\xEC\u0BD7lde\u803B\xF1\u40F1\xE7\u0C43iangle\u0100lr\u2C52\u2C5Ceft\u0100;e\u0C1A\u2C5A\xF1\u0C26ight\u0100;e\u0CCB\u2C65\xF1\u0CD7\u0100;m\u2C6C\u2C6D\u43BD\u0180;es\u2C74\u2C75\u2C79\u4023ro;\u6116p;\u6007\u0480DHadgilrs\u2C8F\u2C94\u2C99\u2C9E\u2CA3\u2CB0\u2CB6\u2CD3\u2CE3ash;\u62ADarr;\u6904p;\uC000\u224D\u20D2ash;\u62AC\u0100et\u2CA8\u2CAC;\uC000\u2265\u20D2;\uC000>\u20D2nfin;\u69DE\u0180Aet\u2CBD\u2CC1\u2CC5rr;\u6902;\uC000\u2264\u20D2\u0100;r\u2CCA\u2CCD\uC000<\u20D2ie;\uC000\u22B4\u20D2\u0100At\u2CD8\u2CDCrr;\u6903rie;\uC000\u22B5\u20D2im;\uC000\u223C\u20D2\u0180Aan\u2CF0\u2CF4\u2D02rr;\u61D6r\u0100hr\u2CFA\u2CFDk;\u6923\u0100;o\u13E7\u13E5ear;\u6927\u1253\u1A95\0\0\0\0\0\0\0\0\0\0\0\0\0\u2D2D\0\u2D38\u2D48\u2D60\u2D65\u2D72\u2D84\u1B07\0\0\u2D8D\u2DAB\0\u2DC8\u2DCE\0\u2DDC\u2E19\u2E2B\u2E3E\u2E43\u0100cs\u2D31\u1A97ute\u803B\xF3\u40F3\u0100iy\u2D3C\u2D45r\u0100;c\u1A9E\u2D42\u803B\xF4\u40F4;\u443E\u0280abios\u1AA0\u2D52\u2D57\u01C8\u2D5Alac;\u4151v;\u6A38old;\u69BClig;\u4153\u0100cr\u2D69\u2D6Dir;\u69BF;\uC000\u{1D52C}\u036F\u2D79\0\0\u2D7C\0\u2D82n;\u42DBave\u803B\xF2\u40F2;\u69C1\u0100bm\u2D88\u0DF4ar;\u69B5\u0200acit\u2D95\u2D98\u2DA5\u2DA8r\xF2\u1A80\u0100ir\u2D9D\u2DA0r;\u69BEoss;\u69BBn\xE5\u0E52;\u69C0\u0180aei\u2DB1\u2DB5\u2DB9cr;\u414Dga;\u43C9\u0180cdn\u2DC0\u2DC5\u01CDron;\u43BF;\u69B6pf;\uC000\u{1D560}\u0180ael\u2DD4\u2DD7\u01D2r;\u69B7rp;\u69B9\u0380;adiosv\u2DEA\u2DEB\u2DEE\u2E08\u2E0D\u2E10\u2E16\u6228r\xF2\u1A86\u0200;efm\u2DF7\u2DF8\u2E02\u2E05\u6A5Dr\u0100;o\u2DFE\u2DFF\u6134f\xBB\u2DFF\u803B\xAA\u40AA\u803B\xBA\u40BAgof;\u62B6r;\u6A56lope;\u6A57;\u6A5B\u0180clo\u2E1F\u2E21\u2E27\xF2\u2E01ash\u803B\xF8\u40F8l;\u6298i\u016C\u2E2F\u2E34de\u803B\xF5\u40F5es\u0100;a\u01DB\u2E3As;\u6A36ml\u803B\xF6\u40F6bar;\u633D\u0AE1\u2E5E\0\u2E7D\0\u2E80\u2E9D\0\u2EA2\u2EB9\0\0\u2ECB\u0E9C\0\u2F13\0\0\u2F2B\u2FBC\0\u2FC8r\u0200;ast\u0403\u2E67\u2E72\u0E85\u8100\xB6;l\u2E6D\u2E6E\u40B6le\xEC\u0403\u0269\u2E78\0\0\u2E7Bm;\u6AF3;\u6AFDy;\u443Fr\u0280cimpt\u2E8B\u2E8F\u2E93\u1865\u2E97nt;\u4025od;\u402Eil;\u6030enk;\u6031r;\uC000\u{1D52D}\u0180imo\u2EA8\u2EB0\u2EB4\u0100;v\u2EAD\u2EAE\u43C6;\u43D5ma\xF4\u0A76ne;\u660E\u0180;tv\u2EBF\u2EC0\u2EC8\u43C0chfork\xBB\u1FFD;\u43D6\u0100au\u2ECF\u2EDFn\u0100ck\u2ED5\u2EDDk\u0100;h\u21F4\u2EDB;\u610E\xF6\u21F4s\u0480;abcdemst\u2EF3\u2EF4\u1908\u2EF9\u2EFD\u2F04\u2F06\u2F0A\u2F0E\u402Bcir;\u6A23ir;\u6A22\u0100ou\u1D40\u2F02;\u6A25;\u6A72n\u80BB\xB1\u0E9Dim;\u6A26wo;\u6A27\u0180ipu\u2F19\u2F20\u2F25ntint;\u6A15f;\uC000\u{1D561}nd\u803B\xA3\u40A3\u0500;Eaceinosu\u0EC8\u2F3F\u2F41\u2F44\u2F47\u2F81\u2F89\u2F92\u2F7E\u2FB6;\u6AB3p;\u6AB7u\xE5\u0ED9\u0100;c\u0ECE\u2F4C\u0300;acens\u0EC8\u2F59\u2F5F\u2F66\u2F68\u2F7Eppro\xF8\u2F43urlye\xF1\u0ED9\xF1\u0ECE\u0180aes\u2F6F\u2F76\u2F7Approx;\u6AB9qq;\u6AB5im;\u62E8i\xED\u0EDFme\u0100;s\u2F88\u0EAE\u6032\u0180Eas\u2F78\u2F90\u2F7A\xF0\u2F75\u0180dfp\u0EEC\u2F99\u2FAF\u0180als\u2FA0\u2FA5\u2FAAlar;\u632Eine;\u6312urf;\u6313\u0100;t\u0EFB\u2FB4\xEF\u0EFBrel;\u62B0\u0100ci\u2FC0\u2FC5r;\uC000\u{1D4C5};\u43C8ncsp;\u6008\u0300fiopsu\u2FDA\u22E2\u2FDF\u2FE5\u2FEB\u2FF1r;\uC000\u{1D52E}pf;\uC000\u{1D562}rime;\u6057cr;\uC000\u{1D4C6}\u0180aeo\u2FF8\u3009\u3013t\u0100ei\u2FFE\u3005rnion\xF3\u06B0nt;\u6A16st\u0100;e\u3010\u3011\u403F\xF1\u1F19\xF4\u0F14\u0A80ABHabcdefhilmnoprstux\u3040\u3051\u3055\u3059\u30E0\u310E\u312B\u3147\u3162\u3172\u318E\u3206\u3215\u3224\u3229\u3258\u326E\u3272\u3290\u32B0\u32B7\u0180art\u3047\u304A\u304Cr\xF2\u10B3\xF2\u03DDail;\u691Car\xF2\u1C65ar;\u6964\u0380cdenqrt\u3068\u3075\u3078\u307F\u308F\u3094\u30CC\u0100eu\u306D\u3071;\uC000\u223D\u0331te;\u4155i\xE3\u116Emptyv;\u69B3g\u0200;del\u0FD1\u3089\u308B\u308D;\u6992;\u69A5\xE5\u0FD1uo\u803B\xBB\u40BBr\u0580;abcfhlpstw\u0FDC\u30AC\u30AF\u30B7\u30B9\u30BC\u30BE\u30C0\u30C3\u30C7\u30CAp;\u6975\u0100;f\u0FE0\u30B4s;\u6920;\u6933s;\u691E\xEB\u225D\xF0\u272El;\u6945im;\u6974l;\u61A3;\u619D\u0100ai\u30D1\u30D5il;\u691Ao\u0100;n\u30DB\u30DC\u6236al\xF3\u0F1E\u0180abr\u30E7\u30EA\u30EEr\xF2\u17E5rk;\u6773\u0100ak\u30F3\u30FDc\u0100ek\u30F9\u30FB;\u407D;\u405D\u0100es\u3102\u3104;\u698Cl\u0100du\u310A\u310C;\u698E;\u6990\u0200aeuy\u3117\u311C\u3127\u3129ron;\u4159\u0100di\u3121\u3125il;\u4157\xEC\u0FF2\xE2\u30FA;\u4440\u0200clqs\u3134\u3137\u313D\u3144a;\u6937dhar;\u6969uo\u0100;r\u020E\u020Dh;\u61B3\u0180acg\u314E\u315F\u0F44l\u0200;ips\u0F78\u3158\u315B\u109Cn\xE5\u10BBar\xF4\u0FA9t;\u65AD\u0180ilr\u3169\u1023\u316Esht;\u697D;\uC000\u{1D52F}\u0100ao\u3177\u3186r\u0100du\u317D\u317F\xBB\u047B\u0100;l\u1091\u3184;\u696C\u0100;v\u318B\u318C\u43C1;\u43F1\u0180gns\u3195\u31F9\u31FCht\u0300ahlrst\u31A4\u31B0\u31C2\u31D8\u31E4\u31EErrow\u0100;t\u0FDC\u31ADa\xE9\u30C8arpoon\u0100du\u31BB\u31BFow\xEE\u317Ep\xBB\u1092eft\u0100ah\u31CA\u31D0rrow\xF3\u0FEAarpoon\xF3\u0551ightarrows;\u61C9quigarro\xF7\u30CBhreetimes;\u62CCg;\u42DAingdotse\xF1\u1F32\u0180ahm\u320D\u3210\u3213r\xF2\u0FEAa\xF2\u0551;\u600Foust\u0100;a\u321E\u321F\u63B1che\xBB\u321Fmid;\u6AEE\u0200abpt\u3232\u323D\u3240\u3252\u0100nr\u3237\u323Ag;\u67EDr;\u61FEr\xEB\u1003\u0180afl\u3247\u324A\u324Er;\u6986;\uC000\u{1D563}us;\u6A2Eimes;\u6A35\u0100ap\u325D\u3267r\u0100;g\u3263\u3264\u4029t;\u6994olint;\u6A12ar\xF2\u31E3\u0200achq\u327B\u3280\u10BC\u3285quo;\u603Ar;\uC000\u{1D4C7}\u0100bu\u30FB\u328Ao\u0100;r\u0214\u0213\u0180hir\u3297\u329B\u32A0re\xE5\u31F8mes;\u62CAi\u0200;efl\u32AA\u1059\u1821\u32AB\u65B9tri;\u69CEluhar;\u6968;\u611E\u0D61\u32D5\u32DB\u32DF\u332C\u3338\u3371\0\u337A\u33A4\0\0\u33EC\u33F0\0\u3428\u3448\u345A\u34AD\u34B1\u34CA\u34F1\0\u3616\0\0\u3633cute;\u415Bqu\xEF\u27BA\u0500;Eaceinpsy\u11ED\u32F3\u32F5\u32FF\u3302\u330B\u330F\u331F\u3326\u3329;\u6AB4\u01F0\u32FA\0\u32FC;\u6AB8on;\u4161u\xE5\u11FE\u0100;d\u11F3\u3307il;\u415Frc;\u415D\u0180Eas\u3316\u3318\u331B;\u6AB6p;\u6ABAim;\u62E9olint;\u6A13i\xED\u1204;\u4441ot\u0180;be\u3334\u1D47\u3335\u62C5;\u6A66\u0380Aacmstx\u3346\u334A\u3357\u335B\u335E\u3363\u336Drr;\u61D8r\u0100hr\u3350\u3352\xEB\u2228\u0100;o\u0A36\u0A34t\u803B\xA7\u40A7i;\u403Bwar;\u6929m\u0100in\u3369\xF0nu\xF3\xF1t;\u6736r\u0100;o\u3376\u2055\uC000\u{1D530}\u0200acoy\u3382\u3386\u3391\u33A0rp;\u666F\u0100hy\u338B\u338Fcy;\u4449;\u4448rt\u026D\u3399\0\0\u339Ci\xE4\u1464ara\xEC\u2E6F\u803B\xAD\u40AD\u0100gm\u33A8\u33B4ma\u0180;fv\u33B1\u33B2\u33B2\u43C3;\u43C2\u0400;deglnpr\u12AB\u33C5\u33C9\u33CE\u33D6\u33DE\u33E1\u33E6ot;\u6A6A\u0100;q\u12B1\u12B0\u0100;E\u33D3\u33D4\u6A9E;\u6AA0\u0100;E\u33DB\u33DC\u6A9D;\u6A9Fe;\u6246lus;\u6A24arr;\u6972ar\xF2\u113D\u0200aeit\u33F8\u3408\u340F\u3417\u0100ls\u33FD\u3404lsetm\xE9\u336Ahp;\u6A33parsl;\u69E4\u0100dl\u1463\u3414e;\u6323\u0100;e\u341C\u341D\u6AAA\u0100;s\u3422\u3423\u6AAC;\uC000\u2AAC\uFE00\u0180flp\u342E\u3433\u3442tcy;\u444C\u0100;b\u3438\u3439\u402F\u0100;a\u343E\u343F\u69C4r;\u633Ff;\uC000\u{1D564}a\u0100dr\u344D\u0402es\u0100;u\u3454\u3455\u6660it\xBB\u3455\u0180csu\u3460\u3479\u349F\u0100au\u3465\u346Fp\u0100;s\u1188\u346B;\uC000\u2293\uFE00p\u0100;s\u11B4\u3475;\uC000\u2294\uFE00u\u0100bp\u347F\u348F\u0180;es\u1197\u119C\u3486et\u0100;e\u1197\u348D\xF1\u119D\u0180;es\u11A8\u11AD\u3496et\u0100;e\u11A8\u349D\xF1\u11AE\u0180;af\u117B\u34A6\u05B0r\u0165\u34AB\u05B1\xBB\u117Car\xF2\u1148\u0200cemt\u34B9\u34BE\u34C2\u34C5r;\uC000\u{1D4C8}tm\xEE\xF1i\xEC\u3415ar\xE6\u11BE\u0100ar\u34CE\u34D5r\u0100;f\u34D4\u17BF\u6606\u0100an\u34DA\u34EDight\u0100ep\u34E3\u34EApsilo\xEE\u1EE0h\xE9\u2EAFs\xBB\u2852\u0280bcmnp\u34FB\u355E\u1209\u358B\u358E\u0480;Edemnprs\u350E\u350F\u3511\u3515\u351E\u3523\u352C\u3531\u3536\u6282;\u6AC5ot;\u6ABD\u0100;d\u11DA\u351Aot;\u6AC3ult;\u6AC1\u0100Ee\u3528\u352A;\u6ACB;\u628Alus;\u6ABFarr;\u6979\u0180eiu\u353D\u3552\u3555t\u0180;en\u350E\u3545\u354Bq\u0100;q\u11DA\u350Feq\u0100;q\u352B\u3528m;\u6AC7\u0100bp\u355A\u355C;\u6AD5;\u6AD3c\u0300;acens\u11ED\u356C\u3572\u3579\u357B\u3326ppro\xF8\u32FAurlye\xF1\u11FE\xF1\u11F3\u0180aes\u3582\u3588\u331Bppro\xF8\u331Aq\xF1\u3317g;\u666A\u0680123;Edehlmnps\u35A9\u35AC\u35AF\u121C\u35B2\u35B4\u35C0\u35C9\u35D5\u35DA\u35DF\u35E8\u35ED\u803B\xB9\u40B9\u803B\xB2\u40B2\u803B\xB3\u40B3;\u6AC6\u0100os\u35B9\u35BCt;\u6ABEub;\u6AD8\u0100;d\u1222\u35C5ot;\u6AC4s\u0100ou\u35CF\u35D2l;\u67C9b;\u6AD7arr;\u697Bult;\u6AC2\u0100Ee\u35E4\u35E6;\u6ACC;\u628Blus;\u6AC0\u0180eiu\u35F4\u3609\u360Ct\u0180;en\u121C\u35FC\u3602q\u0100;q\u1222\u35B2eq\u0100;q\u35E7\u35E4m;\u6AC8\u0100bp\u3611\u3613;\u6AD4;\u6AD6\u0180Aan\u361C\u3620\u362Drr;\u61D9r\u0100hr\u3626\u3628\xEB\u222E\u0100;o\u0A2B\u0A29war;\u692Alig\u803B\xDF\u40DF\u0BE1\u3651\u365D\u3660\u12CE\u3673\u3679\0\u367E\u36C2\0\0\0\0\0\u36DB\u3703\0\u3709\u376C\0\0\0\u3787\u0272\u3656\0\0\u365Bget;\u6316;\u43C4r\xEB\u0E5F\u0180aey\u3666\u366B\u3670ron;\u4165dil;\u4163;\u4442lrec;\u6315r;\uC000\u{1D531}\u0200eiko\u3686\u369D\u36B5\u36BC\u01F2\u368B\0\u3691e\u01004f\u1284\u1281a\u0180;sv\u3698\u3699\u369B\u43B8ym;\u43D1\u0100cn\u36A2\u36B2k\u0100as\u36A8\u36AEppro\xF8\u12C1im\xBB\u12ACs\xF0\u129E\u0100as\u36BA\u36AE\xF0\u12C1rn\u803B\xFE\u40FE\u01EC\u031F\u36C6\u22E7es\u8180\xD7;bd\u36CF\u36D0\u36D8\u40D7\u0100;a\u190F\u36D5r;\u6A31;\u6A30\u0180eps\u36E1\u36E3\u3700\xE1\u2A4D\u0200;bcf\u0486\u36EC\u36F0\u36F4ot;\u6336ir;\u6AF1\u0100;o\u36F9\u36FC\uC000\u{1D565}rk;\u6ADA\xE1\u3362rime;\u6034\u0180aip\u370F\u3712\u3764d\xE5\u1248\u0380adempst\u3721\u374D\u3740\u3751\u3757\u375C\u375Fngle\u0280;dlqr\u3730\u3731\u3736\u3740\u3742\u65B5own\xBB\u1DBBeft\u0100;e\u2800\u373E\xF1\u092E;\u625Cight\u0100;e\u32AA\u374B\xF1\u105Aot;\u65ECinus;\u6A3Alus;\u6A39b;\u69CDime;\u6A3Bezium;\u63E2\u0180cht\u3772\u377D\u3781\u0100ry\u3777\u377B;\uC000\u{1D4C9};\u4446cy;\u445Brok;\u4167\u0100io\u378B\u378Ex\xF4\u1777head\u0100lr\u3797\u37A0eftarro\xF7\u084Fightarrow\xBB\u0F5D\u0900AHabcdfghlmoprstuw\u37D0\u37D3\u37D7\u37E4\u37F0\u37FC\u380E\u381C\u3823\u3834\u3851\u385D\u386B\u38A9\u38CC\u38D2\u38EA\u38F6r\xF2\u03EDar;\u6963\u0100cr\u37DC\u37E2ute\u803B\xFA\u40FA\xF2\u1150r\u01E3\u37EA\0\u37EDy;\u445Eve;\u416D\u0100iy\u37F5\u37FArc\u803B\xFB\u40FB;\u4443\u0180abh\u3803\u3806\u380Br\xF2\u13ADlac;\u4171a\xF2\u13C3\u0100ir\u3813\u3818sht;\u697E;\uC000\u{1D532}rave\u803B\xF9\u40F9\u0161\u3827\u3831r\u0100lr\u382C\u382E\xBB\u0957\xBB\u1083lk;\u6580\u0100ct\u3839\u384D\u026F\u383F\0\0\u384Arn\u0100;e\u3845\u3846\u631Cr\xBB\u3846op;\u630Fri;\u65F8\u0100al\u3856\u385Acr;\u416B\u80BB\xA8\u0349\u0100gp\u3862\u3866on;\u4173f;\uC000\u{1D566}\u0300adhlsu\u114B\u3878\u387D\u1372\u3891\u38A0own\xE1\u13B3arpoon\u0100lr\u3888\u388Cef\xF4\u382Digh\xF4\u382Fi\u0180;hl\u3899\u389A\u389C\u43C5\xBB\u13FAon\xBB\u389Aparrows;\u61C8\u0180cit\u38B0\u38C4\u38C8\u026F\u38B6\0\0\u38C1rn\u0100;e\u38BC\u38BD\u631Dr\xBB\u38BDop;\u630Eng;\u416Fri;\u65F9cr;\uC000\u{1D4CA}\u0180dir\u38D9\u38DD\u38E2ot;\u62F0lde;\u4169i\u0100;f\u3730\u38E8\xBB\u1813\u0100am\u38EF\u38F2r\xF2\u38A8l\u803B\xFC\u40FCangle;\u69A7\u0780ABDacdeflnoprsz\u391C\u391F\u3929\u392D\u39B5\u39B8\u39BD\u39DF\u39E4\u39E8\u39F3\u39F9\u39FD\u3A01\u3A20r\xF2\u03F7ar\u0100;v\u3926\u3927\u6AE8;\u6AE9as\xE8\u03E1\u0100nr\u3932\u3937grt;\u699C\u0380eknprst\u34E3\u3946\u394B\u3952\u395D\u3964\u3996app\xE1\u2415othin\xE7\u1E96\u0180hir\u34EB\u2EC8\u3959op\xF4\u2FB5\u0100;h\u13B7\u3962\xEF\u318D\u0100iu\u3969\u396Dgm\xE1\u33B3\u0100bp\u3972\u3984setneq\u0100;q\u397D\u3980\uC000\u228A\uFE00;\uC000\u2ACB\uFE00setneq\u0100;q\u398F\u3992\uC000\u228B\uFE00;\uC000\u2ACC\uFE00\u0100hr\u399B\u399Fet\xE1\u369Ciangle\u0100lr\u39AA\u39AFeft\xBB\u0925ight\xBB\u1051y;\u4432ash\xBB\u1036\u0180elr\u39C4\u39D2\u39D7\u0180;be\u2DEA\u39CB\u39CFar;\u62BBq;\u625Alip;\u62EE\u0100bt\u39DC\u1468a\xF2\u1469r;\uC000\u{1D533}tr\xE9\u39AEsu\u0100bp\u39EF\u39F1\xBB\u0D1C\xBB\u0D59pf;\uC000\u{1D567}ro\xF0\u0EFBtr\xE9\u39B4\u0100cu\u3A06\u3A0Br;\uC000\u{1D4CB}\u0100bp\u3A10\u3A18n\u0100Ee\u3980\u3A16\xBB\u397En\u0100Ee\u3992\u3A1E\xBB\u3990igzag;\u699A\u0380cefoprs\u3A36\u3A3B\u3A56\u3A5B\u3A54\u3A61\u3A6Airc;\u4175\u0100di\u3A40\u3A51\u0100bg\u3A45\u3A49ar;\u6A5Fe\u0100;q\u15FA\u3A4F;\u6259erp;\u6118r;\uC000\u{1D534}pf;\uC000\u{1D568}\u0100;e\u1479\u3A66at\xE8\u1479cr;\uC000\u{1D4CC}\u0AE3\u178E\u3A87\0\u3A8B\0\u3A90\u3A9B\0\0\u3A9D\u3AA8\u3AAB\u3AAF\0\0\u3AC3\u3ACE\0\u3AD8\u17DC\u17DFtr\xE9\u17D1r;\uC000\u{1D535}\u0100Aa\u3A94\u3A97r\xF2\u03C3r\xF2\u09F6;\u43BE\u0100Aa\u3AA1\u3AA4r\xF2\u03B8r\xF2\u09EBa\xF0\u2713is;\u62FB\u0180dpt\u17A4\u3AB5\u3ABE\u0100fl\u3ABA\u17A9;\uC000\u{1D569}im\xE5\u17B2\u0100Aa\u3AC7\u3ACAr\xF2\u03CEr\xF2\u0A01\u0100cq\u3AD2\u17B8r;\uC000\u{1D4CD}\u0100pt\u17D6\u3ADCr\xE9\u17D4\u0400acefiosu\u3AF0\u3AFD\u3B08\u3B0C\u3B11\u3B15\u3B1B\u3B21c\u0100uy\u3AF6\u3AFBte\u803B\xFD\u40FD;\u444F\u0100iy\u3B02\u3B06rc;\u4177;\u444Bn\u803B\xA5\u40A5r;\uC000\u{1D536}cy;\u4457pf;\uC000\u{1D56A}cr;\uC000\u{1D4CE}\u0100cm\u3B26\u3B29y;\u444El\u803B\xFF\u40FF\u0500acdefhiosw\u3B42\u3B48\u3B54\u3B58\u3B64\u3B69\u3B6D\u3B74\u3B7A\u3B80cute;\u417A\u0100ay\u3B4D\u3B52ron;\u417E;\u4437ot;\u417C\u0100et\u3B5D\u3B61tr\xE6\u155Fa;\u43B6r;\uC000\u{1D537}cy;\u4436grarr;\u61DDpf;\uC000\u{1D56B}cr;\uC000\u{1D4CF}\u0100jn\u3B85\u3B87;\u600Dj;\u600C'.split("").map(function(e){return e.charCodeAt(0)}));var dS={};Object.defineProperty(dS,"__esModule",{value:!0}),dS.default=new Uint16Array("\u0200aglq	\x1B\u026D\0\0p;\u4026os;\u4027t;\u403Et;\u403Cuot;\u4022".split("").map(function(e){return e.charCodeAt(0)}));var pS={};(function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var n=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);e.fromCodePoint=(t=String.fromCodePoint)!==null&&t!==void 0?t:function(a){var o="";return a>65535&&(a-=65536,o+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),o+=String.fromCharCode(a),o};function i(a){var o;return a>=55296&&a<=57343||a>1114111?65533:(o=n.get(a))!==null&&o!==void 0?o:a}e.replaceCodePoint=i;function r(a){return(0,e.fromCodePoint)(i(a))}e.default=r})(pS),function(e){var t=Pe&&Pe.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTML=e.determineBranch=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var n=t(fS);e.htmlDecodeTree=n.default;var i=t(dS);e.xmlDecodeTree=i.default;var r=t(pS);e.decodeCodePoint=r.default;var a=pS;Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return a.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return a.fromCodePoint}});var o;(function(m){m[m.NUM=35]="NUM",m[m.SEMI=59]="SEMI",m[m.ZERO=48]="ZERO",m[m.NINE=57]="NINE",m[m.LOWER_A=97]="LOWER_A",m[m.LOWER_F=102]="LOWER_F",m[m.LOWER_X=120]="LOWER_X",m[m.To_LOWER_BIT=32]="To_LOWER_BIT"})(o||(o={}));var s;(function(m){m[m.VALUE_LENGTH=49152]="VALUE_LENGTH",m[m.BRANCH_LENGTH=16256]="BRANCH_LENGTH",m[m.JUMP_TABLE=127]="JUMP_TABLE"})(s=e.BinTrieFlags||(e.BinTrieFlags={}));function u(m){return function(v,E){for(var y="",T=0,b=0;(b=v.indexOf("&",b))>=0;){if(y+=v.slice(T,b),T=b,b+=1,v.charCodeAt(b)===o.NUM){var S=b+1,w=10,D=v.charCodeAt(S);(D|o.To_LOWER_BIT)===o.LOWER_X&&(w=16,b+=1,S+=1);do D=v.charCodeAt(++b);while(D>=o.ZERO&&D<=o.NINE||w===16&&(D|o.To_LOWER_BIT)>=o.LOWER_A&&(D|o.To_LOWER_BIT)<=o.LOWER_F);if(S!==b){var R=v.substring(S,b),M=parseInt(R,w);if(v.charCodeAt(b)===o.SEMI)b+=1;else if(E)continue;y+=(0,r.default)(M),T=b}continue}for(var k=0,L=1,$=0,P=m[$];b<v.length&&($=c(m,P,$+1,v.charCodeAt(b)),!($<0));b++,L++){P=m[$];var B=P&s.VALUE_LENGTH;if(B){(!E||v.charCodeAt(b)===o.SEMI)&&(k=$,L=0);var X=(B>>14)-1;if(X===0)break;$+=X}}if(k!==0){var X=(m[k]&s.VALUE_LENGTH)>>14;y+=X===1?String.fromCharCode(m[k]&~s.VALUE_LENGTH):X===2?String.fromCharCode(m[k+1]):String.fromCharCode(m[k+1],m[k+2]),T=b-L+1}}return y+v.slice(T)}}function c(m,g,v,E){var y=(g&s.BRANCH_LENGTH)>>7,T=g&s.JUMP_TABLE;if(y===0)return T!==0&&E===T?v:-1;if(T){var b=E-T;return b<0||b>=y?-1:m[v+b]-1}for(var S=v,w=S+y-1;S<=w;){var D=S+w>>>1,R=m[D];if(R<E)S=D+1;else if(R>E)w=D-1;else return m[D+y]}return-1}e.determineBranch=c;var l=u(n.default),f=u(i.default);function h(m){return l(m,!1)}e.decodeHTML=h;function d(m){return l(m,!0)}e.decodeHTMLStrict=d;function p(m){return f(m,!0)}e.decodeXML=p}(yl);var Tl={},mS={};Object.defineProperty(mS,"__esModule",{value:!0});function p0(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}mS.default=new Map(p0([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(p0([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(p0([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(p0([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]));var rc={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);e.getCodePoint=String.prototype.codePointAt!=null?function(r,a){return r.codePointAt(a)}:function(r,a){return(r.charCodeAt(a)&64512)===55296?(r.charCodeAt(a)-55296)*1024+r.charCodeAt(a+1)-56320+65536:r.charCodeAt(a)};function n(r){for(var a="",o=0,s;(s=e.xmlReplacer.exec(r))!==null;){var u=s.index,c=r.charCodeAt(u),l=t.get(c);l!==void 0?(a+=r.substring(o,u)+l,o=u+1):(a+="".concat(r.substring(o,u),"&#x").concat((0,e.getCodePoint)(r,u).toString(16),";"),o=e.xmlReplacer.lastIndex+=Number((c&64512)===55296))}return a+r.substr(o)}e.encodeXML=n,e.escape=n;function i(r,a){return function(s){for(var u,c=0,l="";u=r.exec(s);)c!==u.index&&(l+=s.substring(c,u.index)),l+=a.get(u[0].charCodeAt(0)),c=u.index+1;return l+s.substring(c)}}e.escapeUTF8=i(/[&<>'"]/g,t),e.escapeAttribute=i(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=i(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(rc);var dre=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Tl,"__esModule",{value:!0}),Tl.encodeNonAsciiHTML=Tl.encodeHTML=void 0;var pre=dre(mS),QL=rc,mre=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function gre(e){return JL(mre,e)}Tl.encodeHTML=gre;function vre(e){return JL(QL.xmlReplacer,e)}Tl.encodeNonAsciiHTML=vre;function JL(e,t){for(var n="",i=0,r;(r=e.exec(t))!==null;){var a=r.index;n+=t.substring(i,a);var o=t.charCodeAt(a),s=pre.default.get(o);if(typeof s=="object"){if(a+1<t.length){var u=t.charCodeAt(a+1),c=typeof s.n=="number"?s.n===u?s.o:void 0:s.n.get(u);if(c!==void 0){n+=c,i=e.lastIndex+=1;continue}}s=s.v}if(s!==void 0)n+=s,i=a+1;else{var l=(0,QL.getCodePoint)(t,a);n+="&#x".concat(l.toString(16),";"),i=e.lastIndex+=Number(l!==o)}}return n+t.substr(i)}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.DecodingMode=e.EntityLevel=void 0;var t=yl,n=Tl,i=rc,r;(function(d){d[d.XML=0]="XML",d[d.HTML=1]="HTML"})(r=e.EntityLevel||(e.EntityLevel={}));var a;(function(d){d[d.Legacy=0]="Legacy",d[d.Strict=1]="Strict"})(a=e.DecodingMode||(e.DecodingMode={}));var o;(function(d){d[d.UTF8=0]="UTF8",d[d.ASCII=1]="ASCII",d[d.Extensive=2]="Extensive",d[d.Attribute=3]="Attribute",d[d.Text=4]="Text"})(o=e.EncodingMode||(e.EncodingMode={}));function s(d,p){p===void 0&&(p=r.XML);var m=typeof p=="number"?{level:p}:p;return m.level===r.HTML?m.mode===a.Strict?(0,t.decodeHTMLStrict)(d):(0,t.decodeHTML)(d):(0,t.decodeXML)(d)}e.decode=s;function u(d,p){p===void 0&&(p=r.XML);var m=typeof p=="number"?{level:p}:p;return m.level===r.HTML?m.mode===a.Legacy?(0,t.decodeHTML)(d):(0,t.decodeHTMLStrict)(d):(0,t.decodeXML)(d)}e.decodeStrict=u;function c(d,p){p===void 0&&(p=r.XML);var m=typeof p=="number"?{level:p}:p;return m.mode===o.UTF8?(0,i.escapeUTF8)(d):m.mode===o.Attribute?(0,i.escapeAttribute)(d):m.mode===o.Text?(0,i.escapeText)(d):m.level===r.HTML?m.mode===o.ASCII?(0,n.encodeNonAsciiHTML)(d):(0,n.encodeHTML)(d):(0,i.encodeXML)(d)}e.encode=c;var l=rc;Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return l.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return l.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return l.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return l.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return l.escapeText}});var f=Tl;Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return f.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return f.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return f.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return f.encodeHTML}});var h=yl;Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return h.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return h.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return h.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return h.decodeXML}})})(ZL);var ic={};Object.defineProperty(ic,"__esModule",{value:!0}),ic.attributeNames=ic.elementNames=void 0,ic.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(e){return[e.toLowerCase(),e]})),ic.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(e){return[e.toLowerCase(),e]}));var ac=Pe&&Pe.__assign||function(){return ac=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ac.apply(this,arguments)},yre=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),Tre=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ere=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&yre(t,e,n);return Tre(t,e),t};Object.defineProperty(nc,"__esModule",{value:!0}),nc.render=void 0;var wo=Ere(tc),m0=ZL,e5=ic,bre=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function _re(e){return e.replace(/"/g,"&quot;")}function Sre(e,t){var n;if(!!e){var i=((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)===!1?_re:t.xmlMode||t.encodeEntities!=="utf8"?m0.encodeXML:m0.escapeAttribute;return Object.keys(e).map(function(r){var a,o,s=(a=e[r])!==null&&a!==void 0?a:"";return t.xmlMode==="foreign"&&(r=(o=e5.attributeNames.get(r))!==null&&o!==void 0?o:r),!t.emptyAttrs&&!t.xmlMode&&s===""?r:"".concat(r,'="').concat(i(s),'"')}).join(" ")}}var t5=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function g0(e,t){t===void 0&&(t={});for(var n=("length"in e)?e:[e],i="",r=0;r<n.length;r++)i+=Are(n[r],t);return i}nc.render=g0,nc.default=g0;function Are(e,t){switch(e.type){case wo.Root:return g0(e.children,t);case wo.Doctype:case wo.Directive:return Ire(e);case wo.Comment:return xre(e);case wo.CDATA:return Ore(e);case wo.Script:case wo.Style:case wo.Tag:return wre(e,t);case wo.Text:return kre(e,t)}}var Cre=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),Dre=new Set(["svg","math"]);function wre(e,t){var n;t.xmlMode==="foreign"&&(e.name=(n=e5.elementNames.get(e.name))!==null&&n!==void 0?n:e.name,e.parent&&Cre.has(e.parent.name)&&(t=ac(ac({},t),{xmlMode:!1}))),!t.xmlMode&&Dre.has(e.name)&&(t=ac(ac({},t),{xmlMode:"foreign"}));var i="<".concat(e.name),r=Sre(e.attribs,t);return r&&(i+=" ".concat(r)),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&t5.has(e.name))?(t.xmlMode||(i+=" "),i+="/>"):(i+=">",e.children.length>0&&(i+=g0(e.children,t)),(t.xmlMode||!t5.has(e.name))&&(i+="</".concat(e.name,">"))),i}function Ire(e){return"<".concat(e.data,">")}function kre(e,t){var n,i=e.data||"";return((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)!==!1&&!(!t.xmlMode&&e.parent&&bre.has(e.parent.name))&&(i=t.xmlMode||t.encodeEntities!=="utf8"?(0,m0.encodeXML)(i):(0,m0.escapeText)(i)),i}function Ore(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}function xre(e){return"<!--".concat(e.data,"-->")}var Pre=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Di,"__esModule",{value:!0}),Di.innerText=Di.textContent=Di.getText=Di.getInnerHTML=Di.getOuterHTML=void 0;var Ua=Vr,Rre=Pre(nc),Nre=tc;function n5(e,t){return(0,Rre.default)(e,t)}Di.getOuterHTML=n5;function Mre(e,t){return(0,Ua.hasChildren)(e)?e.children.map(function(n){return n5(n,t)}).join(""):""}Di.getInnerHTML=Mre;function v0(e){return Array.isArray(e)?e.map(v0).join(""):(0,Ua.isTag)(e)?e.name==="br"?`
`:v0(e.children):(0,Ua.isCDATA)(e)?v0(e.children):(0,Ua.isText)(e)?e.data:""}Di.getText=v0;function gS(e){return Array.isArray(e)?e.map(gS).join(""):(0,Ua.hasChildren)(e)&&!(0,Ua.isComment)(e)?gS(e.children):(0,Ua.isText)(e)?e.data:""}Di.textContent=gS;function vS(e){return Array.isArray(e)?e.map(vS).join(""):(0,Ua.hasChildren)(e)&&(e.type===Nre.ElementType.Tag||(0,Ua.isCDATA)(e))?vS(e.children):(0,Ua.isText)(e)?e.data:""}Di.innerText=vS;var or={};Object.defineProperty(or,"__esModule",{value:!0}),or.prevElementSibling=or.nextElementSibling=or.getName=or.hasAttrib=or.getAttributeValue=or.getSiblings=or.getParent=or.getChildren=void 0;var yS=Vr;function r5(e){return(0,yS.hasChildren)(e)?e.children:[]}or.getChildren=r5;function i5(e){return e.parent||null}or.getParent=i5;function Lre(e){var t,n,i=i5(e);if(i!=null)return r5(i);for(var r=[e],a=e.prev,o=e.next;a!=null;)r.unshift(a),t=a,a=t.prev;for(;o!=null;)r.push(o),n=o,o=n.next;return r}or.getSiblings=Lre;function Bre(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}or.getAttributeValue=Bre;function Fre(e,t){return e.attribs!=null&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&e.attribs[t]!=null}or.hasAttrib=Fre;function Hre(e){return e.name}or.getName=Hre;function $re(e){for(var t,n=e.next;n!==null&&!(0,yS.isTag)(n);)t=n,n=t.next;return n}or.nextElementSibling=$re;function Ure(e){for(var t,n=e.prev;n!==null&&!(0,yS.isTag)(n);)t=n,n=t.prev;return n}or.prevElementSibling=Ure;var ci={};Object.defineProperty(ci,"__esModule",{value:!0}),ci.prepend=ci.prependChild=ci.append=ci.appendChild=ci.replaceElement=ci.removeElement=void 0;function Kf(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children;t.splice(t.lastIndexOf(e),1)}}ci.removeElement=Kf;function Gre(e,t){var n=t.prev=e.prev;n&&(n.next=t);var i=t.next=e.next;i&&(i.prev=t);var r=t.parent=e.parent;if(r){var a=r.children;a[a.lastIndexOf(e)]=t,e.parent=null}}ci.replaceElement=Gre;function zre(e,t){if(Kf(t),t.next=null,t.parent=e,e.children.push(t)>1){var n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null}ci.appendChild=zre;function jre(e,t){Kf(t);var n=e.parent,i=e.next;if(t.next=i,t.prev=e,e.next=t,t.parent=n,i){if(i.prev=t,n){var r=n.children;r.splice(r.lastIndexOf(i),0,t)}}else n&&n.children.push(t)}ci.append=jre;function Vre(e,t){if(Kf(t),t.parent=e,t.prev=null,e.children.unshift(t)!==1){var n=e.children[1];n.prev=t,t.next=n}else t.next=null}ci.prependChild=Vre;function Yre(e,t){Kf(t);var n=e.parent;if(n){var i=n.children;i.splice(i.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}ci.prepend=Yre;var Yr={};Object.defineProperty(Yr,"__esModule",{value:!0}),Yr.findAll=Yr.existsOne=Yr.findOne=Yr.findOneChild=Yr.find=Yr.filter=void 0;var Zf=Vr;function Wre(e,t,n,i){return n===void 0&&(n=!0),i===void 0&&(i=1/0),Array.isArray(t)||(t=[t]),TS(e,t,n,i)}Yr.filter=Wre;function TS(e,t,n,i){for(var r=[],a=0,o=t;a<o.length;a++){var s=o[a];if(e(s)&&(r.push(s),--i<=0))break;if(n&&(0,Zf.hasChildren)(s)&&s.children.length>0){var u=TS(e,s.children,n,i);if(r.push.apply(r,u),i-=u.length,i<=0)break}}return r}Yr.find=TS;function qre(e,t){return t.find(e)}Yr.findOneChild=qre;function a5(e,t,n){n===void 0&&(n=!0);for(var i=null,r=0;r<t.length&&!i;r++){var a=t[r];if((0,Zf.isTag)(a))e(a)?i=a:n&&a.children.length>0&&(i=a5(e,a.children,!0));else continue}return i}Yr.findOne=a5;function o5(e,t){return t.some(function(n){return(0,Zf.isTag)(n)&&(e(n)||n.children.length>0&&o5(e,n.children))})}Yr.existsOne=o5;function Xre(e,t){for(var n,i=[],r=t.filter(Zf.isTag),a;a=r.shift();){var o=(n=a.children)===null||n===void 0?void 0:n.filter(Zf.isTag);o&&o.length>0&&r.unshift.apply(r,o),e(a)&&i.push(a)}return i}Yr.findAll=Xre;var wi={};Object.defineProperty(wi,"__esModule",{value:!0}),wi.getElementsByTagType=wi.getElementsByTagName=wi.getElementById=wi.getElements=wi.testElement=void 0;var El=Vr,y0=Yr,T0={tag_name:function(e){return typeof e=="function"?function(t){return(0,El.isTag)(t)&&e(t.name)}:e==="*"?El.isTag:function(t){return(0,El.isTag)(t)&&t.name===e}},tag_type:function(e){return typeof e=="function"?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return typeof e=="function"?function(t){return(0,El.isText)(t)&&e(t.data)}:function(t){return(0,El.isText)(t)&&t.data===e}}};function s5(e,t){return typeof t=="function"?function(n){return(0,El.isTag)(n)&&t(n.attribs[e])}:function(n){return(0,El.isTag)(n)&&n.attribs[e]===t}}function Kre(e,t){return function(n){return e(n)||t(n)}}function l5(e){var t=Object.keys(e).map(function(n){var i=e[n];return Object.prototype.hasOwnProperty.call(T0,n)?T0[n](i):s5(n,i)});return t.length===0?null:t.reduce(Kre)}function Zre(e,t){var n=l5(e);return n?n(t):!0}wi.testElement=Zre;function Qre(e,t,n,i){i===void 0&&(i=1/0);var r=l5(e);return r?(0,y0.filter)(r,t,n,i):[]}wi.getElements=Qre;function Jre(e,t,n){return n===void 0&&(n=!0),Array.isArray(t)||(t=[t]),(0,y0.findOne)(s5("id",e),t,n)}wi.getElementById=Jre;function eie(e,t,n,i){return n===void 0&&(n=!0),i===void 0&&(i=1/0),(0,y0.filter)(T0.tag_name(e),t,n,i)}wi.getElementsByTagName=eie;function tie(e,t,n,i){return n===void 0&&(n=!0),i===void 0&&(i=1/0),(0,y0.filter)(T0.tag_type(e),t,n,i)}wi.getElementsByTagType=tie;var u5={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueSort=e.compareDocumentPosition=e.DocumentPosition=e.removeSubsets=void 0;var t=Vr;function n(o){for(var s=o.length;--s>=0;){var u=o[s];if(s>0&&o.lastIndexOf(u,s-1)>=0){o.splice(s,1);continue}for(var c=u.parent;c;c=c.parent)if(o.includes(c)){o.splice(s,1);break}}return o}e.removeSubsets=n;var i;(function(o){o[o.DISCONNECTED=1]="DISCONNECTED",o[o.PRECEDING=2]="PRECEDING",o[o.FOLLOWING=4]="FOLLOWING",o[o.CONTAINS=8]="CONTAINS",o[o.CONTAINED_BY=16]="CONTAINED_BY"})(i=e.DocumentPosition||(e.DocumentPosition={}));function r(o,s){var u=[],c=[];if(o===s)return 0;for(var l=(0,t.hasChildren)(o)?o:o.parent;l;)u.unshift(l),l=l.parent;for(l=(0,t.hasChildren)(s)?s:s.parent;l;)c.unshift(l),l=l.parent;for(var f=Math.min(u.length,c.length),h=0;h<f&&u[h]===c[h];)h++;if(h===0)return i.DISCONNECTED;var d=u[h-1],p=d.children,m=u[h],g=c[h];return p.indexOf(m)>p.indexOf(g)?d===s?i.FOLLOWING|i.CONTAINED_BY:i.FOLLOWING:d===o?i.PRECEDING|i.CONTAINS:i.PRECEDING}e.compareDocumentPosition=r;function a(o){return o=o.filter(function(s,u,c){return!c.includes(s,u+1)}),o.sort(function(s,u){var c=r(s,u);return c&i.PRECEDING?-1:c&i.FOLLOWING?1:0}),o}e.uniqueSort=a})(u5);var E0={};Object.defineProperty(E0,"__esModule",{value:!0}),E0.getFeed=void 0;var nie=Di,Qf=wi;function rie(e){var t=b0(lie,e);return t?t.name==="feed"?iie(t):aie(t):null}E0.getFeed=rie;function iie(e){var t,n=e.children,i={type:"atom",items:(0,Qf.getElementsByTagName)("entry",n).map(function(o){var s,u=o.children,c={media:c5(u)};hi(c,"id","id",u),hi(c,"title","title",u);var l=(s=b0("link",u))===null||s===void 0?void 0:s.attribs.href;l&&(c.link=l);var f=bl("summary",u)||bl("content",u);f&&(c.description=f);var h=bl("updated",u);return h&&(c.pubDate=new Date(h)),c})};hi(i,"id","id",n),hi(i,"title","title",n);var r=(t=b0("link",n))===null||t===void 0?void 0:t.attribs.href;r&&(i.link=r),hi(i,"description","subtitle",n);var a=bl("updated",n);return a&&(i.updated=new Date(a)),hi(i,"author","email",n,!0),i}function aie(e){var t,n,i=(n=(t=b0("channel",e.children))===null||t===void 0?void 0:t.children)!==null&&n!==void 0?n:[],r={type:e.name.substr(0,3),id:"",items:(0,Qf.getElementsByTagName)("item",e.children).map(function(o){var s=o.children,u={media:c5(s)};hi(u,"id","guid",s),hi(u,"title","title",s),hi(u,"link","link",s),hi(u,"description","description",s);var c=bl("pubDate",s);return c&&(u.pubDate=new Date(c)),u})};hi(r,"title","title",i),hi(r,"link","link",i),hi(r,"description","description",i);var a=bl("lastBuildDate",i);return a&&(r.updated=new Date(a)),hi(r,"author","managingEditor",i,!0),r}var oie=["url","type","lang"],sie=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function c5(e){return(0,Qf.getElementsByTagName)("media:content",e).map(function(t){for(var n=t.attribs,i={medium:n.medium,isDefault:!!n.isDefault},r=0,a=oie;r<a.length;r++){var o=a[r];n[o]&&(i[o]=n[o])}for(var s=0,u=sie;s<u.length;s++){var o=u[s];n[o]&&(i[o]=parseInt(n[o],10))}return n.expression&&(i.expression=n.expression),i})}function b0(e,t){return(0,Qf.getElementsByTagName)(e,t,!0,1)[0]}function bl(e,t,n){return n===void 0&&(n=!1),(0,nie.textContent)((0,Qf.getElementsByTagName)(e,t,n,1)).trim()}function hi(e,t,n,i,r){r===void 0&&(r=!1);var a=bl(n,i,r);a&&(e[t]=a)}function lie(e){return e==="rss"||e==="feed"||e==="rdf:RDF"}(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(r,a,o,s){s===void 0&&(s=o);var u=Object.getOwnPropertyDescriptor(a,o);(!u||("get"in u?!a.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return a[o]}}),Object.defineProperty(r,s,u)}:function(r,a,o,s){s===void 0&&(s=o),r[s]=a[o]}),n=Pe&&Pe.__exportStar||function(r,a){for(var o in r)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&t(a,r,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,n(Di,e),n(or,e),n(ci,e),n(Yr,e),n(wi,e),n(u5,e),n(E0,e);var i=Vr;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return i.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return i.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return i.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return i.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return i.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return i.hasChildren}})})($a);var _l=Pe&&Pe.__assign||function(){return _l=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_l.apply(this,arguments)},uie=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),cie=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),hie=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&uie(t,e,n);return cie(t,e),t};Object.defineProperty(Gn,"__esModule",{value:!0}),Gn.merge=Gn.contains=Gn.root=Gn.parseHTML=Gn.text=Gn.xml=Gn.html=void 0;var fie=$a,ES=hie(ec);function h5(e,t,n){return e?e(t??e._root.children,null,void 0,n).toString():""}function die(e,t){return!t&&typeof e=="object"&&e!=null&&!("length"in e)&&!("type"in e)}function pie(e,t){var n=die(e)?(t=e,void 0):e,i=_l(_l(_l({},ES.default),this===null||this===void 0?void 0:this._options),(0,ES.flatten)(t??{}));return h5(this,n,i)}Gn.html=pie;function mie(e){var t=_l(_l({},this._options),{xmlMode:!0});return h5(this,e,t)}Gn.xml=mie;function gie(e){for(var t=e||(this?this.root():[]),n="",i=0;i<t.length;i++)n+=(0,fie.textContent)(t[i]);return n}Gn.text=gie;function vie(e,t,n){if(n===void 0&&(n=typeof t=="boolean"?t:!1),!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t);var i=this.load(e,ES.default,!1);return n||i("script").remove(),i.root()[0].children.slice()}Gn.parseHTML=vie;function yie(){return this(this._root)}Gn.root=yie;function Tie(e,t){if(t===e)return!1;for(var n=t;n&&n!==n.parent;)if(n=n.parent,n===e)return!0;return!1}Gn.contains=Tie;function Eie(e,t){if(!(!f5(e)||!f5(t))){for(var n=e.length,i=+t.length,r=0;r<i;r++)e[n++]=t[r];return e.length=n,e}}Gn.merge=Eie;function f5(e){if(Array.isArray(e))return!0;if(typeof e!="object"||!Object.prototype.hasOwnProperty.call(e,"length")||typeof e.length!="number"||e.length<0)return!1;for(var t=0;t<e.length;t++)if(!(t in e))return!1;return!0}var _0={},qn={},as={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isHtml=e.cloneDom=e.domEach=e.cssCase=e.camelCase=e.isCheerio=e.isTag=void 0;var t=Vr,n=Vr;Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return n.isTag}});function i(l){return l.cheerio!=null}e.isCheerio=i;function r(l){return l.replace(/[_.-](\w|$)/g,function(f,h){return h.toUpperCase()})}e.camelCase=r;function a(l){return l.replace(/[A-Z]/g,"-$&").toLowerCase()}e.cssCase=a;function o(l,f){for(var h=l.length,d=0;d<h;d++)f(l[d],d);return l}e.domEach=o;function s(l){var f="length"in l?Array.prototype.map.call(l,function(d){return(0,t.cloneNode)(d,!0)}):[(0,t.cloneNode)(l,!0)],h=new t.Document(f);return f.forEach(function(d){d.parent=h}),f}e.cloneDom=s;var u;(function(l){l[l.LowerA=97]="LowerA",l[l.LowerZ=122]="LowerZ",l[l.UpperA=65]="UpperA",l[l.UpperZ=90]="UpperZ",l[l.Exclamation=33]="Exclamation"})(u||(u={}));function c(l){var f=l.indexOf("<");if(f<0||f>l.length-3)return!1;var h=l.charCodeAt(f+1);return(h>=u.LowerA&&h<=u.LowerZ||h>=u.UpperA&&h<=u.UpperZ||h===u.Exclamation)&&l.includes(">",f+2)}e.isHtml=c})(as),Object.defineProperty(qn,"__esModule",{value:!0}),qn.toggleClass=qn.removeClass=qn.addClass=qn.hasClass=qn.removeAttr=qn.val=qn.data=qn.prop=qn.attr=void 0;var d5=Gn,cn=as,p5=$a,oc=Object.prototype.hasOwnProperty,Jf=/\s+/,bS="data-",m5={null:null,true:!0,false:!1},_S=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bie=/^{[^]*}$|^\[[^]*]$/;function S0(e,t,n){var i;if(!(!e||!(0,cn.isTag)(e))){if((i=e.attribs)!==null&&i!==void 0||(e.attribs={}),!t)return e.attribs;if(oc.call(e.attribs,t))return!n&&_S.test(t)?t:e.attribs[t];if(e.name==="option"&&t==="value")return(0,d5.text)(e.children);if(e.name==="input"&&(e.attribs.type==="radio"||e.attribs.type==="checkbox")&&t==="value")return"on"}}function sc(e,t,n){n===null?T5(e,t):e.attribs[t]="".concat(n)}function _ie(e,t){if(typeof e=="object"||t!==void 0){if(typeof t=="function"){if(typeof e!="string")throw new Error("Bad combination of arguments.");return(0,cn.domEach)(this,function(n,i){(0,cn.isTag)(n)&&sc(n,e,t.call(n,i,n.attribs[e]))})}return(0,cn.domEach)(this,function(n){!(0,cn.isTag)(n)||(typeof e=="object"?Object.keys(e).forEach(function(i){var r=e[i];sc(n,i,r)}):sc(n,e,t))})}return arguments.length>1?this:S0(this[0],e,this.options.xmlMode)}qn.attr=_ie;function g5(e,t,n){return t in e?e[t]:!n&&_S.test(t)?S0(e,t,!1)!==void 0:S0(e,t,n)}function SS(e,t,n,i){t in e?e[t]=n:sc(e,t,!i&&_S.test(t)?n?"":null:"".concat(n))}function Sie(e,t){var n=this,i;if(typeof e=="string"&&t===void 0){var r=this[0];if(!r||!(0,cn.isTag)(r))return;switch(e){case"style":{var a=this.css(),o=Object.keys(a);return o.forEach(function(u,c){a[c]=u}),a.length=o.length,a}case"tagName":case"nodeName":return r.name.toUpperCase();case"href":case"src":{var s=(i=r.attribs)===null||i===void 0?void 0:i[e];return typeof URL<"u"&&(e==="href"&&(r.tagName==="a"||r.name==="link")||e==="src"&&(r.tagName==="img"||r.tagName==="iframe"||r.tagName==="audio"||r.tagName==="video"||r.tagName==="source"))&&s!==void 0&&this.options.baseURI?new URL(s,this.options.baseURI).href:s}case"innerText":return(0,p5.innerText)(r);case"textContent":return(0,p5.textContent)(r);case"outerHTML":return this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return g5(r,e,this.options.xmlMode)}}if(typeof e=="object"||t!==void 0){if(typeof t=="function"){if(typeof e=="object")throw new Error("Bad combination of arguments.");return(0,cn.domEach)(this,function(u,c){(0,cn.isTag)(u)&&SS(u,e,t.call(u,c,g5(u,e,n.options.xmlMode)),n.options.xmlMode)})}return(0,cn.domEach)(this,function(u){!(0,cn.isTag)(u)||(typeof e=="object"?Object.keys(e).forEach(function(c){var l=e[c];SS(u,c,l,n.options.xmlMode)}):SS(u,e,t,n.options.xmlMode))})}}qn.prop=Sie;function v5(e,t,n){var i,r=e;(i=r.data)!==null&&i!==void 0||(r.data={}),typeof t=="object"?Object.assign(r.data,t):typeof t=="string"&&n!==void 0&&(r.data[t]=n)}function y5(e,t){var n,i,r;t==null?(n=Object.keys(e.attribs).filter(function(u){return u.startsWith(bS)}),i=n.map(function(u){return(0,cn.camelCase)(u.slice(bS.length))})):(n=[bS+(0,cn.cssCase)(t)],i=[t]);for(var a=0;a<n.length;++a){var o=n[a],s=i[a];if(oc.call(e.attribs,o)&&!oc.call(e.data,s)){if(r=e.attribs[o],oc.call(m5,r))r=m5[r];else if(r===String(Number(r)))r=Number(r);else if(bie.test(r))try{r=JSON.parse(r)}catch{}e.data[s]=r}}return t==null?e.data:r}function Aie(e,t){var n,i=this[0];if(!(!i||!(0,cn.isTag)(i))){var r=i;return(n=r.data)!==null&&n!==void 0||(r.data={}),e?typeof e=="object"||t!==void 0?((0,cn.domEach)(this,function(a){(0,cn.isTag)(a)&&(typeof e=="object"?v5(a,e):v5(a,e,t))}),this):oc.call(r.data,e)?r.data[e]:y5(r,e):y5(r)}}qn.data=Aie;function Cie(e){var t=arguments.length===0,n=this[0];if(!n||!(0,cn.isTag)(n))return t?void 0:this;switch(n.name){case"textarea":return this.text(e);case"select":{var i=this.find("option:selected");if(!t){if(this.attr("multiple")==null&&typeof e=="object")return this;this.find("option").removeAttr("selected");for(var r=typeof e!="object"?[e]:e,a=0;a<r.length;a++)this.find('option[value="'.concat(r[a],'"]')).attr("selected","");return this}return this.attr("multiple")?i.toArray().map(function(o){return(0,d5.text)(o.children)}):i.attr("value")}case"input":case"option":return t?this.attr("value"):this.attr("value",e)}}qn.val=Cie;function T5(e,t){!e.attribs||!oc.call(e.attribs,t)||delete e.attribs[t]}function A0(e){return e?e.trim().split(Jf):[]}function Die(e){for(var t=A0(e),n=function(a){(0,cn.domEach)(i,function(o){(0,cn.isTag)(o)&&T5(o,t[a])})},i=this,r=0;r<t.length;r++)n(r);return this}qn.removeAttr=Die;function wie(e){return this.toArray().some(function(t){var n=(0,cn.isTag)(t)&&t.attribs.class,i=-1;if(n&&e.length)for(;(i=n.indexOf(e,i+1))>-1;){var r=i+e.length;if((i===0||Jf.test(n[i-1]))&&(r===n.length||Jf.test(n[r])))return!0}return!1})}qn.hasClass=wie;function E5(e){if(typeof e=="function")return(0,cn.domEach)(this,function(c,l){if((0,cn.isTag)(c)){var f=c.attribs.class||"";E5.call([c],e.call(c,l,f))}});if(!e||typeof e!="string")return this;for(var t=e.split(Jf),n=this.length,i=0;i<n;i++){var r=this[i];if(!!(0,cn.isTag)(r)){var a=S0(r,"class",!1);if(!a)sc(r,"class",t.join(" ").trim());else{for(var o=" ".concat(a," "),s=0;s<t.length;s++){var u="".concat(t[s]," ");o.includes(" ".concat(u))||(o+=u)}sc(r,"class",o.trim())}}}return this}qn.addClass=E5;function b5(e){if(typeof e=="function")return(0,cn.domEach)(this,function(r,a){(0,cn.isTag)(r)&&b5.call([r],e.call(r,a,r.attribs.class||""))});var t=A0(e),n=t.length,i=arguments.length===0;return(0,cn.domEach)(this,function(r){if(!!(0,cn.isTag)(r))if(i)r.attribs.class="";else{for(var a=A0(r.attribs.class),o=!1,s=0;s<n;s++){var u=a.indexOf(t[s]);u>=0&&(a.splice(u,1),o=!0,s--)}o&&(r.attribs.class=a.join(" "))}})}qn.removeClass=b5;function _5(e,t){if(typeof e=="function")return(0,cn.domEach)(this,function(f,h){(0,cn.isTag)(f)&&_5.call([f],e.call(f,h,f.attribs.class||"",t),t)});if(!e||typeof e!="string")return this;for(var n=e.split(Jf),i=n.length,r=typeof t=="boolean"?t?1:-1:0,a=this.length,o=0;o<a;o++){var s=this[o];if(!!(0,cn.isTag)(s)){for(var u=A0(s.attribs.class),c=0;c<i;c++){var l=u.indexOf(n[c]);r>=0&&l<0?u.push(n[c]):r<=0&&l>=0&&u.splice(l,1)}s.attribs.class=u.join(" ")}}return this}qn.toggleClass=_5;var tt={},S5={},zt;(function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"})(zt||(zt={}));const Iie={Unknown:null,QuirksMode:"quirks",IgnoreCase:!0,CaseSensitive:!1};var Dn;(function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"})(Dn||(Dn={}));const A5=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,kie=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,Oie=new Map([[126,Dn.Element],[94,Dn.Start],[36,Dn.End],[42,Dn.Any],[33,Dn.Not],[124,Dn.Hyphen]]),xie=new Set(["has","not","matches","is","where","host","host-context"]);function C5(e){switch(e.type){case zt.Adjacent:case zt.Child:case zt.Descendant:case zt.Parent:case zt.Sibling:case zt.ColumnCombinator:return!0;default:return!1}}const Pie=new Set(["contains","icontains"]);function Rie(e,t,n){const i=parseInt(t,16)-65536;return i!==i||n?t:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,i&1023|56320)}function ed(e){return e.replace(kie,Rie)}function AS(e){return e===39||e===34}function D5(e){return e===32||e===9||e===10||e===12||e===13}function Nie(e){const t=[],n=w5(t,`${e}`,0);if(n<e.length)throw new Error(`Unmatched selector: ${e.slice(n)}`);return t}function w5(e,t,n){let i=[];function r(h){const d=t.slice(n+h).match(A5);if(!d)throw new Error(`Expected name, found ${t.slice(n)}`);const[p]=d;return n+=h+p.length,ed(p)}function a(h){for(n+=h;n<t.length&&D5(t.charCodeAt(n));)n++}function o(){n+=1;const h=n;let d=1;for(;d>0&&n<t.length;n++)t.charCodeAt(n)===40&&!s(n)?d++:t.charCodeAt(n)===41&&!s(n)&&d--;if(d)throw new Error("Parenthesis not matched");return ed(t.slice(h,n-1))}function s(h){let d=0;for(;t.charCodeAt(--h)===92;)d++;return(d&1)===1}function u(){if(i.length>0&&C5(i[i.length-1]))throw new Error("Did not expect successive traversals.")}function c(h){if(i.length>0&&i[i.length-1].type===zt.Descendant){i[i.length-1].type=h;return}u(),i.push({type:h})}function l(h,d){i.push({type:zt.Attribute,name:h,action:d,value:r(1),namespace:null,ignoreCase:"quirks"})}function f(){if(i.length&&i[i.length-1].type===zt.Descendant&&i.pop(),i.length===0)throw new Error("Empty sub-selector");e.push(i)}if(a(0),t.length===n)return n;e:for(;n<t.length;){const h=t.charCodeAt(n);switch(h){case 32:case 9:case 10:case 12:case 13:{(i.length===0||i[0].type!==zt.Descendant)&&(u(),i.push({type:zt.Descendant})),a(1);break}case 62:{c(zt.Child),a(1);break}case 60:{c(zt.Parent),a(1);break}case 126:{c(zt.Sibling),a(1);break}case 43:{c(zt.Adjacent),a(1);break}case 46:{l("class",Dn.Element);break}case 35:{l("id",Dn.Equals);break}case 91:{a(1);let d,p=null;t.charCodeAt(n)===124?d=r(1):t.startsWith("*|",n)?(p="*",d=r(2)):(d=r(0),t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==61&&(p=d,d=r(1))),a(0);let m=Dn.Exists;const g=Oie.get(t.charCodeAt(n));if(g){if(m=g,t.charCodeAt(n+1)!==61)throw new Error("Expected `=`");a(2)}else t.charCodeAt(n)===61&&(m=Dn.Equals,a(1));let v="",E=null;if(m!=="exists"){if(AS(t.charCodeAt(n))){const b=t.charCodeAt(n);let S=n+1;for(;S<t.length&&(t.charCodeAt(S)!==b||s(S));)S+=1;if(t.charCodeAt(S)!==b)throw new Error("Attribute value didn't end");v=ed(t.slice(n+1,S)),n=S+1}else{const b=n;for(;n<t.length&&(!D5(t.charCodeAt(n))&&t.charCodeAt(n)!==93||s(n));)n+=1;v=ed(t.slice(b,n))}a(0);const T=t.charCodeAt(n)|32;T===115?(E=!1,a(1)):T===105&&(E=!0,a(1))}if(t.charCodeAt(n)!==93)throw new Error("Attribute selector didn't terminate");n+=1;const y={type:zt.Attribute,name:d,action:m,value:v,namespace:p,ignoreCase:E};i.push(y);break}case 58:{if(t.charCodeAt(n+1)===58){i.push({type:zt.PseudoElement,name:r(2).toLowerCase(),data:t.charCodeAt(n)===40?o():null});continue}const d=r(1).toLowerCase();let p=null;if(t.charCodeAt(n)===40)if(xie.has(d)){if(AS(t.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${d} cannot be quoted`);if(p=[],n=w5(p,t,n+1),t.charCodeAt(n)!==41)throw new Error(`Missing closing parenthesis in :${d} (${t})`);n+=1}else{if(p=o(),Pie.has(d)){const m=p.charCodeAt(0);m===p.charCodeAt(p.length-1)&&AS(m)&&(p=p.slice(1,-1))}p=ed(p)}i.push({type:zt.Pseudo,name:d,data:p});break}case 44:{f(),i=[],a(1);break}default:{if(t.startsWith("/*",n)){const m=t.indexOf("*/",n+2);if(m<0)throw new Error("Comment was not terminated");n=m+2,i.length===0&&a(0);break}let d=null,p;if(h===42)n+=1,p="*";else if(h===124){if(p="",t.charCodeAt(n+1)===124){c(zt.ColumnCombinator),a(2);break}}else if(A5.test(t.slice(n)))p=r(0);else break e;t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==124&&(d=p,t.charCodeAt(n+1)===42?(p="*",n+=2):p=r(1)),i.push(p==="*"?{type:zt.Universal,namespace:d}:{type:zt.Tag,name:p,namespace:d})}}}return f(),n}const I5=["\\",'"'],k5=[...I5,"(",")"],Mie=new Set(I5.map(e=>e.charCodeAt(0))),O5=new Set(k5.map(e=>e.charCodeAt(0))),lc=new Set([...k5,"~","^","$","*","+","!","|",":","[","]"," ","."].map(e=>e.charCodeAt(0)));function x5(e){return e.map(t=>t.map(Lie).join("")).join(", ")}function Lie(e,t,n){switch(e.type){case zt.Child:return t===0?"> ":" > ";case zt.Parent:return t===0?"< ":" < ";case zt.Sibling:return t===0?"~ ":" ~ ";case zt.Adjacent:return t===0?"+ ":" + ";case zt.Descendant:return" ";case zt.ColumnCombinator:return t===0?"|| ":" || ";case zt.Universal:return e.namespace==="*"&&t+1<n.length&&"name"in n[t+1]?"":`${R5(e.namespace)}*`;case zt.Tag:return P5(e);case zt.PseudoElement:return`::${Io(e.name,lc)}${e.data===null?"":`(${Io(e.data,O5)})`}`;case zt.Pseudo:return`:${Io(e.name,lc)}${e.data===null?"":`(${typeof e.data=="string"?Io(e.data,O5):x5(e.data)})`}`;case zt.Attribute:{if(e.name==="id"&&e.action===Dn.Equals&&e.ignoreCase==="quirks"&&!e.namespace)return`#${Io(e.value,lc)}`;if(e.name==="class"&&e.action===Dn.Element&&e.ignoreCase==="quirks"&&!e.namespace)return`.${Io(e.value,lc)}`;const i=P5(e);return e.action===Dn.Exists?`[${i}]`:`[${i}${Bie(e.action)}="${Io(e.value,Mie)}"${e.ignoreCase===null?"":e.ignoreCase?" i":" s"}]`}}}function Bie(e){switch(e){case Dn.Equals:return"";case Dn.Element:return"~";case Dn.Start:return"^";case Dn.End:return"$";case Dn.Any:return"*";case Dn.Not:return"!";case Dn.Hyphen:return"|";case Dn.Exists:throw new Error("Shouldn't be here")}}function P5(e){return`${R5(e.namespace)}${Io(e.name,lc)}`}function R5(e){return e!==null?`${e==="*"?"*":Io(e,lc)}|`:""}function Io(e,t){let n=0,i="";for(let r=0;r<e.length;r++)t.has(e.charCodeAt(r))&&(i+=`${e.slice(n,r)}\\${e.charAt(r)}`,n=r+1);return i.length>0?i+e.slice(n):e}const td=fo(Object.freeze(Object.defineProperty({__proto__:null,isTraversal:C5,parse:Nie,stringify:x5,get SelectorType(){return zt},IgnoreCaseMode:Iie,get AttributeAction(){return Dn}},Symbol.toStringTag,{value:"Module"})));var CS={},Sl={trueFunc:function(){return!0},falseFunc:function(){return!1}},os={},uc={};Object.defineProperty(uc,"__esModule",{value:!0}),uc.isTraversal=void 0;var Ii=td,N5=new Map([[Ii.SelectorType.Universal,50],[Ii.SelectorType.Tag,30],[Ii.SelectorType.Attribute,1],[Ii.SelectorType.Pseudo,0]]);function Fie(e){return!N5.has(e.type)}uc.isTraversal=Fie;var Hie=new Map([[Ii.AttributeAction.Exists,10],[Ii.AttributeAction.Equals,8],[Ii.AttributeAction.Not,7],[Ii.AttributeAction.Start,6],[Ii.AttributeAction.End,6],[Ii.AttributeAction.Any,5]]);function $ie(e){for(var t=e.map(M5),n=1;n<e.length;n++){var i=t[n];if(!(i<0))for(var r=n-1;r>=0&&i<t[r];r--){var a=e[r+1];e[r+1]=e[r],e[r]=a,t[r+1]=t[r],t[r]=i}}}uc.default=$ie;function M5(e){var t,n,i=(t=N5.get(e.type))!==null&&t!==void 0?t:-1;return e.type===Ii.SelectorType.Attribute?(i=(n=Hie.get(e.action))!==null&&n!==void 0?n:4,e.action===Ii.AttributeAction.Equals&&e.name==="id"&&(i=9),e.ignoreCase&&(i>>=1)):e.type===Ii.SelectorType.Pseudo&&(e.data?e.name==="has"||e.name==="contains"?i=0:Array.isArray(e.data)?(i=Math.min.apply(Math,e.data.map(function(r){return Math.min.apply(Math,r.map(M5))})),i<0&&(i=0)):i=2:i=3),i}var C0={},D0={},Uie=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(D0,"__esModule",{value:!0}),D0.attributeRules=void 0;var w0=Uie(Sl),Gie=/[-[\]{}()*+?.,\\^$|#\s]/g;function L5(e){return e.replace(Gie,"\\$&")}var zie=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function Al(e,t){return typeof e.ignoreCase=="boolean"?e.ignoreCase:e.ignoreCase==="quirks"?!!t.quirksMode:!t.xmlMode&&zie.has(e.name)}D0.attributeRules={equals:function(e,t,n){var i=n.adapter,r=t.name,a=t.value;return Al(t,n)?(a=a.toLowerCase(),function(o){var s=i.getAttributeValue(o,r);return s!=null&&s.length===a.length&&s.toLowerCase()===a&&e(o)}):function(o){return i.getAttributeValue(o,r)===a&&e(o)}},hyphen:function(e,t,n){var i=n.adapter,r=t.name,a=t.value,o=a.length;return Al(t,n)?(a=a.toLowerCase(),function(u){var c=i.getAttributeValue(u,r);return c!=null&&(c.length===o||c.charAt(o)==="-")&&c.substr(0,o).toLowerCase()===a&&e(u)}):function(u){var c=i.getAttributeValue(u,r);return c!=null&&(c.length===o||c.charAt(o)==="-")&&c.substr(0,o)===a&&e(u)}},element:function(e,t,n){var i=n.adapter,r=t.name,a=t.value;if(/\s/.test(a))return w0.default.falseFunc;var o=new RegExp("(?:^|\\s)".concat(L5(a),"(?:$|\\s)"),Al(t,n)?"i":"");return function(u){var c=i.getAttributeValue(u,r);return c!=null&&c.length>=a.length&&o.test(c)&&e(u)}},exists:function(e,t,n){var i=t.name,r=n.adapter;return function(a){return r.hasAttrib(a,i)&&e(a)}},start:function(e,t,n){var i=n.adapter,r=t.name,a=t.value,o=a.length;return o===0?w0.default.falseFunc:Al(t,n)?(a=a.toLowerCase(),function(s){var u=i.getAttributeValue(s,r);return u!=null&&u.length>=o&&u.substr(0,o).toLowerCase()===a&&e(s)}):function(s){var u;return!!(!((u=i.getAttributeValue(s,r))===null||u===void 0)&&u.startsWith(a))&&e(s)}},end:function(e,t,n){var i=n.adapter,r=t.name,a=t.value,o=-a.length;return o===0?w0.default.falseFunc:Al(t,n)?(a=a.toLowerCase(),function(s){var u;return((u=i.getAttributeValue(s,r))===null||u===void 0?void 0:u.substr(o).toLowerCase())===a&&e(s)}):function(s){var u;return!!(!((u=i.getAttributeValue(s,r))===null||u===void 0)&&u.endsWith(a))&&e(s)}},any:function(e,t,n){var i=n.adapter,r=t.name,a=t.value;if(a==="")return w0.default.falseFunc;if(Al(t,n)){var o=new RegExp(L5(a),"i");return function(u){var c=i.getAttributeValue(u,r);return c!=null&&c.length>=a.length&&o.test(c)&&e(u)}}return function(s){var u;return!!(!((u=i.getAttributeValue(s,r))===null||u===void 0)&&u.includes(a))&&e(s)}},not:function(e,t,n){var i=n.adapter,r=t.name,a=t.value;return a===""?function(o){return!!i.getAttributeValue(o,r)&&e(o)}:Al(t,n)?(a=a.toLowerCase(),function(o){var s=i.getAttributeValue(o,r);return(s==null||s.length!==a.length||s.toLowerCase()!==a)&&e(o)}):function(o){return i.getAttributeValue(o,r)!==a&&e(o)}}};var DS={},B5={},F5={},I0={};Object.defineProperty(I0,"__esModule",{value:!0}),I0.parse=void 0;var jie=new Set([9,10,12,13,32]),H5="0".charCodeAt(0),Vie="9".charCodeAt(0);function Yie(e){if(e=e.trim().toLowerCase(),e==="even")return[2,0];if(e==="odd")return[2,1];var t=0,n=0,i=a(),r=o();if(t<e.length&&e.charAt(t)==="n"&&(t++,n=i*(r??1),s(),t<e.length?(i=a(),s(),r=o()):i=r=0),r===null||t<e.length)throw new Error("n-th rule couldn't be parsed ('".concat(e,"')"));return[n,i*r];function a(){return e.charAt(t)==="-"?(t++,-1):(e.charAt(t)==="+"&&t++,1)}function o(){for(var u=t,c=0;t<e.length&&e.charCodeAt(t)>=H5&&e.charCodeAt(t)<=Vie;)c=c*10+(e.charCodeAt(t)-H5),t++;return t===u?null:c}function s(){for(;t<e.length&&jie.has(e.charCodeAt(t));)t++}}I0.parse=Yie;var cc={},Wie=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cc,"__esModule",{value:!0}),cc.generate=cc.compile=void 0;var $5=Wie(Sl);function qie(e){var t=e[0],n=e[1]-1;if(n<0&&t<=0)return $5.default.falseFunc;if(t===-1)return function(a){return a<=n};if(t===0)return function(a){return a===n};if(t===1)return n<0?$5.default.trueFunc:function(a){return a>=n};var i=Math.abs(t),r=(n%i+i)%i;return t>1?function(a){return a>=n&&a%i===r}:function(a){return a<=n&&a%i===r}}cc.compile=qie;function Xie(e){var t=e[0],n=e[1]-1,i=0;if(t<0){var r=-t,a=(n%r+r)%r;return function(){var o=a+r*i++;return o>n?null:o}}return t===0?n<0?function(){return null}:function(){return i++===0?n:null}:(n<0&&(n+=t*Math.ceil(-n/t)),function(){return t*i+++n})}cc.generate=Xie,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sequence=e.generate=e.compile=e.parse=void 0;var t=I0;Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return t.parse}});var n=cc;Object.defineProperty(e,"compile",{enumerable:!0,get:function(){return n.compile}}),Object.defineProperty(e,"generate",{enumerable:!0,get:function(){return n.generate}});function i(a){return(0,n.compile)((0,t.parse)(a))}e.default=i;function r(a){return(0,n.generate)((0,t.parse)(a))}e.sequence=r}(F5),function(e){var t=Pe&&Pe.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.filters=void 0;var n=t(F5),i=t(Sl);function r(o,s){return function(u){var c=s.getParent(u);return c!=null&&s.isTag(c)&&o(u)}}e.filters={contains:function(o,s,u){var c=u.adapter;return function(f){return o(f)&&c.getText(f).includes(s)}},icontains:function(o,s,u){var c=u.adapter,l=s.toLowerCase();return function(h){return o(h)&&c.getText(h).toLowerCase().includes(l)}},"nth-child":function(o,s,u){var c=u.adapter,l=u.equals,f=(0,n.default)(s);return f===i.default.falseFunc?i.default.falseFunc:f===i.default.trueFunc?r(o,c):function(d){for(var p=c.getSiblings(d),m=0,g=0;g<p.length&&!l(d,p[g]);g++)c.isTag(p[g])&&m++;return f(m)&&o(d)}},"nth-last-child":function(o,s,u){var c=u.adapter,l=u.equals,f=(0,n.default)(s);return f===i.default.falseFunc?i.default.falseFunc:f===i.default.trueFunc?r(o,c):function(d){for(var p=c.getSiblings(d),m=0,g=p.length-1;g>=0&&!l(d,p[g]);g--)c.isTag(p[g])&&m++;return f(m)&&o(d)}},"nth-of-type":function(o,s,u){var c=u.adapter,l=u.equals,f=(0,n.default)(s);return f===i.default.falseFunc?i.default.falseFunc:f===i.default.trueFunc?r(o,c):function(d){for(var p=c.getSiblings(d),m=0,g=0;g<p.length;g++){var v=p[g];if(l(d,v))break;c.isTag(v)&&c.getName(v)===c.getName(d)&&m++}return f(m)&&o(d)}},"nth-last-of-type":function(o,s,u){var c=u.adapter,l=u.equals,f=(0,n.default)(s);return f===i.default.falseFunc?i.default.falseFunc:f===i.default.trueFunc?r(o,c):function(d){for(var p=c.getSiblings(d),m=0,g=p.length-1;g>=0;g--){var v=p[g];if(l(d,v))break;c.isTag(v)&&c.getName(v)===c.getName(d)&&m++}return f(m)&&o(d)}},root:function(o,s,u){var c=u.adapter;return function(l){var f=c.getParent(l);return(f==null||!c.isTag(f))&&o(l)}},scope:function(o,s,u,c){var l=u.equals;return!c||c.length===0?e.filters.root(o,s,u):c.length===1?function(f){return l(c[0],f)&&o(f)}:function(f){return c.includes(f)&&o(f)}},hover:a("isHovered"),visited:a("isVisited"),active:a("isActive")};function a(o){return function(u,c,l){var f=l.adapter,h=f[o];return typeof h!="function"?i.default.falseFunc:function(p){return h(p)&&u(p)}}}}(B5);var hc={};Object.defineProperty(hc,"__esModule",{value:!0}),hc.verifyPseudoArgs=hc.pseudos=void 0,hc.pseudos={empty:function(e,t){var n=t.adapter;return!n.getChildren(e).some(function(i){return n.isTag(i)||n.getText(i)!==""})},"first-child":function(e,t){var n=t.adapter,i=t.equals;if(n.prevElementSibling)return n.prevElementSibling(e)==null;var r=n.getSiblings(e).find(function(a){return n.isTag(a)});return r!=null&&i(e,r)},"last-child":function(e,t){for(var n=t.adapter,i=t.equals,r=n.getSiblings(e),a=r.length-1;a>=0;a--){if(i(e,r[a]))return!0;if(n.isTag(r[a]))break}return!1},"first-of-type":function(e,t){for(var n=t.adapter,i=t.equals,r=n.getSiblings(e),a=n.getName(e),o=0;o<r.length;o++){var s=r[o];if(i(e,s))return!0;if(n.isTag(s)&&n.getName(s)===a)break}return!1},"last-of-type":function(e,t){for(var n=t.adapter,i=t.equals,r=n.getSiblings(e),a=n.getName(e),o=r.length-1;o>=0;o--){var s=r[o];if(i(e,s))return!0;if(n.isTag(s)&&n.getName(s)===a)break}return!1},"only-of-type":function(e,t){var n=t.adapter,i=t.equals,r=n.getName(e);return n.getSiblings(e).every(function(a){return i(e,a)||!n.isTag(a)||n.getName(a)!==r})},"only-child":function(e,t){var n=t.adapter,i=t.equals;return n.getSiblings(e).every(function(r){return i(e,r)||!n.isTag(r)})}};function Kie(e,t,n,i){if(n===null){if(e.length>i)throw new Error("Pseudo-class :".concat(t," requires an argument"))}else if(e.length===i)throw new Error("Pseudo-class :".concat(t," doesn't have any arguments"))}hc.verifyPseudoArgs=Kie;var k0={};Object.defineProperty(k0,"__esModule",{value:!0}),k0.aliases=void 0,k0.aliases={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"};var O0={};(function(e){var t=Pe&&Pe.__spreadArray||function(c,l,f){if(f||arguments.length===2)for(var h=0,d=l.length,p;h<d;h++)(p||!(h in l))&&(p||(p=Array.prototype.slice.call(l,0,h)),p[h]=l[h]);return c.concat(p||Array.prototype.slice.call(l))},n=Pe&&Pe.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.subselects=e.getNextSiblings=e.ensureIsTag=e.PLACEHOLDER_ELEMENT=void 0;var i=n(Sl),r=uc;e.PLACEHOLDER_ELEMENT={};function a(c,l){return c===i.default.falseFunc?i.default.falseFunc:function(f){return l.isTag(f)&&c(f)}}e.ensureIsTag=a;function o(c,l){var f=l.getSiblings(c);if(f.length<=1)return[];var h=f.indexOf(c);return h<0||h===f.length-1?[]:f.slice(h+1).filter(l.isTag)}e.getNextSiblings=o;function s(c){return{xmlMode:!!c.xmlMode,lowerCaseAttributeNames:!!c.lowerCaseAttributeNames,lowerCaseTags:!!c.lowerCaseTags,quirksMode:!!c.quirksMode,cacheResults:!!c.cacheResults,pseudos:c.pseudos,adapter:c.adapter,equals:c.equals}}var u=function(c,l,f,h,d){var p=d(l,s(f),h);return p===i.default.trueFunc?c:p===i.default.falseFunc?i.default.falseFunc:function(m){return p(m)&&c(m)}};e.subselects={is:u,matches:u,where:u,not:function(c,l,f,h,d){var p=d(l,s(f),h);return p===i.default.falseFunc?c:p===i.default.trueFunc?i.default.falseFunc:function(m){return!p(m)&&c(m)}},has:function(c,l,f,h,d){var p=f.adapter,m=s(f);m.relativeSelector=!0;var g=l.some(function(b){return b.some(r.isTraversal)})?[e.PLACEHOLDER_ELEMENT]:void 0,v=d(l,m,g);if(v===i.default.falseFunc)return i.default.falseFunc;var E=a(v,p);if(g&&v!==i.default.trueFunc){var y=v.shouldTestNextSiblings,T=y===void 0?!1:y;return function(b){if(!c(b))return!1;g[0]=b;var S=p.getChildren(b),w=T?t(t([],S,!0),o(b,p),!0):S;return p.existsOne(E,w)}}return function(b){return c(b)&&p.existsOne(E,p.getChildren(b))}}}})(O0),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.compilePseudoSelector=e.aliases=e.pseudos=e.filters=void 0;var t=td,n=B5;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return n.filters}});var i=hc;Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return i.pseudos}});var r=k0;Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return r.aliases}});var a=O0;function o(s,u,c,l,f){var h,d=u.name,p=u.data;if(Array.isArray(p)){if(!(d in a.subselects))throw new Error("Unknown pseudo-class :".concat(d,"(").concat(p,")"));return a.subselects[d](s,p,c,l,f)}var m=(h=c.pseudos)===null||h===void 0?void 0:h[d],g=typeof m=="string"?m:r.aliases[d];if(typeof g=="string"){if(p!=null)throw new Error("Pseudo ".concat(d," doesn't have any arguments"));var v=(0,t.parse)(g);return a.subselects.is(s,v,c,l,f)}if(typeof m=="function")return(0,i.verifyPseudoArgs)(m,d,p,1),function(y){return m(y,p)&&s(y)};if(d in n.filters)return n.filters[d](s,p,c,l);if(d in i.pseudos){var E=i.pseudos[d];return(0,i.verifyPseudoArgs)(E,d,p,2),function(y){return E(y,c,p)&&s(y)}}throw new Error("Unknown pseudo-class :".concat(d))}e.compilePseudoSelector=o}(DS),Object.defineProperty(C0,"__esModule",{value:!0}),C0.compileGeneralSelector=void 0;var Zie=D0,Qie=DS,ua=td;function wS(e,t){var n=t.getParent(e);return n&&t.isTag(n)?n:null}function Jie(e,t,n,i,r){var a=n.adapter,o=n.equals;switch(t.type){case ua.SelectorType.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case ua.SelectorType.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case ua.SelectorType.Attribute:{if(t.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!n.xmlMode||n.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),Zie.attributeRules[t.action](e,t,n)}case ua.SelectorType.Pseudo:return(0,Qie.compilePseudoSelector)(e,t,n,i,r);case ua.SelectorType.Tag:{if(t.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");var s=t.name;return(!n.xmlMode||n.lowerCaseTags)&&(s=s.toLowerCase()),function(l){return a.getName(l)===s&&e(l)}}case ua.SelectorType.Descendant:{if(n.cacheResults===!1||typeof WeakSet>"u")return function(l){for(var f=l;f=wS(f,a);)if(e(f))return!0;return!1};var u=new WeakSet;return function(l){for(var f=l;f=wS(f,a);)if(!u.has(f)){if(a.isTag(f)&&e(f))return!0;u.add(f)}return!1}}case"_flexibleDescendant":return function(l){var f=l;do if(e(f))return!0;while(f=wS(f,a));return!1};case ua.SelectorType.Parent:return function(l){return a.getChildren(l).some(function(f){return a.isTag(f)&&e(f)})};case ua.SelectorType.Child:return function(l){var f=a.getParent(l);return f!=null&&a.isTag(f)&&e(f)};case ua.SelectorType.Sibling:return function(l){for(var f=a.getSiblings(l),h=0;h<f.length;h++){var d=f[h];if(o(l,d))break;if(a.isTag(d)&&e(d))return!0}return!1};case ua.SelectorType.Adjacent:return a.prevElementSibling?function(l){var f=a.prevElementSibling(l);return f!=null&&e(f)}:function(l){for(var f=a.getSiblings(l),h,d=0;d<f.length;d++){var p=f[d];if(o(l,p))break;a.isTag(p)&&(h=p)}return!!h&&e(h)};case ua.SelectorType.Universal:{if(t.namespace!=null&&t.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}}C0.compileGeneralSelector=Jie;var eae=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),tae=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),nae=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&eae(t,e,n);return tae(t,e),t},rae=Pe&&Pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(os,"__esModule",{value:!0}),os.compileToken=os.compileUnsafe=os.compile=void 0;var ko=td,ss=rae(Sl),IS=nae(uc),iae=C0,U5=O0;function aae(e,t,n){var i=G5(e,t,n);return(0,U5.ensureIsTag)(i,t.adapter)}os.compile=aae;function G5(e,t,n){var i=typeof e=="string"?(0,ko.parse)(e):e;return kS(i,t,n)}os.compileUnsafe=G5;function z5(e){return e.type===ko.SelectorType.Pseudo&&(e.name==="scope"||Array.isArray(e.data)&&e.data.some(function(t){return t.some(z5)}))}var oae={type:ko.SelectorType.Descendant},sae={type:"_flexibleDescendant"},lae={type:ko.SelectorType.Pseudo,name:"scope",data:null};function uae(e,t,n){for(var i=t.adapter,r=!!n?.every(function(u){var c=i.isTag(u)&&i.getParent(u);return u===U5.PLACEHOLDER_ELEMENT||c&&i.isTag(c)}),a=0,o=e;a<o.length;a++){var s=o[a];if(!(s.length>0&&(0,IS.isTraversal)(s[0])&&s[0].type!==ko.SelectorType.Descendant))if(r&&!s.some(z5))s.unshift(oae);else continue;s.unshift(lae)}}function kS(e,t,n){var i;e.forEach(IS.default),n=(i=t.context)!==null&&i!==void 0?i:n;var r=Array.isArray(n),a=n&&(Array.isArray(n)?n:[n]);if(t.relativeSelector!==!1)uae(e,t,a);else if(e.some(function(u){return u.length>0&&(0,IS.isTraversal)(u[0])}))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");var o=!1,s=e.map(function(u){if(u.length>=2){var c=u[0],l=u[1];c.type!==ko.SelectorType.Pseudo||c.name!=="scope"||(r&&l.type===ko.SelectorType.Descendant?u[1]=sae:(l.type===ko.SelectorType.Adjacent||l.type===ko.SelectorType.Sibling)&&(o=!0))}return cae(u,t,a)}).reduce(hae,ss.default.falseFunc);return s.shouldTestNextSiblings=o,s}os.compileToken=kS;function cae(e,t,n){var i;return e.reduce(function(r,a){return r===ss.default.falseFunc?ss.default.falseFunc:(0,iae.compileGeneralSelector)(r,a,t,n,kS)},(i=t.rootFunc)!==null&&i!==void 0?i:ss.default.trueFunc)}function hae(e,t){return t===ss.default.falseFunc||e===ss.default.trueFunc?e:e===ss.default.falseFunc||t===ss.default.trueFunc?t:function(i){return e(i)||t(i)}}(function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(E,y,T,b){b===void 0&&(b=T);var S=Object.getOwnPropertyDescriptor(y,T);(!S||("get"in S?!y.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return y[T]}}),Object.defineProperty(E,b,S)}:function(E,y,T,b){b===void 0&&(b=T),E[b]=y[T]}),n=Pe&&Pe.__setModuleDefault||(Object.create?function(E,y){Object.defineProperty(E,"default",{enumerable:!0,value:y})}:function(E,y){E.default=y}),i=Pe&&Pe.__importStar||function(E){if(E&&E.__esModule)return E;var y={};if(E!=null)for(var T in E)T!=="default"&&Object.prototype.hasOwnProperty.call(E,T)&&t(y,E,T);return n(y,E),y},r=Pe&&Pe.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(e,"__esModule",{value:!0}),e.aliases=e.pseudos=e.filters=e.is=e.selectOne=e.selectAll=e.prepareContext=e._compileToken=e._compileUnsafe=e.compile=void 0;var a=i($a),o=r(Sl),s=os,u=O0,c=function(E,y){return E===y},l={adapter:a,equals:c};function f(E){var y,T,b,S,w=E??l;return(y=w.adapter)!==null&&y!==void 0||(w.adapter=a),(T=w.equals)!==null&&T!==void 0||(w.equals=(S=(b=w.adapter)===null||b===void 0?void 0:b.equals)!==null&&S!==void 0?S:c),w}function h(E){return function(T,b,S){var w=f(b);return E(T,w,S)}}e.compile=h(s.compile),e._compileUnsafe=h(s.compileUnsafe),e._compileToken=h(s.compileToken);function d(E){return function(T,b,S){var w=f(S);typeof T!="function"&&(T=(0,s.compileUnsafe)(T,w,b));var D=p(b,w.adapter,T.shouldTestNextSiblings);return E(T,D,w)}}function p(E,y,T){return T===void 0&&(T=!1),T&&(E=m(E,y)),Array.isArray(E)?y.removeSubsets(E):y.getChildren(E)}e.prepareContext=p;function m(E,y){for(var T=Array.isArray(E)?E.slice(0):[E],b=T.length,S=0;S<b;S++){var w=(0,u.getNextSiblings)(T[S],y);T.push.apply(T,w)}return T}e.selectAll=d(function(E,y,T){return E===o.default.falseFunc||!y||y.length===0?[]:T.adapter.findAll(E,y)}),e.selectOne=d(function(E,y,T){return E===o.default.falseFunc||!y||y.length===0?null:T.adapter.findOne(E,y)});function g(E,y,T){var b=f(T);return(typeof y=="function"?y:(0,s.compile)(y,b))(E)}e.is=g,e.default=e.selectAll;var v=DS;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return v.filters}}),Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return v.pseudos}}),Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return v.aliases}})})(CS);var fc={},OS={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLimit=e.isFilter=e.filterNames=void 0,e.filterNames=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function t(i){return i.type!=="pseudo"?!1:e.filterNames.has(i.name)?!0:i.name==="not"&&Array.isArray(i.data)?i.data.some(function(r){return r.some(t)}):!1}e.isFilter=t;function n(i,r,a){var o=r!=null?parseInt(r,10):NaN;switch(i){case"first":return 1;case"nth":case"eq":return isFinite(o)?o>=0?o+1:1/0:0;case"lt":return isFinite(o)?o>=0?Math.min(o,a):1/0:0;case"gt":return isFinite(o)?1/0:0;case"odd":return 2*a;case"even":return 2*a-1;case"last":case"not":return 1/0}}e.getLimit=n})(OS),Object.defineProperty(fc,"__esModule",{value:!0}),fc.groupSelectors=fc.getDocumentRoot=void 0;var fae=OS;function dae(e){for(;e.parent;)e=e.parent;return e}fc.getDocumentRoot=dae;function pae(e){for(var t=[],n=[],i=0,r=e;i<r.length;i++){var a=r[i];a.some(fae.isFilter)?t.push(a):n.push(a)}return[n,t]}fc.groupSelectors=pae,function(e){var t=Pe&&Pe.__assign||function(){return t=Object.assign||function(M){for(var k,L=1,$=arguments.length;L<$;L++){k=arguments[L];for(var P in k)Object.prototype.hasOwnProperty.call(k,P)&&(M[P]=k[P])}return M},t.apply(this,arguments)},n=Pe&&Pe.__createBinding||(Object.create?function(M,k,L,$){$===void 0&&($=L);var P=Object.getOwnPropertyDescriptor(k,L);(!P||("get"in P?!k.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return k[L]}}),Object.defineProperty(M,$,P)}:function(M,k,L,$){$===void 0&&($=L),M[$]=k[L]}),i=Pe&&Pe.__setModuleDefault||(Object.create?function(M,k){Object.defineProperty(M,"default",{enumerable:!0,value:k})}:function(M,k){M.default=k}),r=Pe&&Pe.__importStar||function(M){if(M&&M.__esModule)return M;var k={};if(M!=null)for(var L in M)L!=="default"&&Object.prototype.hasOwnProperty.call(M,L)&&n(k,M,L);return i(k,M),k},a=Pe&&Pe.__spreadArray||function(M,k,L){if(L||arguments.length===2)for(var $=0,P=k.length,B;$<P;$++)(B||!($ in k))&&(B||(B=Array.prototype.slice.call(k,0,$)),B[$]=k[$]);return M.concat(B||Array.prototype.slice.call(k))};Object.defineProperty(e,"__esModule",{value:!0}),e.select=e.filter=e.some=e.is=e.aliases=e.pseudos=e.filters=void 0;var o=td,s=CS,u=r($a),c=r(Sl),l=fc,f=OS,h=CS;Object.defineProperty(e,"filters",{enumerable:!0,get:function(){return h.filters}}),Object.defineProperty(e,"pseudos",{enumerable:!0,get:function(){return h.pseudos}}),Object.defineProperty(e,"aliases",{enumerable:!0,get:function(){return h.aliases}});var d={type:o.SelectorType.Universal,namespace:null},p={type:o.SelectorType.Pseudo,name:"scope",data:null};function m(M,k,L){return L===void 0&&(L={}),g([M],k,L)}e.is=m;function g(M,k,L){if(L===void 0&&(L={}),typeof k=="function")return M.some(k);var $=(0,l.groupSelectors)((0,o.parse)(k)),P=$[0],B=$[1];return P.length>0&&M.some((0,s._compileToken)(P,L))||B.some(function(X){return T(X,M,L).length>0})}e.some=g;function v(M,k,L,$){var P=typeof L=="string"?parseInt(L,10):NaN;switch(M){case"first":case"lt":return k;case"last":return k.length>0?[k[k.length-1]]:k;case"nth":case"eq":return isFinite(P)&&Math.abs(P)<k.length?[P<0?k[k.length+P]:k[P]]:[];case"gt":return isFinite(P)?k.slice(P+1):[];case"even":return k.filter(function(X,ee){return ee%2===0});case"odd":return k.filter(function(X,ee){return ee%2===1});case"not":{var B=new Set(y(L,k,$));return k.filter(function(X){return!B.has(X)})}}}function E(M,k,L){return L===void 0&&(L={}),y((0,o.parse)(M),k,L)}e.filter=E;function y(M,k,L){if(k.length===0)return[];var $=(0,l.groupSelectors)(M),P=$[0],B=$[1],X;if(P.length){var ee=R(k,P,L);if(B.length===0)return ee;ee.length&&(X=new Set(ee))}for(var se=0;se<B.length&&X?.size!==k.length;se++){var fe=B[se],Z=X?k.filter(function(j){return u.isTag(j)&&!X.has(j)}):k;if(Z.length===0)break;var ee=T(fe,k,L);if(ee.length)if(X)ee.forEach(function(j){return X.add(j)});else{if(se===B.length-1)return ee;X=new Set(ee)}}return typeof X<"u"?X.size===k.length?k:k.filter(function(he){return X.has(he)}):[]}function T(M,k,L){var $;if(M.some(o.isTraversal)){var P=($=L.root)!==null&&$!==void 0?$:(0,l.getDocumentRoot)(k[0]),B=t(t({},L),{context:k,relativeSelector:!1});return M.push(p),S(P,M,B,!0,k.length)}return S(k,M,L,!1,k.length)}function b(M,k,L,$){if(L===void 0&&(L={}),$===void 0&&($=1/0),typeof M=="function")return D(k,M);var P=(0,l.groupSelectors)((0,o.parse)(M)),B=P[0],X=P[1],ee=X.map(function(se){return S(k,se,L,!0,$)});return B.length&&ee.push(w(k,B,L,$)),ee.length===0?[]:ee.length===1?ee[0]:u.uniqueSort(ee.reduce(function(se,fe){return a(a([],se,!0),fe,!0)}))}e.select=b;function S(M,k,L,$,P){var B=k.findIndex(f.isFilter),X=k.slice(0,B),ee=k[B],se=k.length-1===B?P:1/0,fe=(0,f.getLimit)(ee.name,ee.data,se);if(fe===0)return[];var Z=X.length===0&&!Array.isArray(M)?u.getChildren(M).filter(u.isTag):X.length===0?(Array.isArray(M)?M:[M]).filter(u.isTag):$||X.some(o.isTraversal)?w(M,[X],L,fe):R(M,[X],L),he=Z.slice(0,fe),j=v(ee.name,he,ee.data,L);if(j.length===0||k.length===B+1)return j;var H=k.slice(B+1),G=H.some(o.isTraversal);if(G){if((0,o.isTraversal)(H[0])){var K=H[0].type;(K===o.SelectorType.Sibling||K===o.SelectorType.Adjacent)&&(j=(0,s.prepareContext)(j,u,!0)),H.unshift(d)}L=t(t({},L),{relativeSelector:!1,rootFunc:function(ae){return j.includes(ae)}})}else L.rootFunc&&L.rootFunc!==c.trueFunc&&(L=t(t({},L),{rootFunc:c.trueFunc}));return H.some(f.isFilter)?S(j,H,L,!1,P):G?w(j,[H],L,P):R(j,[H],L)}function w(M,k,L,$){var P=(0,s._compileToken)(k,L,M);return D(M,P,$)}function D(M,k,L){L===void 0&&(L=1/0);var $=(0,s.prepareContext)(M,u,k.shouldTestNextSiblings);return u.find(function(P){return u.isTag(P)&&k(P)},$,!0,L)}function R(M,k,L){var $=(Array.isArray(M)?M:[M]).filter(u.isTag);if($.length===0)return $;var P=(0,s._compileToken)(k,L);return P===c.trueFunc?$:$.filter(P)}}(S5);var mae=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),gae=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),vae=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&mae(t,e,n);return gae(t,e),t},xS=Pe&&Pe.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,r=t.length,a;i<r;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(tt,"__esModule",{value:!0}),tt.addBack=tt.add=tt.end=tt.slice=tt.index=tt.toArray=tt.get=tt.eq=tt.last=tt.first=tt.has=tt.not=tt.is=tt.filterArray=tt.filter=tt.map=tt.each=tt.contents=tt.children=tt.siblings=tt.prevUntil=tt.prevAll=tt.prev=tt.nextUntil=tt.nextAll=tt.next=tt.closest=tt.parentsUntil=tt.parents=tt.parent=tt.find=void 0;var x0=Vr,dc=vae(S5),ca=as,yae=Gn,Ga=$a,Tae=/^\s*[~+]/;function Eae(e){var t;if(!e)return this._make([]);var n=this.toArray();if(typeof e!="string"){var i=(0,ca.isCheerio)(e)?e.toArray():[e];return this._make(i.filter(function(o){return n.some(function(s){return(0,yae.contains)(s,o)})}))}var r=Tae.test(e)?n:this.children().toArray(),a={context:n,root:(t=this._root)===null||t===void 0?void 0:t[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(dc.select(e,r,a))}tt.find=Eae;function PS(e){return function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return function(r){var a,o=e(t,this);return r&&(o=MS(o,r,this.options.xmlMode,(a=this._root)===null||a===void 0?void 0:a[0])),this._make(this.length>1&&o.length>1?n.reduce(function(s,u){return u(s)},o):o)}}}var nd=PS(function(e,t){for(var n,i=[],r=0;r<t.length;r++){var a=e(t[r]);i.push(a)}return(n=new Array).concat.apply(n,i)}),RS=PS(function(e,t){for(var n=[],i=0;i<t.length;i++){var r=e(t[i]);r!==null&&n.push(r)}return n});function NS(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=null,r=PS(function(a,o){var s=[];return(0,ca.domEach)(o,function(u){for(var c;(c=a(u))&&!i?.(c,s.length);u=c)s.push(c)}),s}).apply(void 0,xS([e],t,!1));return function(a,o){var s=this;i=typeof a=="string"?function(c){return dc.is(c,a,s.options)}:a?rd(a):null;var u=r.call(this,o);return i=null,u}}function pc(e){return Array.from(new Set(e))}tt.parent=RS(function(e){var t=e.parent;return t&&!(0,x0.isDocument)(t)?t:null},pc),tt.parents=nd(function(e){for(var t=[];e.parent&&!(0,x0.isDocument)(e.parent);)t.push(e.parent),e=e.parent;return t},Ga.uniqueSort,function(e){return e.reverse()}),tt.parentsUntil=NS(function(e){var t=e.parent;return t&&!(0,x0.isDocument)(t)?t:null},Ga.uniqueSort,function(e){return e.reverse()});function bae(e){var t,n=[];if(!e)return this._make(n);var i={xmlMode:this.options.xmlMode,root:(t=this._root)===null||t===void 0?void 0:t[0]},r=typeof e=="string"?function(a){return dc.is(a,e,i)}:rd(e);return(0,ca.domEach)(this,function(a){for(;a&&(0,ca.isTag)(a);){if(r(a,0)){n.includes(a)||n.push(a);break}a=a.parent}}),this._make(n)}tt.closest=bae,tt.next=RS(function(e){return(0,Ga.nextElementSibling)(e)}),tt.nextAll=nd(function(e){for(var t=[];e.next;)e=e.next,(0,ca.isTag)(e)&&t.push(e);return t},pc),tt.nextUntil=NS(function(e){return(0,Ga.nextElementSibling)(e)},pc),tt.prev=RS(function(e){return(0,Ga.prevElementSibling)(e)}),tt.prevAll=nd(function(e){for(var t=[];e.prev;)e=e.prev,(0,ca.isTag)(e)&&t.push(e);return t},pc),tt.prevUntil=NS(function(e){return(0,Ga.prevElementSibling)(e)},pc),tt.siblings=nd(function(e){return(0,Ga.getSiblings)(e).filter(function(t){return(0,ca.isTag)(t)&&t!==e})},Ga.uniqueSort),tt.children=nd(function(e){return(0,Ga.getChildren)(e).filter(ca.isTag)},pc);function _ae(){var e=this.toArray().reduce(function(t,n){return(0,x0.hasChildren)(n)?t.concat(n.children):t},[]);return this._make(e)}tt.contents=_ae;function Sae(e){for(var t=0,n=this.length;t<n&&e.call(this[t],t,this[t])!==!1;)++t;return this}tt.each=Sae;function Aae(e){for(var t=[],n=0;n<this.length;n++){var i=this[n],r=e.call(i,n,i);r!=null&&(t=t.concat(r))}return this._make(t)}tt.map=Aae;function rd(e){return typeof e=="function"?function(t,n){return e.call(t,n,t)}:(0,ca.isCheerio)(e)?function(t){return Array.prototype.includes.call(e,t)}:function(t){return e===t}}function Cae(e){var t;return this._make(MS(this.toArray(),e,this.options.xmlMode,(t=this._root)===null||t===void 0?void 0:t[0]))}tt.filter=Cae;function MS(e,t,n,i){return typeof t=="string"?dc.filter(t,e,{xmlMode:n,root:i}):e.filter(rd(t))}tt.filterArray=MS;function Dae(e){var t=this.toArray();return typeof e=="string"?dc.some(t.filter(ca.isTag),e,this.options):e?t.some(rd(e)):!1}tt.is=Dae;function wae(e){var t=this.toArray();if(typeof e=="string"){var n=new Set(dc.filter(e,t,this.options));t=t.filter(function(r){return!n.has(r)})}else{var i=rd(e);t=t.filter(function(r,a){return!i(r,a)})}return this._make(t)}tt.not=wae;function Iae(e){var t=this;return this.filter(typeof e=="string"?":has(".concat(e,")"):function(n,i){return t._make(i).find(e).length>0})}tt.has=Iae;function kae(){return this.length>1?this._make(this[0]):this}tt.first=kae;function Oae(){return this.length>0?this._make(this[this.length-1]):this}tt.last=Oae;function xae(e){var t;return e=+e,e===0&&this.length<=1?this:(e<0&&(e=this.length+e),this._make((t=this[e])!==null&&t!==void 0?t:[]))}tt.eq=xae;function Pae(e){return e==null?this.toArray():this[e<0?this.length+e:e]}tt.get=Pae;function Rae(){return Array.prototype.slice.call(this)}tt.toArray=Rae;function Nae(e){var t,n;return e==null?(t=this.parent().children(),n=this[0]):typeof e=="string"?(t=this._make(e),n=this[0]):(t=this,n=(0,ca.isCheerio)(e)?e[0]:e),Array.prototype.indexOf.call(t,n)}tt.index=Nae;function Mae(e,t){return this._make(Array.prototype.slice.call(this,e,t))}tt.slice=Mae;function Lae(){var e;return(e=this.prevObject)!==null&&e!==void 0?e:this._make([])}tt.end=Lae;function Bae(e,t){var n=this._make(e,t),i=(0,Ga.uniqueSort)(xS(xS([],this.get(),!0),n.get(),!0));return this._make(i)}tt.add=Bae;function Fae(e){return this.prevObject?this.add(e?this.prevObject.filter(e):this.prevObject):this}tt.addBack=Fae;var At={},Cl={};Object.defineProperty(Cl,"__esModule",{value:!0}),Cl.update=Cl.getParse=void 0;var Hae=$a,j5=Vr;function $ae(e){return function(n,i,r,a){if(typeof Buffer<"u"&&Buffer.isBuffer(n)&&(n=n.toString()),typeof n=="string")return e(n,i,r,a);var o=n;if(!Array.isArray(o)&&(0,j5.isDocument)(o))return o;var s=new j5.Document([]);return V5(o,s),s}}Cl.getParse=$ae;function V5(e,t){var n=Array.isArray(e)?e:[e];t?t.children=n:t=null;for(var i=0;i<n.length;i++){var r=n[i];r.parent&&r.parent.children!==n&&(0,Hae.removeElement)(r),t?(r.prev=n[i-1]||null,r.next=n[i+1]||null):r.prev=r.next=null,r.parent=t}return t}Cl.update=V5;var Uae=Pe&&Pe.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,r=t.length,a;i<r;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(At,"__esModule",{value:!0}),At.clone=At.text=At.toString=At.html=At.empty=At.replaceWith=At.remove=At.insertBefore=At.before=At.insertAfter=At.after=At.wrapAll=At.unwrap=At.wrapInner=At.wrap=At.prepend=At.append=At.prependTo=At.appendTo=At._makeDomArray=void 0;var za=Vr,mc=Cl,Y5=Gn,Jn=as,Gae=$a;function zae(e,t){var n=this;return e==null?[]:(0,Jn.isCheerio)(e)?t?(0,Jn.cloneDom)(e.get()):e.get():Array.isArray(e)?e.reduce(function(i,r){return i.concat(n._makeDomArray(r,t))},[]):typeof e=="string"?this._parse(e,this.options,!1,null).children:t?(0,Jn.cloneDom)([e]):[e]}At._makeDomArray=zae;function W5(e){return function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=this.length-1;return(0,Jn.domEach)(this,function(a,o){if(!!(0,za.hasChildren)(a)){var s=typeof n[0]=="function"?n[0].call(a,o,t._render(a.children)):n,u=t._makeDomArray(s,o<r);e(u,a.children,a)}})}}function ls(e,t,n,i,r){for(var a,o,s=Uae([t,n],i,!0),u=t===0?null:e[t-1],c=t+n>=e.length?null:e[t+n],l=0;l<i.length;++l){var f=i[l],h=f.parent;if(h){var d=h.children,p=d.indexOf(f);p>-1&&(h.children.splice(p,1),r===h&&t>p&&s[0]--)}f.parent=r,f.prev&&(f.prev.next=(a=f.next)!==null&&a!==void 0?a:null),f.next&&(f.next.prev=(o=f.prev)!==null&&o!==void 0?o:null),f.prev=l===0?u:i[l-1],f.next=l===i.length-1?c:i[l+1]}return u&&(u.next=i[0]),c&&(c.prev=i[i.length-1]),e.splice.apply(e,s)}function jae(e){var t=(0,Jn.isCheerio)(e)?e:this._make(e);return t.append(this),this}At.appendTo=jae;function Vae(e){var t=(0,Jn.isCheerio)(e)?e:this._make(e);return t.prepend(this),this}At.prependTo=Vae,At.append=W5(function(e,t,n){ls(t,t.length,0,e,n)}),At.prepend=W5(function(e,t,n){ls(t,0,0,e,n)});function q5(e){return function(t){for(var n=this.length-1,i=this.parents().last(),r=0;r<this.length;r++){var a=this[r],o=typeof t=="function"?t.call(a,r,a):typeof t=="string"&&!(0,Jn.isHtml)(t)?i.find(t).clone():t,s=this._makeDomArray(o,r<n)[0];if(!(!s||!(0,za.hasChildren)(s))){for(var u=s,c=0;c<u.children.length;){var l=u.children[c];(0,Jn.isTag)(l)?(u=l,c=0):c++}e(a,u,[s])}}return this}}At.wrap=q5(function(e,t,n){var i=e.parent;if(!!i){var r=i.children,a=r.indexOf(e);(0,mc.update)([e],t),ls(r,a,0,n,i)}}),At.wrapInner=q5(function(e,t,n){!(0,za.hasChildren)(e)||((0,mc.update)(e.children,t),(0,mc.update)(n,e))});function Yae(e){var t=this;return this.parent(e).not("body").each(function(n,i){t._make(i).replaceWith(i.children)}),this}At.unwrap=Yae;function Wae(e){var t=this[0];if(t){for(var n=this._make(typeof e=="function"?e.call(t,0,t):e).insertBefore(t),i=void 0,r=0;r<n.length;r++)n[r].type==="tag"&&(i=n[r]);for(var a=0;i&&a<i.children.length;){var o=i.children[a];o.type==="tag"?(i=o,a=0):a++}i&&this._make(i).append(this)}return this}At.wrapAll=Wae;function qae(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.length-1;return(0,Jn.domEach)(this,function(r,a){var o=r.parent;if(!(!(0,za.hasChildren)(r)||!o)){var s=o.children,u=s.indexOf(r);if(!(u<0)){var c=typeof t[0]=="function"?t[0].call(r,a,e._render(r.children)):t,l=e._makeDomArray(c,a<i);ls(s,u+1,0,l,o)}}})}At.after=qae;function Xae(e){var t=this;typeof e=="string"&&(e=this._make(e)),this.remove();var n=[];return this._makeDomArray(e).forEach(function(i){var r=t.clone().toArray(),a=i.parent;if(!!a){var o=a.children,s=o.indexOf(i);s<0||(ls(o,s+1,0,r,a),n.push.apply(n,r))}}),this._make(n)}At.insertAfter=Xae;function Kae(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this.length-1;return(0,Jn.domEach)(this,function(r,a){var o=r.parent;if(!(!(0,za.hasChildren)(r)||!o)){var s=o.children,u=s.indexOf(r);if(!(u<0)){var c=typeof t[0]=="function"?t[0].call(r,a,e._render(r.children)):t,l=e._makeDomArray(c,a<i);ls(s,u,0,l,o)}}})}At.before=Kae;function Zae(e){var t=this,n=this._make(e);this.remove();var i=[];return(0,Jn.domEach)(n,function(r){var a=t.clone().toArray(),o=r.parent;if(!!o){var s=o.children,u=s.indexOf(r);u<0||(ls(s,u,0,a,o),i.push.apply(i,a))}}),this._make(i)}At.insertBefore=Zae;function Qae(e){var t=e?this.filter(e):this;return(0,Jn.domEach)(t,function(n){(0,Gae.removeElement)(n),n.prev=n.next=n.parent=null}),this}At.remove=Qae;function Jae(e){var t=this;return(0,Jn.domEach)(this,function(n,i){var r=n.parent;if(!!r){var a=r.children,o=typeof e=="function"?e.call(n,i,n):e,s=t._makeDomArray(o);(0,mc.update)(s,null);var u=a.indexOf(n);ls(a,u,1,s,r),s.includes(n)||(n.parent=n.prev=n.next=null)}})}At.replaceWith=Jae;function eoe(){return(0,Jn.domEach)(this,function(e){!(0,za.hasChildren)(e)||(e.children.forEach(function(t){t.next=t.prev=t.parent=null}),e.children.length=0)})}At.empty=eoe;function toe(e){var t=this;if(e===void 0){var n=this[0];return!n||!(0,za.hasChildren)(n)?null:this._render(n.children)}return(0,Jn.domEach)(this,function(i){if(!!(0,za.hasChildren)(i)){i.children.forEach(function(a){a.next=a.prev=a.parent=null});var r=(0,Jn.isCheerio)(e)?e.toArray():t._parse("".concat(e),t.options,!1,i).children;(0,mc.update)(r,i)}})}At.html=toe;function noe(){return this._render(this)}At.toString=noe;function roe(e){var t=this;return e===void 0?(0,Y5.text)(this):typeof e=="function"?(0,Jn.domEach)(this,function(n,i){return t._make(n).text(e.call(n,i,(0,Y5.text)([n])))}):(0,Jn.domEach)(this,function(n){if(!!(0,za.hasChildren)(n)){n.children.forEach(function(r){r.next=r.prev=r.parent=null});var i=new za.Text("".concat(e));(0,mc.update)(i,n)}})}At.text=roe;function ioe(){return this._make((0,Jn.cloneDom)(this.get()))}At.clone=ioe;var P0={};Object.defineProperty(P0,"__esModule",{value:!0}),P0.css=void 0;var LS=as;function aoe(e,t){if(e!=null&&t!=null||typeof e=="object"&&!Array.isArray(e))return(0,LS.domEach)(this,function(n,i){(0,LS.isTag)(n)&&X5(n,e,t,i)});if(this.length!==0)return K5(this[0],e)}P0.css=aoe;function X5(e,t,n,i){if(typeof t=="string"){var r=K5(e),a=typeof n=="function"?n.call(e,i,r[t]):n;a===""?delete r[t]:a!=null&&(r[t]=a),e.attribs.style=ooe(r)}else typeof t=="object"&&Object.keys(t).forEach(function(o,s){X5(e,o,t[o],s)})}function K5(e,t){if(!(!e||!(0,LS.isTag)(e))){var n=soe(e.attribs.style);if(typeof t=="string")return n[t];if(Array.isArray(t)){var i={};return t.forEach(function(r){n[r]!=null&&(i[r]=n[r])}),i}return n}}function ooe(e){return Object.keys(e).reduce(function(t,n){return"".concat(t).concat(t?" ":"").concat(n,": ").concat(e[n],";")},"")}function soe(e){if(e=(e||"").trim(),!e)return{};for(var t={},n,i=0,r=e.split(";");i<r.length;i++){var a=r[i],o=a.indexOf(":");if(o<1||o===a.length-1){var s=a.trimEnd();s.length>0&&n!==void 0&&(t[n]+=";".concat(s))}else n=a.slice(0,o).trim(),t[n]=a.slice(o+1).trim()}return t}var gc={};Object.defineProperty(gc,"__esModule",{value:!0}),gc.serializeArray=gc.serialize=void 0;var loe=as,Z5="input,select,textarea,keygen",uoe=/%20/g,Q5=/\r?\n/g;function coe(){var e=this.serializeArray(),t=e.map(function(n){return"".concat(encodeURIComponent(n.name),"=").concat(encodeURIComponent(n.value))});return t.join("&").replace(uoe,"+")}gc.serialize=coe;function hoe(){var e=this;return this.map(function(t,n){var i=e._make(n);return(0,loe.isTag)(n)&&n.name==="form"?i.find(Z5).toArray():i.filter(Z5).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map(function(t,n){var i,r=e._make(n),a=r.attr("name"),o=(i=r.val())!==null&&i!==void 0?i:"";return Array.isArray(o)?o.map(function(s){return{name:a,value:s.replace(Q5,`\r
`)}}):{name:a,value:o.replace(Q5,`\r
`)}}).toArray()}gc.serializeArray=hoe;var foe=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),doe=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),id=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&foe(t,e,n);return doe(t,e),t};Object.defineProperty(_0,"__esModule",{value:!0}),_0.Cheerio=void 0;var poe=id(qn),moe=id(tt),goe=id(At),voe=id(P0),yoe=id(gc),ad=function(){function e(t,n,i){if(this.length=0,this.options=i,this._root=n,t){for(var r=0;r<t.length;r++)this[r]=t[r];this.length=t.length}}return e}();_0.Cheerio=ad,ad.prototype.cheerio="[cheerio object]",ad.prototype.splice=Array.prototype.splice,ad.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator],Object.assign(ad.prototype,poe,moe,goe,voe,yoe);var Toe=Pe&&Pe.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),vc=Pe&&Pe.__assign||function(){return vc=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vc.apply(this,arguments)},Eoe=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),boe=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),J5=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&Eoe(t,e,n);return boe(t,e),t};Object.defineProperty(c0,"__esModule",{value:!0}),c0.getLoad=void 0;var BS=J5(ec),_oe=J5(Gn),Soe=_0,od=as;function Aoe(e,t){return function n(i,r,a){if(a===void 0&&(a=!0),i==null)throw new Error("cheerio.load() expects a string");var o=vc(vc({},BS.default),(0,BS.flatten)(r)),s=e(i,o,a,null),u=function(l){Toe(f,l);function f(){return l!==null&&l.apply(this,arguments)||this}return f.prototype._make=function(h,d){var p=c(h,d);return p.prevObject=this,p},f.prototype._parse=function(h,d,p,m){return e(h,d,p,m)},f.prototype._render=function(h){return t(h,this.options)},f}(Soe.Cheerio);function c(l,f,h,d){if(h===void 0&&(h=s),l&&(0,od.isCheerio)(l))return l;var p=vc(vc({},o),(0,BS.flatten)(d)),m=typeof h=="string"?[e(h,p,!1,null)]:"length"in h?h:[h],g=(0,od.isCheerio)(m)?m:new u(m,null,p);if(g._root=g,!l)return new u(void 0,g,p);var v=typeof l=="string"&&(0,od.isHtml)(l)?e(l,p,!1,null).children:Coe(l)?[l]:Array.isArray(l)?l:void 0,E=new u(v,g,p);if(v)return E;if(typeof l!="string")throw new Error("Unexpected type of selector");var y=l,T=f?typeof f=="string"?(0,od.isHtml)(f)?new u([e(f,p,!1,null)],g,p):(y="".concat(f," ").concat(y),g):(0,od.isCheerio)(f)?f:new u(Array.isArray(f)?f:[f],g,p):g;return T?T.find(y):E}return Object.assign(c,_oe,{load:n,_root:s,_options:o,fn:u.prototype,prototype:u.prototype}),c}}c0.getLoad=Aoe;function Coe(e){return!!e.name||e.type==="root"||e.type==="text"||e.type==="comment"}var yc={},eB={},sd={},Dl={},R0={},N0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUndefinedCodePoint=e.isControlCodePoint=e.getSurrogatePairCodePoint=e.isSurrogatePair=e.isSurrogate=e.SEQUENCES=e.CODE_POINTS=e.REPLACEMENT_CHARACTER=void 0;const t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);e.REPLACEMENT_CHARACTER="\uFFFD",function(s){s[s.EOF=-1]="EOF",s[s.NULL=0]="NULL",s[s.TABULATION=9]="TABULATION",s[s.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",s[s.LINE_FEED=10]="LINE_FEED",s[s.FORM_FEED=12]="FORM_FEED",s[s.SPACE=32]="SPACE",s[s.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",s[s.QUOTATION_MARK=34]="QUOTATION_MARK",s[s.NUMBER_SIGN=35]="NUMBER_SIGN",s[s.AMPERSAND=38]="AMPERSAND",s[s.APOSTROPHE=39]="APOSTROPHE",s[s.HYPHEN_MINUS=45]="HYPHEN_MINUS",s[s.SOLIDUS=47]="SOLIDUS",s[s.DIGIT_0=48]="DIGIT_0",s[s.DIGIT_9=57]="DIGIT_9",s[s.SEMICOLON=59]="SEMICOLON",s[s.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",s[s.EQUALS_SIGN=61]="EQUALS_SIGN",s[s.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",s[s.QUESTION_MARK=63]="QUESTION_MARK",s[s.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",s[s.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",s[s.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",s[s.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",s[s.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",s[s.GRAVE_ACCENT=96]="GRAVE_ACCENT",s[s.LATIN_SMALL_A=97]="LATIN_SMALL_A",s[s.LATIN_SMALL_F=102]="LATIN_SMALL_F",s[s.LATIN_SMALL_X=120]="LATIN_SMALL_X",s[s.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",s[s.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"}(e.CODE_POINTS||(e.CODE_POINTS={})),e.SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function n(s){return s>=55296&&s<=57343}e.isSurrogate=n;function i(s){return s>=56320&&s<=57343}e.isSurrogatePair=i;function r(s,u){return(s-55296)*1024+9216+u}e.getSurrogatePairCodePoint=r;function a(s){return s!==32&&s!==10&&s!==13&&s!==9&&s!==12&&s>=1&&s<=31||s>=127&&s<=159}e.isControlCodePoint=a;function o(s){return s>=64976&&s<=65007||t.has(s)}e.isUndefinedCodePoint=o})(N0);var ld={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ERR=void 0,function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(e.ERR||(e.ERR={}))})(ld),Object.defineProperty(R0,"__esModule",{value:!0}),R0.Preprocessor=void 0;const Wr=N0,FS=ld,Doe=1<<16;let woe=function(){function e(t){_classCallCheck3(this,e),this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Doe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}return _createClass3(e,[{key:"col",get:function(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}},{key:"offset",get:function(){return this.droppedBufferSize+this.pos}},{key:"getError",value:function(n){const{line:i,col:r,offset:a}=this;return{code:n,startLine:i,endLine:i,startCol:r,endCol:r,startOffset:a,endOffset:a}}},{key:"_err",value:function(n){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(n)))}},{key:"_addGap",value:function(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}},{key:"_processSurrogate",value:function(n){if(this.pos!==this.html.length-1){const i=this.html.charCodeAt(this.pos+1);if((0,Wr.isSurrogatePair)(i))return this.pos++,this._addGap(),(0,Wr.getSurrogatePairCodePoint)(n,i)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Wr.CODE_POINTS.EOF;return this._err(FS.ERR.surrogateInInputStream),n}},{key:"willDropParsedChunk",value:function(){return this.pos>this.bufferWaterline}},{key:"dropParsedChunk",value:function(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}},{key:"write",value:function(n,i){this.html.length>0?this.html+=n:this.html=n,this.endOfChunkHit=!1,this.lastChunkWritten=i}},{key:"insertHtmlAtCurrentPos",value:function(n){this.html=this.html.substring(0,this.pos+1)+n+this.html.substring(this.pos+1),this.endOfChunkHit=!1}},{key:"startsWith",value:function(n,i){if(this.pos+n.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(i)return this.html.startsWith(n,this.pos);for(let r=0;r<n.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==n.charCodeAt(r))return!1;return!0}},{key:"peek",value:function(n){const i=this.pos+n;if(i>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Wr.CODE_POINTS.EOF;const r=this.html.charCodeAt(i);return r===Wr.CODE_POINTS.CARRIAGE_RETURN?Wr.CODE_POINTS.LINE_FEED:r}},{key:"advance",value:function(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Wr.CODE_POINTS.EOF;let n=this.html.charCodeAt(this.pos);return n===Wr.CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Wr.CODE_POINTS.LINE_FEED):n===Wr.CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,(0,Wr.isSurrogate)(n)&&(n=this._processSurrogate(n)),this.handler.onParseError===null||n>31&&n<127||n===Wr.CODE_POINTS.LINE_FEED||n===Wr.CODE_POINTS.CARRIAGE_RETURN||n>159&&n<64976||this._checkForProblematicCharacters(n),n)}},{key:"_checkForProblematicCharacters",value:function(n){(0,Wr.isControlCodePoint)(n)?this._err(FS.ERR.controlCharacterInInputStream):(0,Wr.isUndefinedCodePoint)(n)&&this._err(FS.ERR.noncharacterInInputStream)}},{key:"retreat",value:function(n){for(this.pos-=n;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}]),e}();R0.Preprocessor=woe;var M0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getTokenAttr=e.TokenType=void 0,function(n){n[n.CHARACTER=0]="CHARACTER",n[n.NULL_CHARACTER=1]="NULL_CHARACTER",n[n.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",n[n.START_TAG=3]="START_TAG",n[n.END_TAG=4]="END_TAG",n[n.COMMENT=5]="COMMENT",n[n.DOCTYPE=6]="DOCTYPE",n[n.EOF=7]="EOF",n[n.HIBERNATION=8]="HIBERNATION"}(e.TokenType||(e.TokenType={}));function t(n,i){for(let r=n.attrs.length-1;r>=0;r--)if(n.attrs[r].name===i)return n.attrs[r].value;return null}e.getTokenAttr=t})(M0);var Oo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasUnescapedText=e.isNumberedHeader=e.SPECIAL_ELEMENTS=e.getTagID=e.TAG_ID=e.TAG_NAMES=e.DOCUMENT_MODE=e.ATTRS=e.NS=void 0;var t;(function(l){l.HTML="http://www.w3.org/1999/xhtml",l.MATHML="http://www.w3.org/1998/Math/MathML",l.SVG="http://www.w3.org/2000/svg",l.XLINK="http://www.w3.org/1999/xlink",l.XML="http://www.w3.org/XML/1998/namespace",l.XMLNS="http://www.w3.org/2000/xmlns/"})(t=e.NS||(e.NS={})),function(l){l.TYPE="type",l.ACTION="action",l.ENCODING="encoding",l.PROMPT="prompt",l.NAME="name",l.COLOR="color",l.FACE="face",l.SIZE="size"}(e.ATTRS||(e.ATTRS={})),function(l){l.NO_QUIRKS="no-quirks",l.QUIRKS="quirks",l.LIMITED_QUIRKS="limited-quirks"}(e.DOCUMENT_MODE||(e.DOCUMENT_MODE={}));var n;(function(l){l.A="a",l.ADDRESS="address",l.ANNOTATION_XML="annotation-xml",l.APPLET="applet",l.AREA="area",l.ARTICLE="article",l.ASIDE="aside",l.B="b",l.BASE="base",l.BASEFONT="basefont",l.BGSOUND="bgsound",l.BIG="big",l.BLOCKQUOTE="blockquote",l.BODY="body",l.BR="br",l.BUTTON="button",l.CAPTION="caption",l.CENTER="center",l.CODE="code",l.COL="col",l.COLGROUP="colgroup",l.DD="dd",l.DESC="desc",l.DETAILS="details",l.DIALOG="dialog",l.DIR="dir",l.DIV="div",l.DL="dl",l.DT="dt",l.EM="em",l.EMBED="embed",l.FIELDSET="fieldset",l.FIGCAPTION="figcaption",l.FIGURE="figure",l.FONT="font",l.FOOTER="footer",l.FOREIGN_OBJECT="foreignObject",l.FORM="form",l.FRAME="frame",l.FRAMESET="frameset",l.H1="h1",l.H2="h2",l.H3="h3",l.H4="h4",l.H5="h5",l.H6="h6",l.HEAD="head",l.HEADER="header",l.HGROUP="hgroup",l.HR="hr",l.HTML="html",l.I="i",l.IMG="img",l.IMAGE="image",l.INPUT="input",l.IFRAME="iframe",l.KEYGEN="keygen",l.LABEL="label",l.LI="li",l.LINK="link",l.LISTING="listing",l.MAIN="main",l.MALIGNMARK="malignmark",l.MARQUEE="marquee",l.MATH="math",l.MENU="menu",l.META="meta",l.MGLYPH="mglyph",l.MI="mi",l.MO="mo",l.MN="mn",l.MS="ms",l.MTEXT="mtext",l.NAV="nav",l.NOBR="nobr",l.NOFRAMES="noframes",l.NOEMBED="noembed",l.NOSCRIPT="noscript",l.OBJECT="object",l.OL="ol",l.OPTGROUP="optgroup",l.OPTION="option",l.P="p",l.PARAM="param",l.PLAINTEXT="plaintext",l.PRE="pre",l.RB="rb",l.RP="rp",l.RT="rt",l.RTC="rtc",l.RUBY="ruby",l.S="s",l.SCRIPT="script",l.SECTION="section",l.SELECT="select",l.SOURCE="source",l.SMALL="small",l.SPAN="span",l.STRIKE="strike",l.STRONG="strong",l.STYLE="style",l.SUB="sub",l.SUMMARY="summary",l.SUP="sup",l.TABLE="table",l.TBODY="tbody",l.TEMPLATE="template",l.TEXTAREA="textarea",l.TFOOT="tfoot",l.TD="td",l.TH="th",l.THEAD="thead",l.TITLE="title",l.TR="tr",l.TRACK="track",l.TT="tt",l.U="u",l.UL="ul",l.SVG="svg",l.VAR="var",l.WBR="wbr",l.XMP="xmp"})(n=e.TAG_NAMES||(e.TAG_NAMES={}));var i;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.A=1]="A",l[l.ADDRESS=2]="ADDRESS",l[l.ANNOTATION_XML=3]="ANNOTATION_XML",l[l.APPLET=4]="APPLET",l[l.AREA=5]="AREA",l[l.ARTICLE=6]="ARTICLE",l[l.ASIDE=7]="ASIDE",l[l.B=8]="B",l[l.BASE=9]="BASE",l[l.BASEFONT=10]="BASEFONT",l[l.BGSOUND=11]="BGSOUND",l[l.BIG=12]="BIG",l[l.BLOCKQUOTE=13]="BLOCKQUOTE",l[l.BODY=14]="BODY",l[l.BR=15]="BR",l[l.BUTTON=16]="BUTTON",l[l.CAPTION=17]="CAPTION",l[l.CENTER=18]="CENTER",l[l.CODE=19]="CODE",l[l.COL=20]="COL",l[l.COLGROUP=21]="COLGROUP",l[l.DD=22]="DD",l[l.DESC=23]="DESC",l[l.DETAILS=24]="DETAILS",l[l.DIALOG=25]="DIALOG",l[l.DIR=26]="DIR",l[l.DIV=27]="DIV",l[l.DL=28]="DL",l[l.DT=29]="DT",l[l.EM=30]="EM",l[l.EMBED=31]="EMBED",l[l.FIELDSET=32]="FIELDSET",l[l.FIGCAPTION=33]="FIGCAPTION",l[l.FIGURE=34]="FIGURE",l[l.FONT=35]="FONT",l[l.FOOTER=36]="FOOTER",l[l.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",l[l.FORM=38]="FORM",l[l.FRAME=39]="FRAME",l[l.FRAMESET=40]="FRAMESET",l[l.H1=41]="H1",l[l.H2=42]="H2",l[l.H3=43]="H3",l[l.H4=44]="H4",l[l.H5=45]="H5",l[l.H6=46]="H6",l[l.HEAD=47]="HEAD",l[l.HEADER=48]="HEADER",l[l.HGROUP=49]="HGROUP",l[l.HR=50]="HR",l[l.HTML=51]="HTML",l[l.I=52]="I",l[l.IMG=53]="IMG",l[l.IMAGE=54]="IMAGE",l[l.INPUT=55]="INPUT",l[l.IFRAME=56]="IFRAME",l[l.KEYGEN=57]="KEYGEN",l[l.LABEL=58]="LABEL",l[l.LI=59]="LI",l[l.LINK=60]="LINK",l[l.LISTING=61]="LISTING",l[l.MAIN=62]="MAIN",l[l.MALIGNMARK=63]="MALIGNMARK",l[l.MARQUEE=64]="MARQUEE",l[l.MATH=65]="MATH",l[l.MENU=66]="MENU",l[l.META=67]="META",l[l.MGLYPH=68]="MGLYPH",l[l.MI=69]="MI",l[l.MO=70]="MO",l[l.MN=71]="MN",l[l.MS=72]="MS",l[l.MTEXT=73]="MTEXT",l[l.NAV=74]="NAV",l[l.NOBR=75]="NOBR",l[l.NOFRAMES=76]="NOFRAMES",l[l.NOEMBED=77]="NOEMBED",l[l.NOSCRIPT=78]="NOSCRIPT",l[l.OBJECT=79]="OBJECT",l[l.OL=80]="OL",l[l.OPTGROUP=81]="OPTGROUP",l[l.OPTION=82]="OPTION",l[l.P=83]="P",l[l.PARAM=84]="PARAM",l[l.PLAINTEXT=85]="PLAINTEXT",l[l.PRE=86]="PRE",l[l.RB=87]="RB",l[l.RP=88]="RP",l[l.RT=89]="RT",l[l.RTC=90]="RTC",l[l.RUBY=91]="RUBY",l[l.S=92]="S",l[l.SCRIPT=93]="SCRIPT",l[l.SECTION=94]="SECTION",l[l.SELECT=95]="SELECT",l[l.SOURCE=96]="SOURCE",l[l.SMALL=97]="SMALL",l[l.SPAN=98]="SPAN",l[l.STRIKE=99]="STRIKE",l[l.STRONG=100]="STRONG",l[l.STYLE=101]="STYLE",l[l.SUB=102]="SUB",l[l.SUMMARY=103]="SUMMARY",l[l.SUP=104]="SUP",l[l.TABLE=105]="TABLE",l[l.TBODY=106]="TBODY",l[l.TEMPLATE=107]="TEMPLATE",l[l.TEXTAREA=108]="TEXTAREA",l[l.TFOOT=109]="TFOOT",l[l.TD=110]="TD",l[l.TH=111]="TH",l[l.THEAD=112]="THEAD",l[l.TITLE=113]="TITLE",l[l.TR=114]="TR",l[l.TRACK=115]="TRACK",l[l.TT=116]="TT",l[l.U=117]="U",l[l.UL=118]="UL",l[l.SVG=119]="SVG",l[l.VAR=120]="VAR",l[l.WBR=121]="WBR",l[l.XMP=122]="XMP"})(i=e.TAG_ID||(e.TAG_ID={}));const r=new Map([[n.A,i.A],[n.ADDRESS,i.ADDRESS],[n.ANNOTATION_XML,i.ANNOTATION_XML],[n.APPLET,i.APPLET],[n.AREA,i.AREA],[n.ARTICLE,i.ARTICLE],[n.ASIDE,i.ASIDE],[n.B,i.B],[n.BASE,i.BASE],[n.BASEFONT,i.BASEFONT],[n.BGSOUND,i.BGSOUND],[n.BIG,i.BIG],[n.BLOCKQUOTE,i.BLOCKQUOTE],[n.BODY,i.BODY],[n.BR,i.BR],[n.BUTTON,i.BUTTON],[n.CAPTION,i.CAPTION],[n.CENTER,i.CENTER],[n.CODE,i.CODE],[n.COL,i.COL],[n.COLGROUP,i.COLGROUP],[n.DD,i.DD],[n.DESC,i.DESC],[n.DETAILS,i.DETAILS],[n.DIALOG,i.DIALOG],[n.DIR,i.DIR],[n.DIV,i.DIV],[n.DL,i.DL],[n.DT,i.DT],[n.EM,i.EM],[n.EMBED,i.EMBED],[n.FIELDSET,i.FIELDSET],[n.FIGCAPTION,i.FIGCAPTION],[n.FIGURE,i.FIGURE],[n.FONT,i.FONT],[n.FOOTER,i.FOOTER],[n.FOREIGN_OBJECT,i.FOREIGN_OBJECT],[n.FORM,i.FORM],[n.FRAME,i.FRAME],[n.FRAMESET,i.FRAMESET],[n.H1,i.H1],[n.H2,i.H2],[n.H3,i.H3],[n.H4,i.H4],[n.H5,i.H5],[n.H6,i.H6],[n.HEAD,i.HEAD],[n.HEADER,i.HEADER],[n.HGROUP,i.HGROUP],[n.HR,i.HR],[n.HTML,i.HTML],[n.I,i.I],[n.IMG,i.IMG],[n.IMAGE,i.IMAGE],[n.INPUT,i.INPUT],[n.IFRAME,i.IFRAME],[n.KEYGEN,i.KEYGEN],[n.LABEL,i.LABEL],[n.LI,i.LI],[n.LINK,i.LINK],[n.LISTING,i.LISTING],[n.MAIN,i.MAIN],[n.MALIGNMARK,i.MALIGNMARK],[n.MARQUEE,i.MARQUEE],[n.MATH,i.MATH],[n.MENU,i.MENU],[n.META,i.META],[n.MGLYPH,i.MGLYPH],[n.MI,i.MI],[n.MO,i.MO],[n.MN,i.MN],[n.MS,i.MS],[n.MTEXT,i.MTEXT],[n.NAV,i.NAV],[n.NOBR,i.NOBR],[n.NOFRAMES,i.NOFRAMES],[n.NOEMBED,i.NOEMBED],[n.NOSCRIPT,i.NOSCRIPT],[n.OBJECT,i.OBJECT],[n.OL,i.OL],[n.OPTGROUP,i.OPTGROUP],[n.OPTION,i.OPTION],[n.P,i.P],[n.PARAM,i.PARAM],[n.PLAINTEXT,i.PLAINTEXT],[n.PRE,i.PRE],[n.RB,i.RB],[n.RP,i.RP],[n.RT,i.RT],[n.RTC,i.RTC],[n.RUBY,i.RUBY],[n.S,i.S],[n.SCRIPT,i.SCRIPT],[n.SECTION,i.SECTION],[n.SELECT,i.SELECT],[n.SOURCE,i.SOURCE],[n.SMALL,i.SMALL],[n.SPAN,i.SPAN],[n.STRIKE,i.STRIKE],[n.STRONG,i.STRONG],[n.STYLE,i.STYLE],[n.SUB,i.SUB],[n.SUMMARY,i.SUMMARY],[n.SUP,i.SUP],[n.TABLE,i.TABLE],[n.TBODY,i.TBODY],[n.TEMPLATE,i.TEMPLATE],[n.TEXTAREA,i.TEXTAREA],[n.TFOOT,i.TFOOT],[n.TD,i.TD],[n.TH,i.TH],[n.THEAD,i.THEAD],[n.TITLE,i.TITLE],[n.TR,i.TR],[n.TRACK,i.TRACK],[n.TT,i.TT],[n.U,i.U],[n.UL,i.UL],[n.SVG,i.SVG],[n.VAR,i.VAR],[n.WBR,i.WBR],[n.XMP,i.XMP]]);function a(l){var f;return(f=r.get(l))!==null&&f!==void 0?f:i.UNKNOWN}e.getTagID=a;const o=i;e.SPECIAL_ELEMENTS={[t.HTML]:new Set([o.ADDRESS,o.APPLET,o.AREA,o.ARTICLE,o.ASIDE,o.BASE,o.BASEFONT,o.BGSOUND,o.BLOCKQUOTE,o.BODY,o.BR,o.BUTTON,o.CAPTION,o.CENTER,o.COL,o.COLGROUP,o.DD,o.DETAILS,o.DIR,o.DIV,o.DL,o.DT,o.EMBED,o.FIELDSET,o.FIGCAPTION,o.FIGURE,o.FOOTER,o.FORM,o.FRAME,o.FRAMESET,o.H1,o.H2,o.H3,o.H4,o.H5,o.H6,o.HEAD,o.HEADER,o.HGROUP,o.HR,o.HTML,o.IFRAME,o.IMG,o.INPUT,o.LI,o.LINK,o.LISTING,o.MAIN,o.MARQUEE,o.MENU,o.META,o.NAV,o.NOEMBED,o.NOFRAMES,o.NOSCRIPT,o.OBJECT,o.OL,o.P,o.PARAM,o.PLAINTEXT,o.PRE,o.SCRIPT,o.SECTION,o.SELECT,o.SOURCE,o.STYLE,o.SUMMARY,o.TABLE,o.TBODY,o.TD,o.TEMPLATE,o.TEXTAREA,o.TFOOT,o.TH,o.THEAD,o.TITLE,o.TR,o.TRACK,o.UL,o.WBR,o.XMP]),[t.MATHML]:new Set([o.MI,o.MO,o.MN,o.MS,o.MTEXT,o.ANNOTATION_XML]),[t.SVG]:new Set([o.TITLE,o.FOREIGN_OBJECT,o.DESC]),[t.XLINK]:new Set,[t.XML]:new Set,[t.XMLNS]:new Set};function s(l){return l===o.H1||l===o.H2||l===o.H3||l===o.H4||l===o.H5||l===o.H6}e.isNumberedHeader=s;const u=new Set([n.STYLE,n.SCRIPT,n.XMP,n.IFRAME,n.NOEMBED,n.NOFRAMES,n.PLAINTEXT]);function c(l,f){return u.has(l)||f&&l===n.NOSCRIPT}e.hasUnescapedText=c})(Oo),Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.Tokenizer=Dl.TokenizerMode=void 0;const Ioe=R0,V=N0,fi=M0,ja=yl,Re=ld,HS=Oo,koe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Q;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Q||(Q={})),Dl.TokenizerMode={DATA:Q.DATA,RCDATA:Q.RCDATA,RAWTEXT:Q.RAWTEXT,SCRIPT_DATA:Q.SCRIPT_DATA,PLAINTEXT:Q.PLAINTEXT,CDATA_SECTION:Q.CDATA_SECTION};function ud(e){return e>=V.CODE_POINTS.DIGIT_0&&e<=V.CODE_POINTS.DIGIT_9}function cd(e){return e>=V.CODE_POINTS.LATIN_CAPITAL_A&&e<=V.CODE_POINTS.LATIN_CAPITAL_Z}function Ooe(e){return e>=V.CODE_POINTS.LATIN_SMALL_A&&e<=V.CODE_POINTS.LATIN_SMALL_Z}function us(e){return Ooe(e)||cd(e)}function $S(e){return us(e)||ud(e)}function tB(e){return e>=V.CODE_POINTS.LATIN_CAPITAL_A&&e<=V.CODE_POINTS.LATIN_CAPITAL_F}function nB(e){return e>=V.CODE_POINTS.LATIN_SMALL_A&&e<=V.CODE_POINTS.LATIN_SMALL_F}function xoe(e){return ud(e)||tB(e)||nB(e)}function L0(e){return e+32}function rB(e){return e===V.CODE_POINTS.SPACE||e===V.CODE_POINTS.LINE_FEED||e===V.CODE_POINTS.TABULATION||e===V.CODE_POINTS.FORM_FEED}function Poe(e){return e===V.CODE_POINTS.EQUALS_SIGN||$S(e)}function iB(e){return rB(e)||e===V.CODE_POINTS.SOLIDUS||e===V.CODE_POINTS.GREATER_THAN_SIGN}let Roe=function(){function e(t,n){_classCallCheck3(this,e),this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Q.DATA,this.returnState=Q.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Ioe.Preprocessor(n),this.currentLocation=this.getCurrentLocation(-1)}return _createClass3(e,[{key:"_err",value:function(n){var i,r;(r=(i=this.handler).onParseError)===null||r===void 0||r.call(i,this.preprocessor.getError(n))}},{key:"getCurrentLocation",value:function(n){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-n,startOffset:this.preprocessor.offset-n,endLine:-1,endCol:-1,endOffset:-1}:null}},{key:"_runParsingLoop",value:function(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const n=this._consume();this._ensureHibernation()||this._callState(n)}this.inLoop=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(n){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||n?.())}},{key:"write",value:function(n,i,r){this.active=!0,this.preprocessor.write(n,i),this._runParsingLoop(),this.paused||r?.()}},{key:"insertHtmlAtCurrentPos",value:function(n){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(n),this._runParsingLoop()}},{key:"_ensureHibernation",value:function(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}},{key:"_consume",value:function(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}},{key:"_unconsume",value:function(n){this.consumedAfterSnapshot-=n,this.preprocessor.retreat(n)}},{key:"_reconsumeInState",value:function(n,i){this.state=n,this._callState(i)}},{key:"_advanceBy",value:function(n){this.consumedAfterSnapshot+=n;for(let i=0;i<n;i++)this.preprocessor.advance()}},{key:"_consumeSequenceIfMatch",value:function(n,i){return this.preprocessor.startsWith(n,i)?(this._advanceBy(n.length-1),!0):!1}},{key:"_createStartTagToken",value:function(){this.currentToken={type:fi.TokenType.START_TAG,tagName:"",tagID:HS.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}},{key:"_createEndTagToken",value:function(){this.currentToken={type:fi.TokenType.END_TAG,tagName:"",tagID:HS.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}},{key:"_createCommentToken",value:function(n){this.currentToken={type:fi.TokenType.COMMENT,data:"",location:this.getCurrentLocation(n)}}},{key:"_createDoctypeToken",value:function(n){this.currentToken={type:fi.TokenType.DOCTYPE,name:n,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}},{key:"_createCharacterToken",value:function(n,i){this.currentCharacterToken={type:n,chars:i,location:this.currentLocation}}},{key:"_createAttr",value:function(n){this.currentAttr={name:n,value:""},this.currentLocation=this.getCurrentLocation(0)}},{key:"_leaveAttrName",value:function(){var n,i;const r=this.currentToken;if((0,fi.getTokenAttr)(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const a=(n=(i=r.location).attrs)!==null&&n!==void 0?n:i.attrs=Object.create(null);a[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Re.ERR.duplicateAttribute)}},{key:"_leaveAttrValue",value:function(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}},{key:"prepareToken",value:function(n){this._emitCurrentCharacterToken(n.location),this.currentToken=null,n.location&&(n.location.endLine=this.preprocessor.line,n.location.endCol=this.preprocessor.col+1,n.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}},{key:"emitCurrentTagToken",value:function(){const n=this.currentToken;this.prepareToken(n),n.tagID=(0,HS.getTagID)(n.tagName),n.type===fi.TokenType.START_TAG?(this.lastStartTagName=n.tagName,this.handler.onStartTag(n)):(n.attrs.length>0&&this._err(Re.ERR.endTagWithAttributes),n.selfClosing&&this._err(Re.ERR.endTagWithTrailingSolidus),this.handler.onEndTag(n)),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentComment",value:function(n){this.prepareToken(n),this.handler.onComment(n),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentDoctype",value:function(n){this.prepareToken(n),this.handler.onDoctype(n),this.preprocessor.dropParsedChunk()}},{key:"_emitCurrentCharacterToken",value:function(n){if(this.currentCharacterToken){switch(n&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=n.startLine,this.currentCharacterToken.location.endCol=n.startCol,this.currentCharacterToken.location.endOffset=n.startOffset),this.currentCharacterToken.type){case fi.TokenType.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case fi.TokenType.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case fi.TokenType.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}},{key:"_emitEOFToken",value:function(){const n=this.getCurrentLocation(0);n&&(n.endLine=n.startLine,n.endCol=n.startCol,n.endOffset=n.startOffset),this._emitCurrentCharacterToken(n),this.handler.onEof({type:fi.TokenType.EOF,location:n}),this.active=!1}},{key:"_appendCharToCurrentCharacterToken",value:function(n,i){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==n)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=i;return}this._createCharacterToken(n,i)}},{key:"_emitCodePoint",value:function(n){const i=rB(n)?fi.TokenType.WHITESPACE_CHARACTER:n===V.CODE_POINTS.NULL?fi.TokenType.NULL_CHARACTER:fi.TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(i,String.fromCodePoint(n))}},{key:"_emitChars",value:function(n){this._appendCharToCurrentCharacterToken(fi.TokenType.CHARACTER,n)}},{key:"_matchNamedCharacterReference",value:function(n){let i=null,r=0,a=!1;for(let o=0,s=ja.htmlDecodeTree[0];o>=0&&(o=(0,ja.determineBranch)(ja.htmlDecodeTree,s,o+1,n),!(o<0));n=this._consume()){r+=1,s=ja.htmlDecodeTree[o];const u=s&ja.BinTrieFlags.VALUE_LENGTH;if(u){const c=(u>>14)-1;if(n!==V.CODE_POINTS.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Poe(this.preprocessor.peek(1))?(i=[V.CODE_POINTS.AMPERSAND],o+=c):(i=c===0?[ja.htmlDecodeTree[o]&~ja.BinTrieFlags.VALUE_LENGTH]:c===1?[ja.htmlDecodeTree[++o]]:[ja.htmlDecodeTree[++o],ja.htmlDecodeTree[++o]],r=0,a=n!==V.CODE_POINTS.SEMICOLON),c===0){this._consume();break}}}return this._unconsume(r),a&&!this.preprocessor.endOfChunkHit&&this._err(Re.ERR.missingSemicolonAfterCharacterReference),this._unconsume(1),i}},{key:"_isCharacterReferenceInAttribute",value:function(){return this.returnState===Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Q.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Q.ATTRIBUTE_VALUE_UNQUOTED}},{key:"_flushCodePointConsumedAsCharacterReference",value:function(n){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(n):this._emitCodePoint(n)}},{key:"_callState",value:function(n){switch(this.state){case Q.DATA:{this._stateData(n);break}case Q.RCDATA:{this._stateRcdata(n);break}case Q.RAWTEXT:{this._stateRawtext(n);break}case Q.SCRIPT_DATA:{this._stateScriptData(n);break}case Q.PLAINTEXT:{this._statePlaintext(n);break}case Q.TAG_OPEN:{this._stateTagOpen(n);break}case Q.END_TAG_OPEN:{this._stateEndTagOpen(n);break}case Q.TAG_NAME:{this._stateTagName(n);break}case Q.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(n);break}case Q.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(n);break}case Q.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(n);break}case Q.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(n);break}case Q.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(n);break}case Q.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(n);break}case Q.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(n);break}case Q.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(n);break}case Q.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(n);break}case Q.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(n);break}case Q.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(n);break}case Q.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(n);break}case Q.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(n);break}case Q.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(n);break}case Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(n);break}case Q.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(n);break}case Q.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(n);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(n);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(n);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(n);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(n);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(n);break}case Q.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(n);break}case Q.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(n);break}case Q.ATTRIBUTE_NAME:{this._stateAttributeName(n);break}case Q.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(n);break}case Q.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(n);break}case Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(n);break}case Q.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(n);break}case Q.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(n);break}case Q.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(n);break}case Q.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(n);break}case Q.BOGUS_COMMENT:{this._stateBogusComment(n);break}case Q.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(n);break}case Q.COMMENT_START:{this._stateCommentStart(n);break}case Q.COMMENT_START_DASH:{this._stateCommentStartDash(n);break}case Q.COMMENT:{this._stateComment(n);break}case Q.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(n);break}case Q.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(n);break}case Q.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(n);break}case Q.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(n);break}case Q.COMMENT_END_DASH:{this._stateCommentEndDash(n);break}case Q.COMMENT_END:{this._stateCommentEnd(n);break}case Q.COMMENT_END_BANG:{this._stateCommentEndBang(n);break}case Q.DOCTYPE:{this._stateDoctype(n);break}case Q.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(n);break}case Q.DOCTYPE_NAME:{this._stateDoctypeName(n);break}case Q.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(n);break}case Q.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(n);break}case Q.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(n);break}case Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(n);break}case Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(n);break}case Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(n);break}case Q.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(n);break}case Q.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(n);break}case Q.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(n);break}case Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(n);break}case Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(n);break}case Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(n);break}case Q.BOGUS_DOCTYPE:{this._stateBogusDoctype(n);break}case Q.CDATA_SECTION:{this._stateCdataSection(n);break}case Q.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(n);break}case Q.CDATA_SECTION_END:{this._stateCdataSectionEnd(n);break}case Q.CHARACTER_REFERENCE:{this._stateCharacterReference(n);break}case Q.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(n);break}case Q.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(n);break}case Q.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(n);break}case Q.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(n);break}case Q.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(n);break}case Q.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(n);break}case Q.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(n);break}default:throw new Error("Unknown state")}}},{key:"_stateData",value:function(n){switch(n){case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.TAG_OPEN;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=Q.DATA,this.state=Q.CHARACTER_REFERENCE;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitCodePoint(n);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateRcdata",value:function(n){switch(n){case V.CODE_POINTS.AMPERSAND:{this.returnState=Q.RCDATA,this.state=Q.CHARACTER_REFERENCE;break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.RCDATA_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateRawtext",value:function(n){switch(n){case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.RAWTEXT_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateScriptData",value:function(n){switch(n){case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_statePlaintext",value:function(n){switch(n){case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateTagOpen",value:function(n){if(us(n))this._createStartTagToken(),this.state=Q.TAG_NAME,this._stateTagName(n);else switch(n){case V.CODE_POINTS.EXCLAMATION_MARK:{this.state=Q.MARKUP_DECLARATION_OPEN;break}case V.CODE_POINTS.SOLIDUS:{this.state=Q.END_TAG_OPEN;break}case V.CODE_POINTS.QUESTION_MARK:{this._err(Re.ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(n);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Re.ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Q.DATA,this._stateData(n)}}},{key:"_stateEndTagOpen",value:function(n){if(us(n))this._createEndTagToken(),this.state=Q.TAG_NAME,this._stateTagName(n);else switch(n){case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingEndTagName),this.state=Q.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Re.ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(n)}}},{key:"_stateTagName",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case V.CODE_POINTS.SOLIDUS:{this.state=Q.SELF_CLOSING_START_TAG;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.tagName+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:i.tagName+=String.fromCodePoint(cd(n)?L0(n):n)}}},{key:"_stateRcdataLessThanSign",value:function(n){n===V.CODE_POINTS.SOLIDUS?this.state=Q.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Q.RCDATA,this._stateRcdata(n))}},{key:"_stateRcdataEndTagOpen",value:function(n){us(n)?(this.state=Q.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(n)):(this._emitChars("</"),this.state=Q.RCDATA,this._stateRcdata(n))}},{key:"handleSpecialEndTag",value:function(n){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const i=this.currentToken;switch(i.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Q.BEFORE_ATTRIBUTE_NAME,!1;case V.CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Q.SELF_CLOSING_START_TAG,!1;case V.CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Q.DATA,!1;default:return!this._ensureHibernation()}}},{key:"_stateRcdataEndTagName",value:function(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=Q.RCDATA,this._stateRcdata(n))}},{key:"_stateRawtextLessThanSign",value:function(n){n===V.CODE_POINTS.SOLIDUS?this.state=Q.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Q.RAWTEXT,this._stateRawtext(n))}},{key:"_stateRawtextEndTagOpen",value:function(n){us(n)?(this.state=Q.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(n)):(this._emitChars("</"),this.state=Q.RAWTEXT,this._stateRawtext(n))}},{key:"_stateRawtextEndTagName",value:function(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=Q.RAWTEXT,this._stateRawtext(n))}},{key:"_stateScriptDataLessThanSign",value:function(n){switch(n){case V.CODE_POINTS.SOLIDUS:{this.state=Q.SCRIPT_DATA_END_TAG_OPEN;break}case V.CODE_POINTS.EXCLAMATION_MARK:{this.state=Q.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Q.SCRIPT_DATA,this._stateScriptData(n)}}},{key:"_stateScriptDataEndTagOpen",value:function(n){us(n)?(this.state=Q.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(n)):(this._emitChars("</"),this.state=Q.SCRIPT_DATA,this._stateScriptData(n))}},{key:"_stateScriptDataEndTagName",value:function(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=Q.SCRIPT_DATA,this._stateScriptData(n))}},{key:"_stateScriptDataEscapeStart",value:function(n){n===V.CODE_POINTS.HYPHEN_MINUS?(this.state=Q.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Q.SCRIPT_DATA,this._stateScriptData(n))}},{key:"_stateScriptDataEscapeStartDash",value:function(n){n===V.CODE_POINTS.HYPHEN_MINUS?(this.state=Q.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Q.SCRIPT_DATA,this._stateScriptData(n))}},{key:"_stateScriptDataEscaped",value:function(n){switch(n){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateScriptDataEscapedDash",value:function(n){switch(n){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_ESCAPED,this._emitCodePoint(n)}}},{key:"_stateScriptDataEscapedDashDash",value:function(n){switch(n){case V.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.SCRIPT_DATA,this._emitChars(">");break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_ESCAPED,this._emitCodePoint(n)}}},{key:"_stateScriptDataEscapedLessThanSign",value:function(n){n===V.CODE_POINTS.SOLIDUS?this.state=Q.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:us(n)?(this._emitChars("<"),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(n)):(this._emitChars("<"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}},{key:"_stateScriptDataEscapedEndTagOpen",value:function(n){us(n)?(this.state=Q.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(n)):(this._emitChars("</"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}},{key:"_stateScriptDataEscapedEndTagName",value:function(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}},{key:"_stateScriptDataDoubleEscapeStart",value:function(n){if(this.preprocessor.startsWith(V.SEQUENCES.SCRIPT,!1)&&iB(this.preprocessor.peek(V.SEQUENCES.SCRIPT.length))){this._emitCodePoint(n);for(let i=0;i<V.SEQUENCES.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Q.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}},{key:"_stateScriptDataDoubleEscaped",value:function(n){switch(n){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateScriptDataDoubleEscapedDash",value:function(n){switch(n){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(n)}}},{key:"_stateScriptDataDoubleEscapedDashDash",value:function(n){switch(n){case V.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case V.CODE_POINTS.LESS_THAN_SIGN:{this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.SCRIPT_DATA,this._emitChars(">");break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(V.REPLACEMENT_CHARACTER);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(n)}}},{key:"_stateScriptDataDoubleEscapedLessThanSign",value:function(n){n===V.CODE_POINTS.SOLIDUS?(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(n))}},{key:"_stateScriptDataDoubleEscapeEnd",value:function(n){if(this.preprocessor.startsWith(V.SEQUENCES.SCRIPT,!1)&&iB(this.preprocessor.peek(V.SEQUENCES.SCRIPT.length))){this._emitCodePoint(n);for(let i=0;i<V.SEQUENCES.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=Q.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Q.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(n))}},{key:"_stateBeforeAttributeName",value:function(n){switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.SOLIDUS:case V.CODE_POINTS.GREATER_THAN_SIGN:case V.CODE_POINTS.EOF:{this.state=Q.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(n);break}case V.CODE_POINTS.EQUALS_SIGN:{this._err(Re.ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Q.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Q.ATTRIBUTE_NAME,this._stateAttributeName(n)}}},{key:"_stateAttributeName",value:function(n){switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:case V.CODE_POINTS.SOLIDUS:case V.CODE_POINTS.GREATER_THAN_SIGN:case V.CODE_POINTS.EOF:{this._leaveAttrName(),this.state=Q.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(n);break}case V.CODE_POINTS.EQUALS_SIGN:{this._leaveAttrName(),this.state=Q.BEFORE_ATTRIBUTE_VALUE;break}case V.CODE_POINTS.QUOTATION_MARK:case V.CODE_POINTS.APOSTROPHE:case V.CODE_POINTS.LESS_THAN_SIGN:{this._err(Re.ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(n);break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.currentAttr.name+=V.REPLACEMENT_CHARACTER;break}default:this.currentAttr.name+=String.fromCodePoint(cd(n)?L0(n):n)}}},{key:"_stateAfterAttributeName",value:function(n){switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.SOLIDUS:{this.state=Q.SELF_CLOSING_START_TAG;break}case V.CODE_POINTS.EQUALS_SIGN:{this.state=Q.BEFORE_ATTRIBUTE_VALUE;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Q.ATTRIBUTE_NAME,this._stateAttributeName(n)}}},{key:"_stateBeforeAttributeValue",value:function(n){switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.QUOTATION_MARK:{this.state=Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this.state=Q.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingAttributeValue),this.state=Q.DATA,this.emitCurrentTagToken();break}default:this.state=Q.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(n)}}},{key:"_stateAttributeValueDoubleQuoted",value:function(n){switch(n){case V.CODE_POINTS.QUOTATION_MARK:{this.state=Q.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=Q.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Q.CHARACTER_REFERENCE;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.currentAttr.value+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(n)}}},{key:"_stateAttributeValueSingleQuoted",value:function(n){switch(n){case V.CODE_POINTS.APOSTROPHE:{this.state=Q.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=Q.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Q.CHARACTER_REFERENCE;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.currentAttr.value+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(n)}}},{key:"_stateAttributeValueUnquoted",value:function(n){switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case V.CODE_POINTS.AMPERSAND:{this.returnState=Q.ATTRIBUTE_VALUE_UNQUOTED,this.state=Q.CHARACTER_REFERENCE;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Q.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this.currentAttr.value+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.QUOTATION_MARK:case V.CODE_POINTS.APOSTROPHE:case V.CODE_POINTS.LESS_THAN_SIGN:case V.CODE_POINTS.EQUALS_SIGN:case V.CODE_POINTS.GRAVE_ACCENT:{this._err(Re.ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(n);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(n)}}},{key:"_stateAfterAttributeValueQuoted",value:function(n){switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=Q.BEFORE_ATTRIBUTE_NAME;break}case V.CODE_POINTS.SOLIDUS:{this._leaveAttrValue(),this.state=Q.SELF_CLOSING_START_TAG;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Q.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Re.ERR.missingWhitespaceBetweenAttributes),this.state=Q.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(n)}}},{key:"_stateSelfClosingStartTag",value:function(n){switch(n){case V.CODE_POINTS.GREATER_THAN_SIGN:{const i=this.currentToken;i.selfClosing=!0,this.state=Q.DATA,this.emitCurrentTagToken();break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Re.ERR.unexpectedSolidusInTag),this.state=Q.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(n)}}},{key:"_stateBogusComment",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentComment(i);break}case V.CODE_POINTS.EOF:{this.emitCurrentComment(i),this._emitEOFToken();break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.data+=V.REPLACEMENT_CHARACTER;break}default:i.data+=String.fromCodePoint(n)}}},{key:"_stateMarkupDeclarationOpen",value:function(n){this._consumeSequenceIfMatch(V.SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(V.SEQUENCES.DASH_DASH.length+1),this.state=Q.COMMENT_START):this._consumeSequenceIfMatch(V.SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(V.SEQUENCES.DOCTYPE.length+1),this.state=Q.DOCTYPE):this._consumeSequenceIfMatch(V.SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=Q.CDATA_SECTION:(this._err(Re.ERR.cdataInHtmlContent),this._createCommentToken(V.SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Q.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Re.ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Q.BOGUS_COMMENT,this._stateBogusComment(n))}},{key:"_stateCommentStart",value:function(n){switch(n){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.COMMENT_START_DASH;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptClosingOfEmptyComment),this.state=Q.DATA;const i=this.currentToken;this.emitCurrentComment(i);break}default:this.state=Q.COMMENT,this._stateComment(n)}}},{key:"_stateCommentStartDash",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.COMMENT_END;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptClosingOfEmptyComment),this.state=Q.DATA,this.emitCurrentComment(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=Q.COMMENT,this._stateComment(n)}}},{key:"_stateComment",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.COMMENT_END_DASH;break}case V.CODE_POINTS.LESS_THAN_SIGN:{i.data+="<",this.state=Q.COMMENT_LESS_THAN_SIGN;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.data+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+=String.fromCodePoint(n)}}},{key:"_stateCommentLessThanSign",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.EXCLAMATION_MARK:{i.data+="!",this.state=Q.COMMENT_LESS_THAN_SIGN_BANG;break}case V.CODE_POINTS.LESS_THAN_SIGN:{i.data+="<";break}default:this.state=Q.COMMENT,this._stateComment(n)}}},{key:"_stateCommentLessThanSignBang",value:function(n){n===V.CODE_POINTS.HYPHEN_MINUS?this.state=Q.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Q.COMMENT,this._stateComment(n))}},{key:"_stateCommentLessThanSignBangDash",value:function(n){n===V.CODE_POINTS.HYPHEN_MINUS?this.state=Q.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Q.COMMENT_END_DASH,this._stateCommentEndDash(n))}},{key:"_stateCommentLessThanSignBangDashDash",value:function(n){n!==V.CODE_POINTS.GREATER_THAN_SIGN&&n!==V.CODE_POINTS.EOF&&this._err(Re.ERR.nestedComment),this.state=Q.COMMENT_END,this._stateCommentEnd(n)}},{key:"_stateCommentEndDash",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.HYPHEN_MINUS:{this.state=Q.COMMENT_END;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=Q.COMMENT,this._stateComment(n)}}},{key:"_stateCommentEnd",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentComment(i);break}case V.CODE_POINTS.EXCLAMATION_MARK:{this.state=Q.COMMENT_END_BANG;break}case V.CODE_POINTS.HYPHEN_MINUS:{i.data+="-";break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--",this.state=Q.COMMENT,this._stateComment(n)}}},{key:"_stateCommentEndBang",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.HYPHEN_MINUS:{i.data+="--!",this.state=Q.COMMENT_END_DASH;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.incorrectlyClosedComment),this.state=Q.DATA,this.emitCurrentComment(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--!",this.state=Q.COMMENT,this._stateComment(n)}}},{key:"_stateDoctype",value:function(n){switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_NAME;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(n);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingWhitespaceBeforeDoctypeName),this.state=Q.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(n)}}},{key:"_stateBeforeDoctypeName",value:function(n){if(cd(n))this._createDoctypeToken(String.fromCharCode(L0(n))),this.state=Q.DOCTYPE_NAME;else switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),this._createDoctypeToken(V.REPLACEMENT_CHARACTER),this.state=Q.DOCTYPE_NAME;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingDoctypeName),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=Q.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(n)),this.state=Q.DOCTYPE_NAME}}},{key:"_stateDoctypeName",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=Q.AFTER_DOCTYPE_NAME;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.name+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.name+=String.fromCodePoint(cd(n)?L0(n):n)}}},{key:"_stateAfterDoctypeName",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(V.SEQUENCES.PUBLIC,!1)?this.state=Q.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(V.SEQUENCES.SYSTEM,!1)?this.state=Q.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Re.ERR.invalidCharacterSequenceAfterDoctypeName),i.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(n))}}},{key:"_stateAfterDoctypePublicKeyword",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.CODE_POINTS.QUOTATION_MARK:{this._err(Re.ERR.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this._err(Re.ERR.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateBeforeDoctypePublicIdentifier",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.QUOTATION_MARK:{i.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{i.publicId="",this.state=Q.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateDoctypePublicIdentifierDoubleQuoted",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.QUOTATION_MARK:{this.state=Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.publicId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=Q.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(n)}}},{key:"_stateDoctypePublicIdentifierSingleQuoted",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.APOSTROPHE:{this.state=Q.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.publicId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=Q.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(n)}}},{key:"_stateAfterDoctypePublicIdentifier",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=Q.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.QUOTATION_MARK:{this._err(Re.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this._err(Re.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateBetweenDoctypePublicAndSystemIdentifiers",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=Q.DATA;break}case V.CODE_POINTS.QUOTATION_MARK:{i.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{i.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateAfterDoctypeSystemKeyword",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:{this.state=Q.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.CODE_POINTS.QUOTATION_MARK:{this._err(Re.ERR.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{this._err(Re.ERR.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateBeforeDoctypeSystemIdentifier",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.QUOTATION_MARK:{i.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case V.CODE_POINTS.APOSTROPHE:{i.systemId="",this.state=Q.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=Q.DATA,this.emitCurrentDoctype(i);break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateDoctypeSystemIdentifierDoubleQuoted",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.QUOTATION_MARK:{this.state=Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.systemId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=Q.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(n)}}},{key:"_stateDoctypeSystemIdentifierSingleQuoted",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.APOSTROPHE:{this.state=Q.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter),i.systemId+=V.REPLACEMENT_CHARACTER;break}case V.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Re.ERR.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=Q.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(n)}}},{key:"_stateAfterDoctypeSystemIdentifier",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.SPACE:case V.CODE_POINTS.LINE_FEED:case V.CODE_POINTS.TABULATION:case V.CODE_POINTS.FORM_FEED:break;case V.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=Q.DATA;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Re.ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Q.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateBogusDoctype",value:function(n){const i=this.currentToken;switch(n){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=Q.DATA;break}case V.CODE_POINTS.NULL:{this._err(Re.ERR.unexpectedNullCharacter);break}case V.CODE_POINTS.EOF:{this.emitCurrentDoctype(i),this._emitEOFToken();break}}}},{key:"_stateCdataSection",value:function(n){switch(n){case V.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this.state=Q.CDATA_SECTION_BRACKET;break}case V.CODE_POINTS.EOF:{this._err(Re.ERR.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateCdataSectionBracket",value:function(n){n===V.CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=Q.CDATA_SECTION_END:(this._emitChars("]"),this.state=Q.CDATA_SECTION,this._stateCdataSection(n))}},{key:"_stateCdataSectionEnd",value:function(n){switch(n){case V.CODE_POINTS.GREATER_THAN_SIGN:{this.state=Q.DATA;break}case V.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Q.CDATA_SECTION,this._stateCdataSection(n)}}},{key:"_stateCharacterReference",value:function(n){n===V.CODE_POINTS.NUMBER_SIGN?this.state=Q.NUMERIC_CHARACTER_REFERENCE:$S(n)?(this.state=Q.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(n)):(this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this._reconsumeInState(this.returnState,n))}},{key:"_stateNamedCharacterReference",value:function(n){const i=this._matchNamedCharacterReference(n);if(!this._ensureHibernation())if(i){for(let r=0;r<i.length;r++)this._flushCodePointConsumedAsCharacterReference(i[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this.state=Q.AMBIGUOUS_AMPERSAND}},{key:"_stateAmbiguousAmpersand",value:function(n){$S(n)?this._flushCodePointConsumedAsCharacterReference(n):(n===V.CODE_POINTS.SEMICOLON&&this._err(Re.ERR.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,n))}},{key:"_stateNumericCharacterReference",value:function(n){this.charRefCode=0,n===V.CODE_POINTS.LATIN_SMALL_X||n===V.CODE_POINTS.LATIN_CAPITAL_X?this.state=Q.HEXADEMICAL_CHARACTER_REFERENCE_START:ud(n)?(this.state=Q.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(n)):(this._err(Re.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.NUMBER_SIGN),this._reconsumeInState(this.returnState,n))}},{key:"_stateHexademicalCharacterReferenceStart",value:function(n){xoe(n)?(this.state=Q.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(n)):(this._err(Re.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(V.CODE_POINTS.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}},{key:"_stateHexademicalCharacterReference",value:function(n){tB(n)?this.charRefCode=this.charRefCode*16+n-55:nB(n)?this.charRefCode=this.charRefCode*16+n-87:ud(n)?this.charRefCode=this.charRefCode*16+n-48:n===V.CODE_POINTS.SEMICOLON?this.state=Q.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Re.ERR.missingSemicolonAfterCharacterReference),this.state=Q.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(n))}},{key:"_stateDecimalCharacterReference",value:function(n){ud(n)?this.charRefCode=this.charRefCode*10+n-48:n===V.CODE_POINTS.SEMICOLON?this.state=Q.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Re.ERR.missingSemicolonAfterCharacterReference),this.state=Q.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(n))}},{key:"_stateNumericCharacterReferenceEnd",value:function(n){if(this.charRefCode===V.CODE_POINTS.NULL)this._err(Re.ERR.nullCharacterReference),this.charRefCode=V.CODE_POINTS.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Re.ERR.characterReferenceOutsideUnicodeRange),this.charRefCode=V.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,V.isSurrogate)(this.charRefCode))this._err(Re.ERR.surrogateCharacterReference),this.charRefCode=V.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,V.isUndefinedCodePoint)(this.charRefCode))this._err(Re.ERR.noncharacterCharacterReference);else if((0,V.isControlCodePoint)(this.charRefCode)||this.charRefCode===V.CODE_POINTS.CARRIAGE_RETURN){this._err(Re.ERR.controlCharacterReference);const i=koe.get(this.charRefCode);i!==void 0&&(this.charRefCode=i)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,n)}}]),e}();Dl.Tokenizer=Roe;var B0={};Object.defineProperty(B0,"__esModule",{value:!0}),B0.OpenElementStack=void 0;const Me=Oo,aB=new Set([Me.TAG_ID.DD,Me.TAG_ID.DT,Me.TAG_ID.LI,Me.TAG_ID.OPTGROUP,Me.TAG_ID.OPTION,Me.TAG_ID.P,Me.TAG_ID.RB,Me.TAG_ID.RP,Me.TAG_ID.RT,Me.TAG_ID.RTC]),oB=new Set([...aB,Me.TAG_ID.CAPTION,Me.TAG_ID.COLGROUP,Me.TAG_ID.TBODY,Me.TAG_ID.TD,Me.TAG_ID.TFOOT,Me.TAG_ID.TH,Me.TAG_ID.THEAD,Me.TAG_ID.TR]),F0=new Map([[Me.TAG_ID.APPLET,Me.NS.HTML],[Me.TAG_ID.CAPTION,Me.NS.HTML],[Me.TAG_ID.HTML,Me.NS.HTML],[Me.TAG_ID.MARQUEE,Me.NS.HTML],[Me.TAG_ID.OBJECT,Me.NS.HTML],[Me.TAG_ID.TABLE,Me.NS.HTML],[Me.TAG_ID.TD,Me.NS.HTML],[Me.TAG_ID.TEMPLATE,Me.NS.HTML],[Me.TAG_ID.TH,Me.NS.HTML],[Me.TAG_ID.ANNOTATION_XML,Me.NS.MATHML],[Me.TAG_ID.MI,Me.NS.MATHML],[Me.TAG_ID.MN,Me.NS.MATHML],[Me.TAG_ID.MO,Me.NS.MATHML],[Me.TAG_ID.MS,Me.NS.MATHML],[Me.TAG_ID.MTEXT,Me.NS.MATHML],[Me.TAG_ID.DESC,Me.NS.SVG],[Me.TAG_ID.FOREIGN_OBJECT,Me.NS.SVG],[Me.TAG_ID.TITLE,Me.NS.SVG]]),Noe=[Me.TAG_ID.H1,Me.TAG_ID.H2,Me.TAG_ID.H3,Me.TAG_ID.H4,Me.TAG_ID.H5,Me.TAG_ID.H6],Moe=[Me.TAG_ID.TR,Me.TAG_ID.TEMPLATE,Me.TAG_ID.HTML],Loe=[Me.TAG_ID.TBODY,Me.TAG_ID.TFOOT,Me.TAG_ID.THEAD,Me.TAG_ID.TEMPLATE,Me.TAG_ID.HTML],Boe=[Me.TAG_ID.TABLE,Me.TAG_ID.TEMPLATE,Me.TAG_ID.HTML],Foe=[Me.TAG_ID.TD,Me.TAG_ID.TH];let Hoe=function(){function e(t,n,i){_classCallCheck3(this,e),this.treeAdapter=n,this.handler=i,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=Me.TAG_ID.UNKNOWN,this.current=t}return _createClass3(e,[{key:"currentTmplContentOrNode",get:function(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}},{key:"_indexOf",value:function(n){return this.items.lastIndexOf(n,this.stackTop)}},{key:"_isInTemplate",value:function(){return this.currentTagId===Me.TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Me.NS.HTML}},{key:"_updateCurrentElement",value:function(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}},{key:"push",value:function(n,i){this.stackTop++,this.items[this.stackTop]=n,this.current=n,this.tagIDs[this.stackTop]=i,this.currentTagId=i,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(n,i,!0)}},{key:"pop",value:function(){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,!0)}},{key:"replace",value:function(n,i){const r=this._indexOf(n);this.items[r]=i,r===this.stackTop&&(this.current=i)}},{key:"insertAfter",value:function(n,i,r){const a=this._indexOf(n)+1;this.items.splice(a,0,i),this.tagIDs.splice(a,0,r),this.stackTop++,a===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,a===this.stackTop)}},{key:"popUntilTagNamePopped",value:function(n){let i=this.stackTop+1;do i=this.tagIDs.lastIndexOf(n,i-1);while(i>0&&this.treeAdapter.getNamespaceURI(this.items[i])!==Me.NS.HTML);this.shortenToLength(i<0?0:i)}},{key:"shortenToLength",value:function(n){for(;this.stackTop>=n;){const i=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(i,this.stackTop<n)}}},{key:"popUntilElementPopped",value:function(n){const i=this._indexOf(n);this.shortenToLength(i<0?0:i)}},{key:"popUntilPopped",value:function(n,i){const r=this._indexOfTagNames(n,i);this.shortenToLength(r<0?0:r)}},{key:"popUntilNumberedHeaderPopped",value:function(){this.popUntilPopped(Noe,Me.NS.HTML)}},{key:"popUntilTableCellPopped",value:function(){this.popUntilPopped(Foe,Me.NS.HTML)}},{key:"popAllUpToHtmlElement",value:function(){this.tmplCount=0,this.shortenToLength(1)}},{key:"_indexOfTagNames",value:function(n,i){for(let r=this.stackTop;r>=0;r--)if(n.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===i)return r;return-1}},{key:"clearBackTo",value:function(n,i){const r=this._indexOfTagNames(n,i);this.shortenToLength(r+1)}},{key:"clearBackToTableContext",value:function(){this.clearBackTo(Boe,Me.NS.HTML)}},{key:"clearBackToTableBodyContext",value:function(){this.clearBackTo(Loe,Me.NS.HTML)}},{key:"clearBackToTableRowContext",value:function(){this.clearBackTo(Moe,Me.NS.HTML)}},{key:"remove",value:function(n){const i=this._indexOf(n);i>=0&&(i===this.stackTop?this.pop():(this.items.splice(i,1),this.tagIDs.splice(i,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,!1)))}},{key:"tryPeekProperlyNestedBodyElement",value:function(){return this.stackTop>=1&&this.tagIDs[1]===Me.TAG_ID.BODY?this.items[1]:null}},{key:"contains",value:function(n){return this._indexOf(n)>-1}},{key:"getCommonAncestor",value:function(n){const i=this._indexOf(n)-1;return i>=0?this.items[i]:null}},{key:"isRootHtmlElementCurrent",value:function(){return this.stackTop===0&&this.tagIDs[0]===Me.TAG_ID.HTML}},{key:"hasInScope",value:function(n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i],a=this.treeAdapter.getNamespaceURI(this.items[i]);if(r===n&&a===Me.NS.HTML)return!0;if(F0.get(r)===a)return!1}return!0}},{key:"hasNumberedHeaderInScope",value:function(){for(let n=this.stackTop;n>=0;n--){const i=this.tagIDs[n],r=this.treeAdapter.getNamespaceURI(this.items[n]);if((0,Me.isNumberedHeader)(i)&&r===Me.NS.HTML)return!0;if(F0.get(i)===r)return!1}return!0}},{key:"hasInListItemScope",value:function(n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i],a=this.treeAdapter.getNamespaceURI(this.items[i]);if(r===n&&a===Me.NS.HTML)return!0;if((r===Me.TAG_ID.UL||r===Me.TAG_ID.OL)&&a===Me.NS.HTML||F0.get(r)===a)return!1}return!0}},{key:"hasInButtonScope",value:function(n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i],a=this.treeAdapter.getNamespaceURI(this.items[i]);if(r===n&&a===Me.NS.HTML)return!0;if(r===Me.TAG_ID.BUTTON&&a===Me.NS.HTML||F0.get(r)===a)return!1}return!0}},{key:"hasInTableScope",value:function(n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i];if(this.treeAdapter.getNamespaceURI(this.items[i])===Me.NS.HTML){if(r===n)return!0;if(r===Me.TAG_ID.TABLE||r===Me.TAG_ID.TEMPLATE||r===Me.TAG_ID.HTML)return!1}}return!0}},{key:"hasTableBodyContextInTableScope",value:function(){for(let n=this.stackTop;n>=0;n--){const i=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Me.NS.HTML){if(i===Me.TAG_ID.TBODY||i===Me.TAG_ID.THEAD||i===Me.TAG_ID.TFOOT)return!0;if(i===Me.TAG_ID.TABLE||i===Me.TAG_ID.HTML)return!1}}return!0}},{key:"hasInSelectScope",value:function(n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i];if(this.treeAdapter.getNamespaceURI(this.items[i])===Me.NS.HTML){if(r===n)return!0;if(r!==Me.TAG_ID.OPTION&&r!==Me.TAG_ID.OPTGROUP)return!1}}return!0}},{key:"generateImpliedEndTags",value:function(){for(;aB.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsThoroughly",value:function(){for(;oB.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsWithExclusion",value:function(n){for(;this.currentTagId!==n&&oB.has(this.currentTagId);)this.pop()}}]),e}();B0.OpenElementStack=Hoe;var sB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FormattingElementList=e.EntryType=void 0;const t=3;var n;(function(a){a[a.Marker=0]="Marker",a[a.Element=1]="Element"})(n=e.EntryType||(e.EntryType={}));const i={type:n.Marker};let r=function(){function a(o){_classCallCheck3(this,a),this.treeAdapter=o,this.entries=[],this.bookmark=null}return _createClass3(a,[{key:"_getNoahArkConditionCandidates",value:function(s,u){const c=[],l=u.length,f=this.treeAdapter.getTagName(s),h=this.treeAdapter.getNamespaceURI(s);for(let d=0;d<this.entries.length;d++){const p=this.entries[d];if(p.type===n.Marker)break;const{element:m}=p;if(this.treeAdapter.getTagName(m)===f&&this.treeAdapter.getNamespaceURI(m)===h){const g=this.treeAdapter.getAttrList(m);g.length===l&&c.push({idx:d,attrs:g})}}return c}},{key:"_ensureNoahArkCondition",value:function(s){if(this.entries.length<t)return;const u=this.treeAdapter.getAttrList(s),c=this._getNoahArkConditionCandidates(s,u);if(c.length<t)return;const l=new Map(u.map(h=>[h.name,h.value]));let f=0;for(let h=0;h<c.length;h++){const d=c[h];d.attrs.every(p=>l.get(p.name)===p.value)&&(f+=1,f>=t&&this.entries.splice(d.idx,1))}}},{key:"insertMarker",value:function(){this.entries.unshift(i)}},{key:"pushElement",value:function(s,u){this._ensureNoahArkCondition(s),this.entries.unshift({type:n.Element,element:s,token:u})}},{key:"insertElementAfterBookmark",value:function(s,u){const c=this.entries.indexOf(this.bookmark);this.entries.splice(c,0,{type:n.Element,element:s,token:u})}},{key:"removeEntry",value:function(s){const u=this.entries.indexOf(s);u>=0&&this.entries.splice(u,1)}},{key:"clearToLastMarker",value:function(){const s=this.entries.indexOf(i);s>=0?this.entries.splice(0,s+1):this.entries.length=0}},{key:"getElementEntryInScopeWithTagName",value:function(s){const u=this.entries.find(c=>c.type===n.Marker||this.treeAdapter.getTagName(c.element)===s);return u&&u.type===n.Element?u:null}},{key:"getElementEntry",value:function(s){return this.entries.find(u=>u.type===n.Element&&u.element===s)}}]),a}();e.FormattingElementList=r})(sB);var H0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTreeAdapter=void 0;const t=Oo;function n(i){return{nodeName:"#text",value:i,parentNode:null}}e.defaultTreeAdapter={createDocument(){return{nodeName:"#document",mode:t.DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(i,r,a){return{nodeName:i,tagName:i,attrs:a,namespaceURI:r,childNodes:[],parentNode:null}},createCommentNode(i){return{nodeName:"#comment",data:i,parentNode:null}},appendChild(i,r){i.childNodes.push(r),r.parentNode=i},insertBefore(i,r,a){const o=i.childNodes.indexOf(a);i.childNodes.splice(o,0,r),r.parentNode=i},setTemplateContent(i,r){i.content=r},getTemplateContent(i){return i.content},setDocumentType(i,r,a,o){const s=i.childNodes.find(u=>u.nodeName==="#documentType");if(s)s.name=r,s.publicId=a,s.systemId=o;else{const u={nodeName:"#documentType",name:r,publicId:a,systemId:o,parentNode:null};e.defaultTreeAdapter.appendChild(i,u)}},setDocumentMode(i,r){i.mode=r},getDocumentMode(i){return i.mode},detachNode(i){if(i.parentNode){const r=i.parentNode.childNodes.indexOf(i);i.parentNode.childNodes.splice(r,1),i.parentNode=null}},insertText(i,r){if(i.childNodes.length>0){const a=i.childNodes[i.childNodes.length-1];if(e.defaultTreeAdapter.isTextNode(a)){a.value+=r;return}}e.defaultTreeAdapter.appendChild(i,n(r))},insertTextBefore(i,r,a){const o=i.childNodes[i.childNodes.indexOf(a)-1];o&&e.defaultTreeAdapter.isTextNode(o)?o.value+=r:e.defaultTreeAdapter.insertBefore(i,n(r),a)},adoptAttributes(i,r){const a=new Set(i.attrs.map(o=>o.name));for(let o=0;o<r.length;o++)a.has(r[o].name)||i.attrs.push(r[o])},getFirstChild(i){return i.childNodes[0]},getChildNodes(i){return i.childNodes},getParentNode(i){return i.parentNode},getAttrList(i){return i.attrs},getTagName(i){return i.tagName},getNamespaceURI(i){return i.namespaceURI},getTextNodeContent(i){return i.value},getCommentNodeContent(i){return i.data},getDocumentTypeNodeName(i){return i.name},getDocumentTypeNodePublicId(i){return i.publicId},getDocumentTypeNodeSystemId(i){return i.systemId},isTextNode(i){return i.nodeName==="#text"},isCommentNode(i){return i.nodeName==="#comment"},isDocumentTypeNode(i){return i.nodeName==="#documentType"},isElementNode(i){return Object.prototype.hasOwnProperty.call(i,"tagName")},setNodeSourceCodeLocation(i,r){i.sourceCodeLocation=r},getNodeSourceCodeLocation(i){return i.sourceCodeLocation},updateNodeSourceCodeLocation(i,r){i.sourceCodeLocation=Object.assign(Object.assign({},i.sourceCodeLocation),r)}}})(H0);var Tc={};Object.defineProperty(Tc,"__esModule",{value:!0}),Tc.getDocumentMode=Tc.isConforming=void 0;const Ec=Oo,lB="html",$oe="about:legacy-compat",Uoe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",uB=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Goe=[...uB,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],zoe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),cB=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],joe=[...cB,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function hB(e,t){return t.some(n=>e.startsWith(n))}function Voe(e){return e.name===lB&&e.publicId===null&&(e.systemId===null||e.systemId===$oe)}Tc.isConforming=Voe;function Yoe(e){if(e.name!==lB)return Ec.DOCUMENT_MODE.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Uoe)return Ec.DOCUMENT_MODE.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),zoe.has(n))return Ec.DOCUMENT_MODE.QUIRKS;let i=t===null?Goe:uB;if(hB(n,i))return Ec.DOCUMENT_MODE.QUIRKS;if(i=t===null?cB:joe,hB(n,i))return Ec.DOCUMENT_MODE.LIMITED_QUIRKS}return Ec.DOCUMENT_MODE.NO_QUIRKS}Tc.getDocumentMode=Yoe;var US={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isIntegrationPoint=e.adjustTokenSVGTagName=e.adjustTokenXMLAttrs=e.adjustTokenSVGAttrs=e.adjustTokenMathMLAttrs=e.causesExit=e.SVG_TAG_NAMES_ADJUSTMENT_MAP=void 0;const t=Oo,n={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},i="definitionurl",r="definitionURL",a=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(g=>[g.toLowerCase(),g])),o=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:t.NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:t.NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:t.NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:t.NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:t.NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:t.NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:t.NS.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:t.NS.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:t.NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:t.NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:t.NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:t.NS.XMLNS}]]);e.SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(g=>[g.toLowerCase(),g]));const s=new Set([t.TAG_ID.B,t.TAG_ID.BIG,t.TAG_ID.BLOCKQUOTE,t.TAG_ID.BODY,t.TAG_ID.BR,t.TAG_ID.CENTER,t.TAG_ID.CODE,t.TAG_ID.DD,t.TAG_ID.DIV,t.TAG_ID.DL,t.TAG_ID.DT,t.TAG_ID.EM,t.TAG_ID.EMBED,t.TAG_ID.H1,t.TAG_ID.H2,t.TAG_ID.H3,t.TAG_ID.H4,t.TAG_ID.H5,t.TAG_ID.H6,t.TAG_ID.HEAD,t.TAG_ID.HR,t.TAG_ID.I,t.TAG_ID.IMG,t.TAG_ID.LI,t.TAG_ID.LISTING,t.TAG_ID.MENU,t.TAG_ID.META,t.TAG_ID.NOBR,t.TAG_ID.OL,t.TAG_ID.P,t.TAG_ID.PRE,t.TAG_ID.RUBY,t.TAG_ID.S,t.TAG_ID.SMALL,t.TAG_ID.SPAN,t.TAG_ID.STRONG,t.TAG_ID.STRIKE,t.TAG_ID.SUB,t.TAG_ID.SUP,t.TAG_ID.TABLE,t.TAG_ID.TT,t.TAG_ID.U,t.TAG_ID.UL,t.TAG_ID.VAR]);function u(g){const v=g.tagID;return v===t.TAG_ID.FONT&&g.attrs.some(({name:y})=>y===t.ATTRS.COLOR||y===t.ATTRS.SIZE||y===t.ATTRS.FACE)||s.has(v)}e.causesExit=u;function c(g){for(let v=0;v<g.attrs.length;v++)if(g.attrs[v].name===i){g.attrs[v].name=r;break}}e.adjustTokenMathMLAttrs=c;function l(g){for(let v=0;v<g.attrs.length;v++){const E=a.get(g.attrs[v].name);E!=null&&(g.attrs[v].name=E)}}e.adjustTokenSVGAttrs=l;function f(g){for(let v=0;v<g.attrs.length;v++){const E=o.get(g.attrs[v].name);E&&(g.attrs[v].prefix=E.prefix,g.attrs[v].name=E.name,g.attrs[v].namespace=E.namespace)}}e.adjustTokenXMLAttrs=f;function h(g){const v=e.SVG_TAG_NAMES_ADJUSTMENT_MAP.get(g.tagName);v!=null&&(g.tagName=v,g.tagID=(0,t.getTagID)(g.tagName))}e.adjustTokenSVGTagName=h;function d(g,v){return v===t.NS.MATHML&&(g===t.TAG_ID.MI||g===t.TAG_ID.MO||g===t.TAG_ID.MN||g===t.TAG_ID.MS||g===t.TAG_ID.MTEXT)}function p(g,v,E){if(v===t.NS.MATHML&&g===t.TAG_ID.ANNOTATION_XML){for(let y=0;y<E.length;y++)if(E[y].name===t.ATTRS.ENCODING){const T=E[y].value.toLowerCase();return T===n.TEXT_HTML||T===n.APPLICATION_XML}}return v===t.NS.SVG&&(g===t.TAG_ID.FOREIGN_OBJECT||g===t.TAG_ID.DESC||g===t.TAG_ID.TITLE)}function m(g,v,E,y){return(!y||y===t.NS.HTML)&&p(g,v,E)||(!y||y===t.NS.MATHML)&&d(g,v)}e.isIntegrationPoint=m})(US),Object.defineProperty(sd,"__esModule",{value:!0}),sd.Parser=void 0;const qr=Dl,Woe=B0,fB=sB,qoe=H0,dB=Tc,Va=US,dr=ld,pB=N0,O=Oo,er=M0,Xoe="hidden",Koe=8,Zoe=3;var ue;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ue||(ue={}));const Qoe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},mB=new Set([O.TAG_ID.TABLE,O.TAG_ID.TBODY,O.TAG_ID.TFOOT,O.TAG_ID.THEAD,O.TAG_ID.TR]),gB={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:qoe.defaultTreeAdapter,onParseError:null};let Joe=function(){function e(t,n,i=null,r=null){_classCallCheck3(this,e),this.fragmentContext=i,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=ue.INITIAL,this.originalInsertionMode=ue.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options=Object.assign(Object.assign({},gB),t),this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new qr.Tokenizer(this.options,this),this.activeFormattingElements=new fB.FormattingElementList(this.treeAdapter),this.fragmentContextID=i?(0,O.getTagID)(this.treeAdapter.getTagName(i)):O.TAG_ID.UNKNOWN,this._setContextModes(i??this.document,this.fragmentContextID),this.openElements=new Woe.OpenElementStack(this.document,this.treeAdapter,this)}return _createClass3(e,[{key:"getFragment",value:function(){const n=this.treeAdapter.getFirstChild(this.document),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(n,i),i}},{key:"_err",value:function(n,i,r){var a;if(!this.onParseError)return;const o=(a=n.location)!==null&&a!==void 0?a:Qoe,s={code:i,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(s)}},{key:"onItemPush",value:function(n,i,r){var a,o;(o=(a=this.treeAdapter).onItemPush)===null||o===void 0||o.call(a,n),r&&this.openElements.stackTop>0&&this._setContextModes(n,i)}},{key:"onItemPop",value:function(n,i){var r,a;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(n,this.currentToken),(a=(r=this.treeAdapter).onItemPop)===null||a===void 0||a.call(r,n,this.openElements.current),i){let o,s;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,s=this.fragmentContextID):{current:o,currentTagId:s}=this.openElements,this._setContextModes(o,s)}}},{key:"_setContextModes",value:function(n,i){const r=n===this.document||this.treeAdapter.getNamespaceURI(n)===O.NS.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(i,n)}},{key:"_switchToTextParsing",value:function(n,i){this._insertElement(n,O.NS.HTML),this.tokenizer.state=i,this.originalInsertionMode=this.insertionMode,this.insertionMode=ue.TEXT}},{key:"switchToPlaintextParsing",value:function(){this.insertionMode=ue.TEXT,this.originalInsertionMode=ue.IN_BODY,this.tokenizer.state=qr.TokenizerMode.PLAINTEXT}},{key:"_getAdjustedCurrentElement",value:function(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}},{key:"_findFormInFragmentContext",value:function(){let n=this.fragmentContext;for(;n;){if(this.treeAdapter.getTagName(n)===O.TAG_NAMES.FORM){this.formElement=n;break}n=this.treeAdapter.getParentNode(n)}}},{key:"_initTokenizerForFragmentParsing",value:function(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==O.NS.HTML))switch(this.fragmentContextID){case O.TAG_ID.TITLE:case O.TAG_ID.TEXTAREA:{this.tokenizer.state=qr.TokenizerMode.RCDATA;break}case O.TAG_ID.STYLE:case O.TAG_ID.XMP:case O.TAG_ID.IFRAME:case O.TAG_ID.NOEMBED:case O.TAG_ID.NOFRAMES:case O.TAG_ID.NOSCRIPT:{this.tokenizer.state=qr.TokenizerMode.RAWTEXT;break}case O.TAG_ID.SCRIPT:{this.tokenizer.state=qr.TokenizerMode.SCRIPT_DATA;break}case O.TAG_ID.PLAINTEXT:{this.tokenizer.state=qr.TokenizerMode.PLAINTEXT;break}}}},{key:"_setDocumentType",value:function(n){const i=n.name||"",r=n.publicId||"",a=n.systemId||"";if(this.treeAdapter.setDocumentType(this.document,i,r,a),n.location){const s=this.treeAdapter.getChildNodes(this.document).find(u=>this.treeAdapter.isDocumentTypeNode(u));s&&this.treeAdapter.setNodeSourceCodeLocation(s,n.location)}}},{key:"_attachElementToTree",value:function(n,i){if(this.options.sourceCodeLocationInfo){const r=i&&Object.assign(Object.assign({},i),{startTag:i});this.treeAdapter.setNodeSourceCodeLocation(n,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(n);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,n)}}},{key:"_appendElement",value:function(n,i){const r=this.treeAdapter.createElement(n.tagName,i,n.attrs);this._attachElementToTree(r,n.location)}},{key:"_insertElement",value:function(n,i){const r=this.treeAdapter.createElement(n.tagName,i,n.attrs);this._attachElementToTree(r,n.location),this.openElements.push(r,n.tagID)}},{key:"_insertFakeElement",value:function(n,i){const r=this.treeAdapter.createElement(n,O.NS.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,i)}},{key:"_insertTemplate",value:function(n){const i=this.treeAdapter.createElement(n.tagName,O.NS.HTML,n.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(i,r),this._attachElementToTree(i,n.location),this.openElements.push(i,n.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}},{key:"_insertFakeRootElement",value:function(){const n=this.treeAdapter.createElement(O.TAG_NAMES.HTML,O.NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null),this.treeAdapter.appendChild(this.openElements.current,n),this.openElements.push(n,O.TAG_ID.HTML)}},{key:"_appendCommentNode",value:function(n,i){const r=this.treeAdapter.createCommentNode(n.data);this.treeAdapter.appendChild(i,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,n.location)}},{key:"_insertCharacters",value:function(n){let i,r;if(this._shouldFosterParentOnInsertion()?({parent:i,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(i,n.chars,r):this.treeAdapter.insertText(i,n.chars)):(i=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(i,n.chars)),!n.location)return;const a=this.treeAdapter.getChildNodes(i),o=r?a.lastIndexOf(r):a.length,s=a[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:c,endCol:l,endOffset:f}=n.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:c,endCol:l,endOffset:f})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,n.location)}},{key:"_adoptNodes",value:function(n,i){for(let r=this.treeAdapter.getFirstChild(n);r;r=this.treeAdapter.getFirstChild(n))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(i,r)}},{key:"_setEndLocation",value:function(n,i){if(this.treeAdapter.getNodeSourceCodeLocation(n)&&i.location){const r=i.location,a=this.treeAdapter.getTagName(n),o=i.type===er.TokenType.END_TAG&&a===i.tagName?{endTag:Object.assign({},r),endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(n,o)}}},{key:"shouldProcessStartTagTokenInForeignContent",value:function(n){if(!this.currentNotInHTML)return!1;let i,r;return this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,r=this.fragmentContextID):{current:i,currentTagId:r}=this.openElements,n.tagID===O.TAG_ID.SVG&&this.treeAdapter.getTagName(i)===O.TAG_NAMES.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(i)===O.NS.MATHML?!1:this.tokenizer.inForeignNode||(n.tagID===O.TAG_ID.MGLYPH||n.tagID===O.TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(r,i,O.NS.HTML)}},{key:"_processToken",value:function(n){switch(n.type){case er.TokenType.CHARACTER:{this.onCharacter(n);break}case er.TokenType.NULL_CHARACTER:{this.onNullCharacter(n);break}case er.TokenType.COMMENT:{this.onComment(n);break}case er.TokenType.DOCTYPE:{this.onDoctype(n);break}case er.TokenType.START_TAG:{this._processStartTag(n);break}case er.TokenType.END_TAG:{this.onEndTag(n);break}case er.TokenType.EOF:{this.onEof(n);break}case er.TokenType.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(n);break}}}},{key:"_isIntegrationPoint",value:function(n,i,r){const a=this.treeAdapter.getNamespaceURI(i),o=this.treeAdapter.getAttrList(i);return Va.isIntegrationPoint(n,a,o,r)}},{key:"_reconstructActiveFormattingElements",value:function(){const n=this.activeFormattingElements.entries.length;if(n){const i=this.activeFormattingElements.entries.findIndex(a=>a.type===fB.EntryType.Marker||this.openElements.contains(a.element)),r=i<0?n-1:i-1;for(let a=r;a>=0;a--){const o=this.activeFormattingElements.entries[a];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}},{key:"_closeTableCell",value:function(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ue.IN_ROW}},{key:"_closePElement",value:function(){this.openElements.generateImpliedEndTagsWithExclusion(O.TAG_ID.P),this.openElements.popUntilTagNamePopped(O.TAG_ID.P)}},{key:"_resetInsertionMode",value:function(){for(let n=this.openElements.stackTop;n>=0;n--)switch(n===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[n]){case O.TAG_ID.TR:{this.insertionMode=ue.IN_ROW;return}case O.TAG_ID.TBODY:case O.TAG_ID.THEAD:case O.TAG_ID.TFOOT:{this.insertionMode=ue.IN_TABLE_BODY;return}case O.TAG_ID.CAPTION:{this.insertionMode=ue.IN_CAPTION;return}case O.TAG_ID.COLGROUP:{this.insertionMode=ue.IN_COLUMN_GROUP;return}case O.TAG_ID.TABLE:{this.insertionMode=ue.IN_TABLE;return}case O.TAG_ID.BODY:{this.insertionMode=ue.IN_BODY;return}case O.TAG_ID.FRAMESET:{this.insertionMode=ue.IN_FRAMESET;return}case O.TAG_ID.SELECT:{this._resetInsertionModeForSelect(n);return}case O.TAG_ID.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case O.TAG_ID.HTML:{this.insertionMode=this.headElement?ue.AFTER_HEAD:ue.BEFORE_HEAD;return}case O.TAG_ID.TD:case O.TAG_ID.TH:{if(n>0){this.insertionMode=ue.IN_CELL;return}break}case O.TAG_ID.HEAD:{if(n>0){this.insertionMode=ue.IN_HEAD;return}break}}this.insertionMode=ue.IN_BODY}},{key:"_resetInsertionModeForSelect",value:function(n){if(n>0)for(let i=n-1;i>0;i--){const r=this.openElements.tagIDs[i];if(r===O.TAG_ID.TEMPLATE)break;if(r===O.TAG_ID.TABLE){this.insertionMode=ue.IN_SELECT_IN_TABLE;return}}this.insertionMode=ue.IN_SELECT}},{key:"_isElementCausesFosterParenting",value:function(n){return mB.has(n)}},{key:"_shouldFosterParentOnInsertion",value:function(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}},{key:"_findFosterParentingLocation",value:function(){for(let n=this.openElements.stackTop;n>=0;n--){const i=this.openElements.items[n];switch(this.openElements.tagIDs[n]){case O.TAG_ID.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(i)===O.NS.HTML)return{parent:this.treeAdapter.getTemplateContent(i),beforeElement:null};break}case O.TAG_ID.TABLE:{const r=this.treeAdapter.getParentNode(i);return r?{parent:r,beforeElement:i}:{parent:this.openElements.items[n-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}},{key:"_fosterParentElement",value:function(n){const i=this._findFosterParentingLocation();i.beforeElement?this.treeAdapter.insertBefore(i.parent,n,i.beforeElement):this.treeAdapter.appendChild(i.parent,n)}},{key:"_isSpecialElement",value:function(n,i){const r=this.treeAdapter.getNamespaceURI(n);return O.SPECIAL_ELEMENTS[r].has(i)}},{key:"onCharacter",value:function(n){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){kle(this,n);return}switch(this.insertionMode){case ue.INITIAL:{hd(this,n);break}case ue.BEFORE_HTML:{fd(this,n);break}case ue.BEFORE_HEAD:{dd(this,n);break}case ue.IN_HEAD:{pd(this,n);break}case ue.IN_HEAD_NO_SCRIPT:{md(this,n);break}case ue.AFTER_HEAD:{gd(this,n);break}case ue.IN_BODY:case ue.IN_CAPTION:case ue.IN_CELL:case ue.IN_TEMPLATE:{yB(this,n);break}case ue.TEXT:case ue.IN_SELECT:case ue.IN_SELECT_IN_TABLE:{this._insertCharacters(n);break}case ue.IN_TABLE:case ue.IN_TABLE_BODY:case ue.IN_ROW:{VS(this,n);break}case ue.IN_TABLE_TEXT:{DB(this,n);break}case ue.IN_COLUMN_GROUP:{G0(this,n);break}case ue.AFTER_BODY:{V0(this,n);break}case ue.AFTER_AFTER_BODY:{Y0(this,n);break}}}},{key:"onNullCharacter",value:function(n){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Ile(this,n);return}switch(this.insertionMode){case ue.INITIAL:{hd(this,n);break}case ue.BEFORE_HTML:{fd(this,n);break}case ue.BEFORE_HEAD:{dd(this,n);break}case ue.IN_HEAD:{pd(this,n);break}case ue.IN_HEAD_NO_SCRIPT:{md(this,n);break}case ue.AFTER_HEAD:{gd(this,n);break}case ue.TEXT:{this._insertCharacters(n);break}case ue.IN_TABLE:case ue.IN_TABLE_BODY:case ue.IN_ROW:{VS(this,n);break}case ue.IN_COLUMN_GROUP:{G0(this,n);break}case ue.AFTER_BODY:{V0(this,n);break}case ue.AFTER_AFTER_BODY:{Y0(this,n);break}}}},{key:"onComment",value:function(n){if(this.skipNextNewLine=!1,this.currentNotInHTML){zS(this,n);return}switch(this.insertionMode){case ue.INITIAL:case ue.BEFORE_HTML:case ue.BEFORE_HEAD:case ue.IN_HEAD:case ue.IN_HEAD_NO_SCRIPT:case ue.AFTER_HEAD:case ue.IN_BODY:case ue.IN_TABLE:case ue.IN_CAPTION:case ue.IN_COLUMN_GROUP:case ue.IN_TABLE_BODY:case ue.IN_ROW:case ue.IN_CELL:case ue.IN_SELECT:case ue.IN_SELECT_IN_TABLE:case ue.IN_TEMPLATE:case ue.IN_FRAMESET:case ue.AFTER_FRAMESET:{zS(this,n);break}case ue.IN_TABLE_TEXT:{Td(this,n);break}case ue.AFTER_BODY:{ose(this,n);break}case ue.AFTER_AFTER_BODY:case ue.AFTER_AFTER_FRAMESET:{sse(this,n);break}}}},{key:"onDoctype",value:function(n){switch(this.skipNextNewLine=!1,this.insertionMode){case ue.INITIAL:{lse(this,n);break}case ue.BEFORE_HEAD:case ue.IN_HEAD:case ue.IN_HEAD_NO_SCRIPT:case ue.AFTER_HEAD:{this._err(n,dr.ERR.misplacedDoctype);break}case ue.IN_TABLE_TEXT:{Td(this,n);break}}}},{key:"onStartTag",value:function(n){this.skipNextNewLine=!1,this.currentToken=n,this._processStartTag(n),n.selfClosing&&!n.ackSelfClosing&&this._err(n,dr.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}},{key:"_processStartTag",value:function(n){this.shouldProcessStartTagTokenInForeignContent(n)?Ole(this,n):this._startTagOutsideForeignContent(n)}},{key:"_startTagOutsideForeignContent",value:function(n){switch(this.insertionMode){case ue.INITIAL:{hd(this,n);break}case ue.BEFORE_HTML:{use(this,n);break}case ue.BEFORE_HEAD:{hse(this,n);break}case ue.IN_HEAD:{ha(this,n);break}case ue.IN_HEAD_NO_SCRIPT:{pse(this,n);break}case ue.AFTER_HEAD:{gse(this,n);break}case ue.IN_BODY:{Nr(this,n);break}case ue.IN_TABLE:{bc(this,n);break}case ue.IN_TABLE_TEXT:{Td(this,n);break}case ue.IN_CAPTION:{fle(this,n);break}case ue.IN_COLUMN_GROUP:{YS(this,n);break}case ue.IN_TABLE_BODY:{z0(this,n);break}case ue.IN_ROW:{j0(this,n);break}case ue.IN_CELL:{mle(this,n);break}case ue.IN_SELECT:{kB(this,n);break}case ue.IN_SELECT_IN_TABLE:{vle(this,n);break}case ue.IN_TEMPLATE:{Tle(this,n);break}case ue.AFTER_BODY:{ble(this,n);break}case ue.IN_FRAMESET:{_le(this,n);break}case ue.AFTER_FRAMESET:{Ale(this,n);break}case ue.AFTER_AFTER_BODY:{Dle(this,n);break}case ue.AFTER_AFTER_FRAMESET:{wle(this,n);break}}}},{key:"onEndTag",value:function(n){this.skipNextNewLine=!1,this.currentToken=n,this.currentNotInHTML?xle(this,n):this._endTagOutsideForeignContent(n)}},{key:"_endTagOutsideForeignContent",value:function(n){switch(this.insertionMode){case ue.INITIAL:{hd(this,n);break}case ue.BEFORE_HTML:{cse(this,n);break}case ue.BEFORE_HEAD:{fse(this,n);break}case ue.IN_HEAD:{dse(this,n);break}case ue.IN_HEAD_NO_SCRIPT:{mse(this,n);break}case ue.AFTER_HEAD:{vse(this,n);break}case ue.IN_BODY:{U0(this,n);break}case ue.TEXT:{nle(this,n);break}case ue.IN_TABLE:{vd(this,n);break}case ue.IN_TABLE_TEXT:{Td(this,n);break}case ue.IN_CAPTION:{dle(this,n);break}case ue.IN_COLUMN_GROUP:{ple(this,n);break}case ue.IN_TABLE_BODY:{WS(this,n);break}case ue.IN_ROW:{IB(this,n);break}case ue.IN_CELL:{gle(this,n);break}case ue.IN_SELECT:{OB(this,n);break}case ue.IN_SELECT_IN_TABLE:{yle(this,n);break}case ue.IN_TEMPLATE:{Ele(this,n);break}case ue.AFTER_BODY:{PB(this,n);break}case ue.IN_FRAMESET:{Sle(this,n);break}case ue.AFTER_FRAMESET:{Cle(this,n);break}case ue.AFTER_AFTER_BODY:{Y0(this,n);break}}}},{key:"onEof",value:function(n){switch(this.insertionMode){case ue.INITIAL:{hd(this,n);break}case ue.BEFORE_HTML:{fd(this,n);break}case ue.BEFORE_HEAD:{dd(this,n);break}case ue.IN_HEAD:{pd(this,n);break}case ue.IN_HEAD_NO_SCRIPT:{md(this,n);break}case ue.AFTER_HEAD:{gd(this,n);break}case ue.IN_BODY:case ue.IN_TABLE:case ue.IN_CAPTION:case ue.IN_COLUMN_GROUP:case ue.IN_TABLE_BODY:case ue.IN_ROW:case ue.IN_CELL:case ue.IN_SELECT:case ue.IN_SELECT_IN_TABLE:{AB(this,n);break}case ue.TEXT:{rle(this,n);break}case ue.IN_TABLE_TEXT:{Td(this,n);break}case ue.IN_TEMPLATE:{xB(this,n);break}case ue.AFTER_BODY:case ue.IN_FRAMESET:case ue.AFTER_FRAMESET:case ue.AFTER_AFTER_BODY:case ue.AFTER_AFTER_FRAMESET:{jS(this,n);break}}}},{key:"onWhitespaceCharacter",value:function(n){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,n.chars.charCodeAt(0)===pB.CODE_POINTS.LINE_FEED)){if(n.chars.length===1)return;n.chars=n.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(n);return}switch(this.insertionMode){case ue.IN_HEAD:case ue.IN_HEAD_NO_SCRIPT:case ue.AFTER_HEAD:case ue.TEXT:case ue.IN_COLUMN_GROUP:case ue.IN_SELECT:case ue.IN_SELECT_IN_TABLE:case ue.IN_FRAMESET:case ue.AFTER_FRAMESET:{this._insertCharacters(n);break}case ue.IN_BODY:case ue.IN_CAPTION:case ue.IN_CELL:case ue.IN_TEMPLATE:case ue.AFTER_BODY:case ue.AFTER_AFTER_BODY:case ue.AFTER_AFTER_FRAMESET:{vB(this,n);break}case ue.IN_TABLE:case ue.IN_TABLE_BODY:case ue.IN_ROW:{VS(this,n);break}case ue.IN_TABLE_TEXT:{CB(this,n);break}}}}],[{key:"parse",value:function(n,i){const r=new this(i);return r.tokenizer.write(n,!0),r.document}},{key:"getFragmentParser",value:function(n,i){const r=Object.assign(Object.assign({},gB),i);n??(n=r.treeAdapter.createElement(O.TAG_NAMES.TEMPLATE,O.NS.HTML,[]));const a=r.treeAdapter.createElement("documentmock",O.NS.HTML,[]),o=new this(r,a,n);return o.fragmentContextID===O.TAG_ID.TEMPLATE&&o.tmplInsertionModeStack.unshift(ue.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}}]),e}();sd.Parser=Joe;function ese(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):SB(e,t),n}function tse(e,t){let n=null,i=e.openElements.stackTop;for(;i>=0;i--){const r=e.openElements.items[i];if(r===t.element)break;e._isSpecialElement(r,e.openElements.tagIDs[i])&&(n=r)}return n||(e.openElements.shortenToLength(i<0?0:i),e.activeFormattingElements.removeEntry(t)),n}function nse(e,t,n){let i=t,r=e.openElements.getCommonAncestor(t);for(let a=0,o=r;o!==n;a++,o=r){r=e.openElements.getCommonAncestor(o);const s=e.activeFormattingElements.getElementEntry(o),u=s&&a>=Zoe;!s||u?(u&&e.activeFormattingElements.removeEntry(s),e.openElements.remove(o)):(o=rse(e,s),i===t&&(e.activeFormattingElements.bookmark=s),e.treeAdapter.detachNode(i),e.treeAdapter.appendChild(o,i),i=o)}return i}function rse(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),i=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,i),t.element=i,i}function ise(e,t,n){const i=e.treeAdapter.getTagName(t),r=(0,O.getTagID)(i);if(e._isElementCausesFosterParenting(r))e._fosterParentElement(n);else{const a=e.treeAdapter.getNamespaceURI(t);r===O.TAG_ID.TEMPLATE&&a===O.NS.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function ase(e,t,n){const i=e.treeAdapter.getNamespaceURI(n.element),{token:r}=n,a=e.treeAdapter.createElement(r.tagName,i,r.attrs);e._adoptNodes(t,a),e.treeAdapter.appendChild(t,a),e.activeFormattingElements.insertElementAfterBookmark(a,r),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,a,r.tagID)}function GS(e,t){for(let n=0;n<Koe;n++){const i=ese(e,t);if(!i)break;const r=tse(e,i);if(!r)break;e.activeFormattingElements.bookmark=i;const a=nse(e,r,i.element),o=e.openElements.getCommonAncestor(i.element);e.treeAdapter.detachNode(a),o&&ise(e,o,a),ase(e,r,i)}}function zS(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function ose(e,t){e._appendCommentNode(t,e.openElements.items[0])}function sse(e,t){e._appendCommentNode(t,e.document)}function jS(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let i=e.openElements.stackTop;i>=n;i--)e._setEndLocation(e.openElements.items[i],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const i=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(i);if(r&&!r.endTag&&(e._setEndLocation(i,t),e.openElements.stackTop>=1)){const a=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(a);o&&!o.endTag&&e._setEndLocation(a,t)}}}}function lse(e,t){e._setDocumentType(t);const n=t.forceQuirks?O.DOCUMENT_MODE.QUIRKS:dB.getDocumentMode(t);dB.isConforming(t)||e._err(t,dr.ERR.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ue.BEFORE_HTML}function hd(e,t){e._err(t,dr.ERR.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,O.DOCUMENT_MODE.QUIRKS),e.insertionMode=ue.BEFORE_HTML,e._processToken(t)}function use(e,t){t.tagID===O.TAG_ID.HTML?(e._insertElement(t,O.NS.HTML),e.insertionMode=ue.BEFORE_HEAD):fd(e,t)}function cse(e,t){const n=t.tagID;(n===O.TAG_ID.HTML||n===O.TAG_ID.HEAD||n===O.TAG_ID.BODY||n===O.TAG_ID.BR)&&fd(e,t)}function fd(e,t){e._insertFakeRootElement(),e.insertionMode=ue.BEFORE_HEAD,e._processToken(t)}function hse(e,t){switch(t.tagID){case O.TAG_ID.HTML:{Nr(e,t);break}case O.TAG_ID.HEAD:{e._insertElement(t,O.NS.HTML),e.headElement=e.openElements.current,e.insertionMode=ue.IN_HEAD;break}default:dd(e,t)}}function fse(e,t){const n=t.tagID;n===O.TAG_ID.HEAD||n===O.TAG_ID.BODY||n===O.TAG_ID.HTML||n===O.TAG_ID.BR?dd(e,t):e._err(t,dr.ERR.endTagWithoutMatchingOpenElement)}function dd(e,t){e._insertFakeElement(O.TAG_NAMES.HEAD,O.TAG_ID.HEAD),e.headElement=e.openElements.current,e.insertionMode=ue.IN_HEAD,e._processToken(t)}function ha(e,t){switch(t.tagID){case O.TAG_ID.HTML:{Nr(e,t);break}case O.TAG_ID.BASE:case O.TAG_ID.BASEFONT:case O.TAG_ID.BGSOUND:case O.TAG_ID.LINK:case O.TAG_ID.META:{e._appendElement(t,O.NS.HTML),t.ackSelfClosing=!0;break}case O.TAG_ID.TITLE:{e._switchToTextParsing(t,qr.TokenizerMode.RCDATA);break}case O.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,qr.TokenizerMode.RAWTEXT):(e._insertElement(t,O.NS.HTML),e.insertionMode=ue.IN_HEAD_NO_SCRIPT);break}case O.TAG_ID.NOFRAMES:case O.TAG_ID.STYLE:{e._switchToTextParsing(t,qr.TokenizerMode.RAWTEXT);break}case O.TAG_ID.SCRIPT:{e._switchToTextParsing(t,qr.TokenizerMode.SCRIPT_DATA);break}case O.TAG_ID.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ue.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ue.IN_TEMPLATE);break}case O.TAG_ID.HEAD:{e._err(t,dr.ERR.misplacedStartTagForHeadElement);break}default:pd(e,t)}}function dse(e,t){switch(t.tagID){case O.TAG_ID.HEAD:{e.openElements.pop(),e.insertionMode=ue.AFTER_HEAD;break}case O.TAG_ID.BODY:case O.TAG_ID.BR:case O.TAG_ID.HTML:{pd(e,t);break}case O.TAG_ID.TEMPLATE:{wl(e,t);break}default:e._err(t,dr.ERR.endTagWithoutMatchingOpenElement)}}function wl(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==O.TAG_ID.TEMPLATE&&e._err(t,dr.ERR.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(O.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,dr.ERR.endTagWithoutMatchingOpenElement)}function pd(e,t){e.openElements.pop(),e.insertionMode=ue.AFTER_HEAD,e._processToken(t)}function pse(e,t){switch(t.tagID){case O.TAG_ID.HTML:{Nr(e,t);break}case O.TAG_ID.BASEFONT:case O.TAG_ID.BGSOUND:case O.TAG_ID.HEAD:case O.TAG_ID.LINK:case O.TAG_ID.META:case O.TAG_ID.NOFRAMES:case O.TAG_ID.STYLE:{ha(e,t);break}case O.TAG_ID.NOSCRIPT:{e._err(t,dr.ERR.nestedNoscriptInHead);break}default:md(e,t)}}function mse(e,t){switch(t.tagID){case O.TAG_ID.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ue.IN_HEAD;break}case O.TAG_ID.BR:{md(e,t);break}default:e._err(t,dr.ERR.endTagWithoutMatchingOpenElement)}}function md(e,t){const n=t.type===er.TokenType.EOF?dr.ERR.openElementsLeftAfterEof:dr.ERR.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ue.IN_HEAD,e._processToken(t)}function gse(e,t){switch(t.tagID){case O.TAG_ID.HTML:{Nr(e,t);break}case O.TAG_ID.BODY:{e._insertElement(t,O.NS.HTML),e.framesetOk=!1,e.insertionMode=ue.IN_BODY;break}case O.TAG_ID.FRAMESET:{e._insertElement(t,O.NS.HTML),e.insertionMode=ue.IN_FRAMESET;break}case O.TAG_ID.BASE:case O.TAG_ID.BASEFONT:case O.TAG_ID.BGSOUND:case O.TAG_ID.LINK:case O.TAG_ID.META:case O.TAG_ID.NOFRAMES:case O.TAG_ID.SCRIPT:case O.TAG_ID.STYLE:case O.TAG_ID.TEMPLATE:case O.TAG_ID.TITLE:{e._err(t,dr.ERR.abandonedHeadElementChild),e.openElements.push(e.headElement,O.TAG_ID.HEAD),ha(e,t),e.openElements.remove(e.headElement);break}case O.TAG_ID.HEAD:{e._err(t,dr.ERR.misplacedStartTagForHeadElement);break}default:gd(e,t)}}function vse(e,t){switch(t.tagID){case O.TAG_ID.BODY:case O.TAG_ID.HTML:case O.TAG_ID.BR:{gd(e,t);break}case O.TAG_ID.TEMPLATE:{wl(e,t);break}default:e._err(t,dr.ERR.endTagWithoutMatchingOpenElement)}}function gd(e,t){e._insertFakeElement(O.TAG_NAMES.BODY,O.TAG_ID.BODY),e.insertionMode=ue.IN_BODY,$0(e,t)}function $0(e,t){switch(t.type){case er.TokenType.CHARACTER:{yB(e,t);break}case er.TokenType.WHITESPACE_CHARACTER:{vB(e,t);break}case er.TokenType.COMMENT:{zS(e,t);break}case er.TokenType.START_TAG:{Nr(e,t);break}case er.TokenType.END_TAG:{U0(e,t);break}case er.TokenType.EOF:{AB(e,t);break}}}function vB(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function yB(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function yse(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Tse(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Ese(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,O.NS.HTML),e.insertionMode=ue.IN_FRAMESET)}function bse(e,t){e.openElements.hasInButtonScope(O.TAG_ID.P)&&e._closePElement(),e._insertElement(t,O.NS.HTML)}function _se(e,t){e.openElements.hasInButtonScope(O.TAG_ID.P)&&e._closePElement(),(0,O.isNumberedHeader)(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,O.NS.HTML)}function Sse(e,t){e.openElements.hasInButtonScope(O.TAG_ID.P)&&e._closePElement(),e._insertElement(t,O.NS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Ase(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(O.TAG_ID.P)&&e._closePElement(),e._insertElement(t,O.NS.HTML),n||(e.formElement=e.openElements.current))}function Cse(e,t){e.framesetOk=!1;const n=t.tagID;for(let i=e.openElements.stackTop;i>=0;i--){const r=e.openElements.tagIDs[i];if(n===O.TAG_ID.LI&&r===O.TAG_ID.LI||(n===O.TAG_ID.DD||n===O.TAG_ID.DT)&&(r===O.TAG_ID.DD||r===O.TAG_ID.DT)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r);break}if(r!==O.TAG_ID.ADDRESS&&r!==O.TAG_ID.DIV&&r!==O.TAG_ID.P&&e._isSpecialElement(e.openElements.items[i],r))break}e.openElements.hasInButtonScope(O.TAG_ID.P)&&e._closePElement(),e._insertElement(t,O.NS.HTML)}function Dse(e,t){e.openElements.hasInButtonScope(O.TAG_ID.P)&&e._closePElement(),e._insertElement(t,O.NS.HTML),e.tokenizer.state=qr.TokenizerMode.PLAINTEXT}function wse(e,t){e.openElements.hasInScope(O.TAG_ID.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.TAG_ID.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,O.NS.HTML),e.framesetOk=!1}function Ise(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(O.TAG_NAMES.A);n&&(GS(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,O.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function kse(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,O.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Ose(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(O.TAG_ID.NOBR)&&(GS(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,O.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function xse(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,O.NS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Pse(e,t){e.treeAdapter.getDocumentMode(e.document)!==O.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(O.TAG_ID.P)&&e._closePElement(),e._insertElement(t,O.NS.HTML),e.framesetOk=!1,e.insertionMode=ue.IN_TABLE}function TB(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,O.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function EB(e){const t=(0,er.getTokenAttr)(e,O.ATTRS.TYPE);return t!=null&&t.toLowerCase()===Xoe}function Rse(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,O.NS.HTML),EB(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Nse(e,t){e._appendElement(t,O.NS.HTML),t.ackSelfClosing=!0}function Mse(e,t){e.openElements.hasInButtonScope(O.TAG_ID.P)&&e._closePElement(),e._appendElement(t,O.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Lse(e,t){t.tagName=O.TAG_NAMES.IMG,t.tagID=O.TAG_ID.IMG,TB(e,t)}function Bse(e,t){e._insertElement(t,O.NS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=qr.TokenizerMode.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ue.TEXT}function Fse(e,t){e.openElements.hasInButtonScope(O.TAG_ID.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,qr.TokenizerMode.RAWTEXT)}function Hse(e,t){e.framesetOk=!1,e._switchToTextParsing(t,qr.TokenizerMode.RAWTEXT)}function bB(e,t){e._switchToTextParsing(t,qr.TokenizerMode.RAWTEXT)}function $se(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,O.NS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ue.IN_TABLE||e.insertionMode===ue.IN_CAPTION||e.insertionMode===ue.IN_TABLE_BODY||e.insertionMode===ue.IN_ROW||e.insertionMode===ue.IN_CELL?ue.IN_SELECT_IN_TABLE:ue.IN_SELECT}function Use(e,t){e.openElements.currentTagId===O.TAG_ID.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,O.NS.HTML)}function Gse(e,t){e.openElements.hasInScope(O.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,O.NS.HTML)}function zse(e,t){e.openElements.hasInScope(O.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(O.TAG_ID.RTC),e._insertElement(t,O.NS.HTML)}function jse(e,t){e._reconstructActiveFormattingElements(),Va.adjustTokenMathMLAttrs(t),Va.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,O.NS.MATHML):e._insertElement(t,O.NS.MATHML),t.ackSelfClosing=!0}function Vse(e,t){e._reconstructActiveFormattingElements(),Va.adjustTokenSVGAttrs(t),Va.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,O.NS.SVG):e._insertElement(t,O.NS.SVG),t.ackSelfClosing=!0}function _B(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,O.NS.HTML)}function Nr(e,t){switch(t.tagID){case O.TAG_ID.I:case O.TAG_ID.S:case O.TAG_ID.B:case O.TAG_ID.U:case O.TAG_ID.EM:case O.TAG_ID.TT:case O.TAG_ID.BIG:case O.TAG_ID.CODE:case O.TAG_ID.FONT:case O.TAG_ID.SMALL:case O.TAG_ID.STRIKE:case O.TAG_ID.STRONG:{kse(e,t);break}case O.TAG_ID.A:{Ise(e,t);break}case O.TAG_ID.H1:case O.TAG_ID.H2:case O.TAG_ID.H3:case O.TAG_ID.H4:case O.TAG_ID.H5:case O.TAG_ID.H6:{_se(e,t);break}case O.TAG_ID.P:case O.TAG_ID.DL:case O.TAG_ID.OL:case O.TAG_ID.UL:case O.TAG_ID.DIV:case O.TAG_ID.DIR:case O.TAG_ID.NAV:case O.TAG_ID.MAIN:case O.TAG_ID.MENU:case O.TAG_ID.ASIDE:case O.TAG_ID.CENTER:case O.TAG_ID.FIGURE:case O.TAG_ID.FOOTER:case O.TAG_ID.HEADER:case O.TAG_ID.HGROUP:case O.TAG_ID.DIALOG:case O.TAG_ID.DETAILS:case O.TAG_ID.ADDRESS:case O.TAG_ID.ARTICLE:case O.TAG_ID.SECTION:case O.TAG_ID.SUMMARY:case O.TAG_ID.FIELDSET:case O.TAG_ID.BLOCKQUOTE:case O.TAG_ID.FIGCAPTION:{bse(e,t);break}case O.TAG_ID.LI:case O.TAG_ID.DD:case O.TAG_ID.DT:{Cse(e,t);break}case O.TAG_ID.BR:case O.TAG_ID.IMG:case O.TAG_ID.WBR:case O.TAG_ID.AREA:case O.TAG_ID.EMBED:case O.TAG_ID.KEYGEN:{TB(e,t);break}case O.TAG_ID.HR:{Mse(e,t);break}case O.TAG_ID.RB:case O.TAG_ID.RTC:{Gse(e,t);break}case O.TAG_ID.RT:case O.TAG_ID.RP:{zse(e,t);break}case O.TAG_ID.PRE:case O.TAG_ID.LISTING:{Sse(e,t);break}case O.TAG_ID.XMP:{Fse(e,t);break}case O.TAG_ID.SVG:{Vse(e,t);break}case O.TAG_ID.HTML:{yse(e,t);break}case O.TAG_ID.BASE:case O.TAG_ID.LINK:case O.TAG_ID.META:case O.TAG_ID.STYLE:case O.TAG_ID.TITLE:case O.TAG_ID.SCRIPT:case O.TAG_ID.BGSOUND:case O.TAG_ID.BASEFONT:case O.TAG_ID.TEMPLATE:{ha(e,t);break}case O.TAG_ID.BODY:{Tse(e,t);break}case O.TAG_ID.FORM:{Ase(e,t);break}case O.TAG_ID.NOBR:{Ose(e,t);break}case O.TAG_ID.MATH:{jse(e,t);break}case O.TAG_ID.TABLE:{Pse(e,t);break}case O.TAG_ID.INPUT:{Rse(e,t);break}case O.TAG_ID.PARAM:case O.TAG_ID.TRACK:case O.TAG_ID.SOURCE:{Nse(e,t);break}case O.TAG_ID.IMAGE:{Lse(e,t);break}case O.TAG_ID.BUTTON:{wse(e,t);break}case O.TAG_ID.APPLET:case O.TAG_ID.OBJECT:case O.TAG_ID.MARQUEE:{xse(e,t);break}case O.TAG_ID.IFRAME:{Hse(e,t);break}case O.TAG_ID.SELECT:{$se(e,t);break}case O.TAG_ID.OPTION:case O.TAG_ID.OPTGROUP:{Use(e,t);break}case O.TAG_ID.NOEMBED:{bB(e,t);break}case O.TAG_ID.FRAMESET:{Ese(e,t);break}case O.TAG_ID.TEXTAREA:{Bse(e,t);break}case O.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?bB(e,t):_B(e,t);break}case O.TAG_ID.PLAINTEXT:{Dse(e,t);break}case O.TAG_ID.COL:case O.TAG_ID.TH:case O.TAG_ID.TD:case O.TAG_ID.TR:case O.TAG_ID.HEAD:case O.TAG_ID.FRAME:case O.TAG_ID.TBODY:case O.TAG_ID.TFOOT:case O.TAG_ID.THEAD:case O.TAG_ID.CAPTION:case O.TAG_ID.COLGROUP:break;default:_B(e,t)}}function Yse(e,t){if(e.openElements.hasInScope(O.TAG_ID.BODY)&&(e.insertionMode=ue.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Wse(e,t){e.openElements.hasInScope(O.TAG_ID.BODY)&&(e.insertionMode=ue.AFTER_BODY,PB(e,t))}function qse(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Xse(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(O.TAG_ID.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(O.TAG_ID.FORM):n&&e.openElements.remove(n))}function Kse(e){e.openElements.hasInButtonScope(O.TAG_ID.P)||e._insertFakeElement(O.TAG_NAMES.P,O.TAG_ID.P),e._closePElement()}function Zse(e){e.openElements.hasInListItemScope(O.TAG_ID.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(O.TAG_ID.LI),e.openElements.popUntilTagNamePopped(O.TAG_ID.LI))}function Qse(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Jse(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function ele(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function tle(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(O.TAG_NAMES.BR,O.TAG_ID.BR),e.openElements.pop(),e.framesetOk=!1}function SB(e,t){const n=t.tagName,i=t.tagID;for(let r=e.openElements.stackTop;r>0;r--){const a=e.openElements.items[r],o=e.openElements.tagIDs[r];if(i===o&&(i!==O.TAG_ID.UNKNOWN||e.treeAdapter.getTagName(a)===n)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.stackTop>=r&&e.openElements.shortenToLength(r);break}if(e._isSpecialElement(a,o))break}}function U0(e,t){switch(t.tagID){case O.TAG_ID.A:case O.TAG_ID.B:case O.TAG_ID.I:case O.TAG_ID.S:case O.TAG_ID.U:case O.TAG_ID.EM:case O.TAG_ID.TT:case O.TAG_ID.BIG:case O.TAG_ID.CODE:case O.TAG_ID.FONT:case O.TAG_ID.NOBR:case O.TAG_ID.SMALL:case O.TAG_ID.STRIKE:case O.TAG_ID.STRONG:{GS(e,t);break}case O.TAG_ID.P:{Kse(e);break}case O.TAG_ID.DL:case O.TAG_ID.UL:case O.TAG_ID.OL:case O.TAG_ID.DIR:case O.TAG_ID.DIV:case O.TAG_ID.NAV:case O.TAG_ID.PRE:case O.TAG_ID.MAIN:case O.TAG_ID.MENU:case O.TAG_ID.ASIDE:case O.TAG_ID.BUTTON:case O.TAG_ID.CENTER:case O.TAG_ID.FIGURE:case O.TAG_ID.FOOTER:case O.TAG_ID.HEADER:case O.TAG_ID.HGROUP:case O.TAG_ID.DIALOG:case O.TAG_ID.ADDRESS:case O.TAG_ID.ARTICLE:case O.TAG_ID.DETAILS:case O.TAG_ID.SECTION:case O.TAG_ID.SUMMARY:case O.TAG_ID.LISTING:case O.TAG_ID.FIELDSET:case O.TAG_ID.BLOCKQUOTE:case O.TAG_ID.FIGCAPTION:{qse(e,t);break}case O.TAG_ID.LI:{Zse(e);break}case O.TAG_ID.DD:case O.TAG_ID.DT:{Qse(e,t);break}case O.TAG_ID.H1:case O.TAG_ID.H2:case O.TAG_ID.H3:case O.TAG_ID.H4:case O.TAG_ID.H5:case O.TAG_ID.H6:{Jse(e);break}case O.TAG_ID.BR:{tle(e);break}case O.TAG_ID.BODY:{Yse(e,t);break}case O.TAG_ID.HTML:{Wse(e,t);break}case O.TAG_ID.FORM:{Xse(e);break}case O.TAG_ID.APPLET:case O.TAG_ID.OBJECT:case O.TAG_ID.MARQUEE:{ele(e,t);break}case O.TAG_ID.TEMPLATE:{wl(e,t);break}default:SB(e,t)}}function AB(e,t){e.tmplInsertionModeStack.length>0?xB(e,t):jS(e,t)}function nle(e,t){var n;t.tagID===O.TAG_ID.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function rle(e,t){e._err(t,dr.ERR.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function VS(e,t){if(mB.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ue.IN_TABLE_TEXT,t.type){case er.TokenType.CHARACTER:{DB(e,t);break}case er.TokenType.WHITESPACE_CHARACTER:{CB(e,t);break}}else yd(e,t)}function ile(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,O.NS.HTML),e.insertionMode=ue.IN_CAPTION}function ale(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,O.NS.HTML),e.insertionMode=ue.IN_COLUMN_GROUP}function ole(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(O.TAG_NAMES.COLGROUP,O.TAG_ID.COLGROUP),e.insertionMode=ue.IN_COLUMN_GROUP,YS(e,t)}function sle(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,O.NS.HTML),e.insertionMode=ue.IN_TABLE_BODY}function lle(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(O.TAG_NAMES.TBODY,O.TAG_ID.TBODY),e.insertionMode=ue.IN_TABLE_BODY,z0(e,t)}function ule(e,t){e.openElements.hasInTableScope(O.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TAG_ID.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function cle(e,t){EB(t)?e._appendElement(t,O.NS.HTML):yd(e,t),t.ackSelfClosing=!0}function hle(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,O.NS.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function bc(e,t){switch(t.tagID){case O.TAG_ID.TD:case O.TAG_ID.TH:case O.TAG_ID.TR:{lle(e,t);break}case O.TAG_ID.STYLE:case O.TAG_ID.SCRIPT:case O.TAG_ID.TEMPLATE:{ha(e,t);break}case O.TAG_ID.COL:{ole(e,t);break}case O.TAG_ID.FORM:{hle(e,t);break}case O.TAG_ID.TABLE:{ule(e,t);break}case O.TAG_ID.TBODY:case O.TAG_ID.TFOOT:case O.TAG_ID.THEAD:{sle(e,t);break}case O.TAG_ID.INPUT:{cle(e,t);break}case O.TAG_ID.CAPTION:{ile(e,t);break}case O.TAG_ID.COLGROUP:{ale(e,t);break}default:yd(e,t)}}function vd(e,t){switch(t.tagID){case O.TAG_ID.TABLE:{e.openElements.hasInTableScope(O.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TAG_ID.TABLE),e._resetInsertionMode());break}case O.TAG_ID.TEMPLATE:{wl(e,t);break}case O.TAG_ID.BODY:case O.TAG_ID.CAPTION:case O.TAG_ID.COL:case O.TAG_ID.COLGROUP:case O.TAG_ID.HTML:case O.TAG_ID.TBODY:case O.TAG_ID.TD:case O.TAG_ID.TFOOT:case O.TAG_ID.TH:case O.TAG_ID.THEAD:case O.TAG_ID.TR:break;default:yd(e,t)}}function yd(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,$0(e,t),e.fosterParentingEnabled=n}function CB(e,t){e.pendingCharacterTokens.push(t)}function DB(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Td(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)yd(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const wB=new Set([O.TAG_ID.CAPTION,O.TAG_ID.COL,O.TAG_ID.COLGROUP,O.TAG_ID.TBODY,O.TAG_ID.TD,O.TAG_ID.TFOOT,O.TAG_ID.TH,O.TAG_ID.THEAD,O.TAG_ID.TR]);function fle(e,t){const n=t.tagID;wB.has(n)?e.openElements.hasInTableScope(O.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ue.IN_TABLE,bc(e,t)):Nr(e,t)}function dle(e,t){const n=t.tagID;switch(n){case O.TAG_ID.CAPTION:case O.TAG_ID.TABLE:{e.openElements.hasInTableScope(O.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ue.IN_TABLE,n===O.TAG_ID.TABLE&&vd(e,t));break}case O.TAG_ID.BODY:case O.TAG_ID.COL:case O.TAG_ID.COLGROUP:case O.TAG_ID.HTML:case O.TAG_ID.TBODY:case O.TAG_ID.TD:case O.TAG_ID.TFOOT:case O.TAG_ID.TH:case O.TAG_ID.THEAD:case O.TAG_ID.TR:break;default:U0(e,t)}}function YS(e,t){switch(t.tagID){case O.TAG_ID.HTML:{Nr(e,t);break}case O.TAG_ID.COL:{e._appendElement(t,O.NS.HTML),t.ackSelfClosing=!0;break}case O.TAG_ID.TEMPLATE:{ha(e,t);break}default:G0(e,t)}}function ple(e,t){switch(t.tagID){case O.TAG_ID.COLGROUP:{e.openElements.currentTagId===O.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=ue.IN_TABLE);break}case O.TAG_ID.TEMPLATE:{wl(e,t);break}case O.TAG_ID.COL:break;default:G0(e,t)}}function G0(e,t){e.openElements.currentTagId===O.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=ue.IN_TABLE,e._processToken(t))}function z0(e,t){switch(t.tagID){case O.TAG_ID.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,O.NS.HTML),e.insertionMode=ue.IN_ROW;break}case O.TAG_ID.TH:case O.TAG_ID.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(O.TAG_NAMES.TR,O.TAG_ID.TR),e.insertionMode=ue.IN_ROW,j0(e,t);break}case O.TAG_ID.CAPTION:case O.TAG_ID.COL:case O.TAG_ID.COLGROUP:case O.TAG_ID.TBODY:case O.TAG_ID.TFOOT:case O.TAG_ID.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ue.IN_TABLE,bc(e,t));break}default:bc(e,t)}}function WS(e,t){const n=t.tagID;switch(t.tagID){case O.TAG_ID.TBODY:case O.TAG_ID.TFOOT:case O.TAG_ID.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ue.IN_TABLE);break}case O.TAG_ID.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ue.IN_TABLE,vd(e,t));break}case O.TAG_ID.BODY:case O.TAG_ID.CAPTION:case O.TAG_ID.COL:case O.TAG_ID.COLGROUP:case O.TAG_ID.HTML:case O.TAG_ID.TD:case O.TAG_ID.TH:case O.TAG_ID.TR:break;default:vd(e,t)}}function j0(e,t){switch(t.tagID){case O.TAG_ID.TH:case O.TAG_ID.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,O.NS.HTML),e.insertionMode=ue.IN_CELL,e.activeFormattingElements.insertMarker();break}case O.TAG_ID.CAPTION:case O.TAG_ID.COL:case O.TAG_ID.COLGROUP:case O.TAG_ID.TBODY:case O.TAG_ID.TFOOT:case O.TAG_ID.THEAD:case O.TAG_ID.TR:{e.openElements.hasInTableScope(O.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ue.IN_TABLE_BODY,z0(e,t));break}default:bc(e,t)}}function IB(e,t){switch(t.tagID){case O.TAG_ID.TR:{e.openElements.hasInTableScope(O.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ue.IN_TABLE_BODY);break}case O.TAG_ID.TABLE:{e.openElements.hasInTableScope(O.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ue.IN_TABLE_BODY,WS(e,t));break}case O.TAG_ID.TBODY:case O.TAG_ID.TFOOT:case O.TAG_ID.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(O.TAG_ID.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ue.IN_TABLE_BODY,WS(e,t));break}case O.TAG_ID.BODY:case O.TAG_ID.CAPTION:case O.TAG_ID.COL:case O.TAG_ID.COLGROUP:case O.TAG_ID.HTML:case O.TAG_ID.TD:case O.TAG_ID.TH:break;default:vd(e,t)}}function mle(e,t){const n=t.tagID;wB.has(n)?(e.openElements.hasInTableScope(O.TAG_ID.TD)||e.openElements.hasInTableScope(O.TAG_ID.TH))&&(e._closeTableCell(),j0(e,t)):Nr(e,t)}function gle(e,t){const n=t.tagID;switch(n){case O.TAG_ID.TD:case O.TAG_ID.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ue.IN_ROW);break}case O.TAG_ID.TABLE:case O.TAG_ID.TBODY:case O.TAG_ID.TFOOT:case O.TAG_ID.THEAD:case O.TAG_ID.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),IB(e,t));break}case O.TAG_ID.BODY:case O.TAG_ID.CAPTION:case O.TAG_ID.COL:case O.TAG_ID.COLGROUP:case O.TAG_ID.HTML:break;default:U0(e,t)}}function kB(e,t){switch(t.tagID){case O.TAG_ID.HTML:{Nr(e,t);break}case O.TAG_ID.OPTION:{e.openElements.currentTagId===O.TAG_ID.OPTION&&e.openElements.pop(),e._insertElement(t,O.NS.HTML);break}case O.TAG_ID.OPTGROUP:{e.openElements.currentTagId===O.TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===O.TAG_ID.OPTGROUP&&e.openElements.pop(),e._insertElement(t,O.NS.HTML);break}case O.TAG_ID.INPUT:case O.TAG_ID.KEYGEN:case O.TAG_ID.TEXTAREA:case O.TAG_ID.SELECT:{e.openElements.hasInSelectScope(O.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(O.TAG_ID.SELECT),e._resetInsertionMode(),t.tagID!==O.TAG_ID.SELECT&&e._processStartTag(t));break}case O.TAG_ID.SCRIPT:case O.TAG_ID.TEMPLATE:{ha(e,t);break}}}function OB(e,t){switch(t.tagID){case O.TAG_ID.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===O.TAG_ID.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===O.TAG_ID.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===O.TAG_ID.OPTGROUP&&e.openElements.pop();break}case O.TAG_ID.OPTION:{e.openElements.currentTagId===O.TAG_ID.OPTION&&e.openElements.pop();break}case O.TAG_ID.SELECT:{e.openElements.hasInSelectScope(O.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(O.TAG_ID.SELECT),e._resetInsertionMode());break}case O.TAG_ID.TEMPLATE:{wl(e,t);break}}}function vle(e,t){const n=t.tagID;n===O.TAG_ID.CAPTION||n===O.TAG_ID.TABLE||n===O.TAG_ID.TBODY||n===O.TAG_ID.TFOOT||n===O.TAG_ID.THEAD||n===O.TAG_ID.TR||n===O.TAG_ID.TD||n===O.TAG_ID.TH?(e.openElements.popUntilTagNamePopped(O.TAG_ID.SELECT),e._resetInsertionMode(),e._processStartTag(t)):kB(e,t)}function yle(e,t){const n=t.tagID;n===O.TAG_ID.CAPTION||n===O.TAG_ID.TABLE||n===O.TAG_ID.TBODY||n===O.TAG_ID.TFOOT||n===O.TAG_ID.THEAD||n===O.TAG_ID.TR||n===O.TAG_ID.TD||n===O.TAG_ID.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(O.TAG_ID.SELECT),e._resetInsertionMode(),e.onEndTag(t)):OB(e,t)}function Tle(e,t){switch(t.tagID){case O.TAG_ID.BASE:case O.TAG_ID.BASEFONT:case O.TAG_ID.BGSOUND:case O.TAG_ID.LINK:case O.TAG_ID.META:case O.TAG_ID.NOFRAMES:case O.TAG_ID.SCRIPT:case O.TAG_ID.STYLE:case O.TAG_ID.TEMPLATE:case O.TAG_ID.TITLE:{ha(e,t);break}case O.TAG_ID.CAPTION:case O.TAG_ID.COLGROUP:case O.TAG_ID.TBODY:case O.TAG_ID.TFOOT:case O.TAG_ID.THEAD:{e.tmplInsertionModeStack[0]=ue.IN_TABLE,e.insertionMode=ue.IN_TABLE,bc(e,t);break}case O.TAG_ID.COL:{e.tmplInsertionModeStack[0]=ue.IN_COLUMN_GROUP,e.insertionMode=ue.IN_COLUMN_GROUP,YS(e,t);break}case O.TAG_ID.TR:{e.tmplInsertionModeStack[0]=ue.IN_TABLE_BODY,e.insertionMode=ue.IN_TABLE_BODY,z0(e,t);break}case O.TAG_ID.TD:case O.TAG_ID.TH:{e.tmplInsertionModeStack[0]=ue.IN_ROW,e.insertionMode=ue.IN_ROW,j0(e,t);break}default:e.tmplInsertionModeStack[0]=ue.IN_BODY,e.insertionMode=ue.IN_BODY,Nr(e,t)}}function Ele(e,t){t.tagID===O.TAG_ID.TEMPLATE&&wl(e,t)}function xB(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(O.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):jS(e,t)}function ble(e,t){t.tagID===O.TAG_ID.HTML?Nr(e,t):V0(e,t)}function PB(e,t){var n;if(t.tagID===O.TAG_ID.HTML){if(e.fragmentContext||(e.insertionMode=ue.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===O.TAG_ID.HTML){e._setEndLocation(e.openElements.items[0],t);const i=e.openElements.items[1];i&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(i))===null||n===void 0)&&n.endTag)&&e._setEndLocation(i,t)}}else V0(e,t)}function V0(e,t){e.insertionMode=ue.IN_BODY,$0(e,t)}function _le(e,t){switch(t.tagID){case O.TAG_ID.HTML:{Nr(e,t);break}case O.TAG_ID.FRAMESET:{e._insertElement(t,O.NS.HTML);break}case O.TAG_ID.FRAME:{e._appendElement(t,O.NS.HTML),t.ackSelfClosing=!0;break}case O.TAG_ID.NOFRAMES:{ha(e,t);break}}}function Sle(e,t){t.tagID===O.TAG_ID.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==O.TAG_ID.FRAMESET&&(e.insertionMode=ue.AFTER_FRAMESET))}function Ale(e,t){switch(t.tagID){case O.TAG_ID.HTML:{Nr(e,t);break}case O.TAG_ID.NOFRAMES:{ha(e,t);break}}}function Cle(e,t){t.tagID===O.TAG_ID.HTML&&(e.insertionMode=ue.AFTER_AFTER_FRAMESET)}function Dle(e,t){t.tagID===O.TAG_ID.HTML?Nr(e,t):Y0(e,t)}function Y0(e,t){e.insertionMode=ue.IN_BODY,$0(e,t)}function wle(e,t){switch(t.tagID){case O.TAG_ID.HTML:{Nr(e,t);break}case O.TAG_ID.NOFRAMES:{ha(e,t);break}}}function Ile(e,t){t.chars=pB.REPLACEMENT_CHARACTER,e._insertCharacters(t)}function kle(e,t){e._insertCharacters(t),e.framesetOk=!1}function RB(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==O.NS.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Ole(e,t){if(Va.causesExit(t))RB(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),i=e.treeAdapter.getNamespaceURI(n);i===O.NS.MATHML?Va.adjustTokenMathMLAttrs(t):i===O.NS.SVG&&(Va.adjustTokenSVGTagName(t),Va.adjustTokenSVGAttrs(t)),Va.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,i):e._insertElement(t,i),t.ackSelfClosing=!0}}function xle(e,t){if(t.tagID===O.TAG_ID.P||t.tagID===O.TAG_ID.BR){RB(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const i=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(i)===O.NS.HTML){e._endTagOutsideForeignContent(t);break}const r=e.treeAdapter.getTagName(i);if(r.toLowerCase()===t.tagName){t.tagName=r,e.openElements.shortenToLength(n);break}}}var _c={};Object.defineProperty(_c,"__esModule",{value:!0}),_c.serializeOuter=_c.serialize=void 0;const vn=Oo,NB=rc,Ple=H0,Rle=new Set([vn.TAG_NAMES.AREA,vn.TAG_NAMES.BASE,vn.TAG_NAMES.BASEFONT,vn.TAG_NAMES.BGSOUND,vn.TAG_NAMES.BR,vn.TAG_NAMES.COL,vn.TAG_NAMES.EMBED,vn.TAG_NAMES.FRAME,vn.TAG_NAMES.HR,vn.TAG_NAMES.IMG,vn.TAG_NAMES.INPUT,vn.TAG_NAMES.KEYGEN,vn.TAG_NAMES.LINK,vn.TAG_NAMES.META,vn.TAG_NAMES.PARAM,vn.TAG_NAMES.SOURCE,vn.TAG_NAMES.TRACK,vn.TAG_NAMES.WBR]);function MB(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===vn.NS.HTML&&Rle.has(t.treeAdapter.getTagName(e))}const LB={treeAdapter:Ple.defaultTreeAdapter,scriptingEnabled:!0};function Nle(e,t){const n=Object.assign(Object.assign({},LB),t);return MB(e,n)?"":BB(e,n)}_c.serialize=Nle;function Mle(e,t){const n=Object.assign(Object.assign({},LB),t);return FB(e,n)}_c.serializeOuter=Mle;function BB(e,t){let n="";const i=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===vn.TAG_NAMES.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===vn.NS.HTML?t.treeAdapter.getTemplateContent(e):e,r=t.treeAdapter.getChildNodes(i);if(r)for(const a of r)n+=FB(a,t);return n}function FB(e,t){return t.treeAdapter.isElementNode(e)?Lle(e,t):t.treeAdapter.isTextNode(e)?Fle(e,t):t.treeAdapter.isCommentNode(e)?Hle(e,t):t.treeAdapter.isDocumentTypeNode(e)?$le(e,t):""}function Lle(e,t){const n=t.treeAdapter.getTagName(e);return`<${n}${Ble(e,t)}>${MB(e,t)?"":`${BB(e,t)}</${n}>`}`}function Ble(e,{treeAdapter:t}){let n="";for(const i of t.getAttrList(e)){if(n+=" ",!i.namespace)n+=i.name;else switch(i.namespace){case vn.NS.XML:{n+=`xml:${i.name}`;break}case vn.NS.XMLNS:{i.name!=="xmlns"&&(n+="xmlns:"),n+=i.name;break}case vn.NS.XLINK:{n+=`xlink:${i.name}`;break}default:n+=`${i.prefix}:${i.name}`}n+=`="${(0,NB.escapeAttribute)(i.value)}"`}return n}function Fle(e,t){const{treeAdapter:n}=t,i=n.getTextNodeContent(e),r=n.getParentNode(e),a=r&&n.isElementNode(r)&&n.getTagName(r);return a&&n.getNamespaceURI(r)===vn.NS.HTML&&(0,vn.hasUnescapedText)(a,t.scriptingEnabled)?i:(0,NB.escapeText)(i)}function Hle(e,{treeAdapter:t}){return`<!--${t.getCommentNodeContent(e)}-->`}function $le(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseFragment=e.parse=e.TokenizerMode=e.Tokenizer=e.Token=e.html=e.foreignContent=e.ErrorCodes=e.serializeOuter=e.serialize=e.Parser=e.defaultTreeAdapter=void 0;const t=sd;var n=H0;Object.defineProperty(e,"defaultTreeAdapter",{enumerable:!0,get:function(){return n.defaultTreeAdapter}});var i=sd;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return i.Parser}});var r=_c;Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return r.serialize}}),Object.defineProperty(e,"serializeOuter",{enumerable:!0,get:function(){return r.serializeOuter}});var a=ld;Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return a.ERR}}),e.foreignContent=US,e.html=Oo,e.Token=M0;var o=Dl;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return o.Tokenizer}}),Object.defineProperty(e,"TokenizerMode",{enumerable:!0,get:function(){return o.TokenizerMode}});function s(c,l){return t.Parser.parse(c,l)}e.parse=s;function u(c,l,f){typeof c=="string"&&(f=l,l=c,c=null);const h=t.Parser.getFragmentParser(c,f);return h.tokenizer.write(l,!0),h.getFragment()}e.parseFragment=u})(eB);var HB={},$B={},Ed={},Il={},W0={},q0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUndefinedCodePoint=e.isControlCodePoint=e.getSurrogatePairCodePoint=e.isSurrogatePair=e.isSurrogate=e.SEQUENCES=e.CODE_POINTS=e.REPLACEMENT_CHARACTER=void 0;const t=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]);e.REPLACEMENT_CHARACTER="\uFFFD",function(s){s[s.EOF=-1]="EOF",s[s.NULL=0]="NULL",s[s.TABULATION=9]="TABULATION",s[s.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",s[s.LINE_FEED=10]="LINE_FEED",s[s.FORM_FEED=12]="FORM_FEED",s[s.SPACE=32]="SPACE",s[s.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",s[s.QUOTATION_MARK=34]="QUOTATION_MARK",s[s.NUMBER_SIGN=35]="NUMBER_SIGN",s[s.AMPERSAND=38]="AMPERSAND",s[s.APOSTROPHE=39]="APOSTROPHE",s[s.HYPHEN_MINUS=45]="HYPHEN_MINUS",s[s.SOLIDUS=47]="SOLIDUS",s[s.DIGIT_0=48]="DIGIT_0",s[s.DIGIT_9=57]="DIGIT_9",s[s.SEMICOLON=59]="SEMICOLON",s[s.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",s[s.EQUALS_SIGN=61]="EQUALS_SIGN",s[s.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",s[s.QUESTION_MARK=63]="QUESTION_MARK",s[s.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",s[s.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",s[s.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",s[s.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",s[s.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",s[s.GRAVE_ACCENT=96]="GRAVE_ACCENT",s[s.LATIN_SMALL_A=97]="LATIN_SMALL_A",s[s.LATIN_SMALL_F=102]="LATIN_SMALL_F",s[s.LATIN_SMALL_X=120]="LATIN_SMALL_X",s[s.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",s[s.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"}(e.CODE_POINTS||(e.CODE_POINTS={})),e.SEQUENCES={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function n(s){return s>=55296&&s<=57343}e.isSurrogate=n;function i(s){return s>=56320&&s<=57343}e.isSurrogatePair=i;function r(s,u){return(s-55296)*1024+9216+u}e.getSurrogatePairCodePoint=r;function a(s){return s!==32&&s!==10&&s!==13&&s!==9&&s!==12&&s>=1&&s<=31||s>=127&&s<=159}e.isControlCodePoint=a;function o(s){return s>=64976&&s<=65007||t.has(s)}e.isUndefinedCodePoint=o})(q0);var bd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ERR=void 0,function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"}(e.ERR||(e.ERR={}))})(bd),Object.defineProperty(W0,"__esModule",{value:!0}),W0.Preprocessor=void 0;const Xr=q0,qS=bd,Ule=1<<16;let Gle=function(){function e(t){_classCallCheck3(this,e),this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Ule,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}return _createClass3(e,[{key:"col",get:function(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}},{key:"offset",get:function(){return this.droppedBufferSize+this.pos}},{key:"getError",value:function(n){const{line:i,col:r,offset:a}=this;return{code:n,startLine:i,endLine:i,startCol:r,endCol:r,startOffset:a,endOffset:a}}},{key:"_err",value:function(n){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(n)))}},{key:"_addGap",value:function(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}},{key:"_processSurrogate",value:function(n){if(this.pos!==this.html.length-1){const i=this.html.charCodeAt(this.pos+1);if((0,Xr.isSurrogatePair)(i))return this.pos++,this._addGap(),(0,Xr.getSurrogatePairCodePoint)(n,i)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Xr.CODE_POINTS.EOF;return this._err(qS.ERR.surrogateInInputStream),n}},{key:"willDropParsedChunk",value:function(){return this.pos>this.bufferWaterline}},{key:"dropParsedChunk",value:function(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}},{key:"write",value:function(n,i){this.html.length>0?this.html+=n:this.html=n,this.endOfChunkHit=!1,this.lastChunkWritten=i}},{key:"insertHtmlAtCurrentPos",value:function(n){this.html=this.html.substring(0,this.pos+1)+n+this.html.substring(this.pos+1),this.endOfChunkHit=!1}},{key:"startsWith",value:function(n,i){if(this.pos+n.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(i)return this.html.startsWith(n,this.pos);for(let r=0;r<n.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==n.charCodeAt(r))return!1;return!0}},{key:"peek",value:function(n){const i=this.pos+n;if(i>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Xr.CODE_POINTS.EOF;const r=this.html.charCodeAt(i);return r===Xr.CODE_POINTS.CARRIAGE_RETURN?Xr.CODE_POINTS.LINE_FEED:r}},{key:"advance",value:function(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Xr.CODE_POINTS.EOF;let n=this.html.charCodeAt(this.pos);return n===Xr.CODE_POINTS.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Xr.CODE_POINTS.LINE_FEED):n===Xr.CODE_POINTS.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,(0,Xr.isSurrogate)(n)&&(n=this._processSurrogate(n)),this.handler.onParseError===null||n>31&&n<127||n===Xr.CODE_POINTS.LINE_FEED||n===Xr.CODE_POINTS.CARRIAGE_RETURN||n>159&&n<64976||this._checkForProblematicCharacters(n),n)}},{key:"_checkForProblematicCharacters",value:function(n){(0,Xr.isControlCodePoint)(n)?this._err(qS.ERR.controlCharacterInInputStream):(0,Xr.isUndefinedCodePoint)(n)&&this._err(qS.ERR.noncharacterInInputStream)}},{key:"retreat",value:function(n){for(this.pos-=n;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}]),e}();W0.Preprocessor=Gle;var X0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getTokenAttr=e.TokenType=void 0,function(n){n[n.CHARACTER=0]="CHARACTER",n[n.NULL_CHARACTER=1]="NULL_CHARACTER",n[n.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",n[n.START_TAG=3]="START_TAG",n[n.END_TAG=4]="END_TAG",n[n.COMMENT=5]="COMMENT",n[n.DOCTYPE=6]="DOCTYPE",n[n.EOF=7]="EOF",n[n.HIBERNATION=8]="HIBERNATION"}(e.TokenType||(e.TokenType={}));function t(n,i){for(let r=n.attrs.length-1;r>=0;r--)if(n.attrs[r].name===i)return n.attrs[r].value;return null}e.getTokenAttr=t})(X0);var xo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasUnescapedText=e.isNumberedHeader=e.SPECIAL_ELEMENTS=e.getTagID=e.TAG_ID=e.TAG_NAMES=e.DOCUMENT_MODE=e.ATTRS=e.NS=void 0;var t;(function(l){l.HTML="http://www.w3.org/1999/xhtml",l.MATHML="http://www.w3.org/1998/Math/MathML",l.SVG="http://www.w3.org/2000/svg",l.XLINK="http://www.w3.org/1999/xlink",l.XML="http://www.w3.org/XML/1998/namespace",l.XMLNS="http://www.w3.org/2000/xmlns/"})(t=e.NS||(e.NS={})),function(l){l.TYPE="type",l.ACTION="action",l.ENCODING="encoding",l.PROMPT="prompt",l.NAME="name",l.COLOR="color",l.FACE="face",l.SIZE="size"}(e.ATTRS||(e.ATTRS={})),function(l){l.NO_QUIRKS="no-quirks",l.QUIRKS="quirks",l.LIMITED_QUIRKS="limited-quirks"}(e.DOCUMENT_MODE||(e.DOCUMENT_MODE={}));var n;(function(l){l.A="a",l.ADDRESS="address",l.ANNOTATION_XML="annotation-xml",l.APPLET="applet",l.AREA="area",l.ARTICLE="article",l.ASIDE="aside",l.B="b",l.BASE="base",l.BASEFONT="basefont",l.BGSOUND="bgsound",l.BIG="big",l.BLOCKQUOTE="blockquote",l.BODY="body",l.BR="br",l.BUTTON="button",l.CAPTION="caption",l.CENTER="center",l.CODE="code",l.COL="col",l.COLGROUP="colgroup",l.DD="dd",l.DESC="desc",l.DETAILS="details",l.DIALOG="dialog",l.DIR="dir",l.DIV="div",l.DL="dl",l.DT="dt",l.EM="em",l.EMBED="embed",l.FIELDSET="fieldset",l.FIGCAPTION="figcaption",l.FIGURE="figure",l.FONT="font",l.FOOTER="footer",l.FOREIGN_OBJECT="foreignObject",l.FORM="form",l.FRAME="frame",l.FRAMESET="frameset",l.H1="h1",l.H2="h2",l.H3="h3",l.H4="h4",l.H5="h5",l.H6="h6",l.HEAD="head",l.HEADER="header",l.HGROUP="hgroup",l.HR="hr",l.HTML="html",l.I="i",l.IMG="img",l.IMAGE="image",l.INPUT="input",l.IFRAME="iframe",l.KEYGEN="keygen",l.LABEL="label",l.LI="li",l.LINK="link",l.LISTING="listing",l.MAIN="main",l.MALIGNMARK="malignmark",l.MARQUEE="marquee",l.MATH="math",l.MENU="menu",l.META="meta",l.MGLYPH="mglyph",l.MI="mi",l.MO="mo",l.MN="mn",l.MS="ms",l.MTEXT="mtext",l.NAV="nav",l.NOBR="nobr",l.NOFRAMES="noframes",l.NOEMBED="noembed",l.NOSCRIPT="noscript",l.OBJECT="object",l.OL="ol",l.OPTGROUP="optgroup",l.OPTION="option",l.P="p",l.PARAM="param",l.PLAINTEXT="plaintext",l.PRE="pre",l.RB="rb",l.RP="rp",l.RT="rt",l.RTC="rtc",l.RUBY="ruby",l.S="s",l.SCRIPT="script",l.SECTION="section",l.SELECT="select",l.SOURCE="source",l.SMALL="small",l.SPAN="span",l.STRIKE="strike",l.STRONG="strong",l.STYLE="style",l.SUB="sub",l.SUMMARY="summary",l.SUP="sup",l.TABLE="table",l.TBODY="tbody",l.TEMPLATE="template",l.TEXTAREA="textarea",l.TFOOT="tfoot",l.TD="td",l.TH="th",l.THEAD="thead",l.TITLE="title",l.TR="tr",l.TRACK="track",l.TT="tt",l.U="u",l.UL="ul",l.SVG="svg",l.VAR="var",l.WBR="wbr",l.XMP="xmp"})(n=e.TAG_NAMES||(e.TAG_NAMES={}));var i;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.A=1]="A",l[l.ADDRESS=2]="ADDRESS",l[l.ANNOTATION_XML=3]="ANNOTATION_XML",l[l.APPLET=4]="APPLET",l[l.AREA=5]="AREA",l[l.ARTICLE=6]="ARTICLE",l[l.ASIDE=7]="ASIDE",l[l.B=8]="B",l[l.BASE=9]="BASE",l[l.BASEFONT=10]="BASEFONT",l[l.BGSOUND=11]="BGSOUND",l[l.BIG=12]="BIG",l[l.BLOCKQUOTE=13]="BLOCKQUOTE",l[l.BODY=14]="BODY",l[l.BR=15]="BR",l[l.BUTTON=16]="BUTTON",l[l.CAPTION=17]="CAPTION",l[l.CENTER=18]="CENTER",l[l.CODE=19]="CODE",l[l.COL=20]="COL",l[l.COLGROUP=21]="COLGROUP",l[l.DD=22]="DD",l[l.DESC=23]="DESC",l[l.DETAILS=24]="DETAILS",l[l.DIALOG=25]="DIALOG",l[l.DIR=26]="DIR",l[l.DIV=27]="DIV",l[l.DL=28]="DL",l[l.DT=29]="DT",l[l.EM=30]="EM",l[l.EMBED=31]="EMBED",l[l.FIELDSET=32]="FIELDSET",l[l.FIGCAPTION=33]="FIGCAPTION",l[l.FIGURE=34]="FIGURE",l[l.FONT=35]="FONT",l[l.FOOTER=36]="FOOTER",l[l.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",l[l.FORM=38]="FORM",l[l.FRAME=39]="FRAME",l[l.FRAMESET=40]="FRAMESET",l[l.H1=41]="H1",l[l.H2=42]="H2",l[l.H3=43]="H3",l[l.H4=44]="H4",l[l.H5=45]="H5",l[l.H6=46]="H6",l[l.HEAD=47]="HEAD",l[l.HEADER=48]="HEADER",l[l.HGROUP=49]="HGROUP",l[l.HR=50]="HR",l[l.HTML=51]="HTML",l[l.I=52]="I",l[l.IMG=53]="IMG",l[l.IMAGE=54]="IMAGE",l[l.INPUT=55]="INPUT",l[l.IFRAME=56]="IFRAME",l[l.KEYGEN=57]="KEYGEN",l[l.LABEL=58]="LABEL",l[l.LI=59]="LI",l[l.LINK=60]="LINK",l[l.LISTING=61]="LISTING",l[l.MAIN=62]="MAIN",l[l.MALIGNMARK=63]="MALIGNMARK",l[l.MARQUEE=64]="MARQUEE",l[l.MATH=65]="MATH",l[l.MENU=66]="MENU",l[l.META=67]="META",l[l.MGLYPH=68]="MGLYPH",l[l.MI=69]="MI",l[l.MO=70]="MO",l[l.MN=71]="MN",l[l.MS=72]="MS",l[l.MTEXT=73]="MTEXT",l[l.NAV=74]="NAV",l[l.NOBR=75]="NOBR",l[l.NOFRAMES=76]="NOFRAMES",l[l.NOEMBED=77]="NOEMBED",l[l.NOSCRIPT=78]="NOSCRIPT",l[l.OBJECT=79]="OBJECT",l[l.OL=80]="OL",l[l.OPTGROUP=81]="OPTGROUP",l[l.OPTION=82]="OPTION",l[l.P=83]="P",l[l.PARAM=84]="PARAM",l[l.PLAINTEXT=85]="PLAINTEXT",l[l.PRE=86]="PRE",l[l.RB=87]="RB",l[l.RP=88]="RP",l[l.RT=89]="RT",l[l.RTC=90]="RTC",l[l.RUBY=91]="RUBY",l[l.S=92]="S",l[l.SCRIPT=93]="SCRIPT",l[l.SECTION=94]="SECTION",l[l.SELECT=95]="SELECT",l[l.SOURCE=96]="SOURCE",l[l.SMALL=97]="SMALL",l[l.SPAN=98]="SPAN",l[l.STRIKE=99]="STRIKE",l[l.STRONG=100]="STRONG",l[l.STYLE=101]="STYLE",l[l.SUB=102]="SUB",l[l.SUMMARY=103]="SUMMARY",l[l.SUP=104]="SUP",l[l.TABLE=105]="TABLE",l[l.TBODY=106]="TBODY",l[l.TEMPLATE=107]="TEMPLATE",l[l.TEXTAREA=108]="TEXTAREA",l[l.TFOOT=109]="TFOOT",l[l.TD=110]="TD",l[l.TH=111]="TH",l[l.THEAD=112]="THEAD",l[l.TITLE=113]="TITLE",l[l.TR=114]="TR",l[l.TRACK=115]="TRACK",l[l.TT=116]="TT",l[l.U=117]="U",l[l.UL=118]="UL",l[l.SVG=119]="SVG",l[l.VAR=120]="VAR",l[l.WBR=121]="WBR",l[l.XMP=122]="XMP"})(i=e.TAG_ID||(e.TAG_ID={}));const r=new Map([[n.A,i.A],[n.ADDRESS,i.ADDRESS],[n.ANNOTATION_XML,i.ANNOTATION_XML],[n.APPLET,i.APPLET],[n.AREA,i.AREA],[n.ARTICLE,i.ARTICLE],[n.ASIDE,i.ASIDE],[n.B,i.B],[n.BASE,i.BASE],[n.BASEFONT,i.BASEFONT],[n.BGSOUND,i.BGSOUND],[n.BIG,i.BIG],[n.BLOCKQUOTE,i.BLOCKQUOTE],[n.BODY,i.BODY],[n.BR,i.BR],[n.BUTTON,i.BUTTON],[n.CAPTION,i.CAPTION],[n.CENTER,i.CENTER],[n.CODE,i.CODE],[n.COL,i.COL],[n.COLGROUP,i.COLGROUP],[n.DD,i.DD],[n.DESC,i.DESC],[n.DETAILS,i.DETAILS],[n.DIALOG,i.DIALOG],[n.DIR,i.DIR],[n.DIV,i.DIV],[n.DL,i.DL],[n.DT,i.DT],[n.EM,i.EM],[n.EMBED,i.EMBED],[n.FIELDSET,i.FIELDSET],[n.FIGCAPTION,i.FIGCAPTION],[n.FIGURE,i.FIGURE],[n.FONT,i.FONT],[n.FOOTER,i.FOOTER],[n.FOREIGN_OBJECT,i.FOREIGN_OBJECT],[n.FORM,i.FORM],[n.FRAME,i.FRAME],[n.FRAMESET,i.FRAMESET],[n.H1,i.H1],[n.H2,i.H2],[n.H3,i.H3],[n.H4,i.H4],[n.H5,i.H5],[n.H6,i.H6],[n.HEAD,i.HEAD],[n.HEADER,i.HEADER],[n.HGROUP,i.HGROUP],[n.HR,i.HR],[n.HTML,i.HTML],[n.I,i.I],[n.IMG,i.IMG],[n.IMAGE,i.IMAGE],[n.INPUT,i.INPUT],[n.IFRAME,i.IFRAME],[n.KEYGEN,i.KEYGEN],[n.LABEL,i.LABEL],[n.LI,i.LI],[n.LINK,i.LINK],[n.LISTING,i.LISTING],[n.MAIN,i.MAIN],[n.MALIGNMARK,i.MALIGNMARK],[n.MARQUEE,i.MARQUEE],[n.MATH,i.MATH],[n.MENU,i.MENU],[n.META,i.META],[n.MGLYPH,i.MGLYPH],[n.MI,i.MI],[n.MO,i.MO],[n.MN,i.MN],[n.MS,i.MS],[n.MTEXT,i.MTEXT],[n.NAV,i.NAV],[n.NOBR,i.NOBR],[n.NOFRAMES,i.NOFRAMES],[n.NOEMBED,i.NOEMBED],[n.NOSCRIPT,i.NOSCRIPT],[n.OBJECT,i.OBJECT],[n.OL,i.OL],[n.OPTGROUP,i.OPTGROUP],[n.OPTION,i.OPTION],[n.P,i.P],[n.PARAM,i.PARAM],[n.PLAINTEXT,i.PLAINTEXT],[n.PRE,i.PRE],[n.RB,i.RB],[n.RP,i.RP],[n.RT,i.RT],[n.RTC,i.RTC],[n.RUBY,i.RUBY],[n.S,i.S],[n.SCRIPT,i.SCRIPT],[n.SECTION,i.SECTION],[n.SELECT,i.SELECT],[n.SOURCE,i.SOURCE],[n.SMALL,i.SMALL],[n.SPAN,i.SPAN],[n.STRIKE,i.STRIKE],[n.STRONG,i.STRONG],[n.STYLE,i.STYLE],[n.SUB,i.SUB],[n.SUMMARY,i.SUMMARY],[n.SUP,i.SUP],[n.TABLE,i.TABLE],[n.TBODY,i.TBODY],[n.TEMPLATE,i.TEMPLATE],[n.TEXTAREA,i.TEXTAREA],[n.TFOOT,i.TFOOT],[n.TD,i.TD],[n.TH,i.TH],[n.THEAD,i.THEAD],[n.TITLE,i.TITLE],[n.TR,i.TR],[n.TRACK,i.TRACK],[n.TT,i.TT],[n.U,i.U],[n.UL,i.UL],[n.SVG,i.SVG],[n.VAR,i.VAR],[n.WBR,i.WBR],[n.XMP,i.XMP]]);function a(l){var f;return(f=r.get(l))!==null&&f!==void 0?f:i.UNKNOWN}e.getTagID=a;const o=i;e.SPECIAL_ELEMENTS={[t.HTML]:new Set([o.ADDRESS,o.APPLET,o.AREA,o.ARTICLE,o.ASIDE,o.BASE,o.BASEFONT,o.BGSOUND,o.BLOCKQUOTE,o.BODY,o.BR,o.BUTTON,o.CAPTION,o.CENTER,o.COL,o.COLGROUP,o.DD,o.DETAILS,o.DIR,o.DIV,o.DL,o.DT,o.EMBED,o.FIELDSET,o.FIGCAPTION,o.FIGURE,o.FOOTER,o.FORM,o.FRAME,o.FRAMESET,o.H1,o.H2,o.H3,o.H4,o.H5,o.H6,o.HEAD,o.HEADER,o.HGROUP,o.HR,o.HTML,o.IFRAME,o.IMG,o.INPUT,o.LI,o.LINK,o.LISTING,o.MAIN,o.MARQUEE,o.MENU,o.META,o.NAV,o.NOEMBED,o.NOFRAMES,o.NOSCRIPT,o.OBJECT,o.OL,o.P,o.PARAM,o.PLAINTEXT,o.PRE,o.SCRIPT,o.SECTION,o.SELECT,o.SOURCE,o.STYLE,o.SUMMARY,o.TABLE,o.TBODY,o.TD,o.TEMPLATE,o.TEXTAREA,o.TFOOT,o.TH,o.THEAD,o.TITLE,o.TR,o.TRACK,o.UL,o.WBR,o.XMP]),[t.MATHML]:new Set([o.MI,o.MO,o.MN,o.MS,o.MTEXT,o.ANNOTATION_XML]),[t.SVG]:new Set([o.TITLE,o.FOREIGN_OBJECT,o.DESC]),[t.XLINK]:new Set,[t.XML]:new Set,[t.XMLNS]:new Set};function s(l){return l===o.H1||l===o.H2||l===o.H3||l===o.H4||l===o.H5||l===o.H6}e.isNumberedHeader=s;const u=new Set([n.STYLE,n.SCRIPT,n.XMP,n.IFRAME,n.NOEMBED,n.NOFRAMES,n.PLAINTEXT]);function c(l,f){return u.has(l)||f&&l===n.NOSCRIPT}e.hasUnescapedText=c})(xo),Object.defineProperty(Il,"__esModule",{value:!0}),Il.Tokenizer=Il.TokenizerMode=void 0;const zle=W0,Y=q0,di=X0,Ya=yl,Ne=bd,XS=xo,jle=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={})),Il.TokenizerMode={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function _d(e){return e>=Y.CODE_POINTS.DIGIT_0&&e<=Y.CODE_POINTS.DIGIT_9}function Sd(e){return e>=Y.CODE_POINTS.LATIN_CAPITAL_A&&e<=Y.CODE_POINTS.LATIN_CAPITAL_Z}function Vle(e){return e>=Y.CODE_POINTS.LATIN_SMALL_A&&e<=Y.CODE_POINTS.LATIN_SMALL_Z}function cs(e){return Vle(e)||Sd(e)}function KS(e){return cs(e)||_d(e)}function UB(e){return e>=Y.CODE_POINTS.LATIN_CAPITAL_A&&e<=Y.CODE_POINTS.LATIN_CAPITAL_F}function GB(e){return e>=Y.CODE_POINTS.LATIN_SMALL_A&&e<=Y.CODE_POINTS.LATIN_SMALL_F}function Yle(e){return _d(e)||UB(e)||GB(e)}function K0(e){return e+32}function zB(e){return e===Y.CODE_POINTS.SPACE||e===Y.CODE_POINTS.LINE_FEED||e===Y.CODE_POINTS.TABULATION||e===Y.CODE_POINTS.FORM_FEED}function Wle(e){return e===Y.CODE_POINTS.EQUALS_SIGN||KS(e)}function jB(e){return zB(e)||e===Y.CODE_POINTS.SOLIDUS||e===Y.CODE_POINTS.GREATER_THAN_SIGN}let qle=function(){function e(t,n){_classCallCheck3(this,e),this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new zle.Preprocessor(n),this.currentLocation=this.getCurrentLocation(-1)}return _createClass3(e,[{key:"_err",value:function(n){var i,r;(r=(i=this.handler).onParseError)===null||r===void 0||r.call(i,this.preprocessor.getError(n))}},{key:"getCurrentLocation",value:function(n){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-n,startOffset:this.preprocessor.offset-n,endLine:-1,endCol:-1,endOffset:-1}:null}},{key:"_runParsingLoop",value:function(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const n=this._consume();this._ensureHibernation()||this._callState(n)}this.inLoop=!1}}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(n){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||n?.())}},{key:"write",value:function(n,i,r){this.active=!0,this.preprocessor.write(n,i),this._runParsingLoop(),this.paused||r?.()}},{key:"insertHtmlAtCurrentPos",value:function(n){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(n),this._runParsingLoop()}},{key:"_ensureHibernation",value:function(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}},{key:"_consume",value:function(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}},{key:"_unconsume",value:function(n){this.consumedAfterSnapshot-=n,this.preprocessor.retreat(n)}},{key:"_reconsumeInState",value:function(n,i){this.state=n,this._callState(i)}},{key:"_advanceBy",value:function(n){this.consumedAfterSnapshot+=n;for(let i=0;i<n;i++)this.preprocessor.advance()}},{key:"_consumeSequenceIfMatch",value:function(n,i){return this.preprocessor.startsWith(n,i)?(this._advanceBy(n.length-1),!0):!1}},{key:"_createStartTagToken",value:function(){this.currentToken={type:di.TokenType.START_TAG,tagName:"",tagID:XS.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}},{key:"_createEndTagToken",value:function(){this.currentToken={type:di.TokenType.END_TAG,tagName:"",tagID:XS.TAG_ID.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}},{key:"_createCommentToken",value:function(n){this.currentToken={type:di.TokenType.COMMENT,data:"",location:this.getCurrentLocation(n)}}},{key:"_createDoctypeToken",value:function(n){this.currentToken={type:di.TokenType.DOCTYPE,name:n,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}},{key:"_createCharacterToken",value:function(n,i){this.currentCharacterToken={type:n,chars:i,location:this.currentLocation}}},{key:"_createAttr",value:function(n){this.currentAttr={name:n,value:""},this.currentLocation=this.getCurrentLocation(0)}},{key:"_leaveAttrName",value:function(){var n,i;const r=this.currentToken;if((0,di.getTokenAttr)(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const a=(n=(i=r.location).attrs)!==null&&n!==void 0?n:i.attrs=Object.create(null);a[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.ERR.duplicateAttribute)}},{key:"_leaveAttrValue",value:function(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}},{key:"prepareToken",value:function(n){this._emitCurrentCharacterToken(n.location),this.currentToken=null,n.location&&(n.location.endLine=this.preprocessor.line,n.location.endCol=this.preprocessor.col+1,n.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}},{key:"emitCurrentTagToken",value:function(){const n=this.currentToken;this.prepareToken(n),n.tagID=(0,XS.getTagID)(n.tagName),n.type===di.TokenType.START_TAG?(this.lastStartTagName=n.tagName,this.handler.onStartTag(n)):(n.attrs.length>0&&this._err(Ne.ERR.endTagWithAttributes),n.selfClosing&&this._err(Ne.ERR.endTagWithTrailingSolidus),this.handler.onEndTag(n)),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentComment",value:function(n){this.prepareToken(n),this.handler.onComment(n),this.preprocessor.dropParsedChunk()}},{key:"emitCurrentDoctype",value:function(n){this.prepareToken(n),this.handler.onDoctype(n),this.preprocessor.dropParsedChunk()}},{key:"_emitCurrentCharacterToken",value:function(n){if(this.currentCharacterToken){switch(n&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=n.startLine,this.currentCharacterToken.location.endCol=n.startCol,this.currentCharacterToken.location.endOffset=n.startOffset),this.currentCharacterToken.type){case di.TokenType.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case di.TokenType.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case di.TokenType.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}},{key:"_emitEOFToken",value:function(){const n=this.getCurrentLocation(0);n&&(n.endLine=n.startLine,n.endCol=n.startCol,n.endOffset=n.startOffset),this._emitCurrentCharacterToken(n),this.handler.onEof({type:di.TokenType.EOF,location:n}),this.active=!1}},{key:"_appendCharToCurrentCharacterToken",value:function(n,i){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==n)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=i;return}this._createCharacterToken(n,i)}},{key:"_emitCodePoint",value:function(n){const i=zB(n)?di.TokenType.WHITESPACE_CHARACTER:n===Y.CODE_POINTS.NULL?di.TokenType.NULL_CHARACTER:di.TokenType.CHARACTER;this._appendCharToCurrentCharacterToken(i,String.fromCodePoint(n))}},{key:"_emitChars",value:function(n){this._appendCharToCurrentCharacterToken(di.TokenType.CHARACTER,n)}},{key:"_matchNamedCharacterReference",value:function(n){let i=null,r=0,a=!1;for(let o=0,s=Ya.htmlDecodeTree[0];o>=0&&(o=(0,Ya.determineBranch)(Ya.htmlDecodeTree,s,o+1,n),!(o<0));n=this._consume()){r+=1,s=Ya.htmlDecodeTree[o];const u=s&Ya.BinTrieFlags.VALUE_LENGTH;if(u){const c=(u>>14)-1;if(n!==Y.CODE_POINTS.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Wle(this.preprocessor.peek(1))?(i=[Y.CODE_POINTS.AMPERSAND],o+=c):(i=c===0?[Ya.htmlDecodeTree[o]&~Ya.BinTrieFlags.VALUE_LENGTH]:c===1?[Ya.htmlDecodeTree[++o]]:[Ya.htmlDecodeTree[++o],Ya.htmlDecodeTree[++o]],r=0,a=n!==Y.CODE_POINTS.SEMICOLON),c===0){this._consume();break}}}return this._unconsume(r),a&&!this.preprocessor.endOfChunkHit&&this._err(Ne.ERR.missingSemicolonAfterCharacterReference),this._unconsume(1),i}},{key:"_isCharacterReferenceInAttribute",value:function(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}},{key:"_flushCodePointConsumedAsCharacterReference",value:function(n){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(n):this._emitCodePoint(n)}},{key:"_callState",value:function(n){switch(this.state){case J.DATA:{this._stateData(n);break}case J.RCDATA:{this._stateRcdata(n);break}case J.RAWTEXT:{this._stateRawtext(n);break}case J.SCRIPT_DATA:{this._stateScriptData(n);break}case J.PLAINTEXT:{this._statePlaintext(n);break}case J.TAG_OPEN:{this._stateTagOpen(n);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(n);break}case J.TAG_NAME:{this._stateTagName(n);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(n);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(n);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(n);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(n);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(n);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(n);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(n);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(n);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(n);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(n);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(n);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(n);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(n);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(n);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(n);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(n);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(n);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(n);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(n);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(n);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(n);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(n);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(n);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(n);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(n);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(n);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(n);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(n);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(n);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(n);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(n);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(n);break}case J.BOGUS_COMMENT:{this._stateBogusComment(n);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(n);break}case J.COMMENT_START:{this._stateCommentStart(n);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(n);break}case J.COMMENT:{this._stateComment(n);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(n);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(n);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(n);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(n);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(n);break}case J.COMMENT_END:{this._stateCommentEnd(n);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(n);break}case J.DOCTYPE:{this._stateDoctype(n);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(n);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(n);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(n);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(n);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(n);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(n);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(n);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(n);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(n);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(n);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(n);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(n);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(n);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(n);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(n);break}case J.CDATA_SECTION:{this._stateCdataSection(n);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(n);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(n);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(n);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(n);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(n);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(n);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(n);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(n);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(n);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(n);break}default:throw new Error("Unknown state")}}},{key:"_stateData",value:function(n){switch(n){case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case Y.CODE_POINTS.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitCodePoint(n);break}case Y.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateRcdata",value:function(n){switch(n){case Y.CODE_POINTS.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateRawtext",value:function(n){switch(n){case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateScriptData",value:function(n){switch(n){case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_statePlaintext",value:function(n){switch(n){case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateTagOpen",value:function(n){if(cs(n))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(n);else switch(n){case Y.CODE_POINTS.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case Y.CODE_POINTS.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case Y.CODE_POINTS.QUESTION_MARK:{this._err(Ne.ERR.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(n);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.ERR.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(n)}}},{key:"_stateEndTagOpen",value:function(n){if(cs(n))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(n);else switch(n){case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingEndTagName),this.state=J.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.ERR.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(n)}}},{key:"_stateTagName",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case Y.CODE_POINTS.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.tagName+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:i.tagName+=String.fromCodePoint(Sd(n)?K0(n):n)}}},{key:"_stateRcdataLessThanSign",value:function(n){n===Y.CODE_POINTS.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(n))}},{key:"_stateRcdataEndTagOpen",value:function(n){cs(n)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(n)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(n))}},{key:"handleSpecialEndTag",value:function(n){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const i=this.currentToken;switch(i.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case Y.CODE_POINTS.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case Y.CODE_POINTS.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}},{key:"_stateRcdataEndTagName",value:function(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(n))}},{key:"_stateRawtextLessThanSign",value:function(n){n===Y.CODE_POINTS.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(n))}},{key:"_stateRawtextEndTagOpen",value:function(n){cs(n)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(n)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(n))}},{key:"_stateRawtextEndTagName",value:function(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(n))}},{key:"_stateScriptDataLessThanSign",value:function(n){switch(n){case Y.CODE_POINTS.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case Y.CODE_POINTS.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(n)}}},{key:"_stateScriptDataEndTagOpen",value:function(n){cs(n)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(n)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(n))}},{key:"_stateScriptDataEndTagName",value:function(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(n))}},{key:"_stateScriptDataEscapeStart",value:function(n){n===Y.CODE_POINTS.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(n))}},{key:"_stateScriptDataEscapeStartDash",value:function(n){n===Y.CODE_POINTS.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(n))}},{key:"_stateScriptDataEscaped",value:function(n){switch(n){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateScriptDataEscapedDash",value:function(n){switch(n){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(n)}}},{key:"_stateScriptDataEscapedDashDash",value:function(n){switch(n){case Y.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(n)}}},{key:"_stateScriptDataEscapedLessThanSign",value:function(n){n===Y.CODE_POINTS.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:cs(n)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(n)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}},{key:"_stateScriptDataEscapedEndTagOpen",value:function(n){cs(n)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(n)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}},{key:"_stateScriptDataEscapedEndTagName",value:function(n){this.handleSpecialEndTag(n)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}},{key:"_stateScriptDataDoubleEscapeStart",value:function(n){if(this.preprocessor.startsWith(Y.SEQUENCES.SCRIPT,!1)&&jB(this.preprocessor.peek(Y.SEQUENCES.SCRIPT.length))){this._emitCodePoint(n);for(let i=0;i<Y.SEQUENCES.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(n))}},{key:"_stateScriptDataDoubleEscaped",value:function(n){switch(n){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateScriptDataDoubleEscapedDash",value:function(n){switch(n){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(n)}}},{key:"_stateScriptDataDoubleEscapedDashDash",value:function(n){switch(n){case Y.CODE_POINTS.HYPHEN_MINUS:{this._emitChars("-");break}case Y.CODE_POINTS.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Y.REPLACEMENT_CHARACTER);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(n)}}},{key:"_stateScriptDataDoubleEscapedLessThanSign",value:function(n){n===Y.CODE_POINTS.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(n))}},{key:"_stateScriptDataDoubleEscapeEnd",value:function(n){if(this.preprocessor.startsWith(Y.SEQUENCES.SCRIPT,!1)&&jB(this.preprocessor.peek(Y.SEQUENCES.SCRIPT.length))){this._emitCodePoint(n);for(let i=0;i<Y.SEQUENCES.SCRIPT.length;i++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(n))}},{key:"_stateBeforeAttributeName",value:function(n){switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.SOLIDUS:case Y.CODE_POINTS.GREATER_THAN_SIGN:case Y.CODE_POINTS.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(n);break}case Y.CODE_POINTS.EQUALS_SIGN:{this._err(Ne.ERR.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(n)}}},{key:"_stateAttributeName",value:function(n){switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:case Y.CODE_POINTS.SOLIDUS:case Y.CODE_POINTS.GREATER_THAN_SIGN:case Y.CODE_POINTS.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(n);break}case Y.CODE_POINTS.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case Y.CODE_POINTS.QUOTATION_MARK:case Y.CODE_POINTS.APOSTROPHE:case Y.CODE_POINTS.LESS_THAN_SIGN:{this._err(Ne.ERR.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(n);break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.currentAttr.name+=Y.REPLACEMENT_CHARACTER;break}default:this.currentAttr.name+=String.fromCodePoint(Sd(n)?K0(n):n)}}},{key:"_stateAfterAttributeName",value:function(n){switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case Y.CODE_POINTS.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(n)}}},{key:"_stateBeforeAttributeValue",value:function(n){switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(n)}}},{key:"_stateAttributeValueDoubleQuoted",value:function(n){switch(n){case Y.CODE_POINTS.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.CODE_POINTS.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.currentAttr.value+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(n)}}},{key:"_stateAttributeValueSingleQuoted",value:function(n){switch(n){case Y.CODE_POINTS.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Y.CODE_POINTS.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.currentAttr.value+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(n)}}},{key:"_stateAttributeValueUnquoted",value:function(n){switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case Y.CODE_POINTS.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this.currentAttr.value+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.QUOTATION_MARK:case Y.CODE_POINTS.APOSTROPHE:case Y.CODE_POINTS.LESS_THAN_SIGN:case Y.CODE_POINTS.EQUALS_SIGN:case Y.CODE_POINTS.GRAVE_ACCENT:{this._err(Ne.ERR.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(n);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(n)}}},{key:"_stateAfterAttributeValueQuoted",value:function(n){switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case Y.CODE_POINTS.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Ne.ERR.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(n)}}},{key:"_stateSelfClosingStartTag",value:function(n){switch(n){case Y.CODE_POINTS.GREATER_THAN_SIGN:{const i=this.currentToken;i.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInTag),this._emitEOFToken();break}default:this._err(Ne.ERR.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(n)}}},{key:"_stateBogusComment",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(i);break}case Y.CODE_POINTS.EOF:{this.emitCurrentComment(i),this._emitEOFToken();break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.data+=Y.REPLACEMENT_CHARACTER;break}default:i.data+=String.fromCodePoint(n)}}},{key:"_stateMarkupDeclarationOpen",value:function(n){this._consumeSequenceIfMatch(Y.SEQUENCES.DASH_DASH,!0)?(this._createCommentToken(Y.SEQUENCES.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(Y.SEQUENCES.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Y.SEQUENCES.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(Y.SEQUENCES.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.ERR.cdataInHtmlContent),this._createCommentToken(Y.SEQUENCES.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.ERR.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(n))}},{key:"_stateCommentStart",value:function(n){switch(n){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptClosingOfEmptyComment),this.state=J.DATA;const i=this.currentToken;this.emitCurrentComment(i);break}default:this.state=J.COMMENT,this._stateComment(n)}}},{key:"_stateCommentStartDash",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(i);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=J.COMMENT,this._stateComment(n)}}},{key:"_stateComment",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case Y.CODE_POINTS.LESS_THAN_SIGN:{i.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.data+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+=String.fromCodePoint(n)}}},{key:"_stateCommentLessThanSign",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.EXCLAMATION_MARK:{i.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case Y.CODE_POINTS.LESS_THAN_SIGN:{i.data+="<";break}default:this.state=J.COMMENT,this._stateComment(n)}}},{key:"_stateCommentLessThanSignBang",value:function(n){n===Y.CODE_POINTS.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(n))}},{key:"_stateCommentLessThanSignBangDash",value:function(n){n===Y.CODE_POINTS.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(n))}},{key:"_stateCommentLessThanSignBangDashDash",value:function(n){n!==Y.CODE_POINTS.GREATER_THAN_SIGN&&n!==Y.CODE_POINTS.EOF&&this._err(Ne.ERR.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(n)}},{key:"_stateCommentEndDash",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="-",this.state=J.COMMENT,this._stateComment(n)}}},{key:"_stateCommentEnd",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(i);break}case Y.CODE_POINTS.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case Y.CODE_POINTS.HYPHEN_MINUS:{i.data+="-";break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--",this.state=J.COMMENT,this._stateComment(n)}}},{key:"_stateCommentEndBang",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.HYPHEN_MINUS:{i.data+="--!",this.state=J.COMMENT_END_DASH;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(i);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInComment),this.emitCurrentComment(i),this._emitEOFToken();break}default:i.data+="--!",this.state=J.COMMENT,this._stateComment(n)}}},{key:"_stateDoctype",value:function(n){switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(n);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(n)}}},{key:"_stateBeforeDoctypeName",value:function(n){if(Sd(n))this._createDoctypeToken(String.fromCharCode(K0(n))),this.state=J.DOCTYPE_NAME;else switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),this._createDoctypeToken(Y.REPLACEMENT_CHARACTER),this.state=J.DOCTYPE_NAME;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingDoctypeName),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=J.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),this._createDoctypeToken(null);const i=this.currentToken;i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(n)),this.state=J.DOCTYPE_NAME}}},{key:"_stateDoctypeName",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(i);break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.name+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.name+=String.fromCodePoint(Sd(n)?K0(n):n)}}},{key:"_stateAfterDoctypeName",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(i);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Y.SEQUENCES.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Y.SEQUENCES.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.ERR.invalidCharacterSequenceAfterDoctypeName),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(n))}}},{key:"_stateAfterDoctypePublicKeyword",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.CODE_POINTS.QUOTATION_MARK:{this._err(Ne.ERR.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{this._err(Ne.ERR.missingWhitespaceAfterDoctypePublicKeyword),i.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(i);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateBeforeDoctypePublicIdentifier",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.QUOTATION_MARK:{i.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{i.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingDoctypePublicIdentifier),i.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(i);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypePublicIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateDoctypePublicIdentifierDoubleQuoted",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.publicId+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=J.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(n)}}},{key:"_stateDoctypePublicIdentifierSingleQuoted",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.publicId+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptDoctypePublicIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=J.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.publicId+=String.fromCodePoint(n)}}},{key:"_stateAfterDoctypePublicIdentifier",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(i);break}case Y.CODE_POINTS.QUOTATION_MARK:{this._err(Ne.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{this._err(Ne.ERR.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateBetweenDoctypePublicAndSystemIdentifiers",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=J.DATA;break}case Y.CODE_POINTS.QUOTATION_MARK:{i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateAfterDoctypeSystemKeyword",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.CODE_POINTS.QUOTATION_MARK:{this._err(Ne.ERR.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{this._err(Ne.ERR.missingWhitespaceAfterDoctypeSystemKeyword),i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(i);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateBeforeDoctypeSystemIdentifier",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.QUOTATION_MARK:{i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Y.CODE_POINTS.APOSTROPHE:{i.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.missingDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(i);break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.missingQuoteBeforeDoctypeSystemIdentifier),i.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateDoctypeSystemIdentifierDoubleQuoted",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.systemId+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=J.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(n)}}},{key:"_stateDoctypeSystemIdentifierSingleQuoted",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter),i.systemId+=Y.REPLACEMENT_CHARACTER;break}case Y.CODE_POINTS.GREATER_THAN_SIGN:{this._err(Ne.ERR.abruptDoctypeSystemIdentifier),i.forceQuirks=!0,this.emitCurrentDoctype(i),this.state=J.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:i.systemId+=String.fromCodePoint(n)}}},{key:"_stateAfterDoctypeSystemIdentifier",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.SPACE:case Y.CODE_POINTS.LINE_FEED:case Y.CODE_POINTS.TABULATION:case Y.CODE_POINTS.FORM_FEED:break;case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=J.DATA;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInDoctype),i.forceQuirks=!0,this.emitCurrentDoctype(i),this._emitEOFToken();break}default:this._err(Ne.ERR.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(n)}}},{key:"_stateBogusDoctype",value:function(n){const i=this.currentToken;switch(n){case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.emitCurrentDoctype(i),this.state=J.DATA;break}case Y.CODE_POINTS.NULL:{this._err(Ne.ERR.unexpectedNullCharacter);break}case Y.CODE_POINTS.EOF:{this.emitCurrentDoctype(i),this._emitEOFToken();break}}}},{key:"_stateCdataSection",value:function(n){switch(n){case Y.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case Y.CODE_POINTS.EOF:{this._err(Ne.ERR.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(n)}}},{key:"_stateCdataSectionBracket",value:function(n){n===Y.CODE_POINTS.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(n))}},{key:"_stateCdataSectionEnd",value:function(n){switch(n){case Y.CODE_POINTS.GREATER_THAN_SIGN:{this.state=J.DATA;break}case Y.CODE_POINTS.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(n)}}},{key:"_stateCharacterReference",value:function(n){n===Y.CODE_POINTS.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:KS(n)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(n)):(this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.AMPERSAND),this._reconsumeInState(this.returnState,n))}},{key:"_stateNamedCharacterReference",value:function(n){const i=this._matchNamedCharacterReference(n);if(!this._ensureHibernation())if(i){for(let r=0;r<i.length;r++)this._flushCodePointConsumedAsCharacterReference(i[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}},{key:"_stateAmbiguousAmpersand",value:function(n){KS(n)?this._flushCodePointConsumedAsCharacterReference(n):(n===Y.CODE_POINTS.SEMICOLON&&this._err(Ne.ERR.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,n))}},{key:"_stateNumericCharacterReference",value:function(n){this.charRefCode=0,n===Y.CODE_POINTS.LATIN_SMALL_X||n===Y.CODE_POINTS.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:_d(n)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(n)):(this._err(Ne.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.NUMBER_SIGN),this._reconsumeInState(this.returnState,n))}},{key:"_stateHexademicalCharacterReferenceStart",value:function(n){Yle(n)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(n)):(this._err(Ne.ERR.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(Y.CODE_POINTS.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}},{key:"_stateHexademicalCharacterReference",value:function(n){UB(n)?this.charRefCode=this.charRefCode*16+n-55:GB(n)?this.charRefCode=this.charRefCode*16+n-87:_d(n)?this.charRefCode=this.charRefCode*16+n-48:n===Y.CODE_POINTS.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.ERR.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(n))}},{key:"_stateDecimalCharacterReference",value:function(n){_d(n)?this.charRefCode=this.charRefCode*10+n-48:n===Y.CODE_POINTS.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.ERR.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(n))}},{key:"_stateNumericCharacterReferenceEnd",value:function(n){if(this.charRefCode===Y.CODE_POINTS.NULL)this._err(Ne.ERR.nullCharacterReference),this.charRefCode=Y.CODE_POINTS.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.ERR.characterReferenceOutsideUnicodeRange),this.charRefCode=Y.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,Y.isSurrogate)(this.charRefCode))this._err(Ne.ERR.surrogateCharacterReference),this.charRefCode=Y.CODE_POINTS.REPLACEMENT_CHARACTER;else if((0,Y.isUndefinedCodePoint)(this.charRefCode))this._err(Ne.ERR.noncharacterCharacterReference);else if((0,Y.isControlCodePoint)(this.charRefCode)||this.charRefCode===Y.CODE_POINTS.CARRIAGE_RETURN){this._err(Ne.ERR.controlCharacterReference);const i=jle.get(this.charRefCode);i!==void 0&&(this.charRefCode=i)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,n)}}]),e}();Il.Tokenizer=qle;var Z0={};Object.defineProperty(Z0,"__esModule",{value:!0}),Z0.OpenElementStack=void 0;const Le=xo,VB=new Set([Le.TAG_ID.DD,Le.TAG_ID.DT,Le.TAG_ID.LI,Le.TAG_ID.OPTGROUP,Le.TAG_ID.OPTION,Le.TAG_ID.P,Le.TAG_ID.RB,Le.TAG_ID.RP,Le.TAG_ID.RT,Le.TAG_ID.RTC]),YB=new Set([...VB,Le.TAG_ID.CAPTION,Le.TAG_ID.COLGROUP,Le.TAG_ID.TBODY,Le.TAG_ID.TD,Le.TAG_ID.TFOOT,Le.TAG_ID.TH,Le.TAG_ID.THEAD,Le.TAG_ID.TR]),Q0=new Map([[Le.TAG_ID.APPLET,Le.NS.HTML],[Le.TAG_ID.CAPTION,Le.NS.HTML],[Le.TAG_ID.HTML,Le.NS.HTML],[Le.TAG_ID.MARQUEE,Le.NS.HTML],[Le.TAG_ID.OBJECT,Le.NS.HTML],[Le.TAG_ID.TABLE,Le.NS.HTML],[Le.TAG_ID.TD,Le.NS.HTML],[Le.TAG_ID.TEMPLATE,Le.NS.HTML],[Le.TAG_ID.TH,Le.NS.HTML],[Le.TAG_ID.ANNOTATION_XML,Le.NS.MATHML],[Le.TAG_ID.MI,Le.NS.MATHML],[Le.TAG_ID.MN,Le.NS.MATHML],[Le.TAG_ID.MO,Le.NS.MATHML],[Le.TAG_ID.MS,Le.NS.MATHML],[Le.TAG_ID.MTEXT,Le.NS.MATHML],[Le.TAG_ID.DESC,Le.NS.SVG],[Le.TAG_ID.FOREIGN_OBJECT,Le.NS.SVG],[Le.TAG_ID.TITLE,Le.NS.SVG]]),Xle=[Le.TAG_ID.H1,Le.TAG_ID.H2,Le.TAG_ID.H3,Le.TAG_ID.H4,Le.TAG_ID.H5,Le.TAG_ID.H6],Kle=[Le.TAG_ID.TR,Le.TAG_ID.TEMPLATE,Le.TAG_ID.HTML],Zle=[Le.TAG_ID.TBODY,Le.TAG_ID.TFOOT,Le.TAG_ID.THEAD,Le.TAG_ID.TEMPLATE,Le.TAG_ID.HTML],Qle=[Le.TAG_ID.TABLE,Le.TAG_ID.TEMPLATE,Le.TAG_ID.HTML],Jle=[Le.TAG_ID.TD,Le.TAG_ID.TH];let eue=function(){function e(t,n,i){_classCallCheck3(this,e),this.treeAdapter=n,this.handler=i,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=Le.TAG_ID.UNKNOWN,this.current=t}return _createClass3(e,[{key:"currentTmplContentOrNode",get:function(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}},{key:"_indexOf",value:function(n){return this.items.lastIndexOf(n,this.stackTop)}},{key:"_isInTemplate",value:function(){return this.currentTagId===Le.TAG_ID.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Le.NS.HTML}},{key:"_updateCurrentElement",value:function(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}},{key:"push",value:function(n,i){this.stackTop++,this.items[this.stackTop]=n,this.current=n,this.tagIDs[this.stackTop]=i,this.currentTagId=i,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(n,i,!0)}},{key:"pop",value:function(){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,!0)}},{key:"replace",value:function(n,i){const r=this._indexOf(n);this.items[r]=i,r===this.stackTop&&(this.current=i)}},{key:"insertAfter",value:function(n,i,r){const a=this._indexOf(n)+1;this.items.splice(a,0,i),this.tagIDs.splice(a,0,r),this.stackTop++,a===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,a===this.stackTop)}},{key:"popUntilTagNamePopped",value:function(n){let i=this.stackTop+1;do i=this.tagIDs.lastIndexOf(n,i-1);while(i>0&&this.treeAdapter.getNamespaceURI(this.items[i])!==Le.NS.HTML);this.shortenToLength(i<0?0:i)}},{key:"shortenToLength",value:function(n){for(;this.stackTop>=n;){const i=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(i,this.stackTop<n)}}},{key:"popUntilElementPopped",value:function(n){const i=this._indexOf(n);this.shortenToLength(i<0?0:i)}},{key:"popUntilPopped",value:function(n,i){const r=this._indexOfTagNames(n,i);this.shortenToLength(r<0?0:r)}},{key:"popUntilNumberedHeaderPopped",value:function(){this.popUntilPopped(Xle,Le.NS.HTML)}},{key:"popUntilTableCellPopped",value:function(){this.popUntilPopped(Jle,Le.NS.HTML)}},{key:"popAllUpToHtmlElement",value:function(){this.tmplCount=0,this.shortenToLength(1)}},{key:"_indexOfTagNames",value:function(n,i){for(let r=this.stackTop;r>=0;r--)if(n.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===i)return r;return-1}},{key:"clearBackTo",value:function(n,i){const r=this._indexOfTagNames(n,i);this.shortenToLength(r+1)}},{key:"clearBackToTableContext",value:function(){this.clearBackTo(Qle,Le.NS.HTML)}},{key:"clearBackToTableBodyContext",value:function(){this.clearBackTo(Zle,Le.NS.HTML)}},{key:"clearBackToTableRowContext",value:function(){this.clearBackTo(Kle,Le.NS.HTML)}},{key:"remove",value:function(n){const i=this._indexOf(n);i>=0&&(i===this.stackTop?this.pop():(this.items.splice(i,1),this.tagIDs.splice(i,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,!1)))}},{key:"tryPeekProperlyNestedBodyElement",value:function(){return this.stackTop>=1&&this.tagIDs[1]===Le.TAG_ID.BODY?this.items[1]:null}},{key:"contains",value:function(n){return this._indexOf(n)>-1}},{key:"getCommonAncestor",value:function(n){const i=this._indexOf(n)-1;return i>=0?this.items[i]:null}},{key:"isRootHtmlElementCurrent",value:function(){return this.stackTop===0&&this.tagIDs[0]===Le.TAG_ID.HTML}},{key:"hasInScope",value:function(n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i],a=this.treeAdapter.getNamespaceURI(this.items[i]);if(r===n&&a===Le.NS.HTML)return!0;if(Q0.get(r)===a)return!1}return!0}},{key:"hasNumberedHeaderInScope",value:function(){for(let n=this.stackTop;n>=0;n--){const i=this.tagIDs[n],r=this.treeAdapter.getNamespaceURI(this.items[n]);if((0,Le.isNumberedHeader)(i)&&r===Le.NS.HTML)return!0;if(Q0.get(i)===r)return!1}return!0}},{key:"hasInListItemScope",value:function(n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i],a=this.treeAdapter.getNamespaceURI(this.items[i]);if(r===n&&a===Le.NS.HTML)return!0;if((r===Le.TAG_ID.UL||r===Le.TAG_ID.OL)&&a===Le.NS.HTML||Q0.get(r)===a)return!1}return!0}},{key:"hasInButtonScope",value:function(n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i],a=this.treeAdapter.getNamespaceURI(this.items[i]);if(r===n&&a===Le.NS.HTML)return!0;if(r===Le.TAG_ID.BUTTON&&a===Le.NS.HTML||Q0.get(r)===a)return!1}return!0}},{key:"hasInTableScope",value:function(n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i];if(this.treeAdapter.getNamespaceURI(this.items[i])===Le.NS.HTML){if(r===n)return!0;if(r===Le.TAG_ID.TABLE||r===Le.TAG_ID.TEMPLATE||r===Le.TAG_ID.HTML)return!1}}return!0}},{key:"hasTableBodyContextInTableScope",value:function(){for(let n=this.stackTop;n>=0;n--){const i=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.NS.HTML){if(i===Le.TAG_ID.TBODY||i===Le.TAG_ID.THEAD||i===Le.TAG_ID.TFOOT)return!0;if(i===Le.TAG_ID.TABLE||i===Le.TAG_ID.HTML)return!1}}return!0}},{key:"hasInSelectScope",value:function(n){for(let i=this.stackTop;i>=0;i--){const r=this.tagIDs[i];if(this.treeAdapter.getNamespaceURI(this.items[i])===Le.NS.HTML){if(r===n)return!0;if(r!==Le.TAG_ID.OPTION&&r!==Le.TAG_ID.OPTGROUP)return!1}}return!0}},{key:"generateImpliedEndTags",value:function(){for(;VB.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsThoroughly",value:function(){for(;YB.has(this.currentTagId);)this.pop()}},{key:"generateImpliedEndTagsWithExclusion",value:function(n){for(;this.currentTagId!==n&&YB.has(this.currentTagId);)this.pop()}}]),e}();Z0.OpenElementStack=eue;var WB={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FormattingElementList=e.EntryType=void 0;const t=3;var n;(function(a){a[a.Marker=0]="Marker",a[a.Element=1]="Element"})(n=e.EntryType||(e.EntryType={}));const i={type:n.Marker};let r=function(){function a(o){_classCallCheck3(this,a),this.treeAdapter=o,this.entries=[],this.bookmark=null}return _createClass3(a,[{key:"_getNoahArkConditionCandidates",value:function(s,u){const c=[],l=u.length,f=this.treeAdapter.getTagName(s),h=this.treeAdapter.getNamespaceURI(s);for(let d=0;d<this.entries.length;d++){const p=this.entries[d];if(p.type===n.Marker)break;const{element:m}=p;if(this.treeAdapter.getTagName(m)===f&&this.treeAdapter.getNamespaceURI(m)===h){const g=this.treeAdapter.getAttrList(m);g.length===l&&c.push({idx:d,attrs:g})}}return c}},{key:"_ensureNoahArkCondition",value:function(s){if(this.entries.length<t)return;const u=this.treeAdapter.getAttrList(s),c=this._getNoahArkConditionCandidates(s,u);if(c.length<t)return;const l=new Map(u.map(h=>[h.name,h.value]));let f=0;for(let h=0;h<c.length;h++){const d=c[h];d.attrs.every(p=>l.get(p.name)===p.value)&&(f+=1,f>=t&&this.entries.splice(d.idx,1))}}},{key:"insertMarker",value:function(){this.entries.unshift(i)}},{key:"pushElement",value:function(s,u){this._ensureNoahArkCondition(s),this.entries.unshift({type:n.Element,element:s,token:u})}},{key:"insertElementAfterBookmark",value:function(s,u){const c=this.entries.indexOf(this.bookmark);this.entries.splice(c,0,{type:n.Element,element:s,token:u})}},{key:"removeEntry",value:function(s){const u=this.entries.indexOf(s);u>=0&&this.entries.splice(u,1)}},{key:"clearToLastMarker",value:function(){const s=this.entries.indexOf(i);s>=0?this.entries.splice(0,s+1):this.entries.length=0}},{key:"getElementEntryInScopeWithTagName",value:function(s){const u=this.entries.find(c=>c.type===n.Marker||this.treeAdapter.getTagName(c.element)===s);return u&&u.type===n.Element?u:null}},{key:"getElementEntry",value:function(s){return this.entries.find(u=>u.type===n.Element&&u.element===s)}}]),a}();e.FormattingElementList=r})(WB);var J0={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTreeAdapter=void 0;const t=xo;function n(i){return{nodeName:"#text",value:i,parentNode:null}}e.defaultTreeAdapter={createDocument(){return{nodeName:"#document",mode:t.DOCUMENT_MODE.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(i,r,a){return{nodeName:i,tagName:i,attrs:a,namespaceURI:r,childNodes:[],parentNode:null}},createCommentNode(i){return{nodeName:"#comment",data:i,parentNode:null}},appendChild(i,r){i.childNodes.push(r),r.parentNode=i},insertBefore(i,r,a){const o=i.childNodes.indexOf(a);i.childNodes.splice(o,0,r),r.parentNode=i},setTemplateContent(i,r){i.content=r},getTemplateContent(i){return i.content},setDocumentType(i,r,a,o){const s=i.childNodes.find(u=>u.nodeName==="#documentType");if(s)s.name=r,s.publicId=a,s.systemId=o;else{const u={nodeName:"#documentType",name:r,publicId:a,systemId:o,parentNode:null};e.defaultTreeAdapter.appendChild(i,u)}},setDocumentMode(i,r){i.mode=r},getDocumentMode(i){return i.mode},detachNode(i){if(i.parentNode){const r=i.parentNode.childNodes.indexOf(i);i.parentNode.childNodes.splice(r,1),i.parentNode=null}},insertText(i,r){if(i.childNodes.length>0){const a=i.childNodes[i.childNodes.length-1];if(e.defaultTreeAdapter.isTextNode(a)){a.value+=r;return}}e.defaultTreeAdapter.appendChild(i,n(r))},insertTextBefore(i,r,a){const o=i.childNodes[i.childNodes.indexOf(a)-1];o&&e.defaultTreeAdapter.isTextNode(o)?o.value+=r:e.defaultTreeAdapter.insertBefore(i,n(r),a)},adoptAttributes(i,r){const a=new Set(i.attrs.map(o=>o.name));for(let o=0;o<r.length;o++)a.has(r[o].name)||i.attrs.push(r[o])},getFirstChild(i){return i.childNodes[0]},getChildNodes(i){return i.childNodes},getParentNode(i){return i.parentNode},getAttrList(i){return i.attrs},getTagName(i){return i.tagName},getNamespaceURI(i){return i.namespaceURI},getTextNodeContent(i){return i.value},getCommentNodeContent(i){return i.data},getDocumentTypeNodeName(i){return i.name},getDocumentTypeNodePublicId(i){return i.publicId},getDocumentTypeNodeSystemId(i){return i.systemId},isTextNode(i){return i.nodeName==="#text"},isCommentNode(i){return i.nodeName==="#comment"},isDocumentTypeNode(i){return i.nodeName==="#documentType"},isElementNode(i){return Object.prototype.hasOwnProperty.call(i,"tagName")},setNodeSourceCodeLocation(i,r){i.sourceCodeLocation=r},getNodeSourceCodeLocation(i){return i.sourceCodeLocation},updateNodeSourceCodeLocation(i,r){i.sourceCodeLocation=Object.assign(Object.assign({},i.sourceCodeLocation),r)}}})(J0);var Sc={};Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.getDocumentMode=Sc.isConforming=void 0;const Ac=xo,qB="html",tue="about:legacy-compat",nue="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",XB=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],rue=[...XB,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],iue=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),KB=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],aue=[...KB,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function ZB(e,t){return t.some(n=>e.startsWith(n))}function oue(e){return e.name===qB&&e.publicId===null&&(e.systemId===null||e.systemId===tue)}Sc.isConforming=oue;function sue(e){if(e.name!==qB)return Ac.DOCUMENT_MODE.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===nue)return Ac.DOCUMENT_MODE.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),iue.has(n))return Ac.DOCUMENT_MODE.QUIRKS;let i=t===null?rue:XB;if(ZB(n,i))return Ac.DOCUMENT_MODE.QUIRKS;if(i=t===null?KB:aue,ZB(n,i))return Ac.DOCUMENT_MODE.LIMITED_QUIRKS}return Ac.DOCUMENT_MODE.NO_QUIRKS}Sc.getDocumentMode=sue;var ZS={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isIntegrationPoint=e.adjustTokenSVGTagName=e.adjustTokenXMLAttrs=e.adjustTokenSVGAttrs=e.adjustTokenMathMLAttrs=e.causesExit=e.SVG_TAG_NAMES_ADJUSTMENT_MAP=void 0;const t=xo,n={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},i="definitionurl",r="definitionURL",a=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(g=>[g.toLowerCase(),g])),o=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:t.NS.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:t.NS.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:t.NS.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:t.NS.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:t.NS.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:t.NS.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:t.NS.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:t.NS.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:t.NS.XML}],["xml:space",{prefix:"xml",name:"space",namespace:t.NS.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:t.NS.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:t.NS.XMLNS}]]);e.SVG_TAG_NAMES_ADJUSTMENT_MAP=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(g=>[g.toLowerCase(),g]));const s=new Set([t.TAG_ID.B,t.TAG_ID.BIG,t.TAG_ID.BLOCKQUOTE,t.TAG_ID.BODY,t.TAG_ID.BR,t.TAG_ID.CENTER,t.TAG_ID.CODE,t.TAG_ID.DD,t.TAG_ID.DIV,t.TAG_ID.DL,t.TAG_ID.DT,t.TAG_ID.EM,t.TAG_ID.EMBED,t.TAG_ID.H1,t.TAG_ID.H2,t.TAG_ID.H3,t.TAG_ID.H4,t.TAG_ID.H5,t.TAG_ID.H6,t.TAG_ID.HEAD,t.TAG_ID.HR,t.TAG_ID.I,t.TAG_ID.IMG,t.TAG_ID.LI,t.TAG_ID.LISTING,t.TAG_ID.MENU,t.TAG_ID.META,t.TAG_ID.NOBR,t.TAG_ID.OL,t.TAG_ID.P,t.TAG_ID.PRE,t.TAG_ID.RUBY,t.TAG_ID.S,t.TAG_ID.SMALL,t.TAG_ID.SPAN,t.TAG_ID.STRONG,t.TAG_ID.STRIKE,t.TAG_ID.SUB,t.TAG_ID.SUP,t.TAG_ID.TABLE,t.TAG_ID.TT,t.TAG_ID.U,t.TAG_ID.UL,t.TAG_ID.VAR]);function u(g){const v=g.tagID;return v===t.TAG_ID.FONT&&g.attrs.some(({name:y})=>y===t.ATTRS.COLOR||y===t.ATTRS.SIZE||y===t.ATTRS.FACE)||s.has(v)}e.causesExit=u;function c(g){for(let v=0;v<g.attrs.length;v++)if(g.attrs[v].name===i){g.attrs[v].name=r;break}}e.adjustTokenMathMLAttrs=c;function l(g){for(let v=0;v<g.attrs.length;v++){const E=a.get(g.attrs[v].name);E!=null&&(g.attrs[v].name=E)}}e.adjustTokenSVGAttrs=l;function f(g){for(let v=0;v<g.attrs.length;v++){const E=o.get(g.attrs[v].name);E&&(g.attrs[v].prefix=E.prefix,g.attrs[v].name=E.name,g.attrs[v].namespace=E.namespace)}}e.adjustTokenXMLAttrs=f;function h(g){const v=e.SVG_TAG_NAMES_ADJUSTMENT_MAP.get(g.tagName);v!=null&&(g.tagName=v,g.tagID=(0,t.getTagID)(g.tagName))}e.adjustTokenSVGTagName=h;function d(g,v){return v===t.NS.MATHML&&(g===t.TAG_ID.MI||g===t.TAG_ID.MO||g===t.TAG_ID.MN||g===t.TAG_ID.MS||g===t.TAG_ID.MTEXT)}function p(g,v,E){if(v===t.NS.MATHML&&g===t.TAG_ID.ANNOTATION_XML){for(let y=0;y<E.length;y++)if(E[y].name===t.ATTRS.ENCODING){const T=E[y].value.toLowerCase();return T===n.TEXT_HTML||T===n.APPLICATION_XML}}return v===t.NS.SVG&&(g===t.TAG_ID.FOREIGN_OBJECT||g===t.TAG_ID.DESC||g===t.TAG_ID.TITLE)}function m(g,v,E,y){return(!y||y===t.NS.HTML)&&p(g,v,E)||(!y||y===t.NS.MATHML)&&d(g,v)}e.isIntegrationPoint=m})(ZS),Object.defineProperty(Ed,"__esModule",{value:!0}),Ed.Parser=void 0;const Kr=Il,lue=Z0,QB=WB,uue=J0,JB=Sc,Wa=ZS,pr=bd,e6=q0,x=xo,tr=X0,cue="hidden",hue=8,fue=3;var ce;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ce||(ce={}));const due={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},t6=new Set([x.TAG_ID.TABLE,x.TAG_ID.TBODY,x.TAG_ID.TFOOT,x.TAG_ID.THEAD,x.TAG_ID.TR]),n6={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:uue.defaultTreeAdapter,onParseError:null};let pue=function(){function e(t,n,i=null,r=null){_classCallCheck3(this,e),this.fragmentContext=i,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=ce.INITIAL,this.originalInsertionMode=ce.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options=Object.assign(Object.assign({},n6),t),this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Kr.Tokenizer(this.options,this),this.activeFormattingElements=new QB.FormattingElementList(this.treeAdapter),this.fragmentContextID=i?(0,x.getTagID)(this.treeAdapter.getTagName(i)):x.TAG_ID.UNKNOWN,this._setContextModes(i??this.document,this.fragmentContextID),this.openElements=new lue.OpenElementStack(this.document,this.treeAdapter,this)}return _createClass3(e,[{key:"getFragment",value:function(){const n=this.treeAdapter.getFirstChild(this.document),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(n,i),i}},{key:"_err",value:function(n,i,r){var a;if(!this.onParseError)return;const o=(a=n.location)!==null&&a!==void 0?a:due,s={code:i,startLine:o.startLine,startCol:o.startCol,startOffset:o.startOffset,endLine:r?o.startLine:o.endLine,endCol:r?o.startCol:o.endCol,endOffset:r?o.startOffset:o.endOffset};this.onParseError(s)}},{key:"onItemPush",value:function(n,i,r){var a,o;(o=(a=this.treeAdapter).onItemPush)===null||o===void 0||o.call(a,n),r&&this.openElements.stackTop>0&&this._setContextModes(n,i)}},{key:"onItemPop",value:function(n,i){var r,a;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(n,this.currentToken),(a=(r=this.treeAdapter).onItemPop)===null||a===void 0||a.call(r,n,this.openElements.current),i){let o,s;this.openElements.stackTop===0&&this.fragmentContext?(o=this.fragmentContext,s=this.fragmentContextID):{current:o,currentTagId:s}=this.openElements,this._setContextModes(o,s)}}},{key:"_setContextModes",value:function(n,i){const r=n===this.document||this.treeAdapter.getNamespaceURI(n)===x.NS.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(i,n)}},{key:"_switchToTextParsing",value:function(n,i){this._insertElement(n,x.NS.HTML),this.tokenizer.state=i,this.originalInsertionMode=this.insertionMode,this.insertionMode=ce.TEXT}},{key:"switchToPlaintextParsing",value:function(){this.insertionMode=ce.TEXT,this.originalInsertionMode=ce.IN_BODY,this.tokenizer.state=Kr.TokenizerMode.PLAINTEXT}},{key:"_getAdjustedCurrentElement",value:function(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}},{key:"_findFormInFragmentContext",value:function(){let n=this.fragmentContext;for(;n;){if(this.treeAdapter.getTagName(n)===x.TAG_NAMES.FORM){this.formElement=n;break}n=this.treeAdapter.getParentNode(n)}}},{key:"_initTokenizerForFragmentParsing",value:function(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==x.NS.HTML))switch(this.fragmentContextID){case x.TAG_ID.TITLE:case x.TAG_ID.TEXTAREA:{this.tokenizer.state=Kr.TokenizerMode.RCDATA;break}case x.TAG_ID.STYLE:case x.TAG_ID.XMP:case x.TAG_ID.IFRAME:case x.TAG_ID.NOEMBED:case x.TAG_ID.NOFRAMES:case x.TAG_ID.NOSCRIPT:{this.tokenizer.state=Kr.TokenizerMode.RAWTEXT;break}case x.TAG_ID.SCRIPT:{this.tokenizer.state=Kr.TokenizerMode.SCRIPT_DATA;break}case x.TAG_ID.PLAINTEXT:{this.tokenizer.state=Kr.TokenizerMode.PLAINTEXT;break}}}},{key:"_setDocumentType",value:function(n){const i=n.name||"",r=n.publicId||"",a=n.systemId||"";if(this.treeAdapter.setDocumentType(this.document,i,r,a),n.location){const s=this.treeAdapter.getChildNodes(this.document).find(u=>this.treeAdapter.isDocumentTypeNode(u));s&&this.treeAdapter.setNodeSourceCodeLocation(s,n.location)}}},{key:"_attachElementToTree",value:function(n,i){if(this.options.sourceCodeLocationInfo){const r=i&&Object.assign(Object.assign({},i),{startTag:i});this.treeAdapter.setNodeSourceCodeLocation(n,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(n);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,n)}}},{key:"_appendElement",value:function(n,i){const r=this.treeAdapter.createElement(n.tagName,i,n.attrs);this._attachElementToTree(r,n.location)}},{key:"_insertElement",value:function(n,i){const r=this.treeAdapter.createElement(n.tagName,i,n.attrs);this._attachElementToTree(r,n.location),this.openElements.push(r,n.tagID)}},{key:"_insertFakeElement",value:function(n,i){const r=this.treeAdapter.createElement(n,x.NS.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,i)}},{key:"_insertTemplate",value:function(n){const i=this.treeAdapter.createElement(n.tagName,x.NS.HTML,n.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(i,r),this._attachElementToTree(i,n.location),this.openElements.push(i,n.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}},{key:"_insertFakeRootElement",value:function(){const n=this.treeAdapter.createElement(x.TAG_NAMES.HTML,x.NS.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null),this.treeAdapter.appendChild(this.openElements.current,n),this.openElements.push(n,x.TAG_ID.HTML)}},{key:"_appendCommentNode",value:function(n,i){const r=this.treeAdapter.createCommentNode(n.data);this.treeAdapter.appendChild(i,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,n.location)}},{key:"_insertCharacters",value:function(n){let i,r;if(this._shouldFosterParentOnInsertion()?({parent:i,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(i,n.chars,r):this.treeAdapter.insertText(i,n.chars)):(i=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(i,n.chars)),!n.location)return;const a=this.treeAdapter.getChildNodes(i),o=r?a.lastIndexOf(r):a.length,s=a[o-1];if(this.treeAdapter.getNodeSourceCodeLocation(s)){const{endLine:c,endCol:l,endOffset:f}=n.location;this.treeAdapter.updateNodeSourceCodeLocation(s,{endLine:c,endCol:l,endOffset:f})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,n.location)}},{key:"_adoptNodes",value:function(n,i){for(let r=this.treeAdapter.getFirstChild(n);r;r=this.treeAdapter.getFirstChild(n))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(i,r)}},{key:"_setEndLocation",value:function(n,i){if(this.treeAdapter.getNodeSourceCodeLocation(n)&&i.location){const r=i.location,a=this.treeAdapter.getTagName(n),o=i.type===tr.TokenType.END_TAG&&a===i.tagName?{endTag:Object.assign({},r),endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(n,o)}}},{key:"shouldProcessStartTagTokenInForeignContent",value:function(n){if(!this.currentNotInHTML)return!1;let i,r;return this.openElements.stackTop===0&&this.fragmentContext?(i=this.fragmentContext,r=this.fragmentContextID):{current:i,currentTagId:r}=this.openElements,n.tagID===x.TAG_ID.SVG&&this.treeAdapter.getTagName(i)===x.TAG_NAMES.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(i)===x.NS.MATHML?!1:this.tokenizer.inForeignNode||(n.tagID===x.TAG_ID.MGLYPH||n.tagID===x.TAG_ID.MALIGNMARK)&&!this._isIntegrationPoint(r,i,x.NS.HTML)}},{key:"_processToken",value:function(n){switch(n.type){case tr.TokenType.CHARACTER:{this.onCharacter(n);break}case tr.TokenType.NULL_CHARACTER:{this.onNullCharacter(n);break}case tr.TokenType.COMMENT:{this.onComment(n);break}case tr.TokenType.DOCTYPE:{this.onDoctype(n);break}case tr.TokenType.START_TAG:{this._processStartTag(n);break}case tr.TokenType.END_TAG:{this.onEndTag(n);break}case tr.TokenType.EOF:{this.onEof(n);break}case tr.TokenType.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(n);break}}}},{key:"_isIntegrationPoint",value:function(n,i,r){const a=this.treeAdapter.getNamespaceURI(i),o=this.treeAdapter.getAttrList(i);return Wa.isIntegrationPoint(n,a,o,r)}},{key:"_reconstructActiveFormattingElements",value:function(){const n=this.activeFormattingElements.entries.length;if(n){const i=this.activeFormattingElements.entries.findIndex(a=>a.type===QB.EntryType.Marker||this.openElements.contains(a.element)),r=i<0?n-1:i-1;for(let a=r;a>=0;a--){const o=this.activeFormattingElements.entries[a];this._insertElement(o.token,this.treeAdapter.getNamespaceURI(o.element)),o.element=this.openElements.current}}}},{key:"_closeTableCell",value:function(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ce.IN_ROW}},{key:"_closePElement",value:function(){this.openElements.generateImpliedEndTagsWithExclusion(x.TAG_ID.P),this.openElements.popUntilTagNamePopped(x.TAG_ID.P)}},{key:"_resetInsertionMode",value:function(){for(let n=this.openElements.stackTop;n>=0;n--)switch(n===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[n]){case x.TAG_ID.TR:{this.insertionMode=ce.IN_ROW;return}case x.TAG_ID.TBODY:case x.TAG_ID.THEAD:case x.TAG_ID.TFOOT:{this.insertionMode=ce.IN_TABLE_BODY;return}case x.TAG_ID.CAPTION:{this.insertionMode=ce.IN_CAPTION;return}case x.TAG_ID.COLGROUP:{this.insertionMode=ce.IN_COLUMN_GROUP;return}case x.TAG_ID.TABLE:{this.insertionMode=ce.IN_TABLE;return}case x.TAG_ID.BODY:{this.insertionMode=ce.IN_BODY;return}case x.TAG_ID.FRAMESET:{this.insertionMode=ce.IN_FRAMESET;return}case x.TAG_ID.SELECT:{this._resetInsertionModeForSelect(n);return}case x.TAG_ID.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case x.TAG_ID.HTML:{this.insertionMode=this.headElement?ce.AFTER_HEAD:ce.BEFORE_HEAD;return}case x.TAG_ID.TD:case x.TAG_ID.TH:{if(n>0){this.insertionMode=ce.IN_CELL;return}break}case x.TAG_ID.HEAD:{if(n>0){this.insertionMode=ce.IN_HEAD;return}break}}this.insertionMode=ce.IN_BODY}},{key:"_resetInsertionModeForSelect",value:function(n){if(n>0)for(let i=n-1;i>0;i--){const r=this.openElements.tagIDs[i];if(r===x.TAG_ID.TEMPLATE)break;if(r===x.TAG_ID.TABLE){this.insertionMode=ce.IN_SELECT_IN_TABLE;return}}this.insertionMode=ce.IN_SELECT}},{key:"_isElementCausesFosterParenting",value:function(n){return t6.has(n)}},{key:"_shouldFosterParentOnInsertion",value:function(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}},{key:"_findFosterParentingLocation",value:function(){for(let n=this.openElements.stackTop;n>=0;n--){const i=this.openElements.items[n];switch(this.openElements.tagIDs[n]){case x.TAG_ID.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(i)===x.NS.HTML)return{parent:this.treeAdapter.getTemplateContent(i),beforeElement:null};break}case x.TAG_ID.TABLE:{const r=this.treeAdapter.getParentNode(i);return r?{parent:r,beforeElement:i}:{parent:this.openElements.items[n-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}},{key:"_fosterParentElement",value:function(n){const i=this._findFosterParentingLocation();i.beforeElement?this.treeAdapter.insertBefore(i.parent,n,i.beforeElement):this.treeAdapter.appendChild(i.parent,n)}},{key:"_isSpecialElement",value:function(n,i){const r=this.treeAdapter.getNamespaceURI(n);return x.SPECIAL_ELEMENTS[r].has(i)}},{key:"onCharacter",value:function(n){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){jce(this,n);return}switch(this.insertionMode){case ce.INITIAL:{Ad(this,n);break}case ce.BEFORE_HTML:{Cd(this,n);break}case ce.BEFORE_HEAD:{Dd(this,n);break}case ce.IN_HEAD:{wd(this,n);break}case ce.IN_HEAD_NO_SCRIPT:{Id(this,n);break}case ce.AFTER_HEAD:{kd(this,n);break}case ce.IN_BODY:case ce.IN_CAPTION:case ce.IN_CELL:case ce.IN_TEMPLATE:{i6(this,n);break}case ce.TEXT:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:{this._insertCharacters(n);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{tA(this,n);break}case ce.IN_TABLE_TEXT:{f6(this,n);break}case ce.IN_COLUMN_GROUP:{nv(this,n);break}case ce.AFTER_BODY:{av(this,n);break}case ce.AFTER_AFTER_BODY:{ov(this,n);break}}}},{key:"onNullCharacter",value:function(n){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){zce(this,n);return}switch(this.insertionMode){case ce.INITIAL:{Ad(this,n);break}case ce.BEFORE_HTML:{Cd(this,n);break}case ce.BEFORE_HEAD:{Dd(this,n);break}case ce.IN_HEAD:{wd(this,n);break}case ce.IN_HEAD_NO_SCRIPT:{Id(this,n);break}case ce.AFTER_HEAD:{kd(this,n);break}case ce.TEXT:{this._insertCharacters(n);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{tA(this,n);break}case ce.IN_COLUMN_GROUP:{nv(this,n);break}case ce.AFTER_BODY:{av(this,n);break}case ce.AFTER_AFTER_BODY:{ov(this,n);break}}}},{key:"onComment",value:function(n){if(this.skipNextNewLine=!1,this.currentNotInHTML){JS(this,n);return}switch(this.insertionMode){case ce.INITIAL:case ce.BEFORE_HTML:case ce.BEFORE_HEAD:case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:case ce.IN_BODY:case ce.IN_TABLE:case ce.IN_CAPTION:case ce.IN_COLUMN_GROUP:case ce.IN_TABLE_BODY:case ce.IN_ROW:case ce.IN_CELL:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:case ce.IN_TEMPLATE:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:{JS(this,n);break}case ce.IN_TABLE_TEXT:{Pd(this,n);break}case ce.AFTER_BODY:{bue(this,n);break}case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{_ue(this,n);break}}}},{key:"onDoctype",value:function(n){switch(this.skipNextNewLine=!1,this.insertionMode){case ce.INITIAL:{Sue(this,n);break}case ce.BEFORE_HEAD:case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:{this._err(n,pr.ERR.misplacedDoctype);break}case ce.IN_TABLE_TEXT:{Pd(this,n);break}}}},{key:"onStartTag",value:function(n){this.skipNextNewLine=!1,this.currentToken=n,this._processStartTag(n),n.selfClosing&&!n.ackSelfClosing&&this._err(n,pr.ERR.nonVoidHtmlElementStartTagWithTrailingSolidus)}},{key:"_processStartTag",value:function(n){this.shouldProcessStartTagTokenInForeignContent(n)?Vce(this,n):this._startTagOutsideForeignContent(n)}},{key:"_startTagOutsideForeignContent",value:function(n){switch(this.insertionMode){case ce.INITIAL:{Ad(this,n);break}case ce.BEFORE_HTML:{Aue(this,n);break}case ce.BEFORE_HEAD:{Due(this,n);break}case ce.IN_HEAD:{fa(this,n);break}case ce.IN_HEAD_NO_SCRIPT:{kue(this,n);break}case ce.AFTER_HEAD:{xue(this,n);break}case ce.IN_BODY:{Mr(this,n);break}case ce.IN_TABLE:{Cc(this,n);break}case ce.IN_TABLE_TEXT:{Pd(this,n);break}case ce.IN_CAPTION:{wce(this,n);break}case ce.IN_COLUMN_GROUP:{nA(this,n);break}case ce.IN_TABLE_BODY:{rv(this,n);break}case ce.IN_ROW:{iv(this,n);break}case ce.IN_CELL:{Oce(this,n);break}case ce.IN_SELECT:{m6(this,n);break}case ce.IN_SELECT_IN_TABLE:{Pce(this,n);break}case ce.IN_TEMPLATE:{Nce(this,n);break}case ce.AFTER_BODY:{Lce(this,n);break}case ce.IN_FRAMESET:{Bce(this,n);break}case ce.AFTER_FRAMESET:{Hce(this,n);break}case ce.AFTER_AFTER_BODY:{Uce(this,n);break}case ce.AFTER_AFTER_FRAMESET:{Gce(this,n);break}}}},{key:"onEndTag",value:function(n){this.skipNextNewLine=!1,this.currentToken=n,this.currentNotInHTML?Yce(this,n):this._endTagOutsideForeignContent(n)}},{key:"_endTagOutsideForeignContent",value:function(n){switch(this.insertionMode){case ce.INITIAL:{Ad(this,n);break}case ce.BEFORE_HTML:{Cue(this,n);break}case ce.BEFORE_HEAD:{wue(this,n);break}case ce.IN_HEAD:{Iue(this,n);break}case ce.IN_HEAD_NO_SCRIPT:{Oue(this,n);break}case ce.AFTER_HEAD:{Pue(this,n);break}case ce.IN_BODY:{tv(this,n);break}case ce.TEXT:{vce(this,n);break}case ce.IN_TABLE:{Od(this,n);break}case ce.IN_TABLE_TEXT:{Pd(this,n);break}case ce.IN_CAPTION:{Ice(this,n);break}case ce.IN_COLUMN_GROUP:{kce(this,n);break}case ce.IN_TABLE_BODY:{rA(this,n);break}case ce.IN_ROW:{p6(this,n);break}case ce.IN_CELL:{xce(this,n);break}case ce.IN_SELECT:{g6(this,n);break}case ce.IN_SELECT_IN_TABLE:{Rce(this,n);break}case ce.IN_TEMPLATE:{Mce(this,n);break}case ce.AFTER_BODY:{y6(this,n);break}case ce.IN_FRAMESET:{Fce(this,n);break}case ce.AFTER_FRAMESET:{$ce(this,n);break}case ce.AFTER_AFTER_BODY:{ov(this,n);break}}}},{key:"onEof",value:function(n){switch(this.insertionMode){case ce.INITIAL:{Ad(this,n);break}case ce.BEFORE_HTML:{Cd(this,n);break}case ce.BEFORE_HEAD:{Dd(this,n);break}case ce.IN_HEAD:{wd(this,n);break}case ce.IN_HEAD_NO_SCRIPT:{Id(this,n);break}case ce.AFTER_HEAD:{kd(this,n);break}case ce.IN_BODY:case ce.IN_TABLE:case ce.IN_CAPTION:case ce.IN_COLUMN_GROUP:case ce.IN_TABLE_BODY:case ce.IN_ROW:case ce.IN_CELL:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:{c6(this,n);break}case ce.TEXT:{yce(this,n);break}case ce.IN_TABLE_TEXT:{Pd(this,n);break}case ce.IN_TEMPLATE:{v6(this,n);break}case ce.AFTER_BODY:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{eA(this,n);break}}}},{key:"onWhitespaceCharacter",value:function(n){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,n.chars.charCodeAt(0)===e6.CODE_POINTS.LINE_FEED)){if(n.chars.length===1)return;n.chars=n.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(n);return}switch(this.insertionMode){case ce.IN_HEAD:case ce.IN_HEAD_NO_SCRIPT:case ce.AFTER_HEAD:case ce.TEXT:case ce.IN_COLUMN_GROUP:case ce.IN_SELECT:case ce.IN_SELECT_IN_TABLE:case ce.IN_FRAMESET:case ce.AFTER_FRAMESET:{this._insertCharacters(n);break}case ce.IN_BODY:case ce.IN_CAPTION:case ce.IN_CELL:case ce.IN_TEMPLATE:case ce.AFTER_BODY:case ce.AFTER_AFTER_BODY:case ce.AFTER_AFTER_FRAMESET:{r6(this,n);break}case ce.IN_TABLE:case ce.IN_TABLE_BODY:case ce.IN_ROW:{tA(this,n);break}case ce.IN_TABLE_TEXT:{h6(this,n);break}}}}],[{key:"parse",value:function(n,i){const r=new this(i);return r.tokenizer.write(n,!0),r.document}},{key:"getFragmentParser",value:function(n,i){const r=Object.assign(Object.assign({},n6),i);n??(n=r.treeAdapter.createElement(x.TAG_NAMES.TEMPLATE,x.NS.HTML,[]));const a=r.treeAdapter.createElement("documentmock",x.NS.HTML,[]),o=new this(r,a,n);return o.fragmentContextID===x.TAG_ID.TEMPLATE&&o.tmplInsertionModeStack.unshift(ce.IN_TEMPLATE),o._initTokenizerForFragmentParsing(),o._insertFakeRootElement(),o._resetInsertionMode(),o._findFormInFragmentContext(),o}}]),e}();Ed.Parser=pue;function mue(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):u6(e,t),n}function gue(e,t){let n=null,i=e.openElements.stackTop;for(;i>=0;i--){const r=e.openElements.items[i];if(r===t.element)break;e._isSpecialElement(r,e.openElements.tagIDs[i])&&(n=r)}return n||(e.openElements.shortenToLength(i<0?0:i),e.activeFormattingElements.removeEntry(t)),n}function vue(e,t,n){let i=t,r=e.openElements.getCommonAncestor(t);for(let a=0,o=r;o!==n;a++,o=r){r=e.openElements.getCommonAncestor(o);const s=e.activeFormattingElements.getElementEntry(o),u=s&&a>=fue;!s||u?(u&&e.activeFormattingElements.removeEntry(s),e.openElements.remove(o)):(o=yue(e,s),i===t&&(e.activeFormattingElements.bookmark=s),e.treeAdapter.detachNode(i),e.treeAdapter.appendChild(o,i),i=o)}return i}function yue(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),i=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,i),t.element=i,i}function Tue(e,t,n){const i=e.treeAdapter.getTagName(t),r=(0,x.getTagID)(i);if(e._isElementCausesFosterParenting(r))e._fosterParentElement(n);else{const a=e.treeAdapter.getNamespaceURI(t);r===x.TAG_ID.TEMPLATE&&a===x.NS.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Eue(e,t,n){const i=e.treeAdapter.getNamespaceURI(n.element),{token:r}=n,a=e.treeAdapter.createElement(r.tagName,i,r.attrs);e._adoptNodes(t,a),e.treeAdapter.appendChild(t,a),e.activeFormattingElements.insertElementAfterBookmark(a,r),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,a,r.tagID)}function QS(e,t){for(let n=0;n<hue;n++){const i=mue(e,t);if(!i)break;const r=gue(e,i);if(!r)break;e.activeFormattingElements.bookmark=i;const a=vue(e,r,i.element),o=e.openElements.getCommonAncestor(i.element);e.treeAdapter.detachNode(a),o&&Tue(e,o,a),Eue(e,r,i)}}function JS(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function bue(e,t){e._appendCommentNode(t,e.openElements.items[0])}function _ue(e,t){e._appendCommentNode(t,e.document)}function eA(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let i=e.openElements.stackTop;i>=n;i--)e._setEndLocation(e.openElements.items[i],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const i=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(i);if(r&&!r.endTag&&(e._setEndLocation(i,t),e.openElements.stackTop>=1)){const a=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(a);o&&!o.endTag&&e._setEndLocation(a,t)}}}}function Sue(e,t){e._setDocumentType(t);const n=t.forceQuirks?x.DOCUMENT_MODE.QUIRKS:JB.getDocumentMode(t);JB.isConforming(t)||e._err(t,pr.ERR.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ce.BEFORE_HTML}function Ad(e,t){e._err(t,pr.ERR.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,x.DOCUMENT_MODE.QUIRKS),e.insertionMode=ce.BEFORE_HTML,e._processToken(t)}function Aue(e,t){t.tagID===x.TAG_ID.HTML?(e._insertElement(t,x.NS.HTML),e.insertionMode=ce.BEFORE_HEAD):Cd(e,t)}function Cue(e,t){const n=t.tagID;(n===x.TAG_ID.HTML||n===x.TAG_ID.HEAD||n===x.TAG_ID.BODY||n===x.TAG_ID.BR)&&Cd(e,t)}function Cd(e,t){e._insertFakeRootElement(),e.insertionMode=ce.BEFORE_HEAD,e._processToken(t)}function Due(e,t){switch(t.tagID){case x.TAG_ID.HTML:{Mr(e,t);break}case x.TAG_ID.HEAD:{e._insertElement(t,x.NS.HTML),e.headElement=e.openElements.current,e.insertionMode=ce.IN_HEAD;break}default:Dd(e,t)}}function wue(e,t){const n=t.tagID;n===x.TAG_ID.HEAD||n===x.TAG_ID.BODY||n===x.TAG_ID.HTML||n===x.TAG_ID.BR?Dd(e,t):e._err(t,pr.ERR.endTagWithoutMatchingOpenElement)}function Dd(e,t){e._insertFakeElement(x.TAG_NAMES.HEAD,x.TAG_ID.HEAD),e.headElement=e.openElements.current,e.insertionMode=ce.IN_HEAD,e._processToken(t)}function fa(e,t){switch(t.tagID){case x.TAG_ID.HTML:{Mr(e,t);break}case x.TAG_ID.BASE:case x.TAG_ID.BASEFONT:case x.TAG_ID.BGSOUND:case x.TAG_ID.LINK:case x.TAG_ID.META:{e._appendElement(t,x.NS.HTML),t.ackSelfClosing=!0;break}case x.TAG_ID.TITLE:{e._switchToTextParsing(t,Kr.TokenizerMode.RCDATA);break}case x.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Kr.TokenizerMode.RAWTEXT):(e._insertElement(t,x.NS.HTML),e.insertionMode=ce.IN_HEAD_NO_SCRIPT);break}case x.TAG_ID.NOFRAMES:case x.TAG_ID.STYLE:{e._switchToTextParsing(t,Kr.TokenizerMode.RAWTEXT);break}case x.TAG_ID.SCRIPT:{e._switchToTextParsing(t,Kr.TokenizerMode.SCRIPT_DATA);break}case x.TAG_ID.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ce.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ce.IN_TEMPLATE);break}case x.TAG_ID.HEAD:{e._err(t,pr.ERR.misplacedStartTagForHeadElement);break}default:wd(e,t)}}function Iue(e,t){switch(t.tagID){case x.TAG_ID.HEAD:{e.openElements.pop(),e.insertionMode=ce.AFTER_HEAD;break}case x.TAG_ID.BODY:case x.TAG_ID.BR:case x.TAG_ID.HTML:{wd(e,t);break}case x.TAG_ID.TEMPLATE:{kl(e,t);break}default:e._err(t,pr.ERR.endTagWithoutMatchingOpenElement)}}function kl(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==x.TAG_ID.TEMPLATE&&e._err(t,pr.ERR.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(x.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,pr.ERR.endTagWithoutMatchingOpenElement)}function wd(e,t){e.openElements.pop(),e.insertionMode=ce.AFTER_HEAD,e._processToken(t)}function kue(e,t){switch(t.tagID){case x.TAG_ID.HTML:{Mr(e,t);break}case x.TAG_ID.BASEFONT:case x.TAG_ID.BGSOUND:case x.TAG_ID.HEAD:case x.TAG_ID.LINK:case x.TAG_ID.META:case x.TAG_ID.NOFRAMES:case x.TAG_ID.STYLE:{fa(e,t);break}case x.TAG_ID.NOSCRIPT:{e._err(t,pr.ERR.nestedNoscriptInHead);break}default:Id(e,t)}}function Oue(e,t){switch(t.tagID){case x.TAG_ID.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ce.IN_HEAD;break}case x.TAG_ID.BR:{Id(e,t);break}default:e._err(t,pr.ERR.endTagWithoutMatchingOpenElement)}}function Id(e,t){const n=t.type===tr.TokenType.EOF?pr.ERR.openElementsLeftAfterEof:pr.ERR.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ce.IN_HEAD,e._processToken(t)}function xue(e,t){switch(t.tagID){case x.TAG_ID.HTML:{Mr(e,t);break}case x.TAG_ID.BODY:{e._insertElement(t,x.NS.HTML),e.framesetOk=!1,e.insertionMode=ce.IN_BODY;break}case x.TAG_ID.FRAMESET:{e._insertElement(t,x.NS.HTML),e.insertionMode=ce.IN_FRAMESET;break}case x.TAG_ID.BASE:case x.TAG_ID.BASEFONT:case x.TAG_ID.BGSOUND:case x.TAG_ID.LINK:case x.TAG_ID.META:case x.TAG_ID.NOFRAMES:case x.TAG_ID.SCRIPT:case x.TAG_ID.STYLE:case x.TAG_ID.TEMPLATE:case x.TAG_ID.TITLE:{e._err(t,pr.ERR.abandonedHeadElementChild),e.openElements.push(e.headElement,x.TAG_ID.HEAD),fa(e,t),e.openElements.remove(e.headElement);break}case x.TAG_ID.HEAD:{e._err(t,pr.ERR.misplacedStartTagForHeadElement);break}default:kd(e,t)}}function Pue(e,t){switch(t.tagID){case x.TAG_ID.BODY:case x.TAG_ID.HTML:case x.TAG_ID.BR:{kd(e,t);break}case x.TAG_ID.TEMPLATE:{kl(e,t);break}default:e._err(t,pr.ERR.endTagWithoutMatchingOpenElement)}}function kd(e,t){e._insertFakeElement(x.TAG_NAMES.BODY,x.TAG_ID.BODY),e.insertionMode=ce.IN_BODY,ev(e,t)}function ev(e,t){switch(t.type){case tr.TokenType.CHARACTER:{i6(e,t);break}case tr.TokenType.WHITESPACE_CHARACTER:{r6(e,t);break}case tr.TokenType.COMMENT:{JS(e,t);break}case tr.TokenType.START_TAG:{Mr(e,t);break}case tr.TokenType.END_TAG:{tv(e,t);break}case tr.TokenType.EOF:{c6(e,t);break}}}function r6(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function i6(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Rue(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Nue(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Mue(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,x.NS.HTML),e.insertionMode=ce.IN_FRAMESET)}function Lue(e,t){e.openElements.hasInButtonScope(x.TAG_ID.P)&&e._closePElement(),e._insertElement(t,x.NS.HTML)}function Bue(e,t){e.openElements.hasInButtonScope(x.TAG_ID.P)&&e._closePElement(),(0,x.isNumberedHeader)(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,x.NS.HTML)}function Fue(e,t){e.openElements.hasInButtonScope(x.TAG_ID.P)&&e._closePElement(),e._insertElement(t,x.NS.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Hue(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(x.TAG_ID.P)&&e._closePElement(),e._insertElement(t,x.NS.HTML),n||(e.formElement=e.openElements.current))}function $ue(e,t){e.framesetOk=!1;const n=t.tagID;for(let i=e.openElements.stackTop;i>=0;i--){const r=e.openElements.tagIDs[i];if(n===x.TAG_ID.LI&&r===x.TAG_ID.LI||(n===x.TAG_ID.DD||n===x.TAG_ID.DT)&&(r===x.TAG_ID.DD||r===x.TAG_ID.DT)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r);break}if(r!==x.TAG_ID.ADDRESS&&r!==x.TAG_ID.DIV&&r!==x.TAG_ID.P&&e._isSpecialElement(e.openElements.items[i],r))break}e.openElements.hasInButtonScope(x.TAG_ID.P)&&e._closePElement(),e._insertElement(t,x.NS.HTML)}function Uue(e,t){e.openElements.hasInButtonScope(x.TAG_ID.P)&&e._closePElement(),e._insertElement(t,x.NS.HTML),e.tokenizer.state=Kr.TokenizerMode.PLAINTEXT}function Gue(e,t){e.openElements.hasInScope(x.TAG_ID.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(x.TAG_ID.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,x.NS.HTML),e.framesetOk=!1}function zue(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(x.TAG_NAMES.A);n&&(QS(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,x.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function jue(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,x.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Vue(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(x.TAG_ID.NOBR)&&(QS(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,x.NS.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Yue(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,x.NS.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Wue(e,t){e.treeAdapter.getDocumentMode(e.document)!==x.DOCUMENT_MODE.QUIRKS&&e.openElements.hasInButtonScope(x.TAG_ID.P)&&e._closePElement(),e._insertElement(t,x.NS.HTML),e.framesetOk=!1,e.insertionMode=ce.IN_TABLE}function a6(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,x.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function o6(e){const t=(0,tr.getTokenAttr)(e,x.ATTRS.TYPE);return t!=null&&t.toLowerCase()===cue}function que(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,x.NS.HTML),o6(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Xue(e,t){e._appendElement(t,x.NS.HTML),t.ackSelfClosing=!0}function Kue(e,t){e.openElements.hasInButtonScope(x.TAG_ID.P)&&e._closePElement(),e._appendElement(t,x.NS.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Zue(e,t){t.tagName=x.TAG_NAMES.IMG,t.tagID=x.TAG_ID.IMG,a6(e,t)}function Que(e,t){e._insertElement(t,x.NS.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Kr.TokenizerMode.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ce.TEXT}function Jue(e,t){e.openElements.hasInButtonScope(x.TAG_ID.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Kr.TokenizerMode.RAWTEXT)}function ece(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Kr.TokenizerMode.RAWTEXT)}function s6(e,t){e._switchToTextParsing(t,Kr.TokenizerMode.RAWTEXT)}function tce(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,x.NS.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ce.IN_TABLE||e.insertionMode===ce.IN_CAPTION||e.insertionMode===ce.IN_TABLE_BODY||e.insertionMode===ce.IN_ROW||e.insertionMode===ce.IN_CELL?ce.IN_SELECT_IN_TABLE:ce.IN_SELECT}function nce(e,t){e.openElements.currentTagId===x.TAG_ID.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,x.NS.HTML)}function rce(e,t){e.openElements.hasInScope(x.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,x.NS.HTML)}function ice(e,t){e.openElements.hasInScope(x.TAG_ID.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(x.TAG_ID.RTC),e._insertElement(t,x.NS.HTML)}function ace(e,t){e._reconstructActiveFormattingElements(),Wa.adjustTokenMathMLAttrs(t),Wa.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,x.NS.MATHML):e._insertElement(t,x.NS.MATHML),t.ackSelfClosing=!0}function oce(e,t){e._reconstructActiveFormattingElements(),Wa.adjustTokenSVGAttrs(t),Wa.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,x.NS.SVG):e._insertElement(t,x.NS.SVG),t.ackSelfClosing=!0}function l6(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,x.NS.HTML)}function Mr(e,t){switch(t.tagID){case x.TAG_ID.I:case x.TAG_ID.S:case x.TAG_ID.B:case x.TAG_ID.U:case x.TAG_ID.EM:case x.TAG_ID.TT:case x.TAG_ID.BIG:case x.TAG_ID.CODE:case x.TAG_ID.FONT:case x.TAG_ID.SMALL:case x.TAG_ID.STRIKE:case x.TAG_ID.STRONG:{jue(e,t);break}case x.TAG_ID.A:{zue(e,t);break}case x.TAG_ID.H1:case x.TAG_ID.H2:case x.TAG_ID.H3:case x.TAG_ID.H4:case x.TAG_ID.H5:case x.TAG_ID.H6:{Bue(e,t);break}case x.TAG_ID.P:case x.TAG_ID.DL:case x.TAG_ID.OL:case x.TAG_ID.UL:case x.TAG_ID.DIV:case x.TAG_ID.DIR:case x.TAG_ID.NAV:case x.TAG_ID.MAIN:case x.TAG_ID.MENU:case x.TAG_ID.ASIDE:case x.TAG_ID.CENTER:case x.TAG_ID.FIGURE:case x.TAG_ID.FOOTER:case x.TAG_ID.HEADER:case x.TAG_ID.HGROUP:case x.TAG_ID.DIALOG:case x.TAG_ID.DETAILS:case x.TAG_ID.ADDRESS:case x.TAG_ID.ARTICLE:case x.TAG_ID.SECTION:case x.TAG_ID.SUMMARY:case x.TAG_ID.FIELDSET:case x.TAG_ID.BLOCKQUOTE:case x.TAG_ID.FIGCAPTION:{Lue(e,t);break}case x.TAG_ID.LI:case x.TAG_ID.DD:case x.TAG_ID.DT:{$ue(e,t);break}case x.TAG_ID.BR:case x.TAG_ID.IMG:case x.TAG_ID.WBR:case x.TAG_ID.AREA:case x.TAG_ID.EMBED:case x.TAG_ID.KEYGEN:{a6(e,t);break}case x.TAG_ID.HR:{Kue(e,t);break}case x.TAG_ID.RB:case x.TAG_ID.RTC:{rce(e,t);break}case x.TAG_ID.RT:case x.TAG_ID.RP:{ice(e,t);break}case x.TAG_ID.PRE:case x.TAG_ID.LISTING:{Fue(e,t);break}case x.TAG_ID.XMP:{Jue(e,t);break}case x.TAG_ID.SVG:{oce(e,t);break}case x.TAG_ID.HTML:{Rue(e,t);break}case x.TAG_ID.BASE:case x.TAG_ID.LINK:case x.TAG_ID.META:case x.TAG_ID.STYLE:case x.TAG_ID.TITLE:case x.TAG_ID.SCRIPT:case x.TAG_ID.BGSOUND:case x.TAG_ID.BASEFONT:case x.TAG_ID.TEMPLATE:{fa(e,t);break}case x.TAG_ID.BODY:{Nue(e,t);break}case x.TAG_ID.FORM:{Hue(e,t);break}case x.TAG_ID.NOBR:{Vue(e,t);break}case x.TAG_ID.MATH:{ace(e,t);break}case x.TAG_ID.TABLE:{Wue(e,t);break}case x.TAG_ID.INPUT:{que(e,t);break}case x.TAG_ID.PARAM:case x.TAG_ID.TRACK:case x.TAG_ID.SOURCE:{Xue(e,t);break}case x.TAG_ID.IMAGE:{Zue(e,t);break}case x.TAG_ID.BUTTON:{Gue(e,t);break}case x.TAG_ID.APPLET:case x.TAG_ID.OBJECT:case x.TAG_ID.MARQUEE:{Yue(e,t);break}case x.TAG_ID.IFRAME:{ece(e,t);break}case x.TAG_ID.SELECT:{tce(e,t);break}case x.TAG_ID.OPTION:case x.TAG_ID.OPTGROUP:{nce(e,t);break}case x.TAG_ID.NOEMBED:{s6(e,t);break}case x.TAG_ID.FRAMESET:{Mue(e,t);break}case x.TAG_ID.TEXTAREA:{Que(e,t);break}case x.TAG_ID.NOSCRIPT:{e.options.scriptingEnabled?s6(e,t):l6(e,t);break}case x.TAG_ID.PLAINTEXT:{Uue(e,t);break}case x.TAG_ID.COL:case x.TAG_ID.TH:case x.TAG_ID.TD:case x.TAG_ID.TR:case x.TAG_ID.HEAD:case x.TAG_ID.FRAME:case x.TAG_ID.TBODY:case x.TAG_ID.TFOOT:case x.TAG_ID.THEAD:case x.TAG_ID.CAPTION:case x.TAG_ID.COLGROUP:break;default:l6(e,t)}}function sce(e,t){if(e.openElements.hasInScope(x.TAG_ID.BODY)&&(e.insertionMode=ce.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function lce(e,t){e.openElements.hasInScope(x.TAG_ID.BODY)&&(e.insertionMode=ce.AFTER_BODY,y6(e,t))}function uce(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function cce(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(x.TAG_ID.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(x.TAG_ID.FORM):n&&e.openElements.remove(n))}function hce(e){e.openElements.hasInButtonScope(x.TAG_ID.P)||e._insertFakeElement(x.TAG_NAMES.P,x.TAG_ID.P),e._closePElement()}function fce(e){e.openElements.hasInListItemScope(x.TAG_ID.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(x.TAG_ID.LI),e.openElements.popUntilTagNamePopped(x.TAG_ID.LI))}function dce(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function pce(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function mce(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function gce(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(x.TAG_NAMES.BR,x.TAG_ID.BR),e.openElements.pop(),e.framesetOk=!1}function u6(e,t){const n=t.tagName,i=t.tagID;for(let r=e.openElements.stackTop;r>0;r--){const a=e.openElements.items[r],o=e.openElements.tagIDs[r];if(i===o&&(i!==x.TAG_ID.UNKNOWN||e.treeAdapter.getTagName(a)===n)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.stackTop>=r&&e.openElements.shortenToLength(r);break}if(e._isSpecialElement(a,o))break}}function tv(e,t){switch(t.tagID){case x.TAG_ID.A:case x.TAG_ID.B:case x.TAG_ID.I:case x.TAG_ID.S:case x.TAG_ID.U:case x.TAG_ID.EM:case x.TAG_ID.TT:case x.TAG_ID.BIG:case x.TAG_ID.CODE:case x.TAG_ID.FONT:case x.TAG_ID.NOBR:case x.TAG_ID.SMALL:case x.TAG_ID.STRIKE:case x.TAG_ID.STRONG:{QS(e,t);break}case x.TAG_ID.P:{hce(e);break}case x.TAG_ID.DL:case x.TAG_ID.UL:case x.TAG_ID.OL:case x.TAG_ID.DIR:case x.TAG_ID.DIV:case x.TAG_ID.NAV:case x.TAG_ID.PRE:case x.TAG_ID.MAIN:case x.TAG_ID.MENU:case x.TAG_ID.ASIDE:case x.TAG_ID.BUTTON:case x.TAG_ID.CENTER:case x.TAG_ID.FIGURE:case x.TAG_ID.FOOTER:case x.TAG_ID.HEADER:case x.TAG_ID.HGROUP:case x.TAG_ID.DIALOG:case x.TAG_ID.ADDRESS:case x.TAG_ID.ARTICLE:case x.TAG_ID.DETAILS:case x.TAG_ID.SECTION:case x.TAG_ID.SUMMARY:case x.TAG_ID.LISTING:case x.TAG_ID.FIELDSET:case x.TAG_ID.BLOCKQUOTE:case x.TAG_ID.FIGCAPTION:{uce(e,t);break}case x.TAG_ID.LI:{fce(e);break}case x.TAG_ID.DD:case x.TAG_ID.DT:{dce(e,t);break}case x.TAG_ID.H1:case x.TAG_ID.H2:case x.TAG_ID.H3:case x.TAG_ID.H4:case x.TAG_ID.H5:case x.TAG_ID.H6:{pce(e);break}case x.TAG_ID.BR:{gce(e);break}case x.TAG_ID.BODY:{sce(e,t);break}case x.TAG_ID.HTML:{lce(e,t);break}case x.TAG_ID.FORM:{cce(e);break}case x.TAG_ID.APPLET:case x.TAG_ID.OBJECT:case x.TAG_ID.MARQUEE:{mce(e,t);break}case x.TAG_ID.TEMPLATE:{kl(e,t);break}default:u6(e,t)}}function c6(e,t){e.tmplInsertionModeStack.length>0?v6(e,t):eA(e,t)}function vce(e,t){var n;t.tagID===x.TAG_ID.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function yce(e,t){e._err(t,pr.ERR.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function tA(e,t){if(t6.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ce.IN_TABLE_TEXT,t.type){case tr.TokenType.CHARACTER:{f6(e,t);break}case tr.TokenType.WHITESPACE_CHARACTER:{h6(e,t);break}}else xd(e,t)}function Tce(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,x.NS.HTML),e.insertionMode=ce.IN_CAPTION}function Ece(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,x.NS.HTML),e.insertionMode=ce.IN_COLUMN_GROUP}function bce(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(x.TAG_NAMES.COLGROUP,x.TAG_ID.COLGROUP),e.insertionMode=ce.IN_COLUMN_GROUP,nA(e,t)}function _ce(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,x.NS.HTML),e.insertionMode=ce.IN_TABLE_BODY}function Sce(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(x.TAG_NAMES.TBODY,x.TAG_ID.TBODY),e.insertionMode=ce.IN_TABLE_BODY,rv(e,t)}function Ace(e,t){e.openElements.hasInTableScope(x.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(x.TAG_ID.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Cce(e,t){o6(t)?e._appendElement(t,x.NS.HTML):xd(e,t),t.ackSelfClosing=!0}function Dce(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,x.NS.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Cc(e,t){switch(t.tagID){case x.TAG_ID.TD:case x.TAG_ID.TH:case x.TAG_ID.TR:{Sce(e,t);break}case x.TAG_ID.STYLE:case x.TAG_ID.SCRIPT:case x.TAG_ID.TEMPLATE:{fa(e,t);break}case x.TAG_ID.COL:{bce(e,t);break}case x.TAG_ID.FORM:{Dce(e,t);break}case x.TAG_ID.TABLE:{Ace(e,t);break}case x.TAG_ID.TBODY:case x.TAG_ID.TFOOT:case x.TAG_ID.THEAD:{_ce(e,t);break}case x.TAG_ID.INPUT:{Cce(e,t);break}case x.TAG_ID.CAPTION:{Tce(e,t);break}case x.TAG_ID.COLGROUP:{Ece(e,t);break}default:xd(e,t)}}function Od(e,t){switch(t.tagID){case x.TAG_ID.TABLE:{e.openElements.hasInTableScope(x.TAG_ID.TABLE)&&(e.openElements.popUntilTagNamePopped(x.TAG_ID.TABLE),e._resetInsertionMode());break}case x.TAG_ID.TEMPLATE:{kl(e,t);break}case x.TAG_ID.BODY:case x.TAG_ID.CAPTION:case x.TAG_ID.COL:case x.TAG_ID.COLGROUP:case x.TAG_ID.HTML:case x.TAG_ID.TBODY:case x.TAG_ID.TD:case x.TAG_ID.TFOOT:case x.TAG_ID.TH:case x.TAG_ID.THEAD:case x.TAG_ID.TR:break;default:xd(e,t)}}function xd(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,ev(e,t),e.fosterParentingEnabled=n}function h6(e,t){e.pendingCharacterTokens.push(t)}function f6(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Pd(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)xd(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const d6=new Set([x.TAG_ID.CAPTION,x.TAG_ID.COL,x.TAG_ID.COLGROUP,x.TAG_ID.TBODY,x.TAG_ID.TD,x.TAG_ID.TFOOT,x.TAG_ID.TH,x.TAG_ID.THEAD,x.TAG_ID.TR]);function wce(e,t){const n=t.tagID;d6.has(n)?e.openElements.hasInTableScope(x.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(x.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ce.IN_TABLE,Cc(e,t)):Mr(e,t)}function Ice(e,t){const n=t.tagID;switch(n){case x.TAG_ID.CAPTION:case x.TAG_ID.TABLE:{e.openElements.hasInTableScope(x.TAG_ID.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(x.TAG_ID.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ce.IN_TABLE,n===x.TAG_ID.TABLE&&Od(e,t));break}case x.TAG_ID.BODY:case x.TAG_ID.COL:case x.TAG_ID.COLGROUP:case x.TAG_ID.HTML:case x.TAG_ID.TBODY:case x.TAG_ID.TD:case x.TAG_ID.TFOOT:case x.TAG_ID.TH:case x.TAG_ID.THEAD:case x.TAG_ID.TR:break;default:tv(e,t)}}function nA(e,t){switch(t.tagID){case x.TAG_ID.HTML:{Mr(e,t);break}case x.TAG_ID.COL:{e._appendElement(t,x.NS.HTML),t.ackSelfClosing=!0;break}case x.TAG_ID.TEMPLATE:{fa(e,t);break}default:nv(e,t)}}function kce(e,t){switch(t.tagID){case x.TAG_ID.COLGROUP:{e.openElements.currentTagId===x.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=ce.IN_TABLE);break}case x.TAG_ID.TEMPLATE:{kl(e,t);break}case x.TAG_ID.COL:break;default:nv(e,t)}}function nv(e,t){e.openElements.currentTagId===x.TAG_ID.COLGROUP&&(e.openElements.pop(),e.insertionMode=ce.IN_TABLE,e._processToken(t))}function rv(e,t){switch(t.tagID){case x.TAG_ID.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,x.NS.HTML),e.insertionMode=ce.IN_ROW;break}case x.TAG_ID.TH:case x.TAG_ID.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(x.TAG_NAMES.TR,x.TAG_ID.TR),e.insertionMode=ce.IN_ROW,iv(e,t);break}case x.TAG_ID.CAPTION:case x.TAG_ID.COL:case x.TAG_ID.COLGROUP:case x.TAG_ID.TBODY:case x.TAG_ID.TFOOT:case x.TAG_ID.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE,Cc(e,t));break}default:Cc(e,t)}}function rA(e,t){const n=t.tagID;switch(t.tagID){case x.TAG_ID.TBODY:case x.TAG_ID.TFOOT:case x.TAG_ID.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE);break}case x.TAG_ID.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE,Od(e,t));break}case x.TAG_ID.BODY:case x.TAG_ID.CAPTION:case x.TAG_ID.COL:case x.TAG_ID.COLGROUP:case x.TAG_ID.HTML:case x.TAG_ID.TD:case x.TAG_ID.TH:case x.TAG_ID.TR:break;default:Od(e,t)}}function iv(e,t){switch(t.tagID){case x.TAG_ID.TH:case x.TAG_ID.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,x.NS.HTML),e.insertionMode=ce.IN_CELL,e.activeFormattingElements.insertMarker();break}case x.TAG_ID.CAPTION:case x.TAG_ID.COL:case x.TAG_ID.COLGROUP:case x.TAG_ID.TBODY:case x.TAG_ID.TFOOT:case x.TAG_ID.THEAD:case x.TAG_ID.TR:{e.openElements.hasInTableScope(x.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY,rv(e,t));break}default:Cc(e,t)}}function p6(e,t){switch(t.tagID){case x.TAG_ID.TR:{e.openElements.hasInTableScope(x.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY);break}case x.TAG_ID.TABLE:{e.openElements.hasInTableScope(x.TAG_ID.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY,rA(e,t));break}case x.TAG_ID.TBODY:case x.TAG_ID.TFOOT:case x.TAG_ID.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(x.TAG_ID.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ce.IN_TABLE_BODY,rA(e,t));break}case x.TAG_ID.BODY:case x.TAG_ID.CAPTION:case x.TAG_ID.COL:case x.TAG_ID.COLGROUP:case x.TAG_ID.HTML:case x.TAG_ID.TD:case x.TAG_ID.TH:break;default:Od(e,t)}}function Oce(e,t){const n=t.tagID;d6.has(n)?(e.openElements.hasInTableScope(x.TAG_ID.TD)||e.openElements.hasInTableScope(x.TAG_ID.TH))&&(e._closeTableCell(),iv(e,t)):Mr(e,t)}function xce(e,t){const n=t.tagID;switch(n){case x.TAG_ID.TD:case x.TAG_ID.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ce.IN_ROW);break}case x.TAG_ID.TABLE:case x.TAG_ID.TBODY:case x.TAG_ID.TFOOT:case x.TAG_ID.THEAD:case x.TAG_ID.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),p6(e,t));break}case x.TAG_ID.BODY:case x.TAG_ID.CAPTION:case x.TAG_ID.COL:case x.TAG_ID.COLGROUP:case x.TAG_ID.HTML:break;default:tv(e,t)}}function m6(e,t){switch(t.tagID){case x.TAG_ID.HTML:{Mr(e,t);break}case x.TAG_ID.OPTION:{e.openElements.currentTagId===x.TAG_ID.OPTION&&e.openElements.pop(),e._insertElement(t,x.NS.HTML);break}case x.TAG_ID.OPTGROUP:{e.openElements.currentTagId===x.TAG_ID.OPTION&&e.openElements.pop(),e.openElements.currentTagId===x.TAG_ID.OPTGROUP&&e.openElements.pop(),e._insertElement(t,x.NS.HTML);break}case x.TAG_ID.INPUT:case x.TAG_ID.KEYGEN:case x.TAG_ID.TEXTAREA:case x.TAG_ID.SELECT:{e.openElements.hasInSelectScope(x.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(x.TAG_ID.SELECT),e._resetInsertionMode(),t.tagID!==x.TAG_ID.SELECT&&e._processStartTag(t));break}case x.TAG_ID.SCRIPT:case x.TAG_ID.TEMPLATE:{fa(e,t);break}}}function g6(e,t){switch(t.tagID){case x.TAG_ID.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===x.TAG_ID.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===x.TAG_ID.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===x.TAG_ID.OPTGROUP&&e.openElements.pop();break}case x.TAG_ID.OPTION:{e.openElements.currentTagId===x.TAG_ID.OPTION&&e.openElements.pop();break}case x.TAG_ID.SELECT:{e.openElements.hasInSelectScope(x.TAG_ID.SELECT)&&(e.openElements.popUntilTagNamePopped(x.TAG_ID.SELECT),e._resetInsertionMode());break}case x.TAG_ID.TEMPLATE:{kl(e,t);break}}}function Pce(e,t){const n=t.tagID;n===x.TAG_ID.CAPTION||n===x.TAG_ID.TABLE||n===x.TAG_ID.TBODY||n===x.TAG_ID.TFOOT||n===x.TAG_ID.THEAD||n===x.TAG_ID.TR||n===x.TAG_ID.TD||n===x.TAG_ID.TH?(e.openElements.popUntilTagNamePopped(x.TAG_ID.SELECT),e._resetInsertionMode(),e._processStartTag(t)):m6(e,t)}function Rce(e,t){const n=t.tagID;n===x.TAG_ID.CAPTION||n===x.TAG_ID.TABLE||n===x.TAG_ID.TBODY||n===x.TAG_ID.TFOOT||n===x.TAG_ID.THEAD||n===x.TAG_ID.TR||n===x.TAG_ID.TD||n===x.TAG_ID.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(x.TAG_ID.SELECT),e._resetInsertionMode(),e.onEndTag(t)):g6(e,t)}function Nce(e,t){switch(t.tagID){case x.TAG_ID.BASE:case x.TAG_ID.BASEFONT:case x.TAG_ID.BGSOUND:case x.TAG_ID.LINK:case x.TAG_ID.META:case x.TAG_ID.NOFRAMES:case x.TAG_ID.SCRIPT:case x.TAG_ID.STYLE:case x.TAG_ID.TEMPLATE:case x.TAG_ID.TITLE:{fa(e,t);break}case x.TAG_ID.CAPTION:case x.TAG_ID.COLGROUP:case x.TAG_ID.TBODY:case x.TAG_ID.TFOOT:case x.TAG_ID.THEAD:{e.tmplInsertionModeStack[0]=ce.IN_TABLE,e.insertionMode=ce.IN_TABLE,Cc(e,t);break}case x.TAG_ID.COL:{e.tmplInsertionModeStack[0]=ce.IN_COLUMN_GROUP,e.insertionMode=ce.IN_COLUMN_GROUP,nA(e,t);break}case x.TAG_ID.TR:{e.tmplInsertionModeStack[0]=ce.IN_TABLE_BODY,e.insertionMode=ce.IN_TABLE_BODY,rv(e,t);break}case x.TAG_ID.TD:case x.TAG_ID.TH:{e.tmplInsertionModeStack[0]=ce.IN_ROW,e.insertionMode=ce.IN_ROW,iv(e,t);break}default:e.tmplInsertionModeStack[0]=ce.IN_BODY,e.insertionMode=ce.IN_BODY,Mr(e,t)}}function Mce(e,t){t.tagID===x.TAG_ID.TEMPLATE&&kl(e,t)}function v6(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(x.TAG_ID.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):eA(e,t)}function Lce(e,t){t.tagID===x.TAG_ID.HTML?Mr(e,t):av(e,t)}function y6(e,t){var n;if(t.tagID===x.TAG_ID.HTML){if(e.fragmentContext||(e.insertionMode=ce.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===x.TAG_ID.HTML){e._setEndLocation(e.openElements.items[0],t);const i=e.openElements.items[1];i&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(i))===null||n===void 0)&&n.endTag)&&e._setEndLocation(i,t)}}else av(e,t)}function av(e,t){e.insertionMode=ce.IN_BODY,ev(e,t)}function Bce(e,t){switch(t.tagID){case x.TAG_ID.HTML:{Mr(e,t);break}case x.TAG_ID.FRAMESET:{e._insertElement(t,x.NS.HTML);break}case x.TAG_ID.FRAME:{e._appendElement(t,x.NS.HTML),t.ackSelfClosing=!0;break}case x.TAG_ID.NOFRAMES:{fa(e,t);break}}}function Fce(e,t){t.tagID===x.TAG_ID.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==x.TAG_ID.FRAMESET&&(e.insertionMode=ce.AFTER_FRAMESET))}function Hce(e,t){switch(t.tagID){case x.TAG_ID.HTML:{Mr(e,t);break}case x.TAG_ID.NOFRAMES:{fa(e,t);break}}}function $ce(e,t){t.tagID===x.TAG_ID.HTML&&(e.insertionMode=ce.AFTER_AFTER_FRAMESET)}function Uce(e,t){t.tagID===x.TAG_ID.HTML?Mr(e,t):ov(e,t)}function ov(e,t){e.insertionMode=ce.IN_BODY,ev(e,t)}function Gce(e,t){switch(t.tagID){case x.TAG_ID.HTML:{Mr(e,t);break}case x.TAG_ID.NOFRAMES:{fa(e,t);break}}}function zce(e,t){t.chars=e6.REPLACEMENT_CHARACTER,e._insertCharacters(t)}function jce(e,t){e._insertCharacters(t),e.framesetOk=!1}function T6(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==x.NS.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Vce(e,t){if(Wa.causesExit(t))T6(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),i=e.treeAdapter.getNamespaceURI(n);i===x.NS.MATHML?Wa.adjustTokenMathMLAttrs(t):i===x.NS.SVG&&(Wa.adjustTokenSVGTagName(t),Wa.adjustTokenSVGAttrs(t)),Wa.adjustTokenXMLAttrs(t),t.selfClosing?e._appendElement(t,i):e._insertElement(t,i),t.ackSelfClosing=!0}}function Yce(e,t){if(t.tagID===x.TAG_ID.P||t.tagID===x.TAG_ID.BR){T6(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const i=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(i)===x.NS.HTML){e._endTagOutsideForeignContent(t);break}const r=e.treeAdapter.getTagName(i);if(r.toLowerCase()===t.tagName){t.tagName=r,e.openElements.shortenToLength(n);break}}}var Dc={};Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.serializeOuter=Dc.serialize=void 0;const yn=xo,E6=rc,Wce=J0,qce=new Set([yn.TAG_NAMES.AREA,yn.TAG_NAMES.BASE,yn.TAG_NAMES.BASEFONT,yn.TAG_NAMES.BGSOUND,yn.TAG_NAMES.BR,yn.TAG_NAMES.COL,yn.TAG_NAMES.EMBED,yn.TAG_NAMES.FRAME,yn.TAG_NAMES.HR,yn.TAG_NAMES.IMG,yn.TAG_NAMES.INPUT,yn.TAG_NAMES.KEYGEN,yn.TAG_NAMES.LINK,yn.TAG_NAMES.META,yn.TAG_NAMES.PARAM,yn.TAG_NAMES.SOURCE,yn.TAG_NAMES.TRACK,yn.TAG_NAMES.WBR]);function b6(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===yn.NS.HTML&&qce.has(t.treeAdapter.getTagName(e))}const _6={treeAdapter:Wce.defaultTreeAdapter,scriptingEnabled:!0};function Xce(e,t){const n=Object.assign(Object.assign({},_6),t);return b6(e,n)?"":S6(e,n)}Dc.serialize=Xce;function Kce(e,t){const n=Object.assign(Object.assign({},_6),t);return A6(e,n)}Dc.serializeOuter=Kce;function S6(e,t){let n="";const i=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===yn.TAG_NAMES.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===yn.NS.HTML?t.treeAdapter.getTemplateContent(e):e,r=t.treeAdapter.getChildNodes(i);if(r)for(const a of r)n+=A6(a,t);return n}function A6(e,t){return t.treeAdapter.isElementNode(e)?Zce(e,t):t.treeAdapter.isTextNode(e)?Jce(e,t):t.treeAdapter.isCommentNode(e)?ehe(e,t):t.treeAdapter.isDocumentTypeNode(e)?the(e,t):""}function Zce(e,t){const n=t.treeAdapter.getTagName(e);return`<${n}${Qce(e,t)}>${b6(e,t)?"":`${S6(e,t)}</${n}>`}`}function Qce(e,{treeAdapter:t}){let n="";for(const i of t.getAttrList(e)){if(n+=" ",!i.namespace)n+=i.name;else switch(i.namespace){case yn.NS.XML:{n+=`xml:${i.name}`;break}case yn.NS.XMLNS:{i.name!=="xmlns"&&(n+="xmlns:"),n+=i.name;break}case yn.NS.XLINK:{n+=`xlink:${i.name}`;break}default:n+=`${i.prefix}:${i.name}`}n+=`="${(0,E6.escapeAttribute)(i.value)}"`}return n}function Jce(e,t){const{treeAdapter:n}=t,i=n.getTextNodeContent(e),r=n.getParentNode(e),a=r&&n.isElementNode(r)&&n.getTagName(r);return a&&n.getNamespaceURI(r)===yn.NS.HTML&&(0,yn.hasUnescapedText)(a,t.scriptingEnabled)?i:(0,E6.escapeText)(i)}function ehe(e,{treeAdapter:t}){return`<!--${t.getCommentNodeContent(e)}-->`}function the(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseFragment=e.parse=e.TokenizerMode=e.Tokenizer=e.Token=e.html=e.foreignContent=e.ErrorCodes=e.serializeOuter=e.serialize=e.Parser=e.defaultTreeAdapter=void 0;const t=Ed;var n=J0;Object.defineProperty(e,"defaultTreeAdapter",{enumerable:!0,get:function(){return n.defaultTreeAdapter}});var i=Ed;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return i.Parser}});var r=Dc;Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return r.serialize}}),Object.defineProperty(e,"serializeOuter",{enumerable:!0,get:function(){return r.serializeOuter}});var a=bd;Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return a.ERR}}),e.foreignContent=ZS,e.html=xo,e.Token=X0;var o=Il;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return o.Tokenizer}}),Object.defineProperty(e,"TokenizerMode",{enumerable:!0,get:function(){return o.TokenizerMode}});function s(c,l){return t.Parser.parse(c,l)}e.parse=s;function u(c,l,f){typeof c=="string"&&(f=l,l=c,c=null);const h=t.Parser.getFragmentParser(c,f);return h.tokenizer.write(l,!0),h.getFragment()}e.parseFragment=u})($B),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.adapter=e.serializeDoctypeContent=void 0;const t=$B,n=Vr;function i(o){return new n.Text(o)}function r(o){const s=o.includes('"')?"'":'"';return s+o+s}function a(o,s,u){let c="!DOCTYPE ";return o&&(c+=o),s?c+=` PUBLIC ${r(s)}`:u&&(c+=" SYSTEM"),u&&(c+=` ${r(u)}`),c}e.serializeDoctypeContent=a,e.adapter={isCommentNode:n.isComment,isElementNode:n.isTag,isTextNode:n.isText,createDocument(){const o=new n.Document([]);return o["x-mode"]=t.html.DOCUMENT_MODE.NO_QUIRKS,o},createDocumentFragment(){return new n.Document([])},createElement(o,s,u){const c=Object.create(null),l=Object.create(null),f=Object.create(null);for(let d=0;d<u.length;d++){const p=u[d].name;c[p]=u[d].value,l[p]=u[d].namespace,f[p]=u[d].prefix}const h=new n.Element(o,c,[]);return h.namespace=s,h["x-attribsNamespace"]=l,h["x-attribsPrefix"]=f,h},createCommentNode(o){return new n.Comment(o)},appendChild(o,s){const u=o.children[o.children.length-1];u&&(u.next=s,s.prev=u),o.children.push(s),s.parent=o},insertBefore(o,s,u){const c=o.children.indexOf(u),{prev:l}=u;l&&(l.next=s,s.prev=l),u.prev=s,s.next=u,o.children.splice(c,0,s),s.parent=o},setTemplateContent(o,s){e.adapter.appendChild(o,s)},getTemplateContent(o){return o.children[0]},setDocumentType(o,s,u,c){const l=a(s,u,c);let f=o.children.find(h=>(0,n.isDirective)(h)&&h.name==="!doctype");f?f.data=l??null:(f=new n.ProcessingInstruction("!doctype",l),e.adapter.appendChild(o,f)),f["x-name"]=s??void 0,f["x-publicId"]=u??void 0,f["x-systemId"]=c??void 0},setDocumentMode(o,s){o["x-mode"]=s},getDocumentMode(o){return o["x-mode"]},detachNode(o){if(o.parent){const s=o.parent.children.indexOf(o),{prev:u,next:c}=o;o.prev=null,o.next=null,u&&(u.next=c),c&&(c.prev=u),o.parent.children.splice(s,1),o.parent=null}},insertText(o,s){const u=o.children[o.children.length-1];u&&(0,n.isText)(u)?u.data+=s:e.adapter.appendChild(o,i(s))},insertTextBefore(o,s,u){const c=o.children[o.children.indexOf(u)-1];c&&(0,n.isText)(c)?c.data+=s:e.adapter.insertBefore(o,i(s),u)},adoptAttributes(o,s){for(let u=0;u<s.length;u++){const c=s[u].name;typeof o.attribs[c]>"u"&&(o.attribs[c]=s[u].value,o["x-attribsNamespace"][c]=s[u].namespace,o["x-attribsPrefix"][c]=s[u].prefix)}},getFirstChild(o){return o.children[0]},getChildNodes(o){return o.children},getParentNode(o){return o.parent},getAttrList(o){return o.attributes},getTagName(o){return o.name},getNamespaceURI(o){return o.namespace},getTextNodeContent(o){return o.data},getCommentNodeContent(o){return o.data},getDocumentTypeNodeName(o){var s;return(s=o["x-name"])!==null&&s!==void 0?s:""},getDocumentTypeNodePublicId(o){var s;return(s=o["x-publicId"])!==null&&s!==void 0?s:""},getDocumentTypeNodeSystemId(o){var s;return(s=o["x-systemId"])!==null&&s!==void 0?s:""},isDocumentTypeNode(o){return(0,n.isDirective)(o)&&o.name==="!doctype"},setNodeSourceCodeLocation(o,s){s&&(o.startIndex=s.startOffset,o.endIndex=s.endOffset),o.sourceCodeLocation=s},getNodeSourceCodeLocation(o){return o.sourceCodeLocation},updateNodeSourceCodeLocation(o,s){s.endOffset!=null&&(o.endIndex=s.endOffset),o.sourceCodeLocation=Object.assign(Object.assign({},o.sourceCodeLocation),s)}}}(HB);var nhe=Pe&&Pe.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var i=0,r=t.length,a;i<r;i++)(a||!(i in t))&&(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))};Object.defineProperty(yc,"__esModule",{value:!0}),yc.renderWithParse5=yc.parseWithParse5=void 0;var rhe=Vr,iA=eB,C6=HB;function ihe(e,t,n,i){var r={scriptingEnabled:typeof t.scriptingEnabled=="boolean"?t.scriptingEnabled:!0,treeAdapter:C6.adapter,sourceCodeLocationInfo:t.sourceCodeLocationInfo};return n?(0,iA.parse)(e,r):(0,iA.parseFragment)(i,e,r)}yc.parseWithParse5=ihe;var ahe={treeAdapter:C6.adapter};function ohe(e){for(var t,n=("length"in e)?e:[e],i=0;i<n.length;i+=1){var r=n[i];(0,rhe.isDocument)(r)&&(t=Array.prototype.splice).call.apply(t,nhe([n,i,1],r.children,!1))}for(var a="",i=0;i<n.length;i+=1){var r=n[i];a+=(0,iA.serializeOuter)(r,ahe)}return a}yc.renderWithParse5=ohe;var D6={},sv={},aA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.QuoteType=void 0;var t=yl,n;(function(h){h[h.Tab=9]="Tab",h[h.NewLine=10]="NewLine",h[h.FormFeed=12]="FormFeed",h[h.CarriageReturn=13]="CarriageReturn",h[h.Space=32]="Space",h[h.ExclamationMark=33]="ExclamationMark",h[h.Num=35]="Num",h[h.Amp=38]="Amp",h[h.SingleQuote=39]="SingleQuote",h[h.DoubleQuote=34]="DoubleQuote",h[h.Dash=45]="Dash",h[h.Slash=47]="Slash",h[h.Zero=48]="Zero",h[h.Nine=57]="Nine",h[h.Semi=59]="Semi",h[h.Lt=60]="Lt",h[h.Eq=61]="Eq",h[h.Gt=62]="Gt",h[h.Questionmark=63]="Questionmark",h[h.UpperA=65]="UpperA",h[h.LowerA=97]="LowerA",h[h.UpperF=70]="UpperF",h[h.LowerF=102]="LowerF",h[h.UpperZ=90]="UpperZ",h[h.LowerZ=122]="LowerZ",h[h.LowerX=120]="LowerX",h[h.OpeningSquareBracket=91]="OpeningSquareBracket"})(n||(n={}));var i;(function(h){h[h.Text=1]="Text",h[h.BeforeTagName=2]="BeforeTagName",h[h.InTagName=3]="InTagName",h[h.InSelfClosingTag=4]="InSelfClosingTag",h[h.BeforeClosingTagName=5]="BeforeClosingTagName",h[h.InClosingTagName=6]="InClosingTagName",h[h.AfterClosingTagName=7]="AfterClosingTagName",h[h.BeforeAttributeName=8]="BeforeAttributeName",h[h.InAttributeName=9]="InAttributeName",h[h.AfterAttributeName=10]="AfterAttributeName",h[h.BeforeAttributeValue=11]="BeforeAttributeValue",h[h.InAttributeValueDq=12]="InAttributeValueDq",h[h.InAttributeValueSq=13]="InAttributeValueSq",h[h.InAttributeValueNq=14]="InAttributeValueNq",h[h.BeforeDeclaration=15]="BeforeDeclaration",h[h.InDeclaration=16]="InDeclaration",h[h.InProcessingInstruction=17]="InProcessingInstruction",h[h.BeforeComment=18]="BeforeComment",h[h.CDATASequence=19]="CDATASequence",h[h.InSpecialComment=20]="InSpecialComment",h[h.InCommentLike=21]="InCommentLike",h[h.BeforeSpecialS=22]="BeforeSpecialS",h[h.SpecialStartSequence=23]="SpecialStartSequence",h[h.InSpecialTag=24]="InSpecialTag",h[h.BeforeEntity=25]="BeforeEntity",h[h.BeforeNumericEntity=26]="BeforeNumericEntity",h[h.InNamedEntity=27]="InNamedEntity",h[h.InNumericEntity=28]="InNumericEntity",h[h.InHexEntity=29]="InHexEntity"})(i||(i={}));function r(h){return h===n.Space||h===n.NewLine||h===n.Tab||h===n.FormFeed||h===n.CarriageReturn}function a(h){return h===n.Slash||h===n.Gt||r(h)}function o(h){return h>=n.Zero&&h<=n.Nine}function s(h){return h>=n.LowerA&&h<=n.LowerZ||h>=n.UpperA&&h<=n.UpperZ}function u(h){return h>=n.UpperA&&h<=n.UpperF||h>=n.LowerA&&h<=n.LowerF}var c;(function(h){h[h.NoValue=0]="NoValue",h[h.Unquoted=1]="Unquoted",h[h.Single=2]="Single",h[h.Double=3]="Double"})(c=e.QuoteType||(e.QuoteType={}));var l={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},f=function(){function h(d,p){var m=d.xmlMode,g=m===void 0?!1:m,v=d.decodeEntities,E=v===void 0?!0:v;this.cbs=p,this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=g,this.decodeEntities=E,this.entityTrie=g?t.xmlDecodeTree:t.htmlDecodeTree}return h.prototype.reset=function(){this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},h.prototype.write=function(d){this.offset+=this.buffer.length,this.buffer=d,this.parse()},h.prototype.end=function(){this.running&&this.finish()},h.prototype.pause=function(){this.running=!1},h.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},h.prototype.getIndex=function(){return this.index},h.prototype.getSectionStart=function(){return this.sectionStart},h.prototype.stateText=function(d){d===n.Lt||!this.decodeEntities&&this.fastForwardTo(n.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=i.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&d===n.Amp&&(this.state=i.BeforeEntity)},h.prototype.stateSpecialStartSequence=function(d){var p=this.sequenceIndex===this.currentSequence.length,m=p?a(d):(d|32)===this.currentSequence[this.sequenceIndex];if(!m)this.isSpecial=!1;else if(!p){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=i.InTagName,this.stateInTagName(d)},h.prototype.stateInSpecialTag=function(d){if(this.sequenceIndex===this.currentSequence.length){if(d===n.Gt||r(d)){var p=this.index-this.currentSequence.length;if(this.sectionStart<p){var m=this.index;this.index=p,this.cbs.ontext(this.sectionStart,p),this.index=m}this.isSpecial=!1,this.sectionStart=p+2,this.stateInClosingTagName(d);return}this.sequenceIndex=0}(d|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===l.TitleEnd?this.decodeEntities&&d===n.Amp&&(this.state=i.BeforeEntity):this.fastForwardTo(n.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(d===n.Lt)},h.prototype.stateCDATASequence=function(d){d===l.Cdata[this.sequenceIndex]?++this.sequenceIndex===l.Cdata.length&&(this.state=i.InCommentLike,this.currentSequence=l.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=i.InDeclaration,this.stateInDeclaration(d))},h.prototype.fastForwardTo=function(d){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===d)return!0;return this.index=this.buffer.length+this.offset-1,!1},h.prototype.stateInCommentLike=function(d){d===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=i.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):d!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},h.prototype.isTagStartChar=function(d){return this.xmlMode?!a(d):s(d)},h.prototype.startSpecial=function(d,p){this.isSpecial=!0,this.currentSequence=d,this.sequenceIndex=p,this.state=i.SpecialStartSequence},h.prototype.stateBeforeTagName=function(d){if(d===n.ExclamationMark)this.state=i.BeforeDeclaration,this.sectionStart=this.index+1;else if(d===n.Questionmark)this.state=i.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(d)){var p=d|32;this.sectionStart=this.index,!this.xmlMode&&p===l.TitleEnd[2]?this.startSpecial(l.TitleEnd,3):this.state=!this.xmlMode&&p===l.ScriptEnd[2]?i.BeforeSpecialS:i.InTagName}else d===n.Slash?this.state=i.BeforeClosingTagName:(this.state=i.Text,this.stateText(d))},h.prototype.stateInTagName=function(d){a(d)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(d))},h.prototype.stateBeforeClosingTagName=function(d){r(d)||(d===n.Gt?this.state=i.Text:(this.state=this.isTagStartChar(d)?i.InClosingTagName:i.InSpecialComment,this.sectionStart=this.index))},h.prototype.stateInClosingTagName=function(d){(d===n.Gt||r(d))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterClosingTagName,this.stateAfterClosingTagName(d))},h.prototype.stateAfterClosingTagName=function(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.state=i.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeAttributeName=function(d){d===n.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=i.InSpecialTag,this.sequenceIndex=0):this.state=i.Text,this.baseState=this.state,this.sectionStart=this.index+1):d===n.Slash?this.state=i.InSelfClosingTag:r(d)||(this.state=i.InAttributeName,this.sectionStart=this.index)},h.prototype.stateInSelfClosingTag=function(d){d===n.Gt?(this.cbs.onselfclosingtag(this.index),this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1,this.isSpecial=!1):r(d)||(this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(d))},h.prototype.stateInAttributeName=function(d){(d===n.Eq||a(d))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterAttributeName,this.stateAfterAttributeName(d))},h.prototype.stateAfterAttributeName=function(d){d===n.Eq?this.state=i.BeforeAttributeValue:d===n.Slash||d===n.Gt?(this.cbs.onattribend(c.NoValue,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(d)):r(d)||(this.cbs.onattribend(c.NoValue,this.index),this.state=i.InAttributeName,this.sectionStart=this.index)},h.prototype.stateBeforeAttributeValue=function(d){d===n.DoubleQuote?(this.state=i.InAttributeValueDq,this.sectionStart=this.index+1):d===n.SingleQuote?(this.state=i.InAttributeValueSq,this.sectionStart=this.index+1):r(d)||(this.sectionStart=this.index,this.state=i.InAttributeValueNq,this.stateInAttributeValueNoQuotes(d))},h.prototype.handleInAttributeValue=function(d,p){d===p||!this.decodeEntities&&this.fastForwardTo(p)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(p===n.DoubleQuote?c.Double:c.Single,this.index),this.state=i.BeforeAttributeName):this.decodeEntities&&d===n.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},h.prototype.stateInAttributeValueDoubleQuotes=function(d){this.handleInAttributeValue(d,n.DoubleQuote)},h.prototype.stateInAttributeValueSingleQuotes=function(d){this.handleInAttributeValue(d,n.SingleQuote)},h.prototype.stateInAttributeValueNoQuotes=function(d){r(d)||d===n.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(c.Unquoted,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(d)):this.decodeEntities&&d===n.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},h.prototype.stateBeforeDeclaration=function(d){d===n.OpeningSquareBracket?(this.state=i.CDATASequence,this.sequenceIndex=0):this.state=d===n.Dash?i.BeforeComment:i.InDeclaration},h.prototype.stateInDeclaration=function(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},h.prototype.stateInProcessingInstruction=function(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeComment=function(d){d===n.Dash?(this.state=i.InCommentLike,this.currentSequence=l.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=i.InDeclaration},h.prototype.stateInSpecialComment=function(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=i.Text,this.sectionStart=this.index+1)},h.prototype.stateBeforeSpecialS=function(d){var p=d|32;p===l.ScriptEnd[3]?this.startSpecial(l.ScriptEnd,4):p===l.StyleEnd[3]?this.startSpecial(l.StyleEnd,4):(this.state=i.InTagName,this.stateInTagName(d))},h.prototype.stateBeforeEntity=function(d){this.entityExcess=1,this.entityResult=0,d===n.Num?this.state=i.BeforeNumericEntity:d===n.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=i.InNamedEntity,this.stateInNamedEntity(d))},h.prototype.stateInNamedEntity=function(d){if(this.entityExcess+=1,this.trieIndex=(0,t.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,d),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var p=this.trieCurrent&t.BinTrieFlags.VALUE_LENGTH;if(p){var m=(p>>14)-1;if(!this.allowLegacyEntity()&&d!==n.Semi)this.trieIndex+=m;else{var g=this.index-this.entityExcess+1;g>this.sectionStart&&this.emitPartial(this.sectionStart,g),this.entityResult=this.trieIndex,this.trieIndex+=m,this.entityExcess=0,this.sectionStart=this.index+1,m===0&&this.emitNamedEntity()}}},h.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var d=(this.entityTrie[this.entityResult]&t.BinTrieFlags.VALUE_LENGTH)>>14;switch(d){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~t.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},h.prototype.stateBeforeNumericEntity=function(d){(d|32)===n.LowerX?(this.entityExcess++,this.state=i.InHexEntity):(this.state=i.InNumericEntity,this.stateInNumericEntity(d))},h.prototype.emitNumericEntity=function(d){var p=this.index-this.entityExcess-1,m=p+2+Number(this.state===i.InHexEntity);m!==this.index&&(p>this.sectionStart&&this.emitPartial(this.sectionStart,p),this.sectionStart=this.index+Number(d),this.emitCodePoint((0,t.replaceCodePoint)(this.entityResult))),this.state=this.baseState},h.prototype.stateInNumericEntity=function(d){d===n.Semi?this.emitNumericEntity(!0):o(d)?(this.entityResult=this.entityResult*10+(d-n.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.stateInHexEntity=function(d){d===n.Semi?this.emitNumericEntity(!0):o(d)?(this.entityResult=this.entityResult*16+(d-n.Zero),this.entityExcess++):u(d)?(this.entityResult=this.entityResult*16+((d|32)-n.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},h.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===i.Text||this.baseState===i.InSpecialTag)},h.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===i.Text||this.state===i.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===i.InAttributeValueDq||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},h.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},h.prototype.parse=function(){for(;this.shouldContinue();){var d=this.buffer.charCodeAt(this.index-this.offset);this.state===i.Text?this.stateText(d):this.state===i.SpecialStartSequence?this.stateSpecialStartSequence(d):this.state===i.InSpecialTag?this.stateInSpecialTag(d):this.state===i.CDATASequence?this.stateCDATASequence(d):this.state===i.InAttributeValueDq?this.stateInAttributeValueDoubleQuotes(d):this.state===i.InAttributeName?this.stateInAttributeName(d):this.state===i.InCommentLike?this.stateInCommentLike(d):this.state===i.InSpecialComment?this.stateInSpecialComment(d):this.state===i.BeforeAttributeName?this.stateBeforeAttributeName(d):this.state===i.InTagName?this.stateInTagName(d):this.state===i.InClosingTagName?this.stateInClosingTagName(d):this.state===i.BeforeTagName?this.stateBeforeTagName(d):this.state===i.AfterAttributeName?this.stateAfterAttributeName(d):this.state===i.InAttributeValueSq?this.stateInAttributeValueSingleQuotes(d):this.state===i.BeforeAttributeValue?this.stateBeforeAttributeValue(d):this.state===i.BeforeClosingTagName?this.stateBeforeClosingTagName(d):this.state===i.AfterClosingTagName?this.stateAfterClosingTagName(d):this.state===i.BeforeSpecialS?this.stateBeforeSpecialS(d):this.state===i.InAttributeValueNq?this.stateInAttributeValueNoQuotes(d):this.state===i.InSelfClosingTag?this.stateInSelfClosingTag(d):this.state===i.InDeclaration?this.stateInDeclaration(d):this.state===i.BeforeDeclaration?this.stateBeforeDeclaration(d):this.state===i.BeforeComment?this.stateBeforeComment(d):this.state===i.InProcessingInstruction?this.stateInProcessingInstruction(d):this.state===i.InNamedEntity?this.stateInNamedEntity(d):this.state===i.BeforeEntity?this.stateBeforeEntity(d):this.state===i.InHexEntity?this.stateInHexEntity(d):this.state===i.InNumericEntity?this.stateInNumericEntity(d):this.stateBeforeNumericEntity(d),this.index++}this.cleanup()},h.prototype.finish=function(){this.state===i.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},h.prototype.handleTrailingData=function(){var d=this.buffer.length+this.offset;this.state===i.InCommentLike?this.currentSequence===l.CdataEnd?this.cbs.oncdata(this.sectionStart,d,0):this.cbs.oncomment(this.sectionStart,d,0):this.state===i.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InTagName||this.state===i.BeforeAttributeName||this.state===i.BeforeAttributeValue||this.state===i.AfterAttributeName||this.state===i.InAttributeName||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueDq||this.state===i.InAttributeValueNq||this.state===i.InClosingTagName||this.cbs.ontext(this.sectionStart,d)},h.prototype.emitPartial=function(d,p){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribdata(d,p):this.cbs.ontext(d,p)},h.prototype.emitCodePoint=function(d){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribentity(d):this.cbs.ontextentity(d)},h}();e.default=f})(aA);var she=Pe&&Pe.__createBinding||(Object.create?function(e,t,n,i){i===void 0&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){i===void 0&&(i=n),e[i]=t[n]}),lhe=Pe&&Pe.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),uhe=Pe&&Pe.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)n!=="default"&&Object.prototype.hasOwnProperty.call(e,n)&&she(t,e,n);return lhe(t,e),t};Object.defineProperty(sv,"__esModule",{value:!0}),sv.Parser=void 0;var lv=uhe(aA),w6=yl,wc=new Set(["input","option","optgroup","select","button","datalist","textarea"]),dn=new Set(["p"]),I6=new Set(["thead","tbody"]),k6=new Set(["dd","dt"]),O6=new Set(["rt","rp"]),che=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",dn],["h1",dn],["h2",dn],["h3",dn],["h4",dn],["h5",dn],["h6",dn],["select",wc],["input",wc],["output",wc],["button",wc],["datalist",wc],["textarea",wc],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",k6],["dt",k6],["address",dn],["article",dn],["aside",dn],["blockquote",dn],["details",dn],["div",dn],["dl",dn],["fieldset",dn],["figcaption",dn],["figure",dn],["footer",dn],["form",dn],["header",dn],["hr",dn],["main",dn],["nav",dn],["ol",dn],["pre",dn],["section",dn],["table",dn],["ul",dn],["rt",O6],["rp",O6],["tbody",I6],["tfoot",I6]]),hhe=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),x6=new Set(["math","svg"]),P6=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),fhe=/\s|\//,dhe=function(){function e(t,n){n===void 0&&(n={});var i,r,a,o,s;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t??{},this.lowerCaseTagNames=(i=n.lowerCaseTags)!==null&&i!==void 0?i:!n.xmlMode,this.lowerCaseAttributeNames=(r=n.lowerCaseAttributeNames)!==null&&r!==void 0?r:!n.xmlMode,this.tokenizer=new((a=n.Tokenizer)!==null&&a!==void 0?a:lv.default)(this.options,this),(s=(o=this.cbs).onparserinit)===null||s===void 0||s.call(o,this)}return e.prototype.ontext=function(t,n){var i,r,a=this.getSlice(t,n);this.endIndex=n-1,(r=(i=this.cbs).ontext)===null||r===void 0||r.call(i,a),this.startIndex=n},e.prototype.ontextentity=function(t){var n,i,r=this.tokenizer.getSectionStart();this.endIndex=r-1,(i=(n=this.cbs).ontext)===null||i===void 0||i.call(n,(0,w6.fromCodePoint)(t)),this.startIndex=r},e.prototype.isVoidElement=function(t){return!this.options.xmlMode&&hhe.has(t)},e.prototype.onopentagname=function(t,n){this.endIndex=n;var i=this.getSlice(t,n);this.lowerCaseTagNames&&(i=i.toLowerCase()),this.emitOpenTag(i)},e.prototype.emitOpenTag=function(t){var n,i,r,a;this.openTagStart=this.startIndex,this.tagname=t;var o=!this.options.xmlMode&&che.get(t);if(o)for(;this.stack.length>0&&o.has(this.stack[this.stack.length-1]);){var s=this.stack.pop();(i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,s,!0)}this.isVoidElement(t)||(this.stack.push(t),x6.has(t)?this.foreignContext.push(!0):P6.has(t)&&this.foreignContext.push(!1)),(a=(r=this.cbs).onopentagname)===null||a===void 0||a.call(r,t),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(t){var n,i;this.startIndex=this.openTagStart,this.attribs&&((i=(n=this.cbs).onopentag)===null||i===void 0||i.call(n,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1},e.prototype.onclosetag=function(t,n){var i,r,a,o,s,u;this.endIndex=n;var c=this.getSlice(t,n);if(this.lowerCaseTagNames&&(c=c.toLowerCase()),(x6.has(c)||P6.has(c))&&this.foreignContext.pop(),this.isVoidElement(c))!this.options.xmlMode&&c==="br"&&((r=(i=this.cbs).onopentagname)===null||r===void 0||r.call(i,"br"),(o=(a=this.cbs).onopentag)===null||o===void 0||o.call(a,"br",{},!0),(u=(s=this.cbs).onclosetag)===null||u===void 0||u.call(s,"br",!1));else{var l=this.stack.lastIndexOf(c);if(l!==-1)if(this.cbs.onclosetag)for(var f=this.stack.length-l;f--;)this.cbs.onclosetag(this.stack.pop(),f!==0);else this.stack.length=l;else!this.options.xmlMode&&c==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1},e.prototype.onselfclosingtag=function(t){this.endIndex=t,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)},e.prototype.closeCurrentTag=function(t){var n,i,r=this.tagname;this.endOpenTag(t),this.stack[this.stack.length-1]===r&&((i=(n=this.cbs).onclosetag)===null||i===void 0||i.call(n,r,!t),this.stack.pop())},e.prototype.onattribname=function(t,n){this.startIndex=t;var i=this.getSlice(t,n);this.attribname=this.lowerCaseAttributeNames?i.toLowerCase():i},e.prototype.onattribdata=function(t,n){this.attribvalue+=this.getSlice(t,n)},e.prototype.onattribentity=function(t){this.attribvalue+=(0,w6.fromCodePoint)(t)},e.prototype.onattribend=function(t,n){var i,r;this.endIndex=n,(r=(i=this.cbs).onattribute)===null||r===void 0||r.call(i,this.attribname,this.attribvalue,t===lv.QuoteType.Double?'"':t===lv.QuoteType.Single?"'":t===lv.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(t){var n=t.search(fhe),i=n<0?t:t.substr(0,n);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i},e.prototype.ondeclaration=function(t,n){this.endIndex=n;var i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){var r=this.getInstructionName(i);this.cbs.onprocessinginstruction("!".concat(r),"!".concat(i))}this.startIndex=n+1},e.prototype.onprocessinginstruction=function(t,n){this.endIndex=n;var i=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){var r=this.getInstructionName(i);this.cbs.onprocessinginstruction("?".concat(r),"?".concat(i))}this.startIndex=n+1},e.prototype.oncomment=function(t,n,i){var r,a,o,s;this.endIndex=n,(a=(r=this.cbs).oncomment)===null||a===void 0||a.call(r,this.getSlice(t,n-i)),(s=(o=this.cbs).oncommentend)===null||s===void 0||s.call(o),this.startIndex=n+1},e.prototype.oncdata=function(t,n,i){var r,a,o,s,u,c,l,f,h,d;this.endIndex=n;var p=this.getSlice(t,n-i);this.options.xmlMode||this.options.recognizeCDATA?((a=(r=this.cbs).oncdatastart)===null||a===void 0||a.call(r),(s=(o=this.cbs).ontext)===null||s===void 0||s.call(o,p),(c=(u=this.cbs).oncdataend)===null||c===void 0||c.call(u)):((f=(l=this.cbs).oncomment)===null||f===void 0||f.call(l,"[CDATA[".concat(p,"]]")),(d=(h=this.cbs).oncommentend)===null||d===void 0||d.call(h)),this.startIndex=n+1},e.prototype.onend=function(){var t,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i],!0));}(n=(t=this.cbs).onend)===null||n===void 0||n.call(t)},e.prototype.reset=function(){var t,n,i,r;(n=(t=this.cbs).onreset)===null||n===void 0||n.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(r=(i=this.cbs).onparserinit)===null||r===void 0||r.call(i,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(t){this.reset(),this.end(t)},e.prototype.getSlice=function(t,n){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var i=this.buffers[0].slice(t-this.bufferOffset,n-this.bufferOffset);n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),i+=this.buffers[0].slice(0,n-this.bufferOffset);return i},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)},e.prototype.end=function(t){var n,i;if(this.ended){(i=(n=this.cbs).onerror)===null||i===void 0||i.call(n,Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(t){this.write(t)},e.prototype.done=function(t){this.end(t)},e}();sv.Parser=dhe,function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(p,m,g,v){v===void 0&&(v=g);var E=Object.getOwnPropertyDescriptor(m,g);(!E||("get"in E?!m.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return m[g]}}),Object.defineProperty(p,v,E)}:function(p,m,g,v){v===void 0&&(v=g),p[v]=m[g]}),n=Pe&&Pe.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),i=Pe&&Pe.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var g in p)g!=="default"&&Object.prototype.hasOwnProperty.call(p,g)&&t(m,p,g);return n(m,p),m},r=Pe&&Pe.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultHandler=e.DomUtils=e.parseFeed=e.getFeed=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DomHandler=e.Parser=void 0;var a=sv;Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return a.Parser}});var o=Vr;Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return o.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return o.DomHandler}});function s(p,m){var g=new o.DomHandler(void 0,m);return new a.Parser(g,m).end(p),g.root}e.parseDocument=s;function u(p,m){return s(p,m).children}e.parseDOM=u;function c(p,m,g){var v=new o.DomHandler(p,m,g);return new a.Parser(v,m)}e.createDomStream=c;var l=aA;Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return r(l).default}});var f=i(tc);e.ElementType=f;var h=$a;Object.defineProperty(e,"getFeed",{enumerable:!0,get:function(){return h.getFeed}});function d(p,m){return m===void 0&&(m={xmlMode:!0}),(0,h.getFeed)(u(p,m))}e.parseFeed=d,e.DomUtils=i($a)}(D6),function(e){var t=Pe&&Pe.__createBinding||(Object.create?function(p,m,g,v){v===void 0&&(v=g);var E=Object.getOwnPropertyDescriptor(m,g);(!E||("get"in E?!m.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return m[g]}}),Object.defineProperty(p,v,E)}:function(p,m,g,v){v===void 0&&(v=g),p[v]=m[g]}),n=Pe&&Pe.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),i=Pe&&Pe.__exportStar||function(p,m){for(var g in p)g!=="default"&&!Object.prototype.hasOwnProperty.call(m,g)&&t(m,p,g)},r=Pe&&Pe.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var g in p)g!=="default"&&Object.prototype.hasOwnProperty.call(p,g)&&t(m,p,g);return n(m,p),m},a=Pe&&Pe.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(e,"__esModule",{value:!0}),e.root=e.parseHTML=e.merge=e.contains=e.text=e.xml=e.html=e.load=void 0,i(BL,e);var o=c0,s=Cl,u=yc,c=a(nc),l=D6,f=(0,s.getParse)(function(p,m,g,v){return m.xmlMode||m._useHtmlParser2?(0,l.parseDocument)(p,m):(0,u.parseWithParse5)(p,m,g,v)});e.load=(0,o.getLoad)(f,function(p,m){return m.xmlMode||m._useHtmlParser2?(0,c.default)(p,m):(0,u.renderWithParse5)(p)}),e.default=(0,e.load)([]);var h=Gn;Object.defineProperty(e,"html",{enumerable:!0,get:function(){return h.html}}),Object.defineProperty(e,"xml",{enumerable:!0,get:function(){return h.xml}}),Object.defineProperty(e,"text",{enumerable:!0,get:function(){return h.text}});var d=r(Gn);e.contains=d.contains,e.merge=d.merge,e.parseHTML=d.parseHTML,e.root=d.root}(LL);var Ol={},uv={},phe=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function mhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cv(e,t){return new Error(String(e)+" is a required method of "+String(t)+", but was not implemented.")}var R6=function(){function e(){mhe(this,e),this.options={}}return phe(e,[{key:"createRenderer",value:function(){function t(n){throw cv("createRenderer","EnzymeAdapter")}return t}()},{key:"nodeToElement",value:function(){function t(n){throw cv("nodeToElement","EnzymeAdapter")}return t}()},{key:"matchesElementType",value:function(){function t(n,i){if(!n)return n;var r=n.type;return r===i}return t}()},{key:"isValidElement",value:function(){function t(n){throw cv("isValidElement","EnzymeAdapter")}return t}()},{key:"createElement",value:function(){function t(n,i){throw cv("createElement","EnzymeAdapter")}return t}()},{key:"invokeSetStateCallback",value:function(){function t(n,i){i.call(n)}return t}()}]),e}();R6.MODES={STRING:"string",MOUNT:"mount",SHALLOW:"shallow"};var N6=R6;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var t=N6,n=i(t);function i(a){return a&&a.__esModule?a:{default:a}}function r(a){if(!a)throw new Error(`
      Enzyme Internal Error: Enzyme expects an adapter to be configured, but found none.
      To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
      before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
      corresponding to the library currently being tested. For example:

      import Adapter from 'enzyme-adapter-react-15';

      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
    `);if(typeof a=="function")throw Object.getPrototypeOf(a)===n.default?new Error(`
        Enzyme Internal Error: Enzyme expects an adapter instance to be configured -
        you provided an adapter *constructor*.
        To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
        before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
        corresponding to the library currently being tested. For example:

        import Adapter from 'enzyme-adapter-react-15';

        To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
      `):new Error(`
      Enzyme Internal Error: Enzyme expects an adapter to be configured -
      an enzyme adapter must be an object instance; you provided a function.
      To configure an adapter, you should call \`Enzyme.configure({ adapter: new Adapter() })\`
      before using any of Enzyme's top level APIs, where \`Adapter\` is the adapter
      corresponding to the library currently being tested. For example:

      import Adapter from 'enzyme-adapter-react-15';

      To find out more about this, see https://airbnb.io/enzyme/docs/installation/index.html
    `);if(!(a instanceof n.default))throw new Error("Enzyme Internal Error: configured enzyme adapter did not inherit from the EnzymeAdapter base class")}})(uv),Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.get=The,Ol.merge=B6,Ol.reset=Ehe;var ghe=Xu,M6=L6(ghe),vhe=uv,yhe=L6(vhe);function L6(e){return e&&e.__esModule?e:{default:e}}var oA={};function The(){return(0,M6.default)({},oA)}function B6(e){e.adapter&&(0,yhe.default)(e.adapter),(0,M6.default)(oA,e)}function Ehe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oA={},B6(e)}var nr={},sA={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(i){function r(a,o){return i.apply(this,arguments)}return r.toString=function(){return i.toString()},r}(function(i,r){return typeof i!="object"||i===null||typeof r!="object"||r===null?!1:Object.keys(r).every(function(a){if(!i.propertyIsEnumerable(a))return!1;var o=r[a],s=i[a];return!(typeof o=="object"&&o!==null?!n(s,o):s!==o)})});t.default=n,e.exports=t.default})(sA,sA.exports);var hs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var t=uv,n=r(t),i=Ol;function r(o){return o&&o.__esModule?o:{default:o}}function a(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(o.adapter)return(0,n.default)(o.adapter),o.adapter;var s=(0,i.get)(),u=s.adapter;return(0,n.default)(u),u}})(hs),Object.defineProperty(nr,"__esModule",{value:!0});var bhe=function(){function e(t,n){var i=[],r=!0,a=!1,o=void 0;try{for(var s=t[Symbol.iterator](),u;!(r=(u=s.next()).done)&&(i.push(u.value),!(n&&i.length===n));r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return i}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();nr.propsOfNode=hv,nr.childrenOfNode=Ic,nr.hasClassName=Bhe,nr.treeForEach=lA,nr.treeFilter=uA,nr.findParentNode=Fhe,nr.pathToNode=H6,nr.parentsOfNode=$he,nr.nodeHasId=Uhe,nr.nodeMatchesObjectProps=Vhe,nr.getTextFromNode=$6,nr.getTextFromHostNodes=U6,nr.getHTMLFromHostNodes=G6;var _he=Xu,She=xl(_he),Ahe=Vf,F6=xl(Ahe),Che=vL,Dhe=xl(Che),whe=sA.exports,Ihe=xl(whe),khe=lS,Ohe=xl(khe),xhe=z_,Phe=xl(xhe),Rhe=hs,Nhe=xl(Rhe);function xl(e){return e&&e.__esModule?e:{default:e}}function Mhe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lhe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}function hv(e){return e&&e.props||{}}function Ic(e){if(!e)return[];var t=(0,Nhe.default)(),n=t.isFragment&&typeof t.isFragment=="function",i=Array.isArray(e.rendered)?(0,F6.default)(e.rendered,1):[e.rendered];return n?(0,F6.default)(i.map(function(r){return t.isFragment(r)?Ic(r):r}),1):i}function Bhe(e,t){var n=hv(e).className||"";return n=String(n).replace(/\s/g," "),(0,Phe.default)(t)?t.test(n):(" "+String(n)+" ").indexOf(" "+String(t)+" ")>-1}function lA(e,t){e&&t(e),Ic(e).forEach(function(n){return lA(n,t)})}function uA(e,t){var n=[];return lA(e,function(i){t(i)&&n.push(i)}),n}function Fhe(e,t){var n=uA(e,function(i){return i.rendered?Ic(i).indexOf(t)!==-1:!1});return n[0]||null}function Hhe(e,t){return e.filter(function(n){return uA(n,t).length!==0})}function H6(e,t){for(var n=[t],i=[],r=function(u){return e===u};n.length;){var a=n.pop(),o=Ic(a);if(a===e)return Hhe(i,r);i.push(a),o.length===0&&i.pop(),n.push.apply(n,Lhe(o))}return null}function $he(e,t){return(H6(e,t)||[]).reverse()}function Uhe(e,t){return hv(e).id===t}var Ghe={};function zhe(e){return typeof e<"u"?e:Ghe}function jhe(e){return(0,Dhe.default)(e).reduce(function(t,n){var i=bhe(n,2),r=i[0],a=i[1];return(0,She.default)({},t,Mhe({},r,zhe(a)))},{})}function Vhe(e,t){return(0,Ihe.default)(hv(e),jhe(t))}function Yhe(e){return typeof e=="string"?String(e||""):e&&e.textContent||""}function cA(e,t){var n=t.getCustom,i=t.handleHostNodes,r=t.recurse,a=t.nullRenderReturnsNull,o=a===void 0?!1:a;return e==null?"":typeof e=="string"||typeof e=="number"?String(e):n&&e.type&&typeof e.type=="function"?n(e):i&&e.nodeType==="host"?i(e):e.rendered==null&&o?null:Ic(e).map(r).join("")}function $6(e){return cA(e,{recurse:$6,getCustom:function(){function t(n){var i=n.type;return"<"+String(i.displayName||(0,Ohe.default)(i))+" />"}return t}()})}function U6(e,t){return cA(e,{recurse:function(){function n(i){return U6(i,t)}return n}(),handleHostNodes:function(){function n(i){var r=[].concat(t.nodeToHostNode(i,!0));return r.map(Yhe).join("")}return n}()})}function Whe(e){return e==null?null:e.outerHTML.replace(/\sdata-(reactid|reactroot)+="([^"]*)+"/g,"")}function G6(e,t){return cA(e,{recurse:function(){function n(i){return G6(i,t)}return n}(),handleHostNodes:function(){function n(i){var r=[].concat(t.nodeToHostNode(i,!0));return r.map(Whe).join("")}return n}(),nullRenderReturnsNull:!0})}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.shallowEqual=e.ITERATOR_SYMBOL=void 0;var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(I){return typeof I}:function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},n=function(){function I(_,C){var F=[],te=!0,le=!1,ve=void 0;try{for(var Ue=_[Symbol.iterator](),We;!(te=(We=Ue.next()).done)&&(F.push(We.value),!(C&&F.length===C));te=!0);}catch(nt){le=!0,ve=nt}finally{try{!te&&Ue.return&&Ue.return()}finally{if(le)throw ve}}return F}return function(_,C){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return I(_,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.getAdapter=X,e.makeOptions=se,e.isCustomComponent=fe,e.isCustomComponentElement=Z,e.propsOfNode=he,e.typeOfNode=j,e.nodeHasType=H,e.nodeMatches=Ee,e.nodeEqual=xe,e.containsChildrenSubArray=He,e.childrenToSimplifiedArray=je,e.isReactElementAlike=st,e.withSetStateAllowed=qe,e.AND=bt,e.displayNameOfNode=yt,e.sym=Bt,e.privateSet=On,e.cloneElement=gt,e.spyMethod=Oe;var i=u0.exports;Object.defineProperty(e,"shallowEqual",{enumerable:!0,get:function(){function I(){return $(i).default}return I}()}),e.isEmptyValue=ne,e.renderedDive=oe,e.loadCheerioRoot=Te;var r=Xu,a=$(r),o=Du.exports,s=$(o),u=sS,c=$(u),l=vL,f=$(l),h=lS,d=$(h),p=zr,m=$(p),g=Vf,v=$(g),E=ure,y=$(E),T=LL,b=$(T),S=as,w=Ol,D=nr,R=hs,M=$(R),k=uv,L=$(k);function $(I){return I&&I.__esModule?I:{default:I}}function P(I,_,C){return _ in I?Object.defineProperty(I,_,{value:C,enumerable:!0,configurable:!0,writable:!0}):I[_]=C,I}function B(I,_){var C={};for(var F in I)_.indexOf(F)>=0||!Object.prototype.hasOwnProperty.call(I,F)||(C[F]=I[F]);return C}e.ITERATOR_SYMBOL=typeof Symbol=="function"&&Symbol.iterator;function X(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return console.warn("getAdapter from Utils is deprecated; please use ./getAdapter instead"),(0,M.default)(I)}function ee(I,_){if(I&&_&&I!==_)throw new TypeError("If both the `attachTo` and `hydrateIn` options are provided, they must be === (for backwards compatibility)")}function se(I){var _=(0,w.get)(),C=_.attachTo,F=_.hydrateIn,te=B(_,["attachTo","hydrateIn"]);ee(C,F);var le=I.attachTo,ve=I.hydrateIn;ee(le,ve);var Ue=ve||F||C||le||void 0,We=ve||F||void 0,nt=(0,a.default)({},Ue&&{attachTo:Ue},We&&{hydrateIn:We});return(0,a.default)({},te,I,nt)}function fe(I,_){return(0,L.default)(_),_.isCustomComponent?!!_.isCustomComponent(I):typeof I=="function"}function Z(I,_){return _.isCustomComponentElement?!!_.isCustomComponentElement(I):!!I&&_.isValidElement(I)&&typeof I.type=="function"}function he(I){return(0,f.default)(I&&I.props||{}).filter(function(_){var C=n(_,2),F=C[1];return typeof F<"u"}).reduce(function(_,C){var F=n(C,2),te=F[0],le=F[1];return(0,a.default)(_,P({},te,le))},{})}function j(I){return I?I.type:null}function H(I,_){if(!_||!I)return!1;var C=(0,M.default)();if(C.displayNameOfNode){var F=C.displayNameOfNode(I);return F===_}return I.type?typeof I.type=="string"?I.type===_:(typeof I.type=="function"?(0,d.default)(I.type)===_:I.type.name===_)||I.type.displayName===_:!1}function G(I,_,C,F){var te=F?Ee:xe;if(I===_)return!0;if(!Array.isArray(I)&&!Array.isArray(_))return te(I,_,C);var le=(0,v.default)(I,1/0),ve=(0,v.default)(_,1/0);if(le.length!==ve.length)return!1;if(le.length===0&&ve.length===0)return!0;for(var Ue=0;Ue<le.length;Ue+=1)if(!te(le[Ue],ve[Ue],C))return!1;return!0}function K(I,_,C){return G(I,_,C,!0)}function ae(I,_,C){return G(I,_,C,!1)}function pe(I,_){var C=n(_,2),F=C[0],te=C[1],le=te==null?{}:P({},F,te);return(0,a.default)({},I,le)}function we(I,_,C,F){if(I===_)return!0;if(!I||!_||I.type!==_.type)return!1;var te=he(I),le=he(_);F&&(te=(0,f.default)(te).reduce(pe,{}),le=(0,f.default)(le).reduce(pe,{}));for(var ve=Object.keys(te),Ue=0;Ue<ve.length;Ue+=1){var We=ve[Ue];if(We!=="children")if(We in le){if(le[We]!==te[We])if(t(le[We])===t(te[We])&&t(te[We])==="object"){if(!(0,s.default)(te[We],le[We]))return!1}else return!1}else return!1}var nt="children"in te,Qe="children"in le,ot=F?K:ae;if((nt||Qe)&&!ot(je(te.children,F),je(le.children,F),C))return!1;if(!dt(I)){var xn=Object.keys(le);return C(ve.length-nt,xn.length-Qe)}return!1}function Ee(I,_){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.default;return we(I,_,C,!0)}function xe(I,_){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.default;return we(I,_,C,!1)}function He(I,_,C){var F=(0,D.childrenOfNode)(_),te=function(ve,Ue){return ke(I,F.slice(Ue,Ue+C.length),C)};return F.some(te)}function ke(I,_,C){return _.length===C.length&&_.every(function(F,te){return I(F,C[te])})}function Ye(I){var _=[],C=function(te){te===null||te===!1||typeof te>"u"||_.push(te)};return Array.isArray(I)?I.forEach(C):C(I),_}function je(I){for(var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=Ye(I),F=[],te=0;te<C.length;te+=1){var le=C[te],ve=F.pop();typeof ve>"u"?F.push(le):dt(le)&&dt(ve)?F.push(ve+le):(F.push(ve),F.push(le))}return _?F.map(function(Ue){return typeof Ue=="string"?(0,y.default)(Ue):Ue}):F}function dt(I){return typeof I=="string"||typeof I=="number"}function st(I,_){return _.isValidElement(I)||dt(I)||Array.isArray(I)}function qe(I){var _=!1;typeof globalThis.document>"u"&&(_=!0,globalThis.document={}),I(),_&&(globalThis.document=void 0,delete globalThis.document)}function bt(I){var _=I.slice().reverse();return function(C){return _.every(function(F){return F(C)})}}function yt(I){if(!I)return null;var _=I.type;return _?_.displayName||(typeof _=="function"?(0,d.default)(_):_.name||_):null}function Bt(I){return typeof Symbol=="function"?Symbol.for("enzyme."+String(I)):I}function On(I,_,C){Object.defineProperty(I,_,{value:C,enumerable:!1,writable:!0})}function gt(I,_,C){return I.createElement(_.type,(0,a.default)({},_.props,C))}function Oe(I,_){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},F=void 0,te=I[_],le=(0,m.default)(I,_),ve=void 0;return le&&(ve=Object.getOwnPropertyDescriptor(I,_)),Object.defineProperty(I,_,{configurable:!0,enumerable:!ve||!!ve.enumerable,value:C(te)||function(){function Ue(){for(var We=arguments.length,nt=Array(We),Qe=0;Qe<We;Qe++)nt[Qe]=arguments[Qe];var ot=te.apply(this,nt);return F=ot,ot}return Ue}()}),{restore:function(){function Ue(){le?ve?Object.defineProperty(I,_,ve):I[_]=te:delete I[_]}return Ue}(),getLastReturnValue:function(){function Ue(){return F}return Ue}()}}function ne(I){return I===null||I===!1}function oe(I){return ne(I)?!0:[].concat(I).every(function(_){if(_){var C=_.rendered;return ne(C)||oe(C)}return ne(_)})}function Te(I){return I?(0,S.isHtml)(I)?b.default.load("")(I):b.default.load(I,null,!1).root():b.default.root()}})(Yf);var fs={},qhe=1/0,Xhe="[object Symbol]",z6=/[&<>"'`]/g,Khe=RegExp(z6.source),Zhe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Qhe=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Jhe=typeof self=="object"&&self&&self.Object===Object&&self,efe=Qhe||Jhe||Function("return this")();function tfe(e){return function(t){return e?.[t]}}var nfe=tfe(Zhe),rfe=Object.prototype,ife=rfe.toString,j6=efe.Symbol,V6=j6?j6.prototype:void 0,Y6=V6?V6.toString:void 0;function afe(e){if(typeof e=="string")return e;if(sfe(e))return Y6?Y6.call(e):"";var t=e+"";return t=="0"&&1/e==-qhe?"-0":t}function ofe(e){return!!e&&typeof e=="object"}function sfe(e){return typeof e=="symbol"||ofe(e)&&ife.call(e)==Xhe}function lfe(e){return e==null?"":afe(e)}function ufe(e){return e=lfe(e),e&&Khe.test(e)?e.replace(z6,nfe):e}var cfe=ufe,hfe=String.prototype.valueOf,ffe=function(t){try{return hfe.call(t),!0}catch{return!1}},dfe=Object.prototype.toString,pfe="[object String]",mfe=jf(),W6=function(t){return typeof t=="string"?!0:typeof t!="object"?!1:mfe?ffe(t):dfe.call(t)===pfe},gfe=Number.prototype.toString,vfe=function(t){try{return gfe.call(t),!0}catch{return!1}},yfe=Object.prototype.toString,Tfe="[object Number]",Efe=jf(),bfe=function(t){return typeof t=="number"?!0:typeof t!="object"?!1:Efe?vfe(t):yfe.call(t)===Tfe},q6=Pr,_fe=q6("Boolean.prototype.toString"),Sfe=q6("Object.prototype.toString"),Afe=function(t){try{return _fe(t),!0}catch{return!1}},Cfe="[object Boolean]",Dfe=jf(),wfe=function(t){return typeof t=="boolean"?!0:t===null||typeof t!="object"?!1:Dfe&&Symbol.toStringTag in t?Afe(t):Sfe(t)===Cfe};Object.defineProperty(fs,"__esModule",{value:!0});var X6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};fs.typeName=Q6,fs.spaces=J6,fs.indent=eF,fs.debugNode=fA,fs.debugNodes=Wfe;var Ife=cfe,kfe=Po(Ife),Ofe=lS,K6=Po(Ofe),xfe=W6,Pfe=Po(xfe),Rfe=bfe,Nfe=Po(Rfe),Mfe=s0,Lfe=Po(Mfe),Bfe=wfe,Ffe=Po(Bfe),Hfe=MN,kc=Po(Hfe),$fe=zr,Oc=Po($fe),Z6=nr,Ufe=hs,hA=Po(Ufe);function Po(e){return e&&e.__esModule?e:{default:e}}var Gfe=Function.bind.call(Function.call,Boolean.prototype.valueOf);function Q6(e){var t=(0,hA.default)();return t.displayNameOfNode?(0,hA.default)().displayNameOfNode(e)||"Component":typeof e.type=="function"?e.type.displayName||(0,K6.default)(e.type)||"Component":e.type}function J6(e){return Array(e+1).join(" ")}function eF(e,t){return t.split(`
`).map(function(n){return""+String(J6(e))+String(n)}).join(`
`)}function zfe(e,t){return(0,Pfe.default)(e)?(0,kc.default)(String(e),{quoteStyle:"double"}):(0,Nfe.default)(e)?"{"+String((0,kc.default)(Number(e)))+"}":(0,Ffe.default)(e)?"{"+String((0,kc.default)(Gfe(e)))+"}":(0,Lfe.default)(e)?"{"+String((0,kc.default)(e))+"}":(typeof e>"u"?"undefined":X6(e))==="object"?t.verbose?"{"+String((0,kc.default)(e))+"}":"{{...}}":"{["+(typeof e>"u"?"undefined":X6(e))+"]}"}function jfe(e,t){var n=(0,Z6.propsOfNode)(e),i=Object.keys(n).filter(function(r){return r!=="children"});return i.map(function(r){return String(r)+"="+String(zfe(n[r],t))}).join(" ")}function Vfe(e,t){return e.length?`
`+String(e.map(function(n){return eF(t,n)}).join(`
`))+`
`:""}function Yfe(e){return(0,Oc.default)(e,"nodeType")&&typeof e.nodeType=="string"&&(0,Oc.default)(e,"type")&&(0,Oc.default)(e,"key")&&(0,Oc.default)(e,"ref")&&(0,Oc.default)(e,"instance")&&(0,Oc.default)(e,"rendered")}function fA(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string"||typeof e=="number")return(0,kfe.default)(e);if(typeof e=="function"){var i=(0,K6.default)(e);return"[function"+(i?" "+String(i):"")+"]"}if(!e)return"";var r=(0,hA.default)();if(!r.isValidElement(e)&&!Yfe(e))return"{"+String((0,kc.default)(e))+"}";var a=(0,Z6.childrenOfNode)(e).map(function(h){return fA(h,t,n)}).filter(Boolean),o=Q6(e),s=n.ignoreProps?"":jfe(e,n),u=s?" ":"",c=a.length?">":" ",l=Vfe(a,t),f=a.length?"</"+String(o)+">":"/>";return"<"+String(o)+u+String(s)+c+String(l)+f}function Wfe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.map(function(n){return fA(n,void 0,t)}).join(`


`)}var xc={},Pc={},dA={};Object.defineProperty(dA,"__esModule",{value:!0});var tF=function(t){return JSON.stringify(t)},qfe=function(t){var n=t.body,i=[],r=!0,a=!1,o=void 0;try{for(var s=n[Symbol.iterator](),u;!(r=(u=s.next()).done);r=!0){var c=u.value,l=void 0;if(c.type==="universalSelector")l="*";else if(c.type==="typeSelector")l=c.name;else if(c.type==="idSelector")l="#"+c.name;else if(c.type==="classSelector")l="."+c.name;else if(c.type==="attributePresenceSelector")l="["+c.name+"]";else if(c.type==="attributeValueSelector")l="["+c.name+c.operator+tF(c.value)+"]";else if(c.type==="pseudoClassSelector")l=":"+c.name,c.parameters.length&&(l+="("+c.parameters.map(tF).join(", ")+")");else if(c.type==="pseudoElementSelector")l="::"+c.name;else throw new Error("Unknown token.");i.push(l)}}catch(f){a=!0,o=f}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return i.join("")};dA.default=function(){var e=function(n){var i=[],r=!0,a=!1,o=void 0;try{for(var s=n[Symbol.iterator](),u;!(r=(u=s.next()).done);r=!0){var c=u.value;if(c.type==="selector")i.push(qfe(c));else if(c.type==="descendantCombinator")i.push(" ");else if(c.type==="childCombinator")i.push(" > ");else if(c.type==="adjacentSiblingCombinator")i.push(" + ");else if(c.type==="generalSiblingCombinator")i.push(" ~ ");else throw new Error("Unknown token.")}}catch(l){a=!0,o=l}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return i.join("")};return{generate:e}};var pA={},nF={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.nearley=n()})(Pe,function(){function t(c,l,f){return this.id=++t.highestId,this.name=c,this.symbols=l,this.postprocess=f,this}t.highestId=0,t.prototype.toString=function(c){var l=typeof c>"u"?this.symbols.map(u).join(" "):this.symbols.slice(0,c).map(u).join(" ")+" \u25CF "+this.symbols.slice(c).map(u).join(" ");return this.name+" \u2192 "+l};function n(c,l,f,h){this.rule=c,this.dot=l,this.reference=f,this.data=[],this.wantedBy=h,this.isComplete=this.dot===c.symbols.length}n.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},n.prototype.nextState=function(c){var l=new n(this.rule,this.dot+1,this.reference,this.wantedBy);return l.left=this,l.right=c,l.isComplete&&(l.data=l.build(),l.right=void 0),l},n.prototype.build=function(){var c=[],l=this;do c.push(l.right.data),l=l.left;while(l.left);return c.reverse(),c},n.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,o.fail))};function i(c,l){this.grammar=c,this.index=l,this.states=[],this.wants={},this.scannable=[],this.completed={}}i.prototype.process=function(c){for(var l=this.states,f=this.wants,h=this.completed,d=0;d<l.length;d++){var p=l[d];if(p.isComplete){if(p.finish(),p.data!==o.fail){for(var m=p.wantedBy,g=m.length;g--;){var v=m[g];this.complete(v,p)}if(p.reference===this.index){var E=p.rule.name;(this.completed[E]=this.completed[E]||[]).push(p)}}}else{var E=p.rule.symbols[p.dot];if(typeof E!="string"){this.scannable.push(p);continue}if(f[E]){if(f[E].push(p),h.hasOwnProperty(E))for(var y=h[E],g=0;g<y.length;g++){var T=y[g];this.complete(p,T)}}else f[E]=[p],this.predict(E)}}},i.prototype.predict=function(c){for(var l=this.grammar.byName[c]||[],f=0;f<l.length;f++){var h=l[f],d=this.wants[c],p=new n(h,0,this.index,d);this.states.push(p)}},i.prototype.complete=function(c,l){var f=c.nextState(l);this.states.push(f)};function r(c,l){this.rules=c,this.start=l||this.rules[0].name;var f=this.byName={};this.rules.forEach(function(h){f.hasOwnProperty(h.name)||(f[h.name]=[]),f[h.name].push(h)})}r.fromCompiled=function(h,l){var f=h.Lexer;h.ParserStart&&(l=h.ParserStart,h=h.ParserRules);var h=h.map(function(p){return new t(p.name,p.symbols,p.postprocess)}),d=new r(h,l);return d.lexer=f,d};function a(){this.reset("")}a.prototype.reset=function(c,l){this.buffer=c,this.index=0,this.line=l?l.line:1,this.lastLineBreak=l?-l.col:0},a.prototype.next=function(){if(this.index<this.buffer.length){var c=this.buffer[this.index++];return c===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:c}}},a.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},a.prototype.formatError=function(c,l){var f=this.buffer;if(typeof f=="string"){var h=f.split(`
`).slice(Math.max(0,this.line-5),this.line),d=f.indexOf(`
`,this.index);d===-1&&(d=f.length);var p=this.index-this.lastLineBreak,m=String(this.line).length;return l+=" at line "+this.line+" col "+p+`:

`,l+=h.map(function(v,E){return g(this.line-h.length+E+1,m)+" "+v},this).join(`
`),l+=`
`+g("",m+p)+`^
`,l}else return l+" at index "+(this.index-1);function g(v,E){var y=String(v);return Array(E-y.length+1).join(" ")+y}};function o(c,l,f){if(c instanceof r)var h=c,f=l;else var h=r.fromCompiled(c,l);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new a};for(var d in f||{})this.options[d]=f[d];this.lexer=this.options.lexer,this.lexerState=void 0;var p=new i(h,0);this.table=[p],p.wants[h.start]=[],p.predict(h.start),p.process(),this.current=0}o.fail={},o.prototype.feed=function(c){var l=this.lexer;l.reset(c,this.lexerState);for(var f;;){try{if(f=l.next(),!f)break}catch(w){var m=new i(this.grammar,this.current+1);this.table.push(m);var h=new Error(this.reportLexerError(w));throw h.offset=this.current,h.token=w.token,h}var d=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var p=this.current+1,m=new i(this.grammar,p);this.table.push(m);for(var g=f.text!==void 0?f.text:f.value,v=l.constructor===a?f.value:f,E=d.scannable,y=E.length;y--;){var T=E[y],b=T.rule.symbols[T.dot];if(b.test?b.test(v):b.type?b.type===f.type:b.literal===g){var S=T.nextState({data:v,token:f,isToken:!0,reference:p-1});m.states.push(S)}}if(m.process(),m.states.length===0){var h=new Error(this.reportError(f));throw h.offset=this.current,h.token=f,h}this.options.keepHistory&&(d.lexerState=l.save()),this.current++}return d&&(this.lexerState=l.save()),this.results=this.finish(),this},o.prototype.reportLexerError=function(c){var l,f,h=c.token;return h?(l="input "+JSON.stringify(h.text[0])+" (lexer error)",f=this.lexer.formatError(h,"Syntax error")):(l="input (lexer error)",f=c.message),this.reportErrorCommon(f,l)},o.prototype.reportError=function(c){var l=(c.type?c.type+" token: ":"")+JSON.stringify(c.value!==void 0?c.value:c),f=this.lexer.formatError(c,"Syntax error");return this.reportErrorCommon(f,l)},o.prototype.reportErrorCommon=function(c,l){var f=[];f.push(c);var h=this.table.length-2,d=this.table[h],p=d.states.filter(function(g){var v=g.rule.symbols[g.dot];return v&&typeof v!="string"});if(p.length===0)f.push("Unexpected "+l+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(d.states,f);else{f.push("Unexpected "+l+`. Instead, I was expecting to see one of the following:
`);var m=p.map(function(g){return this.buildFirstStateStack(g,[])||[g]},this);m.forEach(function(g){var v=g[0],E=v.rule.symbols[v.dot],y=this.getSymbolDisplay(E);f.push("A "+y+" based on:"),this.displayStateStack(g,f)},this)}return f.push(""),f.join(`
`)},o.prototype.displayStateStack=function(c,l){for(var f,h=0,d=0;d<c.length;d++){var p=c[d],m=p.rule.toString(p.dot);m===f?h++:(h>0&&l.push("    ^ "+h+" more lines identical to this"),h=0,l.push("    "+m)),f=m}},o.prototype.getSymbolDisplay=function(c){return s(c)},o.prototype.buildFirstStateStack=function(c,l){if(l.indexOf(c)!==-1)return null;if(c.wantedBy.length===0)return[c];var f=c.wantedBy[0],h=[c].concat(l),d=this.buildFirstStateStack(f,h);return d===null?null:[c].concat(d)},o.prototype.save=function(){var c=this.table[this.current];return c.lexerState=this.lexerState,c},o.prototype.restore=function(c){var l=c.index;this.current=l,this.table[l]=c,this.table.splice(l+1),this.lexerState=c.lexerState,this.results=this.finish()},o.prototype.rewind=function(c){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[c])},o.prototype.finish=function(){var c=[],l=this.grammar.start,f=this.table[this.table.length-1];return f.states.forEach(function(h){h.rule.name===l&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==o.fail&&c.push(h)}),c.map(function(h){return h.data})};function s(c){var l=typeof c;if(l==="string")return c;if(l==="object"){if(c.literal)return JSON.stringify(c.literal);if(c instanceof RegExp)return"character matching "+c;if(c.type)return c.type+" token";if(c.test)return"token matching "+String(c.test);throw new Error("Unknown symbol type: "+c)}}function u(c){var l=typeof c;if(l==="string")return c;if(l==="object"){if(c.literal)return JSON.stringify(c.literal);if(c instanceof RegExp)return c.toString();if(c.type)return"%"+c.type;if(c.test)return"<"+String(c.test)+">";throw new Error("Unknown symbol type: "+c)}}return{Parser:o,Grammar:r,Rule:t}})})(nF);var rF={exports:{}},Xfe=1/0,Kfe=9007199254740991,Zfe="[object Arguments]",Qfe="[object Function]",Jfe="[object GeneratorFunction]",ede=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,tde=typeof self=="object"&&self&&self.Object===Object&&self,nde=ede||tde||Function("return this")();function rde(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}var mA=Object.prototype,ide=mA.hasOwnProperty,iF=mA.toString,aF=nde.Symbol,ade=mA.propertyIsEnumerable,oF=aF?aF.isConcatSpreadable:void 0;function sF(e,t,n,i,r){var a=-1,o=e.length;for(n||(n=ode),r||(r=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?sF(s,t-1,n,i,r):rde(r,s):i||(r[r.length]=s)}return r}function ode(e){return ude(e)||lde(e)||!!(oF&&e&&e[oF])}function sde(e){var t=e?e.length:0;return t?sF(e,Xfe):[]}function lde(e){return hde(e)&&ide.call(e,"callee")&&(!ade.call(e,"callee")||iF.call(e)==Zfe)}var ude=Array.isArray;function cde(e){return e!=null&&dde(e.length)&&!fde(e)}function hde(e){return mde(e)&&cde(e)}function fde(e){var t=pde(e)?iF.call(e):"";return t==Qfe||t==Jfe}function dde(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Kfe}function pde(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function mde(e){return!!e&&typeof e=="object"}var gde=sde;(function(e){(function(){function t(f){return f[0]}var n=gde,i=function(h,d){return function(p){return p[h].concat([p[d]])}},r=function(h){return h=h.filter(function(d){return d!==null}),n(h)},a={" ":"descendantCombinator","+":"adjacentSiblingCombinator",">":"childCombinator","~":"generalSiblingCombinator"},o=function(h){return(Array.isArray(h[0])?h[0]:[h[0]]).concat({type:a[h[2]]}).concat(h[4])},s=function(h,d,p){var m=n(h).join(""),g=parseFloat(m);return isNaN(g)?p:g},u=function(h,d,p){return h[0]==="true"?!0:h[0]==="false"?!1:p},c=function(h,d,p){if(h[0]==="NaN")return NaN;if(h[0]!=="undefined")return h[0]==="null"?null:p},l={Lexer:void 0,ParserRules:[{name:"combinator",symbols:["selector"]},{name:"combinator",symbols:["combinator","_",/[>+~ ]/,"_","selector"],postprocess:o},{name:"selector",symbols:["selectorBody"],postprocess:function(h){return{type:"selector",body:h[0]}}},{name:"selectorBody$ebnf$1",symbols:["typeSelector"],postprocess:t},{name:"selectorBody$ebnf$1",symbols:[],postprocess:function(h){return null}},{name:"selectorBody$ebnf$2",symbols:[]},{name:"selectorBody$ebnf$2",symbols:["selectorBody$ebnf$2","simpleSelector"],postprocess:function(h){return h[0].concat([h[1]])}},{name:"selectorBody",symbols:["selectorBody$ebnf$1","selectorBody$ebnf$2"],postprocess:function(h,d,p){var m=r(h);return m.length?m:p}},{name:"selectorBody$ebnf$3",symbols:[]},{name:"selectorBody$ebnf$3",symbols:["selectorBody$ebnf$3","simpleSelector"],postprocess:function(h){return h[0].concat([h[1]])}},{name:"selectorBody",symbols:["universalSelector","selectorBody$ebnf$3"],postprocess:r},{name:"simpleSelector",symbols:["idSelector"]},{name:"simpleSelector",symbols:["classSelector"]},{name:"simpleSelector",symbols:["attributeValueSelector"]},{name:"simpleSelector",symbols:["attributePresenceSelector"]},{name:"simpleSelector",symbols:["pseudoClassSelector"]},{name:"simpleSelector",symbols:["pseudoElementSelector"]},{name:"typeSelector",symbols:["attributeName"],postprocess:function(h){return{type:"typeSelector",name:h[0]}}},{name:"className$ebnf$1",symbols:[{literal:"-"}],postprocess:t},{name:"className$ebnf$1",symbols:[],postprocess:function(h){return null}},{name:"className$ebnf$2",symbols:[]},{name:"className$ebnf$2",symbols:["className$ebnf$2",/[_a-zA-Z0-9-]/],postprocess:function(h){return h[0].concat([h[1]])}},{name:"className",symbols:["className$ebnf$1",/[_a-zA-Z]/,"className$ebnf$2"],postprocess:function(h){return(h[0]||"")+h[1]+h[2].join("")}},{name:"attributeName$ebnf$1",symbols:[]},{name:"attributeName$ebnf$1",symbols:["attributeName$ebnf$1",/[_a-zA-Z()0-9-]/],postprocess:function(h){return h[0].concat([h[1]])}},{name:"attributeName",symbols:[/[_a-z()A-Z]/,"attributeName$ebnf$1"],postprocess:function(h){return h[0]+h[1].join("")}},{name:"classSelector",symbols:[{literal:"."},"className"],postprocess:function(h){return{type:"classSelector",name:h[1]}}},{name:"idSelector",symbols:[{literal:"#"},"attributeName"],postprocess:function(h){return{type:"idSelector",name:h[1]}}},{name:"universalSelector",symbols:[{literal:"*"}],postprocess:function(h){return{type:"universalSelector"}}},{name:"attributePresenceSelector",symbols:[{literal:"["},"attributeName",{literal:"]"}],postprocess:function(h){return{type:"attributePresenceSelector",name:h[1]}}},{name:"attributeOperator",symbols:[{literal:"="}]},{name:"attributeOperator$string$1",symbols:[{literal:"~"},{literal:"="}],postprocess:function(h){return h.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$1"]},{name:"attributeOperator$string$2",symbols:[{literal:"|"},{literal:"="}],postprocess:function(h){return h.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$2"]},{name:"attributeOperator$string$3",symbols:[{literal:"^"},{literal:"="}],postprocess:function(h){return h.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$3"]},{name:"attributeOperator$string$4",symbols:[{literal:"$"},{literal:"="}],postprocess:function(h){return h.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$4"]},{name:"attributeOperator$string$5",symbols:[{literal:"*"},{literal:"="}],postprocess:function(h){return h.join("")}},{name:"attributeOperator",symbols:["attributeOperator$string$5"]},{name:"attributeValueSelector",symbols:[{literal:"["},"attributeName","attributeOperator","attributeValue",{literal:"]"}],postprocess:function(h){return{type:"attributeValueSelector",name:h[1],value:h[3],operator:h[2][0]}}},{name:"attributeValue",symbols:["falsyPrimitiveStrings"],postprocess:t},{name:"attributeValue",symbols:["numericValue"],postprocess:t},{name:"attributeValue",symbols:["sqstring"],postprocess:t},{name:"attributeValue",symbols:["dqstring"],postprocess:t},{name:"falsyPrimitiveStrings$string$1",symbols:[{literal:"f"},{literal:"a"},{literal:"l"},{literal:"s"},{literal:"e"}],postprocess:function(h){return h.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$1"],postprocess:u},{name:"falsyPrimitiveStrings$string$2",symbols:[{literal:"t"},{literal:"r"},{literal:"u"},{literal:"e"}],postprocess:function(h){return h.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$2"],postprocess:u},{name:"falsyPrimitiveStrings$string$3",symbols:[{literal:"N"},{literal:"a"},{literal:"N"}],postprocess:function(h){return h.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$3"],postprocess:c},{name:"falsyPrimitiveStrings$string$4",symbols:[{literal:"n"},{literal:"u"},{literal:"l"},{literal:"l"}],postprocess:function(h){return h.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$4"],postprocess:c},{name:"falsyPrimitiveStrings$string$5",symbols:[{literal:"u"},{literal:"n"},{literal:"d"},{literal:"e"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"e"},{literal:"d"}],postprocess:function(h){return h.join("")}},{name:"falsyPrimitiveStrings",symbols:["falsyPrimitiveStrings$string$5"],postprocess:c},{name:"numericValue",symbols:["int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"+"},"int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"-"},"int",{literal:"."},"int"],postprocess:s},{name:"numericValue",symbols:[{literal:"-"},"int"],postprocess:s},{name:"numericValue",symbols:["int"],postprocess:s},{name:"numericValue",symbols:[{literal:"+"},"int"],postprocess:s},{name:"numericValue$string$1",symbols:[{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(h){return h.join("")}},{name:"numericValue",symbols:["numericValue$string$1"],postprocess:s},{name:"numericValue$string$2",symbols:[{literal:"+"},{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(h){return h.join("")}},{name:"numericValue",symbols:["numericValue$string$2"],postprocess:s},{name:"numericValue$string$3",symbols:[{literal:"-"},{literal:"I"},{literal:"n"},{literal:"f"},{literal:"i"},{literal:"n"},{literal:"i"},{literal:"t"},{literal:"y"}],postprocess:function(h){return h.join("")}},{name:"numericValue",symbols:["numericValue$string$3"],postprocess:s},{name:"int$ebnf$1",symbols:[/[0-9]/]},{name:"int$ebnf$1",symbols:["int$ebnf$1",/[0-9]/],postprocess:function(h){return h[0].concat([h[1]])}},{name:"int",symbols:["int$ebnf$1"]},{name:"classParameters",symbols:[]},{name:"classParameters",symbols:["classParameter"]},{name:"classParameters",symbols:["classParameters",{literal:","},"_","classParameter"],postprocess:i(0,3)},{name:"classParameter$ebnf$1",symbols:[/[^()"', ]/]},{name:"classParameter$ebnf$1",symbols:["classParameter$ebnf$1",/[^()"', ]/],postprocess:function(h){return h[0].concat([h[1]])}},{name:"classParameter",symbols:["classParameter$ebnf$1"],postprocess:function(h){return h[0].join("")}},{name:"classParameter",symbols:["sqstring"],postprocess:t},{name:"classParameter",symbols:["dqstring"],postprocess:t},{name:"pseudoElementSelector$string$1",symbols:[{literal:":"},{literal:":"}],postprocess:function(h){return h.join("")}},{name:"pseudoElementSelector",symbols:["pseudoElementSelector$string$1","pseudoClassSelectorName"],postprocess:function(h){return{type:"pseudoElementSelector",name:h[1]}}},{name:"pseudoClassSelector",symbols:[{literal:":"},"pseudoClassSelectorName"],postprocess:function(h){return{type:"pseudoClassSelector",name:h[1]}}},{name:"pseudoClassSelector",symbols:[{literal:":"},"pseudoClassSelectorName",{literal:"("},"classParameters",{literal:")"}],postprocess:function(h){return{type:"pseudoClassSelector",name:h[1],parameters:h[3]}}},{name:"pseudoClassSelectorName$ebnf$1",symbols:[/[a-zA-Z0-9-_]/]},{name:"pseudoClassSelectorName$ebnf$1",symbols:["pseudoClassSelectorName$ebnf$1",/[a-zA-Z0-9-_]/],postprocess:function(h){return h[0].concat([h[1]])}},{name:"pseudoClassSelectorName",symbols:[/[a-zA-Z]/,"pseudoClassSelectorName$ebnf$1"],postprocess:function(h){return h[0]+h[1].join("")}},{name:"dqstring$ebnf$1",symbols:[]},{name:"dqstring$ebnf$1",symbols:["dqstring$ebnf$1","dstrchar"],postprocess:function(h){return h[0].concat([h[1]])}},{name:"dqstring",symbols:[{literal:'"'},"dqstring$ebnf$1",{literal:'"'}],postprocess:function(h){return h[1].join("")}},{name:"dstrchar",symbols:[/[^"]/],postprocess:t},{name:"dstrchar$string$1",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(h){return h.join("")}},{name:"dstrchar",symbols:["dstrchar$string$1"],postprocess:function(h){return'"'}},{name:"sqstring$ebnf$1",symbols:[]},{name:"sqstring$ebnf$1",symbols:["sqstring$ebnf$1","sstrchar"],postprocess:function(h){return h[0].concat([h[1]])}},{name:"sqstring",symbols:[{literal:"'"},"sqstring$ebnf$1",{literal:"'"}],postprocess:function(h){return h[1].join("")}},{name:"sstrchar",symbols:[/[^']/],postprocess:t},{name:"sstrchar$string$1",symbols:[{literal:"\\"},{literal:"'"}],postprocess:function(h){return h.join("")}},{name:"sstrchar",symbols:["sstrchar$string$1"],postprocess:function(h){return"'"}},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1",/[ ]/],postprocess:function(h){return h[0].concat([h[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:function(h){return null}}],ParserStart:"combinator"};e.exports=l})()})(rF),Object.defineProperty(pA,"__esModule",{value:!0});var vde=nF.exports,yde=rF.exports,lF=Tde(yde);function Tde(e){return e&&e.__esModule?e:{default:e}}pA.default=function(){var e=function(n){var i=new vde.Parser(lF.default.ParserRules,lF.default.ParserStart),r=i.feed(n).results;if(r.length===0)throw new Error("Found no parsings.");if(r.length>1)throw new Error("Ambiguous results.");return r[0]};return{parse:e}},Object.defineProperty(Pc,"__esModule",{value:!0}),Pc.createParser=Pc.createGenerator=void 0;var Ede=dA,bde=uF(Ede),_de=pA,Sde=uF(_de);function uF(e){return e&&e.__esModule?e:{default:e}}Pc.createGenerator=bde.default,Pc.createParser=Sde.default;var Ade=vl.exports,cF=Pr,Cde=cF("Object.prototype.propertyIsEnumerable"),Dde=cF("Array.prototype.push"),hF=function(t){var n=Ade(t),i=[];for(var r in n)Cde(n,r)&&Dde(i,n[r]);return i},wde=hF,fF=function(){return typeof Object.values=="function"?Object.values:wde},Ide=fF,kde=xr,Ode=function(){var t=Ide();return kde(Object,{values:t},{values:function(){return Object.values!==t}}),t},xde=xr,Pde=Fa.exports,Rde=hF,dF=fF,Nde=Ode,pF=Pde(dF(),Object);xde(pF,{getPolyfill:dF,implementation:Rde,shim:Nde});var Mde=pF,Lde=vM,Bde=bM(),Fde=RM(),Hde=zf,$de=MM(),Ude=O_.exports,Gde=KM(),zde=k_,jde=eL,mF=iS,Vde=Pr,Yde=W6,gF=Object("a"),Wde=gF[0]!=="a"||!(0 in gF),qde=Vde("String.prototype.split"),vF=function(t){var n=jde(this),i=Wde&&Yde(n)?qde(n,""):n,r=Gde(i);if(!Ude(t))throw new TypeError("Array.prototype.filter callback must be a function");var a;arguments.length>1&&(a=arguments[1]);for(var o=Lde(n,0),s=0,u=0;s<r;){var c=mF(s),l=$de(n,c);if(l){var f=Hde(n,c),h=zde(Bde(t,a,[f,s,n]));h&&(Fde(o,mF(u),f),u+=1)}s+=1}return o},Xde=function(t){var n=!0,i=!0,r=!1;if(typeof t=="function"){try{t.call("f",function(a,o,s){typeof s!="object"&&(n=!1)}),t.call([null],function(){"use strict";i=typeof this=="string"},"x")}catch{r=!0}return!r&&n&&i}return!1},Kde=Xde,Zde=vF,yF=function(){var t=Array.prototype.filter;return Kde(t)?t:Zde},gA,TF;function Qde(){if(TF)return gA;TF=1;var e=xr,t=yF;return gA=function(){var i=t();return e(Array.prototype,{filter:i},{filter:function(){return Array.prototype.filter!==i}}),i},gA}var Jde=xr,epe=vl.exports,tpe=Fa.exports,npe=Pr,rpe=vF,EF=yF,ipe=tpe.apply(EF()),ape=Qde(),ope=npe("Array.prototype.slice"),bF=function(t,n){return epe(t),ipe(t,ope(arguments,1))};Jde(bF,{getPolyfill:EF,implementation:rpe,shim:ape});var spe=bF,lpe=Pr,upe=lpe("Array.prototype.push"),cpe=function(e,t){for(var n=[],i=0;i<e.length;i+=1)upe(n,t(e[i],i));return n},hpe=[["HTMLElement","article"],["HTMLElement","section"],["HTMLBaseFontElement","basefont","HTMLBaseFontElementConstructor"],["HTMLPhraseElement","cite","HTMLElement"],["HTMLElement","noscript"],["HTMLBGSoundElement","bgsound","HTMLElement"],["HTMLPhraseElement","blink","HTMLElement"],["HTMLElement","multicol"],["HTMLNextIdElement","nextid","HTMLElement"],["HTMLElement","rb"],["HTMLElement","spacer"],["HTMLAnchorElement","a","HTMLElement"],["HTMLAreaElement","area","HTMLElement"],["HTMLAudioElement","audio","HTMLElement"],["HTMLBaseElement","base","HTMLElement"],["HTMLBodyElement","body","HTMLElement"],["HTMLBRElement","br","HTMLElement"],["HTMLButtonElement","button"],["HTMLCanvasElement","canvas"],["HTMLContentElement","content","HTMLElement"],["HTMLDataElement","data","HTMLElement"],["HTMLDataListElement","datalist"],["HTMLDialogElement","dialog","HTMLElement"],["HTMLDirectoryElement","dir"],["HTMLDivElement","div"],["HTMLDListElement","dl"],["HTMLEmbedElement","embed"],["HTMLFieldSetElement","fieldset"],["HTMLFontElement","font"],["HTMLFormElement","form"],["HTMLFrameElement","frame"],["HTMLFrameSetElement","frameset"],["HTMLHeadElement","head"],["HTMLHeadingElement","h1"],["HTMLHeadingElement","h2"],["HTMLHeadingElement","h3"],["HTMLHeadingElement","h4"],["HTMLHeadingElement","h5"],["HTMLHeadingElement","h6"],["HTMLHtmlElement","html"],["HTMLHRElement","hr"],["HTMLIFrameElement","iframe"],["HTMLImageElement","img"],["HTMLInputElement","input"],["HTMLIsIndexElement","index","HTMLElement"],["HTMLKeygenElement","keygen","HTMLBlockElement"],["HTMLLabelElement","label"],["HTMLLegendElement","legend"],["HTMLLIElement","li"],["HTMLLinkElement","link"],["HTMLElement","main"],["HTMLMapElement","map"],["HTMLMarqueeElement","marquee"],["HTMLMenuElement","menu"],["HTMLMetaElement","meta"],["HTMLMeterElement","meter","HTMLElement"],["HTMLModElement","del"],["HTMLModElement","ins"],["HTMLObjectElement","object"],["HTMLOListElement","ol"],["HTMLOptGroupElement","optgroup"],["HTMLOptionElement","option"],["HTMLOutputElement","output"],["HTMLParagraphElement","p"],["HTMLParamElement","param"],["HTMLPictureElement","picture","HTMLElement"],["HTMLPreElement","pre"],["HTMLProgressElement","progress","HTMLElement"],["HTMLQuoteElement","q","HTMLBlockquoteElement"],["HTMLQuoteElement","blockquote","HTMLBlockElement","HTMLBlockquoteElement"],["HTMLScriptElement","script"],["HTMLSelectElement","select"],["HTMLShadowElement","shadow","HTMLElement"],["HTMLSourceElement","source"],["HTMLSpanElement","span","HTMLElement"],["HTMLStyleElement","style"],["HTMLTableElement","table"],["HTMLTableCaptionElement","caption"],["HTMLTableCellElement","td","HTMLTableDataCellElement"],["HTMLTableCellElement","th","HTMLTableHeaderCellElement"],["HTMLTableRowElement","tr"],["HTMLTableColElement","col"],["HTMLTableColElement","colgroup"],["HTMLTableSectionElement","tbody"],["HTMLTableSectionElement","thead"],["HTMLTableSectionElement","tfoot"],["HTMLTemplateElement","template","HTMLElement"],["HTMLTextAreaElement","textarea"],["HTMLTimeElement","time","HTMLElement"],["HTMLTitleElement","title"],["HTMLTrackElement","track","HTMLElement"],["HTMLUListElement","ul"],["HTMLVideoElement","video"],["HTMLElement","abbr"],["HTMLElement","address"],["HTMLElement","aside"],["HTMLElement","b"],["HTMLElement","bdi"],["HTMLElement","bdo"],["HTMLElement","code"],["HTMLElement","dd"],["HTMLDetailsElement","details","HTMLElement"],["HTMLElement","dfn"],["HTMLElement","dt"],["HTMLElement","em"],["HTMLElement","figcaption"],["HTMLElement","figure"],["HTMLElement","footer"],["HTMLElement","header"],["HTMLElement","hgroup"],["HTMLElement","i"],["HTMLElement","kbd"],["HTMLElement","mark"],["HTMLElement","nav"],["HTMLElement","rp"],["HTMLElement","rt"],["HTMLElement","ruby"],["HTMLElement","s"],["HTMLElement","samp"],["HTMLSlotElement","slot","HTMLElement"],["HTMLElement","small"],["HTMLElement","strong"],["HTMLElement","summary"],["HTMLElement","u"],["HTMLElement","var"],["HTMLElement","wbr"]],fpe=function(t,n,i){if(typeof document<"u"&&typeof document.createElement=="function"){var r=document.createElement(t).constructor;if(r!==i)return r}},dpe=function(){var t=globalThis.HTMLUnknownElement;return{all:globalThis.HTMLElement,elements:cpe(hpe,function(n){for(var i=n[0],r=n[1],a,o,s=2;s<arguments.length&&!o;s+=1)a=n[s],o=a&&globalThis[a];var u=globalThis[i];return{constructor:fpe(r,o||u,t),constructorName:o?a:i,expectedConstructor:o||u,tag:r}}),unknown:t}},ppe=spe,mpe=dpe,gpe=function(t){if(!t)return[];var n=mpe();return t===n.unknown?[]:t===n.all?n.elements:ppe(n.elements,function(i){return i.constructor===t})};Object.defineProperty(xc,"__esModule",{value:!0});var _F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vpe=function(){function e(t,n){var i=[],r=!0,a=!1,o=void 0;try{for(var s=t[Symbol.iterator](),u;!(r=(u=s.next()).done)&&(i.push(u.value),!(n&&i.length===n));r=!0);}catch(c){a=!0,o=c}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return i}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();xc.buildPredicate=xF,xc.reduceTreeBySelector=fv,xc.reduceTreesBySelector=eme;var ype=Pc,Tpe=Mde,Epe=Rc(Tpe),bpe=Vf,vA=Rc(bpe),_pe=sS,Spe=Rc(_pe),Ape=zr,Cpe=Rc(Ape),Dpe=gpe,wpe=Rc(Dpe),Zr=nr,SF=Yf,Ipe=hs,AF=Rc(Ipe);function Rc(e){return e&&e.__esModule?e:{default:e}}function kpe(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return Array.from(e)}var Ope=(0,ype.createParser)(),xpe="childCombinator",Ppe="adjacentSiblingCombinator",Rpe="generalSiblingCombinator",Npe="descendantCombinator",CF="selector",Mpe="typeSelector",Lpe="classSelector",Bpe="idSelector",Fpe="universalSelector",DF="attributePresenceSelector",Hpe="attributeValueSelector",$pe="pseudoClassSelector",Upe="pseudoElementSelector",wF="=",Gpe="~=",zpe="|=",jpe="^=",Vpe="$=",Ype="*=";function IF(e){return[].concat(kpe(new Set(e)))}function yA(e,t){return IF(t.reduce(e,[]))}function kF(e){try{return Ope.parse(e)}catch{throw new Error("Failed to parse selector: "+String(e))}}function OF(e,t){var n=t.operator,i=t.value,r=t.name,a=(0,SF.propsOfNode)(e),o=Object.getOwnPropertyDescriptor(a,r);if(o&&o.get)return!1;var s=a[r];if(typeof s>"u")return!1;if(t.type===DF)return(0,Cpe.default)(a,t.name);if((typeof s!="string"||typeof i!="string")&&n!==wF)return!1;switch(n){case wF:return(0,Spe.default)(s,i);case Gpe:return s.split(" ").indexOf(i)!==-1;case zpe:return s===i||s.startsWith(String(i)+"-");case jpe:return i===""?!1:s.slice(0,i.length)===i;case Vpe:return i===""?!1:s.slice(-i.length)===i;case Ype:return i===""?!1:s.indexOf(i)!==-1;default:throw new Error('Enzyme::Selector: Unknown attribute selector operator "'+String(n)+'"')}}function Wpe(e,t,n){var i=t.name,r=t.parameters;if(i==="not")return r.every(function(h){return fv(h,e).length===0});if(i==="empty")return(0,Zr.treeFilter)(e,function(h){return h!==e}).length===0;if(i==="first-child"){var a=(0,Zr.findParentNode)(n,e),o=a.rendered,s=vpe(o,1),u=s[0];return u===e}if(i==="last-child"){var c=(0,Zr.findParentNode)(n,e),l=c.rendered;return l[l.length-1]===e}if(i==="focus"){if(typeof document>"u")throw new Error('Enzyme::Selector does not support the ":focus" pseudo-element without a globalThis `document`.');var f=(0,AF.default)();return document.activeElement&&f.nodeToHostNode(e)===document.activeElement}throw new TypeError('Enzyme::Selector does not support the "'+String(t.name)+'" pseudo-element or pseudo-class selectors.')}function qpe(e,t,n){if(e===null||typeof e=="string")return!1;switch(t.type){case Fpe:return!0;case Lpe:return(0,Zr.hasClassName)(e,t.name);case Mpe:return(0,SF.nodeHasType)(e,t.name);case Bpe:return(0,Zr.nodeHasId)(e,t.name);case DF:return OF(e,t);case Hpe:return OF(e,t);case Upe:case $pe:return Wpe(e,t,n);default:throw new Error("Unknown token type: "+String(t.type))}}function TA(e,t){return function(n){return e.body.every(function(i){return qpe(n,i,t)})}}function Xpe(e){return e.some(function(t){return t.type!==CF})}function xF(e){if(typeof e=="string"){var t=kF(e);if(Xpe(t))throw new TypeError("This method does not support complex CSS selectors");return TA(t[0])}var n=(0,AF.default)(),i=n.isValidElementType?n.isValidElementType(e):typeof e=="function";if(i)return function(a){return n.matchesElementType(a,e)};if((typeof e>"u"?"undefined":_F(e))==="object"){if(!Array.isArray(e)&&e!==null&&Object.keys(e).length>0){var r=(0,Epe.default)(e).some(function(a){return typeof a>"u"});if(r)throw new TypeError("Enzyme::Props can\u2019t have `undefined` values. Try using \u2018findWhere()\u2019 instead.");return function(a){return(0,Zr.nodeMatchesObjectProps)(a,e)}}throw new TypeError("Enzyme::Selector does not support an array, null, or empty object as a selector")}throw new TypeError("Enzyme::Selector expects a string, object, or valid element type (Component Constructor)")}function Kpe(e,t,n){return e.reduce(function(i,r){var a=(0,Zr.findParentNode)(n,r);if(!a)return i;var o=(0,Zr.childrenOfNode)(a),s=o.indexOf(r),u=o[s+1];return u&&t(u)&&i.push(u),i},[])}function Zpe(e,t,n){return yA(function(i,r){var a=(0,Zr.findParentNode)(n,r);if(!a)return i;var o=(0,Zr.childrenOfNode)(a),s=o.indexOf(r),u=o.slice(s+1);return i.concat(u.filter(t))},e)}function Qpe(e,t){return yA(function(n,i){return n.concat((0,Zr.childrenOfNode)(i).filter(t))},e)}function Jpe(e,t){return yA(function(n,i){return n.concat((0,Zr.treeFilter)(i,t))},(0,vA.default)(e.map(Zr.childrenOfNode)))}function fv(e,t){if(typeof e!="string"){var n=(0,wpe.default)(e);if(n.length>0)return(0,vA.default)(n.map(function(l){return fv(l.tag,t)}))}if(typeof e=="function"||(typeof e>"u"?"undefined":_F(e))==="object")return(0,Zr.treeFilter)(t,xF(e));var i=[];if(typeof e=="string")for(var r=kF(e),a=0;a<r.length;){var o=r[a];if(o.type===CF){var s=TA(o,t);i=i.concat((0,Zr.treeFilter)(t,s))}else{var u=o.type;a+=1;var c=TA(r[a],t);switch(u){case Ppe:i=Kpe(i,c,t);break;case Rpe:i=Zpe(i,c,t);break;case xpe:i=Qpe(i,c);break;case Npe:{i=Jpe(i,c);break}default:throw new Error("Unknown combinator selector: "+String(u))}}a+=1}else throw new TypeError("Enzyme::Selector expects a string, object, or Component Constructor");return i}function eme(e,t){var n=t.map(function(i){return fv(e,i)});return IF((0,vA.default)(n,1))}(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},n=function(){function j(H,G){for(var K=0;K<G.length;K++){var ae=G[K];ae.enumerable=ae.enumerable||!1,ae.configurable=!0,"value"in ae&&(ae.writable=!0),Object.defineProperty(H,ae.key,ae)}}return function(H,G,K){return G&&j(H.prototype,G),K&&j(H,K),H}}(),i=Xu,r=m(i),a=Vf,o=m(a),s=zr,u=m(s),c=Yf,l=hs,f=m(l),h=fs,d=nr,p=xc;function m(j){return j&&j.__esModule?j:{default:j}}function g(j,H,G){return H in j?Object.defineProperty(j,H,{value:G,enumerable:!0,configurable:!0,writable:!0}):j[H]=G,j}function v(j,H){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return H&&(typeof H=="object"||typeof H=="function")?H:j}function E(j,H){if(typeof H!="function"&&H!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof H);j.prototype=Object.create(H&&H.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),H&&(Object.setPrototypeOf?Object.setPrototypeOf(j,H):j.__proto__=H)}function y(j,H){if(!(j instanceof H))throw new TypeError("Cannot call a class as a function")}var T=(0,c.sym)("__node__"),b=(0,c.sym)("__nodes__"),S=(0,c.sym)("__renderer__"),w=(0,c.sym)("__unrendered__"),D=(0,c.sym)("__root__"),R=(0,c.sym)("__options__"),M=(0,c.sym)("__rootNodes__"),k=(0,c.sym)("__wrappingComponent__"),L=(0,c.sym)("__linkedRoots__"),$=(0,c.sym)("__updatedBy__");function P(j,H){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.treeFilter;return j.flatMap(function(K){return G(K.getNodeInternal(),H)})}function B(j,H){return j.wrap(j.getNodesInternal().filter(H).filter(Boolean))}function X(j){if(j[D].length!==1)throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");return j[D]!==j?j[M][0]:j[D][T]}function ee(j,H){return(0,d.parentsOfNode)(H,X(j))}function se(j,H){H?Array.isArray(H)?((0,c.privateSet)(j,T,H[0]),(0,c.privateSet)(j,b,H)):((0,c.privateSet)(j,T,H),(0,c.privateSet)(j,b,[H])):((0,c.privateSet)(j,T,null),(0,c.privateSet)(j,b,[])),(0,c.privateSet)(j,"length",j[b].length)}var fe=function(){function j(H,G){var K=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(y(this,j),!globalThis.window&&!globalThis.document)throw new Error("It looks like you called `mount()` without a globalThis document being loaded.");var ae=(0,c.makeOptions)(K);if(G)(0,c.privateSet)(this,S,G[S]),(0,c.privateSet)(this,D,G),se(this,H),(0,c.privateSet)(this,M,G[b]),(0,c.privateSet)(this,R,G[R]),(0,c.privateSet)(this,L,[]);else{var pe=(0,f.default)(ae);if(!pe.isValidElement(H))throw new TypeError("ReactWrapper can only wrap valid elements");var we=pe.createRenderer((0,r.default)({mode:"mount"},ae));if((0,c.privateSet)(this,S,we),we.render(H,ae.context),(0,c.privateSet)(this,D,this),se(this,this[S].getNode()),(0,c.privateSet)(this,R,ae),(0,c.privateSet)(this,L,[]),(0,c.isCustomComponent)(ae.wrappingComponent,pe)){if(typeof this[S].getWrappingComponentRenderer!="function")throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");(0,c.privateSet)(this,k,new Z(this,this[S].getWrappingComponentRenderer())),this[L].push(this[k])}}(0,c.privateSet)(this,w,H),(0,c.privateSet)(this,$,null)}return n(j,[{key:"root",value:function(){function H(){return this[D]}return H}()},{key:"getNodeInternal",value:function(){function H(){if(this.length!==1)throw new Error("ReactWrapper::getNode() can only be called when wrapping one node");return this[b][0]}return H}()},{key:"getNodesInternal",value:function(){function H(){return this[b]}return H}()},{key:"getElement",value:function(){function H(){var G=this;return this.single("getElement",function(){return(0,f.default)(G[R]).nodeToElement(G[T])})}return H}()},{key:"getElements",value:function(){function H(){var G=this;return this[b].map(function(K){return(0,f.default)(G[R]).nodeToElement(K)})}return H}()},{key:"getNode",value:function(){function H(){throw new Error("ReactWrapper::getNode() is no longer supported. Use ReactWrapper::instance() instead")}return H}()},{key:"getNodes",value:function(){function H(){throw new Error("ReactWrapper::getNodes() is no longer supported.")}return H}()},{key:"getDOMNode",value:function(){function H(){var G=(0,f.default)(this[R]);return this.single("getDOMNode",function(K){return G.nodeToHostNode(K,!0)})}return H}()},{key:"ref",value:function(){function H(G){if(this[D]!==this)throw new Error("ReactWrapper::ref(refname) can only be called on the root");return this.instance().refs[G]}return H}()},{key:"instance",value:function(){function H(){var G=this;return this.single("instance",function(){return G[T].instance})}return H}()},{key:"getWrappingComponent",value:function(){function H(){if(this[D]!==this)throw new Error("ReactWrapper::getWrappingComponent() can only be called on the root");if(!this[R].wrappingComponent)throw new Error("ReactWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");return this[k]}return H}()},{key:"update",value:function(){function H(){var G=this,K=this[D];return this!==K?K.update():(se(this,this[S].getNode()),this[L].forEach(function(ae){if(ae!==G[$]){ae[$]=G;try{ae.update()}finally{ae[$]=null}}}),this)}return H}()},{key:"unmount",value:function(){function H(){var G=this;if(this[D]!==this)throw new Error("ReactWrapper::unmount() can only be called on the root");return this.single("unmount",function(){G[S].unmount(),G.update()}),this}return H}()},{key:"mount",value:function(){function H(){var G=this;if(this[D]!==this)throw new Error("ReactWrapper::mount() can only be called on the root");return this[S].render(this[w],this[R].context,function(){return G.update()}),this}return H}()},{key:"setProps",value:function(){function H(G){var K=this,ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this[D]!==this)throw new Error("ReactWrapper::setProps() can only be called on the root");if(arguments.length>1&&typeof ae!="function")throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");var pe=(0,f.default)(this[R]);return this[w]=(0,c.cloneElement)(pe,this[w],G),this[S].render(this[w],null,function(){K.update(),ae&&ae()}),this}return H}()},{key:"setState",value:function(){function H(G){var K=this,ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this.instance()===null||this.getNodeInternal().nodeType!=="class")throw new Error("ReactWrapper::setState() can only be called on class components");if(arguments.length>1&&typeof ae!="function")throw new TypeError("ReactWrapper::setState() expects a function as its second argument");return this.instance().setState(G,function(){if(K.update(),ae){var pe=(0,f.default)(K[R]),we=K.instance();pe.invokeSetStateCallback?pe.invokeSetStateCallback(we,ae):ae.call(we)}}),this}return H}()},{key:"setContext",value:function(){function H(G){var K=this;if(this[D]!==this)throw new Error("ReactWrapper::setContext() can only be called on the root");if(!this[R].context)throw new Error("ReactWrapper::setContext() can only be called on a wrapper that was originally passed a context option");return this[S].render(this[w],G,function(){return K.update()}),this}return H}()},{key:"contains",value:function(){function H(G){var K=(0,f.default)(this[R]),ae=Array.isArray(G)?function(pe){return(0,c.containsChildrenSubArray)(c.nodeEqual,pe,G.map(function(we){return K.elementToNode(we)}))}:function(pe){return(0,c.nodeEqual)(K.elementToNode(G),pe)};return P(this,ae).length>0}return H}()},{key:"containsMatchingElement",value:function(){function H(G){var K=(0,f.default)(this[R]).elementToNode(G),ae=function(){function pe(we){return(0,c.nodeMatches)(K,we,function(Ee,xe){return Ee<=xe})}return pe}();return P(this,ae).length>0}return H}()},{key:"containsAllMatchingElements",value:function(){function H(G){var K=this;if(!Array.isArray(G))throw new TypeError("nodes should be an Array");return G.every(function(ae){return K.containsMatchingElement(ae)})}return H}()},{key:"containsAnyMatchingElements",value:function(){function H(G){var K=this;return Array.isArray(G)&&G.some(function(ae){return K.containsMatchingElement(ae)})}return H}()},{key:"equals",value:function(){function H(G){var K=this;return this.single("equals",function(){return(0,c.nodeEqual)(K.getNodeInternal(),G)})}return H}()},{key:"matchesElement",value:function(){function H(G){var K=this;return this.single("matchesElement",function(){var ae=(0,f.default)(K[R]),pe=ae.elementToNode(G);return(0,c.nodeMatches)(pe,K.getNodeInternal(),function(we,Ee){return we<=Ee})})}return H}()},{key:"find",value:function(){function H(G){return this.wrap((0,p.reduceTreesBySelector)(G,this.getNodesInternal()))}return H}()},{key:"is",value:function(){function H(G){var K=(0,p.buildPredicate)(G);return this.single("is",function(ae){return K(ae)})}return H}()},{key:"isEmptyRender",value:function(){function H(){var G=this.getNodeInternal();return(0,c.renderedDive)(G)}return H}()},{key:"filterWhere",value:function(){function H(G){var K=this;return B(this,function(ae){return G(K.wrap(ae))})}return H}()},{key:"filter",value:function(){function H(G){var K=(0,p.buildPredicate)(G);return B(this,K)}return H}()},{key:"not",value:function(){function H(G){var K=(0,p.buildPredicate)(G);return B(this,function(ae){return!K(ae)})}return H}()},{key:"text",value:function(){function H(){var G=(0,f.default)(this[R]);return this.single("text",function(K){return(0,d.getTextFromHostNodes)(K,G)})}return H}()},{key:"html",value:function(){function H(){var G=(0,f.default)(this[R]);return this.single("html",function(K){return(0,d.getHTMLFromHostNodes)(K,G)})}return H}()},{key:"render",value:function(){function H(){var G=this.html();return(0,c.loadCheerioRoot)(G)}return H}()},{key:"simulate",value:function(){function H(G){var K=this,ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.single("simulate",function(pe){return K[S].simulateEvent(pe,G,ae),K[D].update(),K})}return H}()},{key:"simulateError",value:function(){function H(G){var K=this;if(this[D]===this)throw new Error("ReactWrapper::simulateError() may not be called on the root");return this.single("simulateError",function(ae){if(ae.nodeType==="host")throw new Error("ReactWrapper::simulateError() can only be called on custom components");var pe=K[S];if(typeof pe.simulateError!="function")throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");var we=X(K),Ee=[ae].concat(ee(K,ae));return pe.simulateError(Ee,we,G),K[D].update(),K})}return H}()},{key:"props",value:function(){function H(){return this.single("props",d.propsOfNode)}return H}()},{key:"state",value:function(){function H(G){var K=this,ae=this[D]===this?this[S].getNode():this.getNodeInternal();if(this.instance()===null||ae.nodeType!=="class")throw new Error("ReactWrapper::state() can only be called on class components");var pe=this.single("state",function(){return K.instance().state});if(typeof G<"u"){if(pe==null)throw new TypeError('ReactWrapper::state("'+String(G)+'") requires that `state` not be `null` or `undefined`');return pe[G]}return pe}return H}()},{key:"context",value:function(){function H(G){var K=this;if(this[D]!==this)throw new Error("ReactWrapper::context() can only be called on the root");var ae=this.single("context",function(){return K.instance()});if(ae===null)throw new Error("ReactWrapper::context() can only be called on components with instances");var pe=ae.context;return typeof G<"u"?pe[G]:pe}return H}()},{key:"children",value:function(){function H(G){var K=this.flatMap(function(ae){return(0,d.childrenOfNode)(ae.getNodeInternal())});return G?K.filter(G):K}return H}()},{key:"childAt",value:function(){function H(G){var K=this;return this.single("childAt",function(){return K.children().at(G)})}return H}()},{key:"parents",value:function(){function H(G){var K=this;return this.single("parents",function(ae){var pe=K.wrap(ee(K,ae));return G?pe.filter(G):pe})}return H}()},{key:"parent",value:function(){function H(){return this.flatMap(function(G){return[G.parents().get(0)]})}return H}()},{key:"closest",value:function(){function H(G){if(this.is(G))return this;var K=this.parents().filter(G);return K.length>0?K.first():this.findWhere(function(){return!1})}return H}()},{key:"prop",value:function(){function H(G){return this.props()[G]}return H}()},{key:"invoke",value:function(){function H(G){var K=this;return this.single("invoke",function(){var ae=K.prop(G);if(typeof ae!="function")throw new TypeError("ReactWrapper::invoke() requires the name of a prop whose value is a function");return function(){for(var pe=arguments.length,we=Array(pe),Ee=0;Ee<pe;Ee++)we[Ee]=arguments[Ee];var xe=typeof K[S].wrapInvoke=="function"?K[S].wrapInvoke(function(){return ae.apply(void 0,we)}):ae.apply(void 0,we);return K[D].update(),xe}})}return H}()},{key:"renderProp",value:function(){function H(G){var K=this,ae=(0,f.default)(this[R]);if(typeof ae.wrap!="function")throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");return this.single("renderProp",function(pe){if(pe.nodeType==="host")throw new TypeError("ReactWrapper::renderProp() can only be called on custom components");if(typeof G!="string")throw new TypeError("ReactWrapper::renderProp(): `propName` must be a string");var we=K.props();if(!(0,u.default)(we,G))throw new Error("ReactWrapper::renderProp(): no prop called \u201C"+String(G)+"\u201C found");var Ee=we[G];if(typeof Ee!="function")throw new TypeError("ReactWrapper::renderProp(): expected prop \u201C"+String(G)+"\u201C to contain a function, but it holds \u201C"+(typeof Ee>"u"?"undefined":t(Ee))+"\u201C");return function(){var xe=Ee.apply(void 0,arguments),He=ae.wrap(xe);return K.wrap(He,null,K[R])}})}return H}()},{key:"key",value:function(){function H(){return this.single("key",function(G){return G.key===void 0?null:G.key})}return H}()},{key:"type",value:function(){function H(){return this.single("type",function(G){return(0,c.typeOfNode)(G)})}return H}()},{key:"name",value:function(){function H(){var G=(0,f.default)(this[R]);return this.single("name",function(K){return G.displayNameOfNode?G.displayNameOfNode(K):(0,c.displayNameOfNode)(K)})}return H}()},{key:"hasClass",value:function(){function H(G){return typeof G=="string"&&G.indexOf(".")!==-1&&console.warn("It looks like you're calling `ReactWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."),this.single("hasClass",function(K){return(0,d.hasClassName)(K,G)})}return H}()},{key:"forEach",value:function(){function H(G){var K=this;return this.getNodesInternal().forEach(function(ae,pe){return G.call(K,K.wrap(ae),pe)}),this}return H}()},{key:"map",value:function(){function H(G){var K=this;return this.getNodesInternal().map(function(ae,pe){return G.call(K,K.wrap(ae),pe)})}return H}()},{key:"reduce",value:function(){function H(G){var K=this,ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduce(function(pe,we,Ee){return G.call(K,pe,K.wrap(we),Ee)},ae):this.getNodesInternal().reduce(function(pe,we,Ee){return G.call(K,Ee===1?K.wrap(pe):pe,K.wrap(we),Ee)})}return H}()},{key:"reduceRight",value:function(){function H(G){var K=this,ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduceRight(function(pe,we,Ee){return G.call(K,pe,K.wrap(we),Ee)},ae):this.getNodesInternal().reduceRight(function(pe,we,Ee){return G.call(K,Ee===1?K.wrap(pe):pe,K.wrap(we),Ee)})}return H}()},{key:"slice",value:function(){function H(G,K){return this.wrap(this.getNodesInternal().slice(G,K))}return H}()},{key:"some",value:function(){function H(G){if(this[D]===this)throw new Error("ReactWrapper::some() can not be called on the root");var K=(0,p.buildPredicate)(G);return this.getNodesInternal().some(K)}return H}()},{key:"someWhere",value:function(){function H(G){var K=this;return this.getNodesInternal().some(function(ae,pe){return G.call(K,K.wrap(ae),pe)})}return H}()},{key:"every",value:function(){function H(G){var K=(0,p.buildPredicate)(G);return this.getNodesInternal().every(K)}return H}()},{key:"everyWhere",value:function(){function H(G){var K=this;return this.getNodesInternal().every(function(ae,pe){return G.call(K,K.wrap(ae),pe)})}return H}()},{key:"flatMap",value:function(){function H(G){var K=this,ae=this.getNodesInternal().map(function(we,Ee){return G.call(K,K.wrap(we),Ee)}),pe=(0,o.default)(ae,1);return this.wrap(pe.filter(Boolean))}return H}()},{key:"findWhere",value:function(){function H(G){var K=this;return P(this,function(ae){var pe=K.wrap(ae);return pe.length>0&&G(pe)})}return H}()},{key:"get",value:function(){function H(G){return this.getElements()[G]}return H}()},{key:"at",value:function(){function H(G){var K=this.getNodesInternal();return G<K.length?this.wrap(K[G]):this.wrap([])}return H}()},{key:"first",value:function(){function H(){return this.at(0)}return H}()},{key:"last",value:function(){function H(){return this.at(this.length-1)}return H}()},{key:"isEmpty",value:function(){function H(){return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."),!this.exists()}return H}()},{key:"exists",value:function(){function H(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return arguments.length>0?this.find(G).exists():this.length>0}return H}()},{key:"single",value:function(){function H(G,K){var ae=typeof G=="string"?G:"unknown",pe=typeof K=="function"?K:G;if(this.length!==1)throw new Error("Method \u201C"+ae+"\u201D is meant to be run on 1 node. "+String(this.length)+" found instead.");return pe.call(this,this.getNodeInternal())}return H}()},{key:"wrap",value:function(){function H(G){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[D];if(G instanceof j)return G;for(var ae=arguments.length,pe=Array(ae>2?ae-2:0),we=2;we<ae;we++)pe[we-2]=arguments[we];return new(Function.prototype.bind.apply(j,[null].concat([G,K],pe)))}return H}()},{key:"debug",value:function(){function H(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,h.debugNodes)(this.getNodesInternal(),G)}return H}()},{key:"tap",value:function(){function H(G){return G(this),this}return H}()},{key:"detach",value:function(){function H(){if(this[D]!==this)throw new Error("ReactWrapper::detach() can only be called on the root");if(!this[R].attachTo)throw new Error("ReactWrapper::detach() can only be called on when the `attachTo` option was passed into `mount()`.");this[S].unmount()}return H}()},{key:"hostNodes",value:function(){function H(){return this.filterWhere(function(G){return typeof G.type()=="string"})}return H}()}]),j}(),Z=function(j){E(H,j);function H(G,K){y(this,H);var ae=v(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,K.getNode(),G));return(0,c.privateSet)(ae,D,ae),(0,c.privateSet)(ae,S,K),ae[L].push(G),ae}return n(H,[{key:"getWrappingComponent",value:function(){function G(){throw new TypeError("ReactWrapper::getWrappingComponent() can only be called on the root")}return G}()}]),H}(fe);c.ITERATOR_SYMBOL&&Object.defineProperty(fe.prototype,c.ITERATOR_SYMBOL,{configurable:!0,value:function(){function j(){var H,G=this[b][c.ITERATOR_SYMBOL](),K=(0,f.default)(this[R]);return H={},g(H,c.ITERATOR_SYMBOL,function(){return this}),g(H,"next",function(){function ae(){var pe=G.next();return pe.done?{done:!0}:{done:!1,value:K.nodeToElement(pe.value)}}return ae}()),H}return j}()});function he(j,H){Object.defineProperty(fe.prototype,j,{get:function(){function G(){throw new Error(`
        Attempted to access ReactWrapper::`+String(j)+`, which was previously a private property on
        Enzyme ReactWrapper instances, but is no longer and should not be relied upon.
        `+String(H)+`
      `)}return G}(),enumerable:!1,configurable:!1})}he("node","Consider using the getElement() method instead."),he("nodes","Consider using the getElements() method instead."),he("renderer",""),he("options",""),he("complexSelector",""),e.default=fe})(Gb);var EA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=function(){function Oe(ne,oe,Te){ne===null&&(ne=Function.prototype);var I=Object.getOwnPropertyDescriptor(ne,oe);if(I===void 0){var _=Object.getPrototypeOf(ne);return _===null?void 0:Oe(_,oe,Te)}else{if("value"in I)return I.value;var C=I.get;return C===void 0?void 0:C.call(Te)}}return Oe}(),n=function(){function Oe(ne,oe){for(var Te=0;Te<oe.length;Te++){var I=oe[Te];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(ne,I.key,I)}}return function(ne,oe,Te){return oe&&Oe(ne.prototype,oe),Te&&Oe(ne,Te),ne}}(),i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Oe){return typeof Oe}:function(Oe){return Oe&&typeof Symbol=="function"&&Oe.constructor===Symbol&&Oe!==Symbol.prototype?"symbol":typeof Oe},r=Xu,a=E(r),o=Vf,s=E(o),u=zr,c=E(u),l=u0.exports,f=E(l),h=Yf,d=hs,p=E(d),m=fs,g=nr,v=xc;function E(Oe){return Oe&&Oe.__esModule?Oe:{default:Oe}}function y(Oe,ne){if(!Oe)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ne&&(typeof ne=="object"||typeof ne=="function")?ne:Oe}function T(Oe,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ne);Oe.prototype=Object.create(ne&&ne.prototype,{constructor:{value:Oe,enumerable:!1,writable:!0,configurable:!0}}),ne&&(Object.setPrototypeOf?Object.setPrototypeOf(Oe,ne):Oe.__proto__=ne)}function b(Oe){if(Array.isArray(Oe)){for(var ne=0,oe=Array(Oe.length);ne<Oe.length;ne++)oe[ne]=Oe[ne];return oe}else return Array.from(Oe)}function S(Oe,ne){if(!(Oe instanceof ne))throw new TypeError("Cannot call a class as a function")}function w(Oe,ne,oe){return ne in Oe?Object.defineProperty(Oe,ne,{value:oe,enumerable:!0,configurable:!0,writable:!0}):Oe[ne]=oe,Oe}var D=(0,h.sym)("__node__"),R=(0,h.sym)("__nodes__"),M=(0,h.sym)("__renderer__"),k=(0,h.sym)("__unrendered__"),L=(0,h.sym)("__root__"),$=(0,h.sym)("__options__"),P=(0,h.sym)("__setState__"),B=(0,h.sym)("__rootNodes__"),X=(0,h.sym)("__childContext__"),ee=(0,h.sym)("__wrappingComponent__"),se=(0,h.sym)("__primaryWrapper__"),fe=(0,h.sym)("__rootFinder__"),Z=(0,h.sym)("__providerValues__");function he(Oe,ne){var oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.treeFilter;return Oe.flatMap(function(Te){return oe(Te.getNodeInternal(),ne)})}function j(Oe,ne){return Oe.wrap(Oe.getNodesInternal().filter(ne).filter(Boolean))}function H(Oe){var ne=Oe.lifecycleExperimental,oe=Oe.disableLifecycleMethods,Te=Oe.enableComponentDidUpdateOnSetState,I=Oe.supportPrevContextArgumentOfComponentDidUpdate,_=Oe.lifecycles;if(typeof ne<"u"&&typeof ne!="boolean")throw new Error("lifecycleExperimental must be either true or false if provided");if(typeof oe<"u"&&typeof oe!="boolean")throw new Error("disableLifecycleMethods must be either true or false if provided");if(ne!=null&&oe!=null&&ne===oe)throw new Error("lifecycleExperimental and disableLifecycleMethods cannot be set to the same value");if(typeof Te<"u"&&_.componentDidUpdate&&_.componentDidUpdate.onSetState!==Te)throw new TypeError("the legacy enableComponentDidUpdateOnSetState option should be matched by `lifecycles: { componentDidUpdate: { onSetState: true } }`, for compatibility");if(typeof I<"u"&&_.componentDidUpdate&&_.componentDidUpdate.prevContext!==I)throw new TypeError("the legacy supportPrevContextArgumentOfComponentDidUpdate option should be matched by `lifecycles: { componentDidUpdate: { prevContext: true } }`, for compatibility")}function G(Oe){var ne=Oe.options,oe=ne.lifecycles,Te=oe===void 0?{}:oe,I=ne.enableComponentDidUpdateOnSetState,_=ne.supportPrevContextArgumentOfComponentDidUpdate,C=typeof I<"u",F=typeof _<"u",te=C||F?(0,a.default)({},C&&{onSetState:!!I},F&&{prevContext:!!_}):null,le=Te.getDerivedStateFromProps,ve=le?{hasShouldComponentUpdateBug:!!le.hasShouldComponentUpdateBug}:!1;return(0,a.default)({},Te,{setState:(0,a.default)({},Te.setState),getChildContext:(0,a.default)({calledByRenderer:!0},Te.getChildContext)},te&&{componentDidUpdate:te},{getDerivedStateFromProps:ve})}function K(Oe){return Oe.nodeType==="host"?Oe:Oe.rendered}function ae(Oe){if(Oe[L].length!==1)throw new Error("getRootNodeInternal(wrapper) can only be called when wrapper wraps one node");return Oe[L]!==Oe?Oe[B][0]:Oe[L][D]}function pe(Oe,ne){return(0,g.parentsOfNode)(ne,ae(Oe))}function we(Oe,ne){Array.isArray(ne)?((0,h.privateSet)(Oe,D,ne[0]),(0,h.privateSet)(Oe,R,ne)):((0,h.privateSet)(Oe,D,ne),(0,h.privateSet)(Oe,R,[ne])),(0,h.privateSet)(Oe,"length",Oe[R].length)}function Ee(Oe,ne,oe,Te){return!(0,f.default)(Oe,ne)||!(0,f.default)(oe,Te)}function xe(Oe){return Oe&&Oe.isPureReactComponent}function He(Oe,ne,oe){var Te=Oe.instance,I=Oe.type,_=(0,h.displayNameOfNode)(Oe);if(i(I.childContextTypes)!=="object")return console.warn(String(_)+".getChildContext(): childContextTypes must be defined in order to use getChildContext()."),{};var C=Te.getChildContext();return Object.keys(C).forEach(function(F){if(!(F in I.childContextTypes))throw new Error(String(_)+'.getChildContext(): key "'+String(F)+'" is not defined in childContextTypes.')}),typeof oe.checkPropTypes=="function"&&oe.checkPropTypes(I.childContextTypes,C,"child context",ne),C}function ke(Oe,ne){return!(0,h.isCustomComponentElement)(Oe,ne)||!Oe.type.prototype||typeof Oe.type.prototype.getChildContext!="function"?null:(0,h.spyMethod)(Oe.type.prototype,"getChildContext")}function Ye(Oe,ne,oe,Te,I){var _=ne[M];if(Oe.options.legacyContextMode==="parent")if(I)(0,h.privateSet)(ne,X,I.getLastReturnValue()),I.restore();else if(typeof oe.getChildContext=="function"){var C=[ne[D]].concat(pe(ne,ne[D])),F=He(Te,C,_);(0,h.privateSet)(ne,X,F)}else(0,h.privateSet)(ne,X,null)}function je(Oe,ne){var oe=Oe.type.getDerivedStateFromProps;if(typeof oe=="function")var Te=Oe.instance,I=(0,h.spyMethod)(Te,"shouldComponentUpdate",function(C){return function(){function F(){Te.state=ne;for(var te=arguments.length,le=Array(te),ve=0;ve<te;ve++)le[ve]=arguments[ve];var Ue=C.apply(Te,le),We=le[1];return Te.state=We,_(),Ue}return F}()}),_=I.restore}function dt(Oe,ne,oe){var Te=Oe[D],I=Te&&oe.nodeToElement(Te);if(Oe.type()===ne)return Oe.dive();if(I&&(0,h.isCustomComponentElement)(I,oe))return dt(Oe.dive(),ne,oe);for(var _=Oe.children(),C=0;C<_.length;C+=1){var F=dt(_.at(C),ne,oe);if(typeof F<"u")return F}}function st(Oe,ne){var oe=dt(Oe,Oe[fe],ne);if(!oe)throw new Error("`wrappingComponent` must render its children!");return{legacyContext:oe[$].context,providerValues:oe[Z]}}function qe(Oe,ne,oe,Te){var I=(0,h.makeOptions)(oe),_=(0,p.default)(oe);if((0,h.privateSet)(I,Z,oe[Z]),ne||!(0,h.isCustomComponent)(I.wrappingComponent,_))return I;if(typeof _.wrapWithWrappingComponent!="function")throw new TypeError("your adapter does not support `wrappingComponent`. Try upgrading it!");var C=_.wrapWithWrappingComponent(Oe,I),F=C.node,te=C.RootFinder,le=new On(F,Te,te),ve=st(le,_),Ue=ve.legacyContext,We=ve.providerValues;return(0,h.privateSet)(Te,ee,le),(0,a.default)({},I,w({context:(0,a.default)({},I.context,Ue)},Z,We))}function bt(Oe){var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},oe=(0,a.default)({},Oe[$],ne,{context:ne.context||(0,a.default)({},Oe[$].context,Oe[L][X])});return(0,h.privateSet)(oe,Z,Oe[L][Z]),oe}var yt=function(){function Oe(ne,oe){var Te=this,I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};S(this,Oe),H(I);var _=qe(ne,oe,I,this),C=(0,p.default)(_),F=G(C);if(oe)(0,h.privateSet)(this,L,oe),(0,h.privateSet)(this,k,null),(0,h.privateSet)(this,M,oe[M]),we(this,ne),(0,h.privateSet)(this,$,oe[$]),(0,h.privateSet)(this,B,oe[R]),(0,h.privateSet)(this,Z,null);else{if(!C.isValidElement(ne))throw new TypeError("ShallowWrapper can only wrap valid elements");var te=F.getChildContext.calledByRenderer?ke(ne,C):null;(0,h.privateSet)(this,L,this),(0,h.privateSet)(this,k,ne);var le=C.createRenderer((0,a.default)({mode:"shallow"},_));(0,h.privateSet)(this,M,le);var ve=new Map(_[Z]||[]);this[M].render(ne,_.context,{providerValues:ve});var Ue=this[M].getNode();we(this,K(Ue)),(0,h.privateSet)(this,$,_),(0,h.privateSet)(this,Z,ve);var We=Ue.instance;We&&!_.disableLifecycleMethods&&(F.componentDidUpdate.onSetState&&!We[P]&&((0,h.privateSet)(We,P,We.setState),We.setState=function(nt){var Qe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return Te.setState.apply(Te,b(Qe==null?[nt]:[nt,Qe]))}),typeof We.componentDidMount=="function"&&this[M].batchedUpdates(function(){We.componentDidMount()}),Ye(C,this,We,Ue,te))}}return n(Oe,[{key:"root",value:function(){function ne(){return this[L]}return ne}()},{key:"getNodeInternal",value:function(){function ne(){if(this.length!==1)throw new Error("ShallowWrapper::getNode() can only be called when wrapping one node");return this[L]===this&&this.update(),this[D]}return ne}()},{key:"getNodesInternal",value:function(){function ne(){return this[L]===this&&this.length===1&&this.update(),this[R]}return ne}()},{key:"getElement",value:function(){function ne(){var oe=this;return this.single("getElement",function(Te){return(0,p.default)(oe[$]).nodeToElement(Te)})}return ne}()},{key:"getElements",value:function(){function ne(){var oe=this;return this.getNodesInternal().map(function(Te){return(0,p.default)(oe[$]).nodeToElement(Te)})}return ne}()},{key:"getNode",value:function(){function ne(){throw new Error("ShallowWrapper::getNode() is no longer supported. Use ShallowWrapper::getElement() instead")}return ne}()},{key:"getNodes",value:function(){function ne(){throw new Error("ShallowWrapper::getNodes() is no longer supported. Use ShallowWrapper::getElements() instead")}return ne}()},{key:"instance",value:function(){function ne(){if(this[L]!==this)throw new Error("ShallowWrapper::instance() can only be called on the root");return this[M].getNode().instance}return ne}()},{key:"getWrappingComponent",value:function(){function ne(){if(this[L]!==this)throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root");if(!this[$].wrappingComponent)throw new Error("ShallowWrapper::getWrappingComponent() can only be called on a wrapper that was originally passed a `wrappingComponent` option");return this[ee]}return ne}()},{key:"update",value:function(){function ne(){if(this[L]!==this)throw new Error("ShallowWrapper::update() can only be called on the root");if(this.length!==1)throw new Error("ShallowWrapper::update() can only be called when wrapping one node");return we(this,K(this[M].getNode())),this}return ne}()},{key:"unmount",value:function(){function ne(){return this[M].unmount(),this[L][ee]&&this[L][ee].unmount(),this}return ne}()},{key:"rerender",value:function(){function ne(oe,Te){var I=this,_=(0,p.default)(this[$]);return this.single("rerender",function(){(0,h.withSetStateAllowed)(function(){var C=I[M].getNode(),F=C.instance||{},te=C.type||{},le=F.state,ve=F.props||I[k].props,Ue=F.context||I[$].context,We=Te||Ue;Te&&(I[$]=(0,a.default)({},I[$],{context:We})),I[M].batchedUpdates(function(){var nt=G(_),Qe=!0,ot=void 0,xn=void 0;if(!I[$].disableLifecycleMethods&&F){if(typeof F.shouldComponentUpdate=="function"){var Tr=nt.getDerivedStateFromProps;Tr&&Tr.hasShouldComponentUpdateBug&&je(C,le),ot=(0,h.spyMethod)(F,"shouldComponentUpdate")}nt.getChildContext.calledByRenderer&&typeof F.getChildContext=="function"&&(xn=(0,h.spyMethod)(F,"getChildContext"))}if(!ot&&xe(F)&&(Qe=Ee(ve,oe,le,F.state)),oe&&(I[k]=(0,h.cloneElement)(_,I[k],oe)),I[M].render(I[k],We,{providerValues:I[Z]}),ot&&(Qe=ot.getLastReturnValue(),ot.restore()),Qe&&!I[$].disableLifecycleMethods&&F)if(Ye(_,I,F,C,xn),nt.getSnapshotBeforeUpdate){var Li=void 0;typeof F.getSnapshotBeforeUpdate=="function"&&(Li=F.getSnapshotBeforeUpdate(ve,le)),nt.componentDidUpdate&&typeof F.componentDidUpdate=="function"&&(!le||(0,f.default)(le,I.instance().state)||typeof te.getDerivedStateFromProps=="function")&&F.componentDidUpdate(ve,le,Li)}else nt.componentDidUpdate&&typeof F.componentDidUpdate=="function"&&(nt.componentDidUpdate.prevContext?F.componentDidUpdate(ve,le,Ue):(!le||(0,f.default)(I.instance().state,le))&&F.componentDidUpdate(ve,le));else(0,f.default)(oe,F.props)||(F.props=(Object.freeze||Object)((0,a.default)({},F.props,oe)));I.update()})})}),this}return ne}()},{key:"setProps",value:function(){function ne(oe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this[L]!==this)throw new Error("ShallowWrapper::setProps() can only be called on the root");if(arguments.length>1&&typeof Te!="function")throw new TypeError("ReactWrapper::setProps() expects a function as its second argument");return this.rerender(oe),Te&&Te(),this}return ne}()},{key:"setState",value:function(){function ne(oe){var Te=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(this[L]!==this)throw new Error("ShallowWrapper::setState() can only be called on the root");if(this.instance()===null||this[M].getNode().nodeType!=="class")throw new Error("ShallowWrapper::setState() can only be called on class components");if(arguments.length>1&&typeof I!="function")throw new TypeError("ReactWrapper::setState() expects a function as its second argument");return this.single("setState",function(){(0,h.withSetStateAllowed)(function(){var _=(0,p.default)(Te[$]),C=G(_),F=Te[M].getNode(),te=F.instance,le=te.props,ve=te.state,Ue=te.context,We=typeof oe=="function"?oe.call(te,ve,le):oe,nt=!C.setState.skipsComponentDidUpdateOnNullish||We!=null,Qe=void 0,ot=void 0,xn=!0;if(!Te[$].disableLifecycleMethods&&te){if(C.componentDidUpdate&&C.componentDidUpdate.onSetState&&typeof te.shouldComponentUpdate=="function"){var Tr=C.getDerivedStateFromProps;Tr&&Tr.hasShouldComponentUpdateBug&&je(F,oe),Qe=(0,h.spyMethod)(te,"shouldComponentUpdate")}C.getChildContext.calledByRenderer&&typeof te.getChildContext=="function"&&(ot=(0,h.spyMethod)(te,"getChildContext"))}if(!Qe&&xe(te)&&(xn=Ee(le,te.props,ve,(0,a.default)({},ve,We))),te[P]?te[P](We):te.setState(We),Qe&&(xn=Qe.getLastReturnValue(),Qe.restore()),nt&&xn&&!Te[$].disableLifecycleMethods&&(Ye(_,Te,te,F,ot),C.componentDidUpdate&&C.componentDidUpdate.onSetState))if(C.getSnapshotBeforeUpdate&&typeof te.getSnapshotBeforeUpdate=="function"){var Li=te.getSnapshotBeforeUpdate(le,ve);typeof te.componentDidUpdate=="function"&&te.componentDidUpdate(le,ve,Li)}else typeof te.componentDidUpdate=="function"&&(C.componentDidUpdate.prevContext?te.componentDidUpdate(le,ve,Ue):te.componentDidUpdate(le,ve));Te.update(),I&&(_.invokeSetStateCallback?_.invokeSetStateCallback(te,I):I.call(te))})}),this}return ne}()},{key:"setContext",value:function(){function ne(oe){if(this[L]!==this)throw new Error("ShallowWrapper::setContext() can only be called on the root");if(!this[$].context)throw new Error("ShallowWrapper::setContext() can only be called on a wrapper that was originally passed a context option");return this.rerender(null,oe)}return ne}()},{key:"contains",value:function(){function ne(oe){var Te=(0,p.default)(this[$]);if(!(0,h.isReactElementAlike)(oe,Te))throw new Error("ShallowWrapper::contains() can only be called with a ReactElement (or an array of them), a string, or a number as an argument.");var I=Array.isArray(oe)?function(_){return(0,h.containsChildrenSubArray)(h.nodeEqual,_,oe.map(function(C){return Te.elementToNode(C)}))}:function(_){return(0,h.nodeEqual)(Te.elementToNode(oe),_)};return he(this,I).length>0}return ne}()},{key:"containsMatchingElement",value:function(){function ne(oe){var Te=(0,p.default)(this[$]),I=Te.elementToNode(oe),_=function(){function C(F){return(0,h.nodeMatches)(I,F,function(te,le){return te<=le})}return C}();return he(this,_).length>0}return ne}()},{key:"containsAllMatchingElements",value:function(){function ne(oe){var Te=this;if(!Array.isArray(oe))throw new TypeError("nodes should be an Array");return oe.every(function(I){return Te.containsMatchingElement(I)})}return ne}()},{key:"containsAnyMatchingElements",value:function(){function ne(oe){var Te=this;return Array.isArray(oe)&&oe.some(function(I){return Te.containsMatchingElement(I)})}return ne}()},{key:"equals",value:function(){function ne(oe){var Te=this;return this.single("equals",function(){return(0,h.nodeEqual)(Te.getNodeInternal(),oe)})}return ne}()},{key:"matchesElement",value:function(){function ne(oe){var Te=this;return this.single("matchesElement",function(){var I=(0,p.default)(Te[$]),_=I.elementToNode(oe);return(0,h.nodeMatches)(_,Te.getNodeInternal(),function(C,F){return C<=F})})}return ne}()},{key:"find",value:function(){function ne(oe){return this.wrap((0,v.reduceTreesBySelector)(oe,this.getNodesInternal()))}return ne}()},{key:"is",value:function(){function ne(oe){var Te=(0,v.buildPredicate)(oe);return this.single("is",function(I){return Te(I)})}return ne}()},{key:"isEmptyRender",value:function(){function ne(){var oe=this.getNodesInternal();return oe.every(function(Te){return(0,h.isEmptyValue)(Te)})}return ne}()},{key:"filterWhere",value:function(){function ne(oe){var Te=this;return j(this,function(I){return oe(Te.wrap(I))})}return ne}()},{key:"filter",value:function(){function ne(oe){var Te=(0,v.buildPredicate)(oe);return j(this,Te)}return ne}()},{key:"not",value:function(){function ne(oe){var Te=(0,v.buildPredicate)(oe);return j(this,function(I){return!Te(I)})}return ne}()},{key:"text",value:function(){function ne(){return this.single("text",g.getTextFromNode)}return ne}()},{key:"html",value:function(){function ne(){var oe=this;return this.single("html",function(Te){if(oe.type()===null)return null;var I=(0,p.default)(oe[$]),_=I.createRenderer((0,a.default)({},oe[$],{mode:"string"}));return _.render(I.nodeToElement(Te))})}return ne}()},{key:"render",value:function(){function ne(){var oe=this.html();return(0,h.loadCheerioRoot)(oe)}return ne}()},{key:"simulate",value:function(){function ne(oe){for(var Te=this,I=arguments.length,_=Array(I>1?I-1:0),C=1;C<I;C++)_[C-1]=arguments[C];return this.single("simulate",function(F){var te;return(te=Te[M]).simulateEvent.apply(te,[F,oe].concat(_)),Te[L].update(),Te})}return ne}()},{key:"simulateError",value:function(){function ne(oe){var Te=this;return this.single("simulateError",function(I){if(I.nodeType==="host")throw new TypeError("ShallowWrapper::simulateError() can only be called on custom components");var _=Te[M];if(typeof _.simulateError!="function")throw new TypeError("your adapter does not support `simulateError`. Try upgrading it!");var C=ae(Te),F=[I].concat(pe(Te,I));return _.simulateError(F,C,oe),Te})}return ne}()},{key:"props",value:function(){function ne(){return this.single("props",g.propsOfNode)}return ne}()},{key:"state",value:function(){function ne(oe){var Te=this;if(this[L]!==this)throw new Error("ShallowWrapper::state() can only be called on the root");if(this.instance()===null||this[M].getNode().nodeType!=="class")throw new Error("ShallowWrapper::state() can only be called on class components");var I=this.single("state",function(){return Te.instance().state});if(typeof oe<"u"){if(I==null)throw new TypeError('ShallowWrapper::state("'+String(oe)+'") requires that `state` not be `null` or `undefined`');return I[oe]}return I}return ne}()},{key:"context",value:function(){function ne(oe){var Te=this;if(this[L]!==this)throw new Error("ShallowWrapper::context() can only be called on the root");if(!this[$].context)throw new Error("ShallowWrapper::context() can only be called on a wrapper that was originally passed a context option");if(this.instance()===null)throw new Error("ShallowWrapper::context() can only be called on wrapped nodes that have a non-null instance");var I=this.single("context",function(){return Te.instance().context});return oe?I[oe]:I}return ne}()},{key:"children",value:function(){function ne(oe){var Te=this.flatMap(function(I){return(0,g.childrenOfNode)(I.getNodeInternal())});return oe?Te.filter(oe):Te}return ne}()},{key:"childAt",value:function(){function ne(oe){var Te=this;return this.single("childAt",function(){return Te.children().at(oe)})}return ne}()},{key:"parents",value:function(){function ne(oe){var Te=this;return this.single("parents",function(I){var _=Te.wrap(pe(Te,I));return oe?_.filter(oe):_})}return ne}()},{key:"parent",value:function(){function ne(){return this.flatMap(function(oe){return[oe.parents().get(0)]})}return ne}()},{key:"closest",value:function(){function ne(oe){if(this.is(oe))return this;var Te=this.parents().filter(oe);return Te.length>0?Te.first():this.findWhere(function(){return!1})}return ne}()},{key:"shallow",value:function(){function ne(){var oe=this,Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.single("shallow",function(I){var _=bt(oe,Te);return oe.wrap((0,p.default)(oe[$]).nodeToElement(I),null,_)})}return ne}()},{key:"prop",value:function(){function ne(oe){return this.props()[oe]}return ne}()},{key:"invoke",value:function(){function ne(oe){var Te=this;return this.single("invoke",function(){var I=Te.prop(oe);if(typeof I!="function")throw new TypeError("ShallowWrapper::invoke() requires the name of a prop whose value is a function");return function(){var _=I.apply(void 0,arguments);return Te[L].update(),_}})}return ne}()},{key:"renderProp",value:function(){function ne(oe){var Te=this,I=(0,p.default)(this[$]);if(typeof I.wrap!="function")throw new RangeError("your adapter does not support `wrap`. Try upgrading it!");return this.single("renderProp",function(_){if(_.nodeType==="host")throw new TypeError("ShallowWrapper::renderProp() can only be called on custom components");if(typeof oe!="string")throw new TypeError("ShallowWrapper::renderProp(): `propName` must be a string");var C=Te.props();if(!(0,c.default)(C,oe))throw new Error("ShallowWrapper::renderProp(): no prop called \u201C"+String(oe)+"\u201C found");var F=C[oe];if(typeof F!="function")throw new TypeError("ShallowWrapper::renderProp(): expected prop \u201C"+String(oe)+"\u201C to contain a function, but it holds \u201C"+(typeof F>"u"?"undefined":i(F))+"\u201C");return function(){var te=F.apply(void 0,arguments),le=I.wrap(te);return Te.wrap(le,null,Te[$])}})}return ne}()},{key:"key",value:function(){function ne(){return this.single("key",function(oe){return oe.key===void 0?null:oe.key})}return ne}()},{key:"type",value:function(){function ne(){return this.single("type",function(oe){return(0,h.typeOfNode)(oe)})}return ne}()},{key:"name",value:function(){function ne(){var oe=(0,p.default)(this[$]);return this.single("name",function(Te){return oe.displayNameOfNode?oe.displayNameOfNode(Te):(0,h.displayNameOfNode)(Te)})}return ne}()},{key:"hasClass",value:function(){function ne(oe){return typeof oe=="string"&&oe.indexOf(".")!==-1&&console.warn("It looks like you're calling `ShallowWrapper::hasClass()` with a CSS selector. hasClass() expects a class name, not a CSS selector."),this.single("hasClass",function(Te){return(0,g.hasClassName)(Te,oe)})}return ne}()},{key:"forEach",value:function(){function ne(oe){var Te=this;return this.getNodesInternal().forEach(function(I,_){return oe.call(Te,Te.wrap(I),_)}),this}return ne}()},{key:"map",value:function(){function ne(oe){var Te=this;return this.getNodesInternal().map(function(I,_){return oe.call(Te,Te.wrap(I),_)})}return ne}()},{key:"reduce",value:function(){function ne(oe){var Te=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduce(function(_,C,F){return oe.call(Te,_,Te.wrap(C),F)},I):this.getNodesInternal().reduce(function(_,C,F){return oe.call(Te,F===1?Te.wrap(_):_,Te.wrap(C),F)})}return ne}()},{key:"reduceRight",value:function(){function ne(oe){var Te=this,I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return arguments.length>1?this.getNodesInternal().reduceRight(function(_,C,F){return oe.call(Te,_,Te.wrap(C),F)},I):this.getNodesInternal().reduceRight(function(_,C,F){return oe.call(Te,F===1?Te.wrap(_):_,Te.wrap(C),F)})}return ne}()},{key:"slice",value:function(){function ne(oe,Te){return this.wrap(this.getNodesInternal().slice(oe,Te))}return ne}()},{key:"some",value:function(){function ne(oe){if(this[L]===this)throw new Error("ShallowWrapper::some() can not be called on the root");var Te=(0,v.buildPredicate)(oe);return this.getNodesInternal().some(Te)}return ne}()},{key:"someWhere",value:function(){function ne(oe){var Te=this;return this.getNodesInternal().some(function(I,_){return oe.call(Te,Te.wrap(I),_)})}return ne}()},{key:"every",value:function(){function ne(oe){var Te=(0,v.buildPredicate)(oe);return this.getNodesInternal().every(Te)}return ne}()},{key:"everyWhere",value:function(){function ne(oe){var Te=this;return this.getNodesInternal().every(function(I,_){return oe.call(Te,Te.wrap(I),_)})}return ne}()},{key:"flatMap",value:function(){function ne(oe){var Te=this,I=this.getNodesInternal().map(function(C,F){return oe.call(Te,Te.wrap(C),F)}),_=(0,s.default)(I,1);return this.wrap(_.filter(Boolean))}return ne}()},{key:"findWhere",value:function(){function ne(oe){var Te=this;return he(this,function(I){var _=Te.wrap(I);return _.length>0&&oe(_)})}return ne}()},{key:"get",value:function(){function ne(oe){return this.getElements()[oe]}return ne}()},{key:"at",value:function(){function ne(oe){var Te=this.getNodesInternal();return oe<Te.length?this.wrap(Te[oe]):this.wrap([])}return ne}()},{key:"first",value:function(){function ne(){return this.at(0)}return ne}()},{key:"last",value:function(){function ne(){return this.at(this.length-1)}return ne}()},{key:"isEmpty",value:function(){function ne(){return console.warn("Enzyme::Deprecated method isEmpty() called, use exists() instead."),!this.exists()}return ne}()},{key:"exists",value:function(){function ne(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return arguments.length>0?this.find(oe).exists():this.length>0}return ne}()},{key:"single",value:function(){function ne(oe,Te){var I=typeof oe=="string"?oe:"unknown",_=typeof Te=="function"?Te:oe;if(this.length!==1)throw new Error("Method \u201C"+I+"\u201D is meant to be run on 1 node. "+String(this.length)+" found instead.");return _.call(this,this.getNodeInternal())}return ne}()},{key:"wrap",value:function(){function ne(oe){var Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[L];if(oe instanceof Oe)return oe;for(var I=arguments.length,_=Array(I>2?I-2:0),C=2;C<I;C++)_[C-2]=arguments[C];return new(Function.prototype.bind.apply(Oe,[null].concat([oe,Te],_)))}return ne}()},{key:"debug",value:function(){function ne(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,m.debugNodes)(this.getNodesInternal(),oe)}return ne}()},{key:"tap",value:function(){function ne(oe){return oe(this),this}return ne}()},{key:"dive",value:function(){function ne(){var oe=this,Te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},I=(0,p.default)(this[$]),_="dive";return this.single(_,function(C){if(C&&C.nodeType==="host")throw new TypeError("ShallowWrapper::"+_+"() can not be called on Host Components");var F=(0,p.default)(oe[$]).nodeToElement(C);if(!(0,h.isCustomComponentElement)(F,I))throw new TypeError("ShallowWrapper::"+_+"() can only be called on components");var te=bt(oe,Te);return oe.wrap(F,null,te)})}return ne}()},{key:"hostNodes",value:function(){function ne(){return this.filterWhere(function(oe){return typeof oe.type()=="string"})}return ne}()}]),Oe}();function Bt(Oe){var ne=(0,p.default)(Oe[$]),oe=Oe[se],Te=oe[M],I=Te.getNode(),_=st(Oe,ne),C=_.legacyContext,F=_.providerValues,te=oe[Z];if(oe.setContext((0,a.default)({},Oe[se][$].context,C)),oe[Z]=new Map([].concat(b(te),b(F))),typeof ne.isContextConsumer=="function"&&ne.isContextConsumer(I.type)){var le=I.type,ve=ne.getProviderFromConsumer(le),Ue=F.get(ve),We=te.get(ve);Ue!==We&&oe.rerender()}}var On=function(Oe){T(ne,Oe);function ne(oe,Te,I){S(this,ne);var _=y(this,(ne.__proto__||Object.getPrototypeOf(ne)).call(this,oe));return(0,h.privateSet)(_,se,Te),(0,h.privateSet)(_,fe,I),_}return n(ne,[{key:"rerender",value:function(){function oe(){for(var Te,I=arguments.length,_=Array(I),C=0;C<I;C++)_[C]=arguments[C];var F=(Te=t(ne.prototype.__proto__||Object.getPrototypeOf(ne.prototype),"rerender",this)).call.apply(Te,[this].concat(_));return Bt(this),F}return oe}()},{key:"setState",value:function(){function oe(){for(var Te,I=arguments.length,_=Array(I),C=0;C<I;C++)_[C]=arguments[C];var F=(Te=t(ne.prototype.__proto__||Object.getPrototypeOf(ne.prototype),"setState",this)).call.apply(Te,[this].concat(_));return Bt(this),F}return oe}()},{key:"getWrappingComponent",value:function(){function oe(){throw new Error("ShallowWrapper::getWrappingComponent() can only be called on the root")}return oe}()}]),ne}(yt);h.ITERATOR_SYMBOL&&Object.defineProperty(yt.prototype,h.ITERATOR_SYMBOL,{configurable:!0,value:function(){function Oe(){var ne,oe=this.getNodesInternal()[h.ITERATOR_SYMBOL](),Te=(0,p.default)(this[$]);return ne={},w(ne,h.ITERATOR_SYMBOL,function(){return this}),w(ne,"next",function(){function I(){var _=oe.next();return _.done?{done:!0}:{done:!1,value:Te.nodeToElement(_.value)}}return I}()),ne}return Oe}()});function gt(Oe,ne){Object.defineProperty(yt.prototype,Oe,{get:function(){function oe(){throw new Error(`
        Attempted to access ShallowWrapper::`+String(Oe)+`, which was previously a private property on
        Enzyme ShallowWrapper instances, but is no longer and should not be relied upon.
        `+String(ne)+`
      `)}return oe}(),enumerable:!1,configurable:!1})}gt("node","Consider using the getElement() method instead."),gt("nodes","Consider using the getElements() method instead."),gt("renderer",""),gt("options",""),gt("complexSelector",""),e.default=yt})(EA);var PF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var t=Gb,n=i(t);function i(a){return a&&a.__esModule?a:{default:a}}function r(a,o){return new n.default(a,null,o)}})(PF);var RF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var t=EA,n=i(t);function i(a){return a&&a.__esModule?a:{default:a}}function r(a,o){return new n.default(a,null,o)}})(RF);var NF={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var t=Xu,n=o(t),i=hs,r=o(i),a=Yf;function o(u){return u&&u.__esModule?u:{default:u}}function s(u){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=(0,r.default)(c),f=l.createRenderer((0,n.default)({mode:"string"},c)),h=f.render(u,c.context);return(0,a.loadCheerioRoot)(h)}})(NF);var tme=Gb,nme=Nc(tme),rme=EA,ime=Nc(rme),ame=N6,ome=Nc(ame),sme=PF,lme=Nc(sme),ume=RF,cme=Nc(ume),hme=NF,fme=Nc(hme),dme=Ol;function Nc(e){return e&&e.__esModule?e:{default:e}}var pme={render:fme.default,shallow:cme.default,mount:lme.default,ShallowWrapper:ime.default,ReactWrapper:nme.default,configure:dme.merge,EnzymeAdapter:ome.default};const bA=100,mme=(e,t,n,i)=>{for(const{viewId:r,trackId:a,track:o}of e.instance().iterateOverTracks())r===t&&a===n&&(o.options={...o.options,...i});e.setState(e.instance().state)},gme=e=>{for(const t of e.iterateOverTracks())if(GR(e,t.viewId,t.trackId).activeTransitions>0)return!0;return!1},_A=(e,t)=>{gme(e)?setTimeout(()=>{_A(e,t)},bA):t()},dv=e=>{Rf>0?setTimeout(()=>dv(e),bA):e()},vme=e=>{for(const t of e.iterateOverTracks()){let n=Xg(e,t.viewId,t.trackId);if(!(!t.track.server&&!t.track.tilesetUid&&!(t.track.data&&t.track.data.type==="divided")))if(t.track.data&&t.track.data.type==="divided"||t.track.server&&t.track.tilesetUid){if(n.originalTrack&&(n=n.originalTrack),!(n.tilesetInfo||n.chromInfo)||n.fetching&&n.fetching.size)return!0}else throw Error('"server" and "tilesetUid" belong together')}return!1},Rd=(e,t)=>{vme(e)?setTimeout(()=>{Rd(e,t)},bA):t()},SA=(e,t,n,i,r={})=>{const{style:a="width:800px; background-color: lightgreen;",bounded:o=!1,extendedDelay:s=!1}=r;t&&(t.unmount(),t.detach()),e&&globalThis.document.body.removeChild(e);const u=globalThis.document.createElement("div");globalThis.document.body.appendChild(u),u.setAttribute("style",a),u.setAttribute("id","simple-hg-component");const c=pme.mount(A.default.createElement(MT,{options:{bounded:o},viewConfig:n}),{attachTo:u});return c.update(),dv(()=>{if(s){const l=()=>setTimeout(()=>{i()},1e3);Rd(c.instance(),l)}else Rd(c.instance(),i)}),[u,c]},yme=e=>{!e||(Un.default.unmountComponentAtNode(e),document.body.removeChild(e))};async function Tme(e,t,n,i){let r;return await new Promise(a=>{r=SA(e,t,n,a,i)}),r}var Mc=0,Nd=0,Md=0,MF=1e3,pv,Ld,mv=0,Pl=0,gv=0,Bd=typeof performance=="object"&&performance.now?performance:Date,LF=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function AA(){return Pl||(LF(Eme),Pl=Bd.now()+gv)}function Eme(){Pl=0}function vv(){this._call=this._time=this._next=null}vv.prototype=BF.prototype={constructor:vv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?AA():+n)+(t==null?0:+t),!this._next&&Ld!==this&&(Ld?Ld._next=this:pv=this,Ld=this),this._call=e,this._time=n,CA()},stop:function(){this._call&&(this._call=null,this._time=1/0,CA())}};function BF(e,t,n){var i=new vv;return i.restart(e,t,n),i}function bme(){AA(),++Mc;for(var e=pv,t;e;)(t=Pl-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Mc}function FF(){Pl=(mv=Bd.now())+gv,Mc=Nd=0;try{bme()}finally{Mc=0,Sme(),Pl=0}}function _me(){var e=Bd.now(),t=e-mv;t>MF&&(gv-=t,mv=e)}function Sme(){for(var e,t=pv,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:pv=n);Ld=e,CA(i)}function CA(e){if(!Mc){Nd&&(Nd=clearTimeout(Nd));var t=e-Pl;t>24?(e<1/0&&(Nd=setTimeout(FF,e-Bd.now()-gv)),Md&&(Md=clearInterval(Md))):(Md||(mv=Bd.now(),Md=setInterval(_me,MF)),Mc=1,LF(FF))}}function HF(e,t,n){var i=new vv;return t=t==null?0:+t,i.restart(r=>{i.stop(),e(r+t)},t,n),i}var Ame=Pu("start","end","cancel","interrupt"),Cme=[],$F=0,DA=1,wA=2,yv=3,UF=4,IA=5,Tv=6;function Ev(e,t,n,i,r,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Dme(e,n,{name:t,index:i,group:r,on:Ame,tween:Cme,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:$F})}function kA(e,t){var n=da(e,t);if(n.state>$F)throw new Error("too late; already scheduled");return n}function qa(e,t){var n=da(e,t);if(n.state>yv)throw new Error("too late; already running");return n}function da(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Dme(e,t,n){var i=e.__transition,r;i[t]=n,n.timer=BF(a,0,n.time);function a(c){n.state=DA,n.timer.restart(o,n.delay,n.time),n.delay<=c&&o(c-n.delay)}function o(c){var l,f,h,d;if(n.state!==DA)return u();for(l in i)if(d=i[l],d.name===n.name){if(d.state===yv)return HF(o);d.state===UF?(d.state=Tv,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[l]):+l<t&&(d.state=Tv,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[l])}if(HF(function(){n.state===yv&&(n.state=UF,n.timer.restart(s,n.delay,n.time),s(c))}),n.state=wA,n.on.call("start",e,e.__data__,n.index,n.group),n.state===wA){for(n.state=yv,r=new Array(h=n.tween.length),l=0,f=-1;l<h;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=d);r.length=f+1}}function s(c){for(var l=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(u),n.state=IA,1),f=-1,h=r.length;++f<h;)r[f].call(e,l);n.state===IA&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Tv,n.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function Fd(e,t){var n=e.__transition,i,r,a=!0,o;if(!!n){t=t==null?null:t+"";for(o in n){if((i=n[o]).name!==t){a=!1;continue}r=i.state>wA&&i.state<IA,i.state=Tv,i.timer.stop(),i.on.call(r?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[o]}a&&delete e.__transition}}function wme(e){return this.each(function(){Fd(this,e)})}function Ime(e,t){var n,i;return function(){var r=qa(this,e),a=r.tween;if(a!==n){i=n=a;for(var o=0,s=i.length;o<s;++o)if(i[o].name===t){i=i.slice(),i.splice(o,1);break}}r.tween=i}}function kme(e,t,n){var i,r;if(typeof n!="function")throw new Error;return function(){var a=qa(this,e),o=a.tween;if(o!==i){r=(i=o).slice();for(var s={name:t,value:n},u=0,c=r.length;u<c;++u)if(r[u].name===t){r[u]=s;break}u===c&&r.push(s)}a.tween=r}}function Ome(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=da(this.node(),n).tween,r=0,a=i.length,o;r<a;++r)if((o=i[r]).name===e)return o.value;return null}return this.each((t==null?Ime:kme)(n,e,t))}function OA(e,t,n){var i=e._id;return e.each(function(){var r=qa(this,i);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return da(r,i).value[t]}}function GF(e,t){var n;return(typeof t=="number"?$i:t instanceof Kn?Tu:(n=Kn(t))?(t=n,Tu):wE)(e,t)}function xme(e){return function(){this.removeAttribute(e)}}function Pme(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Rme(e,t,n){var i,r=n+"",a;return function(){var o=this.getAttribute(e);return o===r?null:o===i?a:a=t(i=o,n)}}function Nme(e,t,n){var i,r=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===r?null:o===i?a:a=t(i=o,n)}}function Mme(e,t,n){var i,r,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=s+"",o===u?null:o===i&&u===r?a:(r=u,a=t(i=o,s)))}}function Lme(e,t,n){var i,r,a;return function(){var o,s=n(this),u;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=s+"",o===u?null:o===i&&u===r?a:(r=u,a=t(i=o,s)))}}function Bme(e,t){var n=Vs(e),i=n==="transform"?Zk:GF;return this.attrTween(e,typeof t=="function"?(n.local?Lme:Mme)(n,i,OA(this,"attr."+e,t)):t==null?(n.local?Pme:xme)(n):(n.local?Nme:Rme)(n,i,t))}function Fme(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Hme(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function $me(e,t){var n,i;function r(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&Hme(e,a)),n}return r._value=t,r}function Ume(e,t){var n,i;function r(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&Fme(e,a)),n}return r._value=t,r}function Gme(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Vs(e);return this.tween(n,(i.local?$me:Ume)(i,t))}function zme(e,t){return function(){kA(this,e).delay=+t.apply(this,arguments)}}function jme(e,t){return t=+t,function(){kA(this,e).delay=t}}function Vme(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zme:jme)(t,e)):da(this.node(),t).delay}function Yme(e,t){return function(){qa(this,e).duration=+t.apply(this,arguments)}}function Wme(e,t){return t=+t,function(){qa(this,e).duration=t}}function qme(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Yme:Wme)(t,e)):da(this.node(),t).duration}function Xme(e,t){if(typeof t!="function")throw new Error;return function(){qa(this,e).ease=t}}function Kme(e){var t=this._id;return arguments.length?this.each(Xme(t,e)):da(this.node(),t).ease}function Zme(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;qa(this,e).ease=n}}function Qme(e){if(typeof e!="function")throw new Error;return this.each(Zme(this._id,e))}function Jme(e){typeof e!="function"&&(e=pm(e));for(var t=this._groups,n=t.length,i=new Array(n),r=0;r<n;++r)for(var a=t[r],o=a.length,s=i[r]=[],u,c=0;c<o;++c)(u=a[c])&&e.call(u,u.__data__,c,a)&&s.push(u);return new Xa(i,this._parents,this._name,this._id)}function ege(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,r=n.length,a=Math.min(i,r),o=new Array(i),s=0;s<a;++s)for(var u=t[s],c=n[s],l=u.length,f=o[s]=new Array(l),h,d=0;d<l;++d)(h=u[d]||c[d])&&(f[d]=h);for(;s<i;++s)o[s]=t[s];return new Xa(o,this._parents,this._name,this._id)}function tge(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function nge(e,t,n){var i,r,a=tge(t)?kA:qa;return function(){var o=a(this,e),s=o.on;s!==i&&(r=(i=s).copy()).on(t,n),o.on=r}}function rge(e,t){var n=this._id;return arguments.length<2?da(this.node(),n).on.on(e):this.each(nge(n,e,t))}function ige(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function age(){return this.on("end.remove",ige(this._id))}function oge(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Yh(e));for(var i=this._groups,r=i.length,a=new Array(r),o=0;o<r;++o)for(var s=i[o],u=s.length,c=a[o]=new Array(u),l,f,h=0;h<u;++h)(l=s[h])&&(f=e.call(l,l.__data__,h,s))&&("__data__"in l&&(f.__data__=l.__data__),c[h]=f,Ev(c[h],t,n,h,c,da(l,n)));return new Xa(a,this._parents,t,n)}function sge(e){var t=this._name,n=this._id;typeof e!="function"&&(e=dm(e));for(var i=this._groups,r=i.length,a=[],o=[],s=0;s<r;++s)for(var u=i[s],c=u.length,l,f=0;f<c;++f)if(l=u[f]){for(var h=e.call(l,l.__data__,f,u),d,p=da(l,n),m=0,g=h.length;m<g;++m)(d=h[m])&&Ev(d,t,n,m,h,p);a.push(h),o.push(l)}return new Xa(a,o,t,n)}var lge=ia.prototype.constructor;function uge(){return new lge(this._groups,this._parents)}function cge(e,t){var n,i,r;return function(){var a=Fi(this,e),o=(this.style.removeProperty(e),Fi(this,e));return a===o?null:a===n&&o===i?r:r=t(n=a,i=o)}}function zF(e){return function(){this.style.removeProperty(e)}}function hge(e,t,n){var i,r=n+"",a;return function(){var o=Fi(this,e);return o===r?null:o===i?a:a=t(i=o,n)}}function fge(e,t,n){var i,r,a;return function(){var o=Fi(this,e),s=n(this),u=s+"";return s==null&&(u=s=(this.style.removeProperty(e),Fi(this,e))),o===u?null:o===i&&u===r?a:(r=u,a=t(i=o,s))}}function dge(e,t){var n,i,r,a="style."+t,o="end."+a,s;return function(){var u=qa(this,e),c=u.on,l=u.value[a]==null?s||(s=zF(t)):void 0;(c!==n||r!==l)&&(i=(n=c).copy()).on(o,r=l),u.on=i}}function pge(e,t,n){var i=(e+="")=="transform"?Kk:GF;return t==null?this.styleTween(e,cge(e,i)).on("end.style."+e,zF(e)):typeof t=="function"?this.styleTween(e,fge(e,i,OA(this,"style."+e,t))).each(dge(this._id,e)):this.styleTween(e,hge(e,i,t),n).on("end.style."+e,null)}function mge(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function gge(e,t,n){var i,r;function a(){var o=t.apply(this,arguments);return o!==r&&(i=(r=o)&&mge(e,o,n)),i}return a._value=t,a}function vge(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,gge(e,t,n??""))}function yge(e){return function(){this.textContent=e}}function Tge(e){return function(){var t=e(this);this.textContent=t??""}}function Ege(e){return this.tween("text",typeof e=="function"?Tge(OA(this,"text",e)):yge(e==null?"":e+""))}function bge(e){return function(t){this.textContent=e.call(this,t)}}function _ge(e){var t,n;function i(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&bge(r)),t}return i._value=e,i}function Sge(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,_ge(e))}function Age(){for(var e=this._name,t=this._id,n=VF(),i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],s=o.length,u,c=0;c<s;++c)if(u=o[c]){var l=da(u,t);Ev(u,e,n,c,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Xa(i,this._parents,e,n)}function Cge(){var e,t,n=this,i=n._id,r=n.size();return new Promise(function(a,o){var s={value:o},u={value:function(){--r===0&&a()}};n.each(function(){var c=qa(this,i),l=c.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),c.on=t}),r===0&&a()})}var Dge=0;function Xa(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function jF(e){return ia().transition(e)}function VF(){return++Dge}var Ro=ia.prototype;Xa.prototype=jF.prototype={constructor:Xa,select:oge,selectAll:sge,selectChild:Ro.selectChild,selectChildren:Ro.selectChildren,filter:Jme,merge:ege,selection:uge,transition:Age,call:Ro.call,nodes:Ro.nodes,node:Ro.node,size:Ro.size,empty:Ro.empty,each:Ro.each,on:rge,attr:Bme,attrTween:Gme,style:pge,styleTween:vge,text:Ege,textTween:Sge,remove:age,tween:Ome,delay:Vme,duration:qme,ease:Kme,easeVarying:Qme,end:Cge,[Symbol.iterator]:Ro[Symbol.iterator]};function wge(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ige={time:null,delay:0,duration:250,ease:wge};function kge(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Oge(e){var t,n;e instanceof Xa?(t=e._id,e=e._name):(t=VF(),(n=Ige).time=AA(),e=e==null?null:e+"");for(var i=this._groups,r=i.length,a=0;a<r;++a)for(var o=i[a],s=o.length,u,c=0;c<s;++c)(u=o[c])&&Ev(u,e,t,c,o,n||kge(u,t));return new Xa(i,this._parents,e,t)}ia.prototype.interrupt=wme,ia.prototype.transition=Oge;var xge=[null];function Pge(e,t){var n=e.__transition,i,r;if(n){t=t==null?null:t+"";for(r in n)if((i=n[r]).state>DA&&i.name===t)return new Xa([[e]],xge,t,+r)}return null}const Rge=Object.freeze(Object.defineProperty({__proto__:null,transition:jF,active:Pge,interrupt:Fd},Symbol.toStringTag,{value:"Module"})),bv=e=>()=>e;function Nge(e,{sourceEvent:t,target:n,transform:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Ka(e,t,n){this.k=e,this.x=t,this.y=n}Ka.prototype={constructor:Ka,scale:function(e){return e===1?this:new Ka(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ka(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var sr=new Ka(1,0,0);YF.prototype=Ka.prototype;function YF(e){for(;!e.__zoom;)if(!(e=e.parentNode))return sr;return e.__zoom}function xA(e){e.stopImmediatePropagation()}function Hd(e){e.preventDefault(),e.stopImmediatePropagation()}function Mge(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Lge(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function WF(){return this.__zoom||sr}function Bge(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Fge(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hge(e,t,n){var i=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(r>i?(i+r)/2:Math.min(0,i)||Math.max(0,r),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function PA(){var e=Mge,t=Lge,n=Hge,i=Bge,r=Fge,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,u=kj,c=Pu("start","zoom","end"),l,f,h,d=500,p=150,m=0,g=10;function v(P){P.property("__zoom",WF).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",M).filter(r).on("touchstart.zoom",k).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",$).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(P,B,X,ee){var se=P.selection?P.selection():P;se.property("__zoom",WF),P!==se?b(P,B,X,ee):se.interrupt().each(function(){S(this,arguments).event(ee).start().zoom(null,typeof B=="function"?B.apply(this,arguments):B).end()})},v.scaleBy=function(P,B,X,ee){v.scaleTo(P,function(){var se=this.__zoom.k,fe=typeof B=="function"?B.apply(this,arguments):B;return se*fe},X,ee)},v.scaleTo=function(P,B,X,ee){v.transform(P,function(){var se=t.apply(this,arguments),fe=this.__zoom,Z=X==null?T(se):typeof X=="function"?X.apply(this,arguments):X,he=fe.invert(Z),j=typeof B=="function"?B.apply(this,arguments):B;return n(y(E(fe,j),Z,he),se,o)},X,ee)},v.translateBy=function(P,B,X,ee){v.transform(P,function(){return n(this.__zoom.translate(typeof B=="function"?B.apply(this,arguments):B,typeof X=="function"?X.apply(this,arguments):X),t.apply(this,arguments),o)},null,ee)},v.translateTo=function(P,B,X,ee,se){v.transform(P,function(){var fe=t.apply(this,arguments),Z=this.__zoom,he=ee==null?T(fe):typeof ee=="function"?ee.apply(this,arguments):ee;return n(sr.translate(he[0],he[1]).scale(Z.k).translate(typeof B=="function"?-B.apply(this,arguments):-B,typeof X=="function"?-X.apply(this,arguments):-X),fe,o)},ee,se)};function E(P,B){return B=Math.max(a[0],Math.min(a[1],B)),B===P.k?P:new Ka(B,P.x,P.y)}function y(P,B,X){var ee=B[0]-X[0]*P.k,se=B[1]-X[1]*P.k;return ee===P.x&&se===P.y?P:new Ka(P.k,ee,se)}function T(P){return[(+P[0][0]+ +P[1][0])/2,(+P[0][1]+ +P[1][1])/2]}function b(P,B,X,ee){P.on("start.zoom",function(){S(this,arguments).event(ee).start()}).on("interrupt.zoom end.zoom",function(){S(this,arguments).event(ee).end()}).tween("zoom",function(){var se=this,fe=arguments,Z=S(se,fe).event(ee),he=t.apply(se,fe),j=X==null?T(he):typeof X=="function"?X.apply(se,fe):X,H=Math.max(he[1][0]-he[0][0],he[1][1]-he[0][1]),G=se.__zoom,K=typeof B=="function"?B.apply(se,fe):B,ae=u(G.invert(j).concat(H/G.k),K.invert(j).concat(H/K.k));return function(pe){if(pe===1)pe=K;else{var we=ae(pe),Ee=H/we[2];pe=new Ka(Ee,j[0]-we[0]*Ee,j[1]-we[1]*Ee)}Z.zoom(null,pe)}})}function S(P,B,X){return!X&&P.__zooming||new w(P,B)}function w(P,B){this.that=P,this.args=B,this.active=0,this.sourceEvent=null,this.extent=t.apply(P,B),this.taps=0}w.prototype={event:function(P){return P&&(this.sourceEvent=P),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(P,B){return this.mouse&&P!=="mouse"&&(this.mouse[1]=B.invert(this.mouse[0])),this.touch0&&P!=="touch"&&(this.touch0[1]=B.invert(this.touch0[0])),this.touch1&&P!=="touch"&&(this.touch1[1]=B.invert(this.touch1[0])),this.that.__zoom=B,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(P){var B=xt(this.that).datum();c.call(P,this.that,new Nge(P,{sourceEvent:this.sourceEvent,target:v,type:P,transform:this.that.__zoom,dispatch:c}),B)}};function D(P,...B){if(!e.apply(this,arguments))return;var X=S(this,B).event(P),ee=this.__zoom,se=Math.max(a[0],Math.min(a[1],ee.k*Math.pow(2,i.apply(this,arguments)))),fe=sn(P);if(X.wheel)(X.mouse[0][0]!==fe[0]||X.mouse[0][1]!==fe[1])&&(X.mouse[1]=ee.invert(X.mouse[0]=fe)),clearTimeout(X.wheel);else{if(ee.k===se)return;X.mouse=[fe,ee.invert(fe)],Fd(this),X.start()}Hd(P),X.wheel=setTimeout(Z,p),X.zoom("mouse",n(y(E(ee,se),X.mouse[0],X.mouse[1]),X.extent,o));function Z(){X.wheel=null,X.end()}}function R(P,...B){if(h||!e.apply(this,arguments))return;var X=P.currentTarget,ee=S(this,B,!0).event(P),se=xt(P.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",H,!0),fe=sn(P,X),Z=P.clientX,he=P.clientY;mg(P.view),xA(P),ee.mouse=[fe,this.__zoom.invert(fe)],Fd(this),ee.start();function j(G){if(Hd(G),!ee.moved){var K=G.clientX-Z,ae=G.clientY-he;ee.moved=K*K+ae*ae>m}ee.event(G).zoom("mouse",n(y(ee.that.__zoom,ee.mouse[0]=sn(G,X),ee.mouse[1]),ee.extent,o))}function H(G){se.on("mousemove.zoom mouseup.zoom",null),gg(G.view,ee.moved),Hd(G),ee.event(G).end()}}function M(P,...B){if(!!e.apply(this,arguments)){var X=this.__zoom,ee=sn(P.changedTouches?P.changedTouches[0]:P,this),se=X.invert(ee),fe=X.k*(P.shiftKey?.5:2),Z=n(y(E(X,fe),ee,se),t.apply(this,B),o);Hd(P),s>0?xt(this).transition().duration(s).call(b,Z,ee,P):xt(this).call(v.transform,Z,ee,P)}}function k(P,...B){if(!!e.apply(this,arguments)){var X=P.touches,ee=X.length,se=S(this,B,P.changedTouches.length===ee).event(P),fe,Z,he,j;for(xA(P),Z=0;Z<ee;++Z)he=X[Z],j=sn(he,this),j=[j,this.__zoom.invert(j),he.identifier],se.touch0?!se.touch1&&se.touch0[2]!==j[2]&&(se.touch1=j,se.taps=0):(se.touch0=j,fe=!0,se.taps=1+!!l);l&&(l=clearTimeout(l)),fe&&(se.taps<2&&(f=j[0],l=setTimeout(function(){l=null},d)),Fd(this),se.start())}}function L(P,...B){if(!!this.__zooming){var X=S(this,B).event(P),ee=P.changedTouches,se=ee.length,fe,Z,he,j;for(Hd(P),fe=0;fe<se;++fe)Z=ee[fe],he=sn(Z,this),X.touch0&&X.touch0[2]===Z.identifier?X.touch0[0]=he:X.touch1&&X.touch1[2]===Z.identifier&&(X.touch1[0]=he);if(Z=X.that.__zoom,X.touch1){var H=X.touch0[0],G=X.touch0[1],K=X.touch1[0],ae=X.touch1[1],pe=(pe=K[0]-H[0])*pe+(pe=K[1]-H[1])*pe,we=(we=ae[0]-G[0])*we+(we=ae[1]-G[1])*we;Z=E(Z,Math.sqrt(pe/we)),he=[(H[0]+K[0])/2,(H[1]+K[1])/2],j=[(G[0]+ae[0])/2,(G[1]+ae[1])/2]}else if(X.touch0)he=X.touch0[0],j=X.touch0[1];else return;X.zoom("touch",n(y(Z,he,j),X.extent,o))}}function $(P,...B){if(!!this.__zooming){var X=S(this,B).event(P),ee=P.changedTouches,se=ee.length,fe,Z;for(xA(P),h&&clearTimeout(h),h=setTimeout(function(){h=null},d),fe=0;fe<se;++fe)Z=ee[fe],X.touch0&&X.touch0[2]===Z.identifier?delete X.touch0:X.touch1&&X.touch1[2]===Z.identifier&&delete X.touch1;if(X.touch1&&!X.touch0&&(X.touch0=X.touch1,delete X.touch1),X.touch0)X.touch0[1]=this.__zoom.invert(X.touch0[0]);else if(X.end(),X.taps===2&&(Z=sn(Z,this),Math.hypot(f[0]-Z[0],f[1]-Z[1])<g)){var he=xt(this).on("dblclick.zoom");he&&he.apply(this,arguments)}}}return v.wheelDelta=function(P){return arguments.length?(i=typeof P=="function"?P:bv(+P),v):i},v.filter=function(P){return arguments.length?(e=typeof P=="function"?P:bv(!!P),v):e},v.touchable=function(P){return arguments.length?(r=typeof P=="function"?P:bv(!!P),v):r},v.extent=function(P){return arguments.length?(t=typeof P=="function"?P:bv([[+P[0][0],+P[0][1]],[+P[1][0],+P[1][1]]]),v):t},v.scaleExtent=function(P){return arguments.length?(a[0]=+P[0],a[1]=+P[1],v):[a[0],a[1]]},v.translateExtent=function(P){return arguments.length?(o[0][0]=+P[0][0],o[1][0]=+P[1][0],o[0][1]=+P[0][1],o[1][1]=+P[1][1],v):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},v.constrain=function(P){return arguments.length?(n=P,v):n},v.duration=function(P){return arguments.length?(s=+P,v):s},v.interpolate=function(P){return arguments.length?(u=P,v):u},v.on=function(){var P=c.on.apply(c,arguments);return P===c?v:P},v.clickDistance=function(P){return arguments.length?(m=(P=+P)*P,v):Math.sqrt(m)},v.tapDistance=function(P){return arguments.length?(g=+P,v):g},v}const $ge=Object.freeze(Object.defineProperty({__proto__:null,zoom:PA,zoomTransform:YF,zoomIdentity:sr,ZoomTransform:Ka},Symbol.toStringTag,{value:"Module"})),Uge=40,lr=0,pi=5,qF=4;let _v=function(){function e(t){_classCallCheck3(this,e),this.pAxis=new Be.PIXI.Graphics,this.track=t,this.axisTexts=[],this.axisTextFontFamily="Arial",this.axisTextFontSize=10}return _createClass3(e,[{key:"startAxis",value:function(n){const i=this.pAxis;i.clear(),i.lineStyle(1,this.track.getTheme()===pn?at("#ffffff"):0,1),i.moveTo(0,0),i.lineTo(0,n)}},{key:"createAxisTexts",value:function(n,i){this.tickValues=this.calculateAxisTickValues(n,i);let r=0;const a=this.track.getTheme()===pn?"white":"black";for(!this.track.options||!this.track.options.axisLabelFormatting||this.track.options.axisLabelFormatting==="scientific"?this.tickFormat=bi(".2"):this.tickFormat=o=>o;r<this.tickValues.length;){const o=this.tickValues[r];for(;this.axisTexts.length<=r;){const s=new Be.PIXI.Text(o,{fontSize:`${this.axisTextFontSize}px`,fontFamily:this.axisTextFontFamily,fill:a});this.axisTexts.push(s),this.pAxis.addChild(s)}this.axisTexts[r].text=this.tickFormat(o),this.axisTexts[r].anchor.y=.5,this.axisTexts[r].anchor.x=.5,r++}for(;this.axisTexts.length>this.tickValues.length;){const o=this.axisTexts.pop();this.pAxis.removeChild(o),o.destroy(!0)}}},{key:"calculateAxisTickValues",value:function(n,i){const r=Math.max(Math.ceil(i/Uge),1);let a=n.ticks(r);return a.length<1&&(a=n.ticks(r+1),a.length>1&&(a=[a[0]])),a}},{key:"drawAxisLeft",value:function(n,i){this.startAxis(i),this.createAxisTexts(n,i);const r=this.pAxis;this.track.getTheme()===pn&&r.lineStyle(r.lineWidth||r._lineStyle.width,at("#ffffff")),r.moveTo(0,0),r.lineTo(-(lr+pi),0),r.moveTo(0,i),r.lineTo(-(lr+pi),i);for(let a=0;a<this.axisTexts.length;a++){const o=this.tickValues[a];this.axisTexts[a].x=-(lr+pi+qF+this.axisTexts[a].width/2),this.axisTexts[a].y=n(o),r.moveTo(-lr,n(o)),r.lineTo(-(lr+pi),n(o)),this.track&&this.track.flipText&&(this.axisTexts[a].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"drawAxisRight",value:function(n,i){this.startAxis(i),this.createAxisTexts(n,i);const r=this.pAxis;this.track.getTheme()===pn&&r.lineStyle(r.lineWidth||r._lineStyle.width,at("#ffffff")),r.moveTo(0,0),r.lineTo(lr+pi,0),r.moveTo(0,i),r.lineTo(lr+pi,i);for(let a=0;a<this.axisTexts.length;a++){const o=this.tickValues[a];this.axisTexts[a].x=lr+pi+qF+this.axisTexts[a].width/2,this.axisTexts[a].y=n(o),r.moveTo(lr,n(o)),r.lineTo(lr+pi,n(o)),this.track&&this.track.flipText&&(this.axisTexts[a].scale.x=-1)}this.hideOverlappingAxisLabels()}},{key:"hideOverlappingAxisLabels",value:function(){for(let n=this.axisTexts.length-1;n>=0;n--)this.axisTexts[n].visible=!0;for(let n=this.axisTexts.length-1;n>=0;n--){if(!this.axisTexts[n].visible)continue;let i=n-1;for(;i>=0&&this.axisTexts[n].y+this.axisTexts[n].height/2>this.axisTexts[i].y-this.axisTexts[i].height/2;){this.axisTexts[i].visible=!1;i-=1}}}},{key:"exportVerticalAxis",value:function(n){const i=document.createElement("g");i.setAttribute("class","axis-vertical");let r="black";this.track&&this.track.options.lineStrokeColor&&(r=this.track.options.lineStrokeColor),this.track.getTheme()===pn&&(r="#cccccc");const a=document.createElement("path");return a.setAttribute("fill","transparent"),a.setAttribute("stroke",r),a.setAttribute("id","axis-line"),a.setAttribute("d",`M0,0 L0,${n}`),i.appendChild(a),i}},{key:"createAxisSVGLine",value:function(){let n="black";this.track&&this.track.options.lineStrokeColor&&(n=this.track.options.lineStrokeColor),this.track.getTheme()===pn&&(n="#cccccc");const i=document.createElement("path");return i.setAttribute("id","tick-mark"),i.setAttribute("fill","transparent"),i.setAttribute("stroke",n),i}},{key:"createAxisSVGText",value:function(n){const i=document.createElement("text");return i.innerHTML=n,i.setAttribute("id","axis-text"),i.setAttribute("text-anchor","middle"),i.setAttribute("font-family",this.axisTextFontFamily),i.setAttribute("font-size",this.axisTextFontSize),i.setAttribute("dy",this.axisTextFontSize/2-2),i}},{key:"exportAxisLeftSVG",value:function(n,i){const r=this.exportVerticalAxis(i),a=this.createAxisSVGLine();r.appendChild(a),a.setAttribute("d",`M0,0 L${+(lr+pi)},0`);const o=this.createAxisSVGLine();r.appendChild(o),o.setAttribute("d",`M0,${i} L${+(lr+pi)},${i}`);for(let s=0;s<this.axisTexts.length;s++){const u=this.tickValues[s],c=this.axisTexts[s],l=this.createAxisSVGLine();r.appendChild(l),l.setAttribute("d",`M${+lr},${n(u)} L${+(lr+pi)},${n(u)}`);const f=document.createElement("g");if(r.appendChild(f),c.visible){const h=this.createAxisSVGText(c.text);f.appendChild(h)}f.setAttribute("transform",`translate(${c.position.x},${c.position.y})
             scale(${c.scale.x},${c.scale.y})`)}return r}},{key:"exportAxisRightSVG",value:function(n,i){const r=this.exportVerticalAxis(i),a=this.createAxisSVGLine();r.appendChild(a),a.setAttribute("d",`M0,0 L${-(lr+pi)},0`);const o=this.createAxisSVGLine();r.appendChild(o),o.setAttribute("d",`M0,${i} L${-(lr+pi)},${i}`);for(let s=0;s<this.axisTexts.length;s++){const u=this.tickValues[s],c=this.axisTexts[s],l=this.createAxisSVGLine();r.appendChild(l),l.setAttribute("d",`M${-lr},${n(u)} L${-(lr+pi)},${n(u)}`);const f=document.createElement("g");if(r.appendChild(f),c.visible){const h=this.createAxisSVGText(c.text);f.appendChild(h)}f.setAttribute("transform",`translate(${c.position.x},${c.position.y})
             scale(${c.scale.x},${c.scale.y})`)}return r}},{key:"clearAxis",value:function(){const n=this.pAxis;for(;this.axisTexts.length;){const i=this.axisTexts.pop();n.removeChild(i)}n.clear()}}]),e}();const XF=(e,t)=>{const n=[];for(let i=e;i<t;i++)n.push(i);return n},Gge=(e,t)=>{const n=e.map(s=>+s).sort((s,u)=>u-s),i=t.range()[1]-t.range()[0],a=n.map(s=>(t.domain()[1]-t.domain()[0])/s).map(s=>s/i),o=a.filter(s=>s<1);return o.length===0?0:a.indexOf(o[o.length-1])},zge=(e,t,n,i)=>{const r=e.range()[1]-e.range()[0],a=Math.max((n-t)/(e.domain()[1]-e.domain()[0]),1),s=Math.max(0,Math.ceil(Math.log(r/384)/Math.LN2));let u=Math.round(Math.log(a)/Math.LN2)+s,c=0;return i&&(c=Math.floor(Math.log(256)/Math.log(2)-Math.log(i)/Math.log(2))),u+=c,u},KF=(e,t,n)=>{if(typeof n>"u"&&(n=Number.MAX_SAFE_INTEGER),e.resolutions)return Gge(e.resolutions,t,e.min_pos[0],e.max_pos[0]-2);const i=zge(t,e.min_pos[0],e.max_pos[0],e.bins_per_dimension||e.tile_size),r=Math.min(i,n);return Math.max(r,0)},jge=(e,t,n,i,r,a)=>{const o=Math.min(e,r),s=a/2**o,u=1e-7;return XF(Math.max(0,Math.floor((t.domain()[0]-n)/s)),Math.min(2**o,Math.ceil((t.domain()[1]-n-u)/s)))},Vge=(e,t,n,i=Number.MAX_VALUE,r=256)=>{const o=e*r,s=20,u=Math.max(0,Math.floor((t.domain()[0]-n)/o)),c=Math.ceil(Math.min(i,t.domain()[1]-n-1e-7)/o);let l=XF(u,c);return l.length>s&&(console.warn(`Too many visible tiles: ${l.length} truncating to ${s}`),l=l.slice(0,s)),l},Yge=(e,t)=>{if(!e)return[];const n=KF(e,t,e.max_zoom);if(e.resolutions){const a=e.resolutions.map(u=>+u).sort((u,c)=>c-u);return Vge(a[n],t,e.min_pos[0],e.max_pos[0]).map(u=>[n,u])}return jge(n,t,e.min_pos[0],e.max_pos[0],e.max_zoom,e.max_width).map(a=>[n,a])},Wge=(e,t)=>{if(e.axis||(e.axis=new _v(e),e.pBase.addChild(e.axis.pAxis)),!e.options.axisPositionVertical&&!e.options.axisPositionHorizontal){e.axis.clearAxis();return}if(e.options.axisPositionVertical&&e.options.axisPositionVertical==="hidden"){e.axis.clearAxis();return}if(e.options.axisPositionHorizontal&&e.options.axisPositionHorizontal==="hidden"){e.axis.clearAxis();return}const n=e.options.axisMargin||0;e.options.axisPositionHorizontal==="left"||e.options.axisPositionVertical==="top"?(e.axis.pAxis.position.x=e.position[0]+n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisRight(t,e.dimensions[1])):e.options.axisPositionHorizontal==="outsideLeft"||e.options.axisPositionVertical==="outsideTop"?(e.axis.pAxis.position.x=e.position[0]+n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisLeft(t,e.dimensions[1])):e.options.axisPositionHorizontal==="right"||e.options.axisPositionVertical==="bottom"?(e.axis.pAxis.position.x=e.position[0]+e.dimensions[0]-n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisLeft(t,e.dimensions[1])):(e.options.axisPositionHorizontal==="outsideRight"||e.options.axisPositionVertical==="outsideBottom")&&(e.axis.pAxis.position.x=e.position[0]+e.dimensions[0]-n,e.axis.pAxis.position.y=e.position[1],e.axis.drawAxisRight(t,e.dimensions[1]))},qge=(e,t)=>{const n=e.valueScaleTransform,{y:i,k:r}=n,a=e.dimensions[1];i+t/r>-(r-1)*a&&i+t/r<0&&(e.valueScaleTransform=n.translate(0,t/r)),Object.values(e.fetchedTiles).forEach(o=>{o.graphics.position.y=e.valueScaleTransform.y}),e.animate()},Xge=(e,t,n,i)=>{const r=n.k,a=n.y,o=(e-a)/r,s=Math.max(r/t,1);let u=r*o+a-s*o;return u=Math.max(u,-(s-1)*i),u=Math.min(u,0),sr.translate(0,u).scale(s)},Kge=(e,t)=>{const n=+t.split(".")[0],i=+t.split(".")[1],r=e.max_width,a=e.min_pos[0],o=r/2**n;return{tileX:a+i*o,tileWidth:o}};function Zge(e,t){Object.values(e.fetchedTiles).forEach(n=>{if(!n.drawnAtScale)return;const i=n.drawnAtScale.range(),r=e._xScale.range();if(i[0]!==r[0]||i[1]!==r[1]){e.renderTile(n);return}const a=(n.drawnAtScale.domain()[1]-n.drawnAtScale.domain()[0])/(e._xScale.domain()[1]-e._xScale.domain()[0]);if(a>2||a<.5)e.renderTile(n);else{const s=e._xScale.domain().map(n.drawnAtScale)[0];for(const u of t)u(n).scale.x=a,u(n).x=-s*a}})}const Rl={calculate1DVisibleTiles:Yge,calculate1DZoomLevel:KF,drawAxis:Wge,movedY:qge,getTilePosAndDimensions:Kge,stretchRects:Zge,zoomedY:Xge},Qge=Object.freeze(Object.defineProperty({__proto__:null,absToChr:Wn,accessorTransposition:GP,addArrays:zP,addClass:vZ,base64ToCanvas:yZ,chromInfoBisector:UP,chrToAbs:Pg,cloneEvent:jP,colorDomainToRgbaArray:Ao,colorToHex:at,colorToRgba:sR,dataToGenomicLoci:Bg,debounce:Fg,decToHexStr:yb,dictFromTuples:lR,dictItems:Vi,dictKeys:Yi,dictValues:un,download:xf,fillInMinWidths:uR,flatten:FZ,forEach:HZ,forwardEvent:Hg,genomeLociToPixels:$Z,genomicRangeToChromosomeChunks:UZ,getDefaultTrackForDatatype:Tb,getElementDim:ER,getTrackByUid:Ci,getTrackConfFromHGC:PQ,getTrackObjById:Mf,getTrackPositionByUid:Lf,getXylofon:bR,gradient:_R,hasClass:xg,hasParent:SR,hexStrToInt:AR,intoTheVoid:CR,isTrackOrChildTrack:DR,isWithin:Ob,latToY:NQ,loadChromInfos:MQ,lngToX:LQ,map:Ib,max:xb,maxNonZero:Pb,min:IR,minNonZero:Rb,mod:BQ,ndarrayAssign:OR,ndarrayFlatten:RR,ndarrayToList:PR,numericifyVersion:NR,objVals:Gg,or:Bf,parseChromsizesRows:jg,pixiTextToSvg:Nb,q:KQ,reduce:cR,rangeQuery2d:ZQ,relToAbsChromPos:QQ,removeClass:eJ,resetD3BrushStyle:zu,rgbToHex:tJ,scalesCenterAndK:Qn,scalesToGenomeLoci:MR,showMousePosition:pl,some:aJ,sum:es,svgLine:LR,throttleAndDebounce:BR,tileToCanvas:oJ,timeout:Lb,totalTrackPixelHeight:sJ,toVoid:La,trimTrailingSlash:Vg,valueToColor:Bb,expandCombinedTracks:Yg,segmentsToRows:Wg,visitPositionedTracks:Co,visitTracks:wb,DenseDataExtrema1D:qg,DenseDataExtrema2D:$b,getAggregationFunction:Ub,selectedItemsToSize:Ff,IS_TRACK_RANGE_SELECTABLE:ju,getTrackObjectFromHGC:Xg,getTrackRenderer:GR,getTiledPlot:uJ,changeOptions:mme,waitForJsonComplete:dv,waitForTilesLoaded:Rd,waitForTransitionsFinished:_A,mountHGComponent:SA,mountHGComponentAsync:Tme,removeHGComponent:yme,trackUtils:Rl},Symbol.toStringTag,{value:"Module"})),{Provider:Jge,Consumer:e0e}=A.default.createContext({close:La,open:La}),Nl=e=>A.default.forwardRef((t,n)=>A.default.createElement(e0e,null,i=>A.default.createElement(e,{ref:n,...t,theme:i}))),ds={"track-control":"_track-control_w7hx2_1","track-control-vertical":"_track-control-vertical_w7hx2_2","track-control-dark":"_track-control-dark_w7hx2_15","track-control-active":"_track-control-active_w7hx2_16 _track-control_w7hx2_1","track-control-left":"_track-control-left_w7hx2_24","track-control-vertical-active":"_track-control-vertical-active_w7hx2_30","track-control-padding-right":"_track-control-padding-right_w7hx2_48","track-control-button":"_track-control-button_w7hx2_52","track-control-button-vertical":"_track-control-button-vertical_w7hx2_81"},t0e=e=>qt({[ds["track-control-active"]]:e.isVisible,[ds["track-control"]]:!e.isVisible,[ds["track-control-left"]]:e.isAlignLeft,[ds["track-control-vertical"]]:e.isVertical,[ds["track-control-padding-right"]]:e.paddingRight,[ds["track-control-dark"]]:e.theme===pn}),Sv=e=>qt("no-zoom",ds["track-control-button"],{[ds["track-control-button-vertical"]]:e.isVertical});let RA=null,ZF=null;function QF(e){(!e||!RA||Object.keys(e).some(i=>RA[i]!==e[i]))&&(RA=e,ZF=hb(()=>A.default.createElement("svg",{className:Sv(e),style:{height:"20px",width:"20px",...e.imgStyleMove}},A.default.createElement("title",null,"Move track"),A.default.createElement("use",{xlinkHref:"#move"}))));let t,n;return A.default.createElement("div",{className:t0e(e)},e.isMoveable&&A.default.createElement(ZF,null),A.default.createElement("svg",{ref:i=>{t=i},className:Sv(e),onClick:()=>{e.onConfigTrackMenuOpened(e.uid,t.getBoundingClientRect())},style:{height:"20px",width:"20px",...e.imgStyleSettings}},A.default.createElement("title",null,"Configure track"),A.default.createElement("use",{xlinkHref:"#cog"})),e.onAddSeries&&A.default.createElement("svg",{className:Sv(e),onClick:()=>e.onAddSeries(e.uid),style:{height:"20px",width:"20px",...e.imgStyleAdd}},A.default.createElement("title",null,"Add series"),A.default.createElement("use",{xlinkHref:"#plus"})),A.default.createElement("svg",{ref:i=>{n=i},className:Sv(e),onClick:()=>{e.onCloseTrackMenuOpened(e.uid,n.getBoundingClientRect())},style:{height:"20px",width:"20px",...e.imgStyleClose}},A.default.createElement("title",null,"Close track"),A.default.createElement("use",{xlinkHref:"#cross"})))}QF.propTypes={imgStyleAdd:N.exports.object,imgStyleClose:N.exports.object,imgStyleMove:N.exports.object,imgStyleSettings:N.exports.object,isAlignLeft:N.exports.bool,isMoveable:N.exports.bool,isVertical:N.exports.bool,isVisible:N.exports.bool,onConfigTrackMenuOpened:N.exports.func,onCloseTrackMenuOpened:N.exports.func,onAddSeries:N.exports.func,paddingRight:N.exports.bool,theme:N.exports.symbol.isRequired,uid:N.exports.string};const Av=Nl(QF),NA={"center-track":"_center-track_fiu64_1","center-track-container":"_center-track-container_fiu64_6"},pa={"track-range-selection":"_track-range-selection_5bcsr_1","track-range-selection-active":"_track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-active-primary":"_track-range-selection-active-primary_5bcsr_14 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-active-secondary":"_track-range-selection-active-secondary_5bcsr_18 _track-range-selection-active_5bcsr_8 _track-range-selection_5bcsr_1","track-range-selection-group-inactive":"_track-range-selection-group-inactive_5bcsr_22","track-range-selection-group-brush-selection":"_track-range-selection-group-brush-selection_5bcsr_26"},Cv={pointerEvents:"all"};function Lc(e){return e&&e.sourceEvent}let MA=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.state={isVisible:!1},r.brushBehaviorX=wg().on("brush",r.brushedX.bind(_assertThisInitialized3(r))).on("end",r.brushedXEnded.bind(_assertThisInitialized3(r))),r.brushBehaviorY=yf().on("brush",r.brushedY.bind(_assertThisInitialized3(r))).on("end",r.brushedYEnded.bind(_assertThisInitialized3(r))),r.brushBehaviorXY=tb().on("start",r.brushStarted.bind(_assertThisInitialized3(r))).on("brush",r.brushedXY.bind(_assertThisInitialized3(r))).on("end",r.brushedXYEnded.bind(_assertThisInitialized3(r))),r}return _createClass3(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush2d()}},{key:"shouldComponentUpdate",value:function(r,a){if(this.rangeSelectionTriggeredXY){if(this.rangeSelectionTriggeredXY=!1,this.rangeSelectionTriggeredXYEnd){const o=r.rangeSelection[0]||null;this.moveBrushXY([o,r.rangeSelection[1]],!0),this.rangeSelectionTriggeredXYEnd=!1}return this.state!==a}if(this.props.rangeSelection!==r.rangeSelection){const o=r.rangeSelection[0]||null;this.props.is1dRangeSelection?(this.rangeSelectionTriggeredX||this.moveBrushX(o,r.rangeSelectionEnd),this.rangeSelectionTriggeredXEnd&&this.moveBrushX(o,r.rangeSelectionEnd,!0),this.rangeSelectionTriggeredY||this.moveBrushY(o,r.rangeSelectionEnd),this.rangeSelectionTriggeredYEnd&&this.moveBrushY(o,r.rangeSelectionEnd,!0),this.rangeSelectionTriggeredX=!1,this.rangeSelectionTriggeredXEnd=!1,this.rangeSelectionTriggeredY=!1,this.rangeSelectionTriggeredYEnd=!1):this.moveBrushXY([o,r.rangeSelection[1]],r.rangeSelectionEnd);const s=this.props.is1dRangeSelection&&!r.is1dRangeSelection&&o===null;return this.state!==a||s}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush2d():(this.removeBrush1d(),this.removeBrush2d())}},{key:"addBrush1d",value:function(){!this.brushElX||!this.brushElY||this.brushElXOld===this.brushElX&&this.brushElYOld===this.brushElY||(this.brushElXOld&&this.brushElXOld.on(".brush",null),this.brushElYOld&&this.brushElYOld.on(".brush",null),this.brushElX.call(this.brushBehaviorX),this.brushElY.call(this.brushBehaviorY),zu(this.brushElX,pa["track-range-selection-group-brush-selection"]),zu(this.brushElY,pa["track-range-selection-group-brush-selection"]),this.brushElXOld=this.brushElX,this.brushElYOld=this.brushElY,this.brushIs1dBound=!0)}},{key:"addBrush2d",value:function(){!this.brushElXY||this.brushElXYOld===this.brushElXY||(this.brushElXYOld&&this.brushElXYOld.on(".brush",null),this.brushElXY.call(this.brushBehaviorXY),this.brushElXYOld=this.brushElXY,this.brushIs2dBound=!0,zu(this.brushElXY,pa["track-range-selection-group-brush-selection"]))}},{key:"brushedX",value:function(r){const a=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!Lc(r)||!this.props.onRangeSelectionX||!this.props.is1dRangeSelection||a)&&(this.rangeSelectionTriggeredX=!0,this.props.onRangeSelectionX(r.selection))}},{key:"brushedXEnded",value:function(r){const a=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,!(!Lc(r)||!this.props.onRangeSelectionX||!this.props.is1dRangeSelection||a)&&(this.rangeSelectionTriggeredX=!0,this.rangeSelectionTriggeredXEnd=!0,this.props.onRangeSelectionXEnd(r.selection))}},{key:"brushedY",value:function(r){const a=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!Lc(r)||!this.props.onRangeSelectionY||!this.props.is1dRangeSelection||a)&&(this.rangeSelectionTriggeredY=!0,this.props.onRangeSelectionY(r.selection))}},{key:"brushedYEnded",value:function(r){const a=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,!(!Lc(r)||!this.props.onRangeSelectionY||!this.props.is1dRangeSelection||a)&&(this.rangeSelectionTriggeredY=!0,this.rangeSelectionTriggeredYEnd=!0,this.props.onRangeSelectionYEnd(r.selection))}},{key:"brushedXY",value:function(r){const a=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!Lc(r)||!this.props.onRangeSelectionXY||a||this.props.is1dRangeSelection)&&(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionXY([[r.selection[0][0],r.selection[1][0]],[r.selection[0][1],r.selection[1][1]]]))}},{key:"brushedXYEnded",value:function(r){if(this.props.is1dRangeSelection)return;const a=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,r.selection&&r.sourceEvent&&this.props.onRangeSelectionXY&&!a&&(this.rangeSelectionTriggeredXY=!0,this.rangeSelectionTriggeredXYEnd=!0,this.props.onRangeSelectionXYEnd([[r.selection[0][0],r.selection[1][0]],[r.selection[0][1],r.selection[1][1]]])),r.selection||(this.rangeSelectionTriggeredXY=!0,this.props.onRangeSelectionReset())}},{key:"brushStarted",value:function(r){!Lc(r)||this.props.onRangeSelectionStart()}},{key:"moveBrushX",value:function(r,a=!1){if(!this.brushEl)return;this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());const o=r?[this.props.scaleX(r[0]),this.props.scaleX(r[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,a?this.brushElX.transition().call(this.brushBehaviorX.move,o):this.brushElX.call(this.brushBehaviorX.move,o)}},{key:"moveBrushY",value:function(r,a=!1){if(!this.brushEl)return;this.brushIs2dBound&&(this.removeBrush2d(),this.addBrush1d());const o=r?[this.props.scaleY(r[0]),this.props.scaleY(r[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,a?this.brushElY.transition().call(this.brushBehaviorY.move,o):this.brushElY.call(this.brushBehaviorY.move,o)}},{key:"moveBrushXY",value:function(r,a=!1){if(!this.brushEl)return;const o=[[this.props.scaleX(r[0][0]),this.props.scaleY(r[1][0])],[this.props.scaleX(r[0][1]),this.props.scaleY(r[1][1])]];this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,a?this.brushElXY.transition().call(this.brushBehaviorXY.move,o):this.brushElXY.call(this.brushBehaviorXY.move,o)}},{key:"mouseEnterHandler",value:function(){this.props.isRangeSelectionActive||this.setState({isVisible:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({isVisible:!1})}},{key:"removeBrush1d",value:function(){!this.brushIs1dBound||(this.brushElX&&(this.brushElX.call(this.brushBehaviorX.move,null),this.brushElX.on(".brush",null)),this.brushElY&&(this.brushElY.call(this.brushBehaviorY.move,null),this.brushElY.on(".brush",null)),this.brushIs1dBound=!1)}},{key:"removeBrush2d",value:function(){!this.brushIs2dBound||this.brushElXY&&(this.brushElXY.call(this.brushBehaviorXY.move,null),this.brushElXY.on(".brush",null),this.brushElXYOld=void 0,this.brushIs2dBound=!1,this.props.is1dRangeSelection||this.props.onRangeSelectionReset())}},{key:"render",value:function(){const r=this.props.tracks.map(c=>ju(c)).reduce(Bf,!1),a=this.props.tracks.some(c=>c.contents?c.contents.some(l=>l.type==="heatmap"?l.options.colorbarPosition==="topRight":!1):c.type==="heatmap"?c.options.colorbarPosition==="topRight":!1);let o="track-range-selection";this.props.isRangeSelectionActive&&(o+=this.props.is1dRangeSelection?"-active-secondary":"-active-primary");const s=qt(!this.props.is1dRangeSelection&&pa["track-range-selection-group-inactive"]),u=qt(this.props.is1dRangeSelection&&pa["track-range-selection-group-inactive"]);return A.default.createElement("div",{className:qt(this.props.className,NA["center-track"]),onMouseEnter:this.mouseEnterHandler.bind(this),onMouseLeave:this.mouseLeaveHandler.bind(this),style:{height:this.props.height,width:this.props.width}},r&&A.default.createElement("svg",{className:pa[o],style:{height:this.props.height,width:this.props.width},xmlns:"http://www.w3.org/2000/svg"},A.default.createElement("g",{ref:c=>{this.brushElX=xt(c)},className:s}),A.default.createElement("g",{ref:c=>{this.brushElY=xt(c)},className:s}),A.default.createElement("g",{ref:c=>{this.brushElXY=xt(c)},className:u})),this.props.editable&&A.default.createElement(Av,{imgStyleAdd:Cv,imgStyleClose:Cv,imgStyleMove:Cv,imgStyleSettings:Cv,isMoveable:!1,isVisible:this.state.isVisible||this.props.uid===this.props.configTrackMenuId,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,paddingRight:a,uid:this.props.uid}))}}]),n}(A.default.Component);MA.defaultProps={className:"center-track",configTrackMenuId:null,is1dRangeSelection:!1,rangeSelectionEnd:N.exports.bool,isRangeSelectionActive:!1,scaleX:e=>e,scaleY:e=>e},MA.propTypes={className:N.exports.string,configTrackMenuId:N.exports.string,editable:N.exports.bool,height:N.exports.number.isRequired,is1dRangeSelection:N.exports.bool,isRangeSelectionActive:N.exports.bool,onAddSeries:N.exports.func.isRequired,onCloseTrackMenuOpened:N.exports.func.isRequired,onConfigTrackMenuOpened:N.exports.func.isRequired,onRangeSelectionX:N.exports.func.isRequired,onRangeSelectionXEnd:N.exports.func.isRequired,onRangeSelectionY:N.exports.func.isRequired,onRangeSelectionYEnd:N.exports.func.isRequired,onRangeSelectionXY:N.exports.func.isRequired,onRangeSelectionXYEnd:N.exports.func.isRequired,onRangeSelectionReset:N.exports.func.isRequired,onRangeSelectionStart:N.exports.func.isRequired,rangeSelection:N.exports.array.isRequired,rangeSelectionEnd:N.exports.bool,scaleX:N.exports.func,scaleY:N.exports.func,tracks:N.exports.array.isRequired,uid:N.exports.string.isRequired,width:N.exports.number.isRequired};const LA={__fake__:!0,publish:La,subscribe:La,unsubscribe:La},{Provider:n0e,Consumer:r0e}=A.default.createContext(LA),Bc=e=>A.default.forwardRef((t,n)=>A.default.createElement(r0e,null,i=>A.default.createElement(e,{ref:n,...t,pubSub:i}))),i0e={"drag-listening-div-active":"_drag-listening-div-active_19gkt_1"};let BA=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.state={dragOnTop:!1},r}return _createClass3(n,[{key:"render",value:function(){let r="red";return this.props.enabled&&this.state.dragOnTop?r="green":this.props.enabled&&(r="blue"),A.default.createElement("div",{className:qt("DragListeningDiv",{[i0e["drag-listening-div-active"]]:this.props.enabled}),onDragEnter:()=>{this.setState({dragOnTop:!0})},onDragLeave:()=>{this.setState({dragOnTop:!1})},onDragOver:a=>{a.preventDefault()},onDrop:()=>{if(!this.props.enabled)return;const a=this.props.draggingHappening,o={type:this.props.defaultTrackType,uid:Pt.nice(),tilesetUid:a.tilesetUid,server:a.server};this.props.onTrackDropped(o),this.props.pubSub.publish("trackDropped",o)},style:{background:r,opacity:.6,...this.props.style}})}}]),n}(A.default.Component);BA.defaultProps={enabled:!1,style:{},draggingHappening:{},onTrackDropped:()=>{}},BA.propTypes={enabled:N.exports.bool,style:N.exports.object,defaultTrackType:N.exports.object,draggingHappening:N.exports.object,onTrackDropped:N.exports.func,position:N.exports.string.isRequired,pubSub:N.exports.object.isRequired};const Dv=Bc(BA),Ml={"gallery-tracks":"_gallery-tracks_fbxxi_1","gallery-track":"_gallery-track_fbxxi_1","gallery-sub-track":"_gallery-sub-track_fbxxi_18","gallery-invisible-track":"_gallery-invisible-track_fbxxi_19"},ma={"tiled-plot":"_tiled-plot_1y7td_1",horizontalList:"_horizontalList_1y7td_7",list:"_list_1y7td_14",stylizedList:"_stylizedList_1y7td_21",stylizedItem:"_stylizedItem_1y7td_28",stylizedHelper:"_stylizedHelper_1y7td_39",horizontalItem:"_horizontalItem_1y7td_44","resizable-track":"_resizable-track_1y7td_55",domain:"_domain_1y7td_60"},wv={pointerEvents:"all"};let JF=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.state={hovering:!1},r}return _createClass3(n,[{key:"mouseEnterHandler",value:function(){this.setState({hovering:!0})}},{key:"mouseLeaveHandler",value:function(){this.setState({hovering:!1})}},{key:"render",value:function(){return A.default.createElement("div",{className:qt("gallery-tracks",Ml["gallery-tracks"])},this.props.tracks&&this.props.tracks.map((r,a)=>A.default.createElement("div",{key:r.uid||a,className:Ml["gallery-track"],onMouseLeave:this.mouseLeaveHandler.bind(this),style:{top:r.height*a,right:r.height*a,bottom:r.height*a,left:r.height*a}},A.default.createElement("div",{className:Ml["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,right:0,left:0,height:r.height}}),A.default.createElement("div",{className:Ml["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,right:0,bottom:0,width:r.height}}),A.default.createElement("div",{className:Ml["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{right:0,bottom:0,left:0,height:r.height}}),A.default.createElement("div",{className:Ml["gallery-sub-track"],onMouseEnter:this.mouseEnterHandler.bind(this),style:{top:0,bottom:0,left:0,width:r.height}}),A.default.createElement("div",{className:Ml["gallery-invisible-track"],onMouseLeave:this.mouseLeaveHandler.bind(this),style:{top:r.height,right:r.height,bottom:r.height,left:r.height}}),this.props.editable&&A.default.createElement(Av,{configMenuVisible:!0,imgStyleAdd:wv,imgStyleClose:wv,imgStyleMove:wv,imgStyleSettings:wv,isMoveable:!1,isVisible:this.state.hovering,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:r.uid||a}))))}}]),n}(A.default.Component);JF.propTypes={editable:N.exports.bool,onCloseTrackMenuOpened:N.exports.func.isRequired,onConfigTrackMenuOpened:N.exports.func.isRequired,tracks:N.exports.array};let Fc=function(){function e(t){_classCallCheck3(this,e),this.context=t;const{id:n,pubSub:i,getTheme:r}=t;i?this.pubSub=i:this.pubSub=LA,this.id=n,this._xScale=Et(),this._yScale=Et(),this._refXScale=Et(),this._refYScale=Et(),this.position=[0,0],this.dimensions=[1,1],this.options={},this.pubSubs=[],r?this.getTheme=r:this.getTheme=()=>{},this.pubSubs.push(this.pubSub.subscribe("app.mouseMove",this.defaultMouseMoveHandler.bind(this)))}return _createClass3(e,[{key:"isWithin",value:function(n,i){let r=n,a=i,o=this.position[0],s=this.position[1];return this.isLeftModified&&(r=i,a=n,o=this.position[1],s=this.position[0]),Ob(r,a,o,this.dimensions[0]+o,s,this.dimensions[1]+s)}},{key:"getProp",value:function(n){return()=>this[n]}},{key:"getData",value:function(){}},{key:"click",value:function(n,i,r){return{type:"generic",event:r,payload:null}}},{key:"clickOutside",value:function(){}},{key:"getDimensions",value:function(){return this.dimensions}},{key:"setDimensions",value:function(n){this.dimensions=n,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]])}},{key:"refXScale",value:function(n){return arguments.length?(this._refXScale=n,this):this._refXScale}},{key:"refYScale",value:function(n){return arguments.length?(this._refYScale=n,this):this._refYScale}},{key:"xScale",value:function(n){return arguments.length?(this._xScale=n,this):this._xScale}},{key:"yScale",value:function(n){return arguments.length?(this._yScale=n,this):this._yScale}},{key:"zoomed",value:function(n,i){this.xScale(n),this.yScale(i)}},{key:"refScalesChanged",value:function(n,i){this._refXScale=n,this._refYScale=i}},{key:"draw",value:function(){}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(n){this.position=n}},{key:"defaultMouseMoveHandler",value:function(n){}},{key:"remove",value:function(){this.pubSubs.forEach(n=>this.pubSub.unsubscribe(n)),this.pubSubs=[]}},{key:"rerender",value:function(){}},{key:"respondsToPosition",value:function(n,i){return this.isWithin(n,i)}},{key:"zoomedY",value:function(n,i){}},{key:"movedY",value:function(n){}}]),e}();function a0e(e,t){const n=_u(t,e);return Zs(`.${n}`,e)(e)}function o0e(e,t){const n=e.map(a=>+a).sort((a,o)=>o-a),i=n[t],r=n[n.length-1];return a0e(i,r)}function s0e(e,t,n,i){const r=t/(2**e*n);if(!Number.isNaN(r)){const a=t/(2**i*n),o=_u(a,r);return Zs(`.${o}`,r)(r)}return console.warn("NaN resolution, screen is probably too small."),""}let Qr=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{scene:o}=i;a.scene=o,a.delayDrawing=!1,a.pBase=new Be.PIXI.Graphics,a.pMasked=new Be.PIXI.Graphics,a.pMask=new Be.PIXI.Graphics,a.pMain=new Be.PIXI.Graphics,a.pBorder=new Be.PIXI.Graphics,a.pBackground=new Be.PIXI.Graphics,a.pForeground=new Be.PIXI.Graphics,a.pLabel=new Be.PIXI.Graphics,a.pMobile=new Be.PIXI.Graphics,a.pAxis=new Be.PIXI.Graphics,a.pMouseOver=new Be.PIXI.Graphics,a.scene.addChild(a.pBase),a.pBase.addChild(a.pMasked),a.pMasked.addChild(a.pBackground),a.pMasked.addChild(a.pMain),a.pMasked.addChild(a.pMask),a.pMasked.addChild(a.pMobile),a.pMasked.addChild(a.pBorder),a.pMasked.addChild(a.pLabel),a.pMasked.addChild(a.pForeground),a.pMasked.addChild(a.pMouseOver),a.pBase.addChild(a.pAxis),a.pMasked.mask=a.pMask,a.prevOptions="",a.options=Object.assign(a.options,r);const s=a.getName();return a.labelTextFontFamily="Arial",a.labelTextFontSize=12,a.labelXOffset=0,a.labelText=new Be.PIXI.Text(s,{fontSize:`${a.labelTextFontSize}px`,fontFamily:a.labelTextFontFamily,fill:"black"}),a.pLabel.addChild(a.labelText),a.errorText=new Be.PIXI.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"red"}),a.errorText.anchor.x=.5,a.errorText.anchor.y=.5,a.pLabel.addChild(a.errorText),a}return _createClass3(n,[{key:"setLabelText",value:function(){}},{key:"setPosition",value:function(r){this.position=r,this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions),this.setForeground()}},{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r),this.drawBorder(),this.drawLabel(),this.drawBackground(),this.setMask(this.position,this.dimensions),this.setForeground()}},{key:"setMask",value:function(r,a){this.pMask.clear(),this.pMask.beginFill(),this.pMask.drawRect(r[0],r[1],a[0],a[1]),this.pMask.endFill()}},{key:"setForeground",value:function(){this.pForeground.position.y=this.position[1],this.pForeground.position.x=this.position[0]}},{key:"remove",value:function(){this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"drawBorder",value:function(){const r=this.pBorder;if(r.clear(),!this.options||!this.options.trackBorderWidth)return;const a=at(this.options.trackBorderColor?this.options.trackBorderColor:"white");r.lineStyle(this.options.trackBorderWidth,a),r.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}},{key:"drawError",value:function(){if(this.errorText.x=this.position[0]+this.dimensions[0]/2,this.errorText.y=this.position[1]+this.dimensions[1]/2,this.errorText.text=this.errorTextText,this.errorTextText&&this.errorTextText.length){const r=this.pBorder;r.clear(),r.lineStyle(1,at("red")),r.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}}},{key:"drawBackground",value:function(){const r=this.pBackground;if(r.clear(),!this.options||!this.options.backgroundColor)return;let a=1,o=this.options.backgroundColor;this.options.backgroundColor==="transparent"&&(a=0,o="white");const s=at(o);r.beginFill(s,a),r.drawRect(this.position[0],this.position[1],this.dimensions[0],this.dimensions[1])}},{key:"getLabelColor",value:function(){return this.options.labelColor&&this.options.labelColor!=="[glyph-color]"?this.options.labelColor:this.options.lineStrokeColor||this.options.barFillColor||"black"}},{key:"getName",value:function(){return this.options.name?this.options.name:this.tilesetInfo&&this.tilesetInfo.name||""}},{key:"drawLabel",value:function(){if(!this.labelText)return;const r=this.pLabel;if(r.clear(),!this.options||!this.options.labelPosition||this.options.labelPosition==="hidden"){this.labelText.alpha=0;return}r.beginFill(at(this.options.labelBackgroundColor||"white"),+this.options.labelBackgroundOpacity>=0?+this.options.labelBackgroundOpacity:.5);const a=at(this.getLabelColor()),o=2;if(this.dimensions[0]<0)return;let s=this.options.labelShowAssembly&&this.tilesetInfo&&this.tilesetInfo.coordSystem?`${this.tilesetInfo.coordSystem} | `:"";if(s+=this.getName(),this.options.labelShowResolution&&this.tilesetInfo&&this.tilesetInfo.max_width&&this.tilesetInfo.bins_per_dimension){const h=s0e(this.calculateZoomLevel(),this.tilesetInfo.max_width,this.tilesetInfo.bins_per_dimension,this.tilesetInfo.max_zoom);s+=`
[Current data resolution: ${h}]`}else if(this.options.labelShowResolution&&this.tilesetInfo&&this.tilesetInfo.resolutions){const h=o0e(this.tilesetInfo.resolutions,this.calculateZoomLevel());s+=`
[Current data resolution: ${h}]`}if(this.options&&this.options.dataTransform){let h=null;if(this.tilesetInfo&&this.tilesetInfo.transforms)for(const d of this.tilesetInfo.transforms)d.value===this.options.dataTransform&&(h=d);h?s+=`
[Transform: ${h.name}]`:this.options.dataTransform==="None"?s+=`
[Transform: None ]`:s+=`
[Transform: Default ]`}this.labelText.text=s,this.labelText.style={fontSize:`${this.labelTextFontSize}px`,fontFamily:this.labelTextFontFamily,fill:a},this.labelText.alpha=typeof this.options.labelTextOpacity<"u"?this.options.labelTextOpacity:1,this.labelText.visible=!0,this.flipText&&(this.labelText.scale.x=-1);const u=+this.options.labelLeftMargin||0,c=+this.options.labelRightMargin||0,l=+this.options.labelTopMargin||0,f=+this.options.labelBottomMargin||0;this.options.labelPosition==="topLeft"?(this.labelText.x=this.position[0]+u+this.labelXOffset,this.labelText.y=this.position[1]+l,this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x+=this.labelText.width/2,r.drawRect(this.position[0]+u+this.labelXOffset,this.position[1]+l,this.labelText.width+o,this.labelText.height+o)):this.options.labelPosition==="bottomLeft"&&!this.flipText||this.options.labelPosition==="topRight"&&this.flipText?(this.labelText.x=this.position[0]+(u||l),this.labelText.y=this.position[1]+this.dimensions[1]-(f||c),this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x+=this.labelText.width/2+this.labelXOffset,r.drawRect(this.position[0]+(u||l)+this.labelXOffset,this.position[1]+this.dimensions[1]-this.labelText.height-o-(f||c),this.labelText.width+o,this.labelText.height+o)):this.options.labelPosition==="topRight"&&!this.flipText||this.options.labelPosition==="bottomLeft"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]-(c||f),this.labelText.y=this.position[1]+(l||u),this.labelText.anchor.x=.5,this.labelText.anchor.y=0,this.labelText.x-=this.labelText.width/2+this.labelXOffset,r.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-o-(c||f)-this.labelXOffset,this.position[1]+(l||u),this.labelText.width+o,this.labelText.height+o)):this.options.labelPosition==="bottomRight"?(this.labelText.x=this.position[0]+this.dimensions[0]-c,this.labelText.y=this.position[1]+this.dimensions[1]-f,this.labelText.anchor.x=.5,this.labelText.anchor.y=1,this.labelText.x-=this.labelText.width/2+this.labelXOffset,r.drawRect(this.position[0]+this.dimensions[0]-this.labelText.width-o-c-this.labelXOffset,this.position[1]+this.dimensions[1]-this.labelText.height-o-f,this.labelText.width+o,this.labelText.height+o)):this.options.labelPosition==="outerLeft"&&!this.flipText||this.options.labelPosition==="outerTop"&&this.flipText?(this.labelText.x=this.position[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x-=this.labelText.width/2+3):this.options.labelPosition==="outerTop"&&!this.flipText||this.options.labelPosition==="outerLeft"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y-=this.labelText.height/2+3):this.options.labelPosition==="outerBottom"&&!this.flipText||this.options.labelPosition==="outerRight"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0]/2,this.labelText.y=this.position[1]+this.dimensions[1],this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.y+=this.labelText.height/2+3):this.options.labelPosition==="outerRight"&&!this.flipText||this.options.labelPosition==="outerBottom"&&this.flipText?(this.labelText.x=this.position[0]+this.dimensions[0],this.labelText.y=this.position[1]+this.dimensions[1]/2,this.labelText.anchor.x=.5,this.labelText.anchor.y=.5,this.labelText.x+=this.labelText.width/2+3):this.labelText.visible=!1,this.options.labelPosition==="outerLeft"||this.options.labelPosition==="outerRight"||this.options.labelPosition==="outerTop"||this.options.labelPosition==="outerBottom"?this.pLabel.setParent(this.pBase):this.pLabel.setParent(this.pMasked)}},{key:"rerender",value:function(r){this.options=r,this.draw(),this.drawBackground(),this.drawLabel(),this.drawError(),this.drawBorder()}},{key:"draw",value:function(){this.drawError()}},{key:"exportSVG",value:function(){const r=document.createElement("g"),a=document.createElement("rect");a.setAttribute("x",`${this.position[0]}`),a.setAttribute("y",`${this.position[1]}`),a.setAttribute("width",`${this.dimensions[0]}`),a.setAttribute("height",`${this.dimensions[1]}`),this.options&&this.options.backgroundColor?a.setAttribute("fill",this.options.backgroundColor):a.setAttribute("fill-opacity","0");const o=document.createElement("g");o.setAttribute("class","g-clipped"),r.appendChild(o),o.appendChild(a);const s=document.createElement("g");o.setAttribute("class","g-track"),o.appendChild(s);const u=document.createElement("g");o.setAttribute("class","g-labels"),o.appendChild(u);const c=document.createElementNS("http://www.w3.org/2000/svg","clipPath");r.appendChild(c);const l=document.createElementNS("http://www.w3.org/2000/svg","polygon");c.appendChild(l),l.setAttribute("points",`${this.position[0]},${this.position[1]} ${this.position[0]+this.dimensions[0]},${this.position[1]} ${this.position[0]+this.dimensions[0]},${this.position[1]+this.dimensions[1]} ${this.position[0]},${this.position[1]+this.dimensions[1]} `);const f=Pt.nice();c.setAttribute("id",f),o.setAttribute("style",`clip-path:url(#${f});`);const h=this.labelText.text.split(`
`);let d=0;const p=3,m=(this.labelTextFontSize+2)*h.length+p;this.labelText.anchor.y===.5?d=m/2:this.labelText.anchor.y===1&&(d=-m);for(let g=0;g<h.length;g++){const v=document.createElement("text");if(v.setAttribute("font-family",this.labelTextFontFamily),v.setAttribute("font-size",`${this.labelTextFontSize}px`),v.innerText=h[g],this.options.labelPosition==="topLeft"||this.options.labelPosition==="topRight"){const E=d+(g+1)*(this.labelTextFontSize+2);v.setAttribute("dy",E)}else(this.options.labelPosition==="bottomLeft"||this.options.labelPosition==="bottomRight")&&v.setAttribute("dy",d+g*(this.labelTextFontSize+2));v.setAttribute("fill",this.options.labelColor),this.labelText.anchor.x===.5?v.setAttribute("text-anchor","middle"):this.labelText.anchor.x===1&&v.setAttribute("text-anchor","end"),u.appendChild(v)}return u.setAttribute("transform",`translate(${this.labelText.x},${this.labelText.y})scale(${this.labelText.scale.x},1)`),[r,s]}}]),n}(Fc),Iv=function(){function e(t,n){if(_classCallCheck3(this,e),this.tilesetInfoLoading=!0,!t){console.error("No dataconfig provided");return}this.dataConfig=JSON.parse(JSON.stringify(t)),this.uuid=Pt.nice(),this.pubSub=n,this.dataConfig.children&&(this.dataConfig.children=t.children.map(i=>new e(i,n)))}return _createClass3(e,[{key:"registerFileUrl",value:async function({server:n,url:i,filetype:r,coordSystem:a}){const o=`${Vg(n)}/register_url/`,s={fileurl:i,filetype:r,coordSystem:a};return fetch(o,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json; charset=utf-8"}})}},{key:"tilesetInfo",value:function(n){return this.dataConfig.server&&this.dataConfig.url&&this.dataConfig.filetype?this.registerFileUrl(this.dataConfig).then(i=>i.json()).then(i=>{this.dataConfig.tilesetUid=i.uid,this.tilesetInfoAfterRegister(n)}).catch(i=>{console.error("Error registering url",i)}):new Promise(()=>{this.tilesetInfoAfterRegister(n)})}},{key:"tilesetInfoAfterRegister",value:function(n){if(!this.dataConfig.children)!this.dataConfig.server||!this.dataConfig.tilesetUid?(console.warn("No dataConfig children, server or tilesetUid:",this.dataConfig),n(null)):Xe.trackInfo(this.dataConfig.server,this.dataConfig.tilesetUid,i=>{this.dataConfig.tilesetInfo=i[this.dataConfig.tilesetUid],n(i[this.dataConfig.tilesetUid],this.dataConfig.tilesetUid)},i=>{this.tilesetInfoLoading=!1,n({error:i})},this.pubSub);else{const i=this.dataConfig.children.map(r=>new Promise(a=>{r.tilesetInfo(a)}));Promise.all(i).then(r=>{n(r[0])})}}},{key:"fullTileId",value:function(n,i){return`${n}.${i}`}},{key:"fetchTilesDebounced",value:function(n,i){if(this.dataConfig.type==="horizontal-section")this.fetchHorizontalSection(n,i);else if(this.dataConfig.type==="vertical-section")this.fetchHorizontalSection(n,i,!0);else if(!this.dataConfig.children&&this.dataConfig.tilesetUid)new Promise(a=>{Xe.fetchTilesDebounced({id:Pt.nice(),server:this.dataConfig.server,done:a,ids:i.map(o=>`${this.dataConfig.tilesetUid}.${o}`),options:this.dataConfig.options},this.pubSub,!0)}).then(a=>{const o=un(a)[0].tilesetUid,s={};for(let u=0;u<i.length;u++){const c=this.fullTileId(o,i[u]);a[c].tilePositionId=i[u],s[i[u]]=a[c]}n(s)});else{const r=this.dataConfig.children.map(a=>new Promise(o=>{a.fetchTilesDebounced(o,i)},this.pubSub,!0));Promise.all(r).then(a=>{if(this.dataConfig.type==="divided"){const o=this.makeDivided(a,i);n(o)}else console.warn("Unimplemented dataConfig type. Returning first data source.",this.dataConfig),n(a[0])})}}},{key:"divideData",value:function(n,i){const r=new Float32Array(n.length);for(let a=0;a<r.length;a++)i[a]===0?r[a]=NaN:r[a]=n[a]/i[a];return r}},{key:"horizontalSlice",value:function(){return null}},{key:"extractDataSlice",value:function(n,i,r,a){if(!a)return n.slice(i[1]*r,i[1]*(r+1));const o=new Array(i[1]);for(let s=r;s<n.length;s+=i[0])o[Math.floor(s/i[0])]=n[s];return o}},{key:"fetchHorizontalSection",value:function(n,i,r=!1){const a=[],o=[];for(const u of i){const c=u.split("."),l=+c[0],f=+c[1],h=Et().domain([this.dataConfig.slicePos,this.dataConfig.slicePos]);let d=[];if(this.dataConfig.tilesetInfo&&this.dataConfig.tilesetInfo.resolutions){const g=this.dataConfig.tilesetInfo.resolutions.map(v=>+v).sort((v,E)=>E-v);d=Xe.calculateTilesFromResolution(g[l],h,this.dataConfig.tilesetInfo.min_pos[r?1:0],this.dataConfig.tilesetInfo.max_pos[r?1:0])}else d=Xe.calculateTiles(l,h,this.dataConfig.tilesetInfo.min_pos[r?1:0],this.dataConfig.tilesetInfo.max_pos[r?1:0],this.dataConfig.tilesetInfo.max_zoom,this.dataConfig.tilesetInfo.max_width);const p=[f,d[0]].sort((g,v)=>g-v);p[0]===f?o.push(!1):o.push(!0);const m=`${l}.${p[0]}.${p[1]}`;a.push(m)}new Promise(u=>{Xe.fetchTilesDebounced({id:Pt.nice(),server:this.dataConfig.server,done:u,ids:a.map(c=>`${this.dataConfig.tilesetUid}.${c}`)},this.pubSub,!0)}).then(u=>{const c=un(u)[0].tilesetUid,l={};for(let f=0;f<a.length;f++){const h=a[f].split("."),d=+h[0],p=+h[1],m=+h[2],g=Xe.calculateTileAndPosInTile(this.dataConfig.tilesetInfo,this.dataConfig.tilesetInfo.max_width,this.dataConfig.tilesetInfo.min_pos[1],d,+this.dataConfig.slicePos)[1],v=this.fullTileId(c,a[f]),E=u[v];let y=null;if(p===m){y=this.extractDataSlice(E.dense,[256,256],g);const b=this.extractDataSlice(E.dense,[256,256],g,1);for(let S=0;S<y.length;S++)y[S]+=b[S]}else o[f]?y=this.extractDataSlice(E.dense,[256,256],g,1):y=this.extractDataSlice(E.dense,[256,256],g);const T={min_value:Math.min.apply(null,y),max_value:Math.max.apply(null,y),denseDataExtrema:new qg(y),minNonZero:Rb(y),maxNonZero:Pb(y),dense:y,dtype:E.dtype,server:E.server,tilePos:o[f]?[m]:[p],tilePositionId:i[f],tilesetUid:c,zoomLevel:E.zoomLevel};l[i[f]]=T}n(l)})}},{key:"makeDivided",value:function(n,i){n.length<2&&console.warn("Only one tileset specified for a divided datafetcher:",this.dataConfig);const r={};for(let a=0;a<i.length;a++){const o=n[0][i[a]].zoomLevel,s=n[0][i[a]].tilePos;let u={zoomLevel:o,tilePos:s,tilePositionId:i[a]};if(n[0][i[a]].dense&&n[1][i[a]].dense){const c=this.divideData(n[0][i[a]].dense,n[1][i[a]].dense),l=s.length===2?new $b(c):new qg(c);u={dense:c,denseDataExtrema:l,minNonZero:Rb(c),maxNonZero:Pb(c),zoomLevel:o,tilePos:s,tilePositionId:i[a]}}r[i[a]]=u}return r}}]),e}();var No={};(function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(a,o){return Object.prototype.hasOwnProperty.call(a,o)}e.assign=function(a){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(!!s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var u in s)n(s,u)&&(a[u]=s[u])}}return a},e.shrinkBuf=function(a,o){return a.length===o?a:a.subarray?a.subarray(0,o):(a.length=o,a)};var i={arraySet:function(a,o,s,u,c){if(o.subarray&&a.subarray){a.set(o.subarray(s,s+u),c);return}for(var l=0;l<u;l++)a[c+l]=o[s+l]},flattenChunks:function(a){var o,s,u,c,l,f;for(u=0,o=0,s=a.length;o<s;o++)u+=a[o].length;for(f=new Uint8Array(u),c=0,o=0,s=a.length;o<s;o++)l=a[o],f.set(l,c),c+=l.length;return f}},r={arraySet:function(a,o,s,u,c){for(var l=0;l<u;l++)a[c+l]=o[s+l]},flattenChunks:function(a){return[].concat.apply([],a)}};e.setTyped=function(a){a?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,r))},e.setTyped(t)})(No);var $d={},Za={},Hc={},l0e=No,u0e=4,e3=0,t3=1,c0e=2;function $c(e){for(var t=e.length;--t>=0;)e[t]=0}var h0e=0,n3=1,f0e=2,d0e=3,p0e=258,FA=29,Ud=256,Gd=Ud+1+FA,Uc=30,HA=19,r3=2*Gd+1,Ll=15,$A=16,m0e=7,UA=256,i3=16,a3=17,o3=18,GA=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],kv=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],g0e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],s3=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],v0e=512,Mo=new Array((Gd+2)*2);$c(Mo);var zd=new Array(Uc*2);$c(zd);var jd=new Array(v0e);$c(jd);var Vd=new Array(p0e-d0e+1);$c(Vd);var zA=new Array(FA);$c(zA);var Ov=new Array(Uc);$c(Ov);function jA(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}var l3,u3,c3;function VA(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function h3(e){return e<256?jd[e]:jd[256+(e>>>7)]}function Yd(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}function mi(e,t,n){e.bi_valid>$A-n?(e.bi_buf|=t<<e.bi_valid&65535,Yd(e,e.bi_buf),e.bi_buf=t>>$A-e.bi_valid,e.bi_valid+=n-$A):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function Qa(e,t,n){mi(e,n[t*2],n[t*2+1])}function f3(e,t){var n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1}function y0e(e){e.bi_valid===16?(Yd(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}function T0e(e,t){var n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,u=t.stat_desc.max_length,c,l,f,h,d,p,m=0;for(h=0;h<=Ll;h++)e.bl_count[h]=0;for(n[e.heap[e.heap_max]*2+1]=0,c=e.heap_max+1;c<r3;c++)l=e.heap[c],h=n[n[l*2+1]*2+1]+1,h>u&&(h=u,m++),n[l*2+1]=h,!(l>i)&&(e.bl_count[h]++,d=0,l>=s&&(d=o[l-s]),p=n[l*2],e.opt_len+=p*(h+d),a&&(e.static_len+=p*(r[l*2+1]+d)));if(m!==0){do{for(h=u-1;e.bl_count[h]===0;)h--;e.bl_count[h]--,e.bl_count[h+1]+=2,e.bl_count[u]--,m-=2}while(m>0);for(h=u;h!==0;h--)for(l=e.bl_count[h];l!==0;)f=e.heap[--c],!(f>i)&&(n[f*2+1]!==h&&(e.opt_len+=(h-n[f*2+1])*n[f*2],n[f*2+1]=h),l--)}}function d3(e,t,n){var i=new Array(Ll+1),r=0,a,o;for(a=1;a<=Ll;a++)i[a]=r=r+n[a-1]<<1;for(o=0;o<=t;o++){var s=e[o*2+1];s!==0&&(e[o*2]=f3(i[s]++,s))}}function E0e(){var e,t,n,i,r,a=new Array(Ll+1);for(n=0,i=0;i<FA-1;i++)for(zA[i]=n,e=0;e<1<<GA[i];e++)Vd[n++]=i;for(Vd[n-1]=i,r=0,i=0;i<16;i++)for(Ov[i]=r,e=0;e<1<<kv[i];e++)jd[r++]=i;for(r>>=7;i<Uc;i++)for(Ov[i]=r<<7,e=0;e<1<<kv[i]-7;e++)jd[256+r++]=i;for(t=0;t<=Ll;t++)a[t]=0;for(e=0;e<=143;)Mo[e*2+1]=8,e++,a[8]++;for(;e<=255;)Mo[e*2+1]=9,e++,a[9]++;for(;e<=279;)Mo[e*2+1]=7,e++,a[7]++;for(;e<=287;)Mo[e*2+1]=8,e++,a[8]++;for(d3(Mo,Gd+1,a),e=0;e<Uc;e++)zd[e*2+1]=5,zd[e*2]=f3(e,5);l3=new jA(Mo,GA,Ud+1,Gd,Ll),u3=new jA(zd,kv,0,Uc,Ll),c3=new jA(new Array(0),g0e,0,HA,m0e)}function p3(e){var t;for(t=0;t<Gd;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Uc;t++)e.dyn_dtree[t*2]=0;for(t=0;t<HA;t++)e.bl_tree[t*2]=0;e.dyn_ltree[UA*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function m3(e){e.bi_valid>8?Yd(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function b0e(e,t,n,i){m3(e),i&&(Yd(e,n),Yd(e,~n)),l0e.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function g3(e,t,n,i){var r=t*2,a=n*2;return e[r]<e[a]||e[r]===e[a]&&i[t]<=i[n]}function YA(e,t,n){for(var i=e.heap[n],r=n<<1;r<=e.heap_len&&(r<e.heap_len&&g3(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!g3(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i}function v3(e,t,n){var i,r,a=0,o,s;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+a*2]<<8|e.pending_buf[e.d_buf+a*2+1],r=e.pending_buf[e.l_buf+a],a++,i===0?Qa(e,r,t):(o=Vd[r],Qa(e,o+Ud+1,t),s=GA[o],s!==0&&(r-=zA[o],mi(e,r,s)),i--,o=h3(i),Qa(e,o,n),s=kv[o],s!==0&&(i-=Ov[o],mi(e,i,s)));while(a<e.last_lit);Qa(e,UA,t)}function WA(e,t){var n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,a=t.stat_desc.elems,o,s,u=-1,c;for(e.heap_len=0,e.heap_max=r3,o=0;o<a;o++)n[o*2]!==0?(e.heap[++e.heap_len]=u=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)c=e.heap[++e.heap_len]=u<2?++u:0,n[c*2]=1,e.depth[c]=0,e.opt_len--,r&&(e.static_len-=i[c*2+1]);for(t.max_code=u,o=e.heap_len>>1;o>=1;o--)YA(e,n,o);c=a;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],YA(e,n,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,n[c*2]=n[o*2]+n[s*2],e.depth[c]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,n[o*2+1]=n[s*2+1]=c,e.heap[1]=c++,YA(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],T0e(e,t),d3(n,u,e.bl_count)}function y3(e,t,n){var i,r=-1,a,o=t[0*2+1],s=0,u=7,c=4;for(o===0&&(u=138,c=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)a=o,o=t[(i+1)*2+1],!(++s<u&&a===o)&&(s<c?e.bl_tree[a*2]+=s:a!==0?(a!==r&&e.bl_tree[a*2]++,e.bl_tree[i3*2]++):s<=10?e.bl_tree[a3*2]++:e.bl_tree[o3*2]++,s=0,r=a,o===0?(u=138,c=3):a===o?(u=6,c=3):(u=7,c=4))}function T3(e,t,n){var i,r=-1,a,o=t[0*2+1],s=0,u=7,c=4;for(o===0&&(u=138,c=3),i=0;i<=n;i++)if(a=o,o=t[(i+1)*2+1],!(++s<u&&a===o)){if(s<c)do Qa(e,a,e.bl_tree);while(--s!==0);else a!==0?(a!==r&&(Qa(e,a,e.bl_tree),s--),Qa(e,i3,e.bl_tree),mi(e,s-3,2)):s<=10?(Qa(e,a3,e.bl_tree),mi(e,s-3,3)):(Qa(e,o3,e.bl_tree),mi(e,s-11,7));s=0,r=a,o===0?(u=138,c=3):a===o?(u=6,c=3):(u=7,c=4)}}function _0e(e){var t;for(y3(e,e.dyn_ltree,e.l_desc.max_code),y3(e,e.dyn_dtree,e.d_desc.max_code),WA(e,e.bl_desc),t=HA-1;t>=3&&e.bl_tree[s3[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}function S0e(e,t,n,i){var r;for(mi(e,t-257,5),mi(e,n-1,5),mi(e,i-4,4),r=0;r<i;r++)mi(e,e.bl_tree[s3[r]*2+1],3);T3(e,e.dyn_ltree,t-1),T3(e,e.dyn_dtree,n-1)}function A0e(e){var t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return e3;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return t3;for(n=32;n<Ud;n++)if(e.dyn_ltree[n*2]!==0)return t3;return e3}var E3=!1;function C0e(e){E3||(E0e(),E3=!0),e.l_desc=new VA(e.dyn_ltree,l3),e.d_desc=new VA(e.dyn_dtree,u3),e.bl_desc=new VA(e.bl_tree,c3),e.bi_buf=0,e.bi_valid=0,p3(e)}function b3(e,t,n,i){mi(e,(h0e<<1)+(i?1:0),3),b0e(e,t,n,!0)}function D0e(e){mi(e,n3<<1,3),Qa(e,UA,Mo),y0e(e)}function w0e(e,t,n,i){var r,a,o=0;e.level>0?(e.strm.data_type===c0e&&(e.strm.data_type=A0e(e)),WA(e,e.l_desc),WA(e,e.d_desc),o=_0e(e),r=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=r&&(r=a)):r=a=n+5,n+4<=r&&t!==-1?b3(e,t,n,i):e.strategy===u0e||a===r?(mi(e,(n3<<1)+(i?1:0),3),v3(e,Mo,zd)):(mi(e,(f0e<<1)+(i?1:0),3),S0e(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),v3(e,e.dyn_ltree,e.dyn_dtree)),p3(e),i&&m3(e)}function I0e(e,t,n){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=n&255,e.last_lit++,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(Vd[n]+Ud+1)*2]++,e.dyn_dtree[h3(t)*2]++),e.last_lit===e.lit_bufsize-1}Hc._tr_init=C0e,Hc._tr_stored_block=b3,Hc._tr_flush_block=w0e,Hc._tr_tally=I0e,Hc._tr_align=D0e;function k0e(e,t,n,i){for(var r=e&65535|0,a=e>>>16&65535|0,o=0;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+t[i++]|0,a=a+r|0;while(--o);r%=65521,a%=65521}return r|a<<16|0}var _3=k0e;function O0e(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t}var x0e=O0e();function P0e(e,t,n,i){var r=x0e,a=i+n;e^=-1;for(var o=i;o<a;o++)e=e>>>8^r[(e^t[o])&255];return e^-1}var S3=P0e,qA={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Jr=No,Wi=Hc,A3=_3,ps=S3,R0e=qA,Bl=0,N0e=1,M0e=3,ms=4,C3=5,Ja=0,D3=1,qi=-2,L0e=-3,XA=-5,B0e=-1,F0e=1,xv=2,H0e=3,$0e=4,U0e=0,G0e=2,Pv=8,z0e=9,j0e=15,V0e=8,Y0e=29,W0e=256,KA=W0e+1+Y0e,q0e=30,X0e=19,K0e=2*KA+1,Z0e=15,jt=3,gs=258,ga=gs+jt+1,Q0e=32,Rv=42,ZA=69,Nv=73,Mv=91,Lv=103,Fl=113,Wd=666,rr=1,qd=2,Hl=3,Gc=4,J0e=3;function vs(e,t){return e.msg=R0e[t],t}function w3(e){return(e<<1)-(e>4?9:0)}function ys(e){for(var t=e.length;--t>=0;)e[t]=0}function Ts(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(Jr.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))}function mr(e,t){Wi._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ts(e.strm)}function Zt(e,t){e.pending_buf[e.pending++]=t}function Xd(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}function eve(e,t,n,i){var r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,Jr.arraySet(t,e.input,e.next_in,r,n),e.state.wrap===1?e.adler=A3(e.adler,t,r,n):e.state.wrap===2&&(e.adler=ps(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)}function I3(e,t){var n=e.max_chain_length,i=e.strstart,r,a,o=e.prev_length,s=e.nice_match,u=e.strstart>e.w_size-ga?e.strstart-(e.w_size-ga):0,c=e.window,l=e.w_mask,f=e.prev,h=e.strstart+gs,d=c[i+o-1],p=c[i+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do if(r=t,!(c[r+o]!==p||c[r+o-1]!==d||c[r]!==c[i]||c[++r]!==c[i+1])){i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h);if(a=gs-(h-i),i=h-gs,a>o){if(e.match_start=t,o=a,a>=s)break;d=c[i+o-1],p=c[i+o]}}while((t=f[t&l])>u&&--n!==0);return o<=e.lookahead?o:e.lookahead}function $l(e){var t=e.w_size,n,i,r,a,o;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ga)){Jr.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do r=e.head[--n],e.head[n]=r>=t?r-t:0;while(--i);i=t,n=i;do r=e.prev[--n],e.prev[n]=r>=t?r-t:0;while(--i);a+=t}if(e.strm.avail_in===0)break;if(i=eve(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=jt)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+jt-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<jt)););}while(e.lookahead<ga&&e.strm.avail_in!==0)}function tve(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if($l(e),e.lookahead===0&&t===Bl)return rr;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,mr(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-ga&&(mr(e,!1),e.strm.avail_out===0))return rr}return e.insert=0,t===ms?(mr(e,!0),e.strm.avail_out===0?Hl:Gc):(e.strstart>e.block_start&&(mr(e,!1),e.strm.avail_out===0),rr)}function QA(e,t){for(var n,i;;){if(e.lookahead<ga){if($l(e),e.lookahead<ga&&t===Bl)return rr;if(e.lookahead===0)break}if(n=0,e.lookahead>=jt&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+jt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-ga&&(e.match_length=I3(e,n)),e.match_length>=jt)if(i=Wi._tr_tally(e,e.strstart-e.match_start,e.match_length-jt),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=jt){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+jt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=Wi._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(mr(e,!1),e.strm.avail_out===0))return rr}return e.insert=e.strstart<jt-1?e.strstart:jt-1,t===ms?(mr(e,!0),e.strm.avail_out===0?Hl:Gc):e.last_lit&&(mr(e,!1),e.strm.avail_out===0)?rr:qd}function zc(e,t){for(var n,i,r;;){if(e.lookahead<ga){if($l(e),e.lookahead<ga&&t===Bl)return rr;if(e.lookahead===0)break}if(n=0,e.lookahead>=jt&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+jt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=jt-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ga&&(e.match_length=I3(e,n),e.match_length<=5&&(e.strategy===F0e||e.match_length===jt&&e.strstart-e.match_start>4096)&&(e.match_length=jt-1)),e.prev_length>=jt&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-jt,i=Wi._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-jt),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+jt-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=jt-1,e.strstart++,i&&(mr(e,!1),e.strm.avail_out===0))return rr}else if(e.match_available){if(i=Wi._tr_tally(e,0,e.window[e.strstart-1]),i&&mr(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return rr}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Wi._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<jt-1?e.strstart:jt-1,t===ms?(mr(e,!0),e.strm.avail_out===0?Hl:Gc):e.last_lit&&(mr(e,!1),e.strm.avail_out===0)?rr:qd}function nve(e,t){for(var n,i,r,a,o=e.window;;){if(e.lookahead<=gs){if($l(e),e.lookahead<=gs&&t===Bl)return rr;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=jt&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){a=e.strstart+gs;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<a);e.match_length=gs-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=jt?(n=Wi._tr_tally(e,1,e.match_length-jt),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Wi._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(mr(e,!1),e.strm.avail_out===0))return rr}return e.insert=0,t===ms?(mr(e,!0),e.strm.avail_out===0?Hl:Gc):e.last_lit&&(mr(e,!1),e.strm.avail_out===0)?rr:qd}function rve(e,t){for(var n;;){if(e.lookahead===0&&($l(e),e.lookahead===0)){if(t===Bl)return rr;break}if(e.match_length=0,n=Wi._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(mr(e,!1),e.strm.avail_out===0))return rr}return e.insert=0,t===ms?(mr(e,!0),e.strm.avail_out===0?Hl:Gc):e.last_lit&&(mr(e,!1),e.strm.avail_out===0)?rr:qd}function eo(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}var jc;jc=[new eo(0,0,0,0,tve),new eo(4,4,8,4,QA),new eo(4,5,16,8,QA),new eo(4,6,32,32,QA),new eo(4,4,16,16,zc),new eo(8,16,32,32,zc),new eo(8,16,128,128,zc),new eo(8,32,128,256,zc),new eo(32,128,258,1024,zc),new eo(32,258,258,4096,zc)];function ive(e){e.window_size=2*e.w_size,ys(e.head),e.max_lazy_match=jc[e.level].max_lazy,e.good_match=jc[e.level].good_length,e.nice_match=jc[e.level].nice_length,e.max_chain_length=jc[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=jt-1,e.match_available=0,e.ins_h=0}function ave(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Pv,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Jr.Buf16(K0e*2),this.dyn_dtree=new Jr.Buf16((2*q0e+1)*2),this.bl_tree=new Jr.Buf16((2*X0e+1)*2),ys(this.dyn_ltree),ys(this.dyn_dtree),ys(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Jr.Buf16(Z0e+1),this.heap=new Jr.Buf16(2*KA+1),ys(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Jr.Buf16(2*KA+1),ys(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function k3(e){var t;return!e||!e.state?vs(e,qi):(e.total_in=e.total_out=0,e.data_type=G0e,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?Rv:Fl,e.adler=t.wrap===2?0:1,t.last_flush=Bl,Wi._tr_init(t),Ja)}function O3(e){var t=k3(e);return t===Ja&&ive(e.state),t}function ove(e,t){return!e||!e.state||e.state.wrap!==2?qi:(e.state.gzhead=t,Ja)}function x3(e,t,n,i,r,a){if(!e)return qi;var o=1;if(t===B0e&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>z0e||n!==Pv||i<8||i>15||t<0||t>9||a<0||a>$0e)return vs(e,qi);i===8&&(i=9);var s=new ave;return e.state=s,s.strm=e,s.wrap=o,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=r+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+jt-1)/jt),s.window=new Jr.Buf8(s.w_size*2),s.head=new Jr.Buf16(s.hash_size),s.prev=new Jr.Buf16(s.w_size),s.lit_bufsize=1<<r+6,s.pending_buf_size=s.lit_bufsize*4,s.pending_buf=new Jr.Buf8(s.pending_buf_size),s.d_buf=1*s.lit_bufsize,s.l_buf=(1+2)*s.lit_bufsize,s.level=t,s.strategy=a,s.method=n,O3(e)}function sve(e,t){return x3(e,t,Pv,j0e,V0e,U0e)}function lve(e,t){var n,i,r,a;if(!e||!e.state||t>C3||t<0)return e?vs(e,qi):qi;if(i=e.state,!e.output||!e.input&&e.avail_in!==0||i.status===Wd&&t!==ms)return vs(e,e.avail_out===0?XA:qi);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===Rv)if(i.wrap===2)e.adler=0,Zt(i,31),Zt(i,139),Zt(i,8),i.gzhead?(Zt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),Zt(i,i.gzhead.time&255),Zt(i,i.gzhead.time>>8&255),Zt(i,i.gzhead.time>>16&255),Zt(i,i.gzhead.time>>24&255),Zt(i,i.level===9?2:i.strategy>=xv||i.level<2?4:0),Zt(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(Zt(i,i.gzhead.extra.length&255),Zt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=ps(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=ZA):(Zt(i,0),Zt(i,0),Zt(i,0),Zt(i,0),Zt(i,0),Zt(i,i.level===9?2:i.strategy>=xv||i.level<2?4:0),Zt(i,J0e),i.status=Fl);else{var o=Pv+(i.w_bits-8<<4)<<8,s=-1;i.strategy>=xv||i.level<2?s=0:i.level<6?s=1:i.level===6?s=2:s=3,o|=s<<6,i.strstart!==0&&(o|=Q0e),o+=31-o%31,i.status=Fl,Xd(i,o),i.strstart!==0&&(Xd(i,e.adler>>>16),Xd(i,e.adler&65535)),e.adler=1}if(i.status===ZA)if(i.gzhead.extra){for(r=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=ps(e.adler,i.pending_buf,i.pending-r,r)),Ts(e),r=i.pending,i.pending===i.pending_buf_size));)Zt(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>r&&(e.adler=ps(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=Nv)}else i.status=Nv;if(i.status===Nv)if(i.gzhead.name){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=ps(e.adler,i.pending_buf,i.pending-r,r)),Ts(e),r=i.pending,i.pending===i.pending_buf_size)){a=1;break}i.gzindex<i.gzhead.name.length?a=i.gzhead.name.charCodeAt(i.gzindex++)&255:a=0,Zt(i,a)}while(a!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=ps(e.adler,i.pending_buf,i.pending-r,r)),a===0&&(i.gzindex=0,i.status=Mv)}else i.status=Mv;if(i.status===Mv)if(i.gzhead.comment){r=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>r&&(e.adler=ps(e.adler,i.pending_buf,i.pending-r,r)),Ts(e),r=i.pending,i.pending===i.pending_buf_size)){a=1;break}i.gzindex<i.gzhead.comment.length?a=i.gzhead.comment.charCodeAt(i.gzindex++)&255:a=0,Zt(i,a)}while(a!==0);i.gzhead.hcrc&&i.pending>r&&(e.adler=ps(e.adler,i.pending_buf,i.pending-r,r)),a===0&&(i.status=Lv)}else i.status=Lv;if(i.status===Lv&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&Ts(e),i.pending+2<=i.pending_buf_size&&(Zt(i,e.adler&255),Zt(i,e.adler>>8&255),e.adler=0,i.status=Fl)):i.status=Fl),i.pending!==0){if(Ts(e),e.avail_out===0)return i.last_flush=-1,Ja}else if(e.avail_in===0&&w3(t)<=w3(n)&&t!==ms)return vs(e,XA);if(i.status===Wd&&e.avail_in!==0)return vs(e,XA);if(e.avail_in!==0||i.lookahead!==0||t!==Bl&&i.status!==Wd){var u=i.strategy===xv?rve(i,t):i.strategy===H0e?nve(i,t):jc[i.level].func(i,t);if((u===Hl||u===Gc)&&(i.status=Wd),u===rr||u===Hl)return e.avail_out===0&&(i.last_flush=-1),Ja;if(u===qd&&(t===N0e?Wi._tr_align(i):t!==C3&&(Wi._tr_stored_block(i,0,0,!1),t===M0e&&(ys(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),Ts(e),e.avail_out===0))return i.last_flush=-1,Ja}return t!==ms?Ja:i.wrap<=0?D3:(i.wrap===2?(Zt(i,e.adler&255),Zt(i,e.adler>>8&255),Zt(i,e.adler>>16&255),Zt(i,e.adler>>24&255),Zt(i,e.total_in&255),Zt(i,e.total_in>>8&255),Zt(i,e.total_in>>16&255),Zt(i,e.total_in>>24&255)):(Xd(i,e.adler>>>16),Xd(i,e.adler&65535)),Ts(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?Ja:D3)}function uve(e){var t;return!e||!e.state?qi:(t=e.state.status,t!==Rv&&t!==ZA&&t!==Nv&&t!==Mv&&t!==Lv&&t!==Fl&&t!==Wd?vs(e,qi):(e.state=null,t===Fl?vs(e,L0e):Ja))}function cve(e,t){var n=t.length,i,r,a,o,s,u,c,l;if(!e||!e.state||(i=e.state,o=i.wrap,o===2||o===1&&i.status!==Rv||i.lookahead))return qi;for(o===1&&(e.adler=A3(e.adler,t,n,0)),i.wrap=0,n>=i.w_size&&(o===0&&(ys(i.head),i.strstart=0,i.block_start=0,i.insert=0),l=new Jr.Buf8(i.w_size),Jr.arraySet(l,t,n-i.w_size,i.w_size,0),t=l,n=i.w_size),s=e.avail_in,u=e.next_in,c=e.input,e.avail_in=n,e.next_in=0,e.input=t,$l(i);i.lookahead>=jt;){r=i.strstart,a=i.lookahead-(jt-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[r+jt-1])&i.hash_mask,i.prev[r&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=r,r++;while(--a);i.strstart=r,i.lookahead=jt-1,$l(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=jt-1,i.match_available=0,e.next_in=u,e.input=c,e.avail_in=s,i.wrap=o,Ja}Za.deflateInit=sve,Za.deflateInit2=x3,Za.deflateReset=O3,Za.deflateResetKeep=k3,Za.deflateSetHeader=ove,Za.deflate=lve,Za.deflateEnd=uve,Za.deflateSetDictionary=cve,Za.deflateInfo="pako deflate (from Nodeca project)";var Ul={},Bv=No,P3=!0,R3=!0;try{String.fromCharCode.apply(null,[0])}catch{P3=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{R3=!1}for(var Kd=new Bv.Buf8(256),Es=0;Es<256;Es++)Kd[Es]=Es>=252?6:Es>=248?5:Es>=240?4:Es>=224?3:Es>=192?2:1;Kd[254]=Kd[254]=1,Ul.string2buf=function(e){var t,n,i,r,a,o=e.length,s=0;for(r=0;r<o;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Bv.Buf8(s),a=0,r=0;a<s;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t};function N3(e,t){if(t<65534&&(e.subarray&&R3||!e.subarray&&P3))return String.fromCharCode.apply(null,Bv.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}Ul.buf2binstring=function(e){return N3(e,e.length)},Ul.binstring2buf=function(e){for(var t=new Bv.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},Ul.buf2string=function(e,t){var n,i,r,a,o=t||e.length,s=new Array(o*2);for(i=0,n=0;n<o;){if(r=e[n++],r<128){s[i++]=r;continue}if(a=Kd[r],a>4){s[i++]=65533,n+=a-1;continue}for(r&=a===2?31:a===3?15:7;a>1&&n<o;)r=r<<6|e[n++]&63,a--;if(a>1){s[i++]=65533;continue}r<65536?s[i++]=r:(r-=65536,s[i++]=55296|r>>10&1023,s[i++]=56320|r&1023)}return N3(s,i)},Ul.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+Kd[e[n]]>t?n:t};function hve(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var M3=hve,Zd=Za,Qd=No,JA=Ul,eC=qA,fve=M3,L3=Object.prototype.toString,dve=0,tC=4,Vc=0,B3=1,F3=2,pve=-1,mve=0,gve=8;function Gl(e){if(!(this instanceof Gl))return new Gl(e);this.options=Qd.assign({level:pve,method:gve,chunkSize:16384,windowBits:15,memLevel:8,strategy:mve,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fve,this.strm.avail_out=0;var n=Zd.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Vc)throw new Error(eC[n]);if(t.header&&Zd.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(typeof t.dictionary=="string"?i=JA.string2buf(t.dictionary):L3.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=Zd.deflateSetDictionary(this.strm,i),n!==Vc)throw new Error(eC[n]);this._dict_set=!0}}Gl.prototype.push=function(e,t){var n=this.strm,i=this.options.chunkSize,r,a;if(this.ended)return!1;a=t===~~t?t:t===!0?tC:dve,typeof e=="string"?n.input=JA.string2buf(e):L3.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new Qd.Buf8(i),n.next_out=0,n.avail_out=i),r=Zd.deflate(n,a),r!==B3&&r!==Vc)return this.onEnd(r),this.ended=!0,!1;(n.avail_out===0||n.avail_in===0&&(a===tC||a===F3))&&(this.options.to==="string"?this.onData(JA.buf2binstring(Qd.shrinkBuf(n.output,n.next_out))):this.onData(Qd.shrinkBuf(n.output,n.next_out)))}while((n.avail_in>0||n.avail_out===0)&&r!==B3);return a===tC?(r=Zd.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Vc):(a===F3&&(this.onEnd(Vc),n.avail_out=0),!0)},Gl.prototype.onData=function(e){this.chunks.push(e)},Gl.prototype.onEnd=function(e){e===Vc&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Qd.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function nC(e,t){var n=new Gl(t);if(n.push(e,!0),n.err)throw n.msg||eC[n.err];return n.result}function vve(e,t){return t=t||{},t.raw=!0,nC(e,t)}function yve(e,t){return t=t||{},t.gzip=!0,nC(e,t)}$d.Deflate=Gl,$d.deflate=nC,$d.deflateRaw=vve,$d.gzip=yve;var Jd={},va={},Fv=30,Tve=12,Eve=function(t,n){var i,r,a,o,s,u,c,l,f,h,d,p,m,g,v,E,y,T,b,S,w,D,R,M,k;i=t.state,r=t.next_in,M=t.input,a=r+(t.avail_in-5),o=t.next_out,k=t.output,s=o-(n-t.avail_out),u=o+(t.avail_out-257),c=i.dmax,l=i.wsize,f=i.whave,h=i.wnext,d=i.window,p=i.hold,m=i.bits,g=i.lencode,v=i.distcode,E=(1<<i.lenbits)-1,y=(1<<i.distbits)-1;e:do{m<15&&(p+=M[r++]<<m,m+=8,p+=M[r++]<<m,m+=8),T=g[p&E];t:for(;;){if(b=T>>>24,p>>>=b,m-=b,b=T>>>16&255,b===0)k[o++]=T&65535;else if(b&16){S=T&65535,b&=15,b&&(m<b&&(p+=M[r++]<<m,m+=8),S+=p&(1<<b)-1,p>>>=b,m-=b),m<15&&(p+=M[r++]<<m,m+=8,p+=M[r++]<<m,m+=8),T=v[p&y];n:for(;;){if(b=T>>>24,p>>>=b,m-=b,b=T>>>16&255,b&16){if(w=T&65535,b&=15,m<b&&(p+=M[r++]<<m,m+=8,m<b&&(p+=M[r++]<<m,m+=8)),w+=p&(1<<b)-1,w>c){t.msg="invalid distance too far back",i.mode=Fv;break e}if(p>>>=b,m-=b,b=o-s,w>b){if(b=w-b,b>f&&i.sane){t.msg="invalid distance too far back",i.mode=Fv;break e}if(D=0,R=d,h===0){if(D+=l-b,b<S){S-=b;do k[o++]=d[D++];while(--b);D=o-w,R=k}}else if(h<b){if(D+=l+h-b,b-=h,b<S){S-=b;do k[o++]=d[D++];while(--b);if(D=0,h<S){b=h,S-=b;do k[o++]=d[D++];while(--b);D=o-w,R=k}}}else if(D+=h-b,b<S){S-=b;do k[o++]=d[D++];while(--b);D=o-w,R=k}for(;S>2;)k[o++]=R[D++],k[o++]=R[D++],k[o++]=R[D++],S-=3;S&&(k[o++]=R[D++],S>1&&(k[o++]=R[D++]))}else{D=o-w;do k[o++]=k[D++],k[o++]=k[D++],k[o++]=k[D++],S-=3;while(S>2);S&&(k[o++]=k[D++],S>1&&(k[o++]=k[D++]))}}else if((b&64)===0){T=v[(T&65535)+(p&(1<<b)-1)];continue n}else{t.msg="invalid distance code",i.mode=Fv;break e}break}}else if((b&64)===0){T=g[(T&65535)+(p&(1<<b)-1)];continue t}else if(b&32){i.mode=Tve;break e}else{t.msg="invalid literal/length code",i.mode=Fv;break e}break}}while(r<a&&o<u);S=m>>3,r-=S,m-=S<<3,p&=(1<<m)-1,t.next_in=r,t.next_out=o,t.avail_in=r<a?5+(a-r):5-(r-a),t.avail_out=o<u?257+(u-o):257-(o-u),i.hold=p,i.bits=m},H3=No,Yc=15,$3=852,U3=592,G3=0,rC=1,z3=2,bve=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_ve=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Sve=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],Ave=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64],Cve=function(t,n,i,r,a,o,s,u){var c=u.bits,l=0,f=0,h=0,d=0,p=0,m=0,g=0,v=0,E=0,y=0,T,b,S,w,D,R=null,M=0,k,L=new H3.Buf16(Yc+1),$=new H3.Buf16(Yc+1),P=null,B=0,X,ee,se;for(l=0;l<=Yc;l++)L[l]=0;for(f=0;f<r;f++)L[n[i+f]]++;for(p=c,d=Yc;d>=1&&L[d]===0;d--);if(p>d&&(p=d),d===0)return a[o++]=1<<24|64<<16|0,a[o++]=1<<24|64<<16|0,u.bits=1,0;for(h=1;h<d&&L[h]===0;h++);for(p<h&&(p=h),v=1,l=1;l<=Yc;l++)if(v<<=1,v-=L[l],v<0)return-1;if(v>0&&(t===G3||d!==1))return-1;for($[1]=0,l=1;l<Yc;l++)$[l+1]=$[l]+L[l];for(f=0;f<r;f++)n[i+f]!==0&&(s[$[n[i+f]]++]=f);if(t===G3?(R=P=s,k=19):t===rC?(R=bve,M-=257,P=_ve,B-=257,k=256):(R=Sve,P=Ave,k=-1),y=0,f=0,l=h,D=o,m=p,g=0,S=-1,E=1<<p,w=E-1,t===rC&&E>$3||t===z3&&E>U3)return 1;for(;;){X=l-g,s[f]<k?(ee=0,se=s[f]):s[f]>k?(ee=P[B+s[f]],se=R[M+s[f]]):(ee=32+64,se=0),T=1<<l-g,b=1<<m,h=b;do b-=T,a[D+(y>>g)+b]=X<<24|ee<<16|se|0;while(b!==0);for(T=1<<l-1;y&T;)T>>=1;if(T!==0?(y&=T-1,y+=T):y=0,f++,--L[l]===0){if(l===d)break;l=n[i+s[f]]}if(l>p&&(y&w)!==S){for(g===0&&(g=p),D+=h,m=l-g,v=1<<m;m+g<d&&(v-=L[m+g],!(v<=0));)m++,v<<=1;if(E+=1<<m,t===rC&&E>$3||t===z3&&E>U3)return 1;S=y&w,a[S]=p<<24|m<<16|D-o|0}}return y!==0&&(a[D+y]=l-g<<24|64<<16|0),u.bits=p,0},ki=No,iC=_3,to=S3,Dve=Eve,ep=Cve,wve=0,j3=1,V3=2,Y3=4,Ive=5,Hv=6,zl=0,kve=1,Ove=2,Xi=-2,W3=-3,q3=-4,xve=-5,X3=8,K3=1,Z3=2,Q3=3,J3=4,e4=5,t4=6,n4=7,r4=8,i4=9,a4=10,$v=11,Lo=12,aC=13,o4=14,oC=15,s4=16,l4=17,u4=18,c4=19,Uv=20,Gv=21,h4=22,f4=23,d4=24,p4=25,m4=26,sC=27,g4=28,v4=29,wn=30,y4=31,Pve=32,Rve=852,Nve=592,Mve=15,Lve=Mve;function T4(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}function Bve(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new ki.Buf16(320),this.work=new ki.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E4(e){var t;return!e||!e.state?Xi:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=K3,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new ki.Buf32(Rve),t.distcode=t.distdyn=new ki.Buf32(Nve),t.sane=1,t.back=-1,zl)}function b4(e){var t;return!e||!e.state?Xi:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,E4(e))}function _4(e,t){var n,i;return!e||!e.state||(i=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?Xi:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,b4(e))}function S4(e,t){var n,i;return e?(i=new Bve,e.state=i,i.window=null,n=_4(e,t),n!==zl&&(e.state=null),n):Xi}function Fve(e){return S4(e,Lve)}var A4=!0,lC,uC;function Hve(e){if(A4){var t;for(lC=new ki.Buf32(512),uC=new ki.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ep(j3,e.lens,0,288,lC,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ep(V3,e.lens,0,32,uC,0,e.work,{bits:5}),A4=!1}e.lencode=lC,e.lenbits=9,e.distcode=uC,e.distbits=5}function C4(e,t,n,i){var r,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new ki.Buf8(a.wsize)),i>=a.wsize?(ki.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),ki.arraySet(a.window,t,n-i,r,a.wnext),i-=r,i?(ki.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0}function $ve(e,t){var n,i,r,a,o,s,u,c,l,f,h,d,p,m,g=0,v,E,y,T,b,S,w,D,R=new ki.Buf8(4),M,k,L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return Xi;n=e.state,n.mode===Lo&&(n.mode=aC),o=e.next_out,r=e.output,u=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,c=n.hold,l=n.bits,f=s,h=u,D=zl;e:for(;;)switch(n.mode){case K3:if(n.wrap===0){n.mode=aC;break}for(;l<16;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}if(n.wrap&2&&c===35615){n.check=0,R[0]=c&255,R[1]=c>>>8&255,n.check=to(n.check,R,2,0),c=0,l=0,n.mode=Z3;break}if(n.flags=0,n.head&&(n.head.done=!1),!(n.wrap&1)||(((c&255)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=wn;break}if((c&15)!==X3){e.msg="unknown compression method",n.mode=wn;break}if(c>>>=4,l-=4,w=(c&15)+8,n.wbits===0)n.wbits=w;else if(w>n.wbits){e.msg="invalid window size",n.mode=wn;break}n.dmax=1<<w,e.adler=n.check=1,n.mode=c&512?a4:Lo,c=0,l=0;break;case Z3:for(;l<16;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}if(n.flags=c,(n.flags&255)!==X3){e.msg="unknown compression method",n.mode=wn;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=wn;break}n.head&&(n.head.text=c>>8&1),n.flags&512&&(R[0]=c&255,R[1]=c>>>8&255,n.check=to(n.check,R,2,0)),c=0,l=0,n.mode=Q3;case Q3:for(;l<32;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}n.head&&(n.head.time=c),n.flags&512&&(R[0]=c&255,R[1]=c>>>8&255,R[2]=c>>>16&255,R[3]=c>>>24&255,n.check=to(n.check,R,4,0)),c=0,l=0,n.mode=J3;case J3:for(;l<16;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}n.head&&(n.head.xflags=c&255,n.head.os=c>>8),n.flags&512&&(R[0]=c&255,R[1]=c>>>8&255,n.check=to(n.check,R,2,0)),c=0,l=0,n.mode=e4;case e4:if(n.flags&1024){for(;l<16;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}n.length=c,n.head&&(n.head.extra_len=c),n.flags&512&&(R[0]=c&255,R[1]=c>>>8&255,n.check=to(n.check,R,2,0)),c=0,l=0}else n.head&&(n.head.extra=null);n.mode=t4;case t4:if(n.flags&1024&&(d=n.length,d>s&&(d=s),d&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),ki.arraySet(n.head.extra,i,a,d,w)),n.flags&512&&(n.check=to(n.check,i,d,a)),s-=d,a+=d,n.length-=d),n.length))break e;n.length=0,n.mode=n4;case n4:if(n.flags&2048){if(s===0)break e;d=0;do w=i[a+d++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w));while(w&&d<s);if(n.flags&512&&(n.check=to(n.check,i,d,a)),s-=d,a+=d,w)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=r4;case r4:if(n.flags&4096){if(s===0)break e;d=0;do w=i[a+d++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w));while(w&&d<s);if(n.flags&512&&(n.check=to(n.check,i,d,a)),s-=d,a+=d,w)break e}else n.head&&(n.head.comment=null);n.mode=i4;case i4:if(n.flags&512){for(;l<16;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}if(c!==(n.check&65535)){e.msg="header crc mismatch",n.mode=wn;break}c=0,l=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Lo;break;case a4:for(;l<32;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}e.adler=n.check=T4(c),c=0,l=0,n.mode=$v;case $v:if(n.havedict===0)return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=l,Ove;e.adler=n.check=1,n.mode=Lo;case Lo:if(t===Ive||t===Hv)break e;case aC:if(n.last){c>>>=l&7,l-=l&7,n.mode=sC;break}for(;l<3;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}switch(n.last=c&1,c>>>=1,l-=1,c&3){case 0:n.mode=o4;break;case 1:if(Hve(n),n.mode=Uv,t===Hv){c>>>=2,l-=2;break e}break;case 2:n.mode=l4;break;case 3:e.msg="invalid block type",n.mode=wn}c>>>=2,l-=2;break;case o4:for(c>>>=l&7,l-=l&7;l<32;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}if((c&65535)!==(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=wn;break}if(n.length=c&65535,c=0,l=0,n.mode=oC,t===Hv)break e;case oC:n.mode=s4;case s4:if(d=n.length,d){if(d>s&&(d=s),d>u&&(d=u),d===0)break e;ki.arraySet(r,i,a,d,o),s-=d,a+=d,u-=d,o+=d,n.length-=d;break}n.mode=Lo;break;case l4:for(;l<14;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}if(n.nlen=(c&31)+257,c>>>=5,l-=5,n.ndist=(c&31)+1,c>>>=5,l-=5,n.ncode=(c&15)+4,c>>>=4,l-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=wn;break}n.have=0,n.mode=u4;case u4:for(;n.have<n.ncode;){for(;l<3;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}n.lens[L[n.have++]]=c&7,c>>>=3,l-=3}for(;n.have<19;)n.lens[L[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,M={bits:n.lenbits},D=ep(wve,n.lens,0,19,n.lencode,0,n.work,M),n.lenbits=M.bits,D){e.msg="invalid code lengths set",n.mode=wn;break}n.have=0,n.mode=c4;case c4:for(;n.have<n.nlen+n.ndist;){for(;g=n.lencode[c&(1<<n.lenbits)-1],v=g>>>24,E=g>>>16&255,y=g&65535,!(v<=l);){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}if(y<16)c>>>=v,l-=v,n.lens[n.have++]=y;else{if(y===16){for(k=v+2;l<k;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}if(c>>>=v,l-=v,n.have===0){e.msg="invalid bit length repeat",n.mode=wn;break}w=n.lens[n.have-1],d=3+(c&3),c>>>=2,l-=2}else if(y===17){for(k=v+3;l<k;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}c>>>=v,l-=v,w=0,d=3+(c&7),c>>>=3,l-=3}else{for(k=v+7;l<k;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}c>>>=v,l-=v,w=0,d=11+(c&127),c>>>=7,l-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=wn;break}for(;d--;)n.lens[n.have++]=w}}if(n.mode===wn)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=wn;break}if(n.lenbits=9,M={bits:n.lenbits},D=ep(j3,n.lens,0,n.nlen,n.lencode,0,n.work,M),n.lenbits=M.bits,D){e.msg="invalid literal/lengths set",n.mode=wn;break}if(n.distbits=6,n.distcode=n.distdyn,M={bits:n.distbits},D=ep(V3,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,M),n.distbits=M.bits,D){e.msg="invalid distances set",n.mode=wn;break}if(n.mode=Uv,t===Hv)break e;case Uv:n.mode=Gv;case Gv:if(s>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=l,Dve(e,h),o=e.next_out,r=e.output,u=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,c=n.hold,l=n.bits,n.mode===Lo&&(n.back=-1);break}for(n.back=0;g=n.lencode[c&(1<<n.lenbits)-1],v=g>>>24,E=g>>>16&255,y=g&65535,!(v<=l);){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}if(E&&(E&240)===0){for(T=v,b=E,S=y;g=n.lencode[S+((c&(1<<T+b)-1)>>T)],v=g>>>24,E=g>>>16&255,y=g&65535,!(T+v<=l);){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}c>>>=T,l-=T,n.back+=T}if(c>>>=v,l-=v,n.back+=v,n.length=y,E===0){n.mode=m4;break}if(E&32){n.back=-1,n.mode=Lo;break}if(E&64){e.msg="invalid literal/length code",n.mode=wn;break}n.extra=E&15,n.mode=h4;case h4:if(n.extra){for(k=n.extra;l<k;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=f4;case f4:for(;g=n.distcode[c&(1<<n.distbits)-1],v=g>>>24,E=g>>>16&255,y=g&65535,!(v<=l);){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}if((E&240)===0){for(T=v,b=E,S=y;g=n.distcode[S+((c&(1<<T+b)-1)>>T)],v=g>>>24,E=g>>>16&255,y=g&65535,!(T+v<=l);){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}c>>>=T,l-=T,n.back+=T}if(c>>>=v,l-=v,n.back+=v,E&64){e.msg="invalid distance code",n.mode=wn;break}n.offset=y,n.extra=E&15,n.mode=d4;case d4:if(n.extra){for(k=n.extra;l<k;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,l-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=wn;break}n.mode=p4;case p4:if(u===0)break e;if(d=h-u,n.offset>d){if(d=n.offset-d,d>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=wn;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),m=n.window}else m=r,p=o-n.offset,d=n.length;d>u&&(d=u),u-=d,n.length-=d;do r[o++]=m[p++];while(--d);n.length===0&&(n.mode=Gv);break;case m4:if(u===0)break e;r[o++]=n.length,u--,n.mode=Gv;break;case sC:if(n.wrap){for(;l<32;){if(s===0)break e;s--,c|=i[a++]<<l,l+=8}if(h-=u,e.total_out+=h,n.total+=h,h&&(e.adler=n.check=n.flags?to(n.check,r,h,o-h):iC(n.check,r,h,o-h)),h=u,(n.flags?c:T4(c))!==n.check){e.msg="incorrect data check",n.mode=wn;break}c=0,l=0}n.mode=g4;case g4:if(n.wrap&&n.flags){for(;l<32;){if(s===0)break e;s--,c+=i[a++]<<l,l+=8}if(c!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=wn;break}c=0,l=0}n.mode=v4;case v4:D=kve;break e;case wn:D=W3;break e;case y4:return q3;case Pve:default:return Xi}return e.next_out=o,e.avail_out=u,e.next_in=a,e.avail_in=s,n.hold=c,n.bits=l,(n.wsize||h!==e.avail_out&&n.mode<wn&&(n.mode<sC||t!==Y3))&&C4(e,e.output,e.next_out,h-e.avail_out),f-=e.avail_in,h-=e.avail_out,e.total_in+=f,e.total_out+=h,n.total+=h,n.wrap&&h&&(e.adler=n.check=n.flags?to(n.check,r,h,e.next_out-h):iC(n.check,r,h,e.next_out-h)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Lo?128:0)+(n.mode===Uv||n.mode===oC?256:0),(f===0&&h===0||t===Y3)&&D===zl&&(D=xve),D}function Uve(e){if(!e||!e.state)return Xi;var t=e.state;return t.window&&(t.window=null),e.state=null,zl}function Gve(e,t){var n;return!e||!e.state||(n=e.state,(n.wrap&2)===0)?Xi:(n.head=t,t.done=!1,zl)}function zve(e,t){var n=t.length,i,r,a;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==$v)?Xi:i.mode===$v&&(r=1,r=iC(r,t,n,0),r!==i.check)?W3:(a=C4(e,t,n,n),a?(i.mode=y4,q3):(i.havedict=1,zl))}va.inflateReset=b4,va.inflateReset2=_4,va.inflateResetKeep=E4,va.inflateInit=Fve,va.inflateInit2=S4,va.inflate=$ve,va.inflateEnd=Uve,va.inflateGetHeader=Gve,va.inflateSetDictionary=zve,va.inflateInfo="pako inflate (from Nodeca project)";var D4={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};function jve(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Vve=jve,Wc=va,tp=No,zv=Ul,zn=D4,cC=qA,Yve=M3,Wve=Vve,w4=Object.prototype.toString;function jl(e){if(!(this instanceof jl))return new jl(e);this.options=tp.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Yve,this.strm.avail_out=0;var n=Wc.inflateInit2(this.strm,t.windowBits);if(n!==zn.Z_OK)throw new Error(cC[n]);if(this.header=new Wve,Wc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=zv.string2buf(t.dictionary):w4.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Wc.inflateSetDictionary(this.strm,t.dictionary),n!==zn.Z_OK)))throw new Error(cC[n])}jl.prototype.push=function(e,t){var n=this.strm,i=this.options.chunkSize,r=this.options.dictionary,a,o,s,u,c,l=!1;if(this.ended)return!1;o=t===~~t?t:t===!0?zn.Z_FINISH:zn.Z_NO_FLUSH,typeof e=="string"?n.input=zv.binstring2buf(e):w4.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;do{if(n.avail_out===0&&(n.output=new tp.Buf8(i),n.next_out=0,n.avail_out=i),a=Wc.inflate(n,zn.Z_NO_FLUSH),a===zn.Z_NEED_DICT&&r&&(a=Wc.inflateSetDictionary(this.strm,r)),a===zn.Z_BUF_ERROR&&l===!0&&(a=zn.Z_OK,l=!1),a!==zn.Z_STREAM_END&&a!==zn.Z_OK)return this.onEnd(a),this.ended=!0,!1;n.next_out&&(n.avail_out===0||a===zn.Z_STREAM_END||n.avail_in===0&&(o===zn.Z_FINISH||o===zn.Z_SYNC_FLUSH))&&(this.options.to==="string"?(s=zv.utf8border(n.output,n.next_out),u=n.next_out-s,c=zv.buf2string(n.output,s),n.next_out=u,n.avail_out=i-u,u&&tp.arraySet(n.output,n.output,s,u,0),this.onData(c)):this.onData(tp.shrinkBuf(n.output,n.next_out))),n.avail_in===0&&n.avail_out===0&&(l=!0)}while((n.avail_in>0||n.avail_out===0)&&a!==zn.Z_STREAM_END);return a===zn.Z_STREAM_END&&(o=zn.Z_FINISH),o===zn.Z_FINISH?(a=Wc.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===zn.Z_OK):(o===zn.Z_SYNC_FLUSH&&(this.onEnd(zn.Z_OK),n.avail_out=0),!0)},jl.prototype.onData=function(e){this.chunks.push(e)},jl.prototype.onEnd=function(e){e===zn.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=tp.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function hC(e,t){var n=new jl(t);if(n.push(e,!0),n.err)throw n.msg||cC[n.err];return n.result}function qve(e,t){return t=t||{},t.raw=!0,hC(e,t)}Jd.Inflate=jl,Jd.inflate=hC,Jd.inflateRaw=qve,Jd.ungzip=hC;var Xve=No.assign,Kve=$d,Zve=Jd,Qve=D4,I4={};Xve(I4,Kve,Zve,Qve);var Jve=I4,eye=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];const tye=eye;function nye(e){if(typeof e!="string")throw new TypeError("input must be a string");let t=[],n,i,r={LOCUS_TAG:"LOCUS",DEFINITION_TAG:"DEFINITION",ACCESSION_TAG:"ACCESSION",VERSION_TAG:"VERSION",KEYWORDS_TAG:"KEYWORDS",SOURCE_TAG:"SOURCE",ORGANISM_TAG:"ORGANISM",REFERENCE_TAG:"REFERENCE",AUTHORS_TAG:"AUTHORS",CONSORTIUM_TAG:"CONSRTM",TITLE_TAG:"TITLE",JOURNAL_TAG:"JOURNAL",PUBMED_TAG:"PUBMED",REMARK_TAG:"REMARK",FEATURES_TAG:"FEATURES",BASE_COUNT_TAG:"BASE COUNT",ORIGIN_TAG:"ORIGIN",END_SEQUENCE_TAG:"//"},a=e.split(/\r?\n/),o,s,u,c,l,f=!1;for(let P of a){if(P===null)break;let B=D(P),X=M(P),ee=L(P),se=k(P);if(B===r.END_SEQUENCE_TAG||se?(o=B,s=null):ee&&(s=B),!(P.trim()===""||B===";")){if(!f&&o!==r.LOCUS_TAG)break;switch(o){case r.LOCUS_TAG:f=!0,g(P);break;case r.FEATURES_TAG:y(P,B,X);break;case r.ORIGIN_TAG:m(P,B);break;case r.DEFINITION_TAG:case r.ACCESSION_TAG:case r.VERSION_TAG:case r.KEYWORDS_TAG:R(o,P,o.toLowerCase());break;case r.SOURCE_TAG:s===r.ORGANISM_TAG?R(s,P,"organism"):R(B,P,"source");break;case r.REFERENCE_TAG:if(B===r.REFERENCE_TAG){const fe=n.references||[];n.references=fe,fe.push({})}E(P,s);break;case r.END_SEQUENCE_TAG:h();break}}}return t[t.length-1]!==n&&h(),t;function h(){p(),t.push(n)}function d(){return n.features[n.features.length-1]}function p(){if(n&&n.features)for(let P=0;P<n.features.length;P++)n.features[P]=$(n.features[P])}function m(P,B){if(B!==r.ORIGIN_TAG){let X=P.replace(/[\s]*[0-9]*/g,"");n.sequence+=X}}function g(P){n={features:[],name:"Untitled sequence",sequence:"",references:[]},P=v(r.LOCUS_TAG,P);const B=P.match(/^([^\s]+)\s+(\d+)\s+bp\s+([^\s]+)\s+([^\s]+)\s+([^\s]+)\s*([^\s]+)?$/);let X=B[1],ee=+B[2],se=B[3],fe=B[4]==="circular";const Z=n;let he="";B[6]?(Z.genbankDivision=B[5],he=B[6]):he=B[5],Z.circular=fe,Z.moleculeType=se;const j=he.match(/^(\d{2})-(.{3})-(\d{4})$/),H=new Date;H.setFullYear(+j[3]),H.setUTCMonth(tye.indexOf(j[2].toUpperCase())),H.setDate(+j[1]),H.setUTCHours(12),H.setMinutes(0),H.setSeconds(0),H.setMilliseconds(0),Z.date=H.toISOString(),Z.name=X,Z.size=ee}function v(P,B){return B=B.replace(/^\s*/,""),B.indexOf(P)===0&&(B=B.replace(P,"")),B.trim()}function E(P,B){const X=n.references;let ee=X[X.length-1];B?R(B,P,B.toLowerCase(),ee):R(r.REFERENCE_TAG,P,"description",ee)}function y(P,B,X){let ee;if(B===r.FEATURES_TAG){c=!0;return}if(c&&(u=k4(P),c=!1),rye(P,u))l?(S(P.trim()),l=!0):(i&&(i[i.length-1]+=P.trim().replace(/"/g,"")),l=!1);else if(b(P))d()&&(w(P),l=!1);else{X.match(/complement/g)?ee=-1:ee=1,T();let se=d();se.type=B,se.strand=ee,S(X),l=!0}}function T(){n.features.push({notes:{}})}function b(P){let B=!1;return(P.trim().charAt(0).match(/\//)||P.match(/^[\s]*\/[\w]+=[\S]+/))&&(B=!0),B}function S(P){P=P.trim();let B=[];P.replace(/(\d+)/g,function(ee,se){B.push(se)});let X=d();X.start=+B[0],X.end=B[1]===void 0?+B[0]:+B[1]}function w(P){let B,X;B=P.trim(),B=B.replace(/^\/|"$/g,""),X=B.split(/="|=/);let ee=X[1];ee&&(ee=ee.replace(/\\/g," "),P.match(/="/g)?ee=ee.replace(/".*/g,""):ee.match(/^\d+$/g)&&(ee=+ee));let se=X[0],fe=d().notes;fe[se]?fe[se].push(ee):fe[se]=[ee],i=fe[se]}function D(P){let B;return P=P.trim(),B=P.split(/[\s]+/),B[0]}function R(P,B,X,ee){ee=ee||n;let se=v(P,B);ee[X]=ee[X]?`${ee[X]} `:"",ee[X]+=se}function M(P){let B;return P.indexOf("=")<0?(P=P.replace(/^[\s]*[\S]+[\s]+|[\s]+$/,""),P=P.trim(),P):(B=P.split(/=/),B[1])}function k(P){let B=!1;return P.substr(0,10).match(/^[\S]+/)&&(B=!0),B}function L(P){let B=!1;return P.substr(0,10).match(/^[\s]+[\S]+/)&&(B=!0),B}function $(P){return P.notes.label?P.name=P.notes.label[0]:P.notes.gene?P.name=P.notes.gene[0]:P.notes.ApEinfo_label?P.name=P.notes.ApEinfo_label[0]:P.notes.name?P.name=P.notes.name[0]:P.notes.organism?P.name=P.notes.organism[0]:P.notes.locus_tag?P.name=P.notes.locus_tag[0]:P.notes.note?P.name=P.notes.note[0]:P.name="Untitled Feature",P.name=typeof P.name=="string"?P.name:String(P.name),P}}function rye(e,t){let n=k4(e);return!(t===n||e.trim().charAt(0).match(/\//))}function k4(e){let t=/^\s*/.exec(e);return t!==null?t[0].length:0}var iye=nye;function O4(e,t){const n=[];if(!e.length)return[];let r=e[0].start,a=e[0].end;for(let o=1;o<e.length;o++)e[o].start<a+5*1/t?a=Math.max(a,e[o].end):(n.push({type:"filler",start:r,end:a}),r=e[o].start,a=e[o].end);return n.push({start:r,end:a,type:"filler"}),n}function aye(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[n],e[n]=i}return e}function oye(e){const t=e.end-e.start,n=e.strand===1?"+":"-",i=Pt.nice();return e.type==="filler"?{xStart:e.start,xEnd:e.end,strand:e.strand,fields:[],type:"filler",uid:i}:{xStart:e.start,xEnd:e.end,strand:n,chrOffset:0,importance:e.end-e.start,uid:i,type:e.type,fields:["chrom",e.start,e.end,e.name,t,n,"","",e.type,e.name,e.start.toString(),e.end.toString(),e.start.toString(),e.end.toString()]}}const x4=e=>{const t=iye(e),n=aye(t[0].features.filter(i=>i.type!=="source").sort((i,r)=>i.start-r.start));return[t,n]};let P4=function(){function e(t){if(_classCallCheck3(this,e),this.dataConfig=t,this.trackUid=Pt.nice(),t.url){const i=t.url.slice(t.url.length-3)===".gz";this.errorTxt="",this.dataPromise=fetch(t.url,{mode:"cors",redirect:"follow",method:"GET"}).then(r=>i?r.arrayBuffer():r.text()).then(r=>{const a=i?Jve.inflate(r,{to:"string"}):r;[this.gbJson,this.cdss]=x4(a)})}else t.text&&(this.dataPromise=new Promise((n,i)=>{[this.gbJson,this.cdss]=x4(t.text),n()}))}return _createClass3(e,[{key:"tilesetInfo",value:function(n){return this.tilesetInfoLoading=!0,this.dataPromise.then(()=>{this.tilesetInfoLoading=!1;const i=1024;let r={};return r={tile_size:i,max_zoom:Math.ceil(Math.log(this.gbJson[0].size/i)/Math.log(2)),max_width:this.gbJson[0].size,min_pos:[0],max_pos:[this.gbJson[0].size]},n&&n(r),r}).catch(i=>{this.tilesetInfoLoading=!1,n&&n({error:`Error parsing genbank: ${i}`})})}},{key:"fetchTilesDebounced",value:function(n,i){const r={},a=[],o=[];for(const s of i){const u=s.split("."),c=parseInt(u[0],10),l=parseInt(u[1],10);if(Number.isNaN(l)||Number.isNaN(c)){console.warn("Invalid tile zoom or position:",c,l);continue}a.push(s),o.push(this.tile(c,l))}return Promise.all(o).then(s=>{for(let u=0;u<s.length;u++){const c=a[u];r[c]=s[u],r[c].tilePositionId=c}n(r)}),r}},{key:"tile",value:function(n,i){return this.tilesetInfo().then(r=>{const a=+r.max_width/2**+n,o=r.min_pos[0]+i*a,s=r.min_pos[0]+(i+1)*a,u=this.cdss.filter(p=>p.end>o&&p.start<s),c=1024/2**(r.max_zoom-n),l=O4(u.filter(p=>p.strand===1),c),f=O4(u.filter(p=>p.strand!==1),c);l.forEach(p=>{p.strand="+"}),f.forEach(p=>{p.strand="-"});let h=[];const d=20;for(let p=0;p<this.cdss.length&&!(h.length>=d);p++)this.cdss[p].end>=o&&this.cdss[p].start<=s&&h.push(this.cdss[p]);return h=[...h,...l,...f],h.map(p=>oye(p))})}}]),e}(),R4=function(){function e(t){_classCallCheck3(this,e),this.dataConfig=t,this.tilesetInfoData=Object.values(this.dataConfig.tilesetInfo)[0]}return _createClass3(e,[{key:"tilesetInfo",value:function(n){this.tilesetInfoLoading=!1,n(this.tilesetInfoData)}},{key:"fetchTilesDebounced",value:function(n,i){this.tilesData={};for(const o of Object.keys(this.dataConfig.tiles)){const u=`localtile.${o.split(".").slice(1).join(".")}`;this.tilesData[u]=this.dataConfig.tiles[o]}const r={},a=i.map(o=>`localtile.${o}`);Db(this.tilesData,"",a);for(const o of i)r[o]=this.tilesData[`localtile.${o}`];n(r)}},{key:"tile",value:function(n,i){}}]),e}(),sye=function(){function e(){_classCallCheck3(this,e),this.taskList=[],this.taskHandle=null,this.requestIdleCallbackTimeout=300}return _createClass3(e,[{key:"enqueueTask",value:function(n,i,r=null){r===null?this.taskList.push({handler:n,data:i}):(this.taskList=this.taskList.filter(a=>a.trackId!==r),this.taskList.push({handler:n,data:i,trackId:r})),this.taskHandle||(this.taskHandle=requestIdleCallback(this.runTaskQueue.bind(this),{timeout:this.requestIdleCallbackTimeout}))}},{key:"runTaskQueue",value:function(n){for(;(n.timeRemaining()>0||n.didTimeout)&&this.taskList.length;){const i=this.taskList.shift();i.data===null?i.handler():i.handler(i.data)}this.taskList.length?this.taskHandle=requestIdleCallback(this.runTaskQueue.bind(this),{timeout:this.requestIdleCallbackTimeout}):this.taskHandle=0}}]),e}();const lye=new sye;function uye(e,t,n,i,r){const a=e||r,o=0;return a==="log"&&t>0?["log",Xo().range([254,0]).domain([t+o,i+o])]:["linear",Et().range([254,0]).domain([t,i])]}let bs=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{pubSub:o,dataConfig:s,handleTilesetInfoReceived:u,animate:c,onValueScaleChanged:l}=i;return a.renderVersion=1,a.visibleTiles=new Set,a.visibleTileIds=new Set,a.renderingTiles=new Set,a.fetching=new Set,a.scale={},a.fetchedTiles={},a.tileGraphics={},a.maxZoom=0,a.medianVisibleValue=null,a.backgroundTaskScheduler=lye,a.continuousScaling="requestIdleCallback"in window,a.valueScaleMin=null,a.fixedValueScaleMin=null,a.valueScaleMax=null,a.fixedValueScaleMax=null,a.listeners={},a.pubSub=o,a.animate=c,a.onValueScaleChanged=l,a.prevValueScale=null,i.dataFetcher?a.dataFetcher=i.dataFetcher:a.dataFetcher=new Iv(s,a.pubSub),a.tilesetInfo=null,a.uuid=Pt.nice(),a.trackNotFoundText=new Be.PIXI.Text("",{fontSize:"12px",fontFamily:"Arial",fill:"black"}),a.pLabel.addChild(a.trackNotFoundText),a.refreshTilesDebounced=BR(a.refreshTiles.bind(_assertThisInitialized3(a)),Ng,Ng),a.dataFetcher.tilesetInfo((f,h)=>{if(!!f){if(a.tilesetInfo=f,a.dataFetcher.dataConfig.tilesetUid||(a.dataFetcher.dataConfig.tilesetUid=h),a.tilesetUid=a.dataFetcher.dataConfig.tilesetUid,a.server=a.dataFetcher.dataConfig.server||"unknown",a.tilesetInfo&&a.tilesetInfo.chromsizes&&(a.chromInfo=jg(a.tilesetInfo.chromsizes)),"error"in a.tilesetInfo){console.warn("Error retrieving tilesetInfo:",s,a.tilesetInfo.error),a.tilesetInfo=null,a.setError(a.tilesetInfo.error);return}a.tilesetInfo.resolutions?a.maxZoom=a.tilesetInfo.resolutions.length:a.maxZoom=+a.tilesetInfo.max_zoom,a.options&&a.options.maxZoom&&(a.options.maxZoom>=0?a.maxZoom=Math.min(a.options.maxZoom,a.maxZoom):console.error("Invalid maxZoom on track:",_assertThisInitialized3(a))),a.refreshTiles(),u&&u(f),a.options||(a.options={}),a.options.name=a.options.name||f.name,a.checkValueScaleLimits(),a.draw(),a.drawLabel(),a.animate()}}),a}return _createClass3(n,[{key:"setError",value:function(r){this.errorTextText=r,this.draw(),this.animate()}},{key:"setFixedValueScaleMin",value:function(r){Number.isNaN(+r)?this.fixedValueScaleMin=null:this.fixedValueScaleMin=+r}},{key:"setFixedValueScaleMax",value:function(r){Number.isNaN(+r)?this.fixedValueScaleMax=null:this.fixedValueScaleMax=+r}},{key:"checkValueScaleLimits",value:function(){this.valueScaleMin=typeof this.options.valueScaleMin<"u"?+this.options.valueScaleMin:null,this.fixedValueScaleMin!==null&&(this.valueScaleMin=this.fixedValueScaleMin),this.valueScaleMax=typeof this.options.valueScaleMax<"u"?+this.options.valueScaleMax:null,this.fixedValueScaleMax!==null&&(this.valueScaleMax=this.fixedValueScaleMax)}},{key:"on",value:function(r,a){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(a)}},{key:"off",value:function(r,a){const o=this.listeners[r].indexOf(a);o===-1||o>=this.listeners[r].length||this.listeners[r].splice(o,1)}},{key:"rerender",value:function(r){_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r),this.renderVersion+=1,this.tilesetInfo&&(this.checkValueScaleLimits(),this.tilesetInfo.resolutions?this.maxZoom=this.tilesetInfo.resolutions.length:this.maxZoom=+this.tilesetInfo.max_zoom,this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?this.maxZoom=Math.min(this.options.maxZoom,this.maxZoom):console.error("Invalid maxZoom on track:",this)))}},{key:"visibleAndFetchedIds",value:function(){return Object.keys(this.fetchedTiles).filter(r=>this.visibleTileIds.has(r))}},{key:"visibleAndFetchedTiles",value:function(){return this.visibleAndFetchedIds().map(r=>this.fetchedTiles[r])}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(a=>({tileId:this.tileToLocalId(a),remoteId:this.tileToRemoteId(a),mirrored:a.mirrored})),this.visibleTileIds=new Set(this.visibleTiles.map(a=>a.tileId))}},{key:"removeOldTiles",value:function(){this.calculateVisibleTiles();const a=[...new Set(Object.keys(this.fetchedTiles))].filter(o=>!this.visibleTileIds.has(o));console.log(`Cached pixi objects | ${performance.now()} | ${Object.keys(Be.PIXI.utils.BaseTextureCache).length}`),this.removeTiles(a)}},{key:"refreshTiles",value:function(){if(!this.tilesetInfo)return;this.calculateVisibleTiles();const r=new Set(Object.keys(this.fetchedTiles)),a=[...this.visibleTiles].filter(o=>!this.fetching.has(o.remoteId)&&!r.has(o.tileId));for(let o=0;o<a.length;o++)this.fetching.add(a[o].remoteId);this.removeOldTiles(),this.fetchNewTiles(a)}},{key:"parentInFetched",value:function(r){const a=r.tileData.tilesetUid;let o=r.tileData.zoomLevel,s=r.tileData.tilePos;for(;o>0;)if(o-=1,s=s.map(c=>Math.floor(c/2)),`${a}.${o}.${s.join(".")}`in this.fetchedTiles)return!0;return!1}},{key:"parentTileId",value:function(r){const a=r.tileData.zoomLevel-1,o=r.tileData.tilePos.map(u=>Math.floor(u/2));return`${r.tileData.tilesetUid}.${a}.${o.join(".")}`}},{key:"removeTiles",value:function(r){!r.length||!this.areAllVisibleTilesLoaded()||this.renderingTiles.size||(r.forEach(a=>{const o=a;this.destroyTile(this.fetchedTiles[o]),o in this.tileGraphics&&(this.pMain.removeChild(this.tileGraphics[o]),delete this.tileGraphics[o]),delete this.fetchedTiles[o]}),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"zoomed",value:function(r,a,o=1,s=0,u=0){this.xScale(r),this.yScale(a),this.refreshTilesDebounced(),this.pMobile.position.x=s,this.pMobile.position.y=this.position[1],this.pMobile.scale.x=o,this.pMobile.scale.y=1}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r)}},{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r)}},{key:"areAllVisibleTilesLoaded",value:function(){const r=new Set(Object.keys(this.fetchedTiles)),a=[...this.visibleTileIds];for(let o=0;o<a.length;o++)if(!r.has(a[o]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(r){return r?(this.scale.minValue=r,this):this.valueScaleMin!==null?this.valueScaleMin:this.scale.minValue}},{key:"maxValue",value:function(r){return r?(this.scale.maxValue=r,this):this.valueScaleMax!==null?this.valueScaleMax:this.scale.maxValue}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"initTile",value:function(){this.scale.minRawValue=this.continuousScaling?this.minVisibleValue():this.minVisibleValueInTiles(),this.scale.maxRawValue=this.continuousScaling?this.maxVisibleValue():this.maxVisibleValueInTiles(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue}},{key:"updateTile",value:function(){}},{key:"destroyTile",value:function(){}},{key:"addMissingGraphics",value:function(){const r=Object.keys(this.fetchedTiles);this.renderVersion+=1;for(let a=0;a<r.length;a++)if(!(r[a]in this.tileGraphics)){const o=new Be.PIXI.Graphics;this.pMain.addChild(o),this.fetchedTiles[r[a]].graphics=o,this.initTile(this.fetchedTiles[r[a]]),this.tileGraphics[r[a]]=o}}},{key:"updateExistingGraphics",value:function(){const r=Object.keys(this.fetchedTiles);for(let a=0;a<r.length;a++){const o=this.fetchedTiles[r[a]];this.updateTile(o)}}},{key:"synchronizeTilesAndGraphics",value:function(){try{if(this.addMissingGraphics(),this.removeOldTiles(),this.updateExistingGraphics(),this.listeners.dataChanged)for(const r of this.listeners.dataChanged)r(this.visibleAndFetchedTiles().map(a=>a.tileData))}catch(r){console.log(`Error: TiledPixiTrack > synchronizeTilesAndGraphics: ${r.message}`)}}},{key:"loadTileData",value:function(r,a){let o=this.lruCache.get(r.tileId);return o||(o=a(r.data,r.type),this.lruCache.put(r.tileId,o)),o}},{key:"fetchNewTiles",value:function(r){if(r.length>0){const a=[...new Set(r.map(o=>o.remoteId))];this.dataFetcher.fetchTilesDebounced(this.receivedTiles.bind(this),a)}}},{key:"receivedTiles",value:function(r){for(let a=0;a<this.visibleTiles.length;a++){const{tileId:o}=this.visibleTiles[a];if(!!r[this.visibleTiles[a].remoteId]&&this.visibleTiles[a].remoteId in r){if(o in this.fetchedTiles||(this.fetchedTiles[o]=this.visibleTiles[a]),Array.isArray(r[this.visibleTiles[a].remoteId])){const s=r[this.visibleTiles[a].remoteId];this.fetchedTiles[o].tileData=[...s],Object.keys(s).filter(u=>Number.isNaN(+u)).forEach(u=>{this.fetchedTiles[o].tileData[u]=s[u]})}else this.fetchedTiles[o].tileData={...r[this.visibleTiles[a].remoteId]};this.fetchedTiles[o].tileData.error&&console.warn("Error in loaded tile",o,this.fetchedTiles[o].tileData)}}for(const a in r)if(r[a]){const o=r[a].tilePositionId;this.fetching.has(o)&&this.fetching.delete(o)}this.synchronizeTilesAndGraphics(),this.draw(),this.drawLabel(),this.valueScale&&(!this.prevValueScale||JSON.stringify(this.valueScale.domain())!==JSON.stringify(this.prevValueScale.domain()))&&(this.prevValueScale=this.valueScale.copy(),this.onValueScaleChanged&&this.onValueScaleChanged()),this.animate(),this.areAllVisibleTilesLoaded()&&this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesLoaded",{uuid:this.uuid})}},{key:"draw",value:function(){if(this.delayDrawing)return;this.tilesetInfo?this.trackNotFoundText.visible=!1:(this.dataFetcher.tilesetInfoLoading?this.trackNotFoundText.text="Loading...":this.trackNotFoundText.text=`Tileset info not found. Server: [${this.server}] tilesetUid: [${this.tilesetUid}]`,[this.trackNotFoundText.x,this.trackNotFoundText.y]=this.position,this.flipText&&(this.trackNotFoundText.anchor.x=1,this.trackNotFoundText.scale.x=-1),this.trackNotFoundText.visible=!0),this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesDrawnStart",{uuid:this.uuid});const r=Object.values(this.fetchedTiles).map(a=>a.tileData&&a.tileData.error&&`${a.tileId}: ${a.tileData.error}`).filter(a=>a);r.length?this.errorTextText=r.join(`
`):this.errorTextText="",_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this),Object.keys(this.fetchedTiles).forEach(a=>{this.drawTile(this.fetchedTiles[a])}),this.pubSub&&this.pubSub.publish("TiledPixiTrack.tilesDrawnEnd",{uuid:this.uuid})}},{key:"drawTile",value:function(){}},{key:"calculateMedianVisibleValue",value:function(){this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();let r=this.visibleAndFetchedIds();r.length===0&&(r=Object.keys(this.fetchedTiles));const a=[].concat(...r.filter(o=>this.fetchedTiles[o].tileData.dense).map(o=>Array.from(this.fetchedTiles[o].tileData.dense))).filter(o=>o>0);return this.medianVisibleValue=hE(a),this.medianVisibleValue}},{key:"allVisibleValues",value:function(){return[].concat(...this.visibleAndFetchedIds().map(r=>Array.from(this.fetchedTiles[r].tileData.dense)))}},{key:"minVisibleValue",value:function(r=!1){return this.minVisibleValueInTiles(r)}},{key:"minVisibleValueInTiles",value:function(r=!1){let a=this.visibleAndFetchedIds();a.length===0&&(a=Object.keys(this.fetchedTiles));let o=Math.min(...a.map(s=>this.fetchedTiles[s].tileData.minNonZero));return o===Number.MAX_SAFE_INTEGER&&(o=null),r?o:this.valueScaleMin!==null?this.valueScaleMin:o}},{key:"maxVisibleValue",value:function(r=!1){return this.maxVisibleValueInTiles(r)}},{key:"maxVisibleValueInTiles",value:function(r=!1){let a=this.visibleAndFetchedIds();a.length===0&&(a=Object.keys(this.fetchedTiles));let o=Math.max(...a.map(s=>this.fetchedTiles[s].tileData.maxNonZero));return o===Number.MIN_SAFE_INTEGER&&(o=null),r?o:this.valueScaleMax!==null?this.valueScaleMax:o}},{key:"makeValueScale",value:function(r,a,o,s){let u=null,c=0,l=s;(l===null||typeof l>"u")&&(l=6);let f=Math.min(this.dimensions[1]-l,l),h=Math.max(this.dimensions[1]-l,l);if(this.dimensions[1]-l<l&&(f=this.dimensions[1]/2,h=this.dimensions[1]/2),this.options.valueScaling==="log")c=a,c||(c=r),u=Xo().domain([c,o+c]).range([f,h]);else if(this.options.valueScaling==="quantile"){const d=this.dimensions[1]-l,p=l,m=xm().domain(this.allVisibleValues()).range(Ur(d,p,(p-d)/256));return m.ticks=g=>Ws(d,p,g),[m,0]}else if(this.options.valueScaling==="setquantile"){const d=this.dimensions[1]-l,p=l,m=new Set(this.allVisibleValues()),g=xm().domain([...m]).range(Ur(d,p,(p-d)/256));return g.ticks=v=>Ws(d,p,v),[g,0]}else this.options.valueScaling==="linear"&&(u=Et().domain([r,o]).range([h,f]));return[u,c]}}]),n}(Qr);const N4=200,_s=10,np=40,Lr=10,Ss=Lr,M4=4,qc=1,As=4,L4=5,cye=256,rp=_s+np+Lr+qc+Ss+As;let ip=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n);const o={...i};o.onValueScaleChanged=()=>{i.onValueScaleChanged(),a.drawColorbar()},a=t.call(this,o,r);const{pubSub:s,animate:u,svgElement:c,onTrackOptionsChanged:l,onMouseMoveZoom:f,isShowGlobalMousePosition:h,isValueScaleLocked:d}=i;return a.pubSub=s,a.is2d=!0,a.animate=u,a.uid=Pt.nice(),a.scaleBrush=yf(),a.onTrackOptionsChanged=l,a.isShowGlobalMousePosition=h,a.isValueScaleLocked=d,a.pColorbarArea=new Be.PIXI.Graphics,a.pMasked.addChild(a.pColorbarArea),a.pColorbar=new Be.PIXI.Graphics,a.pColorbarArea.addChild(a.pColorbar),a.axis=new _v(_assertThisInitialized3(a)),a.pColorbarArea.addChild(a.axis.pAxis),a.colorScale=$u,r&&r.colorRange&&(a.colorScale=Ao(r.colorRange)),a.gBase=xt(c).append("g"),a.gMain=a.gBase.append("g"),a.gColorscaleBrush=a.gMain.append("g"),a.brushing=!1,a.prevOptions="",a.prevIndUpperLeftTile="",a.onMouseMoveZoom=f,a.setDataLensSize(11),a.dataLens=new Float32Array(a.dataLensSize**2),a.mouseMoveHandlerBound=a.mouseMoveHandler.bind(_assertThisInitialized3(a)),a.onMouseMoveZoom&&a.pubSubs.push(a.pubSub.subscribe("app.mouseMove",a.mouseMoveHandlerBound)),a.options&&a.options.showMousePosition&&!a.hideMousePosition&&(a.hideMousePosition=pl(_assertThisInitialized3(a),a.is2d,a.isShowGlobalMousePosition())),a.prevOptions=JSON.stringify(r),a}return _createClass3(n,[{key:"mouseMoveHandler",value:function(r){!this.isWithin(r.x,r.y)||(this.mouseX=r.x,this.mouseY=r.y,this.mouseMoveZoomHandler())}},{key:"mouseMoveZoomHandler",value:function(r=this.mouseX,a=this.mouseY){if(typeof r>"u"||typeof a>"u"||!this.areAllVisibleTilesLoaded()||!this.tilesetInfo)return;const o=r-this.position[0],s=a-this.position[1];let u,c;try{c=this.getVisibleRectangleData(o-this.dataLensPadding,s-this.dataLensPadding,this.dataLensSize,this.dataLensSize),u=c.get(this.dataLensPadding,this.dataLensPadding)}catch{return}const l=this.dataLensSize;let f;try{f=Bb(this.limitedValueScale,this.colorScale,this.valueScale.domain()[0])}catch{return}if(!f)return;const h=Math.round(this._xScale.invert(o)),d=Math.round(this._yScale.invert(s));let p=[h,d],m=[Math.round(this._xScale.invert(o-this.dataLensPadding)),Math.round(this._xScale.invert(o+this.dataLensPadding))],g=[Math.round(this._yScale.invert(s-this.dataLensPadding)),Math.round(this._yScale.invert(s+this.dataLensPadding))];this.chromInfo&&(p=p.map(v=>Wn(v,this.chromInfo).slice(0,2)),m=m.map(v=>Wn(v,this.chromInfo).slice(0,2)),g=g.map(v=>Wn(v,this.chromInfo).slice(0,2))),this.onMouseMoveZoom({trackId:this.id,data:u,absX:r,absY:a,relX:o,relY:s,dataX:h,dataY:d,orientation:"2d",dataLens:c,dim:l,toRgb:f,center:p,xRange:m,yRange:g,isGenomicCoords:!!this.chromInfo})}},{key:"scheduleRerender",value:function(){this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this),null,this.uuid)}},{key:"handleRerender",value:function(){this.rerender(this.options,!0)}},{key:"getAbsTileDim",value:function(r,a,o){const{tileX:s,tileY:u,tileWidth:c,tileHeight:l}=this.getTilePosAndDimensions(r,a),f={};return f.width=this._refXScale(s+c)-this._refXScale(s),f.height=this._refYScale(u+l)-this._refYScale(u),o?(f.x=this._refXScale(u),f.y=this._refYScale(s)):(f.x=this._refXScale(s),f.y=this._refYScale(u)),f}},{key:"updateValueScale",value:function(){let r=this.minValue(),a=this.maxValue();const o=1e-6;r!=null&&a!==void 0&&a!==null&&Math.abs(r-a)<o&&(r=Math.max(o,r-.001),a+=.001);const[s,u]=uye(this.options&&this.options.heatmapValueScaling||"log",r,this.medianVisibleValue,a,"log");return this.valueScale=u,this.limitedValueScale=this.valueScale.copy(),this.options&&typeof this.options.scaleStartPercent<"u"&&typeof this.options.scaleEndPercent<"u"&&this.limitedValueScale.domain([this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleStartPercent,this.valueScale.domain()[0]+(this.valueScale.domain()[1]-this.valueScale.domain()[0])*this.options.scaleEndPercent]),[s,u]}},{key:"rerender",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r,a),this.updateValueScale();const o=JSON.stringify(r);this.drawColorbar(),!(!a&&o===this.prevOptions)&&(this.prevOptions=o,this.options=r,_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r,a),this.calculateVisibleTiles(),r&&r.colorRange&&(this.colorScale=Ao(r.colorRange)),this.visibleAndFetchedTiles().forEach(s=>this.renderTile(s)),this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0),this.options&&this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=pl(this,this.is2d,this.isShowGlobalMousePosition())))}},{key:"drawLabel",value:function(){this.options.labelPosition===this.options.colorbarPosition?this.labelXOffset=rp:this.labelXOffset=0,_get4(_getPrototypeOf4(n.prototype),"drawLabel",this).call(this)}},{key:"tileDataToCanvas",value:function(r){const a=document.createElement("canvas");a.width=this.binsPerTile(),a.height=this.binsPerTile();const o=a.getContext("2d");o.fillStyle="transparent",o.fillRect(0,0,a.width,a.height);const s=new ImageData(r,a.width,a.height);return o.putImageData(s,0,0),a}},{key:"exportData",value:function(){if(this.tilesetInfo){const r=this.getVisibleRectangleData(0,0,this.dimensions[0],this.dimensions[1]),a={bounds:[this._xScale.domain(),this._yScale.domain()],dimensions:r.shape,data:RR(r)};xf("data.json",JSON.stringify(a))}}},{key:"setSpriteProperties",value:function(r,a,o,s){const u=this.getAbsTileDim(a,o,s);r.width=u.width,r.height=u.height,r.x=u.x,r.y=u.y,s&&o[0]!==o[1]&&(r.rotation=-Math.PI/2,r.scale.x=Math.abs(r.scale.x)*-1)}},{key:"refXScale",value:function(r){_get4(_getPrototypeOf4(n.prototype),"refXScale",this).call(this,r),this.draw()}},{key:"refYScale",value:function(r){_get4(_getPrototypeOf4(n.prototype),"refYScale",this).call(this,r),this.draw()}},{key:"draw",value:function(){_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this)}},{key:"newBrushOptions",value:function(r){const a=JSON.parse(JSON.stringify(this.options)),o=this.valueScale.copy().range([this.colorbarHeight,0]),s=o.invert(r[0]),c=(o.invert(r[1])-o.domain()[0])/(o.domain()[1]-o.domain()[0]),l=(s-o.domain()[0])/(o.domain()[1]-o.domain()[0]);return a.scaleStartPercent=c.toFixed(L4),a.scaleEndPercent=l.toFixed(L4),a}},{key:"brushStart",value:function(){this.brushing=!0}},{key:"brushMoved",value:function(r){if(!r.selection)return;const a=this.newBrushOptions(r.selection),o=JSON.stringify(a);this.gColorscaleBrush.selectAll(".handle--custom").attr("y",s=>s.type==="n"?r.selection[0]:r.selection[1]-M4/2),o!==this.prevOptions&&(this.prevOptions=o,this.rerender(a,!0),this.onTrackOptionsChanged(a),this.isValueScaleLocked()&&this.onValueScaleChanged())}},{key:"brushEnd",value:function(){this.brushing=!1}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.drawColorbar()}},{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r),this.drawColorbar()}},{key:"removeColorbar",value:function(){this.pColorbarArea.visible=!1,this.scaleBrush.on(".brush")&&this.gColorscaleBrush.call(this.scaleBrush.move,null),this.gColorscaleBrush.on(".brush",null),this.gColorscaleBrush.selectAll("rect").remove()}},{key:"drawColorbar",value:function(){if(this.pColorbar.clear(),!this.options||!this.options.colorbarPosition||this.options.colorbarPosition==="hidden"){this.removeColorbar();return}if(this.pColorbarArea.visible=!0,!this.valueScale||Number.isNaN(+this.valueScale.domain()[0])||Number.isNaN(+this.valueScale.domain()[1]))return;const r=Math.min(this.dimensions[1]/2,N4);if(this.colorbarHeight=r-2*Lr,this.colorbarHeight<0){this.removeColorbar();return}if(this.valueScale.domain()[1]===this.valueScale.domain()[0]){this.removeColorbar();return}const a=this.valueScale.copy().range([this.colorbarHeight,0]);this.options.colorbarPosition==="topLeft"||this.options.colorbarPosition==="bottomLeft"?this.scaleBrush.extent([[As,0],[Ss,this.colorbarHeight]]):this.scaleBrush.extent([[0,0],[Ss-As,this.colorbarHeight]]),this.options.colorbarPosition==="topLeft"&&([this.pColorbarArea.x,this.pColorbarArea.y]=this.position,this.pColorbar.y=Lr,this.axis.pAxis.y=Lr,this.axis.pAxis.x=As+Ss+qc+_s,this.pColorbar.x=As+Ss+qc,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+As},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.options.colorbarPosition==="topRight"&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-rp,this.pColorbarArea.y=this.position[1],this.pColorbar.y=Lr,this.axis.pAxis.y=Lr,this.axis.pAxis.x=np+Lr,this.pColorbar.x=np+Lr,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+this.pColorbar.x+_s+2},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.options.colorbarPosition==="bottomRight"&&(this.pColorbarArea.x=this.position[0]+this.dimensions[0]-rp,this.pColorbarArea.y=this.position[1]+this.dimensions[1]-r,this.pColorbar.y=Lr,this.axis.pAxis.y=Lr,this.axis.pAxis.x=np+Lr,this.pColorbar.x=np+Lr,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+this.pColorbar.x+_s+qc},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.options.colorbarPosition==="bottomLeft"&&(this.pColorbarArea.x=this.position[0],this.pColorbarArea.y=this.position[1]+this.dimensions[1]-r,this.pColorbar.y=Lr,this.axis.pAxis.y=Lr,this.axis.pAxis.x=As+Ss+qc+_s,this.pColorbar.x=As+Ss+qc,this.gColorscaleBrush.attr("transform",`translate(${this.pColorbarArea.x+2},${this.pColorbarArea.y+this.pColorbar.y-1})`)),this.pColorbarArea.clear(),this.pColorbarArea.beginFill(at(this.options.colorbarBackgroundColor||"white"),+this.options.colorbarBackgroundOpacity>=0?+this.options.colorbarBackgroundOpacity:.6),this.pColorbarArea.drawRect(0,0,rp,r),this.options?(this.options.scaleStartPercent||(this.options.scaleStartPercent=0),this.options.scaleEndPercent||(this.options.scaleEndPercent=1)):this.options={scaleStartPercent:0,scaleEndPercent:1};const o=a.domain()[1]-a.domain()[0],s=a(this.options.scaleStartPercent*o+a.domain()[0]),u=a(this.options.scaleEndPercent*o+a.domain()[0]);this.brushing||(this.scaleBrush.on("start",this.brushStart.bind(this)).on("brush",this.brushMoved.bind(this)).on("end",this.brushEnd.bind(this)).handleSize(0),this.gColorscaleBrush.on(".brush",null),this.gColorscaleBrush.call(this.scaleBrush),this.northHandle=this.gColorscaleBrush.selectAll(".handle--custom").data([{type:"n"},{type:"s"}]).enter().append("rect").classed("handle--custom",!0).attr("cursor","ns-resize").attr("width",Ss).attr("height",M4).style("fill","#666").style("stroke","white"),this.flipText&&this.northHandle.attr("cursor","ew-resize"),this.gColorscaleBrush.call(this.scaleBrush.move,[u,s]));const c=Et().domain([0,255]).range([0,this.colorbarHeight]);for(let l=0;l<this.colorbarHeight;l++){const f=this.limitedValueScale(a.invert(l)),h=Math.max(0,Math.min(254,Math.floor(f)));this.pColorbar.beginFill(at(`rgb(${this.colorScale[h][0]},${this.colorScale[h][1]},${this.colorScale[h][2]})`)),this.pColorbar.drawRect(0,l,_s,1)}this.pAxis.position.x=_s,this.pAxis.position.y=c(0),this.options.colorbarPosition==="topLeft"||this.options.colorbarPosition==="bottomLeft"?this.axis.drawAxisRight(a,this.colorbarHeight):(this.options.colorbarPosition==="topRight"||this.options.colorbarPosition==="bottomRight")&&this.axis.drawAxisLeft(a,this.colorbarHeight)}},{key:"exportColorBarSVG",value:function(){const r=document.createElement("g");if(r.setAttribute("class","color-bar"),!this.options.colorbarPosition||this.options.colorbarPosition==="hidden"||!this.valueScale)return r;r.setAttribute("transform",`translate(${this.pColorbarArea.x}, ${this.pColorbarArea.y})`);const a=document.createElement("rect");r.appendChild(a);const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.pColorbar.x}, ${this.pColorbar.y})`);const s=Math.min(this.dimensions[1]/2,N4);this.colorbarHeight=s-2*Lr,a.setAttribute("x",0),a.setAttribute("y",0),a.setAttribute("width",rp),a.setAttribute("height",s),a.setAttribute("style","fill: white; stroke-width: 0; opacity: 0.7");const u=256,c=Et().domain([0,u-1]).range([0,this.colorbarHeight]),l=this.colorbarHeight/u;for(let p=0;p<u;p++){const m=document.createElement("rect");o.appendChild(m),m.setAttribute("x",0),m.setAttribute("y",c(p)),m.setAttribute("width",_s),m.setAttribute("height",l),m.setAttribute("class","color-rect");const g=Math.min(this.colorScale.length-1,Math.max(0,Math.floor(this.limitedValueScale(this.valueScale.invert(p))))),v=this.colorScale[g];v?m.setAttribute("style",`fill: rgb(${v[0]}, ${v[1]}, ${v[2]})`):m.setAttribute("style","fill: rgb(255,255,255,0)")}const f=document.createElement("g");r.appendChild(f),f.setAttribute("transform",`translate(${this.axis.pAxis.position.x},${this.axis.pAxis.position.y})`);let h=null;const d=this.valueScale.copy().range([this.colorbarHeight,0]);return this.options.colorbarPosition==="topLeft"||this.options.colorbarPosition==="bottomLeft"?h=this.axis.exportAxisRightSVG(d,this.colorbarHeight):(this.options.colorbarPosition==="topRight"||this.options.colorbarPosition==="bottomRight")&&(h=this.axis.exportAxisLeftSVG(d,this.colorbarHeight)),f.appendChild(h),r}},{key:"setDataLensSize",value:function(r){this.dataLensPadding=Math.max(0,Math.floor((r-1)/2)),this.dataLensSize=this.dataLensPadding*2+1}},{key:"binsPerTile",value:function(){return this.tilesetInfo.bins_per_dimension||cye}},{key:"getVisibleRectangleData",value:function(r,a,o,s){let u=this.calculateZoomLevel();u=this.tilesetInfo.max_zoom?Math.min(this.tilesetInfo.max_zoom,u):u;const l=Xe.calculateTileWidth(this.tilesetInfo,u,this.binsPerTile())/this.binsPerTile(),f=[this._xScale.invert(r),this._xScale.invert(r+o)],h=[this._yScale.invert(a),this._yScale.invert(a+s)],d=[Math.max(f[0],this.tilesetInfo.min_pos[0]),Math.min(f[1],this.tilesetInfo.max_pos[0])],p=[Math.max(h[0],this.tilesetInfo.min_pos[1]),Math.min(h[1],this.tilesetInfo.max_pos[1])],m=Math.floor(d[0]/l),g=Math.floor(p[0]/l),v=Math.max(0,Math.ceil((d[1]-d[0])/l)),E=Math.max(0,Math.ceil((p[1]-p[0])/l)),y=Gu(new Array(E*v).fill(NaN),[E,v]);return this.visibleAndFetchedTiles().forEach(T=>{const b=T.mirrored?[T.tileData.tilePos[1],T.tileData.tilePos[0]]:T.tileData.tilePos,{tileX:S,tileY:w,tileWidth:D,tileHeight:R}=this.getTilePosAndDimensions(T.tileData.zoomLevel,b,this.binsPerTile()),M=Math.floor(S/l),k=Math.floor((S+D)/l),L=Math.floor(w/l),$=Math.floor((w+R)/l);let P=Math.max(m,M)-M,B=Math.max(g,L)-L;const X=Math.min(m+v,k)-M,ee=Math.min(g+E,$)-L,se=Math.max(M-m,0),fe=Math.max(L-g,0),Z=X-P,he=ee-B;if(!(Z<0||he<0)){if(T.mirrored&&P>B){const j=P;P=B,B=j}OR(y.hi(fe+he,se+Z).lo(fe,se),T.dataArray.hi(B+he,P+Z).lo(B,P))}}),y}},{key:"initTile",value:function(r){_get4(_getPrototypeOf4(n.prototype),"initTile",this).call(this,r),r.tileData.dense.length===this.binsPerTile()**2&&(r.dataArray=Gu(Array.from(r.tileData.dense),[this.binsPerTile(),this.binsPerTile()]),this.continuousScaling&&r.tileData.tilePos[0]===r.tileData.tilePos[1]&&r.mirrored&&(r.tileData.denseDataExtrema.mirrorPrecomputedExtrema(),_get4(_getPrototypeOf4(n.prototype),"initTile",this).call(this,r))),!(this.scale.minValue===null||this.scale.maxValue===null)&&this.renderTile(r)}},{key:"updateTile",value:function(r){r.scale&&this.scale&&this.scale.minValue===r.scale.minValue&&this.scale.maxValue===r.scale.maxValue||(this.renderTile(r),this.drawColorbar())}},{key:"destroyTile",value:function(r){r.sprite.destroy(!0),r.canvas=null,r.sprite=null,r.texture=null}},{key:"pixDataFunction",value:function(r,a){if(a){const{graphics:o}=r,s=this.tileDataToCanvas(a.pixData);r.sprite&&r.sprite.destroy(!0);const u=Be.PIXI.VERSION[0]==="4"?Be.PIXI.Texture.fromCanvas(s,Be.PIXI.SCALE_MODES.NEAREST):Be.PIXI.Texture.from(s,{scaleMode:Be.PIXI.SCALE_MODES.NEAREST}),c=new Be.PIXI.Sprite(u);r.sprite=c,r.texture=u,r.canvas=s,this.setSpriteProperties(r.sprite,r.tileData.zoomLevel,r.tileData.tilePos,r.mirrored),o.removeChildren(),o.addChild(r.sprite)}this.renderingTiles.delete(r.tileId)}},{key:"renderTile",value:function(r){const[a]=this.updateValueScale(),o=0;if(this.renderingTiles.add(r.tileId),this.tilesetInfo.tile_size&&r.tileData.dense.length<this.tilesetInfo.tile_size){const s=new Float32Array(this.tilesetInfo.tile_size);s.fill(NaN),s.set(r.tileData.dense),r.tileData.dense=s}Xe.tileDataToPixData(r,a,this.limitedValueScale.domain(),o,this.colorScale,s=>this.pixDataFunction(r,s),this.mirrorTiles()&&!r.mirrored&&r.tileData.tilePos[0]===r.tileData.tilePos[1],this.options.extent==="upper-right"&&r.tileData.tilePos[0]===r.tileData.tilePos[1],this.options.zeroValueColor?sR(this.options.zeroValueColor):void 0,{selectedRows:this.options.selectRows,selectedRowsAggregationMode:this.options.selectRowsAggregationMode,selectedRowsAggregationWithRelativeHeight:this.options.selectRowsAggregationWithRelativeHeight,selectedRowsAggregationMethod:this.options.selectRowsAggregationMethod})}},{key:"remove",value:function(){this.gMain.remove(),this.gMain=null,_get4(_getPrototypeOf4(n.prototype),"remove",this).call(this)}},{key:"refScalesChanged",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"refScalesChanged",this).call(this,r,a),Gg(this.fetchedTiles).filter(o=>o.sprite).forEach(o=>this.setSpriteProperties(o.sprite,o.tileData.zoomLevel,o.tileData.tilePos,o.mirrored))}},{key:"superSVG",value:function(){return _get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this)}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a);const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);for(const u of this.visibleAndFetchedTiles()){const c=u.sprite.rotation*180/Math.PI,l=document.createElement("g");l.setAttribute("transform",`translate(${u.sprite.x},${u.sprite.y}) rotate(${c}) scale(${u.sprite.scale.x},${u.sprite.scale.y})`);const f=document.createElement("image");f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.canvas.toDataURL()),f.setAttribute("width",u.canvas.width),f.setAttribute("height",u.canvas.height),f.setAttribute("style","image-rendering: pixelated"),l.appendChild(f),o.appendChild(l)}const s=this.exportColorBarSVG();return r.appendChild(s),[a,a]}},{key:"getVisiblePartOfUppLeftTile",value:function(){const r=this.visibleAndFetchedTiles().map(p=>{const m=p.mirrored?[p.tileData.tilePos[1],p.tileData.tilePos[0]]:p.tileData.tilePos;return[m[0],m[1],p.tileId]});if(r.length===0)return null;let a=r[0];for(let p=0;p<r.length;p++){const m=r[p];(m[0]<a[0]||m[1]<a[1])&&(a=m)}const o=Math.min(vb,this.binsPerTile()),s=this.binsPerTile()/o,u=this.visibleAndFetchedTiles().filter(p=>p.tileId===a[2])[0],c=this.getIndicesOfVisibleDataInTile(u),l=c[0],f=c[1],h=l-l%s,d=f-f%s;return[u.tileId,h,d]}},{key:"getIndicesOfVisibleDataInTile",value:function(r){const a=this._xScale.range(),o=this._yScale.range(),s=r.mirrored?[r.tileData.tilePos[1],r.tileData.tilePos[0]]:r.tileData.tilePos,{tileX:u,tileY:c,tileWidth:l,tileHeight:f}=this.getTilePosAndDimensions(r.tileData.zoomLevel,s,this.binsPerTile()),h=Et().domain([0,this.binsPerTile()]).range([u,u+l]),d=Math.max(0,Math.round(h.invert(this._xScale.invert(a[0])))-1),p=Math.min(this.binsPerTile(),Math.round(h.invert(this._xScale.invert(a[1])))),m=Et().domain([0,this.binsPerTile()]).range([c,c+f]),g=Math.max(0,Math.round(m.invert(this._yScale.invert(o[0])))-1),v=Math.min(this.binsPerTile(),Math.round(m.invert(this._yScale.invert(o[1]))));return r.mirrored&&s[0]!==s[1]?[g,d,v,p]:[d,g,p,v]}},{key:"minVisibleValue",value:function(r=!1){const a=this.visibleAndFetchedTiles().map(s=>{if(s.tileData.denseDataExtrema===void 0)return null;const u=this.getIndicesOfVisibleDataInTile(s);return s.tileData.denseDataExtrema.getMinNonZeroInSubset(u)});if(a.length===0&&this.valueScaleMax===null)return null;const o=Math.min.apply(null,a);return o===Number.MAX_SAFE_INTEGER?_get4(_getPrototypeOf4(n.prototype),"minVisibleValue",this).call(this,r):r?o:this.valueScaleMin!==null?this.valueScaleMin:o}},{key:"maxVisibleValue",value:function(r=!1){const a=this.visibleAndFetchedTiles().map(s=>{if(s.tileData.denseDataExtrema===void 0)return null;const u=this.getIndicesOfVisibleDataInTile(s);return s.tileData.denseDataExtrema.getMaxNonZeroInSubset(u)});if(a.length===0&&this.valueScaleMax===null)return null;const o=Math.max.apply(null,a);return o===Number.MIN_SAFE_INTEGER?_get4(_getPrototypeOf4(n.prototype),"maxVisibleValue",this).call(this,r):r?o:this.valueScaleMax!==null?this.valueScaleMax:o}},{key:"zoomed",value:function(r,a,o,s,u){if(this.brushing)return;_get4(_getPrototypeOf4(n.prototype),"zoomed",this).call(this,r,a),this.pMain.position.x=s,this.pMain.position.y=u,this.pMain.scale.x=o,this.pMain.scale.y=o;const c=this.isValueScaleLocked();if(this.continuousScaling&&this.minValue()!==void 0&&this.maxValue()!==void 0){const l=JSON.stringify(this.getVisiblePartOfUppLeftTile());if(this.valueScaleMin===null&&this.valueScaleMax===null&&!c&&l!==this.prevIndUpperLeftTile){const f=this.minVisibleValue(),h=this.maxVisibleValue(),d=1e-6;f!==null&&h!==null&&(Math.abs(this.minValue()-f)>d||Math.abs(this.maxValue()-h)>d)&&(this.minValue(f),this.maxValue(h),this.scheduleRerender()),this.prevIndUpperLeftTile=l}c&&this.onValueScaleChanged()}this.mouseMoveZoomHandler()}},{key:"addTileId",value:function(r,a,o,s,u,c=!1){const l=[a,o,s];l.mirrored=c,l.dataTransform=u,r.push(l)}},{key:"tilesToId",value:function(r,a,o){const s=r,u=a,c=this.options&&this.options.dataTransform||"default",l=[];for(let f=0;f<s.length;f++)for(let h=0;h<u.length;h++)this.mirrorTiles()?(s[f]>=u[h]?this.options.extent!=="lower-left"&&this.addTileId(l,o,u[h],s[f],c,!0):this.options.extent!=="upper-right"&&this.addTileId(l,o,s[f],u[h],c),s[f]===u[h]&&this.options.extent==="lower-left"&&this.addTileId(l,o,s[f],u[h],c)):this.addTileId(l,o,s[f],u[h],c);return l}},{key:"calculateVisibleTiles",value:function(){if(!!this.tilesetInfo){if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const r=this.tilesetInfo.resolutions.map(a=>+a).sort((a,o)=>o-a);this.xTiles=Xe.calculateTilesFromResolution(r[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=Xe.calculateTilesFromResolution(r[this.zoomLevel],this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=Xe.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=Xe.calculateTiles(this.zoomLevel,this._yScale,this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],this.options.reverseYAxis?-this.tilesetInfo.min_pos[1]:this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width1||this.tilesetInfo.max_width);this.setVisibleTiles(this.tilesToId(this.xTiles,this.yTiles,this.zoomLevel))}}},{key:"mirrorTiles",value:function(){return!(this.tilesetInfo.mirror_tiles&&(this.tilesetInfo.mirror_tiles===!1||this.tilesetInfo.mirror_tiles==="false"))}},{key:"getMouseOverHtml",value:function(r,a){if(!this.options||!this.options.showTooltip||!this.tilesetInfo)return"";const o=Xe.calculateResolution(this.tilesetInfo,this.zoomLevel),s=Math.max(this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0]),u=Math.ceil(Math.log(s/o)/Math.log(10));this.setDataLensSize(1);const c=this._xScale.invert(r),l=this._yScale.invert(a);let f="<b>Position:</b> ";if(this.chromInfo){const d=Wn(c,this.chromInfo),p=Wn(l,this.chromInfo),m=g=>bi(`.${u}s`)(g);f+=`${d[0]}:${m(d[1])} & ${p[0]}:${m(p[1])}`,f+="<br/>"}let h=null;try{h=this.getVisibleRectangleData(r,a,1,1).get(0,0)}catch{return""}return this.options&&this.options.heatmapValueScaling==="log"?h>0?`${f}<b>Value:</b> 1e${bi(".3f")(Math.log(h)/Math.log(10))}`:h===0?`${f}<b>Value:</b> 0`:`${f}<b>Value:</b> N/A`:`${f}<b>Value:</b> ${bi(".3f")(h)}`}},{key:"getTilePosAndDimensions",value:function(r,a,o){const s=o||this.binsPerTile();if(this.tilesetInfo.resolutions){const v=this.tilesetInfo.resolutions.map(S=>+S).sort((S,w)=>w-S)[r],E=v*s,y=E,T=v*s*a[0],b=v*s*a[1];return{tileX:T,tileY:b,tileWidth:E,tileHeight:y}}const u=a[0],c=a[1],l=this.tilesetInfo.min_pos[0],f=this.options.reverseYAxis?-this.tilesetInfo.max_pos[1]:this.tilesetInfo.min_pos[1],h=this.tilesetInfo.max_width/2**r,d=this.tilesetInfo.max_width/2**r,p=l+u*h,m=f+c*d;return{tileX:p,tileY:m,tileWidth:h,tileHeight:d}}},{key:"calculateZoomLevel",value:function(){const r=this.tilesetInfo.min_pos[0],a=this.tilesetInfo.max_pos[0],o=this.tilesetInfo.min_pos[1],s=this.tilesetInfo.max_pos[1];let u=null;if(this.tilesetInfo.resolutions){const c=Xe.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,r,a),l=Xe.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._yScale,o,s);u=Math.min(c,l)}else{const c=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.binsPerTile()),l=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.binsPerTile());u=Math.max(c,l),u=Math.min(u,this.maxZoom)}return this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?u=Math.min(this.options.maxZoom,u):console.error("Invalid maxZoom on track:",this)),u}},{key:"tileToLocalId",value:function(r){return r.dataTransform&&r.dataTransform!=="default"?`${r.join(".")}.${r.mirrored}.${r.dataTransform}`:`${r.join(".")}.${r.mirrored}`}},{key:"tileToRemoteId",value:function(r){return r.dataTransform&&r.dataTransform!=="default"?`${r.join(".")}.${r.dataTransform}`:`${r.join(".")}`}},{key:"localToRemoteId",value:function(r){const a=r.split(".");return a.slice(0,a.length-1).join(".")}}]),n}(bs);function B4(e){if(!e.graphics)return;const t=e.graphics,{tileX:n,tileY:i,tileWidth:r}=this.getTilePosAndDimensions(e.tileData.zoomLevel,e.tileData.tilePos);e.drawnAtScale=this._xScale.copy();const a=1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0))),o=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));e.text.scale.x=a,e.text.scale.y=o;const s=this._xScale(r)-this._xScale(0);if(e.textGraphics.scale.x=s/256,e.textGraphics.scale.y=s/256,t.clear(),t.lineStyle(4*a,255,1),t.beginFill(16740363,.4),t.alpha=.5,e.mirrored){const u=this._refXScale(i+r)-this._refXScale(i),c=this._refYScale(n+r)-this._refYScale(n);e.textGraphics.position.x=this._refXScale(i)+u/2,e.textGraphics.position.y=this._refYScale(n)+c/2,t.drawRect(this._refXScale(i),this._refYScale(n),u,c)}else{const u=this._refXScale(n+r)-this._refXScale(n),c=this._refYScale(i+r)-this._refYScale(i);e.textGraphics.position.x=this._refXScale(n)+u/2,e.textGraphics.position.y=this._refYScale(i)+c/2,t.drawRect(this._refXScale(n),this._refYScale(i),u,c)}}function F4(e){const t=e.graphics;e.textGraphics=new Be.PIXI.Graphics,e.mirrored?e.text=new Be.PIXI.Text(`${e.tileData.zoomLevel}/${[e.tileData.tilePos[1],e.tileData.tilePos[0]].join("/")}`,{fontFamily:"Arial",fontSize:24,fill:16715792,align:"center"}):e.text=new Be.PIXI.Text(`${e.tileData.zoomLevel}/${e.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:24,fill:16715792,align:"center"}),e.textGraphics.addChild(e.text),e.text.anchor.x=.5,e.text.anchor.y=.5,t.addChild(e.textGraphics)}let H4=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(r){F4.bind(this)(r),this.drawTile(r)}},{key:"destroyTile",value:function(r,a){}},{key:"drawTile",value:function(r){B4.bind(this)(r)}},{key:"fetchNewTiles",value:function(r){r.forEach(a=>{const s=a.remoteId.split("."),u={zoomLevel:s[0],tilePos:s.slice(1,s.length).map(c=>+c)};this.fetchedTiles[a.tileId]=a,this.fetchedTiles[a.tileId].tileData=u,this.fetching.has(a.remoteId)&&this.fetching.delete(a.remoteId)}),this.synchronizeTilesAndGraphics()}}]),n}(ip);const hye=1024;let fC=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{onMouseMoveZoom:o,isValueScaleLocked:s,getLockGroupExtrema:u}=i;return a.onMouseMoveZoom=o,a.isValueScaleLocked=s,a.getLockGroupExtrema=u,a.onMouseMoveZoom&&a.pubSubs.push(a.pubSub.subscribe("app.mouseMove",a.mouseMoveHandler.bind(_assertThisInitialized3(a)))),a}return _createClass3(n,[{key:"initTile",value:function(r){_get4(_getPrototypeOf4(n.prototype),"initTile",this).call(this,r)}},{key:"tileToLocalId",value:function(r){return`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return`${r.join(".")}`}},{key:"relevantScale",value:function(){return null}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(a=>({tileId:this.tileToLocalId(a),remoteId:this.tileToRemoteId(a)})),this.visibleTileIds=new Set(this.visibleTiles.map(a=>a.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const o=this.tilesetInfo.resolutions.map(c=>+c).sort((c,l)=>l-c),u=Xe.calculateTilesFromResolution(o[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]).map(c=>[this.zoomLevel,c]);this.setVisibleTiles(u);return}const a=Xe.calculateTiles(this.zoomLevel,this.relevantScale(),this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width).map(o=>[this.zoomLevel,o]);this.setVisibleTiles(a)}},{key:"getTilePosAndDimensions",value:function(r,a,o){const s=a[0],u=a[0];if(this.tilesetInfo.resolutions){const v=o||hye,y=this.tilesetInfo.resolutions.map(D=>+D).sort((D,R)=>R-D)[r],T=y*v,b=T,S=y*v*a[0],w=y*v*a[1];return{tileX:S,tileY:w,tileWidth:T,tileHeight:b}}const c=this.tilesetInfo.max_width,l=this.tilesetInfo.max_width,f=this.tilesetInfo.min_pos[0],h=this.tilesetInfo.min_pos[1],d=c/2**r,p=l/2**r,m=f+s*d,g=h+u*p;return{tileX:m,tileY:g,tileWidth:d,tileHeight:p}}},{key:"updateTile",value:function(r){}},{key:"scheduleRerender",value:function(){this.backgroundTaskScheduler.enqueueTask(this.handleRerender.bind(this),null,this.uuid)}},{key:"handleRerender",value:function(){this.rerender(this.options,!1)}},{key:"getIndicesOfVisibleDataInTile",value:function(r){const a=this._xScale.range();if(!this.tilesetInfo)return[null,null];const{tileX:o,tileWidth:s}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),u=Et().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([o,o+s]),c=Math.max(0,Math.round(u.invert(this._xScale.invert(a[0])))),l=Math.min(r.tileData.dense.length,Math.round(u.invert(this._xScale.invert(a[1]))));return[c,l]}},{key:"minVisibleValue",value:function(r=!1){let a=this.visibleAndFetchedIds();a.length===0&&(a=Object.keys(this.fetchedTiles));const o=a.map(u=>this.fetchedTiles[u]).map(u=>{const c=this.getIndicesOfVisibleDataInTile(u);return u.tileData.denseDataExtrema.getMinNonZeroInSubset(c)}),s=Math.min(...o);return r?s:this.valueScaleMin!==null?this.valueScaleMin:s}},{key:"maxVisibleValue",value:function(r=!1){let a=this.visibleAndFetchedIds();a.length===0&&(a=Object.keys(this.fetchedTiles));const o=a.map(u=>this.fetchedTiles[u]).map(u=>{const c=this.getIndicesOfVisibleDataInTile(u);return u.tileData.denseDataExtrema.getMaxNonZeroInSubset(c)}),s=Math.max(...o);return r?s:this.valueScaleMax!==null?this.valueScaleMax:s}},{key:"getAggregatedVisibleValue",value:function(r="max"){const a=r==="min"?Math.min:Math.max,o=r==="min"?1/0:-1/0;let s=this.visibleAndFetchedIds();s.length===0&&(s=Object.keys(this.fetchedTiles));const u=this._xScale.range();return s.map(c=>this.fetchedTiles[c]).map(c=>{if(!c.tileData.tilePos)return r==="min"?this.minVisibleValue():this.maxVisibleValue();const{tileX:l,tileWidth:f}=this.getTilePosAndDimensions(c.tileData.zoomLevel,c.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),h=Et().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([l,l+f]),d=Math.max(0,Math.round(h.invert(this._xScale.invert(u[0])))),p=Math.min(c.tileData.dense.length,Math.round(h.invert(this._xScale.invert(u[1]))));return c.tileData.dense.slice(d,p)}).reduce((c,l)=>a(c,...l),o)}},{key:"getDataAtPos",value:function(r){let a;if(!this.tilesetInfo)return a;const o=this.calculateZoomLevel(),s=Xe.calculateTileWidth(this.tilesetInfo,o,this.tilesetInfo.tile_size),u=this._xScale.invert(r)/s,c=this.tileToLocalId([o,Math.floor(u)]),l=this.fetchedTiles[c];if(!l)return a;const f=this.tilesetInfo.tile_size*(u-Math.floor(u));return l.tileData.dense?l.tileData.dense[Math.floor(f)]:null}},{key:"mouseMoveHandler",value:function({x:r,y:a}={}){!this.isWithin(r,a)||(this.mouseX=r,this.mouseY=a,this.mouseMoveZoomHandler())}},{key:"mouseMoveZoomHandler",value:function(){}},{key:"zoomed",value:function(...r){_get4(_getPrototypeOf4(n.prototype),"zoomed",this).call(this,...r),this.mouseMoveZoomHandler()}}]),n}(bs),Xc=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{animate:o,isShowGlobalMousePosition:s}=i;return a.constIndicator=new Be.PIXI.Graphics,a.pMain.addChild(a.constIndicator),a.axis=new _v(_assertThisInitialized3(a)),a.pBase.addChild(a.axis.pAxis),a.animate=o,a.options=r,a.isShowGlobalMousePosition=s,a.pubSubs=[],a.options.showMousePosition&&!a.hideMousePosition&&(a.hideMousePosition=pl(_assertThisInitialized3(a),a.is2d,a.isShowGlobalMousePosition())),a}return _createClass3(n,[{key:"rerender",value:function(r,a){const o=JSON.stringify(r);!a&&o===this.prevOptions||(_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r,a),this.prevOptions=o,this.options=r,this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=pl(this,this.is2d,this.isShowGlobalMousePosition())),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"calculateZoomLevel",value:function(){if(this.tilesetInfo.resolutions)return Xe.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]-2);const r=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size);let a=Math.min(r,this.maxZoom);return a=Math.max(a,0),a}},{key:"relevantScale",value:function(){return this._xScale}},{key:"draw",value:function(){_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this),this.drawConstIndicator()}},{key:"drawAxis",value:function(r){if(!this.options.axisPositionVertical&&!this.options.axisPositionHorizontal){this.axis.clearAxis();return}if(this.options.axisPositionVertical&&this.options.axisPositionVertical==="hidden"){this.axis.clearAxis();return}if(this.options.axisPositionHorizontal&&this.options.axisPositionHorizontal==="hidden"){this.axis.clearAxis();return}const a=this.options.axisMargin||0;this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"?(this.axis.pAxis.position.x=this.position[0]+a,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(r,this.dimensions[1])):this.options.axisPositionHorizontal==="outsideLeft"||this.options.axisPositionVertical==="outsideTop"?(this.axis.pAxis.position.x=this.position[0]+a,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(r,this.dimensions[1])):this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"?(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0]-a,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisLeft(r,this.dimensions[1])):(this.options.axisPositionHorizontal==="outsideRight"||this.options.axisPositionVertical==="outsideBottom")&&(this.axis.pAxis.position.x=this.position[0]+this.dimensions[0]-a,this.axis.pAxis.position.y=this.position[1],this.axis.drawAxisRight(r,this.dimensions[1]))}},{key:"mouseMoveZoomHandler",value:function(r=this.mouseX,a=this.mouseY){if(typeof r>"u"||!this.areAllVisibleTilesLoaded()||!this.tilesetInfo)return;let o=0,s=0,u="1d-horizontal";this.isLeftModified?(o=a-this.position[1],s=r-this.position[0],u="1d-vertical"):(o=r-this.position[0],s=a-this.position[1]);const c=r-this.position[0],l=a-this.position[1],f=this._xScale.invert(o),h=this._yScale.invert(s),d=this.getDataAtPos(o);!d||this.onMouseMoveZoom({trackId:this.id,data:d,absX:r,absY:a,relX:c,relY:l,dataX:f,dataY:h,orientation:u})}},{key:"drawConstIndicator",value:function(){if(!!this.constIndicator){for(this.constIndicator.clear();this.constIndicator.children[0];)this.constIndicator.removeChild(this.constIndicator.children[0]);!this.options.constIndicators||!this.valueScale||this.options.constIndicators.forEach(({color:r="black",opacity:a=1,label:o=null,labelColor:s="black",labelOpacity:u=1,labelPosition:c="leftTop",labelSize:l=12,value:f=0}={})=>{const h=at(r),d=at(s);this.constIndicator.beginFill(h,a);const p=this.valueScale(f);let m=0,g=0;if(o){const v=new Be.PIXI.Text(o,{fontFamily:"Arial",fontSize:l,fill:d});switch(v.alpha=u,c){case"right":v.anchor.x=1,v.anchor.y=.5,v.x=this.position[0]+this.dimensions[0]-6,v.y=p,g=v.width+8;break;case"rightBottom":v.anchor.x=1,v.anchor.y=0,v.x=this.position[0]+this.dimensions[0]-6,v.y=p;break;case"rightTop":v.anchor.x=1,v.anchor.y=1,v.x=this.position[0]+this.dimensions[0]-6,v.y=p;break;case"left":v.anchor.x=0,v.anchor.y=.5,v.x=this.position[0]+2,v.y=p,m=v.width+4;break;case"leftBottom":v.anchor.x=0,v.anchor.y=0,v.x=this.position[0]+2,v.y=p;break;case"leftTop":default:v.anchor.x=0,v.anchor.y=1,v.x=this.position[0]+2,v.y=p;break}this.constIndicator.addChild(v)}this.constIndicator.drawRect(this.position[0]+m,p,this.dimensions[0]-g,1)})}}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a),a.setAttribute("class","horizontal-tiled-1d-track");const o=document.createElement("g");return r.appendChild(o),this.options.constIndicators&&this.options.constIndicators.forEach(({color:s="black",opacity:u=1,label:c=null,labelColor:l="black",labelOpacity:f=1,labelPosition:h="leftTop",labelSize:d=12,value:p=0}={})=>{const m=this.valueScale(p);if(c){const v=document.createElement("text");switch(v.textContent=c,v.setAttribute("x",this.position[0]),v.setAttribute("y",m),v.setAttribute("style",`font-family: 'Arial'; font-size: ${d}px; fill: ${l}; fill-opacity: ${f};`),h){case"rightBottom":v.setAttribute("x",this.position[0]+this.dimensions[0]-6),v.setAttribute("y",m+d+2),v.setAttribute("text-anchor","end");break;case"right":case"rightTop":v.setAttribute("x",this.position[0]+this.dimensions[0]-6),v.setAttribute("y",m-2),v.setAttribute("text-anchor","end");break;case"leftBottom":v.setAttribute("x",this.position[0]+2),v.setAttribute("y",m+d+2);break;case"left":case"leftTop":default:v.setAttribute("x",this.position[0]+2),v.setAttribute("y",m-2);break}o.appendChild(v)}const g=document.createElement("line");g.setAttribute("x1",this.position[0]),g.setAttribute("y1",m),g.setAttribute("x2",this.dimensions[0]),g.setAttribute("y2",m),g.setAttribute("stroke",s),g.setAttribute("stroke-opacity",u),o.appendChild(g)}),[a,r]}}]),n}(fC),$4=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.pMain=a.pMobile,a}return _createClass3(n,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(r){const a=r.graphics;r.textGraphics=new Be.PIXI.Graphics,r.text=new Be.PIXI.Text(`${r.tileData.zoomLevel}/${r.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),r.textGraphics.addChild(r.text),r.text.anchor.x=.5,r.text.anchor.y=.5,a.addChild(r.textGraphics),this.drawTile(r)}},{key:"destroyTile",value:function(r){}},{key:"drawTile",value:function(r){if(_get4(_getPrototypeOf4(n.prototype),"drawTile",this).call(this,r),!r.graphics)return;const a=r.graphics,{tileX:o,tileWidth:s}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos),u=1/((this._xScale(1)-this._xScale(0))/(this._refXScale(1)-this._refXScale(0)));r.text.scale.x=u,a.clear();const c=this.dimensions[1],l=this._refXScale(o+s)-this._refXScale(o);r.textGraphics.position.x=this._refXScale(o)+l/2,r.textGraphics.position.y=c/2;const f=this._refXScale(o);a.lineStyle(4*u,255,1),a.beginFill(16740363,.4),a.alpha=.5,a.moveTo(f,0),a.lineTo(f,c),a.moveTo(f+l,0),a.lineTo(f+l,c),a.lineStyle(0,255,1),a.drawRect(f,0,l,c)}}]),n}(Xc),U4=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"calculateZoomLevel",value:function(){const r=Xe.calculateZoomLevel(this._yScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);return Math.min(r,this.maxZoom)}},{key:"relevantScale",value:function(){return this._yScale}},{key:"zoomed",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"zoomed",this).call(this,r,a);const o=1,s=(a(1)-a(0))/(this._refYScale(1)-this._refYScale(0)),u=this.position[0],c=a(0)+this.position[1]-this._refYScale(1)*s;this.pMain.position.x=u,this.pMain.position.y=c,this.pMain.scale.x=o,this.pMain.scale.y=s}}]),n}(fC),G4=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"initTile",value:function(r){const a=r.graphics;r.textGraphics=new Be.PIXI.Graphics,r.text=new Be.PIXI.Text(`${r.tileData.zoomLevel}/${r.tileData.tilePos.join("/")}`,{fontFamily:"Arial",fontSize:32,fill:16715792,align:"center"}),r.textGraphics.addChild(r.text),r.text.anchor.x=.5,r.text.anchor.y=.5,r.text.rotation=-Math.PI/2,a.addChild(r.textGraphics),this.drawTile(r,a)}},{key:"destroyTile",value:function(r,a){}},{key:"drawTile",value:function(r){if(_get4(_getPrototypeOf4(n.prototype),"drawTile",this).call(this,r),!r.graphics)return;const a=r.graphics,{tileY:o,tileHeight:s}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos),u=1/((this._yScale(1)-this._yScale(0))/(this._refYScale(1)-this._refYScale(0)));r.text.scale.x=u,a.clear(),a.lineStyle(4*u,255,1),a.beginFill(16740363,.4),a.alpha=.5;const c=this.dimensions[0],l=this._refYScale(o+s)-this._refYScale(o);r.textGraphics.position.x=c/2,r.textGraphics.position.y=this._refYScale(o)+l/2,a.drawRect(0,this._refYScale(o),c,l)}},{key:"fetchNewTiles",value:function(r){r.forEach(a=>{const s=a.remoteId.split("."),u={zoomLevel:s[1],tilePos:s.slice(2,s.length).map(c=>+c)};this.fetchedTiles[a.tileId]=a,this.fetchedTiles[a.tileId].tileData=u,this.fetching.has(a.remoteId)&&this.fetching.delete(a.remoteId)}),this.synchronizeTilesAndGraphics()}}]),n}(U4);var dC=Array.prototype.slice;function fye(e){return e}var jv=1,Vv=2,pC=3,ap=4,z4=1e-6;function dye(e){return"translate("+e+",0)"}function pye(e){return"translate(0,"+e+")"}function mye(e){return t=>+e(t)}function gye(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function vye(){return!this.__axis}function Yv(e,t){var n=[],i=null,r=null,a=6,o=6,s=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=e===jv||e===ap?-1:1,l=e===ap||e===Vv?"x":"y",f=e===jv||e===pC?dye:pye;function h(d){var p=i??(t.ticks?t.ticks.apply(t,n):t.domain()),m=r??(t.tickFormat?t.tickFormat.apply(t,n):fye),g=Math.max(a,0)+s,v=t.range(),E=+v[0]+u,y=+v[v.length-1]+u,T=(t.bandwidth?gye:mye)(t.copy(),u),b=d.selection?d.selection():d,S=b.selectAll(".domain").data([null]),w=b.selectAll(".tick").data(p,t).order(),D=w.exit(),R=w.enter().append("g").attr("class","tick"),M=w.select("line"),k=w.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),w=w.merge(R),M=M.merge(R.append("line").attr("stroke","currentColor").attr(l+"2",c*a)),k=k.merge(R.append("text").attr("fill","currentColor").attr(l,c*g).attr("dy",e===jv?"0em":e===pC?"0.71em":"0.32em")),d!==b&&(S=S.transition(d),w=w.transition(d),M=M.transition(d),k=k.transition(d),D=D.transition(d).attr("opacity",z4).attr("transform",function(L){return isFinite(L=T(L))?f(L+u):this.getAttribute("transform")}),R.attr("opacity",z4).attr("transform",function(L){var $=this.parentNode.__axis;return f(($&&isFinite($=$(L))?$:T(L))+u)})),D.remove(),S.attr("d",e===ap||e===Vv?o?"M"+c*o+","+E+"H"+u+"V"+y+"H"+c*o:"M"+u+","+E+"V"+y:o?"M"+E+","+c*o+"V"+u+"H"+y+"V"+c*o:"M"+E+","+u+"H"+y),w.attr("opacity",1).attr("transform",function(L){return f(T(L)+u)}),M.attr(l+"2",c*a),k.attr(l,c*g).text(m),b.filter(vye).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Vv?"start":e===ap?"end":"middle"),b.each(function(){this.__axis=T})}return h.scale=function(d){return arguments.length?(t=d,h):t},h.ticks=function(){return n=dC.call(arguments),h},h.tickArguments=function(d){return arguments.length?(n=d==null?[]:dC.call(d),h):n.slice()},h.tickValues=function(d){return arguments.length?(i=d==null?null:dC.call(d),h):i&&i.slice()},h.tickFormat=function(d){return arguments.length?(r=d,h):r},h.tickSize=function(d){return arguments.length?(a=o=+d,h):a},h.tickSizeInner=function(d){return arguments.length?(a=+d,h):a},h.tickSizeOuter=function(d){return arguments.length?(o=+d,h):o},h.tickPadding=function(d){return arguments.length?(s=+d,h):s},h.offset=function(d){return arguments.length?(u=+d,h):u},h}function j4(e){return Yv(jv,e)}function yye(e){return Yv(Vv,e)}function Tye(e){return Yv(pC,e)}function V4(e){return Yv(ap,e)}const Eye=Object.freeze(Object.defineProperty({__proto__:null,axisTop:j4,axisRight:yye,axisBottom:Tye,axisLeft:V4},Symbol.toStringTag,{value:"Module"}));let Cs=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{svgElement:o}=i;return a.gMain=xt(o).append("g"),a.clipUid=Pt.nice(),a.clipRect=a.gMain.append("clipPath").attr("id",`track-bounds-${a.clipUid}`).append("rect"),a.gMain.attr("clip-path",`url(#track-bounds-${a.clipUid})`),a}return _createClass3(n,[{key:"setPosition",value:function(r){this.position=r,this.gMain.attr("transform",`translate(${this.position[0]},${this.position[1]})`),this.draw()}},{key:"setDimensions",value:function(r){this.dimensions=r,this._xScale.range([0,this.dimensions[0]]),this._yScale.range([0,this.dimensions[1]]),r[0]>=0&&r[1]>=0?(this.clipRect.attr("width",r[0]),this.clipRect.attr("height",r[1])):(this.clipRect.attr("width",0),this.clipRect.attr("height",0)),this.draw()}},{key:"remove",value:function(){this.gMain.remove(),this.gMain=null}},{key:"draw",value:function(){return this}}]),n}(Fc),Y4=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.axis=j4(a._xScale),a.gAxis=a.gMain.append("g"),a.tilesetInfo=!0,a}return _createClass3(n,[{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r),this.axis.ticks(Math.ceil(this.dimensions[0]/150)),this.gAxis.attr("transform",`translate(0,${r[1]})`)}},{key:"draw",value:function(){return this.axis.scale(this._xScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"zoomed",this).call(this,r,a),this.draw()}}]),n}(Cs),W4=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.axis=V4(a._yScale),a.gAxis=a.gMain.append("g"),a.tilesetInfo=!0,a}return _createClass3(n,[{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r),this.axis.ticks(Math.ceil(this.dimensions[1]/150)),this.gAxis.attr("transform",`translate(${r[0]},0)`)}},{key:"draw",value:function(){return this.axis.scale(this._yScale),this.gAxis.call(this.axis),this}},{key:"zoomed",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"zoomed",this).call(this,r,a),this.draw()}}]),n}(Cs);var Rt={},In={},mC=32;In.INT_BITS=mC,In.INT_MAX=2147483647,In.INT_MIN=-1<<mC-1,In.sign=function(e){return(e>0)-(e<0)},In.abs=function(e){var t=e>>mC-1;return(e^t)-t},In.min=function(e,t){return t^(e^t)&-(e<t)},In.max=function(e,t){return e^(e^t)&-(e<t)},In.isPow2=function(e){return!(e&e-1)&&!!e},In.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,t|=n,t|e>>1},In.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},In.popCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24};function q4(e){var t=32;return e&=-e,e&&t--,e&65535&&(t-=16),e&16711935&&(t-=8),e&252645135&&(t-=4),e&858993459&&(t-=2),e&1431655765&&(t-=1),t}In.countTrailingZeros=q4,In.nextPow2=function(e){return e+=e===0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},In.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},In.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var op=new Array(256);(function(e){for(var t=0;t<256;++t){var n=t,i=t,r=7;for(n>>>=1;n;n>>>=1)i<<=1,i|=n&1,--r;e[t]=i<<r&255}})(op),In.reverse=function(e){return op[e&255]<<24|op[e>>>8&255]<<16|op[e>>>16&255]<<8|op[e>>>24&255]},In.interleave2=function(e,t){return e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1},In.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=(e|e>>>1)&858993459,e=(e|e>>>2)&252645135,e=(e|e>>>4)&16711935,e=(e|e>>>16)&65535,e<<16>>16},In.interleave3=function(e,t,n){return e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,e|=t<<1,n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,e|n<<2},In.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=(e|e>>>2)&3272356035,e=(e|e>>>4)&251719695,e=(e|e>>>8)&4278190335,e=(e|e>>>16)&1023,e<<22>>22},In.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>q4(e)+1};function X4(e,t,n){var i=e[n]|0;if(i<=0)return[];var r=new Array(i),a;if(n===e.length-1)for(a=0;a<i;++a)r[a]=t;else for(a=0;a<i;++a)r[a]=X4(e,t,n+1);return r}function bye(e,t){var n,i;for(n=new Array(e),i=0;i<e;++i)n[i]=t;return n}function _ye(e,t){switch(typeof t>"u"&&(t=0),typeof e){case"number":if(e>0)return bye(e|0,t);break;case"object":if(typeof e.length=="number")return X4(e,t,0);break}return[]}var Sye=_ye,K4={},Wv={};Wv.byteLength=Dye,Wv.toByteArray=Iye,Wv.fromByteArray=xye;for(var no=[],Ki=[],Aye=typeof Uint8Array<"u"?Uint8Array:Array,gC="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Kc=0,Cye=gC.length;Kc<Cye;++Kc)no[Kc]=gC[Kc],Ki[gC.charCodeAt(Kc)]=Kc;Ki["-".charCodeAt(0)]=62,Ki["_".charCodeAt(0)]=63;function Z4(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var i=n===t?0:4-n%4;return[n,i]}function Dye(e){var t=Z4(e),n=t[0],i=t[1];return(n+i)*3/4-i}function wye(e,t,n){return(t+n)*3/4-n}function Iye(e){var t,n=Z4(e),i=n[0],r=n[1],a=new Aye(wye(e,i,r)),o=0,s=r>0?i-4:i,u;for(u=0;u<s;u+=4)t=Ki[e.charCodeAt(u)]<<18|Ki[e.charCodeAt(u+1)]<<12|Ki[e.charCodeAt(u+2)]<<6|Ki[e.charCodeAt(u+3)],a[o++]=t>>16&255,a[o++]=t>>8&255,a[o++]=t&255;return r===2&&(t=Ki[e.charCodeAt(u)]<<2|Ki[e.charCodeAt(u+1)]>>4,a[o++]=t&255),r===1&&(t=Ki[e.charCodeAt(u)]<<10|Ki[e.charCodeAt(u+1)]<<4|Ki[e.charCodeAt(u+2)]>>2,a[o++]=t>>8&255,a[o++]=t&255),a}function kye(e){return no[e>>18&63]+no[e>>12&63]+no[e>>6&63]+no[e&63]}function Oye(e,t,n){for(var i,r=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(e[a+2]&255),r.push(kye(i));return r.join("")}function xye(e){for(var t,n=e.length,i=n%3,r=[],a=16383,o=0,s=n-i;o<s;o+=a)r.push(Oye(e,o,o+a>s?s:o+a));return i===1?(t=e[n-1],r.push(no[t>>2]+no[t<<4&63]+"==")):i===2&&(t=(e[n-2]<<8)+e[n-1],r.push(no[t>>10]+no[t>>4&63]+no[t<<2&63]+"=")),r.join("")}var vC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */vC.read=function(e,t,n,i,r){var a,o,s=r*8-i-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?r-1:0,h=n?-1:1,d=e[t+f];for(f+=h,a=d&(1<<-l)-1,d>>=-l,l+=s;l>0;a=a*256+e[t+f],f+=h,l-=8);for(o=a&(1<<-l)-1,a>>=-l,l+=i;l>0;o=o*256+e[t+f],f+=h,l-=8);if(a===0)a=1-c;else{if(a===u)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,i),a=a-c}return(d?-1:1)*o*Math.pow(2,a-i)},vC.write=function(e,t,n,i,r,a){var o,s,u,c=a*8-r-1,l=(1<<c)-1,f=l>>1,h=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:a-1,p=i?1:-1,m=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+f>=1?t+=h/u:t+=h*Math.pow(2,1-f),t*u>=2&&(o++,u/=2),o+f>=l?(s=0,o=l):o+f>=1?(s=(t*u-1)*Math.pow(2,r),o=o+f):(s=t*Math.pow(2,f-1)*Math.pow(2,r),o=0));r>=8;e[n+d]=s&255,d+=p,s/=256,r-=8);for(o=o<<r|s,c+=r;c>0;e[n+d]=o&255,d+=p,o/=256,c-=8);e[n+d-p]|=m*128};/*!
* The buffer module from node.js, for the browser.
*
* @author   Feross Aboukhadijeh <https://feross.org>
* @license  MIT
*/(function(e){const t=Wv,n=vC,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;const r=2147483647;e.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const I=new Uint8Array(1),_={foo:function(){return 42}};return Object.setPrototypeOf(_,Uint8Array.prototype),Object.setPrototypeOf(I,_),I.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function o(I){if(I>r)throw new RangeError('The value "'+I+'" is invalid for option "size"');const _=new Uint8Array(I);return Object.setPrototypeOf(_,s.prototype),_}function s(I,_,C){if(typeof I=="number"){if(typeof _=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f(I)}return u(I,_,C)}s.poolSize=8192;function u(I,_,C){if(typeof I=="string")return h(I,_);if(ArrayBuffer.isView(I))return p(I);if(I==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I);if(gt(I,ArrayBuffer)||I&&gt(I.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(gt(I,SharedArrayBuffer)||I&&gt(I.buffer,SharedArrayBuffer)))return m(I,_,C);if(typeof I=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const F=I.valueOf&&I.valueOf();if(F!=null&&F!==I)return s.from(F,_,C);const te=g(I);if(te)return te;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof I[Symbol.toPrimitive]=="function")return s.from(I[Symbol.toPrimitive]("string"),_,C);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof I)}s.from=function(I,_,C){return u(I,_,C)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function c(I){if(typeof I!="number")throw new TypeError('"size" argument must be of type number');if(I<0)throw new RangeError('The value "'+I+'" is invalid for option "size"')}function l(I,_,C){return c(I),I<=0?o(I):_!==void 0?typeof C=="string"?o(I).fill(_,C):o(I).fill(_):o(I)}s.alloc=function(I,_,C){return l(I,_,C)};function f(I){return c(I),o(I<0?0:v(I)|0)}s.allocUnsafe=function(I){return f(I)},s.allocUnsafeSlow=function(I){return f(I)};function h(I,_){if((typeof _!="string"||_==="")&&(_="utf8"),!s.isEncoding(_))throw new TypeError("Unknown encoding: "+_);const C=y(I,_)|0;let F=o(C);const te=F.write(I,_);return te!==C&&(F=F.slice(0,te)),F}function d(I){const _=I.length<0?0:v(I.length)|0,C=o(_);for(let F=0;F<_;F+=1)C[F]=I[F]&255;return C}function p(I){if(gt(I,Uint8Array)){const _=new Uint8Array(I);return m(_.buffer,_.byteOffset,_.byteLength)}return d(I)}function m(I,_,C){if(_<0||I.byteLength<_)throw new RangeError('"offset" is outside of buffer bounds');if(I.byteLength<_+(C||0))throw new RangeError('"length" is outside of buffer bounds');let F;return _===void 0&&C===void 0?F=new Uint8Array(I):C===void 0?F=new Uint8Array(I,_):F=new Uint8Array(I,_,C),Object.setPrototypeOf(F,s.prototype),F}function g(I){if(s.isBuffer(I)){const _=v(I.length)|0,C=o(_);return C.length===0||I.copy(C,0,0,_),C}if(I.length!==void 0)return typeof I.length!="number"||Oe(I.length)?o(0):d(I);if(I.type==="Buffer"&&Array.isArray(I.data))return d(I.data)}function v(I){if(I>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return I|0}function E(I){return+I!=I&&(I=0),s.alloc(+I)}s.isBuffer=function(_){return _!=null&&_._isBuffer===!0&&_!==s.prototype},s.compare=function(_,C){if(gt(_,Uint8Array)&&(_=s.from(_,_.offset,_.byteLength)),gt(C,Uint8Array)&&(C=s.from(C,C.offset,C.byteLength)),!s.isBuffer(_)||!s.isBuffer(C))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(_===C)return 0;let F=_.length,te=C.length;for(let le=0,ve=Math.min(F,te);le<ve;++le)if(_[le]!==C[le]){F=_[le],te=C[le];break}return F<te?-1:te<F?1:0},s.isEncoding=function(_){switch(String(_).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(_,C){if(!Array.isArray(_))throw new TypeError('"list" argument must be an Array of Buffers');if(_.length===0)return s.alloc(0);let F;if(C===void 0)for(C=0,F=0;F<_.length;++F)C+=_[F].length;const te=s.allocUnsafe(C);let le=0;for(F=0;F<_.length;++F){let ve=_[F];if(gt(ve,Uint8Array))le+ve.length>te.length?(s.isBuffer(ve)||(ve=s.from(ve)),ve.copy(te,le)):Uint8Array.prototype.set.call(te,ve,le);else if(s.isBuffer(ve))ve.copy(te,le);else throw new TypeError('"list" argument must be an Array of Buffers');le+=ve.length}return te};function y(I,_){if(s.isBuffer(I))return I.length;if(ArrayBuffer.isView(I)||gt(I,ArrayBuffer))return I.byteLength;if(typeof I!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof I);const C=I.length,F=arguments.length>2&&arguments[2]===!0;if(!F&&C===0)return 0;let te=!1;for(;;)switch(_){case"ascii":case"latin1":case"binary":return C;case"utf8":case"utf-8":return qe(I).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C*2;case"hex":return C>>>1;case"base64":return Bt(I).length;default:if(te)return F?-1:qe(I).length;_=(""+_).toLowerCase(),te=!0}}s.byteLength=y;function T(I,_,C){let F=!1;if((_===void 0||_<0)&&(_=0),_>this.length||((C===void 0||C>this.length)&&(C=this.length),C<=0)||(C>>>=0,_>>>=0,C<=_))return"";for(I||(I="utf8");;)switch(I){case"hex":return fe(this,_,C);case"utf8":case"utf-8":return P(this,_,C);case"ascii":return ee(this,_,C);case"latin1":case"binary":return se(this,_,C);case"base64":return $(this,_,C);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,_,C);default:if(F)throw new TypeError("Unknown encoding: "+I);I=(I+"").toLowerCase(),F=!0}}s.prototype._isBuffer=!0;function b(I,_,C){const F=I[_];I[_]=I[C],I[C]=F}s.prototype.swap16=function(){const _=this.length;if(_%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let C=0;C<_;C+=2)b(this,C,C+1);return this},s.prototype.swap32=function(){const _=this.length;if(_%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let C=0;C<_;C+=4)b(this,C,C+3),b(this,C+1,C+2);return this},s.prototype.swap64=function(){const _=this.length;if(_%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let C=0;C<_;C+=8)b(this,C,C+7),b(this,C+1,C+6),b(this,C+2,C+5),b(this,C+3,C+4);return this},s.prototype.toString=function(){const _=this.length;return _===0?"":arguments.length===0?P(this,0,_):T.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(_){if(!s.isBuffer(_))throw new TypeError("Argument must be a Buffer");return this===_?!0:s.compare(this,_)===0},s.prototype.inspect=function(){let _="";const C=e.INSPECT_MAX_BYTES;return _=this.toString("hex",0,C).replace(/(.{2})/g,"$1 ").trim(),this.length>C&&(_+=" ... "),"<Buffer "+_+">"},i&&(s.prototype[i]=s.prototype.inspect),s.prototype.compare=function(_,C,F,te,le){if(gt(_,Uint8Array)&&(_=s.from(_,_.offset,_.byteLength)),!s.isBuffer(_))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof _);if(C===void 0&&(C=0),F===void 0&&(F=_?_.length:0),te===void 0&&(te=0),le===void 0&&(le=this.length),C<0||F>_.length||te<0||le>this.length)throw new RangeError("out of range index");if(te>=le&&C>=F)return 0;if(te>=le)return-1;if(C>=F)return 1;if(C>>>=0,F>>>=0,te>>>=0,le>>>=0,this===_)return 0;let ve=le-te,Ue=F-C;const We=Math.min(ve,Ue),nt=this.slice(te,le),Qe=_.slice(C,F);for(let ot=0;ot<We;++ot)if(nt[ot]!==Qe[ot]){ve=nt[ot],Ue=Qe[ot];break}return ve<Ue?-1:Ue<ve?1:0};function S(I,_,C,F,te){if(I.length===0)return-1;if(typeof C=="string"?(F=C,C=0):C>2147483647?C=2147483647:C<-2147483648&&(C=-2147483648),C=+C,Oe(C)&&(C=te?0:I.length-1),C<0&&(C=I.length+C),C>=I.length){if(te)return-1;C=I.length-1}else if(C<0)if(te)C=0;else return-1;if(typeof _=="string"&&(_=s.from(_,F)),s.isBuffer(_))return _.length===0?-1:w(I,_,C,F,te);if(typeof _=="number")return _=_&255,typeof Uint8Array.prototype.indexOf=="function"?te?Uint8Array.prototype.indexOf.call(I,_,C):Uint8Array.prototype.lastIndexOf.call(I,_,C):w(I,[_],C,F,te);throw new TypeError("val must be string, number or Buffer")}function w(I,_,C,F,te){let le=1,ve=I.length,Ue=_.length;if(F!==void 0&&(F=String(F).toLowerCase(),F==="ucs2"||F==="ucs-2"||F==="utf16le"||F==="utf-16le")){if(I.length<2||_.length<2)return-1;le=2,ve/=2,Ue/=2,C/=2}function We(Qe,ot){return le===1?Qe[ot]:Qe.readUInt16BE(ot*le)}let nt;if(te){let Qe=-1;for(nt=C;nt<ve;nt++)if(We(I,nt)===We(_,Qe===-1?0:nt-Qe)){if(Qe===-1&&(Qe=nt),nt-Qe+1===Ue)return Qe*le}else Qe!==-1&&(nt-=nt-Qe),Qe=-1}else for(C+Ue>ve&&(C=ve-Ue),nt=C;nt>=0;nt--){let Qe=!0;for(let ot=0;ot<Ue;ot++)if(We(I,nt+ot)!==We(_,ot)){Qe=!1;break}if(Qe)return nt}return-1}s.prototype.includes=function(_,C,F){return this.indexOf(_,C,F)!==-1},s.prototype.indexOf=function(_,C,F){return S(this,_,C,F,!0)},s.prototype.lastIndexOf=function(_,C,F){return S(this,_,C,F,!1)};function D(I,_,C,F){C=Number(C)||0;const te=I.length-C;F?(F=Number(F),F>te&&(F=te)):F=te;const le=_.length;F>le/2&&(F=le/2);let ve;for(ve=0;ve<F;++ve){const Ue=parseInt(_.substr(ve*2,2),16);if(Oe(Ue))return ve;I[C+ve]=Ue}return ve}function R(I,_,C,F){return On(qe(_,I.length-C),I,C,F)}function M(I,_,C,F){return On(bt(_),I,C,F)}function k(I,_,C,F){return On(Bt(_),I,C,F)}function L(I,_,C,F){return On(yt(_,I.length-C),I,C,F)}s.prototype.write=function(_,C,F,te){if(C===void 0)te="utf8",F=this.length,C=0;else if(F===void 0&&typeof C=="string")te=C,F=this.length,C=0;else if(isFinite(C))C=C>>>0,isFinite(F)?(F=F>>>0,te===void 0&&(te="utf8")):(te=F,F=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const le=this.length-C;if((F===void 0||F>le)&&(F=le),_.length>0&&(F<0||C<0)||C>this.length)throw new RangeError("Attempt to write outside buffer bounds");te||(te="utf8");let ve=!1;for(;;)switch(te){case"hex":return D(this,_,C,F);case"utf8":case"utf-8":return R(this,_,C,F);case"ascii":case"latin1":case"binary":return M(this,_,C,F);case"base64":return k(this,_,C,F);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,_,C,F);default:if(ve)throw new TypeError("Unknown encoding: "+te);te=(""+te).toLowerCase(),ve=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(I,_,C){return _===0&&C===I.length?t.fromByteArray(I):t.fromByteArray(I.slice(_,C))}function P(I,_,C){C=Math.min(I.length,C);const F=[];let te=_;for(;te<C;){const le=I[te];let ve=null,Ue=le>239?4:le>223?3:le>191?2:1;if(te+Ue<=C){let We,nt,Qe,ot;switch(Ue){case 1:le<128&&(ve=le);break;case 2:We=I[te+1],(We&192)===128&&(ot=(le&31)<<6|We&63,ot>127&&(ve=ot));break;case 3:We=I[te+1],nt=I[te+2],(We&192)===128&&(nt&192)===128&&(ot=(le&15)<<12|(We&63)<<6|nt&63,ot>2047&&(ot<55296||ot>57343)&&(ve=ot));break;case 4:We=I[te+1],nt=I[te+2],Qe=I[te+3],(We&192)===128&&(nt&192)===128&&(Qe&192)===128&&(ot=(le&15)<<18|(We&63)<<12|(nt&63)<<6|Qe&63,ot>65535&&ot<1114112&&(ve=ot))}}ve===null?(ve=65533,Ue=1):ve>65535&&(ve-=65536,F.push(ve>>>10&1023|55296),ve=56320|ve&1023),F.push(ve),te+=Ue}return X(F)}const B=4096;function X(I){const _=I.length;if(_<=B)return String.fromCharCode.apply(String,I);let C="",F=0;for(;F<_;)C+=String.fromCharCode.apply(String,I.slice(F,F+=B));return C}function ee(I,_,C){let F="";C=Math.min(I.length,C);for(let te=_;te<C;++te)F+=String.fromCharCode(I[te]&127);return F}function se(I,_,C){let F="";C=Math.min(I.length,C);for(let te=_;te<C;++te)F+=String.fromCharCode(I[te]);return F}function fe(I,_,C){const F=I.length;(!_||_<0)&&(_=0),(!C||C<0||C>F)&&(C=F);let te="";for(let le=_;le<C;++le)te+=ne[I[le]];return te}function Z(I,_,C){const F=I.slice(_,C);let te="";for(let le=0;le<F.length-1;le+=2)te+=String.fromCharCode(F[le]+F[le+1]*256);return te}s.prototype.slice=function(_,C){const F=this.length;_=~~_,C=C===void 0?F:~~C,_<0?(_+=F,_<0&&(_=0)):_>F&&(_=F),C<0?(C+=F,C<0&&(C=0)):C>F&&(C=F),C<_&&(C=_);const te=this.subarray(_,C);return Object.setPrototypeOf(te,s.prototype),te};function he(I,_,C){if(I%1!==0||I<0)throw new RangeError("offset is not uint");if(I+_>C)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(_,C,F){_=_>>>0,C=C>>>0,F||he(_,C,this.length);let te=this[_],le=1,ve=0;for(;++ve<C&&(le*=256);)te+=this[_+ve]*le;return te},s.prototype.readUintBE=s.prototype.readUIntBE=function(_,C,F){_=_>>>0,C=C>>>0,F||he(_,C,this.length);let te=this[_+--C],le=1;for(;C>0&&(le*=256);)te+=this[_+--C]*le;return te},s.prototype.readUint8=s.prototype.readUInt8=function(_,C){return _=_>>>0,C||he(_,1,this.length),this[_]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(_,C){return _=_>>>0,C||he(_,2,this.length),this[_]|this[_+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(_,C){return _=_>>>0,C||he(_,2,this.length),this[_]<<8|this[_+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(_,C){return _=_>>>0,C||he(_,4,this.length),(this[_]|this[_+1]<<8|this[_+2]<<16)+this[_+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(_,C){return _=_>>>0,C||he(_,4,this.length),this[_]*16777216+(this[_+1]<<16|this[_+2]<<8|this[_+3])},s.prototype.readBigUInt64LE=oe(function(_){_=_>>>0,Ye(_,"offset");const C=this[_],F=this[_+7];(C===void 0||F===void 0)&&je(_,this.length-8);const te=C+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24,le=this[++_]+this[++_]*2**8+this[++_]*2**16+F*2**24;return BigInt(te)+(BigInt(le)<<BigInt(32))}),s.prototype.readBigUInt64BE=oe(function(_){_=_>>>0,Ye(_,"offset");const C=this[_],F=this[_+7];(C===void 0||F===void 0)&&je(_,this.length-8);const te=C*2**24+this[++_]*2**16+this[++_]*2**8+this[++_],le=this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+F;return(BigInt(te)<<BigInt(32))+BigInt(le)}),s.prototype.readIntLE=function(_,C,F){_=_>>>0,C=C>>>0,F||he(_,C,this.length);let te=this[_],le=1,ve=0;for(;++ve<C&&(le*=256);)te+=this[_+ve]*le;return le*=128,te>=le&&(te-=Math.pow(2,8*C)),te},s.prototype.readIntBE=function(_,C,F){_=_>>>0,C=C>>>0,F||he(_,C,this.length);let te=C,le=1,ve=this[_+--te];for(;te>0&&(le*=256);)ve+=this[_+--te]*le;return le*=128,ve>=le&&(ve-=Math.pow(2,8*C)),ve},s.prototype.readInt8=function(_,C){return _=_>>>0,C||he(_,1,this.length),this[_]&128?(255-this[_]+1)*-1:this[_]},s.prototype.readInt16LE=function(_,C){_=_>>>0,C||he(_,2,this.length);const F=this[_]|this[_+1]<<8;return F&32768?F|4294901760:F},s.prototype.readInt16BE=function(_,C){_=_>>>0,C||he(_,2,this.length);const F=this[_+1]|this[_]<<8;return F&32768?F|4294901760:F},s.prototype.readInt32LE=function(_,C){return _=_>>>0,C||he(_,4,this.length),this[_]|this[_+1]<<8|this[_+2]<<16|this[_+3]<<24},s.prototype.readInt32BE=function(_,C){return _=_>>>0,C||he(_,4,this.length),this[_]<<24|this[_+1]<<16|this[_+2]<<8|this[_+3]},s.prototype.readBigInt64LE=oe(function(_){_=_>>>0,Ye(_,"offset");const C=this[_],F=this[_+7];(C===void 0||F===void 0)&&je(_,this.length-8);const te=this[_+4]+this[_+5]*2**8+this[_+6]*2**16+(F<<24);return(BigInt(te)<<BigInt(32))+BigInt(C+this[++_]*2**8+this[++_]*2**16+this[++_]*2**24)}),s.prototype.readBigInt64BE=oe(function(_){_=_>>>0,Ye(_,"offset");const C=this[_],F=this[_+7];(C===void 0||F===void 0)&&je(_,this.length-8);const te=(C<<24)+this[++_]*2**16+this[++_]*2**8+this[++_];return(BigInt(te)<<BigInt(32))+BigInt(this[++_]*2**24+this[++_]*2**16+this[++_]*2**8+F)}),s.prototype.readFloatLE=function(_,C){return _=_>>>0,C||he(_,4,this.length),n.read(this,_,!0,23,4)},s.prototype.readFloatBE=function(_,C){return _=_>>>0,C||he(_,4,this.length),n.read(this,_,!1,23,4)},s.prototype.readDoubleLE=function(_,C){return _=_>>>0,C||he(_,8,this.length),n.read(this,_,!0,52,8)},s.prototype.readDoubleBE=function(_,C){return _=_>>>0,C||he(_,8,this.length),n.read(this,_,!1,52,8)};function j(I,_,C,F,te,le){if(!s.isBuffer(I))throw new TypeError('"buffer" argument must be a Buffer instance');if(_>te||_<le)throw new RangeError('"value" argument is out of bounds');if(C+F>I.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(_,C,F,te){if(_=+_,C=C>>>0,F=F>>>0,!te){const Ue=Math.pow(2,8*F)-1;j(this,_,C,F,Ue,0)}let le=1,ve=0;for(this[C]=_&255;++ve<F&&(le*=256);)this[C+ve]=_/le&255;return C+F},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(_,C,F,te){if(_=+_,C=C>>>0,F=F>>>0,!te){const Ue=Math.pow(2,8*F)-1;j(this,_,C,F,Ue,0)}let le=F-1,ve=1;for(this[C+le]=_&255;--le>=0&&(ve*=256);)this[C+le]=_/ve&255;return C+F},s.prototype.writeUint8=s.prototype.writeUInt8=function(_,C,F){return _=+_,C=C>>>0,F||j(this,_,C,1,255,0),this[C]=_&255,C+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(_,C,F){return _=+_,C=C>>>0,F||j(this,_,C,2,65535,0),this[C]=_&255,this[C+1]=_>>>8,C+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(_,C,F){return _=+_,C=C>>>0,F||j(this,_,C,2,65535,0),this[C]=_>>>8,this[C+1]=_&255,C+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(_,C,F){return _=+_,C=C>>>0,F||j(this,_,C,4,4294967295,0),this[C+3]=_>>>24,this[C+2]=_>>>16,this[C+1]=_>>>8,this[C]=_&255,C+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(_,C,F){return _=+_,C=C>>>0,F||j(this,_,C,4,4294967295,0),this[C]=_>>>24,this[C+1]=_>>>16,this[C+2]=_>>>8,this[C+3]=_&255,C+4};function H(I,_,C,F,te){ke(_,F,te,I,C,7);let le=Number(_&BigInt(4294967295));I[C++]=le,le=le>>8,I[C++]=le,le=le>>8,I[C++]=le,le=le>>8,I[C++]=le;let ve=Number(_>>BigInt(32)&BigInt(4294967295));return I[C++]=ve,ve=ve>>8,I[C++]=ve,ve=ve>>8,I[C++]=ve,ve=ve>>8,I[C++]=ve,C}function G(I,_,C,F,te){ke(_,F,te,I,C,7);let le=Number(_&BigInt(4294967295));I[C+7]=le,le=le>>8,I[C+6]=le,le=le>>8,I[C+5]=le,le=le>>8,I[C+4]=le;let ve=Number(_>>BigInt(32)&BigInt(4294967295));return I[C+3]=ve,ve=ve>>8,I[C+2]=ve,ve=ve>>8,I[C+1]=ve,ve=ve>>8,I[C]=ve,C+8}s.prototype.writeBigUInt64LE=oe(function(_,C=0){return H(this,_,C,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=oe(function(_,C=0){return G(this,_,C,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(_,C,F,te){if(_=+_,C=C>>>0,!te){const We=Math.pow(2,8*F-1);j(this,_,C,F,We-1,-We)}let le=0,ve=1,Ue=0;for(this[C]=_&255;++le<F&&(ve*=256);)_<0&&Ue===0&&this[C+le-1]!==0&&(Ue=1),this[C+le]=(_/ve>>0)-Ue&255;return C+F},s.prototype.writeIntBE=function(_,C,F,te){if(_=+_,C=C>>>0,!te){const We=Math.pow(2,8*F-1);j(this,_,C,F,We-1,-We)}let le=F-1,ve=1,Ue=0;for(this[C+le]=_&255;--le>=0&&(ve*=256);)_<0&&Ue===0&&this[C+le+1]!==0&&(Ue=1),this[C+le]=(_/ve>>0)-Ue&255;return C+F},s.prototype.writeInt8=function(_,C,F){return _=+_,C=C>>>0,F||j(this,_,C,1,127,-128),_<0&&(_=255+_+1),this[C]=_&255,C+1},s.prototype.writeInt16LE=function(_,C,F){return _=+_,C=C>>>0,F||j(this,_,C,2,32767,-32768),this[C]=_&255,this[C+1]=_>>>8,C+2},s.prototype.writeInt16BE=function(_,C,F){return _=+_,C=C>>>0,F||j(this,_,C,2,32767,-32768),this[C]=_>>>8,this[C+1]=_&255,C+2},s.prototype.writeInt32LE=function(_,C,F){return _=+_,C=C>>>0,F||j(this,_,C,4,2147483647,-2147483648),this[C]=_&255,this[C+1]=_>>>8,this[C+2]=_>>>16,this[C+3]=_>>>24,C+4},s.prototype.writeInt32BE=function(_,C,F){return _=+_,C=C>>>0,F||j(this,_,C,4,2147483647,-2147483648),_<0&&(_=4294967295+_+1),this[C]=_>>>24,this[C+1]=_>>>16,this[C+2]=_>>>8,this[C+3]=_&255,C+4},s.prototype.writeBigInt64LE=oe(function(_,C=0){return H(this,_,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=oe(function(_,C=0){return G(this,_,C,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function K(I,_,C,F,te,le){if(C+F>I.length)throw new RangeError("Index out of range");if(C<0)throw new RangeError("Index out of range")}function ae(I,_,C,F,te){return _=+_,C=C>>>0,te||K(I,_,C,4),n.write(I,_,C,F,23,4),C+4}s.prototype.writeFloatLE=function(_,C,F){return ae(this,_,C,!0,F)},s.prototype.writeFloatBE=function(_,C,F){return ae(this,_,C,!1,F)};function pe(I,_,C,F,te){return _=+_,C=C>>>0,te||K(I,_,C,8),n.write(I,_,C,F,52,8),C+8}s.prototype.writeDoubleLE=function(_,C,F){return pe(this,_,C,!0,F)},s.prototype.writeDoubleBE=function(_,C,F){return pe(this,_,C,!1,F)},s.prototype.copy=function(_,C,F,te){if(!s.isBuffer(_))throw new TypeError("argument should be a Buffer");if(F||(F=0),!te&&te!==0&&(te=this.length),C>=_.length&&(C=_.length),C||(C=0),te>0&&te<F&&(te=F),te===F||_.length===0||this.length===0)return 0;if(C<0)throw new RangeError("targetStart out of bounds");if(F<0||F>=this.length)throw new RangeError("Index out of range");if(te<0)throw new RangeError("sourceEnd out of bounds");te>this.length&&(te=this.length),_.length-C<te-F&&(te=_.length-C+F);const le=te-F;return this===_&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(C,F,te):Uint8Array.prototype.set.call(_,this.subarray(F,te),C),le},s.prototype.fill=function(_,C,F,te){if(typeof _=="string"){if(typeof C=="string"?(te=C,C=0,F=this.length):typeof F=="string"&&(te=F,F=this.length),te!==void 0&&typeof te!="string")throw new TypeError("encoding must be a string");if(typeof te=="string"&&!s.isEncoding(te))throw new TypeError("Unknown encoding: "+te);if(_.length===1){const ve=_.charCodeAt(0);(te==="utf8"&&ve<128||te==="latin1")&&(_=ve)}}else typeof _=="number"?_=_&255:typeof _=="boolean"&&(_=Number(_));if(C<0||this.length<C||this.length<F)throw new RangeError("Out of range index");if(F<=C)return this;C=C>>>0,F=F===void 0?this.length:F>>>0,_||(_=0);let le;if(typeof _=="number")for(le=C;le<F;++le)this[le]=_;else{const ve=s.isBuffer(_)?_:s.from(_,te),Ue=ve.length;if(Ue===0)throw new TypeError('The value "'+_+'" is invalid for argument "value"');for(le=0;le<F-C;++le)this[le+C]=ve[le%Ue]}return this};const we={};function Ee(I,_,C){we[I]=function(F){_inherits3(le,F);var te=_createSuper3(le);function le(){var ve;return _classCallCheck3(this,le),ve=te.call(this),Object.defineProperty(_assertThisInitialized3(ve),"message",{value:_.apply(_assertThisInitialized3(ve),arguments),writable:!0,configurable:!0}),ve.name=`${ve.name} [${I}]`,ve.stack,delete ve.name,ve}return _createClass3(le,[{key:"code",get:function(){return I},set:function(ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ve,writable:!0})}},{key:"toString",value:function(){return`${this.name} [${I}]: ${this.message}`}}]),le}(C)}Ee("ERR_BUFFER_OUT_OF_BOUNDS",function(I){return I?`${I} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ee("ERR_INVALID_ARG_TYPE",function(I,_){return`The "${I}" argument must be of type number. Received type ${typeof _}`},TypeError),Ee("ERR_OUT_OF_RANGE",function(I,_,C){let F=`The value of "${I}" is out of range.`,te=C;return Number.isInteger(C)&&Math.abs(C)>2**32?te=xe(String(C)):typeof C=="bigint"&&(te=String(C),(C>BigInt(2)**BigInt(32)||C<-(BigInt(2)**BigInt(32)))&&(te=xe(te)),te+="n"),F+=` It must be ${_}. Received ${te}`,F},RangeError);function xe(I){let _="",C=I.length;const F=I[0]==="-"?1:0;for(;C>=F+4;C-=3)_=`_${I.slice(C-3,C)}${_}`;return`${I.slice(0,C)}${_}`}function He(I,_,C){Ye(_,"offset"),(I[_]===void 0||I[_+C]===void 0)&&je(_,I.length-(C+1))}function ke(I,_,C,F,te,le){if(I>C||I<_){const ve=typeof _=="bigint"?"n":"";let Ue;throw le>3?_===0||_===BigInt(0)?Ue=`>= 0${ve} and < 2${ve} ** ${(le+1)*8}${ve}`:Ue=`>= -(2${ve} ** ${(le+1)*8-1}${ve}) and < 2 ** ${(le+1)*8-1}${ve}`:Ue=`>= ${_}${ve} and <= ${C}${ve}`,new we.ERR_OUT_OF_RANGE("value",Ue,I)}He(F,te,le)}function Ye(I,_){if(typeof I!="number")throw new we.ERR_INVALID_ARG_TYPE(_,"number",I)}function je(I,_,C){throw Math.floor(I)!==I?(Ye(I,C),new we.ERR_OUT_OF_RANGE(C||"offset","an integer",I)):_<0?new we.ERR_BUFFER_OUT_OF_BOUNDS:new we.ERR_OUT_OF_RANGE(C||"offset",`>= ${C?1:0} and <= ${_}`,I)}const dt=/[^+/0-9A-Za-z-_]/g;function st(I){if(I=I.split("=")[0],I=I.trim().replace(dt,""),I.length<2)return"";for(;I.length%4!==0;)I=I+"=";return I}function qe(I,_){_=_||1/0;let C;const F=I.length;let te=null;const le=[];for(let ve=0;ve<F;++ve){if(C=I.charCodeAt(ve),C>55295&&C<57344){if(!te){if(C>56319){(_-=3)>-1&&le.push(239,191,189);continue}else if(ve+1===F){(_-=3)>-1&&le.push(239,191,189);continue}te=C;continue}if(C<56320){(_-=3)>-1&&le.push(239,191,189),te=C;continue}C=(te-55296<<10|C-56320)+65536}else te&&(_-=3)>-1&&le.push(239,191,189);if(te=null,C<128){if((_-=1)<0)break;le.push(C)}else if(C<2048){if((_-=2)<0)break;le.push(C>>6|192,C&63|128)}else if(C<65536){if((_-=3)<0)break;le.push(C>>12|224,C>>6&63|128,C&63|128)}else if(C<1114112){if((_-=4)<0)break;le.push(C>>18|240,C>>12&63|128,C>>6&63|128,C&63|128)}else throw new Error("Invalid code point")}return le}function bt(I){const _=[];for(let C=0;C<I.length;++C)_.push(I.charCodeAt(C)&255);return _}function yt(I,_){let C,F,te;const le=[];for(let ve=0;ve<I.length&&!((_-=2)<0);++ve)C=I.charCodeAt(ve),F=C>>8,te=C%256,le.push(te),le.push(F);return le}function Bt(I){return t.toByteArray(st(I))}function On(I,_,C,F){let te;for(te=0;te<F&&!(te+C>=_.length||te>=I.length);++te)_[te+C]=I[te];return te}function gt(I,_){return I instanceof _||I!=null&&I.constructor!=null&&I.constructor.name!=null&&I.constructor.name===_.name}function Oe(I){return I!==I}const ne=function(){const I="0123456789abcdef",_=new Array(256);for(let C=0;C<16;++C){const F=C*16;for(let te=0;te<16;++te)_[F+te]=I[C]+I[te]}return _}();function oe(I){return typeof BigInt>"u"?Te:I}function Te(){throw new Error("BigInt not supported")}})(K4);var Ds=In,gr=Sye,Q4=K4.Buffer;globalThis.__TYPEDARRAY_POOL||(globalThis.__TYPEDARRAY_POOL={UINT8:gr([32,0]),UINT16:gr([32,0]),UINT32:gr([32,0]),BIGUINT64:gr([32,0]),INT8:gr([32,0]),INT16:gr([32,0]),INT32:gr([32,0]),BIGINT64:gr([32,0]),FLOAT:gr([32,0]),DOUBLE:gr([32,0]),DATA:gr([32,0]),UINT8C:gr([32,0]),BUFFER:gr([32,0])});var Pye=typeof Uint8ClampedArray<"u",Rye=typeof BigUint64Array<"u",Nye=typeof BigInt64Array<"u",jn=globalThis.__TYPEDARRAY_POOL;jn.UINT8C||(jn.UINT8C=gr([32,0])),jn.BIGUINT64||(jn.BIGUINT64=gr([32,0])),jn.BIGINT64||(jn.BIGINT64=gr([32,0])),jn.BUFFER||(jn.BUFFER=gr([32,0]));var qv=jn.DATA,Xv=jn.BUFFER;Rt.free=function(t){if(Q4.isBuffer(t))Xv[Ds.log2(t.length)].push(t);else{if(Object.prototype.toString.call(t)!=="[object ArrayBuffer]"&&(t=t.buffer),!t)return;var n=t.length||t.byteLength,i=Ds.log2(n)|0;qv[i].push(t)}};function J4(e){if(!!e){var t=e.length||e.byteLength,n=Ds.log2(t);qv[n].push(e)}}function Mye(e){J4(e.buffer)}Rt.freeUint8=Rt.freeUint16=Rt.freeUint32=Rt.freeBigUint64=Rt.freeInt8=Rt.freeInt16=Rt.freeInt32=Rt.freeBigInt64=Rt.freeFloat32=Rt.freeFloat=Rt.freeFloat64=Rt.freeDouble=Rt.freeUint8Clamped=Rt.freeDataView=Mye,Rt.freeArrayBuffer=J4,Rt.freeBuffer=function(t){Xv[Ds.log2(t.length)].push(t)},Rt.malloc=function(t,n){if(n===void 0||n==="arraybuffer")return gi(t);switch(n){case"uint8":return yC(t);case"uint16":return e2(t);case"uint32":return t2(t);case"int8":return n2(t);case"int16":return r2(t);case"int32":return i2(t);case"float":case"float32":return a2(t);case"double":case"float64":return o2(t);case"uint8_clamped":return s2(t);case"bigint64":return u2(t);case"biguint64":return l2(t);case"buffer":return h2(t);case"data":case"dataview":return c2(t);default:return null}return null};function gi(t){var t=Ds.nextPow2(t),n=Ds.log2(t),i=qv[n];return i.length>0?i.pop():new ArrayBuffer(t)}Rt.mallocArrayBuffer=gi;function yC(e){return new Uint8Array(gi(e),0,e)}Rt.mallocUint8=yC;function e2(e){return new Uint16Array(gi(2*e),0,e)}Rt.mallocUint16=e2;function t2(e){return new Uint32Array(gi(4*e),0,e)}Rt.mallocUint32=t2;function n2(e){return new Int8Array(gi(e),0,e)}Rt.mallocInt8=n2;function r2(e){return new Int16Array(gi(2*e),0,e)}Rt.mallocInt16=r2;function i2(e){return new Int32Array(gi(4*e),0,e)}Rt.mallocInt32=i2;function a2(e){return new Float32Array(gi(4*e),0,e)}Rt.mallocFloat32=Rt.mallocFloat=a2;function o2(e){return new Float64Array(gi(8*e),0,e)}Rt.mallocFloat64=Rt.mallocDouble=o2;function s2(e){return Pye?new Uint8ClampedArray(gi(e),0,e):yC(e)}Rt.mallocUint8Clamped=s2;function l2(e){return Rye?new BigUint64Array(gi(8*e),0,e):null}Rt.mallocBigUint64=l2;function u2(e){return Nye?new BigInt64Array(gi(8*e),0,e):null}Rt.mallocBigInt64=u2;function c2(e){return new DataView(gi(e),0,e)}Rt.mallocDataView=c2;function h2(e){e=Ds.nextPow2(e);var t=Ds.log2(e),n=Xv[t];return n.length>0?n.pop():new Q4(e)}Rt.mallocBuffer=h2,Rt.clearCache=function(){for(var t=0;t<32;++t)jn.UINT8[t].length=0,jn.UINT16[t].length=0,jn.UINT32[t].length=0,jn.INT8[t].length=0,jn.INT16[t].length=0,jn.INT32[t].length=0,jn.FLOAT[t].length=0,jn.DOUBLE[t].length=0,jn.BIGUINT64[t].length=0,jn.BIGINT64[t].length=0,jn.UINT8C[t].length=0,qv[t].length=0,Xv[t].length=0};var Lye=Bye,Kv=32;function Bye(e,t){t<=4*Kv?Zv(0,t-1,e):Jv(0,t-1,e)}function Zv(e,t,n){for(var i=2*(e+1),r=e+1;r<=t;++r){for(var a=n[i++],o=n[i++],s=r,u=i-2;s-- >e;){var c=n[u-2],l=n[u-1];if(c<a)break;if(c===a&&l<o)break;n[u]=c,n[u+1]=l,u-=2}n[u]=a,n[u+1]=o}}function f2(e,t,n){e*=2,t*=2;var i=n[e],r=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=i,n[t+1]=r}function d2(e,t,n){e*=2,t*=2,n[e]=n[t],n[e+1]=n[t+1]}function Fye(e,t,n,i){e*=2,t*=2,n*=2;var r=i[e],a=i[e+1];i[e]=i[t],i[e+1]=i[t+1],i[t]=i[n],i[t+1]=i[n+1],i[n]=r,i[n+1]=a}function p2(e,t,n,i,r){e*=2,t*=2,r[e]=r[t],r[t]=n,r[e+1]=r[t+1],r[t+1]=i}function Bo(e,t,n){e*=2,t*=2;var i=n[e],r=n[t];return i<r?!1:i===r?n[e+1]>n[t+1]:!0}function Qv(e,t,n,i){e*=2;var r=i[e];return r<t?!0:r===t?i[e+1]<n:!1}function Jv(e,t,n){var i=(t-e+1)/6|0,r=e+i,a=t-i,o=e+t>>1,s=o-i,u=o+i,c=r,l=s,f=o,h=u,d=a,p=e+1,m=t-1,g=0;Bo(c,l,n)&&(g=c,c=l,l=g),Bo(h,d,n)&&(g=h,h=d,d=g),Bo(c,f,n)&&(g=c,c=f,f=g),Bo(l,f,n)&&(g=l,l=f,f=g),Bo(c,h,n)&&(g=c,c=h,h=g),Bo(f,h,n)&&(g=f,f=h,h=g),Bo(l,d,n)&&(g=l,l=d,d=g),Bo(l,f,n)&&(g=l,l=f,f=g),Bo(h,d,n)&&(g=h,h=d,d=g);for(var v=n[2*l],E=n[2*l+1],y=n[2*h],T=n[2*h+1],b=2*c,S=2*f,w=2*d,D=2*r,R=2*o,M=2*a,k=0;k<2;++k){var L=n[b+k],$=n[S+k],P=n[w+k];n[D+k]=L,n[R+k]=$,n[M+k]=P}d2(s,e,n),d2(u,t,n);for(var B=p;B<=m;++B)if(Qv(B,v,E,n))B!==p&&f2(B,p,n),++p;else if(!Qv(B,y,T,n))for(;;)if(Qv(m,y,T,n)){Qv(m,v,E,n)?(Fye(B,p,m,n),++p,--m):(f2(B,m,n),--m);break}else{if(--m<B)break;continue}p2(e,p-1,v,E,n),p2(t,m+1,y,T,n),p-2-e<=Kv?Zv(e,p-2,n):Jv(e,p-2,n),t-(m+2)<=Kv?Zv(m+2,t,n):Jv(m+2,t,n),m-p<=Kv?Zv(p,m,n):Jv(p,m,n)}var m2={init:$ye,sweepBipartite:Uye,sweepComplete:Gye,scanBipartite:zye,scanComplete:jye},Vn=Rt,Hye=In,ey=Lye,Oi=1<<28,Vl=1024,vr=Vn.mallocInt32(Vl),Fo=Vn.mallocInt32(Vl),Ho=Vn.mallocInt32(Vl),Yl=Vn.mallocInt32(Vl),Zc=Vn.mallocInt32(Vl),sp=Vn.mallocInt32(Vl),It=Vn.mallocDouble(Vl*8);function $ye(e){var t=Hye.nextPow2(e);vr.length<t&&(Vn.free(vr),vr=Vn.mallocInt32(t)),Fo.length<t&&(Vn.free(Fo),Fo=Vn.mallocInt32(t)),Ho.length<t&&(Vn.free(Ho),Ho=Vn.mallocInt32(t)),Yl.length<t&&(Vn.free(Yl),Yl=Vn.mallocInt32(t)),Zc.length<t&&(Vn.free(Zc),Zc=Vn.mallocInt32(t)),sp.length<t&&(Vn.free(sp),sp=Vn.mallocInt32(t));var n=8*t;It.length<n&&(Vn.free(It),It=Vn.mallocDouble(n))}function Qc(e,t,n,i){var r=t[i],a=e[n-1];e[r]=a,t[a]=r}function Jc(e,t,n,i){e[n]=i,t[i]=n}function Uye(e,t,n,i,r,a,o,s,u,c){for(var l=0,f=2*e,h=e-1,d=f-1,p=n;p<i;++p){var m=a[p],g=f*p;It[l++]=r[g+h],It[l++]=-(m+1),It[l++]=r[g+d],It[l++]=m}for(var p=o;p<s;++p){var m=c[p]+Oi,v=f*p;It[l++]=u[v+h],It[l++]=-m,It[l++]=u[v+d],It[l++]=m}var E=l>>>1;ey(It,E);for(var y=0,T=0,p=0;p<E;++p){var b=It[2*p+1]|0;if(b>=Oi)b=b-Oi|0,Qc(Ho,Yl,T--,b);else if(b>=0)Qc(vr,Fo,y--,b);else if(b<=-Oi){b=-b-Oi|0;for(var S=0;S<y;++S){var w=t(vr[S],b);if(w!==void 0)return w}Jc(Ho,Yl,T++,b)}else{b=-b-1|0;for(var S=0;S<T;++S){var w=t(b,Ho[S]);if(w!==void 0)return w}Jc(vr,Fo,y++,b)}}}function Gye(e,t,n,i,r,a,o,s,u,c){for(var l=0,f=2*e,h=e-1,d=f-1,p=n;p<i;++p){var m=a[p]+1<<1,g=f*p;It[l++]=r[g+h],It[l++]=-m,It[l++]=r[g+d],It[l++]=m}for(var p=o;p<s;++p){var m=c[p]+1<<1,v=f*p;It[l++]=u[v+h],It[l++]=-m|1,It[l++]=u[v+d],It[l++]=m|1}var E=l>>>1;ey(It,E);for(var y=0,T=0,b=0,p=0;p<E;++p){var S=It[2*p+1]|0,w=S&1;if(p<E-1&&S>>1===It[2*p+3]>>1&&(w=2,p+=1),S<0){for(var D=-(S>>1)-1,R=0;R<b;++R){var M=t(Zc[R],D);if(M!==void 0)return M}if(w!==0)for(var R=0;R<y;++R){var M=t(vr[R],D);if(M!==void 0)return M}if(w!==1)for(var R=0;R<T;++R){var M=t(Ho[R],D);if(M!==void 0)return M}w===0?Jc(vr,Fo,y++,D):w===1?Jc(Ho,Yl,T++,D):w===2&&Jc(Zc,sp,b++,D)}else{var D=(S>>1)-1;w===0?Qc(vr,Fo,y--,D):w===1?Qc(Ho,Yl,T--,D):w===2&&Qc(Zc,sp,b--,D)}}}function zye(e,t,n,i,r,a,o,s,u,c,l,f){var h=0,d=2*e,p=t,m=t+e,g=1,v=1;i?v=Oi:g=Oi;for(var E=r;E<a;++E){var y=E+g,T=d*E;It[h++]=o[T+p],It[h++]=-y,It[h++]=o[T+m],It[h++]=y}for(var E=u;E<c;++E){var y=E+v,b=d*E;It[h++]=l[b+p],It[h++]=-y}var S=h>>>1;ey(It,S);for(var w=0,E=0;E<S;++E){var D=It[2*E+1]|0;if(D<0){var y=-D,R=!1;if(y>=Oi?(R=!i,y-=Oi):(R=!!i,y-=1),R)Jc(vr,Fo,w++,y);else{var M=f[y],k=d*y,L=l[k+t+1],$=l[k+t+1+e];e:for(var P=0;P<w;++P){var B=vr[P],X=d*B;if(!($<o[X+t+1]||o[X+t+1+e]<L)){for(var ee=t+2;ee<e;++ee)if(l[k+ee+e]<o[X+ee]||o[X+ee+e]<l[k+ee])continue e;var se=s[B],fe;if(i?fe=n(M,se):fe=n(se,M),fe!==void 0)return fe}}}}else Qc(vr,Fo,w--,D-g)}}function jye(e,t,n,i,r,a,o,s,u,c,l){for(var f=0,h=2*e,d=t,p=t+e,m=i;m<r;++m){var g=m+Oi,v=h*m;It[f++]=a[v+d],It[f++]=-g,It[f++]=a[v+p],It[f++]=g}for(var m=s;m<u;++m){var g=m+1,E=h*m;It[f++]=c[E+d],It[f++]=-g}var y=f>>>1;ey(It,y);for(var T=0,m=0;m<y;++m){var b=It[2*m+1]|0;if(b<0){var g=-b;if(g>=Oi)vr[T++]=g-Oi;else{g-=1;var S=l[g],w=h*g,D=c[w+t+1],R=c[w+t+1+e];e:for(var M=0;M<T;++M){var k=vr[M],L=o[k];if(L===S)break;var $=h*k;if(!(R<a[$+t+1]||a[$+t+1+e]<D)){for(var P=t+2;P<e;++P)if(c[w+P+e]<a[$+P]||a[$+P+e]<c[w+P])continue e;var B=n(L,S);if(B!==void 0)return B}}}}else{for(var g=b-Oi,M=T-1;M>=0;--M)if(vr[M]===g){for(var P=M+1;P<T;++P)vr[P-1]=vr[P];break}--T}}}var TC={},Wl="d",eh="ax",g2="vv",EC="fp",lp="es",ty="rs",bC="re",up="rb",v2="ri",th="rp",ny="bs",_C="be",cp="bb",y2="bi",nh="bp",SC="rv",AC="Q",CC=[Wl,eh,g2,ty,bC,up,v2,ny,_C,cp,y2];function Vye(e,t,n){var i="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),r=["function ",i,"(",CC.join(),"){","var ",lp,"=2*",Wl,";"],a="for(var i="+ty+","+th+"="+lp+"*"+ty+";i<"+bC+";++i,"+th+"+="+lp+"){var x0="+up+"["+eh+"+"+th+"],x1="+up+"["+eh+"+"+th+"+"+Wl+"],xi="+v2+"[i];",o="for(var j="+ny+","+nh+"="+lp+"*"+ny+";j<"+_C+";++j,"+nh+"+="+lp+"){var y0="+cp+"["+eh+"+"+nh+"],"+(n?"y1="+cp+"["+eh+"+"+nh+"+"+Wl+"],":"")+"yi="+y2+"[j];";return e?r.push(a,AC,":",o):r.push(o,AC,":",a),n?r.push("if(y1<x0||x1<y0)continue;"):t?r.push("if(y0<=x0||x1<y0)continue;"):r.push("if(y0<x0||x1<y0)continue;"),r.push("for(var k="+eh+"+1;k<"+Wl+";++k){var r0="+up+"[k+"+th+"],r1="+up+"[k+"+Wl+"+"+th+"],b0="+cp+"[k+"+nh+"],b1="+cp+"[k+"+Wl+"+"+nh+"];if(r1<b0||b1<r0)continue "+AC+";}var "+SC+"="+g2+"("),t?r.push("yi,xi"):r.push("xi,yi"),r.push(");if("+SC+"!==void 0)return "+SC+";}}}"),{name:i,code:r.join("")}}function T2(e){var t="bruteForce"+(e?"Full":"Partial"),n=[],i=CC.slice();e||i.splice(3,0,EC);var r=["function "+t+"("+i.join()+"){"];function a(u,c){var l=Vye(u,c,e);n.push(l.code),r.push("return "+l.name+"("+CC.join()+");")}r.push("if("+bC+"-"+ty+">"+_C+"-"+ny+"){"),e?(a(!0,!1),r.push("}else{"),a(!1,!1)):(r.push("if("+EC+"){"),a(!0,!0),r.push("}else{"),a(!0,!1),r.push("}}else{if("+EC+"){"),a(!1,!0),r.push("}else{"),a(!1,!1),r.push("}")),r.push("}}return "+t);var o=n.join("")+r.join(""),s=new Function(o);return s()}TC.partial=T2(!1),TC.full=T2(!0);var E2=Wye,Yye="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";function Wye(e,t){var n="abcdef".split("").concat(t),i=[];return e.indexOf("lo")>=0&&i.push("lo=e[k+n]"),e.indexOf("hi")>=0&&i.push("hi=e[k+o]"),n.push(Yye.replace("_",i.join()).replace("$",e)),Function.apply(void 0,n)}var qye=Qye,Xye=E2,b2=Xye("lo<p0",["p0"]),Kye=8;function Zye(e,t,n,i,r,a){for(var o=2*e,s=o*(n+1)+t,u=n+1;u<i;++u,s+=o)for(var c=r[s],l=u,f=o*(u-1);l>n&&r[f+t]>c;--l,f-=o){for(var h=f,d=f+o,p=0;p<o;++p,++h,++d){var m=r[h];r[h]=r[d],r[d]=m}var g=a[l];a[l]=a[l-1],a[l-1]=g}}function Qye(e,t,n,i,r,a){if(i<=n+1)return n;for(var o=n,s=i,u=i+n>>>1,c=2*e,l=u,f=r[c*u+t];o<s;){if(s-o<Kye){Zye(e,t,o,s,r,a),f=r[c*u+t];break}var h=s-o,d=Math.random()*h+o|0,p=r[c*d+t],m=Math.random()*h+o|0,g=r[c*m+t],v=Math.random()*h+o|0,E=r[c*v+t];p<=g?E>=g?(l=m,f=g):p>=E?(l=d,f=p):(l=v,f=E):g>=E?(l=m,f=g):E>=p?(l=d,f=p):(l=v,f=E);for(var b=c*(s-1),S=c*l,y=0;y<c;++y,++b,++S){var T=r[b];r[b]=r[S],r[S]=T}var w=a[s-1];a[s-1]=a[l],a[l]=w,l=b2(e,t,o,s-1,r,a,f);for(var b=c*(s-1),S=c*l,y=0;y<c;++y,++b,++S){var T=r[b];r[b]=r[S],r[S]=T}var w=a[s-1];if(a[s-1]=a[l],a[l]=w,u<l){for(s=l-1;o<s&&r[c*(s-1)+t]===f;)s-=1;s+=1}else if(l<u)for(o=l+1;o<s&&r[c*o+t]===f;)o+=1;else break}return b2(e,t,n,u,r,a,r[c*u+t])}var Jye=fTe,rh=Rt,DC=In,_2=TC,eTe=_2.partial,tTe=_2.full,ws=m2,nTe=qye,ih=E2,S2=128,rTe=1<<22,iTe=1<<22,aTe=ih("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),A2=ih("lo===p0",["p0"]),oTe=ih("lo<p0",["p0"]),sTe=ih("hi<=p0",["p0"]),C2=ih("lo<=p0&&p0<=hi",["p0"]),lTe=ih("lo<p0&&p0<=hi",["p0"]),wC=6,IC=2,D2=1024,ei=rh.mallocInt32(D2),ql=rh.mallocDouble(D2);function uTe(e,t){var n=8*DC.log2(t+1)*(e+1)|0,i=DC.nextPow2(wC*n);ei.length<i&&(rh.free(ei),ei=rh.mallocInt32(i));var r=DC.nextPow2(IC*n);ql.length<r&&(rh.free(ql),ql=rh.mallocDouble(r))}function ya(e,t,n,i,r,a,o,s,u){var c=wC*e;ei[c]=t,ei[c+1]=n,ei[c+2]=i,ei[c+3]=r,ei[c+4]=a,ei[c+5]=o;var l=IC*e;ql[l]=s,ql[l+1]=u}function cTe(e,t,n,i,r,a,o,s,u,c,l){var f=2*e,h=u*f,d=c[h+t];e:for(var p=r,m=r*f;p<a;++p,m+=f){var g=o[m+t],v=o[m+t+e];if(!(d<g||v<d)&&!(i&&d===g)){for(var E=s[p],y=t+1;y<e;++y){var g=o[m+y],v=o[m+y+e],T=c[h+y],b=c[h+y+e];if(v<T||b<g)continue e}var S;if(i?S=n(l,E):S=n(E,l),S!==void 0)return S}}}function hTe(e,t,n,i,r,a,o,s,u,c){var l=2*e,f=s*l,h=u[f+t];e:for(var d=i,p=i*l;d<r;++d,p+=l){var m=o[d];if(m!==c){var g=a[p+t],v=a[p+t+e];if(!(h<g||v<h)){for(var E=t+1;E<e;++E){var g=a[p+E],v=a[p+E+e],y=u[f+E],T=u[f+E+e];if(v<y||T<g)continue e}var b=n(m,c);if(b!==void 0)return b}}}}function fTe(e,t,n,i,r,a,o,s,u){uTe(e,i+o);var c=0,l=2*e,f;for(ya(c++,0,0,i,0,o,n?16:0,-1/0,1/0),n||ya(c++,0,0,o,0,i,1,-1/0,1/0);c>0;){c-=1;var h=c*wC,d=ei[h],p=ei[h+1],m=ei[h+2],g=ei[h+3],v=ei[h+4],E=ei[h+5],y=c*IC,T=ql[y],b=ql[y+1],S=E&1,w=!!(E&16),D=r,R=a,M=s,k=u;if(S&&(D=s,R=u,M=r,k=a),!(E&2&&(m=oTe(e,d,p,m,D,R,b),p>=m))&&!(E&4&&(p=sTe(e,d,p,m,D,R,T),p>=m))){var L=m-p,$=v-g;if(w){if(e*L*(L+$)<iTe){if(f=ws.scanComplete(e,d,t,p,m,D,R,g,v,M,k),f!==void 0)return f;continue}}else if(e*Math.min(L,$)<S2){if(f=eTe(e,d,t,S,p,m,D,R,g,v,M,k),f!==void 0)return f;continue}else if(e*L*$<rTe){if(f=ws.scanBipartite(e,d,t,S,p,m,D,R,g,v,M,k),f!==void 0)return f;continue}var P=aTe(e,d,p,m,D,R,T,b);if(p<P)if(e*(P-p)<S2){if(f=tTe(e,d+1,t,p,P,D,R,g,v,M,k),f!==void 0)return f}else if(d===e-2){if(S?f=ws.sweepBipartite(e,t,g,v,M,k,p,P,D,R):f=ws.sweepBipartite(e,t,p,P,D,R,g,v,M,k),f!==void 0)return f}else ya(c++,d+1,p,P,g,v,S,-1/0,1/0),ya(c++,d+1,g,v,p,P,S^1,-1/0,1/0);if(P<m){var B=nTe(e,d,g,v,M,k),X=M[l*B+d],ee=A2(e,d,B,v,M,k,X);if(ee<v&&ya(c++,d,P,m,ee,v,(S|4)+(w?16:0),X,b),g<B&&ya(c++,d,P,m,g,B,(S|2)+(w?16:0),T,X),B+1===ee){if(w?f=hTe(e,d,t,P,m,D,R,B,M,k[B]):f=cTe(e,d,t,S,P,m,D,R,B,M,k[B]),f!==void 0)return f}else if(B<ee){var se;if(w){if(se=C2(e,d,P,m,D,R,X),P<se){var fe=A2(e,d,P,se,D,R,X);if(d===e-2){if(P<fe&&(f=ws.sweepComplete(e,t,P,fe,D,R,B,ee,M,k),f!==void 0)||fe<se&&(f=ws.sweepBipartite(e,t,fe,se,D,R,B,ee,M,k),f!==void 0))return f}else P<fe&&ya(c++,d+1,P,fe,B,ee,16,-1/0,1/0),fe<se&&(ya(c++,d+1,fe,se,B,ee,0,-1/0,1/0),ya(c++,d+1,B,ee,fe,se,1,-1/0,1/0))}}else S?se=lTe(e,d,P,m,D,R,X):se=C2(e,d,P,m,D,R,X),P<se&&(d===e-2?S?f=ws.sweepBipartite(e,t,B,ee,M,k,P,se,D,R):f=ws.sweepBipartite(e,t,P,se,D,R,B,ee,M,k):(ya(c++,d+1,P,se,B,ee,S,-1/0,1/0),ya(c++,d+1,B,ee,P,se,S^1,-1/0,1/0)))}}}}}var hp=vTe,Is=Rt,ry=m2,dTe=Jye;function pTe(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function w2(e,t,n,i){for(var r=0,a=0,o=0,s=e.length;o<s;++o){var u=e[o];if(!pTe(t,u)){for(var c=0;c<2*t;++c)n[r++]=u[c];i[a++]=o}}return a}function iy(e,t,n,i){var r=e.length,a=t.length;if(!(r<=0||a<=0)){var o=e[0].length>>>1;if(!(o<=0)){var s,u=Is.mallocDouble(2*o*r),c=Is.mallocInt32(r);if(r=w2(e,o,u,c),r>0){if(o===1&&i)ry.init(r),s=ry.sweepComplete(o,n,0,r,u,c,0,r,u,c);else{var l=Is.mallocDouble(2*o*a),f=Is.mallocInt32(a);a=w2(t,o,l,f),a>0&&(ry.init(r+a),o===1?s=ry.sweepBipartite(o,n,0,r,u,c,0,a,l,f):s=dTe(o,n,i,r,u,c,a,l,f),Is.free(l),Is.free(f))}Is.free(u),Is.free(c)}return s}}}var fp;function I2(e,t){fp.push([e,t])}function mTe(e){return fp=[],iy(e,e,I2,!0),fp}function gTe(e,t){return fp=[],iy(e,t,I2,!1),fp}function vTe(e,t,n){switch(arguments.length){case 1:return mTe(e);case 2:return typeof t=="function"?iy(e,e,t,!0):gTe(e,t);case 3:return iy(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}}var k2={exports:{}},O2=yTe,x2=+(Math.pow(2,27)+1);function yTe(e,t,n){var i=e*t,r=x2*e,a=r-e,o=r-a,s=e-o,u=x2*t,c=u-t,l=u-c,f=t-l,h=i-o*l,d=h-s*l,p=d-o*f,m=s*f-p;return n?(n[0]=m,n[1]=i,n):[m,i]}var TTe=bTe;function ETe(e,t){var n=e+t,i=n-e,r=n-i,a=t-i,o=e-r,s=o+a;return s?[s,n]:[n]}function bTe(e,t){var n=e.length|0,i=t.length|0;if(n===1&&i===1)return ETe(e[0],t[0]);var r=n+i,a=new Array(r),o=0,s=0,u=0,c=Math.abs,l=e[s],f=c(l),h=t[u],d=c(h),p,m;f<d?(m=l,s+=1,s<n&&(l=e[s],f=c(l))):(m=h,u+=1,u<i&&(h=t[u],d=c(h))),s<n&&f<d||u>=i?(p=l,s+=1,s<n&&(l=e[s],f=c(l))):(p=h,u+=1,u<i&&(h=t[u],d=c(h)));for(var g=p+m,v=g-p,E=m-v,y=E,T=g,b,S,w,D,R;s<n&&u<i;)f<d?(p=l,s+=1,s<n&&(l=e[s],f=c(l))):(p=h,u+=1,u<i&&(h=t[u],d=c(h))),m=y,g=p+m,v=g-p,E=m-v,E&&(a[o++]=E),b=T+g,S=b-T,w=b-S,D=g-S,R=T-w,y=R+D,T=b;for(;s<n;)p=l,m=y,g=p+m,v=g-p,E=m-v,E&&(a[o++]=E),b=T+g,S=b-T,w=b-S,D=g-S,R=T-w,y=R+D,T=b,s+=1,s<n&&(l=e[s]);for(;u<i;)p=h,m=y,g=p+m,v=g-p,E=m-v,E&&(a[o++]=E),b=T+g,S=b-T,w=b-S,D=g-S,R=T-w,y=R+D,T=b,u+=1,u<i&&(h=t[u]);return y&&(a[o++]=y),T&&(a[o++]=T),o||(a[o++]=0),a.length=o,a}var _Te=STe;function STe(e,t,n){var i=e+t,r=i-e,a=i-r,o=t-r,s=e-a;return n?(n[0]=s+o,n[1]=i,n):[s+o,i]}var kC=O2,ATe=_Te,CTe=DTe;function DTe(e,t){var n=e.length;if(n===1){var i=kC(e[0],t);return i[0]?i:[i[1]]}var r=new Array(2*n),a=[.1,.1],o=[.1,.1],s=0;kC(e[0],t,a),a[0]&&(r[s++]=a[0]);for(var u=1;u<n;++u){kC(e[u],t,o);var c=a[1];ATe(c,o[0],a),a[0]&&(r[s++]=a[0]);var l=o[1],f=a[1],h=l+f,d=h-l,p=f-d;a[1]=h,p&&(r[s++]=p)}return a[1]&&(r[s++]=a[1]),s===0&&(r[s++]=0),r.length=s,r}var wTe=kTe;function ITe(e,t){var n=e+t,i=n-e,r=n-i,a=t-i,o=e-r,s=o+a;return s?[s,n]:[n]}function kTe(e,t){var n=e.length|0,i=t.length|0;if(n===1&&i===1)return ITe(e[0],-t[0]);var r=n+i,a=new Array(r),o=0,s=0,u=0,c=Math.abs,l=e[s],f=c(l),h=-t[u],d=c(h),p,m;f<d?(m=l,s+=1,s<n&&(l=e[s],f=c(l))):(m=h,u+=1,u<i&&(h=-t[u],d=c(h))),s<n&&f<d||u>=i?(p=l,s+=1,s<n&&(l=e[s],f=c(l))):(p=h,u+=1,u<i&&(h=-t[u],d=c(h)));for(var g=p+m,v=g-p,E=m-v,y=E,T=g,b,S,w,D,R;s<n&&u<i;)f<d?(p=l,s+=1,s<n&&(l=e[s],f=c(l))):(p=h,u+=1,u<i&&(h=-t[u],d=c(h))),m=y,g=p+m,v=g-p,E=m-v,E&&(a[o++]=E),b=T+g,S=b-T,w=b-S,D=g-S,R=T-w,y=R+D,T=b;for(;s<n;)p=l,m=y,g=p+m,v=g-p,E=m-v,E&&(a[o++]=E),b=T+g,S=b-T,w=b-S,D=g-S,R=T-w,y=R+D,T=b,s+=1,s<n&&(l=e[s]);for(;u<i;)p=h,m=y,g=p+m,v=g-p,E=m-v,E&&(a[o++]=E),b=T+g,S=b-T,w=b-S,D=g-S,R=T-w,y=R+D,T=b,u+=1,u<i&&(h=-t[u]);return y&&(a[o++]=y),T&&(a[o++]=T),o||(a[o++]=0),a.length=o,a}(function(e){var t=O2,n=TTe,i=CTe,r=wTe,a=5,o=11102230246251565e-32,s=(3+16*o)*o,u=(7+56*o)*o;function c(y,T,b,S){return function(D,R,M){var k=y(y(T(R[1],M[0]),T(-M[1],R[0])),y(T(D[1],R[0]),T(-R[1],D[0]))),L=y(T(D[1],M[0]),T(-M[1],D[0])),$=S(k,L);return $[$.length-1]}}function l(y,T,b,S){return function(D,R,M,k){var L=y(y(b(y(T(M[1],k[0]),T(-k[1],M[0])),R[2]),y(b(y(T(R[1],k[0]),T(-k[1],R[0])),-M[2]),b(y(T(R[1],M[0]),T(-M[1],R[0])),k[2]))),y(b(y(T(R[1],k[0]),T(-k[1],R[0])),D[2]),y(b(y(T(D[1],k[0]),T(-k[1],D[0])),-R[2]),b(y(T(D[1],R[0]),T(-R[1],D[0])),k[2])))),$=y(y(b(y(T(M[1],k[0]),T(-k[1],M[0])),D[2]),y(b(y(T(D[1],k[0]),T(-k[1],D[0])),-M[2]),b(y(T(D[1],M[0]),T(-M[1],D[0])),k[2]))),y(b(y(T(R[1],M[0]),T(-M[1],R[0])),D[2]),y(b(y(T(D[1],M[0]),T(-M[1],D[0])),-R[2]),b(y(T(D[1],R[0]),T(-R[1],D[0])),M[2])))),P=S(L,$);return P[P.length-1]}}function f(y,T,b,S){return function(D,R,M,k,L){var $=y(y(y(b(y(b(y(T(k[1],L[0]),T(-L[1],k[0])),M[2]),y(b(y(T(M[1],L[0]),T(-L[1],M[0])),-k[2]),b(y(T(M[1],k[0]),T(-k[1],M[0])),L[2]))),R[3]),y(b(y(b(y(T(k[1],L[0]),T(-L[1],k[0])),R[2]),y(b(y(T(R[1],L[0]),T(-L[1],R[0])),-k[2]),b(y(T(R[1],k[0]),T(-k[1],R[0])),L[2]))),-M[3]),b(y(b(y(T(M[1],L[0]),T(-L[1],M[0])),R[2]),y(b(y(T(R[1],L[0]),T(-L[1],R[0])),-M[2]),b(y(T(R[1],M[0]),T(-M[1],R[0])),L[2]))),k[3]))),y(b(y(b(y(T(M[1],k[0]),T(-k[1],M[0])),R[2]),y(b(y(T(R[1],k[0]),T(-k[1],R[0])),-M[2]),b(y(T(R[1],M[0]),T(-M[1],R[0])),k[2]))),-L[3]),y(b(y(b(y(T(k[1],L[0]),T(-L[1],k[0])),R[2]),y(b(y(T(R[1],L[0]),T(-L[1],R[0])),-k[2]),b(y(T(R[1],k[0]),T(-k[1],R[0])),L[2]))),D[3]),b(y(b(y(T(k[1],L[0]),T(-L[1],k[0])),D[2]),y(b(y(T(D[1],L[0]),T(-L[1],D[0])),-k[2]),b(y(T(D[1],k[0]),T(-k[1],D[0])),L[2]))),-R[3])))),y(y(b(y(b(y(T(R[1],L[0]),T(-L[1],R[0])),D[2]),y(b(y(T(D[1],L[0]),T(-L[1],D[0])),-R[2]),b(y(T(D[1],R[0]),T(-R[1],D[0])),L[2]))),k[3]),y(b(y(b(y(T(R[1],k[0]),T(-k[1],R[0])),D[2]),y(b(y(T(D[1],k[0]),T(-k[1],D[0])),-R[2]),b(y(T(D[1],R[0]),T(-R[1],D[0])),k[2]))),-L[3]),b(y(b(y(T(M[1],k[0]),T(-k[1],M[0])),R[2]),y(b(y(T(R[1],k[0]),T(-k[1],R[0])),-M[2]),b(y(T(R[1],M[0]),T(-M[1],R[0])),k[2]))),D[3]))),y(b(y(b(y(T(M[1],k[0]),T(-k[1],M[0])),D[2]),y(b(y(T(D[1],k[0]),T(-k[1],D[0])),-M[2]),b(y(T(D[1],M[0]),T(-M[1],D[0])),k[2]))),-R[3]),y(b(y(b(y(T(R[1],k[0]),T(-k[1],R[0])),D[2]),y(b(y(T(D[1],k[0]),T(-k[1],D[0])),-R[2]),b(y(T(D[1],R[0]),T(-R[1],D[0])),k[2]))),M[3]),b(y(b(y(T(R[1],M[0]),T(-M[1],R[0])),D[2]),y(b(y(T(D[1],M[0]),T(-M[1],D[0])),-R[2]),b(y(T(D[1],R[0]),T(-R[1],D[0])),M[2]))),-k[3]))))),P=y(y(y(b(y(b(y(T(k[1],L[0]),T(-L[1],k[0])),M[2]),y(b(y(T(M[1],L[0]),T(-L[1],M[0])),-k[2]),b(y(T(M[1],k[0]),T(-k[1],M[0])),L[2]))),D[3]),b(y(b(y(T(k[1],L[0]),T(-L[1],k[0])),D[2]),y(b(y(T(D[1],L[0]),T(-L[1],D[0])),-k[2]),b(y(T(D[1],k[0]),T(-k[1],D[0])),L[2]))),-M[3])),y(b(y(b(y(T(M[1],L[0]),T(-L[1],M[0])),D[2]),y(b(y(T(D[1],L[0]),T(-L[1],D[0])),-M[2]),b(y(T(D[1],M[0]),T(-M[1],D[0])),L[2]))),k[3]),b(y(b(y(T(M[1],k[0]),T(-k[1],M[0])),D[2]),y(b(y(T(D[1],k[0]),T(-k[1],D[0])),-M[2]),b(y(T(D[1],M[0]),T(-M[1],D[0])),k[2]))),-L[3]))),y(y(b(y(b(y(T(M[1],L[0]),T(-L[1],M[0])),R[2]),y(b(y(T(R[1],L[0]),T(-L[1],R[0])),-M[2]),b(y(T(R[1],M[0]),T(-M[1],R[0])),L[2]))),D[3]),b(y(b(y(T(M[1],L[0]),T(-L[1],M[0])),D[2]),y(b(y(T(D[1],L[0]),T(-L[1],D[0])),-M[2]),b(y(T(D[1],M[0]),T(-M[1],D[0])),L[2]))),-R[3])),y(b(y(b(y(T(R[1],L[0]),T(-L[1],R[0])),D[2]),y(b(y(T(D[1],L[0]),T(-L[1],D[0])),-R[2]),b(y(T(D[1],R[0]),T(-R[1],D[0])),L[2]))),M[3]),b(y(b(y(T(R[1],M[0]),T(-M[1],R[0])),D[2]),y(b(y(T(D[1],M[0]),T(-M[1],D[0])),-R[2]),b(y(T(D[1],R[0]),T(-R[1],D[0])),M[2]))),-L[3])))),B=S($,P);return B[B.length-1]}}function h(y){var T=y===3?c:y===4?l:f;return T(n,t,i,r)}var d=h(3),p=h(4),m=[function(){return 0},function(){return 0},function(T,b){return b[0]-T[0]},function(T,b,S){var w=(T[1]-S[1])*(b[0]-S[0]),D=(T[0]-S[0])*(b[1]-S[1]),R=w-D,M;if(w>0){if(D<=0)return R;M=w+D}else if(w<0){if(D>=0)return R;M=-(w+D)}else return R;var k=s*M;return R>=k||R<=-k?R:d(T,b,S)},function(T,b,S,w){var D=T[0]-w[0],R=b[0]-w[0],M=S[0]-w[0],k=T[1]-w[1],L=b[1]-w[1],$=S[1]-w[1],P=T[2]-w[2],B=b[2]-w[2],X=S[2]-w[2],ee=R*$,se=M*L,fe=M*k,Z=D*$,he=D*L,j=R*k,H=P*(ee-se)+B*(fe-Z)+X*(he-j),G=(Math.abs(ee)+Math.abs(se))*Math.abs(P)+(Math.abs(fe)+Math.abs(Z))*Math.abs(B)+(Math.abs(he)+Math.abs(j))*Math.abs(X),K=u*G;return H>K||-H>K?H:p(T,b,S,w)}];function g(y){var T=m[y.length];return T||(T=m[y.length]=h(y.length)),T.apply(void 0,y)}function v(y,T,b,S,w,D,R){return function(k,L,$,P,B){switch(arguments.length){case 0:case 1:return 0;case 2:return S(k,L);case 3:return w(k,L,$);case 4:return D(k,L,$,P);case 5:return R(k,L,$,P,B)}for(var X=new Array(arguments.length),ee=0;ee<arguments.length;++ee)X[ee]=arguments[ee];return y(X)}}function E(){for(;m.length<=a;)m.push(h(m.length));e.exports=v.apply(void 0,[g].concat(m));for(var y=0;y<=a;++y)e.exports[y]=m[y]}E()})(k2);var P2=OTe,ay=k2.exports;function OTe(e,t){for(var n=t[0],i=t[1],r=e.length,a=1,o=r,s=0,u=r-1;s<o;u=s++){var c=e[s],l=e[u],f=c[1],h=l[1];if(h<f){if(h<i&&i<f){var d=ay(c,l,t);if(d===0)return 0;a^=0<d|0}else if(i===f){var p=e[(s+1)%r],m=p[1];if(f<m){var d=ay(c,l,t);if(d===0)return 0;a^=0<d|0}}}else if(f<h){if(f<i&&i<h){var d=ay(c,l,t);if(d===0)return 0;a^=d<0|0}else if(i===f){var p=e[(s+1)%r],m=p[1];if(m<f){var d=ay(c,l,t);if(d===0)return 0;a^=d<0|0}}}else if(i===f){var g=Math.min(c[0],l[0]),v=Math.max(c[0],l[0]);if(s===0){for(;u>0;){var E=(u+r-1)%r,y=e[E];if(y[1]!==i)break;var T=y[0];g=Math.min(g,T),v=Math.max(v,T),u=E}if(u===0)return g<=n&&n<=v?0:1;o=u+1}for(var b=e[(u+r-1)%r][1];s+1<o;){var y=e[s+1];if(y[1]!==i)break;var T=y[0];g=Math.min(g,T),v=Math.max(v,T),s+=1}if(g<=n&&n<=v)return 0;var S=e[(s+1)%r][1];n<g&&b<i!=S<i&&(a^=1)}}return 2*a-1}const R2=16,N2=50,OC=5e3,M2=5,Xl={fontSize:`${14}px`,fontFamily:"Arial",stroke:"white",strokeThickness:2,fontWeight:400,dropShadow:!0,dropShadowColor:"white",dropShadowDistance:0,dropShadowBlur:2};let L2=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.valueScaleTransform=sr,a}return _createClass3(n,[{key:"initialize",value:function(){this.initialized||([this.prevK,this.vertK,this.vertY]=[1,1,0],this.drawnRects||(this.drawnRects={}),this.colorScale||(this.options.colorRange?this.colorScale=Ao(this.options.colorRange):this.colorScale=$u),this.initialized=!0)}},{key:"initTile",value:function(r){r.texts={},r.rectGraphics=new Be.PIXI.Graphics,r.textGraphics=new Be.PIXI.Graphics,r.graphics.addChild(r.rectGraphics),r.graphics.addChild(r.textGraphics);let a=[],o=[];if(r.tileData&&r.tileData.length){if(r.tileData.sort((s,u)=>u.importance-s.importance),!this.options||!this.options.valueColumn){const s=r.tileData.map(u=>{const c=+u.chrOffset;return{from:+u.fields[1]+c,to:+u.fields[2]+c,value:u,text:u.fields[3],strand:u.fields.length>=6&&u.fields[5]==="-"?"-":"+"}});a=Wg(s.filter(u=>u.strand==="+")),o=Wg(s.filter(u=>u.strand==="-"))}else a=[r.tileData.map(s=>({value:s}))];r.plusStrandRows=a,r.minusStrandRows=o,this.options.showTexts&&r.tileData.forEach((s,u)=>{const c=s.fields;if(s.importance||(s.importance=Math.random()),r.textWidths={},r.textHeights={},u>=(+this.options.maxTexts||N2))return;const l=new Be.PIXI.Text(c[3],{...Xl,fontSize:+this.options.fontSize||Xl.fontSize});this.flipText&&(l.scale.x=-1),l.anchor.x=.5,l.anchor.y=.5,r.texts[s.uid]=l,r.textGraphics.addChild(l)})}r.initialized=!0}},{key:"removeTileRects",value:function(r){const a=+r.tileId.split(".")[0];r.rectGraphics.clear(),r.rendered=!1,r.tileData&&r.tileData.length&&r.tileData.forEach((o,s)=>{this.drawnRects[a]&&this.drawnRects[a][o.uid]&&this.drawnRects[a][o.uid][2]===r.tileId&&delete this.drawnRects[a][o.uid]})}},{key:"destroyTile",value:function(r){this.removeTileRects(r),r.graphics.destroy(!0)}},{key:"removeTiles",value:function(r){_get4(_getPrototypeOf4(n.prototype),"removeTiles",this).call(this,r)}},{key:"drawTile",value:function(r){this.options&&this.options.valueColumn&&this.valueScale&&this.drawAxis(this.valueScale)}},{key:"rerender",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r,a),this.valueScale=null,this.drawnRects={},this.options.colorRange?this.colorScale=Ao(this.options.colorRange):this.colorScale=$u;for(const o of this.visibleAndFetchedTiles())this.destroyTile(o),this.initTile(o),this.renderTile(o)}},{key:"updateTile",value:function(r){this.areAllVisibleTilesLoaded()&&this.renderTile(r)}},{key:"allVisibleRects",value:function(){const r={};Object.values(this.fetchedTiles).forEach(u=>{if(!!u.plusStrandRows)for(const c of u.plusStrandRows[0])r[c.value.uid]||(r[c.value.uid]=c)});const a=Object.values(r).sort((u,c)=>u.from-c.from);let o=0,s=0;for(let u=0;u<a.length;u++)if(a[u].staggeredStartPosition!==void 0){o=u,s=a[u].staggeredStartPosition;break}for(let u=o;u<a.length;u++)a[u].staggeredStartPosition=(s+u-o)%2;for(let u=o;u>=0&&a.length;u--)a[u].staggeredStartPosition=(s+o-u)%2;return r}},{key:"drawSegmentStyle",value:function(r,a,o,s,u,c){const f=s+u/2,h=[a,s,a+2*.1,s,a+2*.1,f-.1,o-2*.1,f-.1,o-2*.1,s,o,s,o,s+u,o-2*.1,s+u,o-2*.1,f+.1,a+2*.1,f+.1,a+2*.1,s+u,a,s+u];return r.rectGraphics.drawPolygon(h),h}},{key:"drawPoly",value:function(r,a,o,s,u,c){let l=null;return this.options.annotationStyle==="segment"?this.drawSegmentStyle(r,a,o,s,u,c):((c==="+"||c==="-")&&o-a<R2/2?(l=[a,s,a+u/2,s+u/2,a,s+u],c==="+"||(l=[o,s,o-u/2,s+u/2,o,s+u]),r.rectGraphics.drawPolygon(l)):(c==="+"?l=[a,s,o-u/2,s,o,s+u/2,o-u/2,s+u,a,s+u]:c==="-"?l=[a+u/2,s,o,s,o,s+u,a+u/2,s+u,a,s+u/2]:l=[a,s,o,s,o,s+u,a,s+u],r.rectGraphics.drawPolygon(l)),l)}},{key:"setValueScale",value:function(){if(this.valueScale=null,this.options&&this.options.valueColumn){const r=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.valueColumn),a=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.valueColumn);this.options.valueColumn&&([this.valueScale]=this.makeValueScale(r,this.calculateMedianVisibleValue(+this.options.valueColumn),a))}}},{key:"setColorValueScale",value:function(){if(this.colorValueScale=null,this.options&&this.options.colorEncoding&&this.options.colorEncoding!=="itemRgb"){const r=this.options.colorEncodingRange?+this.options.colorEncodingRange[0]:this.minVisibleValueInTiles(+this.options.colorEncoding),a=this.options.colorEncodingRange?+this.options.colorEncodingRange[1]:this.maxVisibleValueInTiles(+this.options.colorEncoding);this.colorValueScale=Et().domain([r,a]).range([0,255])}}},{key:"renderRows",value:function(r,a,o,s,u,c){const l=+r.tileId.split(".")[0];this.initialize();const f=Kh().domain(Ur(o)).range([s,u]).paddingInner(.3);this.allVisibleRects();let h=null;this.options.staggered&&(h=this.allVisibleRects());for(let d=0;d<a.length;d++)for(let p=0;p<a[d].length;p++){const m=a[d][p].value,g=m.fields,v=+m.chrOffset,E=+g[1]+v,y=+g[2]+v,T=(E+y)/2;let b=f(d)+f.step()/2,S=this.options.annotationHeight||R2;if(S==="scaled"&&(S=f.bandwidth(),this.options.maxAnnotationHeight&&(S=Math.min(S,+this.options.maxAnnotationHeight))),this.options&&this.options.colorEncoding==="itemRgb"&&m.fields[8]?m.fields[8].split(",").length===3&&(c=`rgb(${m.fields[8]})`):this.colorValueScale&&(c=`rgba(${Bb(this.colorValueScale,this.colorScale,0,-Number.MIN_VALUE)(+g[+this.options.colorEncoding-1]).join(",")})`),this.valueScale){const P=+g[+this.options.valueColumn-1];b=this.valueScale(P)}const w=this.options.fillOpacity||.3;r.rectGraphics.lineStyle(1,at(c),w),r.rectGraphics.beginFill(at(c),w);let D=b-S/2;const R=this._xScale(E),M=this._xScale(y);this.options.staggered&&(h[m.uid].staggeredStartPosition?D-=M2/2:D+=M2/2);let k=!0;if(!(l in this.drawnRects&&m.uid in this.drawnRects[l])){k=!1,this.drawnRects[l]||(this.drawnRects[l]={});const P=this.drawPoly(r,R,M,D*this.prevK,S*this.prevK,g[5]);this.drawnRects[l][m.uid]=[P,{start:E,end:y,value:m,tile:r,fill:c},r.tileId]}if(!this.options.showTexts)continue;if(!r.texts)return;if(p>=(+this.options.maxTexts||N2)||!r.texts[m.uid])continue;const L=r.texts[m.uid];L.position.x=this._xScale(T),L.position.y=D+S/2,L.nominalY=D+S/2,k&&(L.alreadyDrawn=!0);const $=this.options.fontColor!==void 0?at(this.options.fontColor):c;if(L.style={...Xl,fill:$,fontSize:+this.options.fontSize||Xl.fontSize},!(g[3]in r.textWidths)){L.updateTransform();const P=L.getBounds().width,B=L.getBounds().height,X=5;r.textWidths[g[3]]=P,r.textHeights[g[3]]=B-X}}}},{key:"renderTile",value:function(r){let a=r.plusStrandRows?r.plusStrandRows.length:1,o=r.minusStrandRows?r.minusStrandRows.length:1;for(const s of this.visibleAndFetchedTiles()){if(!s.initialized)return;!s.plusStrandRows&&!s.minusStrandRows||(a=Math.max(s.plusStrandRows.length,a),o=Math.max(s.minusStrandRows.length,o))}if(r.rendered&&this.removeTileRects(r),r.drawnAtScale=this._xScale.copy(),r.rendered=!0,this.setValueScale(),this.setColorValueScale(),r.tileData&&r.tileData.length){const s=this.options.plusStrandColor||this.options.fillColor||"blue",u=this.options.minusStrandColor||this.options.fillColor||"purple",c=0;let l=0;this.options.separatePlusMinusStrands?l=a*this.dimensions[1]/(a+o)-c/2:l=this.dimensions[1],this.renderRows(r,r.plusStrandRows,a,0,l,s),this.renderRows(r,r.minusStrandRows,o,this.options.separatePlusMinusStrands?l+c/2:0,this.dimensions[1],u)}Rl.stretchRects(this,[s=>s.rectGraphics])}},{key:"calculateZoomLevel",value:function(){const r=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);let a=Math.min(r,this.maxZoom);return a=Math.max(a,0),a}},{key:"minVisibleValueInTiles",value:function(r){let a=this.visibleAndFetchedIds();a.length===0&&(a=Object.keys(this.fetchedTiles));let o=Math.min.apply(null,a.map(s=>this.fetchedTiles[s]).filter(s=>s.tileData&&s.tileData.length).map(s=>Math.min.apply(null,s.tileData.sort((u,c)=>c.importance-u.importance).slice(0,OC).map(u=>+u.fields[r-1]).filter(u=>!Number.isNaN(u)))));return o===Number.MAX_SAFE_INTEGER&&(o=null),o}},{key:"maxVisibleValueInTiles",value:function(r){let a=this.visibleAndFetchedIds();a.length===0&&(a=Object.keys(this.fetchedTiles));let o=Math.max.apply(null,a.map(s=>this.fetchedTiles[s]).filter(s=>s.tileData&&s.tileData.length).map(s=>Math.max.apply(null,s.tileData.sort((u,c)=>c.importance-u.importance).slice(0,OC).map(u=>+u.fields[r-1]).filter(u=>!Number.isNaN(u)))));return o===Number.MIN_SAFE_INTEGER&&(o=null),o}},{key:"calculateMedianVisibleValue",value:function(r){this.areAllVisibleTilesLoaded()&&this.allTilesLoaded();let a=this.visibleAndFetchedIds();a.length===0&&(a=Object.keys(this.fetchedTiles));const o=[].concat(...a.map(s=>this.fetchedTiles[s]).filter(s=>s.tileData&&s.tileData.length).map(s=>s.tileData.sort((u,c)=>c.importance-u.importance).slice(0,OC).map(u=>+u.fields[r-1]))).filter(s=>s>0);this.medianVisibleValue=hE(o)}},{key:"draw",value:function(){_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this),this.allTexts=[],this.allBoxes=[];for(const r in this.fetchedTiles){const a=this.fetchedTiles[r];if(a.rectGraphics.scale.y=this.vertK,a.rectGraphics.position.y=this.vertY,!a.drawnAtScale)return;Rl.stretchRects(this,[s=>s.rectGraphics]);const o=this.parentInFetched(a);!a.initialized||a.tileData&&a.tileData.length&&a.tileData.forEach(s=>{if(!a.texts)return;const u=s.fields,c=u[3],l=a.texts[s.uid];if(!l)return;const f=+s.chrOffset,h=+u[1]+f,d=+u[2]+f,p=(h+d)/2;if(l.position.x=this._xScale(p),l.position.y=l.nominalY*(this.vertK*this.prevK)+this.vertY,!o&&!l.alreadyDrawn){l.visible=!0;const m=3;this.allBoxes.push([l.position.x-m,l.position.y-a.textHeights[u[3]]/2,l.position.x+a.textWidths[u[3]]+m,l.position.y+a.textHeights[u[3]]/2]),this.allTexts.push({importance:s.importance,text:l,caption:c,strand:u[5]})}else l.visible=!1})}this.hideOverlaps(this.allBoxes,this.allTexts)}},{key:"hideOverlaps",value:function(r,a){hp(r,(o,s)=>{a[o].importance>a[s].importance?a[o].text.visible&&(a[s].text.visible=!1):a[s].text.visible&&(a[o].text.visible=!1)})}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r)}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.refreshTiles(),this.draw()}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a);const o=document.createElement("g");o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o);const s=document.createElement("g"),u=document.createElement("g");o.appendChild(s),o.appendChild(u);for(const c of this.visibleAndFetchedTiles())!c.tileData.length||c.tileData.forEach(l=>{const f=+c.tileId.split(".")[0],h=document.createElement("g");if(h.setAttribute("transform",`translate(${c.rectGraphics.position.x},${c.rectGraphics.position.y})scale(${c.rectGraphics.scale.x},${c.rectGraphics.scale.y})`),s.appendChild(h),this.drawnRects[f]&&l.uid in this.drawnRects[f]){const d=this.drawnRects[f][l.uid][0],p=document.createElement("path");let m=`M ${d[0]} ${d[1]}`;for(let E=2;E<d.length;E+=2)m+=` L ${d[E]} ${d[E+1]}`;const g=this.drawnRects[f][l.uid][1].fill,v=this.options.fontColor!==void 0?at(this.options.fontColor):g;if(p.setAttribute("d",m),p.setAttribute("fill",g),p.setAttribute("opacity",.3),p.style.stroke=g,p.style.strokeWidth="1px",h.appendChild(p),c.texts[l.uid]){const E=c.texts[l.uid];if(!E.visible)return;const y=document.createElement("g"),T=document.createElement("text");u.appendChild(y),y.appendChild(T),y.setAttribute("transform",`translate(${E.x},${E.y})scale(${E.scale.x},1)`),T.setAttribute("text-anchor","middle"),T.setAttribute("font-family",Xl.fontFamily),T.setAttribute("font-size",+this.options.fontSize||Xl.fontSize),T.setAttribute("font-weight","bold"),T.setAttribute("dy","5px"),T.setAttribute("fill",v),T.setAttribute("stroke",Xl.stroke),T.setAttribute("stroke-width","0.4"),T.setAttribute("text-shadow","0px 0px 2px grey"),T.innerHTML=E.text}}});return[a,a]}},{key:"movedY",value:function(r){Object.values(this.fetchedTiles).forEach(a=>{const o=this.valueScaleTransform,{y:s,k:u}=o,c=this.dimensions[1];s+r/u>-(u-1)*c&&s+r/u<0&&(this.valueScaleTransform=o.translate(0,r/u)),a.rectGraphics.position.y=this.valueScaleTransform.y,this.vertY=this.valueScaleTransform.y}),this.animate()}},{key:"zoomedY",value:function(r,a){const o=Rl.zoomedY(r,a,this.valueScaleTransform,this.dimensions[1]);this.valueScaleTransform=o;let s=o.k;const u=o.y;let c=!1;s/=this.prevK,(s>1.5||s<1/1.5)&&(this.prevK*=s,s=1,c=!0),this.vertK=s,this.vertY=u,Object.values(this.fetchedTiles).forEach(l=>{c&&this.renderTile(l),l.rectGraphics.scale.y=s,l.rectGraphics.position.y=u}),this.draw(),this.animate()}},{key:"getMouseOverHtml",value:function(r,a){if(!this.tilesetInfo)return"";const o=this.calculateZoomLevel(),s=[r,a];if(this.drawnRects[o]){const u=Object.values(this.drawnRects[o]);for(let c=0;c<u.length;c++){const l=u[c][0].slice(0),f=u[c][1].tile.rectGraphics.scale.x,h=u[c][1].tile.rectGraphics.position.x,d=u[c][1].tile.rectGraphics.scale.y,p=u[c][1].tile.rectGraphics.position.y,m=[];for(;l.length;){const[v,E]=l.splice(0,2);m.push([v*f+h,E*d+p])}if(P2(m,s)===-1)return u[c][1].value.fields.join(" ")}}return""}}]),n}(Xc);const xTe=(e,t,n,i,r)=>{r.drawRect(e,t,n,i)},PTe=(e,t,n,i,r,{fill:a=0,fillOpacity:o=0,stroke:s=0,strokeWidth:u=0,strokeOpacity:c=0}={})=>{const l=document.createElement("rect");l.setAttribute("x",e),l.setAttribute("y",t),l.setAttribute("width",n),l.setAttribute("height",i),l.setAttribute("fill",`#${yb(a)}`),l.setAttribute("fill-opacity",o),l.setAttribute("stroke",`#${yb(s)}`),l.setAttribute("stroke-opacity",c),l.setAttribute("stroke-width",u),r.appendChild(l)},ro=(e,t,n,i,r,a)=>{r instanceof HTMLElement?PTe(e,t,n,i,r,a):xTe(e,t,n,i,r)},B2=(e,t,n,i,r,a,o,s,{isVertical:u=!1,svg:c=null}={})=>{let l=t,f=n,h=i,d=r;const p=s.width*2>i?i/2:s.width,m=s.width*2>r?r/2:s.width,g=c||e,v={fill:0,fillOpacity:0,stroke:0,strokeOpacity:0,strokeWidth:1};if(s.positions&&s.positions.length?(e.lineStyle(1,0,0),e.beginFill(s.color,s.opacity),v.fill=s.color,v.fillOpacity=s.opacity,v.stroke=0,v.strokeOpacity=0,v.strokeWidth=1,s.positions.forEach(E=>{E==="top"&&!u||E==="left"&&u?ro(t-p,n-m,i+p*2,m,g,v):E==="bottom"&&!u||E==="right"&&u?ro(t-p,n+r,i+p*2,m,g,v):E==="left"&&!u||E==="top"&&u?ro(t-p,n-m,p,r+m*2,g,v):(E==="right"&&!u||E==="bottom"&&u)&&ro(t+i,n-m,p,r+m*2,g,v)})):s.width>0&&s.opacity>0&&(e.lineStyle(s.width,s.color,s.opacity),e.beginFill(0,0),v.fill=0,v.fillOpacity=0,v.stroke=s.color,v.strokeOpacity=s.opacity,v.strokeWidth=s.width,ro(t-p,n-m,i+p*2,r+m*2,g,v)),o.positions&&o.positions.length){e.lineStyle(1,0,0),e.beginFill(o.color,o.opacity);const E=o.width*2>i?i/2:o.width,y=o.width*2>r?r/2:o.width;v.fill=o.color,v.fillOpacity=o.opacity,v.stroke=0,v.strokeOpacity=0,v.strokeWidth=1,o.positions.forEach(T=>{T==="top"&&!u||T==="left"&&u?(ro(t,n,i,y,g,v),f+=y,d-=y):T==="bottom"&&!u||T==="right"&&u?(ro(t,n+r-y,i,y,g,v),d-=y):T==="left"&&!u||T==="top"&&u?(ro(t,n,E,r,g,v),l+=E,h-=E):(T==="right"&&!u||T==="bottom"&&u)&&(ro(t+i-E,n,E,r,g,v),h-=E)})}else e.lineStyle(o.width,o.color,o.opacity),v.stroke=o.color,v.strokeOpacity=o.opacity,v.strokeWidth=o.width;e.beginFill(a.color,a.opacity),v.fill=a.color,v.fillOpacity=a.opacity,ro(l,f,h,d,g,v)};let F2=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.options=r||{},a.drawnRects={},a}return _createClass3(n,[{key:"drawHorizontalOverlay",value:function(r,a,o,s=0,u,c,l,f){if(!o||o.length<2)return;let h=this.position[0]+a.left+this._xScale(o[0]);const d=this.position[1]+a.top,p=a.height;let m=this._xScale(o[1])-this._xScale(o[0]);m<s&&(h-=(s-m)/2,m=s),B2(r,h,d,m,p,u,c,l,f)}},{key:"drawVerticalOverlay",value:function(r,a,o,s=0,u,c,l,f={}){if(!o||o.length<2)return;const h=this.position[0]+a.left;let d=this.position[1]+a.top+this._yScale(o.length>=4?o[2]:o[0]);const p=this.position[1]+a.top,m=this.position[1]+a.top+a.height;if(d>m)return;d<p&&(d=p);const g=a.width;let v=this._yScale(o.length>=4?o[3]:o[1])-d+a.top+this.position[1];v<0||(d+v>m&&(v+=m-(d+v)),v<s&&(d-=(s-v)/2,v=s),f.isVertical=!0,B2(r,h,d,g,v,u,c,l,f))}},{key:"draw",value:function(r){_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this);const a=this.pMain,o={color:at(this.options.fill||this.options.fillColor||"blue"),opacity:Number.isNaN(+this.options.fillOpacity)?.3:+this.options.fillOpacity},s={color:at(this.options.stroke||"blue"),opacity:+this.options.strokeOpacity||1,width:+this.options.strokeWidth||0,positions:!this.options.strokePos||Array.isArray(this.options.strokePos)?this.options.strokePos:[this.options.strokePos]},u={color:at(this.options.outline||"white"),opacity:+this.options.outlineOpacity||1,width:+this.options.outlineWidth||0,positions:!this.options.outlinePos||Array.isArray(this.options.outlinePos)?this.options.outlinePos:[this.options.outlinePos]};(!r||!r.svg)&&a.clear(),a.lineStyle(s.width,s,+!s.positions*s.opacity),a.beginFill(o.color,o.opacity);const c=Math.max(0,+this.options.minWidth||0),l=Math.max(0,+this.options.minHeight||0);Array.isArray(this.options.extent)&&this.options.orientationsAndPositions.forEach(f=>{(f.orientation==="1d-horizontal"||f.orientation==="2d")&&this.options.extent.forEach(h=>this.drawHorizontalOverlay(a,f.position,h,c,o,s,u,r)),(f.orientation==="1d-vertical"||f.orientation==="2d")&&this.options.extent.forEach(h=>this.drawVerticalOverlay(a,f.position,h,l,o,s,u,r))})}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.draw()}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.draw()}},{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r),this.draw()}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a);const o=document.createElement("g");return r.appendChild(o),this.draw({svg:o}),[a,r]}}]),n}(Qr),ah=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"stopHover",value:function(){this.pMouseOver.clear(),this.animate()}},{key:"getMouseOverHtml",value:function(r){if(!this.tilesetInfo||!this.options.showTooltip||!this.valueScale)return"";const a=this.getDataAtPos(r);let o="";a&&(o=bi(".3f")(a));const s=this.pMouseOver,u=0,c=this.valueScale(a);s.clear(),s.beginFill(u,.5),s.lineStyle(1,u,1);const l=4;if(s.drawRect(r-l/2,c-l/2,l,l),this.animate(),!o||o.length===0)return"";let f="";if(!this.options.isCombined)f='<div class="track-mouseover-menu-table">',f+=`
        <div class="track-mouseover-menu-table-item">
          <label for="value" class="track-mouseover-menu-table-item-label">Value</label>
          <div name="value" class="track-mouseover-menu-table-item-value">${o}</div>
        </div>
        `,f+="</div>";else{if(f=this.options.isFirst?'<div class="track-mouseover-menu-table">':"",this.options.isFirst&&this.options.chromInfo){const p=this._xScale.invert(r),m=Wn(p,this.options.chromInfo),g=m[0],v=Math.ceil(m[1]),E=`${g}:${v}`;f+=`
          <div class="track-mouseover-menu-table-item">
            <label for="position" class="track-mouseover-menu-table-item-label">Position</label>
            <div name="position" class="track-mouseover-menu-table-item-value">${E}</div>
          </div>
          `}const h=this.options.barFillColor?`<div style="border:1px solid black;background-color:${this.options.barFillColor};width:10px;height:10px;display:inline-block;margin-right:5px;margin-left:2px;"></div>`:"",d=this.options.name?`${h}${this.options.name}`:"Value";f+=`
        <div class="track-mouseover-menu-table-item">
          <label for="value" class="track-mouseover-menu-table-item-label">${d}</label>
          <div name="value" class="track-mouseover-menu-table-item-value">${o}</div>
        </div>
        `,f+=this.options.isLast?"</div>":""}return f}},{key:"initTile",value:function(r){if(_get4(_getPrototypeOf4(n.prototype),"initTile",this).call(this,r),!r.tileData||!r.tileData.dense){console.warn("emptyTile:",r);return}if(r.xValues=new Array(r.tileData.dense.length),r.yValues=new Array(r.tileData.dense.length),this.isValueScaleLocked()){const a=this.getLockGroupExtrema();a!==null&&(this.minValue(a[0]),this.maxValue(a[1]))}this.drawTile(r)}},{key:"rerender",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r,a),this.options=r,_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this),this.visibleAndFetchedTiles().forEach(o=>{this.renderTile(o)})}},{key:"renderTile",value:function(r){this.drawTile(r),this.drawAxis(this.valueScale)}},{key:"drawTile",value:function(r){if(_get4(_getPrototypeOf4(n.prototype),"drawTile",this).call(this,r),!r.graphics||!r.tileData||!r.tileData.dense)return;const a=r.graphics,{tileX:o,tileWidth:s}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos),u=r.tileData.dense;if(u.length===0)return;const[c,l]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue());if(this.valueScale=c,a.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const f=at(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue");!this.tilesetInfo.tile_size&&!this.tilesetInfo.bins_per_dimension&&console.warn("No tileset_info.tile_size or tileset_info.bins_per_dimension",this.tilesetInfo);const h=this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension,d=Et().domain([0,h]).range([o,o+s]),p=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;a.lineStyle(p,f,1),r.segments=[];let m=[];for(let g=0;g<u.length;g++){const v=this._xScale(d(g)),E=this.valueScale(u[g]+l);if(this.options.valueScaling==="log"&&u[g]===0||Number.isNaN(E)){m.length>1&&r.segments.push(m),m=[];continue}if(d(g)>this.tilesetInfo.max_pos[0])break;m.push([v,E])}m.length>1&&r.segments.push(m);for(const g of r.segments){const v=g[0],E=g.slice(1);a.moveTo(v[0],v[1]);for(const y of E)a.lineTo(y[0],y[1])}}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0],this.pMouseOver.position.y=this.position[1],this.pMouseOver.position.x=this.position[0]}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.refreshTiles(),this.draw();const o=this.isValueScaleLocked();if(this.continuousScaling&&this.minValue()!==void 0&&this.maxValue()!==void 0){if(this.valueScaleMin===null&&this.valueScaleMax===null&&!o){const s=this.minVisibleValue(),u=this.maxVisibleValue(),c=1e-6;s!==null&&u!==null&&(Math.abs(this.minValue()-s)>c||Math.abs(this.maxValue()-u)>c)&&(this.minValue(s),this.maxValue(u),this.scheduleRerender())}o&&this.onValueScaleChanged()}}},{key:"superSVG",value:function(){return _get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this)}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a),a.setAttribute("class","exported-line-track");const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`);const s=this.options.lineStrokeColor?this.options.lineStrokeColor:"blue";this.visibleAndFetchedTiles().forEach(c=>{if(c.hasOwnProperty("segments")){const l=document.createElement("path");l.setAttribute("fill","transparent"),l.setAttribute("stroke",s);let f="";for(const h of c.segments){const d=h[0],p=h.slice(1);f+=`M${d[0]} ${d[1]}`;for(const m of p)f+=`L${m[0]} ${m[1]}`}l.setAttribute("d",f),o.appendChild(l)}else if(c.hasOwnProperty("tileData")){const{tileX:l,tileWidth:f}=this.getTilePosAndDimensions(c.tileData.zoomLevel,c.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),h=c.tileData.dense;if(h.length!==0){c.svgData=void 0;const d=Et().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([l,l+f]);let p,m,g,v,E=this.options.barFillColor||"none";const[y,T]=this.makeValueScale(this.minValue(),0,this.maxValue(),0);this.valueScale=y,this.colorScale=Ao(this.options.colorRange);const b=y.copy();b.range([254,0]).clamp(!0);for(let w=0;w<h.length;w++)if(p=this._xScale(d(w)),g=this.valueScale(this.maxValue()+T),m=this._xScale(d(w+1))-p,v=this.dimensions[1],this.colorScale&&!this.options.colorRangeGradient)try{const D=Math.round(b(h[w]+T));E="#"+this.colorScale[D].map(R=>R.toString(16).padStart(2,0)).join(""),(Number.isNaN(h[w])||v<0||g<0)&&(v=this.dimensions[1],E="#ffffff"),this.addSVGInfo(c,p,g,m,v,E)}catch{}const S=c.svgData;for(let w=0;w<S.barXValues.length;w++){const D=S.barColors[w],R=D.substring(0,D.length-2),M=parseFloat(parseInt(D.substring(D.length-2),16))/255,k=document.createElement("rect");k.setAttribute("fill",R),k.setAttribute("fill-opacity",M),k.setAttribute("x",S.barXValues[w]),k.setAttribute("y",S.barYValues[w]),k.setAttribute("height",S.barHeights[w]),k.setAttribute("width",S.barWidths[w]),c.barBorders&&(k.setAttribute("stroke-width","0.1"),k.setAttribute("stroke","black")),o.appendChild(k)}}}});const u=document.createElement("g");if(u.setAttribute("id","axis"),a.appendChild(u),u.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"){const c=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);u.appendChild(c)}else if(this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"){const c=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);u.appendChild(c)}return[a,r]}},{key:"addSVGInfo",value:function(r,a,o,s,u,c){r.svgData?(r.svgData.barXValues.push(a),r.svgData.barYValues.push(o),r.svgData.barWidths.push(s),r.svgData.barHeights.push(u),r.svgData.barColors.push(c)):r.svgData={barXValues:[a],barYValues:[o],barWidths:[s],barHeights:[u],barColors:[c]}}},{key:"tileToLocalId",value:function(r){return this.options.aggregationMode&&this.options.aggregationMode!=="mean"?`${r.join(".")}.${this.options.aggregationMode}`:`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return this.tileToLocalId(r)}}]),n}(Xc),H2=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"initTile",value:function(r){r.barXValues=new Array(r.tileData.dense.length),r.barYValues=new Array(r.tileData.dense.length),r.barWidths=new Array(r.tileData.dense.length),r.barHeights=new Array(r.tileData.dense.length),_get4(_getPrototypeOf4(n.prototype),"initTile",this).call(this,r)}},{key:"drawTile",value:function(r){if(!r.graphics||!r.tileData||!r.tileData.dense)return;const a=r.graphics,{tileX:o,tileWidth:s}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos),u=r.tileData.dense;if(u.length===0)return;let c=0;if(this.valueScale=null,this.options.valueScaling==="log"){let m=this.medianVisibleValue;this.medianVisibleValue||(m=this.minValue()),this.valueScale=Xo().domain([m,this.maxValue()+m]).range([this.dimensions[1],0]),c=m}else this.valueScale=Et().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(a.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const l=at(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),f=Et().domain([0,this.tilesetInfo.tile_size]).range([o,o+s]),h=0;a.lineStyle(h,l,1);const d=this.options.pointSize?this.options.pointSize:3,p=at(this.options.pointColor?this.options.pointColor:"red");a.beginFill(p,1),r.drawnAtScale=this._xScale.copy();for(let m=0;m<u.length;m++){const g=this._xScale(f(m)),v=this.valueScale(u[m]+c);if(r.barXValues[m]=g-d/2/this.pMain.scale.x,r.barYValues[m]=v-d/2/this.pMain.scale.y,r.barWidths[m]=d/this.pMain.scale.x,r.barHeights[m]=d/this.pMain.scale.y,f(m)>this.tilesetInfo.max_pos[0])break;a.drawRect(g-d/2/this.pMain.scale.x,v-d/2/this.pMain.scale.y,d/this.pMain.scale.x,d/this.pMain.scale.y)}}},{key:"draw",value:function(){_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this);for(const r of un(this.fetchedTiles)){const a=(r.drawnAtScale.domain()[1]-r.drawnAtScale.domain()[0])/(this._xScale.domain()[1]-this._xScale.domain()[0]),s=this._xScale.domain().map(r.drawnAtScale)[0];r.graphics.scale.x=a,r.graphics.position.x=-s*a}}},{key:"zoomed",value:function(r,a,o,s,u){_get4(_getPrototypeOf4(n.prototype),"zoomed",this).call(this,r,a)}},{key:"exportSVG",value:function(){let r=null,a=null;[a,r]=_get4(_getPrototypeOf4(n.prototype),"superSVG",this).call(this),a.setAttribute("class","exported-line-track");const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`);for(const u of this.visibleAndFetchedTiles())for(let c=0;c<u.barXValues.length;c++){const l=document.createElement("rect"),f=this.options.lineStrokeColor||"blue",h=this.options.pointColor||"red";l.setAttribute("fill",h),l.setAttribute("stroke",f),l.setAttribute("stroke-width",0),l.setAttribute("x",u.barXValues[c]),l.setAttribute("y",u.barYValues[c]),l.setAttribute("height",u.barHeights[c]),l.setAttribute("width",u.barWidths[c]),o.appendChild(l)}const s=document.createElement("g");if(s.setAttribute("id","axis"),a.appendChild(s),s.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"){const u=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}else if(this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"){const u=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}return[a,r]}}]),n}(ah);function RTe(e){let t=0;const n=[];return e.forEach(i=>{t+=+i||0,n.push(t)}),Float64Array.from(n)}const NTe=(e,t)=>{const n=Ff(e,t);return RTe(e.map(i=>(Array.isArray(i)&&t?i.length:1)/n))};let $2=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.pMain=a.pMobile,a.continuousScaling=!1,a.updateDataFetcher(r),a}return _createClass3(n,[{key:"updateDataFetcher",value:function(r){if(r&&r.selectRows&&r.selectRowsAggregationMethod==="server"){const{pubSub:a,dataFetcher:o}=this,s=o.dataConfig.options,u={aggGroups:r.selectRows,aggFunc:r.selectRowsAggregationMode};if(JSON.stringify(s)!==JSON.stringify(u)){const c={...o.dataConfig,options:u};this.dataFetcher=new o.constructor(c,a),this.dataFetcher.dataConfig.tilesetUid&&this.fetchNewTiles(Object.keys(this.fetchedTiles).map(l=>({tileId:l,remoteId:l})))}}}},{key:"rerender",value:function(r,a){this.updateDataFetcher(r),_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r,a),r.selectRows&&(this.selectRowsCumWeights=NTe(r.selectRows,r.selectRowsAggregationWithRelativeHeight))}},{key:"tileDataToCanvas",value:function(r){const a=document.createElement("canvas");this.options.selectRows&&this.tilesetInfo.shape?(a.width=this.tilesetInfo.shape[0],a.height=Ff(this.options.selectRows,this.options.selectRowsAggregationWithRelativeHeight)):this.tilesetInfo.shape?(a.width=this.tilesetInfo.shape[0],a.height=this.tilesetInfo.shape[1]):(a.width=this.tilesetInfo.tile_size,a.height=1);const o=a.getContext("2d");if(o.fillStyle="transparent",o.fillRect(0,0,a.width,a.height),r.length!==0&&r.length===4*a.width*a.height){const s=new ImageData(r,a.width,a.height);o.putImageData(s,0,0)}else console.warn("HorizontalMultivecTrack: pixData has an incorrect length.");return a}},{key:"setSpriteProperties",value:function(r,a,o){const{tileX:s,tileWidth:u}=this.getTilePosAndDimensions(a,o,this.tilesetInfo.tile_size),c=s+u;r.width=this._refXScale(c)-this._refXScale(s),r.height=this.dimensions[1],r.x=this._refXScale(s),r.y=0}},{key:"leftTrackZoomed",value:function(r,a,o,s,u){const c=this._xScale(0)-o*this._refXScale(0);this.pMobile.position.x=c+this.position[0],this.pMobile.position.y=this.position[1],this.pMobile.scale.x=o,this.pMobile.scale.y=1}},{key:"zoomed",value:function(r,a,o,s){_get4(_getPrototypeOf4(n.prototype),"zoomed",this).call(this,r,a),this.pMain.position.x=s,this.pMain.position.y=this.position[1],this.pMain.scale.x=o,this.pMain.scale.y=1,this.drawColorbar()}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;if(this.zoomLevel=this.calculateZoomLevel(),this.tilesetInfo.resolutions){const a=this.tilesetInfo.resolutions.map(o=>+o).sort((o,s)=>s-o);this.xTiles=Xe.calculateTilesFromResolution(a[this.zoomLevel],this._xScale,this.tilesetInfo.min_pos[0],null,this.tilesetInfo.tile_size)}else this.xTiles=Xe.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const r=this.xTiles.map(a=>[this.zoomLevel,a]);this.setVisibleTiles(r)}},{key:"calculateZoomLevel",value:function(){if(!this.tilesetInfo)return;const r=this.tilesetInfo.min_pos[0];let a=null;return this.tilesetInfo.resolutions?a=Xe.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,r):a=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),a}},{key:"tileToLocalId",value:function(r){return r.join(".")}},{key:"tileToRemoteId",value:function(r){return r.join(".")}},{key:"getTilePosAtPosition",value:function(r,a){if(!this.tilesetInfo)return;const o=this.calculateZoomLevel(),s=Xe.calculateTileWidth(this.tilesetInfo,o,this.tilesetInfo.tile_size),u=this._xScale.invert(r)/s;return[o,Math.floor(u)]}},{key:"getVisibleData",value:function(r,a){const o=this.calculateZoomLevel(),s=Xe.calculateTileWidth(this.tilesetInfo,o,this.tilesetInfo.tile_size),u=this._xScale.invert(r)/s;let c=this.tilesetInfo.shape?this.tilesetInfo.shape[1]:1;this.options.selectRows&&(c=Ff(this.options.selectRows,this.options.selectRowsAggregationWithRelativeHeight));let l=this.tilesetInfo.tile_size*(u-Math.floor(u));const f=a/this.dimensions[1],h=f*c;let d=Math.floor(h),p;this.options.selectRows&&(this.options.selectRowsAggregationWithRelativeHeight&&(d=this.selectRowsCumWeights.findIndex((E,y)=>f<=E&&(y===this.selectRowsCumWeights.length-1||this.selectRowsCumWeights[y+1]>=f))),p=this.options.selectRows[d]);const m=this.tileToLocalId([o,Math.floor(u)]),g=this.fetchedTiles[m];let v="";if(g){this.tilesetInfo.shape||(l=g.tileData.dense.length*(u-Math.floor(u)));let E=null;if(this.tilesetInfo.shape?Array.isArray(p)&&this.options.selectRowsAggregationMethod==="client"?E=p.map(y=>this.tilesetInfo.shape[0]*y+Math.floor(l)):p&&this.options.selectRowsAggregationMethod==="client"?E=this.tilesetInfo.shape[0]*p+Math.floor(l):E=this.tilesetInfo.shape[0]*d+Math.floor(l):E=g.tileData.dense.length*d+Math.floor(l),Array.isArray(E)){const y=Ub(this.options.selectRowsAggregationMode),T=E.map(b=>g.tileData.dense[b]);v=bi(".3f")(y(T)),v+="<br/>",v+=`${E.length}-item ${this.options.selectRowsAggregationMode}`}else v=bi(".3f")(g.tileData.dense[E]),Array.isArray(p)&&(v+="<br/>",v+=`${p.length}-item ${this.options.selectRowsAggregationMode}`)}if(this.tilesetInfo.row_infos){v+="<br/>";let E="";this.options.selectRows&&!Array.isArray(p)?E=this.tilesetInfo.row_infos[p]:d>=0&&d<this.tilesetInfo.row_infos.length&&(E=this.tilesetInfo.row_infos[d]),typeof E=="object"?v+=Object.values(E).join("	"):v+=E}return`${v}`}},{key:"getMouseOverHtml",value:function(r,a){if(!this.tilesetInfo)return"";const o=this.getTilePosAtPosition(r,a);let s="";if(this.options&&this.options.heatmapValueScaling&&this.options.heatmapValueScaling==="categorical"&&this.options.colorRange){const c=this.getVisibleData(r,a).split("<br/>"),l=this.options.colorRange[parseInt(c[0],10)-1],f=c[1];if(Number.isNaN(l)||l==="NaN"||typeof l>"u"||l==="undefined")return"";s=`<svg width="10" height="10" style="position:relative;bottom:1px"><rect width="10" height="10" rx="2" ry="2"
                 style="fill:${l};stroke:black;stroke-width:2;"></svg> ${f}`}else s+=`Data value: ${this.getVisibleData(r,a)}</br>`,s+=`Zoom level: ${o[0]} tile position: ${o[1]}`;return s}}]),n}(ip);const MTe=at("#FFFFFF");let xC=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(...i){var r;return _classCallCheck3(this,n),r=t.call(this,...i),r.zeroLine=new Be.PIXI.Graphics,r.pMain.addChild(r.zeroLine),r.valueScaleTransform=sr,r.options&&r.options.colorRange&&(r.options.colorRangeGradient?r.setColorGradient(r.options.colorRange):r.setColorScale(r.options.colorRange)),r.initialized=!0,r}return _createClass3(n,[{key:"setColorScale",value:function(r){!r||(this.colorScale=Ao(r),this.colorScale=this.colorScale.map(a=>a.map(o=>o/255)))}},{key:"setColorGradient",value:function(r){if(!r)return;const a=r.length-1;this.colorGradientColors=this.options.align==="bottom"?r.slice().reverse().map((o,s)=>({from:s/a,color:o})):r.map((o,s)=>({from:s/a,color:o}))}},{key:"initTile",value:function(r){!this.initialized||_get4(_getPrototypeOf4(n.prototype),"initTile",this).call(this,r)}},{key:"updateTile",value:function(r){(!r.valueScale||!this.scale||this.scale.minValue!==r.scale.minValue||this.scale.maxValue!==r.scale.maxValue)&&this.renderTile(r)}},{key:"renderTile",value:function(r){!this.initialized||_get4(_getPrototypeOf4(n.prototype),"renderTile",this).call(this,r)}},{key:"drawTile",value:function(r){if(!r.graphics||!r.tileData||!r.tileData.dense)return;const{graphics:a}=r;r.svgData=void 0;const{tileX:o,tileWidth:s}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos,this.tilesetInfo.bins_per_dimension||this.tilesetInfo.tile_size),u=r.tileData.dense;if(u.length===0)return;const[c,l]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue(),0);c.clamp(!0),this.valueScale=c;const f=c.copy();if(f.range([254,0]).clamp(!0),a.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const h=at(this.options.lineStrokeColor||"blue"),d=Et().domain([0,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension]).range([o,o+s]),p=0;a.lineStyle(p,h,1);let m=this.options.barFillColor||"grey";const g=at(m),v="barOpacity"in this.options?this.options.barOpacity:1;a.beginFill(g,v),r.drawnAtScale=this._xScale.copy();const E=this.options.align==="top";let y,T,b,S,w,D;if(this.colorGradientColors){w=new Be.PIXI.Graphics,w.beginFill(MTe,1);const R=_R(this.colorGradientColors,1,this.dimensions[1],0,0,0,this.dimensions[1]);D=new Be.PIXI.Sprite(Be.PIXI.Texture.fromCanvas(R,Be.PIXI.SCALE_MODES.NEAREST)),D.x=this._xScale(o),D.width=this._xScale(o+s)-D.x}for(let R=0;R<u.length;R++){if(y=this._xScale(d(R)),b=this.valueScale(u[R]+l),T=this._xScale(d(R+1))-y,S=this.dimensions[1]-b,E&&(b=0),this.colorScale&&!this.options.colorRangeGradient)try{m="#"+this.colorScale[Math.round(f(u[R]+l))].map(M=>Math.round(M*255)).map(M=>M.toString(16).padStart(2,0)).join("")}catch{m="grey"}if(!(Number.isNaN(S)||S<0||b<0)){if(this.addSVGInfo(r,y,b,T,S,m),d(R)>this.tilesetInfo.max_pos[0])break;if(this.colorScale&&!this.options.colorRangeGradient){const M=Math.round(f(u[R]+l)),k=this.colorScale[M],L=Be.PIXI.utils.rgb2hex(k);a.beginFill(L,v)}(w||a).drawRect(y,b,T,S)}}this.colorGradientColors&&(D.mask=w,a.removeChildren(),a.addChild(D,w))}},{key:"rerender",value:function(r,a){r&&r.colorRange&&(r.colorRangeGradient?this.setColorGradient(r.colorRange):this.setColorScale(r.colorRange)),_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r,a)}},{key:"drawZeroLine",value:function(){this.zeroLine.clear();const r=at(this.options.barFillColor||"grey"),a=+this.options.barOpacity||1,o=this.options.zeroLineColor?at(this.options.zeroLineColor):r,s=Number.isNaN(+this.options.zeroLineOpacity)?a:+this.options.zeroLineOpacity;this.zeroLine.beginFill(o,s),this.zeroLine.drawRect(0,this.dimensions[1]-1,this.dimensions[0],1)}},{key:"drawZeroLineSvg",value:function(r){const a=document.createElement("rect");a.setAttribute("id","zero-line"),a.setAttribute("x",0),a.setAttribute("y",this.dimensions[1]-1),a.setAttribute("height",1),a.setAttribute("width",this.dimensions[0]),a.setAttribute("fill",this.options.zeroLineColor||this.options.barFillColor),a.setAttribute("fill-opacity",this.options.zeroLineOpacity||this.options.barOpacity),r.appendChild(a)}},{key:"getXScaleAndOffset",value:function(r){const a=r.domain(),o=this._xScale.domain(),s=(a[1]-a[0])/(o[1]-o[0]),c=this._xScale.domain().map(r)[0];return[s,-c*s]}},{key:"draw",value:function(){!this.initialized||(_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this),this.options.zeroLineVisible?this.drawZeroLine():this.zeroLine.clear(),Object.values(this.fetchedTiles).forEach(r=>{const[a,o]=this.getXScaleAndOffset(r.drawnAtScale);r.graphics.scale.x=a,r.graphics.position.x=o}))}},{key:"zoomed",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"zoomed",this).call(this,r,a)}},{key:"movedY",value:function(r){}},{key:"zoomedY",value:function(r,a){}},{key:"addSVGInfo",value:function(r,a,o,s,u,c){r.svgData?(r.svgData.barXValues.push(a),r.svgData.barYValues.push(o),r.svgData.barWidths.push(s),r.svgData.barHeights.push(u),r.svgData.barColors.push(c)):r.svgData={barXValues:[a],barYValues:[o],barWidths:[s],barHeights:[u],barColors:[c]}}},{key:"exportSVG",value:function(){let r=null,a=null;[a,r]=_get4(_getPrototypeOf4(n.prototype),"superSVG",this).call(this),a.setAttribute("class","exported-line-track");const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),this.options.zeroLine&&this.drawZeroLineSvg(o),this.visibleAndFetchedTiles().filter(u=>u.svgData&&u.svgData.barXValues).forEach(u=>{const c=u.svgData;for(let l=0;l<c.barXValues.length;l++){const f=c.barColors[l],h=f.length===9?f.substring(0,f.length-2):f,d=f.length===9?parseFloat(parseInt(f.substring(f.length-2),16))/255:1,p=document.createElement("rect");p.setAttribute("fill",h),p.setAttribute("fill-opacity",d),p.setAttribute("x",c.barXValues[l]),p.setAttribute("y",c.barYValues[l]),p.setAttribute("height",c.barHeights[l]),p.setAttribute("width",c.barWidths[l]),u.barBorders&&(p.setAttribute("stroke-width","0.1"),p.setAttribute("stroke","black")),o.appendChild(p)}});const s=document.createElement("g");if(s.setAttribute("id","axis"),a.appendChild(s),s.setAttribute("transform",`translate(${this.axis.pAxis.position.x}, ${this.axis.pAxis.position.y})`),this.options.axisPositionHorizontal==="left"||this.options.axisPositionVertical==="top"){const u=this.axis.exportAxisLeftSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}else if(this.options.axisPositionHorizontal==="right"||this.options.axisPositionVertical==="bottom"){const u=this.axis.exportAxisRightSVG(this.valueScale,this.dimensions[1]);s.appendChild(u)}return[a,r]}}]),n}(ah),U2=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"drawTile",value:function(r){this.renderTile(r)}},{key:"renderTile",value:function(r){if(!r.graphics)return;const a=r.graphics,{tileX:o,tileWidth:s}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos,this.tilesetInfo.tile_size||this.tilesetInfo.bins_per_dimension),u=r.tileData.dense;if(u.length===0)return;let c=0;if(this.valueScale=null,this.options.valueScaling==="log"){let y=this.medianVisibleValue;this.medianVisibleValue||(y=this.minValue()),this.valueScale=Xo().domain([y,this.maxValue()+y]).range([this.dimensions[1],0]),c=y}else this.valueScale=Et().domain([this.minValue(),this.maxValue()]).range([this.dimensions[1],0]);if(a.clear(),this.drawAxis(this.valueScale),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const l=at(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),f=Et().domain([0,this.tilesetInfo.tile_size]).range([o,o+s]),h=0;a.lineStyle(h,l,1);const d=this.options.barFillColorTop?this.options.barFillColorTop:"green",p=this.options.barFillColorBottom?this.options.barFillColorBottom:"red",m=at(d),g=at(p),v="barOpacity"in this.options?this.options.barOpacity:1;r.drawnAtScale=this._xScale.copy();let E=0;this.options.valueScaling==="log"?E=this.valueScale(1):E=this.valueScale(0),delete r.svgData;for(let y=0;y<u.length;y++){const T=this._xScale(f(y)),b=this.valueScale(u[y]+c),S=this._xScale(f(y+1))-T;if(b>E?(a.beginFill(g,v),this.addSVGInfo(r,T,E,S,b-E,p)):(a.beginFill(m,v),this.addSVGInfo(r,T,b,S,E-b,d)),f(y)>this.tilesetInfo.max_pos[0])break;a.drawRect(T,r.svgData.barYValues[y],S,r.svgData.barHeights[y])}}}]),n}(xC),G2=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.setColorScale(r.colorRange),a.opacity=r.opacity||1,a}return _createClass3(n,[{key:"setColorScale",value:function(r){this.colorScale=r?Ao(r):$u,this.colorScale=this.colorScale.map(a=>a.map(o=>o/255))}},{key:"rerender",value:function(r){r&&r.colorRange&&this.setColorScale(r.colorRange),this.opacity=r.opacity||1,_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r)}},{key:"drawAxis",value:function(){}},{key:"drawTile",value:function(r){if(!r.graphics||!r.tileData||!r.tileData.dense)return;const a=r.graphics,{tileX:o,tileWidth:s}=this.getTilePosAndDimensions(r.tileData.zoomLevel,r.tileData.tilePos),u=r.tileData.dense;if(u.length===0)return;const[c,l]=this.makeValueScale(this.minValue(),this.medianVisibleValue,this.maxValue());if(c.range([254,0]).clamp(!0),this.valueScale=c,a.clear(),this.options.valueScaling==="log"&&this.valueScale.domain()[1]<0){console.warn("Negative values present when using a log scale",this.valueScale.domain());return}const f=Et().domain([0,this.tilesetInfo.tile_size]).range([o,o+s]);a.lineStyle(0,0,0);for(let h=0;h<u.length;h++){if(Number.isNaN(u[h]))continue;const d=Math.round(this.valueScale(u[h]+l));if(Number.isNaN(+d))continue;const p=this._xScale(f(h)),m=this._xScale(f(h+1))-p,g=this.dimensions[1];r.xValues[h]=p,r.yValues[h]=d;const v=this.colorScale[d],E=Be.PIXI.utils.rgb2hex(v);if(a.beginFill(E,this.opacity),h!==0){if(f(h)>this.tilesetInfo.max_pos[0])break;u[h]!==0&&a.drawRect(p,0,m,g)}}}}]),n}(ah),z2=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.seen=new Set,a.pMain=a.pMobile,a.rows=[],a}return _createClass3(n,[{key:"uid",value:function(r){return r[r.length-2]}},{key:"segmentOverlap",value:function(r,a){}},{key:"drawAll",value:function(r){this.pMain.clear();const a=new Set,o=r.map(u=>a.has(this.uid(u))?null:(a.add(this.uid(u)),{from:+u[1],to:+u[2],type:u[4],uid:this.uid(u)})).filter(u=>u),s=Wg(o);this.rows=s,this.draw()}},{key:"draw",value:function(){const r=this.rows;if(!r)return;const a=Kh().range([0,this.dimensions[1]]).padding(.1).domain(Ur(0,this.maxRows())),o=this.pMain;o.clear(),o.lineStyle(1,255,0),o.beginFill(16740363,.8);for(let s=0;s<r.length;s++)for(let u=0;u<r[s].length;u++){const c=r[s][u],l=this._refXScale(c.from),f=this._refXScale(c.to),h=a(s),d=h+a.bandwidth(),p=f-l,m=d-h;o.drawRect(l,h,p,m)}}},{key:"allTilesLoaded",value:function(){const a=this.visibleAndFetchedIds().map(s=>this.fetchedTiles[s].tileData.discrete),o=[].concat(...a);this.drawAll(o)}},{key:"initTile",value:function(r){}},{key:"maxRows",value:function(){return this.rows.length}},{key:"updateTile",value:function(r){}},{key:"destroyTile",value:function(r){r.tileData.discrete.forEach(a=>{const o=a[a.length-2];this.seen.has(o)&&this.seen.delete(o)})}},{key:"drawTile",value:function(r){}}]),n}(Xc),j2=function(){function e(t){_classCallCheck3(this,e),this.scene=t.scene,this.originalTrack=t,this.pBase=new Be.PIXI.Graphics,this.scene.removeChild(t.pBase),this.scene.addChild(this.pBase),this.moveToOrigin=new Be.PIXI.Graphics,this.moveToOrigin.addChild(t.pBase),this.pBase.addChild(this.moveToOrigin),this.moveToOrigin.rotation=Math.PI/2,t.isLeftModified=!0,t.flipText=!0,this.svgOutput=null,t.gBase&&t.gMain&&(this.originalTrack.gBase.attr("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                             rotate(90)
                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.gMain.attr("transform",`translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`))}return _createClass3(e,[{key:"remove",value:function(){this.originalTrack.remove(),this.pBase.clear(),this.scene.removeChild(this.pBase)}},{key:"setDimensions",value:function(n){this.dimensions=n;const i=[n[1],n[0]];this.originalTrack.setDimensions(i)}},{key:"setPosition",value:function(n){this.position=n,this.originalTrack.setPosition(n),this.originalTrack.pBase.position.x=-this.originalTrack.position[0],this.originalTrack.pBase.position.y=-this.originalTrack.position[1],this.moveToOrigin.scale.y=-1,this.moveToOrigin.scale.x=1,this.moveToOrigin.position.x=this.originalTrack.position[0],this.moveToOrigin.position.y=this.originalTrack.position[1],this.originalTrack.gMain&&(this.originalTrack.gBase.attr("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                                 rotate(90)
                                 scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.gMain.attr("transform",`translate(${this.originalTrack.pBase.position.x},${this.originalTrack.pBase.position.y})`))}},{key:"refXScale",value:function(n){return arguments.length?(this.originalTrack._refXScale=n,this):this.originalTrack._refYScale}},{key:"refYScale",value:function(n){return arguments.length?(this.originalTrack._refYScale=n,this):this.originalTrack._refXScale}},{key:"xScale",value:function(n){return arguments.length?(this.originalTrack._yScale=n,this):this.originalTrack._xScale}},{key:"yScale",value:function(n){return arguments.length?(this.originalTrack._xScale=n,this):this.originalTrack._yScale}},{key:"getMouseOverHtml",value:function(n,i){return this.originalTrack.getMouseOverHtml(i,n)}},{key:"clickOutside",value:function(){this.originalTrack.clickOutside()}},{key:"click",value:function(...n){this.originalTrack.click(...n)}},{key:"draw",value:function(){this.originalTrack.draw()}},{key:"zoomed",value:function(n,i,r=1,a=0,o=0,s=0,u=0){if(this.xScale(n),this.yScale(i),this.originalTrack.leftTrackZoomed){this.originalTrack.refreshTiles&&this.originalTrack.refreshTiles(),this.originalTrack.leftTrackZoomed(n,i,r,a,o),this.originalTrack.draw();return}const c=this.originalTrack._xScale(0)-r*this.originalTrack._refXScale(0);if(this.originalTrack.pMobile.position.x=c+this.originalTrack.position[0],this.originalTrack.pMobile.position.y=this.originalTrack.position[1]+this.originalTrack.dimensions[1],this.originalTrack.pMobile.scale.x=r,this.originalTrack.pMobile.scale.y=r,this.originalTrack.options.oneDHeatmapFlipped&&(this.originalTrack.pMobile.scale.y=-r,this.originalTrack.pMobile.position.y=this.originalTrack.position[1]),this.originalTrack.leftTrackDraw){this.originalTrack.refreshTiles&&this.originalTrack.refreshTiles(),this.originalTrack.leftTrackDraw();return}this.originalTrack.zoomed(this.xScale(),this.yScale())}},{key:"zoomedY",value:function(n,i){this.originalTrack.zoomedY(n,i)}},{key:"movedY",value:function(n){this.originalTrack.movedY(n)}},{key:"refScalesChanged",value:function(n,i){this.originalTrack.refScalesChanged(i,n)}},{key:"rerender",value:function(n){this.originalTrack.rerender(n)}},{key:"exportSVG",value:function(){const n=document.createElement("g");if(n.setAttribute("transform",`translate(${this.moveToOrigin.position.x},${this.moveToOrigin.position.y})
                             rotate(90)
                             scale(${this.moveToOrigin.scale.x},${this.moveToOrigin.scale.y})`),this.originalTrack.exportSVG){const i=document.createElement("g");i.setAttribute("transform",`translate(${this.originalTrack.pBase.position.x}, ${this.originalTrack.pBase.position.y})`),i.appendChild(this.originalTrack.exportSVG()[0]),n.appendChild(i)}return[n,n]}},{key:"respondsToPosition",value:function(n,i){return n>=this.position[0]&&n<=this.dimensions[0]+this.position[0]&&i>=this.position[1]&&i<=this.dimensions[1]+this.position[1]}}]),e}();const V2=11,PC="Arial",Y2="outside",RC=10,LTe=4,BTe=20,FTe=at("#ffffff"),oy=2,oh=2*(2*RC/3)/3,HTe=50,$Te=5e3,NC="blue",MC="red",LC=(e,t,n)=>{n.type!=="filler"&&t.pubSub.publish("app.click",{type:"gene-annotation",event:e,payload:n})},W2=(e,t)=>{const n=e.concat(t),i=n.map(r=>[r.xStart,1,r.xEnd,1]);hp(i,(r,a)=>{let o=null,s=null;if(n[r].type==="filler"?o=n[r]:s=n[r],n[a].type==="filler"){if(o)return;o=n[a]}else{if(!o)return;s=n[a]}o.xStart>=s.xStart&&o.xEnd<=s.xEnd&&(o.hide=!0)})};function UTe(e,t,n){const{flipText:i,fontSize:r,fontFamily:a,plusStrandColor:o,minusStrandColor:s,maxGeneEntries:u,maxFillerEntries:c,maxTexts:l}=n;if(t.texts={},t.rectGraphics=new Be.PIXI.Graphics,t.textBgGraphics=new Be.PIXI.Graphics,t.textGraphics=new Be.PIXI.Graphics,t.rectMaskGraphics=new Be.PIXI.Graphics,t.graphics.addChild(t.rectGraphics),t.graphics.addChild(t.textBgGraphics),t.graphics.addChild(t.textGraphics),t.graphics.addChild(t.rectMaskGraphics),t.rectGraphics.mask=t.rectMaskGraphics,!t.tileData.sort)return;t.tileData.sort((d,p)=>p.importance-d.importance);const f=t.tileData.filter(d=>d.type!=="filler").slice(0,u),h=t.tileData.filter(d=>d.type==="filler").slice(0,c);t.tileData=f.concat(h),t.tileData.forEach((d,p)=>{if(d.type==="filler")return;const m=d.fields,g=m[3],v=e.geneId(m,d.type),E=d.strand||m[5];d.strand=d.strand||E;let y=o||NC;if(E==="-"&&(y=s||MC),t.textWidths={},t.textHeights={},p>=l)return;const T=new Be.PIXI.Text(g,{fontSize:`${r}px`,fontFamily:a,fill:at(y)});T.interactive=!0,i&&(T.scale.x=-1),T.anchor.x=.5,T.anchor.y=1,t.texts[v]=T,t.texts[v].strand=E,t.textGraphics.addChild(T)}),t.initialized=!0}function q2(e,t,n,i,r,a,o,s,u){const c=s-u/2,l=0;e.forEach(f=>{const h=new Be.PIXI.Graphics;n.rectGraphics.addChild(h),h.beginFill(a,.1),h.lineStyle(0,a);const d=[r(f.xStart)-l,c,r(f.xEnd)+l,c,r(f.xEnd)+l,c+u,r(f.xStart)-l,c+u,r(f.xStart)-l,c];h.interactive=!0,h.buttonMode=!0,h.mouseup=p=>LC(p,t,f),h.drawPolygon(d),n.allRects.push([d,f.strand,f])})}function GTe(e,t,n,i,r,a,o,s,u,c){const l=s-u/2,f=r.split(",").map(T=>+T+o),h=a.split(",").map(T=>+T+o),d=e._xScale(n),p=e._xScale(i),m=p-d,g=s,v=[];let E=[d,g-oy/2,d+m,g-oy/2,d+m,g+oy/2,d,g+oy/2];t.drawPolygon(E),v.push(E);const y=2*u;for(let T=Math.max(e.position[0],d)+y;T<Math.min(e.position[0]+e.dimensions[0],d+m);T+=y)c==="+"?E=[T,g-oh/2,T+oh/2,g,T,g+oh/2]:E=[T,g-oh/2,T-oh/2,g,T,g+oh/2],v.push(E),t.drawPolygon(E);for(let T=0;T<f.length;T++){const b=f[T],S=h[T],w=e._xScale(b),D=Math.max(1,e._xScale(S)-e._xScale(b));let R=d,M=p;const k=e.geneRectHeight/2;let L=null;c==="+"?(M=p-k,L=[Math.min(w,M),l,Math.min(w+D,M),l,Math.min(w+D,M),l+u,Math.min(w,M),l+u,Math.min(w,M),l]):(R=d+k,L=[Math.max(w,R),l,Math.max(w+D,R),l,Math.max(w+D,R),l+u,Math.max(w,R),l+u,Math.max(w,R),l]),v.push(L),t.drawPolygon(L)}return v}function zTe(e,t,n,i,r,a,o,s,u){const c=s-u/2;e.forEach(l=>{const f=t._xScale(l.xStart),h=t._xScale(l.xEnd),d=new Be.PIXI.Graphics;n.rectGraphics.addChild(d),d.beginFill(a,o),d.interactive=!0,d.buttonMode=!0,d.mouseup=g=>LC(g,t,l);const p=t.geneRectHeight/2;let m=[];if(l.strand==="+"||l.fields[5]==="+"){const g=Math.max(f,h-p),v=g+p;m=[g,c,v,c+t.geneRectHeight/2,g,c+t.geneRectHeight]}else{const g=Math.min(h,f+p),v=g-p;m=[g,c,v,c+t.geneRectHeight/2,g,c+t.geneRectHeight]}d.drawPolygon(m),n.allRects.push([m,l.strand,l])})}function jTe(e,t,n,i,r,a,o,s,u){e.forEach(c=>{const l=c.fields,f=+c.chrOffset,h=l[12],d=l[13],p=new Be.PIXI.Graphics;n.rectGraphics.addChild(p),p.beginFill(a,o),p.interactive=!0,p.buttonMode=!0,p.mouseup=m=>LC(m,t,c),n.allRects=n.allRects.concat(GTe(t,p,c.xStart,c.xEnd,h,d,f,s,u,c.strand||c.fields[5]).map(m=>[m,c.strand,c]))})}function X2(e,t,n,i,r,a,o,s,u){zTe(e,t,n,i,r,a,o,s,u),jTe(e,t,n,i,r,a,o,s,u)}function VTe(e,t){const{tileX:n,tileWidth:i}=Rl.getTilePosAndDimensions(e.tilesetInfo,t.tileId);t.rectMaskGraphics.clear();const r=Math.floor(Math.random()*16**6);t.rectMaskGraphics.beginFill(r,.3);const a=e._xScale(n),o=0,s=e._xScale(n+i)-e._xScale(n),u=e.dimensions[1];t.rectMaskGraphics.drawRect(a,o,s,u)}let BC=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{animate:o}=i;return a.animate=o,a.options=r,a.fontSize=+a.options.fontSize||V2,a.geneLabelPos=a.options.geneLabelPosition||Y2,a.geneRectHeight=+a.options.geneAnnotationHeight||RC,a.geneRectHeight-=2,a.geneStrandSpacing=+a.options.geneStrandSpacing||LTe,a.geneStrandHSpacing=a.geneStrandSpacing/2,a.geneRectHHeight=a.geneRectHeight/2,a}return _createClass3(n,[{key:"initTile",value:function(r){UTe(this,r,{flipText:this.flipText,fontSize:this.fontSize,fontFamily:PC,plusStrandColor:this.options.plusStrandColor,minusStrandColor:this.options.minusStrandColor,maxGeneEntries:HTe,maxFillerEntries:$Te,maxTexts:BTe}),this.renderTile(r)}},{key:"destroyTile",value:function(r){r.rectGraphics.destroy(),r.rectMaskGraphics.destroy(),r.textGraphics.destroy(!0),r.textBgGraphics.destroy(),r.graphics.destroy()}},{key:"rerender",value:function(r,a){const o=JSON.stringify(r);!a&&o===this.prevOptions||(_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r,a),this.fontSize=+this.options.fontSize||V2,this.geneLabelPos=this.options.geneLabelPosition||Y2,this.geneRectHeight=+this.options.geneAnnotationHeight||RC,this.geneStrandHSpacing=this.geneStrandSpacing/2,this.geneRectHHeight=this.geneRectHeight/2,this.prevOptions=o,this.visibleAndFetchedTiles().forEach(s=>{this.renderTile(s)}))}},{key:"drawTile",value:function(){}},{key:"geneId",value:function(r,a){return`${a}_${r[0]}_${r[1]}_${r[2]}_${r[3]}`}},{key:"renderTile",value:function(r){if(!r.initialized)return;r.allRects=[],r.drawnAtScale=this._xScale.copy(),r.rectGraphics.removeChildren(),r.rectGraphics.clear(),r.textBgGraphics.clear();const a={},o=.3,s=.3;a["+"]=at(this.options.plusStrandColor||NC),a["-"]=at(this.options.minusStrandColor||MC);let u=r.tileData.filter(v=>v.type==="filler"&&v.strand==="+"),c=r.tileData.filter(v=>v.type==="filler"&&v.strand==="-");const l=r.tileData.filter(v=>v.type!=="filler"&&(v.strand==="+"||v.fields[5]==="+")),f=r.tileData.filter(v=>v.type!=="filler"&&(v.strand==="-"||v.fields[5]==="-"));W2(l,u),W2(f,c),u=u.filter(v=>!v.hide),c=c.filter(v=>!v.hide);const h=this.dimensions[1]/2,d=h-this.geneRectHeight/2-this.geneStrandSpacing/2,p=h+this.geneRectHeight/2+this.geneStrandSpacing/2,m=[this,r,r.rectGraphics,this._xScale,a["+"],o,d,this.geneRectHeight],g=[this,r,r.rectGraphics,this._xScale,a["-"],o,p,this.geneRectHeight];q2(u,...m),q2(c,...g),m[5]=s,g[5]=s,X2(l,...m),X2(f,...g),VTe(this,r),Rl.stretchRects(this,[v=>v.rectGraphics,v=>v.rectMaskGraphics]);for(const v of Object.values(r.texts))v.style={fontSize:`${this.fontSize}px`,FONT_FAMILY:PC,fill:at(v.strand==="-"?this.options.minusStrandColor||MC:this.options.plusStrandColor||NC)}}},{key:"calculateZoomLevel",value:function(){const r=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]);let a=Math.min(r,this.maxZoom);return a=Math.max(a,0),a}},{key:"draw",value:function(){_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this),this.allTexts=[],this.allBoxes=[];const r=[];this.geneAreaHeight=this.geneRectHeight;const a=this.fontSize/2;Rl.stretchRects(this,[o=>o.rectGraphics,o=>o.rectMaskGraphics]),Object.values(this.fetchedTiles).filter(o=>o.drawnAtScale).forEach(o=>{o.textBgGraphics.clear(),o.textBgGraphics.beginFill(typeof this.options.labelBackgroundColor<"u"?at(this.options.labelBackgroundColor):FTe);const s=this.parentInFetched(o);!o.initialized||o.tileData.forEach(u=>{if(!o.texts||u.type==="filler")return;const c=u.fields,l=c[3],f=this.geneId(c,u.type),h=o.texts[f];if(!h)return;const d=+u.chrOffset,p=+c[1]+d,m=+c[2]+d,g=(p+m)/2;let v=this.dimensions[1]/2;const E=(this.geneAreaHeight-this.fontSize)/2;if(c[5]==="+"?v-=this.geneLabelPos==="inside"?E+this.geneStrandSpacing-2:this.fontSize/2+this.geneAreaHeight-2:v+=this.geneLabelPos==="inside"?this.fontSize+this.geneStrandSpacing/2+E+1:1.5*this.fontSize+this.geneAreaHeight+2,h.position.x=this._xScale(g),h.position.y=v,!o.textWidths[f]){const y=h.getBounds().width,T=h.getBounds().height;o.textHeights[f]=T,o.textWidths[f]=y}if(s)h.visible=!1;else{h.visible=!0;const y=2;this.flipText?this.allBoxes.push([h.position.x-o.textHeights[f]/2-y,v-a-1,h.position.x+o.textHeights[f]/2+y,v+a-1,l]):this.allBoxes.push([h.position.x-o.textWidths[f]/2-y,v-a-1,h.position.x+o.textWidths[f]/2+y,v+a-1,l]),this.allTexts.push({importance:+c[4],text:h,caption:l,strand:c[5]}),r.push(o.textBgGraphics)}})}),this.hideOverlaps(this.allBoxes,this.allTexts),this.renderTextBg(this.allBoxes,this.allTexts,r)}},{key:"renderTextBg",value:function(r,a,o){a.forEach((s,u)=>{if(s.text.visible&&r[u]&&o[u]){const[c,l,f,h]=r[u],d=f-c,p=h-l;o[u].drawRect(c-d/2,l-p/2,d,p)}})}},{key:"hideOverlaps",value:function(r,a){hp(r,(o,s)=>{a[o].importance>a[s].importance?a[s].text.visible=!1:a[o].text.visible=!1})}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r),this.halfRectHHeight=this.dimensions[1]/2,this.visibleAndFetchedTiles().forEach(a=>{this.renderTile(a)})}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.refreshTiles(),this.draw()}},{key:"getMouseOverHtml",value:function(r,a){if(!this.tilesetInfo)return"";const o=[r,a];for(const s of this.visibleAndFetchedTiles())for(let u=0;u<s.allRects.length;u++){if(s.allRects[u][2].type==="filler")continue;const c=s.allRects[u][0].slice(0),l=[];for(;c.length;){const h=c.splice(0,2);h[0]=h[0]*s.rectGraphics.scale.x+s.rectGraphics.position.x,h[1]=h[1]*s.rectGraphics.scale.y+s.rectGraphics.position.y,l.push(h)}if(P2(l,o)===-1){const h=s.allRects[u][2];return`
            <div>
              <b>${h.fields[3]}</b><br>
              <b>Position:</b> ${h.fields[0]}:${h.fields[1]}-${h.fields[2]}<br>
              <b>Strand:</b> ${h.fields[5]}
            </div>
          `}}return""}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a);const o=document.createElement("g");return o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o),this.visibleAndFetchedTiles().filter(s=>s.allRects).forEach(s=>{const u=document.createElement("g");u.setAttribute("transform",`translate(${s.rectGraphics.position.x},
          ${s.rectGraphics.position.y})
          scale(${s.rectGraphics.scale.x},
          ${s.rectGraphics.scale.y})`),s.allRects.forEach(c=>{const l=document.createElement("path"),f=c[0];let h=`M ${f[0]} ${f[1]}`;for(let d=2;d<f.length;d+=2)h+=` L ${f[d]} ${f[d+1]}`;l.setAttribute("d",h),c[1]==="+"?l.setAttribute("fill",this.options.plusStrandColor):l.setAttribute("fill",this.options.minusStrandColor),l.setAttribute("opacity","0.3"),u.appendChild(l)}),o.appendChild(u)}),this.allTexts.filter(s=>s.text.visible).forEach(s=>{const u=document.createElement("g"),c=document.createElement("text");c.setAttribute("text-anchor","middle"),c.setAttribute("font-family",PC),c.setAttribute("font-size",`${this.fontSize}px`),c.setAttribute("dy","-.2em"),u.setAttribute("transform",`scale(${s.text.scale.x},1)`),s.strand==="+"?c.setAttribute("fill",this.options.plusStrandColor):c.setAttribute("fill",this.options.minusStrandColor),c.innerHTML=s.text.text,u.appendChild(c),u.setAttribute("transform",`translate(${s.text.x},${s.text.y})scale(${s.text.scale.x},1)`),o.appendChild(u)}),[a,a]}}]),n}(Xc);function K2(e,t,n,i,r,a,o,s,u,c){const l=c?e._xScale(n.yStart):e._xScale(n.xStart),f=c?e._xScale(n.yEnd):e._xScale(n.xEnd),h=c?e._yScale(n.xStart):e._yScale(n.yStart),d=c?e._yScale(n.xEnd):e._yScale(n.yEnd),p=n.uid+c,m=f-l,g=d-h;let v={x:l,y:h,width:m,height:g};i&&(m<i||g<i)&&(v={x:l-i/2,y:h-i/2,width:i,height:i}),e.drawnRects[p]=v;const E=v.x+v.width,y=v.y+v.height;(v.x>r&&v.x<a||E>r&&E<a||v.y>o&&v.y<s||y>o&&y<s)&&(v.width>u||v.height>u)&&(t.drawRect(v.x,v.y,v.width,v.height),e.publish("annotationDrawn",{trackUuid:e.uuid,annotationUuid:p,viewPos:[v.x,v.y,v.width,v.height],dataPos:[n.xStart,n.xEnd,n.yStart,n.yEnd],importance:n.importance,info:{patternType:e.options.patternType}}))}let Z2=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(...i){var r;_classCallCheck3(this,n),r=t.call(this,...i),r.drawnRects={};const{publish:a,subscribe:o,unsubscribe:s}=fg();return r.publish=a,r.subscribe=o,r.unsubscribe=s,r}return _createClass3(n,[{key:"tileToLocalId",value:function(r){return`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return`${r.join(".")}`}},{key:"localToRemoteId",value:function(r){const a=r.split(".");return a.slice(0,a.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const r=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),a=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let o=Math.max(r,a);return o=Math.min(o,this.maxZoom),o}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(a=>({tileId:this.tileToLocalId(a),remoteId:this.tileToRemoteId(a)})),this.visibleTileIds=new Set(this.visibleTiles.map(a=>a.remoteId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=Xe.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=Xe.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const r=this.xTiles,a=this.yTiles,o=this.zoomLevel,s=[];for(let u=0;u<r.length;u++)for(let c=0;c<a.length;c++){const l=[o,r[u],a[c]];s.push(l)}this.setVisibleTiles(s)}},{key:"initTile",value:function(){}},{key:"destroyTile",value:function(){}},{key:"draw",value:function(){this.drawnRects={},_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(r){const a=r.graphics;if(!a)return;a.clear();const o=at(this.options.rectangleDomainStrokeColor||"black"),s=at(this.options.rectangleDomainFillColor||"grey");a.lineStyle(typeof this.options.rectangleDomainStrokeWidth<"u"?this.options.rectangleDomainStrokeWidth:1,o,typeof this.options.rectangleDomainStrokeOpacity<"u"?this.options.rectangleDomainStrokeOpacity:1),a.beginFill(s,typeof this.options.rectangleDomainFillOpacity<"u"?this.options.rectangleDomainFillOpacity:.4),a.alpha=this.options.rectangleDomainOpacity||.5;const u=this.options.minSquareSize&&this.options.minSquareSize!=="none"?+this.options.minSquareSize:0,c=this.options.rectangleMinSize?+this.options.rectangleMinSize:0,l=this._xScale.range()[0],f=this._xScale.range()[1],h=this._yScale.range()[0],d=this._yScale.range()[1];!r.tileData.length||r.tileData.filter(p=>!(p.uid in this.drawnRects)).forEach(p=>{K2(this,a,p,u,l,f,h,d,c,this.options.flipDiagonal==="yes"),this.options.flipDiagonal&&this.options.flipDiagonal==="copy"&&K2(this,a,p,u,l,f,h,d,c,!0)})}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a);const o=document.createElement("g");o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o);for(const s of[!0,!1])for(const u of this.visibleAndFetchedTiles())!u.tileData||!u.tileData.length||u.tileData.forEach(c=>{const l=c.uid+s,f=document.createElement("g");if(f.setAttribute("transform",`translate(${u.graphics.position.x},${u.graphics.position.y})scale(${u.graphics.scale.x},${u.graphics.scale.y})`),o.appendChild(f),l in this.drawnRects){const h=this.drawnRects[l],d=document.createElement("rect");d.setAttribute("x",h.x),d.setAttribute("y",h.y),d.setAttribute("width",h.width),d.setAttribute("height",h.height),d.setAttribute("fill",this.options.rectangleDomainFillColor?this.options.rectangleDomainFillColor:"grey"),d.setAttribute("opacity",.3),d.style.stroke="black",d.style.strokeWidth="1px",f.appendChild(d)}});return[a,a]}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,a){this.xScale().domain()[0]===r.domain()[0]&&this.xScale().domain()[1]===r.domain()[1]&&this.yScale().domain()[0]===a.domain()[0]&&this.yScale().domain()[1]===a.domain()[1]||(this.xScale(r),this.yScale(a),this.refreshTiles(),this.draw())}},{key:"leftTrackDraw",value:function(){this.draw()}}]),n}(bs);const YTe=250;let Q2=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{pubSub:o}=i;a.drawnAnnotations={},a.drawnAnnoGfx={},a.selectedAnno=null,a.options.minSquareSize=+a.options.minSquareSize;const{publish:s,subscribe:u,unsubscribe:c}=fg();return a.publish=s,a.subscribe=u,a.unsubscribe=c,a.sT=0,a.annoSelectedBound=a.annoSelected.bind(_assertThisInitialized3(a)),a.pubSubs.push(o.subscribe("annoSelected",a.annoSelectedBound)),a}return _createClass3(n,[{key:"minX",get:function(){return this.tilesetInfo&&this.tilesetInfo.min_pos?this.tilesetInfo.min_pos[0]:0}},{key:"maxX",get:function(){return this.tilesetInfo&&this.tilesetInfo.max_pos?this.tilesetInfo.max_pos[0]:this.tilesetInfo.max_width||this.tilesetInfo.max_size}},{key:"minY",get:function(){return this.minX}},{key:"maxY",get:function(){return this.maxX}},{key:"maxSize",get:function(){const i=this.tilesetInfo.max_pos&&Math.max(this.tilesetInfo.max_pos[0]-this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[1]-this.tilesetInfo.min_pos[1]);return i||(this.tilesetInfo.max_size?this.tilesetInfo.max_size:0)}},{key:"projection",value:function([r,a]){return[this._xScale(r),this._yScale(a)]}},{key:"tileToLocalId",value:function(r){return`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return`${r.join(".")}`}},{key:"localToRemoteId",value:function(r){const a=r.split(".");return a.slice(0,a.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const r=Xe.calculateZoomLevel(this._xScale,this.minX,this.maxX),a=Xe.calculateZoomLevel(this._yScale,this.minY,this.maxY);return IR(xb(r,a),this.maxZoom)}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(a=>({tileId:this.tileToLocalId(a),remoteId:this.tileToRemoteId(a)})),this.visibleTileIds=new Set(this.visibleTiles.map(a=>a.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=Xe.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.tilesetInfo.max_zoom,this.maxSize),this.yTiles=Xe.calculateTiles(this.zoomLevel,this._yScale,this.minY,this.maxY,this.tilesetInfo.max_zoom,this.maxSize);const r=this.zoomLevel,a=[];for(let o=0;o<this.xTiles.length;o++)for(let s=0;s<this.yTiles.length;s++)a.push([r,this.xTiles[o],this.yTiles[s]]);this.setVisibleTiles(a)}},{key:"draw",value:function(){this.drawnAnnotations={},_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(r,a=!1,o=!1){if(!r.graphics)return;r.graphics.__tile__=r;const s=r.graphics;s.clear(),this.setBorderStyle(s),this.setFill(s),s.alpha=+this.options.rectangleDomainOpacity,r.tileData.length&&r.tileData.filter(u=>!(u.uid in this.drawnAnnotations)||a).forEach(u=>{const[c,l]=this.projection([u.xStart,u.yStart]),[f,h]=this.projection([u.xEnd,u.yEnd]);this.options.exclude&&this.options.exclude.indexOf(u.uid)>=0||this.drawAnnotation(this.prepAnnotation(s,u.uid,c,l,f-c,h-l,u),o)})}},{key:"prepAnnotation",value:function(r,a,o,s,u,c,l){let f;try{f=JSON.parse(l.fields)}catch{}return{graphics:r,id:l.id,uid:a,annotation:{x:o,y:s,width:u,height:c},dataPos:[l.xStart,l.xEnd,l.yStart,l.yEnd],importance:l.importance,info:f}}},{key:"drawAnnotation",value:function({graphics:r,id:a,uid:o,annotation:s,dataPos:u,importance:c,info:l},f){this.options.minSquareSize&&(s.width<this.options.minSquareSize||s.height<this.options.minSquareSize)&&(s.x=(s.x+s.width)/2,s.y=(s.y+s.height)/2,s.width=this.options.minSquareSize,s.height=this.options.minSquareSize),this.drawnAnnotations[o]=s;const h=[s.x,s.y,s.width,s.height];let d=this.drawnAnnoGfx[o];d||(d=new Be.PIXI.Graphics,this.drawnAnnoGfx[o]=d),r.children.indexOf(d)===-1&&r.addChild(d),this._drawRect(d,h,o),r.interactive=!0,d.interactive=!0,d.buttonMode=!0;const p={id:a,uid:o,dataPos:u,importance:c,info:l,viewPos:[s.x,s.y,s.x+s.width,s.y+s.height]};d.mouseover=()=>this.hover(d,h,o),d.mouseout=()=>this.blur(d,h,o),d.mousedown=()=>this.mouseDown(),d.mouseup=m=>this.mouseUp(d,h,o,m,p),f||this.publish("annotationDrawn",{trackUuids:this.uuid,annotationUuid:o,annotationId:a,viewPos:h,dataPos:u,importance:c,info:l})}},{key:"_drawRect",value:function(r,a,o){let s=this.options.rectangleDomainStrokeColor,u=this.options.rectangleDomainStrokeWidth,c=this.options.rectangleDomainStrokeOpacity,l=this.options.rectangleDomainFillColor,f=this.options.rectangleDomainFillOpacity;this.hoveredAnno===o&&(s=this.options.hoverColor,u=this.options.rectangleDomainStrokeWidth+1||2,c=1,l=this.options.hoverColor,f=this.options.rectangleDomainFillOpacity),this.selectedAnno&&this.selectedAnno.uid===o&&(s=this.options.selectColor,u=this.options.rectangleDomainStrokeWidth+1||2,c=1,l=this.options.selectColor,f=xb(.33,this.options.rectangleDomainFillOpacity)),r.clear(),this.options.trackBorderBgWidth&&(this.setBorderStyle(r,this.options.trackBorderBgColor,this.options.trackBorderBgWidth,this.options.trackBorderBgAlpha),this.setFill(r,l,0),r.drawRect(...a)),this.setBorderStyle(r,s,u,c),this.setFill(r,l,f),r.drawRect(...a),r.__viewPos__=a}},{key:"context",value:function(r,a,o){return s=>s(r,a,o)}},{key:"click",value:function(r,a,o,s,u){this.select(r,a,o),this.pubSub.publish("app.click",{type:"annotation",event:s,payload:u})}},{key:"mouseDown",value:function(){this.sT=performance.now()}},{key:"mouseUp",value:function(r,a,o,s,u){performance.now()-this.sT<=YTe&&this.click(r,a,o,s,u)}},{key:"hover",value:function(r,a,o){this.hoveredAnno=o,this._drawRect(r,a,o),this.animate()}},{key:"focus",value:function(r,a,o){this._drawRect(r,a,o),this.animate()}},{key:"blur",value:function(r,a,o){this.hoveredAnno=null,this._drawRect(r,a,o),this.animate()}},{key:"select",value:function(r,a,o,s=!1){let u=null,c=null;this.selectedAnno&&(u=this.selectedAnno.graphics,c=this.selectedAnno.uid),this.selectedAnno={graphics:r,uid:o},this.focus(r,a,o),this.options.onSelect&&!s&&(window[this.options.onSelect](o),this.pubSub.publish("annoSelected",o)),u&&c&&this.blur(u,u.__viewPos__,c)}},{key:"unselect",value:function(){const r=this.selectedAnno.graphics,a=this.selectedAnno.uid;this.selectedAnno=null,this.blur(r,r.__viewPos__,a)}},{key:"annoSelected",value:function(r){if(!this.selectedAnno||this.selectedAnno.uid!==r){this.selectedAnno&&this.unselect();const a=this.drawnAnnoGfx[r];a&&this.select(a,a.__viewPos__,r,!0)}}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a);const o=document.createElement("g");return o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o),this.visibleAndFetchedTiles().filter(s=>s.tileData&&s.tileData.length).map(s=>({graphics:s.graphics,td:s.tileData})).forEach(({td:s,graphics:u})=>{const c=document.createElement("g");if(c.setAttribute("transform",`translate(${u.position.x},${u.position.y})scale(${u.scale.x},${u.scale.y})`),o.appendChild(c),s.uid in this.drawnAnnotations){const l=this.drawnAnnotations[s.uid],f=document.createElement("rect");f.setAttribute("x",l.x),f.setAttribute("y",l.y),f.setAttribute("width",l.width),f.setAttribute("height",l.height),f.setAttribute("fill",this.options.fillColor||"grey"),f.setAttribute("opacity",.3),f.style.stroke=this.options.fillColor||"grey",f.style.strokeWidth="1px",c.appendChild(f)}}),[a,a]}},{key:"setBorderStyle",value:function(r,a=this.options.rectangleDomainStrokeColor,o=this.options.rectangleDomainStrokeWidth,s=this.options.rectangleDomainStrokeOpacity){r.lineStyle(typeof o<"u"?o:1,at(a||"black"),typeof s<"u"?s:1)}},{key:"setFill",value:function(r,a=this.options.rectangleDomainFillColor,o=this.options.rectangleDomainFillOpacity){r.beginFill(at(a||"grey"),typeof o<"u"?o:.4)}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.refreshTiles(),this.draw()}}]),n}(bs),FC=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r,a){var o;return _classCallCheck3(this,n),o=t.call(this,i,r),o.pubSub=i.pubSub,o.options=r,o.isVertical=a,o.rects={},o.defaultColor=Kn("red"),o}return _createClass3(n,[{key:"draw",value:function(){const r=typeof this.options.minRectWidth<"u"?this.options.minRectWidth:10,a=typeof this.options.fill<"u"?Kn(this.options.fill):this.defaultColor,o=typeof this.options.fillOpacity<"u"?+this.options.fillOpacity:.2,s=typeof this.options.stroke<"u"?Kn(this.options.stroke):this.defaultColor,u=typeof this.options.strokeWidth<"u"?+this.options.strokeWidth:1,c=typeof this.options.strokeOpacity<"u"?+this.options.strokeOpacity:0;let l;this.options.strokePos&&this.options.strokePos.length&&(l=Array.isArray(this.options.strokePos)?this.options.strokePos:[this.options.strokePos]),_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this);const f=this.pMain;f.clear();const h=performance.now();this.options.regions.forEach(d=>{const p=`${d[0]}-${d[1]}`;this.rects[p]||(this.rects[p]={graphics:new Be.PIXI.Graphics},f.addChild(this.rects[p].graphics)),this.rects[p].timeStamp=h;const m=Kn(d[2])||a;let g=Kn(d[3])||s;g||(g=m);const v=Be.PIXI.utils.rgb2hex([m.r/255,m.g/255,m.b/255]),E=Be.PIXI.utils.rgb2hex([g.r/255,g.g/255,g.b/255]);l?(f.lineStyle(1,E,0),f.beginFill(E,+d[5]||c)):(f.lineStyle(u,E,+d[5]||c),f.beginFill(v,+d[4]||o));const y=this.isVertical?this._yScale:this._xScale;let T=y(+d[0]);const b=y(+d[1]);let S=b-T;const w=typeof d[6]<"u"?d[6]:r;S<w&&(T=(T+b)/2-w/2,S=w),l?(f.lineStyle(1,E,0),f.beginFill(E,+d[5]||c),l.forEach(D=>{(D==="top"||D==="around")&&(this.isVertical?f.drawRect(0,T,u,S):f.drawRect(T,0,S,u)),(D==="right"||D==="around")&&(this.isVertical?f.drawRect(0,T,this.dimensions[0],u):f.drawRect(T,0,u,this.dimensions[1])),(D==="bottom"||D==="around")&&(this.isVertical?f.drawRect(this.dimensions[0]-u,T,u,S):f.drawRect(T,this.dimensions[1]-u,S,u)),(D==="left"||D==="around")&&(this.isVertical?f.drawRect(0,T+S-u,this.dimensions[0],u):f.drawRect(T+S-u,0,u,this.dimensions[1]))})):f.lineStyle(u,E,+d[5]||c),this.rects[p].graphics.clear(),this.rects[p].graphics.interactive=!0,this.rects[p].graphics.buttonMode=!0,f.beginFill(v,+d[4]||o),this.isVertical?(f.drawRect(0,T,this.dimensions[0],S),this.rects[p].graphics.hitArea=new Be.PIXI.Rectangle(0,T,this.dimensions[0],S)):(f.drawRect(T,0,S,this.dimensions[1]),this.rects[p].graphics.hitArea=new Be.PIXI.Rectangle(T,0,S,this.dimensions[1])),this.rects[p].graphics.mousedown=()=>{this.rects[p].mouseDownTime=performance.now()},this.rects[p].graphics.mouseup=D=>{performance.now()-this.rects[p].mouseDownTime<WP&&this.pubSub.publish("app.click",{type:"annotation",event:D,payload:d})}}),Object.values(this.rects).filter(d=>d.timeStamp!==h).forEach(d=>f.removeChild(d.graphics))}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.draw()}}]),n}(Qr),J2=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.drawnRects=new Set,a.pMain=a.pMobile,a}return _createClass3(n,[{key:"tileToLocalId",value:function(r){return`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return`${r.join(".")}`}},{key:"localToRemoteId",value:function(r){const a=r.split(".");return a.slice(0,a.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const r=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),a=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let o=Math.max(r,a);return o=Math.min(o,this.maxZoom),this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?o=Math.min(this.options.maxZoom,o):console.error("Invalid maxZoom on track:",this)),o}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(a=>({tileId:this.tileToLocalId(a),remoteId:this.tileToRemoteId(a)})),this.visibleTileIds=new Set(this.visibleTiles.map(a=>a.tileId))}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel();const r=this._xScale.copy();r.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.xTiles=Xe.calculateTiles(this.zoomLevel,r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=Xe.calculateTiles(this.zoomLevel,r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const a=this.xTiles,o=this.yTiles,s=this.zoomLevel,c=this.tilesetInfo.max_width/2**s,l=[];for(let f=0;f<a.length;f++)for(let h=f;h<o.length;h++){if((h-f-2)*(this._xScale(c)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])continue;const p=[s,a[f],o[h]];p.mirrored=!1,l.push(p)}this.setVisibleTiles(l)}},{key:"initTile",value:function(r){_get4(_getPrototypeOf4(n.prototype),"initTile",this).call(this,r),this.drawTile(r)}},{key:"destroyTile",value:function(r,a){}},{key:"draw",value:function(){this.delayDrawing||this.drawnRects.clear(),_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(r){if(!r.graphics)return;const a=r.graphics;a.clear();const o=at(this.options.rectangleDomainStrokeColor?this.options.rectangleDomainStrokeColor:"black"),s=at(this.options.rectangleDomainFillColor?this.options.rectangleDomainFillColor:"grey");if(a.lineStyle(1/this.pMain.scale.x,o,1),a.beginFill(s,.4),a.alpha=this.options.rectangleDomainOpacity?this.options.rectangleDomainOpacity:.5,!!r.tileData.sort)for(const u of r.tileData){const c=this._refXScale(u.xStart),l=this._refXScale(u.xEnd),f=this._refYScale(u.yStart),h=this._refYScale(u.yEnd),d=u.uid;this.drawnRects.has(d)||(this.drawnRects.add(d),a.drawRect(c,f,l-c,h-f),a.pivot.x=this._refXScale(0),a.pivot.y=this._refYScale(0),a.scale.x=-1/Math.sqrt(2),a.rotation=-3*Math.PI/4,a.scale.y=1/Math.sqrt(2),a.position.x=this._refXScale(0),a.position.y=0)}}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"refScalesChanged",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"refScalesChanged",this).call(this,r,a);for(const o in this.fetchedTiles){const s=this.fetchedTiles[o];if(s.sprite){const u=s.graphics;u.pivot.x=this._refXScale(0),u.pivot.y=this._refYScale(0),u.scale.x=-1/Math.sqrt(2),u.rotation=-3*Math.PI/4,u.scale.y=1/Math.sqrt(2),u.position.x=this._refXScale(0),u.position.y=0}}}},{key:"zoomed",value:function(r,a,o,s,u){_get4(_getPrototypeOf4(n.prototype),"zoomed",this).call(this,r,a,o,s,u),this.pMain.position.x=s,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=o,this.pMain.scale.y=o,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-o,this.pMain.position.y=this.position[1]),this.draw()}},{key:"leftTrackDraw",value:function(){this.draw()}}]),n}(bs),eH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.drawnRects=new Set,a}return _createClass3(n,[{key:"tileToLocalId",value:function(r){return`${r.join(".")}`}},{key:"tileToRemoteId",value:function(r){return`${r.join(".")}`}},{key:"localToRemoteId",value:function(r){const a=r.split(".");return a.slice(0,a.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const r=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),a=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);let o=Math.max(r,a);return o=Math.min(o,this.maxZoom),o}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(a=>({tileId:this.tileToLocalId(a),remoteId:this.tileToRemoteId(a)})),this.visibleTileIds=new Set(this.visibleTiles.map(a=>a.tileId))}},{key:"calculateVisibleTiles",value:function(r=!0){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel(),this.xTiles=Xe.calculateTiles(this.zoomLevel,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=Xe.calculateTiles(this.zoomLevel,this._yScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const a=this.xTiles,o=this.yTiles,s=this.zoomLevel,u=[];for(let c=0;c<a.length;c++)for(let l=0;l<o.length;l++){const f=[s,a[c],o[l]];u.push(f)}this.setVisibleTiles(u)}},{key:"initTile",value:function(r){}},{key:"destroyTile",value:function(r,a){}},{key:"draw",value:function(){this.drawnRects.clear(),_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(r){if(!r.graphics)return;const a=r.graphics;a.clear();const o=at("green");a.lineStyle(1,255,1),a.beginFill(o,.8),a.alpha=.5;for(const s of r.tileData){const u=this._xScale(s.xStart),c=this._xScale(s.xEnd),l=this._yScale(s.yStart),f=this._yScale(s.yEnd),h=s.uid;if(this.drawnRects.has(h))continue;this.drawnRects.add(h);const d=6,p=6;let m=f-l,g=c-u;const v=(u+c)/2,E=(l+f)/2;m<d&&(m=d),g<p&&(g=p),a.drawRect(v-m/2,E-g/2,m,g)}}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.refreshTiles(),this.draw()}}]),n}(bs);function io(e,t,n=LA){const i={};return i.absToChr=r=>i.chrPositions?Wn(r,i):null,i.chrToAbs=([r,a]=[])=>i.chrPositions?Pg(r,a,i):null,Xe.text(e,(r,a)=>{if(r)t&&t(null);else{const o=Ab(a),s=jg(o);Object.keys(s).forEach(u=>{i[u]=s[u]}),t&&t(i)}},n).then(()=>i)}let sh=function(){function e(t){_classCallCheck3(this,e),this.chromInfo=t,this.chromInfoBisector=hu(n=>n.pos).left}return _createClass3(e,[{key:"scalesToPositionText",value:function(n,i,r=!1){if(this.chromInfo===null||!n||!i)return"";const a=Wn(n.domain()[0],this.chromInfo),o=Wn(n.domain()[1],this.chromInfo),s=Wn(i.domain()[0],this.chromInfo),u=Wn(i.domain()[1],this.chromInfo);let c=null;const l=bi(",d");return a[0]!==o[0]?c=`${a[0]}:${l(Math.floor(a[1]))}-${o[0]}:${l(Math.ceil(o[1]))}`:c=`${a[0]}:${l(Math.floor(a[1]))}-${l(Math.ceil(o[1]))}`,r&&(s[0]!==u[0]?c+=` & ${s[0]}:${l(Math.floor(s[1]))}-${u[0]}:${l(Math.ceil(u[1]))}`:c+=` & ${s[0]}:${l(Math.floor(s[1]))}-${l(Math.ceil(u[1]))}`),(a[2]<=0||o[2]>0||r&&(s[2]<=0||u[2]>0))&&(c+=` [offset ${a[2]},${o[2]}`,r&&(c+=`:${s[2]},${u[2]}`),c+="]"),c}},{key:"convertNumberNotation",value:function(n){let i=n;if(!i.includes("M",i.length-1)&&!i.includes("K",i.length-1))return i;let r=0,a=0;if(i.includes("M",i.length-1)?(r=6,i=i.replace("M","")):(r=3,i=i.replace("K","")),Number.isNaN(+i))return n;i=(+i).toString(),i.includes(".")&&(a=i.length-1-i.indexOf("."),i=(+i.replace(".","")).toString());const o=r-a;return o<0?n:(i+="0".repeat(o),i)}},{key:"parsePosition",value:function(n,i=null){const r=n.split(":");let a=null,o=0;r.length>1?(a=r[0],o=+this.convertNumberNotation(r[1].replace(/,/g,""))):r[0]in this.chromInfo.chrPositions?(a=r[0],o=0,i!==null&&(o=+this.chromInfo.chromLengths[a])):(o=+this.convertNumberNotation(r[0].replace(/,/g,"")),a=null,i&&(a=i));let s=null;return a===null?(a=i,s=o):a in this.chromInfo.chrPositions&&(s=this.chromInfo.chrPositions[a].pos+o),[a,o,s]}},{key:"matchRangesToLarger",value:function(n,i){if(n[1]-n[0]<i[1]-i[0]){const a=i[1]-i[0]-(n[1]-n[0]);return[[n[0]-a/2,n[1]+a/2],i]}const r=n[1]-n[0]-(i[1]-i[0]);return[n,[i[0]-r/2,i[1]+r/2]]}},{key:"getSearchRange",value:function(n){if(n.length===0)return null;let i=n.split("-");i=i.filter(a=>a.length>0);let r=null;if(i[0].indexOf("-")===0&&(i[0]=i[0].slice(3,i[0].length)),i.length>1){let[a,o,s]=this.parsePosition(i[0]),[u,c,l]=this.parsePosition(i[1],a);const f=[s,l];[a,o,s]=this.parsePosition(i[1]),[u,c,l]=this.parsePosition(i[0],a),a===null&&u!==null&&([a,o,s]=this.parsePosition(i[1],u));const h=[s,l];return h[1]-h[0]>f[1]-f[0]?h:f}if(i[0]in this.chromInfo.chrPositions){const a=+this.chromInfo.chrPositions[i[0]].pos;r=[a,a+ +this.chromInfo.chromLengths[i[0]]]}else{const[a,o,s]=this.parsePosition(i[0]);r=[s-8e6,s+8e6]}return r[0]>r[1]?[r[1],r[0]]:r}},{key:"parseOffset",value:function(n){const i=n.split(":");if(i.length===0)return[[0,0],[0,0]];if(i.length===1){const o=i[0].split(",");return[[+o[0],+o[1]],[0,0]]}const r=i[0].split(","),a=i[1].split(",");return[[+r[0],+r[1]],[+a[0],+a[1]]]}},{key:"searchPosition",value:function(n){let i=null,r=null;n=n.trim();const a=/\[offset (.+?)\]/.exec(n);let o=[[0,0],[0,0]];a&&(n=n.replace(a[0],""),o=this.parseOffset(a[1]));const s=n.split(" & ");return s.length>1?(i=this.getSearchRange(s[0].split(" ")[0]),r=this.getSearchRange(s[1].split(" ")[0])):i=this.getSearchRange(s[0]),i!==null&&r!==null&&([i,r]=this.matchRangesToLarger(i,r)),i&&(i[0]+=o[0][0],i[1]+=o[0][1]),r&&(r[0]+=o[1][0],r[1]+=o[1][1]),[i,r]}}]),e}(),tH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{dataConfig:o,animate:s,pubSub:u}=i;a.searchField=null,a.chromInfo=null,a.animate=s;const c=o.server,l=o.tilesetUid,f=`${c}/chrom-sizes/?id=${l}`;return io(f,h=>{a.chromInfo=h,a.searchField=new sh(a.chromInfo),a.draw(),a.texts=[];for(let d=0;d<a.chromInfo.cumPositions.length;d++){const p=[];for(let m=0;m<a.chromInfo.cumPositions.length;m++){const g=`${a.chromInfo.cumPositions[d].chr}/${a.chromInfo.cumPositions[m].chr}`,v=new Be.PIXI.Text(g,{fontSize:"14px",fontFamily:"Arial",fill:"red"});v.anchor.x=.5,v.anchor.y=.5,v.visible=!1,v.hashValue=Math.random(),p.push(v),a.pMain.addChild(v)}a.texts.push(p)}a.draw(),a.animate()},u),a}return _createClass3(n,[{key:"draw",value:function(){const r=[];if(!this.texts||!this.searchField)return;const a=Wn(this._xScale.domain()[0],this.chromInfo),o=Wn(this._xScale.domain()[1],this.chromInfo),s=Wn(this._yScale.domain()[0],this.chromInfo),u=Wn(this._yScale.domain()[1],this.chromInfo);for(let c=0;c<this.texts.length;c++)for(let l=0;l<this.texts.length;l++)this.texts[c][l].visible=!1;for(let c=a[3];c<=o[3];c++)for(let l=s[3];l<=u[3];l++){const f=this.chromInfo.cumPositions[c],h=this.chromInfo.cumPositions[l],d=f.pos+this.chromInfo.chromLengths[f.chr]/2,p=h.pos+this.chromInfo.chromLengths[h.chr]/2,m=this._xScale(d),g=this._yScale(p),v=this.texts[c][l];v.x=m,v.y=g,v.updateTransform();const E=v.getBounds(),y=E.width/2,T=E.height/2;m+y>this.dimensions[0]?v.x-=m+y-this.dimensions[0]:m-y<0&&(v.x-=m-y),g+T>this.dimensions[1]?v.y-=g+T-this.dimensions[1]:g-T<0&&(v.y-=g-T),v.visible=!0,r.push({importance:this.texts[c][l].hashValue,text:this.texts[c][l],caption:null})}this.hideOverlaps(r)}},{key:"hideOverlaps",value:function(r){let a=[];a=r.map(o=>{const s=o.text;s.updateTransform();const u=s.getBounds();return[u.x,u.y,u.x+u.width,u.y+u.height]}),hp(a,(o,s)=>{r[o].importance>r[s].importance?r[s].text.visible=0:r[o].text.visible=0})}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.draw()}}]),n}(Qr),dp=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{chromInfoPath:o,dataConfig:s,animate:u,pubSub:c,orientation:l="2d",isOverlay:f=!1}=i;a.searchField=null,a.chromInfo=null,a.animate=u,a.orientation=l,a.isOverlay=f;let h=o;return h||(h=`${s.server}/chrom-sizes/?id=${s.tilesetUid}`),io(h,d=>{a.chromInfo=d,a.searchField=new sh(a.chromInfo),a.texts=[],a.lineGraphics=new Be.PIXI.Graphics,a.lineGraphics1dH=new Be.PIXI.Graphics,a.lineGraphics1dV=new Be.PIXI.Graphics,a.lineGraphics2d=new Be.PIXI.Graphics,a.mask1dH=new Be.PIXI.Graphics,a.mask1dV=new Be.PIXI.Graphics,a.mask2d=new Be.PIXI.Graphics,a.lineGraphics.addChild(a.lineGraphics1dH),a.lineGraphics1dH.addChild(a.mask1dH),a.lineGraphics.addChild(a.lineGraphics1dV),a.lineGraphics1dV.addChild(a.mask1dV),a.lineGraphics.addChild(a.lineGraphics2d),a.lineGraphics2d.addChild(a.mask2d),a.pMain.addChild(a.lineGraphics),a.draw(),a.animate()},c),a}return _createClass3(n,[{key:"drawLines",value:function(r=this.orientation,a=0,o=0){let s=this.lineGraphics;this.isOverlay&&r==="1d-horizontal"&&(s=this.lineGraphics1dH),this.isOverlay&&r==="1d-vertical"&&(s=this.lineGraphics1dV),this.isOverlay&&r==="2d"&&(s=this.lineGraphics2d);const u=at(this.options.lineStrokeColor?this.options.lineStrokeColor:"blue"),c=this.options.lineStrokeWidth?this.options.lineStrokeWidth:1;s.lineStyle(c,u,1),(r==="2d"||r==="1d-horizontal")&&(s.moveTo(this._xScale(0)+a,o),s.lineTo(this._xScale(0)+a,this.dimensions[1]+o)),(r==="2d"||r==="1d-vertical")&&(s.moveTo(a,this._yScale(0)+o),s.lineTo(this.dimensions[0]+a,this._yScale(0)+o));for(let l=0;l<this.chromInfo.cumPositions.length;l++){const f=this.chromInfo.cumPositions[l],h=f.pos+ +this.chromInfo.chromLengths[f.chr]+1;(r==="2d"||r==="1d-horizontal")&&(s.moveTo(this._xScale(h)+a,o),s.lineTo(this._xScale(h)+a,this.dimensions[1]+o)),(r==="2d"||r==="1d-vertical")&&(s.moveTo(a,this._yScale(h)+o),s.lineTo(this.dimensions[0]+a,this._yScale(h)+o))}}},{key:"draw",value:function(){if(!!this.texts&&!!this.searchField)if(this.lineGraphics.clear(),this.isOverlay){this.lineGraphics1dH.clear(),this.lineGraphics1dV.clear(),this.lineGraphics2d.clear(),this.mask1dH.clear(),this.mask1dV.clear(),this.mask2d.clear(),this.mask1dH.beginFill(16777215),this.mask1dV.beginFill(16777215),this.mask2d.beginFill(16711680);for(let r=0;r<this.options.orientationsAndPositions.length;r++){const a=this.options.orientationsAndPositions[r].orientation,{left:o,top:s,width:u,height:c}=this.options.orientationsAndPositions[r].position;a==="1d-horizontal"&&this.mask1dH.drawRect(o,s,u,c),a==="1d-vertical"&&this.mask1dV.drawRect(o,s,u,c),a==="2d"&&this.mask2d.drawRect(o,s,u,c),this.drawLines(a,o,s)}this.lineGraphics1dH.mask=this.mask1dH,this.lineGraphics1dV.mask=this.mask1dV,this.lineGraphics2d.mask=this.mask2d}else this.drawLines()}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.draw()}},{key:"createSvgLine",value:function(r,a,o,s,u,c){const l=document.createElement("line");return l.setAttribute("x1",r),l.setAttribute("x2",a),l.setAttribute("y1",o),l.setAttribute("y2",s),l.setAttribute("stroke",u),l.setAttribute("stroke-width",c),l}},{key:"drawLinesSvg",value:function(r,a,o,s,u=0,c=0){const l=this.options.lineStrokeColor?this.options.lineStrokeColor:"blue",f=this.options.lineStrokeWidth;if(a==="2d"||a==="1d-vertical"){const h=this._yScale(0);h>0&&h<c+s&&r.appendChild(this.createSvgLine(u,o+u,h+c,h+c,l,f))}if(a==="2d"||a==="1d-horizontal"){const h=this._xScale(0);h>0&&h<u+o&&r.appendChild(this.createSvgLine(h+u,h+u,c,s+c,l,f))}for(let h=0;h<this.chromInfo.cumPositions.length;h++){const d=this.chromInfo.cumPositions[h],p=d.pos+ +this.chromInfo.chromLengths[d.chr]+1;if(a==="2d"||a==="1d-vertical"){const m=this._yScale(p);m>0&&m<c+s&&r.appendChild(this.createSvgLine(u,o+u,m+c,m+c,l,f))}if(a==="2d"||a==="1d-horizontal"){const m=this._xScale(p);m>0&&m<u+o&&r.appendChild(this.createSvgLine(m+u,m+u,c,s+c,l,f))}}}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a);const o=document.createElement("g");if(r.appendChild(o),a.setAttribute("id","ChromosomeGrid"),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),!this.chromInfo)return[a,r];if(this.isOverlay)for(let s=0;s<this.options.orientationsAndPositions.length;s++){const u=this.options.orientationsAndPositions[s].orientation,{left:c,top:l,width:f,height:h}=this.options.orientationsAndPositions[s].position;this.drawLinesSvg(o,u,f,h,c,l)}else this.drawLinesSvg(o,this.orientation,...this.dimensions);return[a,r]}}]),n}(Qr);const WTe=300;let nH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{chromInfoPath:o,pubSub:s}=i;return a.pubSub=s,a.rects={},io(o,u=>{a.chromInfo=u,a.draw()},a.pubSub),a}return _createClass3(n,[{key:"draw",value:function(){if(!this.chromInfo)return;const r=this.options.minRectWidth?this.options.minRectWidth:10,a=this.options.minRectWidth?this.options.minRectHeight:10;_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this);const o=this.pMain;o.clear();const s=performance.now();this.options.regions.forEach(u=>{const c=u.slice(0,6).join("-");this.rects[c]||(this.rects[c]={graphics:new Be.PIXI.Graphics},o.addChild(this.rects[c].graphics)),this.rects[c].timeStamp=s;const l=Kn(u[6]);let f=Kn(u[7]);f||(f=l);const h=Be.PIXI.utils.rgb2hex([l.r/255,l.g/255,l.b/255]),d=Be.PIXI.utils.rgb2hex([f.r/255,f.g/255,f.b/255]);o.lineStyle(1,d,f.opacity),o.beginFill(h,l.opacity);let p=this._xScale(this.chromInfo.chrPositions[u[0]].pos+ +u[1]);const m=this._xScale(this.chromInfo.chrPositions[u[0]].pos+ +u[2]);let g=this._yScale(this.chromInfo.chrPositions[u[3]].pos+ +u[4]);const v=this._yScale(this.chromInfo.chrPositions[u[3]].pos+ +u[5]);let E=m-p,y=v-g;const T=typeof u[8]<"u"?u[8]:r,b=typeof u[9]<"u"?u[9]:a;E<T&&(p=(p+m)/2-T/2,E=T),y<b&&(g=(g+v)/2-b/2,y=b),o.drawRect(p,g,E,y),this.rects[c].graphics.clear(),this.rects[c].graphics.interactive=!0,this.rects[c].graphics.buttonMode=!0,this.rects[c].graphics.hitArea=new Be.PIXI.Rectangle(p,g,E,y),this.rects[c].graphics.mousedown=()=>{this.rects[c].mouseDownTime=performance.now()},this.rects[c].graphics.mouseup=S=>{performance.now()-this.rects[c].mouseDownTime<WTe&&this.pubSub.publish("app.click",{type:"annotation",event:S,payload:u})}})}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0]}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.draw()}}]),n}(Qr);const qTe=200,XTe=6,KTe=2,rH=7829367;let iH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{dataConfig:o,animate:s,chromInfoPath:u,isShowGlobalMousePosition:c}=i;a.searchField=null,a.chromInfo=null,a.dataConfig=o,a.pTicks=new Be.PIXI.Graphics,a.pMain.addChild(a.pTicks),a.gTicks={},a.tickTexts={},a.options=r,a.isShowGlobalMousePosition=c,a.textFontSize=12,a.textFontFamily="Arial",a.textFontColor="#808080",a.textStrokeColor=a.getTheme()===pn?"#000000":"#ffffff",a.pixiTextConfig={fontSize:+a.options.fontSize?`${+a.options.fontSize}px`:`${a.textFontSize}px`,fontFamily:a.textFontFamily,fill:a.options.color||a.textFontColor,lineJoin:"round",stroke:a.options.stroke||a.textStrokeColor,strokeThickness:2},a.stroke=at(a.pixiTextConfig.stroke),a.tickWidth=qTe,a.tickHeight=XTe,a.tickTextSeparation=KTe,a.tickColor=a.options.tickColor?at(a.options.tickColor):rH,a.animate=s,a.pubSubs=[],a.options.showMousePosition&&!a.hideMousePosition&&(a.hideMousePosition=pl(_assertThisInitialized3(a),a.is2d,a.isShowGlobalMousePosition()));let l=u;return l||(l=`${o.server}/chrom-sizes/?id=${o.tilesetUid}`),io(l,f=>{a.chromInfo=f,a.searchField=new sh(a.chromInfo),a.rerender(a.options,!0),a.draw(),a.animate()},a.pubSub),a}return _createClass3(n,[{key:"initBoundsTicks",value:function(){this.pTicks&&(this.pMain.removeChild(this.pTicks),this.pTicks=null),this.gBoundTicks||(this.gBoundTicks=new Be.PIXI.Graphics,this.leftBoundTick=new Be.PIXI.Text("",this.pixiTextConfig),this.rightBoundTick=new Be.PIXI.Text("",this.pixiTextConfig),this.gBoundTicks.addChild(this.leftBoundTick),this.gBoundTicks.addChild(this.rightBoundTick),this.pMain.addChild(this.gBoundTicks)),this.texts=[]}},{key:"initChromLabels",value:function(){if(!!this.chromInfo){this.gBoundTicks&&(this.pMain.removeChild(this.gBoundTicks),this.gBoundTicks=null),this.pTicks||(this.pTicks=new Be.PIXI.Graphics,this.pMain.addChild(this.pTicks)),this.texts=[],this.pTicks.removeChildren();for(let r=0;r<this.chromInfo.cumPositions.length;r++){const a=this.chromInfo.cumPositions[r].chr;this.gTicks[a]=new Be.PIXI.Graphics,this.tickTexts[a]||(this.tickTexts[a]=[]);const o=new Be.PIXI.Text(a,this.pixiTextConfig);o.hashValue=Math.random(),this.pTicks.addChild(o),this.pTicks.addChild(this.gTicks[a]),this.texts.push(o)}}}},{key:"rerender",value:function(r,a){const o=JSON.stringify(r);!a&&o===this.prevOptions||(this.prevOptions=o,this.options=r,this.tickTexts={},this.pixiTextConfig.fontSize=+this.options.fontSize?`${+this.options.fontSize}px`:this.pixiTextConfig.fontSize,this.pixiTextConfig.fill=this.options.color||this.pixiTextConfig.fill,this.pixiTextConfig.stroke=this.options.stroke||this.pixiTextConfig.stroke,this.stroke=at(this.pixiTextConfig.stroke),this.tickColor=this.options.tickColor?at(this.options.tickColor):rH,this.options.tickPositions==="ends"?this.initBoundsTicks():this.initChromLabels(),_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r,a),this.options.showMousePosition&&!this.hideMousePosition&&(this.hideMousePosition=pl(this,this.is2d,this.isShowGlobalMousePosition())),!this.options.showMousePosition&&this.hideMousePosition&&(this.hideMousePosition(),this.hideMousePosition=void 0))}},{key:"formatTick",value:function(r){const a=this._xScale.domain(),o=a[1]-a[0],s=_u(r,o),u=bi(","),c=Zs(`,.${s}`,o);let l=u;return this.options.tickFormat==="si"?l=c:this.options.tickFormat==="plain"?l=u:this.options.tickPositions==="ends"&&(l=c),l(r)}},{key:"drawBoundsTicks",value:function(r,a){const o=this.gBoundTicks;o.clear(),o.lineStyle(1,0);const s=this.options.reverseOrientation?0:this.dimensions[1],u=this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight;o.moveTo(1,s),o.lineTo(1,u),o.moveTo(this.dimensions[0]-1,s),o.lineTo(this.dimensions[0]-1,u),this.leftBoundTick.x=0,this.leftBoundTick.y=this.options.reverseOrientation?u+this.tickTextSeparation:u-this.tickTextSeparation,this.leftBoundTick.text=`${r[0]}: ${this.formatTick(r[1])}`,this.leftBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.x=this.dimensions[0],this.rightBoundTick.text=`${a[0]}: ${this.formatTick(a[1])}`,this.rightBoundTick.y=this.options.reverseOrientation?u+this.tickTextSeparation:u-this.tickTextSeparation,this.rightBoundTick.anchor.y=this.options.reverseOrientation?0:1,this.rightBoundTick.anchor.x=1,this.flipText&&(this.leftBoundTick.scale.x=-1,this.leftBoundTick.anchor.x=1,this.rightBoundTick.scale.x=-1,this.rightBoundTick.anchor.x=0),this.leftBoundTick.tickLine=[1,this.dimensions[1],1,this.dimensions[1]-this.tickHeight],this.rightBoundTick.tickLine=[this.dimensions[0]-1,this.dimensions[1],this.dimensions[0]-1,this.dimensions[1]-this.tickHeight],this.tickTexts={},this.tickTexts.all=[this.leftBoundTick,this.rightBoundTick]}},{key:"drawTicks",value:function(r){const a=this.gTicks[r.chr];a.visible=!0,a.clear();const o=+this.chromInfo.chromLengths[r.chr],s=Math.max(this._xScale(r.pos),0),u=Math.min(this._xScale(r.pos+o),this.dimensions[0]),c=(u-s)/this.tickWidth,f=Et().domain([Math.max(1,this._xScale.invert(0)-r.pos),Math.min(o,this._xScale.invert(this.dimensions[0])-r.pos)]).range(s,u).ticks(c).filter(E=>Number.isInteger(E)),h=this.tickTexts[r.chr],d=this.options.fontIsLeftAligned?(+this.options.fontSize||this.textFontSize)/2:this.tickHeight,p=this.flipText?-1:1,m=this.options.fontIsLeftAligned?p*4:0;let g=this.options.fontIsLeftAligned?0:d+this.tickTextSeparation;for(this.options.reverseOrientation&&(g=this.dimensions[1]-g);h.length<f.length;){const E=new Be.PIXI.Text("",this.pixiTextConfig);h.push(E),this.gTicks[r.chr].addChild(E)}for(;h.length>f.length;){const E=h.pop();this.gTicks[r.chr].removeChild(E),E.destroy()}let v=0;for(;v<f.length;){h[v].visible=!0,h[v].anchor.x=this.options.fontIsLeftAligned?0:.5,h[v].anchor.y=this.options.reverseOrientation?0:1,this.flipText&&(h[v].scale.x=-1),h[v].x=this._xScale(r.pos+f[v])+m,h[v].y=this.dimensions[1]-g,h[v].text=f[v]===0?`${r.chr}: 1`:`${r.chr}: ${this.formatTick(f[v])}`;const E=this._xScale(r.pos+f[v]);h[v].tickLine=[E-1,this.dimensions[1],E-1,this.dimensions[1]-d-1];const y=this.options.reverseOrientation?0:this.dimensions[1],T=this.options.reverseOrientation?d:this.dimensions[1]-d;a.lineStyle(1,this.stroke),a.moveTo(E-1,y),a.lineTo(E-1,T-1),this.options.fontIsLeftAligned?(a.lineTo(E+2*p+1*p,T-1),a.lineTo(E+2*p+1*p,T+1),a.lineTo(E+1,T+1)):a.lineTo(E+1,T-1),a.lineTo(E+1,y),a.lineStyle(1,this.tickColor),a.moveTo(E,y),a.lineTo(E,T),this.options.fontIsLeftAligned&&a.lineTo(E+2*p,T),v+=1}for(;v<h.length;)h[v].visible=!1,v+=1;return f.length}},{key:"draw",value:function(){if(this.allTexts=[],!this.texts||!this.searchField)return;const r=Wn(this._xScale.domain()[0],this.chromInfo),a=Wn(this._xScale.domain()[1],this.chromInfo);if(!r||!a){console.warn("Empty chromInfo:",this.dataConfig,this.chromInfo);return}if(this.options.tickPositions==="ends"){if(!this.gBoundTicks)return;this.gBoundTicks.visible=!0,this.drawBoundsTicks(r,a);return}if(!this.pTicks)return;for(let s=0;s<this.texts.length;s++)this.texts[s].visible=!1,this.gTicks[this.chromInfo.cumPositions[s].chr].visible=!1;let o=this.options.fontIsLeftAligned?0:this.tickHeight+this.tickTextSeparation;this.options.reverseOrientation&&(o=this.dimensions[1]-o),Object.keys(this.chromInfo.chrPositions).forEach(s=>{if(this.tickTexts[s])for(let u=0;u<this.tickTexts[s].length;u++)this.tickTexts[s][u].visible=!1});for(let s=r[3];s<=a[3];s++){const u=this.chromInfo.cumPositions[s],c=u.pos+this.chromInfo.chromLengths[u.chr]/2,l=this._xScale(c),f=this.texts[s];f.anchor.x=this.options.fontIsLeftAligned?0:.5,f.anchor.y=this.options.reverseOrientation?0:1,f.x=l,f.y=this.dimensions[1]-o,f.updateTransform(),this.flipText&&(f.scale.x=-1);const h=this.drawTicks(u);f.visible=h<=0,this.allTexts.push({importance:f.hashValue,text:f,caption:null})}this.hideOverlaps(this.allTexts)}},{key:"hideOverlaps",value:function(r){let a=[];a=r.map(({text:o},s)=>{o.updateTransform();const u=o.getBounds();return[u.x,u.y,u.x+u.width,u.y+u.height]}),hp(a,(o,s)=>{r[o].importance>r[s].importance?r[s].text.visible=!1:r[o].text.visible=!1})}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),[this.pMain.position.x,this.pMain.position.y]=this.position}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.draw()}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a),a.setAttribute("class","chromosome-labels");const o=document.createElement("g");return r.appendChild(o),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),this.allTexts.filter(s=>s.text.visible).forEach(s=>{const u=Nb(s.text);o.appendChild(u)}),Object.values(this.tickTexts).forEach(s=>{s.filter(u=>u.visible).forEach(u=>{let c=Nb(u);o.appendChild(c),c=LR(u.x,this.options.reverseOrientation?0:this.dimensions[1],u.x,this.options.reverseOrientation?this.tickHeight:this.dimensions[1]-this.tickHeight,1,this.tickColor);const l=document.createElement("line");l.setAttribute("x1",u.tickLine[0]),l.setAttribute("y1",u.tickLine[1]),l.setAttribute("x2",u.tickLine[2]),l.setAttribute("y2",u.tickLine[3]),l.setAttribute("style","stroke: grey"),o.appendChild(c),o.appendChild(l)})}),[a,r]}}]),n}(Qr),aH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{animate:o}=i;return a.pMain=a.pMobile,a.colorScale=$u,a.continuousScaling=!1,r&&r.colorRange&&(a.colorScale=Ao(r.colorRange)),a.animate=o,a.options=r,a.pubSubs=[],a}return _createClass3(n,[{key:"rerender",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r,a),this.zoomed(this.xScale(),this.yScale(),this.pMain.scale.x,this.pMain.position.x,this.pMain.position.y)}},{key:"calculateZoomLevel",value:function(){let r=null;if(this.tilesetInfo.resolutions){const a=Xe.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),o=Xe.calculateZoomLevelFromResolutions(this.tilesetInfo.resolutions,this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);r=Math.min(a,o)}else{const a=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),o=Xe.calculateZoomLevel(this._xScale,this.tilesetInfo.min_pos[1],this.tilesetInfo.max_pos[1]);r=Math.max(a,o),r=Math.min(r,this.maxZoom)}return this.options&&this.options.maxZoom&&(this.options.maxZoom>=0?r=Math.min(this.options.maxZoom,r):console.error("Invalid maxZoom on track:",this)),r}},{key:"calculateVisibleTiles",value:function(){if(!this.tilesetInfo)return;this.zoomLevel=this.calculateZoomLevel();const r=this._xScale.copy();if(r.domain([this._xScale.invert(this._xScale.range()[0]-this.dimensions[1]*Math.sqrt(2)),this._xScale.invert(this._xScale.range()[1]+this.dimensions[1]*Math.sqrt(2))]),this.tilesetInfo.resolutions){const f=this.tilesetInfo.resolutions.map(h=>+h).sort((h,d)=>d-h);this.xTiles=Xe.calculateTilesFromResolution(f[this.zoomLevel],r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0]),this.yTiles=Xe.calculateTilesFromResolution(f[this.zoomLevel],r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0])}else this.xTiles=Xe.calculateTiles(this.zoomLevel,r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width),this.yTiles=Xe.calculateTiles(this.zoomLevel,r,this.tilesetInfo.min_pos[0],this.tilesetInfo.max_pos[0],this.tilesetInfo.max_zoom,this.tilesetInfo.max_width);const a=this.xTiles,o=this.yTiles,s=this.zoomLevel,c=this.tilesetInfo.max_width/2**s,l=[];for(let f=0;f<a.length;f++)for(let h=f;h<o.length;h++){if((h-f-2)*(this._xScale(c)-this._xScale(0))*Math.sqrt(2)/2>this.dimensions[1])continue;const p=[s,a[f],o[h]];p.mirrored=!1,p.dataTransform=this.options.dataTransform?this.options.dataTransform:"default",l.push(p)}this.setVisibleTiles(l)}},{key:"tileDataToCanvas",value:function(r){const a=document.createElement("canvas");a.width=256,a.height=256;const o=a.getContext("2d");o.fillStyle="transparent",o.fillRect(0,0,a.width,a.height);const s=new ImageData(r,a.width,a.height);return o.putImageData(s,0,0),a}},{key:"setSpriteProperties",value:function(r,a,o,s){const{tileX:u,tileY:c,tileWidth:l,tileHeight:f}=this.getTilePosAndDimensions(a,o),h=u+l,d=c+f;r.width=this._refXScale(h)-this._refXScale(u),r.height=this._refYScale(d)-this._refYScale(c),r.x=this._refXScale(u),r.y=this._refYScale(c)}},{key:"pixDataFunction",value:function(r,a){if(a){const o=r.graphics,s=this.tileDataToCanvas(a.pixData),u=Be.PIXI.VERSION[0]==="4"?Be.PIXI.Texture.fromCanvas(s,Be.PIXI.SCALE_MODES.NEAREST):Be.PIXI.Texture.from(s,{scaleMode:Be.PIXI.SCALE_MODES.NEAREST});r.sprite=new Be.PIXI.Sprite(u),r.canvas=s,this.setSpriteProperties(r.sprite,r.tileData.zoomLevel,r.tileData.tilePos,r.mirrored),o.pivot.x=this._refXScale(0),o.pivot.y=this._refYScale(0),o.scale.x=-1/Math.sqrt(2),o.rotation=-3*Math.PI/4,o.scale.y=1/Math.sqrt(2),o.position.x=this._refXScale(0),o.position.y=0,o.removeChildren(),o.addChild(r.sprite)}this.renderingTiles.delete(r.tileId)}},{key:"refScalesChanged",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"refScalesChanged",this).call(this,r,a);for(const o in this.fetchedTiles){const s=this.fetchedTiles[o];if(s.sprite){this.setSpriteProperties(s.sprite,s.tileData.zoomLevel,s.tileData.tilePos,s.mirrored);const u=s.graphics;u.pivot.x=this._refXScale(0),u.pivot.y=this._refYScale(0),u.scale.x=-1/Math.sqrt(2),u.rotation=-3*Math.PI/4,u.scale.y=1/Math.sqrt(2),u.position.x=this._refXScale(0),u.position.y=0}}}},{key:"zoomed",value:function(r,a,o,s,u){_get4(_getPrototypeOf4(n.prototype),"zoomed",this).call(this,r,a,o,s,u),_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this),this.pMain.position.x=s,this.pMain.position.y=this.position[1]+this.dimensions[1],this.pMain.scale.x=o,this.pMain.scale.y=o,this.options.oneDHeatmapFlipped&&(this.pMain.scale.y=-o,this.pMain.position.y=this.position[1])}},{key:"leftTrackDraw",value:function(){this.draw()}},{key:"exportSVG",value:function(){let r=null,a=null;[a,r]=_get4(_getPrototypeOf4(n.prototype),"superSVG",this).call(this);const o=document.createElement("g");r.appendChild(o),o.setAttribute("transform",`translate(${this.pMain.position.x},${this.pMain.position.y}) scale(${this.pMain.scale.x},${this.pMain.scale.y})`);for(const u of this.visibleAndFetchedTiles()){const c=document.createElement("g"),l=u.graphics,f=l.rotation*180/Math.PI,h=`translate(${l.position.x},${l.position.y}) rotate(${f}) scale(${l.scale.x},${l.scale.y}) translate(${-l.pivot.x},${-l.pivot.y})`;c.setAttribute("transform",h);const d=u.sprite.rotation*180/Math.PI,p=document.createElement("g");p.setAttribute("transform",`translate(${u.sprite.x},${u.sprite.y}) rotate(${d}) scale(${u.sprite.scale.x},${u.sprite.scale.y})`);const m=document.createElement("image");m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u.canvas.toDataURL()),m.setAttribute("width",256),m.setAttribute("height",256),p.appendChild(m),c.appendChild(p),o.appendChild(c)}const s=this.exportColorBarSVG();return r.appendChild(s),[a,a]}}]),n}(ip),oH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.tilesetInfo={},a.errorTextText=`Unknown track type: ${r.type}`,a}return _createClass3(n,[{key:"zoomed",value:function(){this.draw()}}]),n}(Qr),sH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.axis=new _v(_assertThisInitialized3(a)),a.pBase.addChild(a.axis.pAxis),a}return _createClass3(n,[{key:"initTile",value:function(r){this.scale.minRawValue=this.minVisibleValueInTiles(),this.scale.maxRawValue=this.minVisibleValueInTiles(),this.scale.minValue=this.scale.minRawValue,this.scale.maxValue=this.scale.maxRawValue,this.drawTile(r)}},{key:"drawTile",value:function(r){if(!r.graphics)return;const a=r.graphics,o=6,s=4;a.clear(),this.valueScale=Xo().domain([this.minValue()+.01,this.maxValue()]).range([this.dimensions[1]-o/2,o/2]);const u=at("black");a.lineStyle(1,u,.3),a.beginFill(u,.3),this.drawAxis(this.valueScale),r.tileData.forEach(c=>{const l=c.fields,f=+c.chrOffset,h=+l[1]+f,d=+l[2]+f,p=+l[3],m=this._xScale(h),g=this._xScale(d),v=Math.max(g-m,s),E=this.valueScale(p),y=(g+m)/2;a.drawRect(y-v/2,E-o/2,v,o)})}},{key:"minVisibleValueInTiles",value:function(){let r=this.visibleAndFetchedIds();return r.length===0&&(r=Object.keys(this.fetchedTiles)),Math.min.apply(null,r.map(o=>+Math.min(...this.fetchedTiles[o].tileData.filter(s=>!Number.isNaN(s.fields[3])).map(s=>+s.fields[3]))))}},{key:"maxVisibleValueInTiles",value:function(){let r=this.visibleAndFetchedIds();return r.length===0&&(r=Object.keys(this.fetchedTiles)),Math.max.apply(null,r.map(o=>+Math.max(...this.fetchedTiles[o].tileData.filter(s=>!Number.isNaN(s.fields[3])).map(s=>+s.fields[3]))))}}]),n}(ah),lH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{registerViewportChanged:o,removeViewportChanged:s,setDomainsCallback:u}=i,c=Pt.nice();return a.uid=c,a.options=r,a.hasFromView=!i.projectionXDomain||!i.projectionYDomain,a.removeViewportChanged=s,a.setDomainsCallback=u,a.viewportXDomain=a.hasFromView?null:i.projectionXDomain,a.viewportYDomain=a.hasFromView?null:i.projectionYDomain,a.brush=tb().on("brush",a.brushed.bind(_assertThisInitialized3(a))),a.gBrush=a.gMain.append("g").attr("id",`brush-${a.uid}`).call(a.brush),a.gBrush.selectAll(".overlay").style("pointer-events","none"),a.gBrush.selectAll(".handle--n").style("pointer-events","none"),a.gBrush.selectAll(".handle--s").style("pointer-events","none"),a.gBrush.selectAll(".handle--w").style("pointer-events","none"),a.gBrush.selectAll(".handle--e").style("pointer-events","none"),o(c,a.viewportChanged.bind(_assertThisInitialized3(a))),a.rerender(),a.draw(),a}return _createClass3(n,[{key:"brushed",value:function(r){const a=r.selection;if(!this._xScale||!this._yScale)return;const o=[this._xScale.invert(a[0][0]),this._xScale.invert(a[1][0])],s=[this._yScale.invert(a[0][1]),this._yScale.invert(a[1][1])];this.hasFromView||(this.viewportXDomain=o,this.viewportYDomain=s),this.setDomainsCallback(o,s)}},{key:"viewportChanged",value:function(r,a){const o=r.domain(),s=a.domain();this.viewportXDomain=o,this.viewportYDomain=s,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),_get4(_getPrototypeOf4(n.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const r=this._xScale(this.viewportXDomain[0]),a=this._yScale(this.viewportYDomain[0]),o=this._xScale(this.viewportXDomain[1]),s=this._yScale(this.viewportYDomain[1]),u=[[r,a],[o,s]];this.brush.on("brush",null),this.gBrush.call(this.brush.move,u),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.draw()}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.draw()}},{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r);const a=this._xScale.range(),o=this._yScale.range(),s=a[1]-a[0],u=o[1]-o[0];this.brush.extent([[a[0]-s,o[0]-u],[a[1]+s,o[1]+u]]),this.gBrush.call(this.brush),this.draw()}}]),n}(Cs),uH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{registerViewportChanged:o,removeViewportChanged:s,setDomainsCallback:u}=i,c=Pt.nice();return a.uid=c,a.options=r,a.hasFromView=!i.projectionXDomain,a.removeViewportChanged=s,a.setDomainsCallback=u,a.viewportXDomain=a.hasFromView?null:i.projectionXDomain,a.viewportYDomain=a.hasFromView?null:[0,0],a.brush=wg().on("brush",a.brushed.bind(_assertThisInitialized3(a))),a.gBrush=a.gMain.append("g").attr("id",`brush-${a.uid}`).call(a.brush),a.gBrush.selectAll(".overlay").style("pointer-events","none"),a.gBrush.selectAll(".handle--ne").style("pointer-events","none"),a.gBrush.selectAll(".handle--nw").style("pointer-events","none"),a.gBrush.selectAll(".handle--sw").style("pointer-events","none"),a.gBrush.selectAll(".handle--se").style("pointer-events","none"),a.gBrush.selectAll(".handle--n").style("pointer-events","none"),a.gBrush.selectAll(".handle--s").style("pointer-events","none"),o(c,a.viewportChanged.bind(_assertThisInitialized3(a))),a.rerender(),a.draw(),a}return _createClass3(n,[{key:"brushed",value:function(r){const a=r.selection;if(!this._xScale||!this._yScale)return;const o=[this._xScale.invert(a[0]),this._xScale.invert(a[1])],s=this.viewportYDomain;this.hasFromView||(this.viewportXDomain=o),this.setDomainsCallback(o,s)}},{key:"viewportChanged",value:function(r,a,o=!0){const s=r.domain(),u=a.domain();this.viewportXDomain=s,this.viewportYDomain=u,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),_get4(_getPrototypeOf4(n.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const r=this._xScale(this.viewportXDomain[0]),a=this._xScale(this.viewportXDomain[1]),o=[r,a];this.brush.on("brush",null),this.gBrush.call(this.brush.move,o),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.draw()}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.draw()}},{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r);const a=this._xScale.range(),o=this._yScale.range(),s=a[1]-a[0];this.brush.extent([[a[0]-s,o[0]],[a[1]+s,o[1]]]),this.gBrush.call(this.brush),this.draw()}}]),n}(Cs),cH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{registerViewportChanged:o,removeViewportChanged:s,setDomainsCallback:u}=i,c=Pt.nice();return a.uid=c,a.options=r,a.hasFromView=!i.projectionYDomain,a.removeViewportChanged=s,a.setDomainsCallback=u,a.viewportXDomain=a.hasFromView?null:[0,0],a.viewportYDomain=a.hasFromView?null:i.projectionYDomain,a.brush=yf().on("brush",a.brushed.bind(_assertThisInitialized3(a))),a.gBrush=a.gMain.append("g").attr("id",`brush-${a.uid}`).call(a.brush),a.gBrush.selectAll(".overlay").style("pointer-events","none"),a.gBrush.selectAll(".handle--ne").style("pointer-events","none"),a.gBrush.selectAll(".handle--nw").style("pointer-events","none"),a.gBrush.selectAll(".handle--sw").style("pointer-events","none"),a.gBrush.selectAll(".handle--se").style("pointer-events","none"),a.gBrush.selectAll(".handle--e").style("pointer-events","none"),a.gBrush.selectAll(".handle--w").style("pointer-events","none"),o(c,a.viewportChanged.bind(_assertThisInitialized3(a))),a.rerender(),a.draw(),a}return _createClass3(n,[{key:"brushed",value:function(r){const a=r.selection;if(!this._xScale||!this._yScale)return;const o=this.viewportXDomain,s=[this._yScale.invert(a[0]),this._yScale.invert(a[1])];this.hasFromView||(this.viewportYDomain=s),this.setDomainsCallback(o,s)}},{key:"viewportChanged",value:function(r,a,o=!0){const s=r.domain(),u=a.domain();this.viewportXDomain=s,this.viewportYDomain=u,this.draw()}},{key:"remove",value:function(){this.removeViewportChanged(this.uid),_get4(_getPrototypeOf4(n.prototype),"remove",this).call(this)}},{key:"rerender",value:function(){this.gBrush.selectAll(".selection").attr("fill",this.options.projectionFillColor).attr("stroke",this.options.projectionStrokeColor).attr("fill-opacity",this.options.projectionFillOpacity).attr("stroke-opacity",this.options.projectionStrokeOpacity).attr("stroke-width",this.options.strokeWidth)}},{key:"draw",value:function(){if(!this._xScale||!this.yScale||!this.viewportXDomain||!this.viewportYDomain)return;const r=this._yScale(this.viewportYDomain[0]),a=this._yScale(this.viewportYDomain[1]),o=[r,a];this.brush.on("brush",null),this.gBrush.call(this.brush.move,o),this.brush.on("brush",this.brushed.bind(this))}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.draw()}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.draw()}},{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r);const a=this._xScale.range(),o=this._yScale.range(),s=o[1]-o[0];this.brush.extent([[a[0],o[0]-s],[a[1],o[1]+s]]),this.gBrush.call(this.brush),this.draw()}}]),n}(Cs);const HC="__mixwith_appliedMixin",$C="__mixwith_wrappedMixin",hH=e=>e[$C]||e,ZTe=(e,t)=>{const n=t(e);return n.prototype[HC]=hH(t),n},QTe=(e,t)=>e.hasOwnProperty(HC)&&e[HC]===hH(t),JTe=(e,t)=>{for(;e!==null;){if(QTe(e,t))return!0;e=Object.getPrototypeOf(e)}return!1},UC=(e,t)=>(Object.setPrototypeOf(t,e),e[$C]||(e[$C]=e),t),GC="__mixwith_cachedApplications",eEe=e=>UC(e,t=>{let n=t[GC];n||(t[GC]=new Map,n=t[GC]);let i=n.get(e);return i||(i=e(t),n.set(e,i)),i}),tEe=e=>UC(e,t=>JTe(t.prototype,e)?t:e(t)),nEe=e=>UC(e,t=>ZTe(t,e)),sy=e=>tEe(eEe(nEe(e)));let rEe=function(){function e(t){_classCallCheck3(this,e),this.superclass=t||function(){function n(){_classCallCheck3(this,n)}return _createClass3(n)}()}return _createClass3(e,[{key:"with",value:function(...n){return n.reduce((i,r)=>r(i),this.superclass)}}]),e}();const lh=e=>new rEe(e),zC=sy(e=>function(t){_inherits3(i,t);var n=_createSuper3(i);function i(r,a){var o;_classCallCheck3(this,i),o=n.call(this,r,a);const{animate:s}=r;return o.highlighted=!1,o.animate=s,o.MOUSEOVER_RADIUS=4,o.pubSub=r.pubSub,o.pubSubs.push(o.pubSub.subscribe("app.mouseMove",o.mouseMoveHandler.bind(_assertThisInitialized3(o)))),o}return _createClass3(i,[{key:"setPosition",value:function(a){_get4(_getPrototypeOf4(i.prototype),"setPosition",this).call(this,a),this.pMain.position.x=this.position[0],this.pMain.position.y=this.position[1]}},{key:"zoomed",value:function(a,o){_get4(_getPrototypeOf4(i.prototype),"zoomed",this).call(this,a,o),this.draw()}},{key:"respondsToPosition",value:function(){return this.highlighted}}]),i}(e)),iEe=sy(e=>function(t){_inherits3(i,t);var n=_createSuper3(i);function i(){return _classCallCheck3(this,i),n.apply(this,arguments)}return _createClass3(i,[{key:"drawHorizontalRule",value:function(a){let o=at(this.options.color||"black");this.highlighted&&(o=at("red")),a.lineStyle(this.strokeWidth,o,this.strokeOpacity);let s=0;for(;s<this.dimensions[0];)a.moveTo(s,this._yScale(this.yPosition)),a.lineTo(s+this.dashLength,this._yScale(this.yPosition)),s+=this.dashLength+this.dashGap}},{key:"isMouseOverHorizontalLine",value:function(a){return Math.abs(a.y-this.position[1]-this._yScale(this.yPosition))<this.MOUSEOVER_RADIUS}}]),i}(e));let fH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.yPosition=i.yPosition,a.strokeWidth=2,a.strokeOpacity=1,a.dashLength=5,a.dashGap=3,a}return _createClass3(n,[{key:"mouseMoveHandler",value:function(r){if(this.isWithin(r.x,r.y)&&this.isMouseOverHorizontalLine(r)){this.highlighted=!0,this.draw();return}this.highlighted=!1,this.draw()}},{key:"draw",value:function(){const r=this.pMain;r.clear(),this.drawHorizontalRule(r),this.animate()}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a);const o=document.createElement("g");o.setAttribute("class","horizontal-rule"),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o);const s=this.options.color||"black",u=document.createElement("line");return u.setAttribute("stroke",s),u.setAttribute("stroke-width",this.strokeWidth),u.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),u.setAttribute("x1",0),u.setAttribute("y1",this._yScale(this.yPosition)),u.setAttribute("x2",this.dimensions[0]),u.setAttribute("y2",this._yScale(this.yPosition)),o.appendChild(u),[a,r]}}]),n}(lh(Qr).with(zC,iEe));const dH=sy(e=>function(t){_inherits3(i,t);var n=_createSuper3(i);function i(){return _classCallCheck3(this,i),n.apply(this,arguments)}return _createClass3(i,[{key:"drawVerticalRule",value:function(a){let o=at(this.options.color||"black");this.highlighted&&(o=at("red")),a.lineStyle(this.strokeWidth,o,this.strokeOpacity);let s=0;for(;s<this.dimensions[1];)a.moveTo(this._xScale(this.xPosition),s),a.lineTo(this._xScale(this.xPosition),s+this.dashLength),s+=this.dashLength+this.dashGap}},{key:"isMouseOverVerticalLine",value:function(a){return Math.abs(a.x-this.position[0]-this._xScale(this.xPosition))<this.MOUSEOVER_RADIUS}}]),i}(e));let pH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.xPosition=i.xPosition,a.strokeWidth=2,a.strokeOpacity=1,a.dashLength=5,a.dashGap=3,a}return _createClass3(n,[{key:"draw",value:function(){const r=this.pMain;r.clear(),this.drawVerticalRule(r),this.animate()}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a);const o=document.createElement("g");o.setAttribute("class","vertical-rule"),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o);const s=this.options.color||"black",u=document.createElement("line");return u.setAttribute("stroke",s),u.setAttribute("stroke-width",this.strokeWidth),u.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),u.setAttribute("x1",this._xScale(this.xPosition)),u.setAttribute("y1",0),u.setAttribute("x2",this._xScale(this.xPosition)),u.setAttribute("y2",this.dimensions[1]),o.appendChild(u),[a,r]}},{key:"mouseMoveHandler",value:function(r){this.highlighted=this.isWithin(r.x,r.y)&&this.isMouseOverVerticalLine(r),this.draw()}}]),n}(lh(Qr).with(zC,dH)),mH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{x:o,y:s}=i;return a.xPosition=o,a.yPosition=s,a.strokeWidth=2,a.strokeOpacity=1,a.dashLength=5,a.dashGap=3,a}return _createClass3(n,[{key:"draw",value:function(){const r=this.pMain;r.clear(),this.drawHorizontalRule(r),this.drawVerticalRule(r)}},{key:"mouseMoveHandler",value:function(r){this.highlighted=this.isWithin(r.x,r.y)&&(this.isMouseOverHorizontalLine(r)||this.isMouseOverVerticalLine(r)),this.draw()}},{key:"drawHorizontalRule",value:function(r){let a=at(this.options.color||"black");this.highlighted&&(a=at("red")),r.lineStyle(this.strokeWidth,a,this.strokeOpacity);let o=0;for(;o<this.dimensions[0];)r.moveTo(o,this._yScale(this.yPosition)),r.lineTo(o+this.dashLength,this._yScale(this.yPosition)),o+=this.dashLength+this.dashGap}},{key:"isMouseOverHorizontalLine",value:function(r){return Math.abs(r.y-this.position[1]-this._yScale(this.yPosition))<this.MOUSEOVER_RADIUS}},{key:"exportSVG",value:function(){let r=null,a=null;_get4(_getPrototypeOf4(n.prototype),"exportSVG",this)?[a,r]=_get4(_getPrototypeOf4(n.prototype),"exportSVG",this).call(this):(a=document.createElement("g"),r=a);const o=document.createElement("g");o.setAttribute("class","cross-rule"),o.setAttribute("transform",`translate(${this.position[0]},${this.position[1]})`),r.appendChild(o);const s=this.options.color||"black",u=document.createElement("line");u.setAttribute("stroke",s),u.setAttribute("stroke-width",this.strokeWidth),u.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),u.setAttribute("x1",this._xScale(this.xPosition)),u.setAttribute("y1",0),u.setAttribute("x2",this._xScale(this.xPosition)),u.setAttribute("y2",this.dimensions[1]);const c=document.createElement("line");return c.setAttribute("stroke",s),c.setAttribute("stroke-width",this.strokeWidth),c.setAttribute("stroke-dasharray",`${this.dashLength} ${this.dashGap}`),c.setAttribute("x1",0),c.setAttribute("y1",this._yScale(this.yPosition)),c.setAttribute("x2",this.dimensions[0]),c.setAttribute("y2",this._yScale(this.yPosition)),o.appendChild(u),o.appendChild(c),[a,r]}}]),n}(lh(Qr).with(zC,dH)),pp=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{animate:o}=i;return a.visibleTiles=new Set,a.visibleTileIds=new Set,a.fetching=new Set,a.fetchedTiles={},a.tileGraphics={},a.minX=typeof a.options.minPos<"u"&&!Number.isNaN(+a.options.minPos)?+a.options.minPos:-180,a.maxX=+a.options.maxPos||180,a.maxX=typeof a.options.maxPos<"u"&&!Number.isNaN(+a.options.maxPos)?+a.options.maxPos:180,a.minY=a.options.minY||a.minX,a.maxY=a.options.maxY||a.maxX,a.maxZoom=19,a.maxWidth=a.maxX-a.minX,a.animate=o,a.uuid=Pt.nice(),a.refreshTilesDebounced=Fg(a.refreshTiles.bind(_assertThisInitialized3(a)),Ng),a}return _createClass3(n,[{key:"visibleAndFetchedIds",value:function(){return Object.keys(this.fetchedTiles).filter(r=>this.visibleTileIds.has(r))}},{key:"visibleAndFetchedTiles",value:function(){return this.visibleAndFetchedIds().map(r=>this.fetchedTiles[r])}},{key:"setVisibleTiles",value:function(r){this.visibleTiles=r.map(a=>({tileId:this.tileToLocalId(a),remoteId:this.tileToRemoteId(a),mirrored:a.mirrored})),this.visibleTileIds=new Set(this.visibleTiles.map(a=>a.tileId))}},{key:"removeAllTiles",value:function(){const r=new Set(Object.keys(this.fetchedTiles));this.removeTiles([...r])}},{key:"refreshTiles",value:function(){this.calculateVisibleTiles();const r=new Set(Object.keys(this.fetchedTiles)),a=[...this.visibleTiles].filter(s=>!this.fetching.has(s.remoteId)&&!r.has(s.tileId));for(let s=0;s<a.length;s++)this.fetching.add(a[s].remoteId);const o=[...r].filter(s=>!this.visibleTileIds.has(s));this.removeTiles(o),this.fetchNewTiles(a)}},{key:"removeTiles",value:function(r){!r.length||!this.areAllVisibleTilesLoaded()||(r.forEach(a=>{const o=a;this.destroyTile(this.fetchedTiles[o]),o in this.tileGraphics&&(this.pMain.removeChild(this.tileGraphics[o]),delete this.tileGraphics[o]),delete this.fetchedTiles[o]}),this.synchronizeTilesAndGraphics(),this.draw())}},{key:"tileToLocalId",value:function(r){return r.join(".")}},{key:"tileToRemoteId",value:function(r){return r.join(".")}},{key:"localToRemoteId",value:function(r){const a=r.split(".");return a.slice(0,a.length-1).join(".")}},{key:"calculateZoomLevel",value:function(){const r=Xe.calculateZoomLevel(this._xScale,this.minX,this.maxX),a=Xe.calculateZoomLevel(this._xScale,this.minY,this.maxY);let o=Math.min(Math.max(r,a),this.maxZoom);return this.options.maxZoom&&(this.options.maxZoom>=0?o=Math.min(this.options.maxZoom,o):console.error("Invalid maxZoom on track:",this)),o}},{key:"calculateVisibleTiles",value:function(){this.zoomLevel=this.calculateZoomLevel(),this.xTiles=Xe.calculateTiles(this.zoomLevel,this._xScale,this.minX,this.maxX,this.maxZoom,this.maxWidth),this.yTiles=Xe.calculateTiles(this.zoomLevel,this._yScale,this.minY,this.maxY,this.maxZoom,this.maxWidth);const r=this.xTiles,a=this.yTiles,o=this.zoomLevel,s=[];for(let u=0;u<r.length;u++)for(let c=0;c<a.length;c++){const l=[o,r[u],a[c]];s.push(l)}this.setVisibleTiles(s)}},{key:"zoomed",value:function(r,a,o,s,u){_get4(_getPrototypeOf4(n.prototype),"zoomed",this).call(this,r,a),this.xScale(r),this.yScale(a),this.pMain.position.x=s,this.pMain.position.y=u,this.pMain.scale.x=o,this.pMain.scale.y=o,this.refreshTilesDebounced(),this.draw()}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r)}},{key:"setDimensions",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setDimensions",this).call(this,r)}},{key:"areAllVisibleTilesLoaded",value:function(){const r=new Set(Object.keys(this.fetchedTiles)),a=[...this.visibleTileIds];for(let o=0;o<a.length;o++)if(!r.has(a[o]))return!1;return!0}},{key:"allTilesLoaded",value:function(){}},{key:"minValue",value:function(r){return r&&(this.scale.minValue=r),this.scale.minValue}},{key:"maxValue",value:function(r){return r&&(this.scale.maxValue=r),this.scale.maxValue}},{key:"minRawValue",value:function(){return this.scale.minRawValue}},{key:"maxRawValue",value:function(){return this.scale.maxRawValue}},{key:"getTilePosAndDimensions",value:function(r,a){const o=this.maxWidth/2**r,s=o,u=this.minX+a[0]*o,c=this.minY+a[1]*s;return{tileX:u,tileY:c,tileWidth:o,tileHeight:s}}},{key:"setSpriteProperties",value:function(r,a,o){const{tileX:s,tileY:u,tileWidth:c,tileHeight:l}=this.getTilePosAndDimensions(a,o);r.x=this._refXScale(s),r.y=this._refYScale(u);const f=s+c,h=u+l;r.width=this._refXScale(f)-this._refXScale(s),r.height=this._refYScale(h)-this._refYScale(u)}},{key:"initTile",value:function(r){const a=new Be.PIXI.Texture(new Be.PIXI.BaseTexture(r.tileData.img)),o=new Be.PIXI.Sprite(a),s=r.graphics;r.sprite=o,this.setSpriteProperties(r.sprite,r.tileData.zoomLevel,r.tileData.tilePos),s.removeChildren(),s.addChild(r.sprite)}},{key:"updateTile",value:function(r){}},{key:"destroyTile",value:function(r){}},{key:"addMissingGraphics",value:function(){const r=Object.keys(this.fetchedTiles);for(let a=0;a<r.length;a++)if(!(r[a]in this.tileGraphics)){const o=new Be.PIXI.Graphics;this.pMain.addChild(o),this.fetchedTiles[r[a]].graphics=o,this.initTile(this.fetchedTiles[r[a]]),this.tileGraphics[r[a]]=o}}},{key:"updateExistingGraphics",value:function(){const r=Object.keys(this.fetchedTiles);for(let a=0;a<r.length;a++)this.updateTile(this.fetchedTiles[r[a]])}},{key:"synchronizeTilesAndGraphics",value:function(){this.addMissingGraphics(),this.updateExistingGraphics()}},{key:"loadTileData",value:function(r,a){let o=this.lruCache.get(r.tileId);return o||(o=a(r.data,r.type),this.lruCache.put(r.tileId,o)),o}},{key:"getTileUrl",value:function(r){const a=["a","b","c"],o=Math.floor(Math.random()*a.length);return`https://${a[o]}.tile.openstreetmap.org/${r[0]}/${r[1]}/${r[2]}.png`}},{key:"fetchNewTiles",value:function(r){if(r.length>0){const a=[...new Set(r.map(o=>o.remoteId))];for(const o of a){const s=o.split("."),u=this.getTileUrl(s),c=new Image;c.crossOrigin="Anonymous",c.src=u,c.onload=()=>{const l={};l[o]={tileId:o,img:c,zoomLevel:+s[0],tilePos:[+s[1],+s[2]],tileSrc:u},this.receivedTiles(l)}}}}},{key:"receivedTiles",value:function(r){for(let a=0;a<this.visibleTiles.length;a++){const o=this.visibleTiles[a].tileId;!r[this.visibleTiles[a].remoteId]||this.visibleTiles[a].remoteId in r&&(o in this.fetchedTiles||(this.fetchedTiles[o]=this.visibleTiles[a]),this.fetchedTiles[o].tileData=r[this.visibleTiles[a].remoteId])}for(const a in r)r[a]&&this.fetching.has(a)&&this.fetching.delete(a);this.synchronizeTilesAndGraphics(),this.refreshTiles(),this.draw(),this.animate()}},{key:"draw",value:function(){this.delayDrawing||_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this)}},{key:"drawTile",value:function(){}},{key:"refScalesChanged",value:function(r,a){_get4(_getPrototypeOf4(n.prototype),"refScalesChanged",this).call(this,r,a);for(const o in this.fetchedTiles){const s=this.fetchedTiles[o];s.sprite&&this.setSpriteProperties(s.sprite,s.tileData.zoomLevel,s.tileData.tilePos)}}}]),n}(Qr),gH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"initTile",value:function(r){F4.bind(this)(r),this.drawTile(r)}},{key:"drawTile",value:function(r){B4.bind(this)(r)}},{key:"areAllVisibleTilesLoaded",value:function(){return!0}},{key:"fetchNewTiles",value:function(r){r.forEach(a=>{const s=a.remoteId.split("."),u={zoomLevel:s[0],tilePos:s.slice(1,s.length).map(c=>+c)};this.fetchedTiles[a.tileId]=a,this.fetchedTiles[a.tileId].tileData=u,this.fetching.has(a.remoteId)&&this.fetching.delete(a.remoteId)}),this.synchronizeTilesAndGraphics(),this.draw(),this.animate()}},{key:"draw",value:function(){_get4(_getPrototypeOf4(n.prototype),"draw",this).call(this)}}]),n}(pp),vH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.style=r.style,a.options.accessToken||(a.errorTextText="No access token provided in the viewconf's track options ('accessToken' option).",a.drawError()),a}return _createClass3(n,[{key:"rerender",value:function(r){_get4(_getPrototypeOf4(n.prototype),"rerender",this).call(this,r),r.style!==this.style&&(this.style=r.style,this.removeAllTiles(),this.refreshTiles())}},{key:"getTileUrl",value:function(r){const a=this.options&&this.options.style?this.options.style:"streets-v10",o=this.options&&+this.options.tileSize?+this.options.tileSize:256;return`https://api.mapbox.com/styles/v1/mapbox/${a}/tiles/${o}/${r[0]}/${r[1]}/${r[2]}?access_token=${this.options.accessToken}`}}]),n}(pp),yH=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;return _classCallCheck3(this,n),a=t.call(this,i,r),a.style=r.style,a.options.tileSource||(a.errorTextText="No tile source string provided in the options. It should be in the form of http://a.com/{z}/{x}/{y}",a.drawError()),a}return _createClass3(n,[{key:"getTileUrl",value:function(r){let a=this.options.tileSource.replace("{z}",r[0]);return a=a.replace("{x}",r[1]),a=a.replace("{y}",r[2]),a}}]),n}(pp);const aEe=(e,t,n,i=gT)=>{const r=n[e.type];return r?new r.dataFetcher(i,e,t):e.type==="genbank"?new P4(e,t):e.type==="local-tiles"?new R4(e,t):new Iv(e,t)};var lt=1e-6,mp=1e-12,Ot=Math.PI,Bn=Ot/2,ly=Ot/4,ti=Ot*2,mn=180/Ot,ut=Ot/180,Vt=Math.abs,uh=Math.atan,ni=Math.atan2,rt=Math.cos,uy=Math.ceil,TH=Math.exp,jC=Math.hypot,cy=Math.log,VC=Math.pow,Ke=Math.sin,Zi=Math.sign||function(e){return e>0?1:e<0?-1:0},ur=Math.sqrt,YC=Math.tan;function EH(e){return e>1?0:e<-1?Ot:Math.acos(e)}function ri(e){return e>1?Bn:e<-1?-Bn:Math.asin(e)}function bH(e){return(e=Ke(e/2))*e}function Pn(){}function hy(e,t){e&&SH.hasOwnProperty(e.type)&&SH[e.type](e,t)}var _H={Feature:function(e,t){hy(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)hy(n[i].geometry,t)}},SH={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){WC(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)WC(n[i],t,0)},Polygon:function(e,t){AH(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)AH(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)hy(n[i],t)}};function WC(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function AH(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)WC(e[n],t,1);t.polygonEnd()}function Ta(e,t){e&&_H.hasOwnProperty(e.type)?_H[e.type](e,t):hy(e,t)}var fy=new Xn,dy=new Xn,CH,DH,qC,XC,KC,ao={point:Pn,lineStart:Pn,lineEnd:Pn,polygonStart:function(){fy=new Xn,ao.lineStart=oEe,ao.lineEnd=sEe},polygonEnd:function(){var e=+fy;dy.add(e<0?ti+e:e),this.lineStart=this.lineEnd=this.point=Pn},sphere:function(){dy.add(ti)}};function oEe(){ao.point=lEe}function sEe(){wH(CH,DH)}function lEe(e,t){ao.point=wH,CH=e,DH=t,e*=ut,t*=ut,qC=e,XC=rt(t=t/2+ly),KC=Ke(t)}function wH(e,t){e*=ut,t*=ut,t=t/2+ly;var n=e-qC,i=n>=0?1:-1,r=i*n,a=rt(t),o=Ke(t),s=KC*o,u=XC*a+s*rt(r),c=s*i*Ke(r);fy.add(ni(c,u)),qC=e,XC=a,KC=o}function uEe(e){return dy=new Xn,Ta(e,ao),dy*2}function py(e){return[ni(e[1],e[0]),ri(e[2])]}function Kl(e){var t=e[0],n=e[1],i=rt(n);return[i*rt(t),i*Ke(t),Ke(n)]}function my(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ch(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ZC(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function gy(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function vy(e){var t=ur(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Rn,vi,Fn,xi,Zl,IH,kH,hh,gp,ks,$o,Uo={point:QC,lineStart:xH,lineEnd:PH,polygonStart:function(){Uo.point=RH,Uo.lineStart=cEe,Uo.lineEnd=hEe,gp=new Xn,ao.polygonStart()},polygonEnd:function(){ao.polygonEnd(),Uo.point=QC,Uo.lineStart=xH,Uo.lineEnd=PH,fy<0?(Rn=-(Fn=180),vi=-(xi=90)):gp>lt?xi=90:gp<-lt&&(vi=-90),$o[0]=Rn,$o[1]=Fn},sphere:function(){Rn=-(Fn=180),vi=-(xi=90)}};function QC(e,t){ks.push($o=[Rn=e,Fn=e]),t<vi&&(vi=t),t>xi&&(xi=t)}function OH(e,t){var n=Kl([e*ut,t*ut]);if(hh){var i=ch(hh,n),r=[i[1],-i[0],0],a=ch(r,i);vy(a),a=py(a);var o=e-Zl,s=o>0?1:-1,u=a[0]*mn*s,c,l=Vt(o)>180;l^(s*Zl<u&&u<s*e)?(c=a[1]*mn,c>xi&&(xi=c)):(u=(u+360)%360-180,l^(s*Zl<u&&u<s*e)?(c=-a[1]*mn,c<vi&&(vi=c)):(t<vi&&(vi=t),t>xi&&(xi=t))),l?e<Zl?Pi(Rn,e)>Pi(Rn,Fn)&&(Fn=e):Pi(e,Fn)>Pi(Rn,Fn)&&(Rn=e):Fn>=Rn?(e<Rn&&(Rn=e),e>Fn&&(Fn=e)):e>Zl?Pi(Rn,e)>Pi(Rn,Fn)&&(Fn=e):Pi(e,Fn)>Pi(Rn,Fn)&&(Rn=e)}else ks.push($o=[Rn=e,Fn=e]);t<vi&&(vi=t),t>xi&&(xi=t),hh=n,Zl=e}function xH(){Uo.point=OH}function PH(){$o[0]=Rn,$o[1]=Fn,Uo.point=QC,hh=null}function RH(e,t){if(hh){var n=e-Zl;gp.add(Vt(n)>180?n+(n>0?360:-360):n)}else IH=e,kH=t;ao.point(e,t),OH(e,t)}function cEe(){ao.lineStart()}function hEe(){RH(IH,kH),ao.lineEnd(),Vt(gp)>lt&&(Rn=-(Fn=180)),$o[0]=Rn,$o[1]=Fn,hh=null}function Pi(e,t){return(t-=e)<0?t+360:t}function fEe(e,t){return e[0]-t[0]}function NH(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function dEe(e){var t,n,i,r,a,o,s;if(xi=Fn=-(Rn=vi=1/0),ks=[],Ta(e,Uo),n=ks.length){for(ks.sort(fEe),t=1,i=ks[0],a=[i];t<n;++t)r=ks[t],NH(i,r[0])||NH(i,r[1])?(Pi(i[0],r[1])>Pi(i[0],i[1])&&(i[1]=r[1]),Pi(r[0],i[1])>Pi(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(o=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(s=Pi(i[1],r[0]))>o&&(o=s,Rn=r[0],Fn=i[1])}return ks=$o=null,Rn===1/0||vi===1/0?[[NaN,NaN],[NaN,NaN]]:[[Rn,vi],[Fn,xi]]}var vp,yy,Ty,Ey,by,_y,Sy,Ay,JC,eD,tD,MH,LH,ii,ai,oi,Ea={sphere:Pn,point:nD,lineStart:BH,lineEnd:FH,polygonStart:function(){Ea.lineStart=gEe,Ea.lineEnd=vEe},polygonEnd:function(){Ea.lineStart=BH,Ea.lineEnd=FH}};function nD(e,t){e*=ut,t*=ut;var n=rt(t);yp(n*rt(e),n*Ke(e),Ke(t))}function yp(e,t,n){++vp,Ty+=(e-Ty)/vp,Ey+=(t-Ey)/vp,by+=(n-by)/vp}function BH(){Ea.point=pEe}function pEe(e,t){e*=ut,t*=ut;var n=rt(t);ii=n*rt(e),ai=n*Ke(e),oi=Ke(t),Ea.point=mEe,yp(ii,ai,oi)}function mEe(e,t){e*=ut,t*=ut;var n=rt(t),i=n*rt(e),r=n*Ke(e),a=Ke(t),o=ni(ur((o=ai*a-oi*r)*o+(o=oi*i-ii*a)*o+(o=ii*r-ai*i)*o),ii*i+ai*r+oi*a);yy+=o,_y+=o*(ii+(ii=i)),Sy+=o*(ai+(ai=r)),Ay+=o*(oi+(oi=a)),yp(ii,ai,oi)}function FH(){Ea.point=nD}function gEe(){Ea.point=yEe}function vEe(){HH(MH,LH),Ea.point=nD}function yEe(e,t){MH=e,LH=t,e*=ut,t*=ut,Ea.point=HH;var n=rt(t);ii=n*rt(e),ai=n*Ke(e),oi=Ke(t),yp(ii,ai,oi)}function HH(e,t){e*=ut,t*=ut;var n=rt(t),i=n*rt(e),r=n*Ke(e),a=Ke(t),o=ai*a-oi*r,s=oi*i-ii*a,u=ii*r-ai*i,c=jC(o,s,u),l=ri(c),f=c&&-l/c;JC.add(f*o),eD.add(f*s),tD.add(f*u),yy+=l,_y+=l*(ii+(ii=i)),Sy+=l*(ai+(ai=r)),Ay+=l*(oi+(oi=a)),yp(ii,ai,oi)}function TEe(e){vp=yy=Ty=Ey=by=_y=Sy=Ay=0,JC=new Xn,eD=new Xn,tD=new Xn,Ta(e,Ea);var t=+JC,n=+eD,i=+tD,r=jC(t,n,i);return r<mp&&(t=_y,n=Sy,i=Ay,yy<lt&&(t=Ty,n=Ey,i=by),r=jC(t,n,i),r<mp)?[NaN,NaN]:[ni(n,t)*mn,ri(i/r)*mn]}function fh(e){return function(){return e}}function rD(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function iD(e,t){return[Vt(e)>Ot?e+Math.round(-e/ti)*ti:e,t]}iD.invert=iD;function aD(e,t,n){return(e%=ti)?t||n?rD(UH(e),GH(t,n)):UH(e):t||n?GH(t,n):iD}function $H(e){return function(t,n){return t+=e,[t>Ot?t-ti:t<-Ot?t+ti:t,n]}}function UH(e){var t=$H(e);return t.invert=$H(-e),t}function GH(e,t){var n=rt(e),i=Ke(e),r=rt(t),a=Ke(t);function o(s,u){var c=rt(u),l=rt(s)*c,f=Ke(s)*c,h=Ke(u),d=h*n+l*i;return[ni(f*r-d*a,l*n-h*i),ri(d*r+f*a)]}return o.invert=function(s,u){var c=rt(u),l=rt(s)*c,f=Ke(s)*c,h=Ke(u),d=h*r-f*a;return[ni(f*r+h*a,l*n+d*i),ri(d*n-l*i)]},o}function zH(e){e=aD(e[0]*ut,e[1]*ut,e.length>2?e[2]*ut:0);function t(n){return n=e(n[0]*ut,n[1]*ut),n[0]*=mn,n[1]*=mn,n}return t.invert=function(n){return n=e.invert(n[0]*ut,n[1]*ut),n[0]*=mn,n[1]*=mn,n},t}function jH(e,t,n,i,r,a){if(!!n){var o=rt(t),s=Ke(t),u=i*n;r==null?(r=t+i*ti,a=t-u/2):(r=VH(o,r),a=VH(o,a),(i>0?r<a:r>a)&&(r+=i*ti));for(var c,l=r;i>0?l>a:l<a;l-=u)c=py([o,-s*rt(l),-s*Ke(l)]),e.point(c[0],c[1])}}function VH(e,t){t=Kl(t),t[0]-=e,vy(t);var n=EH(-t[1]);return((-t[2]<0?-n:n)+ti-lt)%ti}function EEe(){var e=fh([0,0]),t=fh(90),n=fh(6),i,r,a={point:o};function o(u,c){i.push(u=r(u,c)),u[0]*=mn,u[1]*=mn}function s(){var u=e.apply(this,arguments),c=t.apply(this,arguments)*ut,l=n.apply(this,arguments)*ut;return i=[],r=aD(-u[0]*ut,-u[1]*ut,0).invert,jH(a,c,l,1),u={type:"Polygon",coordinates:[i]},i=r=null,u}return s.center=function(u){return arguments.length?(e=typeof u=="function"?u:fh([+u[0],+u[1]]),s):e},s.radius=function(u){return arguments.length?(t=typeof u=="function"?u:fh(+u),s):t},s.precision=function(u){return arguments.length?(n=typeof u=="function"?u:fh(+u),s):n},s}function YH(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Pn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Cy(e,t){return Vt(e[0]-t[0])<lt&&Vt(e[1]-t[1])<lt}function Dy(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function WH(e,t,n,i,r){var a=[],o=[],s,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],v=p[m],E;if(Cy(g,v)){if(!g[2]&&!v[2]){for(r.lineStart(),s=0;s<m;++s)r.point((g=p[s])[0],g[1]);r.lineEnd();return}v[0]+=2*lt}a.push(E=new Dy(g,p,null,!0)),o.push(E.o=new Dy(g,null,E,!1)),a.push(E=new Dy(v,p,null,!1)),o.push(E.o=new Dy(v,null,E,!0))}}),!!a.length){for(o.sort(t),qH(a),qH(o),s=0,u=o.length;s<u;++s)o[s].e=n=!n;for(var c=a[0],l,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;l=h.z,r.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(s=0,u=l.length;s<u;++s)r.point((f=l[s])[0],f[1]);else i(h.x,h.n.x,1,r);h=h.n}else{if(d)for(l=h.p.z,s=l.length-1;s>=0;--s)r.point((f=l[s])[0],f[1]);else i(h.x,h.p.x,-1,r);h=h.p}h=h.o,l=h.z,d=!d}while(!h.v);r.lineEnd()}}}function qH(e){if(!!(t=e.length)){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function oD(e){return Vt(e[0])<=Ot?e[0]:Zi(e[0])*((Vt(e[0])+Ot)%ti-Ot)}function XH(e,t){var n=oD(t),i=t[1],r=Ke(i),a=[Ke(n),-rt(n),0],o=0,s=0,u=new Xn;r===1?i=Bn+lt:r===-1&&(i=-Bn-lt);for(var c=0,l=e.length;c<l;++c)if(!!(h=(f=e[c]).length))for(var f,h,d=f[h-1],p=oD(d),m=d[1]/2+ly,g=Ke(m),v=rt(m),E=0;E<h;++E,p=T,g=S,v=w,d=y){var y=f[E],T=oD(y),b=y[1]/2+ly,S=Ke(b),w=rt(b),D=T-p,R=D>=0?1:-1,M=R*D,k=M>Ot,L=g*S;if(u.add(ni(L*R*Ke(M),v*w+L*rt(M))),o+=k?D+R*ti:D,k^p>=n^T>=n){var $=ch(Kl(d),Kl(y));vy($);var P=ch(a,$);vy(P);var B=(k^D>=0?-1:1)*ri(P[2]);(i>B||i===B&&($[0]||$[1]))&&(s+=k^D>=0?1:-1)}}return(o<-lt||o<lt&&u<-mp)^s&1}function KH(e,t,n,i){return function(r){var a=t(r),o=YH(),s=t(o),u=!1,c,l,f,h={point:d,lineStart:m,lineEnd:g,polygonStart:function(){h.point=v,h.lineStart=E,h.lineEnd=y,l=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=m,h.lineEnd=g,l=fE(l);var T=XH(c,i);l.length?(u||(r.polygonStart(),u=!0),WH(l,_Ee,T,n,r)):T&&(u||(r.polygonStart(),u=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),l=c=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function d(T,b){e(T,b)&&r.point(T,b)}function p(T,b){a.point(T,b)}function m(){h.point=p,a.lineStart()}function g(){h.point=d,a.lineEnd()}function v(T,b){f.push([T,b]),s.point(T,b)}function E(){s.lineStart(),f=[]}function y(){v(f[0][0],f[0][1]),s.lineEnd();var T=s.clean(),b=o.result(),S,w=b.length,D,R,M;if(f.pop(),c.push(f),f=null,!!w){if(T&1){if(R=b[0],(D=R.length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),S=0;S<D;++S)r.point((M=R[S])[0],M[1]);r.lineEnd()}return}w>1&&T&2&&b.push(b.pop().concat(b.shift())),l.push(b.filter(bEe))}}return h}}function bEe(e){return e.length>1}function _Ee(e,t){return((e=e.x)[0]<0?e[1]-Bn-lt:Bn-e[1])-((t=t.x)[0]<0?t[1]-Bn-lt:Bn-t[1])}const sD=KH(function(){return!0},SEe,CEe,[-Ot,-Bn]);function SEe(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,o){var s=a>0?Ot:-Ot,u=Vt(a-t);Vt(u-Ot)<lt?(e.point(t,n=(n+o)/2>0?Bn:-Bn),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(a,n),r=0):i!==s&&u>=Ot&&(Vt(t-i)<lt&&(t-=i*lt),Vt(a-s)<lt&&(a-=s*lt),n=AEe(t,n,a,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(s,n),r=0),e.point(t=a,n=o),i=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function AEe(e,t,n,i){var r,a,o=Ke(e-n);return Vt(o)>lt?uh((Ke(t)*(a=rt(i))*Ke(n)-Ke(i)*(r=rt(t))*Ke(e))/(r*a*o)):(t+i)/2}function CEe(e,t,n,i){var r;if(e==null)r=n*Bn,i.point(-Ot,r),i.point(0,r),i.point(Ot,r),i.point(Ot,0),i.point(Ot,-r),i.point(0,-r),i.point(-Ot,-r),i.point(-Ot,0),i.point(-Ot,r);else if(Vt(e[0]-t[0])>lt){var a=e[0]<t[0]?Ot:-Ot;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function ZH(e){var t=rt(e),n=6*ut,i=t>0,r=Vt(t)>lt;function a(l,f,h,d){jH(d,e,n,h,l,f)}function o(l,f){return rt(l)*rt(f)>t}function s(l){var f,h,d,p,m;return{lineStart:function(){p=d=!1,m=1},point:function(g,v){var E=[g,v],y,T=o(g,v),b=i?T?0:c(g,v):T?c(g+(g<0?Ot:-Ot),v):0;if(!f&&(p=d=T)&&l.lineStart(),T!==d&&(y=u(f,E),(!y||Cy(f,y)||Cy(E,y))&&(E[2]=1)),T!==d)m=0,T?(l.lineStart(),y=u(E,f),l.point(y[0],y[1])):(y=u(f,E),l.point(y[0],y[1],2),l.lineEnd()),f=y;else if(r&&f&&i^T){var S;!(b&h)&&(S=u(E,f,!0))&&(m=0,i?(l.lineStart(),l.point(S[0][0],S[0][1]),l.point(S[1][0],S[1][1]),l.lineEnd()):(l.point(S[1][0],S[1][1]),l.lineEnd(),l.lineStart(),l.point(S[0][0],S[0][1],3)))}T&&(!f||!Cy(f,E))&&l.point(E[0],E[1]),f=E,d=T,h=b},lineEnd:function(){d&&l.lineEnd(),f=null},clean:function(){return m|(p&&d)<<1}}}function u(l,f,h){var d=Kl(l),p=Kl(f),m=[1,0,0],g=ch(d,p),v=my(g,g),E=g[0],y=v-E*E;if(!y)return!h&&l;var T=t*v/y,b=-t*E/y,S=ch(m,g),w=gy(m,T),D=gy(g,b);ZC(w,D);var R=S,M=my(w,R),k=my(R,R),L=M*M-k*(my(w,w)-1);if(!(L<0)){var $=ur(L),P=gy(R,(-M-$)/k);if(ZC(P,w),P=py(P),!h)return P;var B=l[0],X=f[0],ee=l[1],se=f[1],fe;X<B&&(fe=B,B=X,X=fe);var Z=X-B,he=Vt(Z-Ot)<lt,j=he||Z<lt;if(!he&&se<ee&&(fe=ee,ee=se,se=fe),j?he?ee+se>0^P[1]<(Vt(P[0]-B)<lt?ee:se):ee<=P[1]&&P[1]<=se:Z>Ot^(B<=P[0]&&P[0]<=X)){var H=gy(R,(-M+$)/k);return ZC(H,w),[P,py(H)]}}}function c(l,f){var h=i?e:Ot-e,d=0;return l<-h?d|=1:l>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return KH(o,s,a,i?[0,-e]:[-Ot,e-Ot])}function DEe(e,t,n,i,r,a){var o=e[0],s=e[1],u=t[0],c=t[1],l=0,f=1,h=u-o,d=c-s,p;if(p=n-o,!(!h&&p>0)){if(p/=h,h<0){if(p<l)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>l&&(l=p)}if(p=r-o,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>l&&(l=p)}else if(h>0){if(p<l)return;p<f&&(f=p)}if(p=i-s,!(!d&&p>0)){if(p/=d,d<0){if(p<l)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>l&&(l=p)}if(p=a-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>l&&(l=p)}else if(d>0){if(p<l)return;p<f&&(f=p)}return l>0&&(e[0]=o+l*h,e[1]=s+l*d),f<1&&(t[0]=o+f*h,t[1]=s+f*d),!0}}}}}var Tp=1e9,wy=-Tp;function Iy(e,t,n,i){function r(c,l){return e<=c&&c<=n&&t<=l&&l<=i}function a(c,l,f,h){var d=0,p=0;if(c==null||(d=o(c,f))!==(p=o(l,f))||u(c,l)<0^f>0)do h.point(d===0||d===3?e:n,d>1?i:t);while((d=(d+f+4)%4)!==p);else h.point(l[0],l[1])}function o(c,l){return Vt(c[0]-e)<lt?l>0?0:3:Vt(c[0]-n)<lt?l>0?2:1:Vt(c[1]-t)<lt?l>0?1:0:l>0?3:2}function s(c,l){return u(c.x,l.x)}function u(c,l){var f=o(c,1),h=o(l,1);return f!==h?f-h:f===0?l[1]-c[1]:f===1?c[0]-l[0]:f===2?c[1]-l[1]:l[0]-c[0]}return function(c){var l=c,f=YH(),h,d,p,m,g,v,E,y,T,b,S,w={point:D,lineStart:L,lineEnd:$,polygonStart:M,polygonEnd:k};function D(B,X){r(B,X)&&l.point(B,X)}function R(){for(var B=0,X=0,ee=d.length;X<ee;++X)for(var se=d[X],fe=1,Z=se.length,he=se[0],j,H,G=he[0],K=he[1];fe<Z;++fe)j=G,H=K,he=se[fe],G=he[0],K=he[1],H<=i?K>i&&(G-j)*(i-H)>(K-H)*(e-j)&&++B:K<=i&&(G-j)*(i-H)<(K-H)*(e-j)&&--B;return B}function M(){l=f,h=[],d=[],S=!0}function k(){var B=R(),X=S&&B,ee=(h=fE(h)).length;(X||ee)&&(c.polygonStart(),X&&(c.lineStart(),a(null,null,1,c),c.lineEnd()),ee&&WH(h,s,B,a,c),c.polygonEnd()),l=c,h=d=p=null}function L(){w.point=P,d&&d.push(p=[]),b=!0,T=!1,E=y=NaN}function $(){h&&(P(m,g),v&&T&&f.rejoin(),h.push(f.result())),w.point=D,T&&l.lineEnd()}function P(B,X){var ee=r(B,X);if(d&&p.push([B,X]),b)m=B,g=X,v=ee,b=!1,ee&&(l.lineStart(),l.point(B,X));else if(ee&&T)l.point(B,X);else{var se=[E=Math.max(wy,Math.min(Tp,E)),y=Math.max(wy,Math.min(Tp,y))],fe=[B=Math.max(wy,Math.min(Tp,B)),X=Math.max(wy,Math.min(Tp,X))];DEe(se,fe,e,t,n,i)?(T||(l.lineStart(),l.point(se[0],se[1])),l.point(fe[0],fe[1]),ee||l.lineEnd(),S=!1):ee&&(l.lineStart(),l.point(B,X),S=!1)}E=B,y=X,T=ee}return w}}function wEe(){var e=0,t=0,n=960,i=500,r,a,o;return o={stream:function(s){return r&&a===s?r:r=Iy(e,t,n,i)(a=s)},extent:function(s){return arguments.length?(e=+s[0][0],t=+s[0][1],n=+s[1][0],i=+s[1][1],r=a=null,o):[[e,t],[n,i]]}}}var lD,uD,ky,Oy,dh={sphere:Pn,point:Pn,lineStart:IEe,lineEnd:Pn,polygonStart:Pn,polygonEnd:Pn};function IEe(){dh.point=OEe,dh.lineEnd=kEe}function kEe(){dh.point=dh.lineEnd=Pn}function OEe(e,t){e*=ut,t*=ut,uD=e,ky=Ke(t),Oy=rt(t),dh.point=xEe}function xEe(e,t){e*=ut,t*=ut;var n=Ke(t),i=rt(t),r=Vt(e-uD),a=rt(r),o=Ke(r),s=i*o,u=Oy*n-ky*i*a,c=ky*n+Oy*i*a;lD.add(ni(ur(s*s+u*u),c)),uD=e,ky=n,Oy=i}function QH(e){return lD=new Xn,Ta(e,dh),+lD}var cD=[null,null],PEe={type:"LineString",coordinates:cD};function xy(e,t){return cD[0]=e,cD[1]=t,QH(PEe)}var JH={Feature:function(e,t){return Py(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)if(Py(n[i].geometry,t))return!0;return!1}},e8={Sphere:function(){return!0},Point:function(e,t){return t8(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(t8(n[i],t))return!0;return!1},LineString:function(e,t){return n8(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(n8(n[i],t))return!0;return!1},Polygon:function(e,t){return r8(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)if(r8(n[i],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)if(Py(n[i],t))return!0;return!1}};function Py(e,t){return e&&e8.hasOwnProperty(e.type)?e8[e.type](e,t):!1}function t8(e,t){return xy(e,t)===0}function n8(e,t){for(var n,i,r,a=0,o=e.length;a<o;a++){if(i=xy(e[a],t),i===0||a>0&&(r=xy(e[a],e[a-1]),r>0&&n<=r&&i<=r&&(n+i-r)*(1-Math.pow((n-i)/r,2))<mp*r))return!0;n=i}return!1}function r8(e,t){return!!XH(e.map(REe),i8(t))}function REe(e){return e=e.map(i8),e.pop(),e}function i8(e){return[e[0]*ut,e[1]*ut]}function NEe(e,t){return(e&&JH.hasOwnProperty(e.type)?JH[e.type]:Py)(e,t)}function a8(e,t,n){var i=Ur(e,t-lt,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function o8(e,t,n){var i=Ur(e,t-lt,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function s8(){var e,t,n,i,r,a,o,s,u=10,c=u,l=90,f=360,h,d,p,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:E()}}function E(){return Ur(uy(i/l)*l,n,l).map(p).concat(Ur(uy(s/f)*f,o,f).map(m)).concat(Ur(uy(t/u)*u,e,u).filter(function(y){return Vt(y%l)>lt}).map(h)).concat(Ur(uy(a/c)*c,r,c).filter(function(y){return Vt(y%f)>lt}).map(d))}return v.lines=function(){return E().map(function(y){return{type:"LineString",coordinates:y}})},v.outline=function(){return{type:"Polygon",coordinates:[p(i).concat(m(o).slice(1),p(n).reverse().slice(1),m(s).reverse().slice(1))]}},v.extent=function(y){return arguments.length?v.extentMajor(y).extentMinor(y):v.extentMinor()},v.extentMajor=function(y){return arguments.length?(i=+y[0][0],n=+y[1][0],s=+y[0][1],o=+y[1][1],i>n&&(y=i,i=n,n=y),s>o&&(y=s,s=o,o=y),v.precision(g)):[[i,s],[n,o]]},v.extentMinor=function(y){return arguments.length?(t=+y[0][0],e=+y[1][0],a=+y[0][1],r=+y[1][1],t>e&&(y=t,t=e,e=y),a>r&&(y=a,a=r,r=y),v.precision(g)):[[t,a],[e,r]]},v.step=function(y){return arguments.length?v.stepMajor(y).stepMinor(y):v.stepMinor()},v.stepMajor=function(y){return arguments.length?(l=+y[0],f=+y[1],v):[l,f]},v.stepMinor=function(y){return arguments.length?(u=+y[0],c=+y[1],v):[u,c]},v.precision=function(y){return arguments.length?(g=+y,h=a8(a,r,90),d=o8(t,e,g),p=a8(s,o,90),m=o8(i,n,g),v):g},v.extentMajor([[-180,-90+lt],[180,90-lt]]).extentMinor([[-180,-80-lt],[180,80+lt]])}function MEe(){return s8()()}function LEe(e,t){var n=e[0]*ut,i=e[1]*ut,r=t[0]*ut,a=t[1]*ut,o=rt(i),s=Ke(i),u=rt(a),c=Ke(a),l=o*rt(n),f=o*Ke(n),h=u*rt(r),d=u*Ke(r),p=2*ri(ur(bH(a-i)+o*u*bH(r-n))),m=Ke(p),g=p?function(v){var E=Ke(v*=p)/m,y=Ke(p-v)/m,T=y*l+E*h,b=y*f+E*d,S=y*s+E*c;return[ni(b,T)*mn,ni(S,ur(T*T+b*b))*mn]}:function(){return[n*mn,i*mn]};return g.distance=p,g}const Ep=e=>e;var hD=new Xn,fD=new Xn,l8,u8,dD,pD,Os={point:Pn,lineStart:Pn,lineEnd:Pn,polygonStart:function(){Os.lineStart=BEe,Os.lineEnd=HEe},polygonEnd:function(){Os.lineStart=Os.lineEnd=Os.point=Pn,hD.add(Vt(fD)),fD=new Xn},result:function(){var e=hD/2;return hD=new Xn,e}};function BEe(){Os.point=FEe}function FEe(e,t){Os.point=c8,l8=dD=e,u8=pD=t}function c8(e,t){fD.add(pD*e-dD*t),dD=e,pD=t}function HEe(){c8(l8,u8)}const h8=Os;var ph=1/0,Ry=ph,bp=-ph,Ny=bp,$Ee={point:UEe,lineStart:Pn,lineEnd:Pn,polygonStart:Pn,polygonEnd:Pn,result:function(){var e=[[ph,Ry],[bp,Ny]];return bp=Ny=-(Ry=ph=1/0),e}};function UEe(e,t){e<ph&&(ph=e),e>bp&&(bp=e),t<Ry&&(Ry=t),t>Ny&&(Ny=t)}const My=$Ee;var mD=0,gD=0,_p=0,Ly=0,By=0,mh=0,vD=0,yD=0,Sp=0,f8,d8,oo,so,ba={point:Ql,lineStart:p8,lineEnd:m8,polygonStart:function(){ba.lineStart=jEe,ba.lineEnd=VEe},polygonEnd:function(){ba.point=Ql,ba.lineStart=p8,ba.lineEnd=m8},result:function(){var e=Sp?[vD/Sp,yD/Sp]:mh?[Ly/mh,By/mh]:_p?[mD/_p,gD/_p]:[NaN,NaN];return mD=gD=_p=Ly=By=mh=vD=yD=Sp=0,e}};function Ql(e,t){mD+=e,gD+=t,++_p}function p8(){ba.point=GEe}function GEe(e,t){ba.point=zEe,Ql(oo=e,so=t)}function zEe(e,t){var n=e-oo,i=t-so,r=ur(n*n+i*i);Ly+=r*(oo+e)/2,By+=r*(so+t)/2,mh+=r,Ql(oo=e,so=t)}function m8(){ba.point=Ql}function jEe(){ba.point=YEe}function VEe(){g8(f8,d8)}function YEe(e,t){ba.point=g8,Ql(f8=oo=e,d8=so=t)}function g8(e,t){var n=e-oo,i=t-so,r=ur(n*n+i*i);Ly+=r*(oo+e)/2,By+=r*(so+t)/2,mh+=r,r=so*e-oo*t,vD+=r*(oo+e),yD+=r*(so+t),Sp+=r*3,Ql(oo=e,so=t)}const v8=ba;function y8(e){this._context=e}y8.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,ti);break}}},result:Pn};var TD=new Xn,ED,T8,E8,Ap,Cp,Fy={point:Pn,lineStart:function(){Fy.point=WEe},lineEnd:function(){ED&&b8(T8,E8),Fy.point=Pn},polygonStart:function(){ED=!0},polygonEnd:function(){ED=null},result:function(){var e=+TD;return TD=new Xn,e}};function WEe(e,t){Fy.point=b8,T8=Ap=e,E8=Cp=t}function b8(e,t){Ap-=e,Cp-=t,TD.add(ur(Ap*Ap+Cp*Cp)),Ap=e,Cp=t}const _8=Fy;function S8(){this._string=[]}S8.prototype={_radius:4.5,_circle:A8(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._string.push("M",e,",",t),this._point=1;break}case 1:{this._string.push("L",e,",",t);break}default:{this._circle==null&&(this._circle=A8(this._radius)),this._string.push("M",e,",",t,this._circle);break}}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}else return null}};function A8(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function qEe(e,t){var n=4.5,i,r;function a(o){return o&&(typeof n=="function"&&r.pointRadius(+n.apply(this,arguments)),Ta(o,i(r))),r.result()}return a.area=function(o){return Ta(o,i(h8)),h8.result()},a.measure=function(o){return Ta(o,i(_8)),_8.result()},a.bounds=function(o){return Ta(o,i(My)),My.result()},a.centroid=function(o){return Ta(o,i(v8)),v8.result()},a.projection=function(o){return arguments.length?(i=o==null?(e=null,Ep):(e=o).stream,a):e},a.context=function(o){return arguments.length?(r=o==null?(t=null,new S8):new y8(t=o),typeof n!="function"&&r.pointRadius(n),a):t},a.pointRadius=function(o){return arguments.length?(n=typeof o=="function"?o:(r.pointRadius(+o),+o),a):n},a.projection(e).context(t)}function XEe(e){return{stream:Dp(e)}}function Dp(e){return function(t){var n=new bD;for(var i in e)n[i]=e[i];return n.stream=t,n}}function bD(){}bD.prototype={constructor:bD,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _D(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Ta(n,e.stream(My)),t(My.result()),i!=null&&e.clipExtent(i),e}function Hy(e,t,n){return _D(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),s=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,u=+t[0][1]+(a-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([s,u])},n)}function SD(e,t,n){return Hy(e,[[0,0],t],n)}function AD(e,t,n){return _D(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),o=(r-a*(i[1][0]+i[0][0]))/2,s=-a*i[0][1];e.scale(150*a).translate([o,s])},n)}function CD(e,t,n){return _D(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),o=-a*i[0][0],s=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([o,s])},n)}var C8=16,KEe=rt(30*ut);function D8(e,t){return+t?QEe(e,t):ZEe(e)}function ZEe(e){return Dp({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function QEe(e,t){function n(i,r,a,o,s,u,c,l,f,h,d,p,m,g){var v=c-i,E=l-r,y=v*v+E*E;if(y>4*t&&m--){var T=o+h,b=s+d,S=u+p,w=ur(T*T+b*b+S*S),D=ri(S/=w),R=Vt(Vt(S)-1)<lt||Vt(a-f)<lt?(a+f)/2:ni(b,T),M=e(R,D),k=M[0],L=M[1],$=k-i,P=L-r,B=E*$-v*P;(B*B/y>t||Vt((v*$+E*P)/y-.5)>.3||o*h+s*d+u*p<KEe)&&(n(i,r,a,o,s,u,k,L,R,T/=w,b/=w,S,m,g),g.point(k,L),n(k,L,R,T,b,S,c,l,f,h,d,p,m,g))}}return function(i){var r,a,o,s,u,c,l,f,h,d,p,m,g={point:v,lineStart:E,lineEnd:T,polygonStart:function(){i.polygonStart(),g.lineStart=b},polygonEnd:function(){i.polygonEnd(),g.lineStart=E}};function v(D,R){D=e(D,R),i.point(D[0],D[1])}function E(){f=NaN,g.point=y,i.lineStart()}function y(D,R){var M=Kl([D,R]),k=e(D,R);n(f,h,l,d,p,m,f=k[0],h=k[1],l=D,d=M[0],p=M[1],m=M[2],C8,i),i.point(f,h)}function T(){g.point=v,i.lineEnd()}function b(){E(),g.point=S,g.lineEnd=w}function S(D,R){y(r=D,R),a=f,o=h,s=d,u=p,c=m,g.point=y}function w(){n(f,h,l,d,p,m,a,o,r,s,u,c,C8,i),g.lineEnd=T,T()}return g}}var JEe=Dp({point:function(e,t){this.stream.point(e*ut,t*ut)}});function e1e(e){return Dp({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function t1e(e,t,n,i,r){function a(o,s){return o*=i,s*=r,[t+e*o,n-e*s]}return a.invert=function(o,s){return[(o-t)/e*i,(n-s)/e*r]},a}function w8(e,t,n,i,r,a){if(!a)return t1e(e,t,n,i,r);var o=rt(a),s=Ke(a),u=o*e,c=s*e,l=o/e,f=s/e,h=(s*n-o*t)/e,d=(s*t+o*n)/e;function p(m,g){return m*=i,g*=r,[u*m-c*g+t,n-c*m-u*g]}return p.invert=function(m,g){return[i*(l*m-f*g+h),r*(d-f*m-l*g)]},p}function lo(e){return DD(function(){return e})()}function DD(e){var t,n=150,i=480,r=250,a=0,o=0,s=0,u=0,c=0,l,f=0,h=1,d=1,p=null,m=sD,g=null,v,E,y,T=Ep,b=.5,S,w,D,R,M;function k(B){return D(B[0]*ut,B[1]*ut)}function L(B){return B=D.invert(B[0],B[1]),B&&[B[0]*mn,B[1]*mn]}k.stream=function(B){return R&&M===B?R:R=JEe(e1e(l)(m(S(T(M=B)))))},k.preclip=function(B){return arguments.length?(m=B,p=void 0,P()):m},k.postclip=function(B){return arguments.length?(T=B,g=v=E=y=null,P()):T},k.clipAngle=function(B){return arguments.length?(m=+B?ZH(p=B*ut):(p=null,sD),P()):p*mn},k.clipExtent=function(B){return arguments.length?(T=B==null?(g=v=E=y=null,Ep):Iy(g=+B[0][0],v=+B[0][1],E=+B[1][0],y=+B[1][1]),P()):g==null?null:[[g,v],[E,y]]},k.scale=function(B){return arguments.length?(n=+B,$()):n},k.translate=function(B){return arguments.length?(i=+B[0],r=+B[1],$()):[i,r]},k.center=function(B){return arguments.length?(a=B[0]%360*ut,o=B[1]%360*ut,$()):[a*mn,o*mn]},k.rotate=function(B){return arguments.length?(s=B[0]%360*ut,u=B[1]%360*ut,c=B.length>2?B[2]%360*ut:0,$()):[s*mn,u*mn,c*mn]},k.angle=function(B){return arguments.length?(f=B%360*ut,$()):f*mn},k.reflectX=function(B){return arguments.length?(h=B?-1:1,$()):h<0},k.reflectY=function(B){return arguments.length?(d=B?-1:1,$()):d<0},k.precision=function(B){return arguments.length?(S=D8(w,b=B*B),P()):ur(b)},k.fitExtent=function(B,X){return Hy(k,B,X)},k.fitSize=function(B,X){return SD(k,B,X)},k.fitWidth=function(B,X){return AD(k,B,X)},k.fitHeight=function(B,X){return CD(k,B,X)};function $(){var B=w8(n,0,0,h,d,f).apply(null,t(a,o)),X=w8(n,i-B[0],r-B[1],h,d,f);return l=aD(s,u,c),w=rD(t,X),D=rD(l,w),S=D8(w,b),P()}function P(){return R=M=null,k}return function(){return t=e.apply(this,arguments),k.invert=t.invert&&L,$()}}function wD(e){var t=0,n=Ot/3,i=DD(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*ut,n=a[1]*ut):[t*mn,n*mn]},r}function n1e(e){var t=rt(e);function n(i,r){return[i*t,Ke(r)/t]}return n.invert=function(i,r){return[i/t,ri(r*t)]},n}function I8(e,t){var n=Ke(e),i=(n+Ke(t))/2;if(Vt(i)<lt)return n1e(e);var r=1+n*(2*i-n),a=ur(r)/i;function o(s,u){var c=ur(r-2*i*Ke(u))/i;return[c*Ke(s*=i),a-c*rt(s)]}return o.invert=function(s,u){var c=a-u,l=ni(s,Vt(c))*Zi(c);return c*i<0&&(l-=Ot*Zi(s)*Zi(c)),[l/i,ri((r-(s*s+c*c)*i*i)/(2*i))]},o}function $y(){return wD(I8).scale(155.424).center([0,33.6442])}function k8(){return $y().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function r1e(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function i1e(){var e,t,n=k8(),i,r=$y().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=$y().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,u,c={point:function(h,d){u=[h,d]}};function l(h){var d=h[0],p=h[1];return u=null,i.point(d,p),u||(a.point(d,p),u)||(s.point(d,p),u)}l.invert=function(h){var d=n.scale(),p=n.translate(),m=(h[0]-p[0])/d,g=(h[1]-p[1])/d;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?r:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(h)},l.stream=function(h){return e&&t===h?e:e=r1e([n.stream(t=h),r.stream(h),o.stream(h)])},l.precision=function(h){return arguments.length?(n.precision(h),r.precision(h),o.precision(h),f()):n.precision()},l.scale=function(h){return arguments.length?(n.scale(h),r.scale(h*.35),o.scale(h),l.translate(n.translate())):n.scale()},l.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),p=+h[0],m=+h[1];return i=n.translate(h).clipExtent([[p-.455*d,m-.238*d],[p+.455*d,m+.238*d]]).stream(c),a=r.translate([p-.307*d,m+.201*d]).clipExtent([[p-.425*d+lt,m+.12*d+lt],[p-.214*d-lt,m+.234*d-lt]]).stream(c),s=o.translate([p-.205*d,m+.212*d]).clipExtent([[p-.214*d+lt,m+.166*d+lt],[p-.115*d-lt,m+.234*d-lt]]).stream(c),f()},l.fitExtent=function(h,d){return Hy(l,h,d)},l.fitSize=function(h,d){return SD(l,h,d)},l.fitWidth=function(h,d){return AD(l,h,d)},l.fitHeight=function(h,d){return CD(l,h,d)};function f(){return e=t=null,l}return l.scale(1070)}function O8(e){return function(t,n){var i=rt(t),r=rt(n),a=e(i*r);return a===1/0?[2,0]:[a*r*Ke(t),a*Ke(n)]}}function wp(e){return function(t,n){var i=ur(t*t+n*n),r=e(i),a=Ke(r),o=rt(r);return[ni(t*a,i*o),ri(i&&n*a/i)]}}var ID=O8(function(e){return ur(2/(1+e))});ID.invert=wp(function(e){return 2*ri(e/2)});function a1e(){return lo(ID).scale(124.75).clipAngle(180-.001)}var kD=O8(function(e){return(e=EH(e))&&e/Ke(e)});kD.invert=wp(function(e){return e});function o1e(){return lo(kD).scale(79.4188).clipAngle(180-.001)}function Ip(e,t){return[e,cy(YC((Bn+t)/2))]}Ip.invert=function(e,t){return[e,2*uh(TH(t))-Bn]};function s1e(){return x8(Ip).scale(961/ti)}function x8(e){var t=lo(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,o=null,s,u,c;t.scale=function(f){return arguments.length?(i(f),l()):i()},t.translate=function(f){return arguments.length?(r(f),l()):r()},t.center=function(f){return arguments.length?(n(f),l()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=s=u=c=null:(o=+f[0][0],s=+f[0][1],u=+f[1][0],c=+f[1][1]),l()):o==null?null:[[o,s],[u,c]]};function l(){var f=Ot*i(),h=t(zH(t.rotate()).invert([0,0]));return a(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:e===Ip?[[Math.max(h[0]-f,o),s],[Math.min(h[0]+f,u),c]]:[[o,Math.max(h[1]-f,s)],[u,Math.min(h[1]+f,c)]])}return l()}function Uy(e){return YC((Bn+e)/2)}function P8(e,t){var n=rt(e),i=e===t?Ke(e):cy(n/rt(t))/cy(Uy(t)/Uy(e)),r=n*VC(Uy(e),i)/i;if(!i)return Ip;function a(o,s){r>0?s<-Bn+lt&&(s=-Bn+lt):s>Bn-lt&&(s=Bn-lt);var u=r/VC(Uy(s),i);return[u*Ke(i*o),r-u*rt(i*o)]}return a.invert=function(o,s){var u=r-s,c=Zi(i)*ur(o*o+u*u),l=ni(o,Vt(u))*Zi(u);return u*i<0&&(l-=Ot*Zi(o)*Zi(u)),[l/i,2*uh(VC(r/c,1/i))-Bn]},a}function l1e(){return wD(P8).scale(109.5).parallels([30,30])}function kp(e,t){return[e,t]}kp.invert=kp;function u1e(){return lo(kp).scale(152.63)}function R8(e,t){var n=rt(e),i=e===t?Ke(e):(n-rt(t))/(t-e),r=n/i+e;if(Vt(i)<lt)return kp;function a(o,s){var u=r-s,c=i*o;return[u*Ke(c),r-u*rt(c)]}return a.invert=function(o,s){var u=r-s,c=ni(o,Vt(u))*Zi(u);return u*i<0&&(c-=Ot*Zi(o)*Zi(u)),[c/i,r-Zi(i)*ur(o*o+u*u)]},a}function c1e(){return wD(R8).scale(131.154).center([0,13.9389])}var Op=1.340264,xp=-.081106,Pp=893e-6,Rp=.003796,Gy=ur(3)/2,h1e=12;function OD(e,t){var n=ri(Gy*Ke(t)),i=n*n,r=i*i*i;return[e*rt(n)/(Gy*(Op+3*xp*i+r*(7*Pp+9*Rp*i))),n*(Op+xp*i+r*(Pp+Rp*i))]}OD.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,o,s,u;a<h1e&&(s=n*(Op+xp*i+r*(Pp+Rp*i))-t,u=Op+3*xp*i+r*(7*Pp+9*Rp*i),n-=o=s/u,i=n*n,r=i*i*i,!(Vt(o)<mp));++a);return[Gy*e*(Op+3*xp*i+r*(7*Pp+9*Rp*i))/rt(n),ri(Ke(n)/Gy)]};function f1e(){return lo(OD).scale(177.158)}function xD(e,t){var n=rt(t),i=rt(e)*n;return[n*Ke(e)/i,Ke(t)/i]}xD.invert=wp(uh);function d1e(){return lo(xD).scale(144.049).clipAngle(60)}function p1e(){var e=1,t=0,n=0,i=1,r=1,a=0,o,s,u=null,c,l,f,h=1,d=1,p=Dp({point:function(T,b){var S=y([T,b]);this.stream.point(S[0],S[1])}}),m=Ep,g,v;function E(){return h=e*i,d=e*r,g=v=null,y}function y(T){var b=T[0]*h,S=T[1]*d;if(a){var w=S*o-b*s;b=b*o+S*s,S=w}return[b+t,S+n]}return y.invert=function(T){var b=T[0]-t,S=T[1]-n;if(a){var w=S*o+b*s;b=b*o-S*s,S=w}return[b/h,S/d]},y.stream=function(T){return g&&v===T?g:g=p(m(v=T))},y.postclip=function(T){return arguments.length?(m=T,u=c=l=f=null,E()):m},y.clipExtent=function(T){return arguments.length?(m=T==null?(u=c=l=f=null,Ep):Iy(u=+T[0][0],c=+T[0][1],l=+T[1][0],f=+T[1][1]),E()):u==null?null:[[u,c],[l,f]]},y.scale=function(T){return arguments.length?(e=+T,E()):e},y.translate=function(T){return arguments.length?(t=+T[0],n=+T[1],E()):[t,n]},y.angle=function(T){return arguments.length?(a=T%360*ut,s=Ke(a),o=rt(a),E()):a*mn},y.reflectX=function(T){return arguments.length?(i=T?-1:1,E()):i<0},y.reflectY=function(T){return arguments.length?(r=T?-1:1,E()):r<0},y.fitExtent=function(T,b){return Hy(y,T,b)},y.fitSize=function(T,b){return SD(y,T,b)},y.fitWidth=function(T,b){return AD(y,T,b)},y.fitHeight=function(T,b){return CD(y,T,b)},y}function PD(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}PD.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,o=a*a;n-=r=(n*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-t)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(Vt(r)>lt&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function m1e(){return lo(PD).scale(175.295)}function RD(e,t){return[rt(t)*Ke(e),Ke(t)]}RD.invert=wp(ri);function g1e(){return lo(RD).scale(249.5).clipAngle(90+lt)}function ND(e,t){var n=rt(t),i=1+rt(e)*n;return[n*Ke(e)/i,Ke(t)/i]}ND.invert=wp(function(e){return 2*uh(e)});function v1e(){return lo(ND).scale(250).clipAngle(142)}function MD(e,t){return[cy(YC((Bn+t)/2)),-e]}MD.invert=function(e,t){return[-t,2*uh(TH(e))-Bn]};function y1e(){var e=x8(MD),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}const T1e=Object.freeze(Object.defineProperty({__proto__:null,geoArea:uEe,geoBounds:dEe,geoCentroid:TEe,geoCircle:EEe,geoClipAntimeridian:sD,geoClipCircle:ZH,geoClipExtent:wEe,geoClipRectangle:Iy,geoContains:NEe,geoDistance:xy,geoGraticule:s8,geoGraticule10:MEe,geoInterpolate:LEe,geoLength:QH,geoPath:qEe,geoAlbers:k8,geoAlbersUsa:i1e,geoAzimuthalEqualArea:a1e,geoAzimuthalEqualAreaRaw:ID,geoAzimuthalEquidistant:o1e,geoAzimuthalEquidistantRaw:kD,geoConicConformal:l1e,geoConicConformalRaw:P8,geoConicEqualArea:$y,geoConicEqualAreaRaw:I8,geoConicEquidistant:c1e,geoConicEquidistantRaw:R8,geoEqualEarth:f1e,geoEqualEarthRaw:OD,geoEquirectangular:u1e,geoEquirectangularRaw:kp,geoGnomonic:d1e,geoGnomonicRaw:xD,geoIdentity:p1e,geoProjection:lo,geoProjectionMutator:DD,geoMercator:s1e,geoMercatorRaw:Ip,geoNaturalEarth1:m1e,geoNaturalEarth1Raw:PD,geoOrthographic:g1e,geoOrthographicRaw:RD,geoStereographic:v1e,geoStereographicRaw:ND,geoTransverseMercator:y1e,geoTransverseMercatorRaw:MD,geoRotation:zH,geoStream:Ta,geoTransform:XEe},Symbol.toStringTag,{value:"Module"}));var E1e=[].slice,b1e={};function LD(e){this._size=e,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}LD.prototype=M8.prototype={constructor:LD,defer:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(this._error!=null)return this;var t=E1e.call(arguments,1);return t.push(e),++this._waiting,this._tasks.push(t),N8(this),this},abort:function(){return this._error==null&&BD(this,new Error("abort")),this},await:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(t,n){e.apply(null,[t].concat(n))},zy(this),this},awaitAll:function(e){if(typeof e!="function")throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=e,zy(this),this}};function N8(e){if(!e._start)try{_1e(e)}catch(t){if(e._tasks[e._ended+e._active-1])BD(e,t);else if(!e._data)throw t}}function _1e(e){for(;e._start=e._waiting&&e._active<e._size;){var t=e._ended+e._active,n=e._tasks[t],i=n.length-1,r=n[i];n[i]=S1e(e,t),--e._waiting,++e._active,n=r.apply(null,n),e._tasks[t]&&(e._tasks[t]=n||b1e)}}function S1e(e,t){return function(n,i){!e._tasks[t]||(--e._active,++e._ended,e._tasks[t]=null,e._error==null&&(n!=null?BD(e,n):(e._data[t]=i,e._waiting?N8(e):zy(e))))}}function BD(e,t){var n=e._tasks.length,i;for(e._error=t,e._data=void 0,e._waiting=NaN;--n>=0;)if((i=e._tasks[n])&&(e._tasks[n]=null,i.abort))try{i.abort()}catch{}e._active=NaN,zy(e)}function zy(e){if(!e._active&&e._call){var t=e._data;e._data=void 0,e._call(e._error,t)}}function M8(e){if(e==null)e=1/0;else if(!((e=+e)>=1))throw new Error("invalid concurrency");return new LD(e)}const A1e=Object.freeze(Object.defineProperty({__proto__:null,queue:M8},Symbol.toStringTag,{value:"Module"}));var Qi="$";function jy(){}jy.prototype=FD.prototype={constructor:jy,has:function(e){return Qi+e in this},get:function(e){return this[Qi+e]},set:function(e,t){return this[Qi+e]=t,this},remove:function(e){var t=Qi+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Qi&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Qi&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Qi&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Qi&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Qi&&++e;return e},empty:function(){for(var e in this)if(e[0]===Qi)return!1;return!0},each:function(e){for(var t in this)t[0]===Qi&&e(this[t],t.slice(1),this)}};function FD(e,t){var n=new jy;if(e instanceof jy)e.each(function(s,u){n.set(u,s)});else if(Array.isArray(e)){var i=-1,r=e.length,a;if(t==null)for(;++i<r;)n.set(i,e[i]);else for(;++i<r;)n.set(t(a=e[i],i,e),a)}else if(e)for(var o in e)n.set(o,e[o]);return n}function L8(){}var Jl=FD.prototype;L8.prototype={constructor:L8,has:Jl.has,add:function(e){return e+="",this[Qi+e]=e,this},remove:Jl.remove,clear:Jl.clear,values:Jl.keys,size:Jl.size,empty:Jl.empty,each:Jl.each};var C1e={value:function(){}};function B8(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Vy(n)}function Vy(e){this._=e}function D1e(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Vy.prototype=B8.prototype={constructor:Vy,on:function(e,t){var n=this._,i=D1e(e+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(e=i[a]).type)&&(r=w1e(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(r=(e=i[a]).type)n[r]=F8(n[r],e.name,t);else if(t==null)for(r in n)n[r]=F8(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Vy(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function w1e(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function F8(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=C1e,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}function HD(e,t){var n,i=B8("beforesend","progress","load","error"),r,a=FD(),o=new XMLHttpRequest,s=null,u=null,c,l,f=0;typeof XDomainRequest<"u"&&!("withCredentials"in o)&&/^(http(s)?:)?\/\//.test(e)&&(o=new XDomainRequest),"onload"in o?o.onload=o.onerror=o.ontimeout=h:o.onreadystatechange=function(d){o.readyState>3&&h(d)};function h(d){var p=o.status,m;if(!p&&k1e(o)||p>=200&&p<300||p===304){if(c)try{m=c.call(n,o)}catch(g){i.call("error",n,g);return}else m=o;i.call("load",n,m)}else i.call("error",n,d)}if(o.onprogress=function(d){i.call("progress",n,d)},n={header:function(d,p){return d=(d+"").toLowerCase(),arguments.length<2?a.get(d):(p==null?a.remove(d):a.set(d,p+""),n)},mimeType:function(d){return arguments.length?(r=d==null?null:d+"",n):r},responseType:function(d){return arguments.length?(l=d,n):l},timeout:function(d){return arguments.length?(f=+d,n):f},user:function(d){return arguments.length<1?s:(s=d==null?null:d+"",n)},password:function(d){return arguments.length<1?u:(u=d==null?null:d+"",n)},response:function(d){return c=d,n},get:function(d,p){return n.send("GET",d,p)},post:function(d,p){return n.send("POST",d,p)},send:function(d,p,m){return o.open(d,e,!0,s,u),r!=null&&!a.has("accept")&&a.set("accept",r+",*/*"),o.setRequestHeader&&a.each(function(g,v){o.setRequestHeader(v,g)}),r!=null&&o.overrideMimeType&&o.overrideMimeType(r),l!=null&&(o.responseType=l),f>0&&(o.timeout=f),m==null&&typeof p=="function"&&(m=p,p=null),m!=null&&m.length===1&&(m=I1e(m)),m!=null&&n.on("error",m).on("load",function(g){m(null,g)}),i.call("beforesend",n,o),o.send(p??null),n},abort:function(){return o.abort(),n},on:function(){var d=i.on.apply(i,arguments);return d===i?n:d}},t!=null){if(typeof t!="function")throw new Error("invalid callback: "+t);return n.get(t)}return n}function I1e(e){return function(t,n){e(t==null?n:null)}}function k1e(e){var t=e.responseType;return t&&t!=="text"?e.response:e.responseText}function Yy(e,t){return function(n,i){var r=HD(n).mimeType(e).response(t);if(i!=null){if(typeof i!="function")throw new Error("invalid callback: "+i);return r.get(i)}return r}}const O1e=Yy("text/html",function(e){return document.createRange().createContextualFragment(e.responseText)}),x1e=Yy("application/json",function(e){return JSON.parse(e.responseText)}),P1e=Yy("text/plain",function(e){return e.responseText}),R1e=Yy("application/xml",function(e){var t=e.responseXML;if(!t)throw new Error("parse error");return t});var H8={},$D={},UD=34,Np=10,GD=13;function $8(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function N1e(e,t){var n=$8(e);return function(i,r){return t(n(i),r,e)}}function U8(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function yi(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function M1e(e){return e<0?"-"+yi(-e,6):e>9999?"+"+yi(e,6):yi(e,4)}function L1e(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":M1e(e.getUTCFullYear())+"-"+yi(e.getUTCMonth()+1,2)+"-"+yi(e.getUTCDate(),2)+(r?"T"+yi(t,2)+":"+yi(n,2)+":"+yi(i,2)+"."+yi(r,3)+"Z":i?"T"+yi(t,2)+":"+yi(n,2)+":"+yi(i,2)+"Z":n||t?"T"+yi(t,2)+":"+yi(n,2)+"Z":"")}function G8(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(f,h){var d,p,m=r(f,function(g,v){if(d)return d(g,v-1);p=g,d=h?N1e(g,h):$8(g)});return m.columns=p||[],m}function r(f,h){var d=[],p=f.length,m=0,g=0,v,E=p<=0,y=!1;f.charCodeAt(p-1)===Np&&--p,f.charCodeAt(p-1)===GD&&--p;function T(){if(E)return $D;if(y)return y=!1,H8;var S,w=m,D;if(f.charCodeAt(w)===UD){for(;m++<p&&f.charCodeAt(m)!==UD||f.charCodeAt(++m)===UD;);return(S=m)>=p?E=!0:(D=f.charCodeAt(m++))===Np?y=!0:D===GD&&(y=!0,f.charCodeAt(m)===Np&&++m),f.slice(w+1,S-1).replace(/""/g,'"')}for(;m<p;){if((D=f.charCodeAt(S=m++))===Np)y=!0;else if(D===GD)y=!0,f.charCodeAt(m)===Np&&++m;else if(D!==n)continue;return f.slice(w,S)}return E=!0,f.slice(w,p)}for(;(v=T())!==$D;){for(var b=[];v!==H8&&v!==$D;)b.push(v),v=T();h&&(b=h(b,g++))==null||d.push(b)}return d}function a(f,h){return f.map(function(d){return h.map(function(p){return l(d[p])}).join(e)})}function o(f,h){return h==null&&(h=U8(f)),[h.map(l).join(e)].concat(a(f,h)).join(`
`)}function s(f,h){return h==null&&(h=U8(f)),a(f,h).join(`
`)}function u(f){return f.map(c).join(`
`)}function c(f){return f.map(l).join(e)}function l(f){return f==null?"":f instanceof Date?L1e(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:i,parseRows:r,format:o,formatBody:s,formatRows:u,formatRow:c,formatValue:l}}var B1e=G8(","),F1e=B1e.parse,H1e=G8("	"),$1e=H1e.parse;function z8(e,t){return function(n,i,r){arguments.length<3&&(r=i,i=null);var a=HD(n).mimeType(e);return a.row=function(o){return arguments.length?a.response(U1e(t,i=o)):i},a.row(i),r?a.get(r):a}}function U1e(e,t){return function(n){return e(n.responseText,t)}}const G1e=z8("text/csv",F1e),z1e=z8("text/tab-separated-values",$1e),j1e=Object.freeze(Object.defineProperty({__proto__:null,request:HD,html:O1e,json:x1e,text:P1e,xml:R1e,csv:G1e,tsv:z1e},Symbol.toStringTag,{value:"Module"}));let Wy=function(e){_inherits3(n,e);var t=_createSuper3(n);function n({items:i}){var r;return _classCallCheck3(this,n),r=t.call(this),r.state={items:i,isSorting:!1},r}return _createClass3(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(r){this.setState({items:r.items})}},{key:"onSortStart",value:function({node:r,index:a,collection:o},s){s.stopImmediatePropagation();const{onSortStart:u}=this.props;this.setState({isSorting:!0}),u&&u(this.ref),this.sortingIndex=a,this.sortStartTop=s.offsetTop,this.sortStartLeft=s.offsetLeft}},{key:"onSortMove",value:function(){}},{key:"onSortEnd",value:function({oldIndex:r,newIndex:a}){const{onSortEnd:o}=this.props,{items:s}=this.state;this.setState({items:ZK(s,r,a),isSorting:!1}),o&&o(this.state.items),this.sortingIndex=null}},{key:"render",value:function(){const r=this.props.component,{items:a,isSorting:o}=this.state,s={isSorting:o,items:a,onSortEnd:this.onSortEnd.bind(this),onSortStart:this.onSortStart.bind(this),onSortMove:this.onSortMove.bind(this)};return A.default.createElement(r,{...this.props,...s,ref:u=>{this.ref=u}})}}]),n}(A.default.Component);Wy.propTypes={axis:N.exports.string,className:N.exports.string,component:N.exports.func,editable:N.exports.bool,handleConfigTrack:N.exports.func,handleResizeTrack:N.exports.func,height:N.exports.number,helperClass:N.exports.string,itemClass:N.exports.string,itemControlAlignLeft:N.exports.bool,itemReactClass:N.exports.func,items:N.exports.array,onAddSeries:N.exports.func,onCloseTrack:N.exports.func,onCloseTrackMenuOpened:N.exports.func,onConfigTrackMenuOpened:N.exports.func,onSortEnd:N.exports.func,onSortStart:N.exports.func,referenceAncestor:N.exports.string,resizeHandles:N.exports.object,useDragHandle:N.exports.bool,width:N.exports.number},Wy.defaultProps={className:"list stylizedList",itemClass:"item stylizedItem",width:400,height:600};const zD={"top-right-handle":"_top-right-handle_cizw2_1","bottom-right-handle":"_bottom-right-handle_cizw2_2","top-left-handle":"_top-left-handle_cizw2_7","bottom-left-handle":"_bottom-left-handle_cizw2_8","top-draggable-handle":"_top-draggable-handle_cizw2_13","bottom-draggable-handle":"_bottom-draggable-handle_cizw2_14","left-draggable-handle":"_left-draggable-handle_cizw2_15","right-draggable-handle":"_right-draggable-handle_cizw2_16","draggable-div":"_draggable-div_cizw2_22","top-draggable-handle-grabber":"_top-draggable-handle-grabber_cizw2_27","bottom-draggable-handle-grabber":"_bottom-draggable-handle-grabber_cizw2_28","left-draggable-handle-grabber":"_left-draggable-handle-grabber_cizw2_43","right-draggable-handle-grabber":"_right-draggable-handle-grabber_cizw2_44"};let j8=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.dragTopRight=bo().on("start",r.dragStart.bind(_assertThisInitialized3(r))).on("drag",r.dragTopRightFunc.bind(_assertThisInitialized3(r))),r.dragTopLeft=bo().on("start",r.dragStart.bind(_assertThisInitialized3(r))).on("drag",r.dragTopLeftFunc.bind(_assertThisInitialized3(r))),r.dragBottomRight=bo().on("start",r.dragStart.bind(_assertThisInitialized3(r))).on("drag",r.dragBottomRightFunc.bind(_assertThisInitialized3(r))),r.dragBottomLeft=bo().on("start",r.dragStart.bind(_assertThisInitialized3(r))).on("drag",r.dragBottomLeftFunc.bind(_assertThisInitialized3(r))),r.dragBottom=bo().on("start",r.dragStart.bind(_assertThisInitialized3(r))).on("drag",r.dragBottomFunc.bind(_assertThisInitialized3(r))),r.dragTop=bo().on("start",r.dragStart.bind(_assertThisInitialized3(r))).on("drag",r.dragTopFunc.bind(_assertThisInitialized3(r))),r.dragLeft=bo().on("start",r.dragStart.bind(_assertThisInitialized3(r))).on("drag",r.dragLeftFunc.bind(_assertThisInitialized3(r))),r.dragRight=bo().on("start",r.dragStart.bind(_assertThisInitialized3(r))).on("drag",r.dragRightFunc.bind(_assertThisInitialized3(r))),r.minWidth=10,r.minHeight=10,r.bottomHandleWidth=20,r.state={uid:r.props.uid,width:r.props.width,height:r.props.height,top:r.props.top,left:r.props.left},r.domBody=xt("body").node(),r}return _createClass3(n,[{key:"componentDidMount",value:function(){xt(this.bottomHandle).call(this.dragBottom),xt(this.topHandle).call(this.dragTop),xt(this.leftHandle).call(this.dragLeft),xt(this.rightHandle).call(this.dragRight)}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){"width"in r&&this.setState({width:r.width}),"height"in r&&this.setState({height:r.height})}},{key:"dragBottomFunc",value:function(r){const a=sn(r,this.domBody);let o=this.dragStartHeight+(a[1]-this.dragStartMousePos[1]);o=o>this.minHeight?o:this.minHeight,this.setState({height:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragLeftFunc",value:function(r){const a=sn(r,this.domBody);let o=this.dragStartWidth-(a[0]-this.dragStartMousePos[0]);o=o>this.minWidth?o:this.minWidth;let s=this.dragStartLeft+a[0]-this.dragStartMousePos[0];s=o>this.minWidth?s:this.dragStartLeft+this.dragStartWidth-this.minWidth,this.setState({left:s,width:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopFunc",value:function(r){const a=sn(r,this.domBody);let o=this.dragStartHeight-(a[1]-this.dragStartMousePos[1]);o=o>this.minHeight?o:this.minHeight;let s=this.dragStartTop+a[1]-this.dragStartMousePos[1];s=o>this.minHeight?s:this.dragStartTop+this.dragStartHeight-this.minHeight,this.setState({top:s,height:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragRightFunc",value:function(r){const a=sn(r,this.domBody);let o=this.dragStartWidth+(a[0]-this.dragStartMousePos[0]);o=o>this.minWidth?o:this.minWidth,this.setState({width:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomLeftFunc",value:function(r){const a=sn(r,this.domBody);let o=this.dragStartHeight+(a[1]-this.dragStartMousePos[1]);o=o>this.minHeight?o:this.minHeight;let s=this.dragStartWidth-(a[0]-this.dragStartMousePos[0]);s=s>this.minWidth?s:this.minWidth;let u=this.dragStartLeft+a[0]-this.dragStartMousePos[0];u=s>this.minWidth?u:this.dragStartLeft+this.dragStartWidth-this.minWidth,this.setState({left:u,width:s,height:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragBottomRightFunc",value:function(r){const a=sn(r,this.domBody);let o=this.dragStartWidth+(a[0]-this.dragStartMousePos[0]);o=o>this.minWidth?o:this.minWidth;let s=this.dragStartHeight+(a[1]-this.dragStartMousePos[1]);s=s>this.minHeight?s:this.minHeight,this.setState({width:o,height:s}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopRightFunc",value:function(r){const a=sn(r,this.domBody);let o=this.dragStartHeight-(a[1]-this.dragStartMousePos[1]);o=o>this.minHeight?o:this.minHeight;let s=this.dragStartTop+a[1]-this.dragStartMousePos[1];s=o>this.minHeight?s:this.dragStartTop+this.dragStartHeight-this.minHeight;let u=this.dragStartWidth+(a[0]-this.dragStartMousePos[0]);u=u>this.minWidth?u:this.minWidth,this.setState({top:s,width:u,height:o}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragTopLeftFunc",value:function(r){const a=sn(r,this.domBody);let o=this.dragStartWidth-(a[0]-this.dragStartMousePos[0]);o=o>this.minWidth?o:this.minWidth;let s=this.dragStartLeft+a[0]-this.dragStartMousePos[0];s=o>this.minWidth?s:this.dragStartLeft+this.dragStartWidth-this.minWidth;let u=this.dragStartHeight-(a[1]-this.dragStartMousePos[1]);u=u>this.minHeight?u:this.minHeight;let c=this.dragStartTop+a[1]-this.dragStartMousePos[1];c=u>this.minHeight?c:this.dragStartTop+this.dragStartHeight-this.minHeight,this.setState({top:c,left:s,width:o,height:u}),r.sourceEvent.stopPropagation(),this.sizeChanged()}},{key:"dragStart",value:function(r){this.dragStartMousePos=sn(r,this.domBody),this.dragStartWidth=this.state.width,this.dragStartHeight=this.state.height,this.dragStartTop=this.state.top,this.dragStartLeft=this.state.left,r.sourceEvent.stopPropagation()}},{key:"sizeChanged",value:function(){this.props.sizeChanged&&this.props.sizeChanged(this.state)}},{key:"rotateClicked",value:function(){this.props.trackRotated(this.state.uid)}},{key:"closeClicked",value:function(){this.props.trackClosed(this.state.uid)}},{key:"render",value:function(){const r=this.props.theme===pn?"white":"black",a={top:this.state.top,left:this.state.left,width:this.state.width,height:this.state.height,opacity:this.props.opacity},o=24,s=24,u={left:this.state.width/2-o/2,width:o},c={top:this.state.height/2-s/2,height:s},l={bottom:{...u,bottom:1},top:{...u,top:1},left:{...c,left:1},right:{...c,right:1}},f=[...this.props.resizeHandles].map(h=>A.default.createElement("div",{key:h,ref:d=>{this[`${h}Handle`]=d},className:zD[`${h}-draggable-handle`],style:l[h],title:"Resize track"},A.default.createElement("div",{className:zD[`${h}-draggable-handle-grabber`],style:{borderColor:r}})));return A.default.createElement("div",{ref:h=>{this.divContainer=h},className:qt(this.props.className,zD["draggable-div"]),style:a},f)}}]),n}(A.default.Component);j8.propTypes={className:N.exports.string,height:N.exports.number,left:N.exports.number,opacity:N.exports.number,resizeHandles:N.exports.object,sizeChanged:N.exports.func,top:N.exports.number,trackClosed:N.exports.func,trackRotated:N.exports.func,uid:N.exports.string,width:N.exports.number,theme:N.exports.symbol};const V1e=Nl(j8);let V8=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.state={controlsVisible:!1},r}return _createClass3(n,[{key:"shouldComponentUpdate",value:function(){return!this.resizing}},{key:"handleMouseEnter",value:function(){this.setState({controlsVisible:!0})}},{key:"handleMouseLeave",value:function(){this.setState({controlsVisible:!1})}},{key:"handleMouseMove",value:function(){this.setState({controlsVisible:!0})}},{key:"getControls",value:function(){let r=null;return this.moveable?r=hb(()=>A.default.createElement("svg",{className:"no-zoom",height:"10px",onClick:()=>{},style:this.getMoveImgStyle(),width:"10px"},A.default.createElement("use",{xlinkHref:"#move"}))):r=hb(()=>A.default.createElement("div",null)),A.default.createElement("div",{style:{position:"absolute",backgroundColor:"rgba(255,255,255,0.7)",right:"3px",top:"3px",pointerEvents:"none",paddingLeft:"5px",paddingRight:"5px",borderRadius:"5px",border:"1px solid #dddddd"}},A.default.createElement(r,null),A.default.createElement("svg",{ref:a=>{this.imgConfig=a},className:"no-zoom",height:"10px",onClick:()=>{const o=Un.default.findDOMNode(this.imgConfig).getBoundingClientRect();this.props.onConfigTrackMenuOpened(this.props.uid,o)},style:this.getSettingsImgStyle(),width:"10px"},A.default.createElement("use",{xlinkHref:"#cog"})),A.default.createElement("svg",{ref:a=>{this.imgAdd=a},className:"no-zoom",height:"10px",onClick:()=>this.props.onAddSeries(this.props.uid),style:this.getAddImgStyle(),width:"10px"},A.default.createElement("use",{xlinkHref:"#plus"})),A.default.createElement("svg",{ref:a=>{this.imgClose=a},className:"no-zoom",height:"10px",onClick:()=>{const o=Un.default.findDOMNode(this.imgClose).getBoundingClientRect();this.props.onCloseTrackMenuOpened(this.props.uid,o)},style:this.getCloseImgStyle(),width:"10px"},A.default.createElement("use",{xlinkHref:"#cross"})))}}]),n}(A.default.Component);V8.propTypes={configMenuOpen:N.exports.bool,onConfigTrackMenuOpened:N.exports.func,onCloseTrackMenuOpened:N.exports.func,onAddSeries:N.exports.func,uid:N.exports.string};let qy=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.moveable=!0,r}return _createClass3(n,[{key:"render",value:function(){return A.default.createElement("div",{ref:r=>{this.el=r},className:this.props.className,onMouseEnter:this.handleMouseEnter.bind(this),onMouseLeave:()=>{this.handleMouseLeave()},style:{height:this.props.height,width:this.props.width}},A.default.createElement(V1e,{key:this.props.uid,height:this.props.height,resizeHandles:this.props.editable?this.props.resizeHandles:new Set,sizeChanged:r=>this.props.handleResizeTrack(this.props.uid,r.width,r.height),style:{background:"transparent"},uid:this.props.uid,width:this.props.width}),this.props.editable&&this.getControls(this.state.controlsVisible||this.props.item.configMenuVisible))}}]),n}(V8);qy.propTypes={className:N.exports.string,uid:N.exports.string,item:N.exports.object,height:N.exports.number,width:N.exports.number};const Xy={pointerEvents:"all"};let Y8=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"getControls",value:function(r){return A.default.createElement(Av,{configMenuVisible:this.props.item.configMenuVisible,imgStyleAdd:Xy,imgStyleClose:Xy,imgStyleMove:Xy,imgStyleSettings:Xy,isMoveable:this.moveable,isVisible:r,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}]),n}(qy);const Y1e=$P(e=>A.default.createElement(Y8,{className:e.className,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width})),W8=fZ(({className:e,items:t,itemClass:n,itemControlAlignLeft:i,sortingIndex:r,useDragHandle:a,sortableHandlers:o,height:s,width:u,onCloseTrack:c,onCloseTrackMenuOpened:l,onConfigTrackMenuOpened:f,onAddSeries:h,handleConfigTrack:d,editable:p,itemReactClass:m,handleResizeTrack:g,resizeHandles:v})=>{const E=t.map((y,T)=>A.default.createElement(m,{key:`sci-${y.uid}`,className:n,controlAlignLeft:i,sortingIndex:r,index:T,uid:y.uid,height:y.height,width:y.width,item:y,useDragHandle:a,onCloseTrack:c,onCloseTrackMenuOpened:l,onConfigTrackMenuOpened:f,onAddSeries:h,handleConfigTrack:d,editable:p,handleResizeTrack:g,resizeHandles:v}));return A.default.createElement("div",{className:e,style:{height:s,width:u,background:"transparent"},...o},E)}),W1e={"horizontal-tiled-plot":"_horizontal-tiled-plot_1bqkg_1"};function q8(e){return e&&e.sourceEvent}let Ky=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.brushBehavior=wg().on("start",r.brushStarted.bind(_assertThisInitialized3(r))).on("brush",r.brushed.bind(_assertThisInitialized3(r))).on("end",r.brushedEnded.bind(_assertThisInitialized3(r))),r}return _createClass3(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(r,a){return this.rangeSelectionTriggered?(this.rangeSelectionTriggered=!1,this.rangeSelectionTriggeredEnd&&this.props.rangeSelection!==r.rangeSelection&&this.moveBrush(r.rangeSelection[0]?r.rangeSelection[0]:null,!0),this.rangeSelectionTriggeredEnd=!1,this.state!==a):this.props.rangeSelection!==r.rangeSelection?(this.moveBrush(r.rangeSelection[0]?r.rangeSelection[0]:null,r.rangeSelectionEnd),this.state!==a):!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){!this.brushEl||this.brushElAddedBefore===this.brushEl||(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,zu(this.brushEl,pa["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(r){const a=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!q8(r)||!this.props.onRangeSelection||a)&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(r.selection))}},{key:"brushStarted",value:function(r){!q8(r)||!r.selection||this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(r){if(!this.props.is1dRangeSelection)return;const a=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,r.selection&&r.sourceEvent&&this.props.onRangeSelection&&!a&&(this.rangeSelectionTriggered=!0,this.rangeSelectionTriggeredEnd=!0,this.props.onRangeSelectionEnd(r.selection)),r.selection||(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionReset())}},{key:"moveBrush",value:function(r,a=!1){if(!this.brushEl)return;const o=r?[this.props.scale(r[0]),this.props.scale(r[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,a?this.brushEl.transition().call(this.brushBehavior.move,o):this.brushEl.call(this.brushBehavior.move,o)}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionReset())}},{key:"render",value:function(){const r=this.props.tracks.map(s=>s.height).reduce(es,0),a=this.props.tracks.map(s=>ju(s)).reduce(Bf,!1),o=this.props.isRangeSelectionActive?pa["track-range-selection-active"]:pa["track-range-selection"];return A.default.createElement("div",{className:qt("horizontal-tiled-plot",W1e["horizontal-tiled-plot"])},a&&A.default.createElement("svg",{ref:s=>{this.brushEl=xt(s)},className:o,style:{height:r,width:this.props.width},xmlns:"http://www.w3.org/2000/svg"}),A.default.createElement(Wy,{className:qt(ma.list,ma.stylizedList),component:W8,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:r,helperClass:ma.stylizedHelper,itemClass:ma.stylizedItem,itemReactClass:Y1e,items:this.props.tracks.map(s=>({configMenuVisible:s.uid===this.props.configTrackMenuId,uid:s.uid||Pt.nice(),width:this.props.width,height:s.height,value:s.value})),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:this.props.width}))}}]),n}(A.default.Component);Ky.propTypes={configTrackMenuId:N.exports.string,editable:N.exports.bool,handleConfigTrack:N.exports.func,handleResizeTrack:N.exports.func,handleSortEnd:N.exports.func,is1dRangeSelection:N.exports.bool,isRangeSelectionActive:N.exports.bool,onAddSeries:N.exports.func,onCloseTrack:N.exports.func,onCloseTrackMenuOpened:N.exports.func,onConfigTrackMenuOpened:N.exports.func,onRangeSelection:N.exports.func,onRangeSelectionEnd:N.exports.func,onRangeSelectionReset:N.exports.func,onRangeSelectionStart:N.exports.func,rangeSelection:N.exports.array,rangeSelectionEnd:N.exports.bool,referenceAncestor:N.exports.func,resizeHandles:N.exports.object,scale:N.exports.func,tracks:N.exports.array,width:N.exports.number};const Zy={pointerEvents:"all"};let X8=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"getControls",value:function(r){return A.default.createElement(Av,{imgStyleAdd:Zy,imgStyleClose:Zy,imgStyleMove:Zy,imgStyleSettings:Zy,isAlignLeft:this.props.controlAlignLeft,isMoveable:this.moveable,isVertical:!0,isVisible:r,onAddSeries:this.props.onAddSeries,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,uid:this.props.uid})}}]),n}(qy),q1e=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i,r){var a;_classCallCheck3(this,n),a=t.call(this,i,r);const{registerViewportChanged:o,removeViewportChanged:s}=i,u=Pt.nice();return a.uid=u,a.removeViewportChanged=s,a.viewportXDomain=null,a.viewportYDomain=null,o(u,a.viewportChanged.bind(_assertThisInitialized3(a))),a}return _createClass3(n,[{key:"viewportChanged",value:function(r,a){const o=r.domain(),s=a.domain();this.viewportXDomain=o,this.viewportYDomain=s,this.draw()}},{key:"draw",value:function(){const r=this.pMain;if(!this.viewportXDomain||!this.viewportYDomain)return;r.clear(),r.lineStyle(1,255,1),r.beginFill(16740363,1);const a=this._xScale(this.viewportXDomain[0]),o=this._yScale(this.viewportYDomain[0]),s=this._xScale(this.viewportXDomain[1])-this._xScale(this.viewportXDomain[0]),u=this._yScale(this.viewportYDomain[1])-this._yScale(this.viewportYDomain[0]);this.pMain.drawRect(a,o,s,u)}},{key:"zoomed",value:function(r,a){this.xScale(r),this.yScale(a),this.draw()}},{key:"setPosition",value:function(r){_get4(_getPrototypeOf4(n.prototype),"setPosition",this).call(this,r),this.pMain.position.y=this.position[1],this.pMain.position.x=this.position[0],this.draw()}}]),n}(Qr);function K8(e){this.size=0,this.limit=e,this._keymap={}}function X1e(e,t){const n={key:e,value:t};if(this._keymap[e]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit)return this.shift();this.size+=1}function K1e(){const e=this.head;return e&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):(this.head=void 0,this.tail=void 0),e.newer=void 0,e.older=void 0,delete this._keymap[e.key],this.size-=1),e}function Z1e(e,t){const n=this._keymap[e];if(n!==void 0)return n===this.tail||(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n),t?n:n.value}function Q1e(e){return this._keymap[e]}function J1e(e,t){const n=this.get(e,!0);let i;return n?(i=n.value,n.value=t):(i=this.put(e,t),i&&(i=i.value)),i}function ebe(e){const t=this._keymap[e];if(!!t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.head=t.newer):t.older?(t.older.newer=void 0,this.tail=t.older):(this.head=void 0,this.tail=void 0),this.size-=1,t.value}function tbe(){this.head=void 0,this.tail=void 0,this.size=0,this._keymap={}}function nbe(){return Object.keys(this._keymap)}function rbe(e,t,n){let i;if(t===!0?(n=!0,t=void 0):typeof t!="object"&&(t=this),n)for(i=this.tail;i;)e.call(t,i.key,i.value,this),i=i.older;else for(i=this.head;i;)e.call(t,i.key,i.value,this),i=i.newer}function ibe(){const e=[];let t=this.head;for(;t;)e.push({key:t.key.toJSON(),value:t.value.toJSON()}),t=t.newer;return e}function abe(){let e="",t=this.head;for(;t;)e+=`${String(t.key)}:${t.value}`,t=t.newer,t&&(e+=" < ");return e}Object.assign(K8.prototype,{put:X1e,get:Z1e,find:Q1e,keys:nbe,set:J1e,shift:K1e,remove:ebe,removeAll:tbe,forEach:rbe,toJSON:ibe,toString:abe});const jD="1.12.4",VD={button:"_button_1wnjn_1","button-shortcut":"_button-shortcut_1wnjn_35"},Go=A.default.forwardRef((e,t)=>{var n;return A.default.createElement("button",{ref:t,className:(n=VD[e.styleName])!=null?n:VD.button,disabled:e.disable,onBlur:e.onBlur,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseOut:e.onMouseOut,onMouseUp:e.onMouseUp,type:"button"},e.children,e.shortcut&&A.default.createElement("span",{className:VD["button-shortcut"]},e.shortcut))});Go.defaultProps={onClick:()=>{},styleName:"",type:"button"},Go.propTypes={children:N.exports.any,disable:N.exports.bool,onBlur:N.exports.func,onClick:N.exports.func,onMouseDown:N.exports.func,onMouseOut:N.exports.func,onMouseUp:N.exports.func,shortcut:N.exports.string,type:N.exports.string,styleName:N.exports.string};const obe={cross:"_cross_2ke8w_1"};function Z8(){return A.default.createElement("div",{className:obe.cross})}const{Provider:sbe,Consumer:lbe}=A.default.createContext({close:La,open:La}),Qy=e=>A.default.forwardRef((t,n)=>A.default.createElement(lbe,null,i=>A.default.createElement(e,{ref:n,...t,modal:i}))),gh={"modal-background":"_modal-background_zzhoe_1","fade-in":"_fade-in_zzhoe_1","modal-hide":"_modal-hide_zzhoe_13","modal-wrap":"_modal-wrap_zzhoe_17","modal-window":"_modal-window_zzhoe_25","fade-scale-in":"_fade-scale-in_zzhoe_1","modal-window-max-height":"_modal-window-max-height_zzhoe_38","modal-content":"_modal-content_zzhoe_42"};function YD(e){const t=()=>{e.modal.close(),e.onClose&&e.onClose()};return A.default.createElement("div",{className:qt(gh["modal-background"],{[gh["modal-hide"]]:e.hide})},A.default.createElement("div",{className:gh["modal-wrap"]},A.default.createElement("div",{className:qt(gh["modal-window"],{[gh["modal-window-max-height"]]:e.maxHeight})},e.closeButton&&A.default.createElement(Go,{onClick:t},A.default.createElement(Z8,null)),A.default.createElement("div",{className:gh["modal-content"]},e.children))))}YD.defaultProps={closeButton:!0,hide:!1,maxHeight:!1},YD.propTypes={children:N.exports.element.isRequired,closeButton:N.exports.bool,hide:N.exports.bool,maxHeight:N.exports.bool,modal:N.exports.object.isRequired,onClose:N.exports.func};const ube=Qy(YD),WD={"dialog-header":"_dialog-header_wp50s_1","dialog-main-max-height":"_dialog-main-max-height_wp50s_20","dialog-footer":"_dialog-footer_wp50s_31","dialog-footer-max-height":"_dialog-footer-max-height_wp50s_31"};function qD(e){const t=()=>{e.modal.close(),e.onCancel&&e.onCancel()},n=()=>{e.modal.close(),e.onOkay&&e.onOkay()};return A.default.createElement(ube,{closeButton:!1,hide:e.hide,maxHeight:e.maxHeight},A.default.createElement(A.default.Fragment,null,A.default.createElement("header",{className:WD["dialog-header"]},A.default.createElement("h3",null,e.title),A.default.createElement(Go,{onClick:t},A.default.createElement(Z8,null))),e.maxHeight?A.default.createElement("main",{className:qt(e.maxHeight&&WD["dialog-main-max-height"])},e.children):A.default.createElement("main",null,e.children),A.default.createElement("footer",{className:WD[e.maxHeight?"dialog-footer-max-height":"dialog-footer"]},e.okayOnly?A.default.createElement("div",null):A.default.createElement(Go,{onClick:t,shortcut:e.cancelShortcut},e.cancelTitle),A.default.createElement(Go,{onClick:n,shortcut:e.okayShortcut},e.okayTitle))))}qD.defaultProps={cancelTitle:"Cancel",hide:!1,maxHeight:!1,okayOnly:!1,okayTitle:"Ok"},qD.propTypes={cancelShortcut:N.exports.string,cancelTitle:N.exports.string,children:N.exports.object,hide:N.exports.bool,maxHeight:N.exports.bool,modal:N.exports.object.isRequired,okayShortcut:N.exports.string,okayTitle:N.exports.string,okayOnly:N.exports.bool,onCancel:N.exports.func.isRequired,onOkay:N.exports.func.isRequired,title:N.exports.string.isRequired};const Mp=Qy(qD);var Ji={},Lp={},cbe=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;const Q8=cbe;var hbe=typeof self=="object"&&self&&self.Object===Object&&self,fbe=Q8||hbe||Function("return this")();const _a=fbe;var dbe=_a.Symbol;const uo=dbe;var J8=Object.prototype,pbe=J8.hasOwnProperty,mbe=J8.toString,Bp=uo?uo.toStringTag:void 0;function gbe(e){var t=pbe.call(e,Bp),n=e[Bp];try{e[Bp]=void 0;var i=!0}catch{}var r=mbe.call(e);return i&&(t?e[Bp]=n:delete e[Bp]),r}var vbe=Object.prototype,ybe=vbe.toString;function Tbe(e){return ybe.call(e)}var Ebe="[object Null]",bbe="[object Undefined]",e9=uo?uo.toStringTag:void 0;function xs(e){return e==null?e===void 0?bbe:Ebe:e9&&e9 in Object(e)?gbe(e):Tbe(e)}var _be=Array.isArray;const si=_be;function Sa(e){return e!=null&&typeof e=="object"}var Sbe="[object String]";function Abe(e){return typeof e=="string"||!si(e)&&Sa(e)&&xs(e)==Sbe}const Cbe=fo(Object.freeze(Object.defineProperty({__proto__:null,default:Abe},Symbol.toStringTag,{value:"Module"})));function Dbe(e){return function(t,n,i){for(var r=-1,a=Object(t),o=i(t),s=o.length;s--;){var u=o[e?s:++r];if(n(a[u],u,a)===!1)break}return t}}var wbe=Dbe();const t9=wbe;function Ibe(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}var kbe="[object Arguments]";function n9(e){return Sa(e)&&xs(e)==kbe}var r9=Object.prototype,Obe=r9.hasOwnProperty,xbe=r9.propertyIsEnumerable,Pbe=n9(function(){return arguments}())?n9:function(e){return Sa(e)&&Obe.call(e,"callee")&&!xbe.call(e,"callee")};const Jy=Pbe;function Rbe(){return!1}var i9=typeof Ve=="object"&&Ve&&!Ve.nodeType&&Ve,a9=i9&&typeof module=="object"&&module&&!module.nodeType&&module,Nbe=a9&&a9.exports===i9,o9=Nbe?_a.Buffer:void 0,Mbe=o9?o9.isBuffer:void 0,Lbe=Mbe||Rbe;const Fp=Lbe;var Bbe=9007199254740991,Fbe=/^(?:0|[1-9]\d*)$/;function XD(e,t){var n=typeof e;return t=t??Bbe,!!t&&(n=="number"||n!="symbol"&&Fbe.test(e))&&e>-1&&e%1==0&&e<t}var Hbe=9007199254740991;function KD(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Hbe}var $be="[object Arguments]",Ube="[object Array]",Gbe="[object Boolean]",zbe="[object Date]",jbe="[object Error]",Vbe="[object Function]",Ybe="[object Map]",Wbe="[object Number]",qbe="[object Object]",Xbe="[object RegExp]",Kbe="[object Set]",Zbe="[object String]",Qbe="[object WeakMap]",Jbe="[object ArrayBuffer]",e_e="[object DataView]",t_e="[object Float32Array]",n_e="[object Float64Array]",r_e="[object Int8Array]",i_e="[object Int16Array]",a_e="[object Int32Array]",o_e="[object Uint8Array]",s_e="[object Uint8ClampedArray]",l_e="[object Uint16Array]",u_e="[object Uint32Array]",Sn={};Sn[t_e]=Sn[n_e]=Sn[r_e]=Sn[i_e]=Sn[a_e]=Sn[o_e]=Sn[s_e]=Sn[l_e]=Sn[u_e]=!0,Sn[$be]=Sn[Ube]=Sn[Jbe]=Sn[Gbe]=Sn[e_e]=Sn[zbe]=Sn[jbe]=Sn[Vbe]=Sn[Ybe]=Sn[Wbe]=Sn[qbe]=Sn[Xbe]=Sn[Kbe]=Sn[Zbe]=Sn[Qbe]=!1;function c_e(e){return Sa(e)&&KD(e.length)&&!!Sn[xs(e)]}function ZD(e){return function(t){return e(t)}}var s9=typeof Ve=="object"&&Ve&&!Ve.nodeType&&Ve,Hp=s9&&typeof module=="object"&&module&&!module.nodeType&&module,h_e=Hp&&Hp.exports===s9,QD=h_e&&Q8.process,f_e=function(){try{var e=Hp&&Hp.require&&Hp.require("util").types;return e||QD&&QD.binding&&QD.binding("util")}catch{}}();const vh=f_e;var l9=vh&&vh.isTypedArray,d_e=l9?ZD(l9):c_e;const JD=d_e;var p_e=Object.prototype,m_e=p_e.hasOwnProperty;function u9(e,t){var n=si(e),i=!n&&Jy(e),r=!n&&!i&&Fp(e),a=!n&&!i&&!r&&JD(e),o=n||i||r||a,s=o?Ibe(e.length,String):[],u=s.length;for(var c in e)(t||m_e.call(e,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||XD(c,u)))&&s.push(c);return s}var g_e=Object.prototype;function ew(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||g_e;return e===n}function c9(e,t){return function(n){return e(t(n))}}var v_e=c9(Object.keys,Object);const y_e=v_e;var T_e=Object.prototype,E_e=T_e.hasOwnProperty;function b_e(e){if(!ew(e))return y_e(e);var t=[];for(var n in Object(e))E_e.call(e,n)&&n!="constructor"&&t.push(n);return t}function Ri(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var __e="[object AsyncFunction]",S_e="[object Function]",A_e="[object GeneratorFunction]",C_e="[object Proxy]";function tw(e){if(!Ri(e))return!1;var t=xs(e);return t==S_e||t==A_e||t==__e||t==C_e}function yh(e){return e!=null&&KD(e.length)&&!tw(e)}function $p(e){return yh(e)?u9(e):b_e(e)}function h9(e,t){return e&&t9(e,t,$p)}function eT(e){return e}function f9(e){return typeof e=="function"?e:eT}function D_e(e,t){return e&&h9(e,f9(t))}const nw=fo(Object.freeze(Object.defineProperty({__proto__:null,default:D_e},Symbol.toStringTag,{value:"Module"})));var w_e=c9(Object.getPrototypeOf,Object);const rw=w_e;var I_e="[object Object]",k_e=Function.prototype,O_e=Object.prototype,d9=k_e.toString,x_e=O_e.hasOwnProperty,P_e=d9.call(Object);function p9(e){if(!Sa(e)||xs(e)!=I_e)return!1;var t=rw(e);if(t===null)return!0;var n=x_e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&d9.call(n)==P_e}const R_e=fo(Object.freeze(Object.defineProperty({__proto__:null,default:p9},Symbol.toStringTag,{value:"Module"})));function m9(e,t){for(var n=-1,i=e==null?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function N_e(){this.__data__=[],this.size=0}function Up(e,t){return e===t||e!==e&&t!==t}function tT(e,t){for(var n=e.length;n--;)if(Up(e[n][0],t))return n;return-1}var M_e=Array.prototype,L_e=M_e.splice;function B_e(e){var t=this.__data__,n=tT(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():L_e.call(t,n,1),--this.size,!0}function F_e(e){var t=this.__data__,n=tT(t,e);return n<0?void 0:t[n][1]}function H_e(e){return tT(this.__data__,e)>-1}function $_e(e,t){var n=this.__data__,i=tT(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function zo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}zo.prototype.clear=N_e,zo.prototype.delete=B_e,zo.prototype.get=F_e,zo.prototype.has=H_e,zo.prototype.set=$_e;function U_e(){this.__data__=new zo,this.size=0}function G_e(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function z_e(e){return this.__data__.get(e)}function j_e(e){return this.__data__.has(e)}var V_e=_a["__core-js_shared__"];const iw=V_e;var g9=function(){var e=/[^.]+$/.exec(iw&&iw.keys&&iw.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Y_e(e){return!!g9&&g9 in e}var W_e=Function.prototype,q_e=W_e.toString;function eu(e){if(e!=null){try{return q_e.call(e)}catch{}try{return e+""}catch{}}return""}var X_e=/[\\^$.*+?()[\]{}|]/g,K_e=/^\[object .+?Constructor\]$/,Z_e=Function.prototype,Q_e=Object.prototype,J_e=Z_e.toString,eSe=Q_e.hasOwnProperty,tSe=RegExp("^"+J_e.call(eSe).replace(X_e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nSe(e){if(!Ri(e)||Y_e(e))return!1;var t=tw(e)?tSe:K_e;return t.test(eu(e))}function rSe(e,t){return e?.[t]}function tu(e,t){var n=rSe(e,t);return nSe(n)?n:void 0}var iSe=tu(_a,"Map");const Gp=iSe;var aSe=tu(Object,"create");const zp=aSe;function oSe(){this.__data__=zp?zp(null):{},this.size=0}function sSe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lSe="__lodash_hash_undefined__",uSe=Object.prototype,cSe=uSe.hasOwnProperty;function hSe(e){var t=this.__data__;if(zp){var n=t[e];return n===lSe?void 0:n}return cSe.call(t,e)?t[e]:void 0}var fSe=Object.prototype,dSe=fSe.hasOwnProperty;function pSe(e){var t=this.__data__;return zp?t[e]!==void 0:dSe.call(t,e)}var mSe="__lodash_hash_undefined__";function gSe(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zp&&t===void 0?mSe:t,this}function nu(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}nu.prototype.clear=oSe,nu.prototype.delete=sSe,nu.prototype.get=hSe,nu.prototype.has=pSe,nu.prototype.set=gSe;function vSe(){this.size=0,this.__data__={hash:new nu,map:new(Gp||zo),string:new nu}}function ySe(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function nT(e,t){var n=e.__data__;return ySe(t)?n[typeof t=="string"?"string":"hash"]:n.map}function TSe(e){var t=nT(this,e).delete(e);return this.size-=t?1:0,t}function ESe(e){return nT(this,e).get(e)}function bSe(e){return nT(this,e).has(e)}function _Se(e,t){var n=nT(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function jo(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}jo.prototype.clear=vSe,jo.prototype.delete=TSe,jo.prototype.get=ESe,jo.prototype.has=bSe,jo.prototype.set=_Se;var SSe=200;function ASe(e,t){var n=this.__data__;if(n instanceof zo){var i=n.__data__;if(!Gp||i.length<SSe-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new jo(i)}return n.set(e,t),this.size=n.size,this}function Aa(e){var t=this.__data__=new zo(e);this.size=t.size}Aa.prototype.clear=U_e,Aa.prototype.delete=G_e,Aa.prototype.get=z_e,Aa.prototype.has=j_e,Aa.prototype.set=ASe;var CSe="__lodash_hash_undefined__";function DSe(e){return this.__data__.set(e,CSe),this}function wSe(e){return this.__data__.has(e)}function rT(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new jo;++t<n;)this.add(e[t])}rT.prototype.add=rT.prototype.push=DSe,rT.prototype.has=wSe;function ISe(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function kSe(e,t){return e.has(t)}var OSe=1,xSe=2;function v9(e,t,n,i,r,a){var o=n&OSe,s=e.length,u=t.length;if(s!=u&&!(o&&u>s))return!1;var c=a.get(e),l=a.get(t);if(c&&l)return c==t&&l==e;var f=-1,h=!0,d=n&xSe?new rT:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var p=e[f],m=t[f];if(i)var g=o?i(m,p,f,t,e,a):i(p,m,f,e,t,a);if(g!==void 0){if(g)continue;h=!1;break}if(d){if(!ISe(t,function(v,E){if(!kSe(d,E)&&(p===v||r(p,v,n,i,a)))return d.push(E)})){h=!1;break}}else if(!(p===m||r(p,m,n,i,a))){h=!1;break}}return a.delete(e),a.delete(t),h}var PSe=_a.Uint8Array;const iT=PSe;function RSe(e){var t=-1,n=Array(e.size);return e.forEach(function(i,r){n[++t]=[r,i]}),n}function NSe(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}var MSe=1,LSe=2,BSe="[object Boolean]",FSe="[object Date]",HSe="[object Error]",$Se="[object Map]",USe="[object Number]",GSe="[object RegExp]",zSe="[object Set]",jSe="[object String]",VSe="[object Symbol]",YSe="[object ArrayBuffer]",WSe="[object DataView]",y9=uo?uo.prototype:void 0,aw=y9?y9.valueOf:void 0;function qSe(e,t,n,i,r,a,o){switch(n){case WSe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case YSe:return!(e.byteLength!=t.byteLength||!a(new iT(e),new iT(t)));case BSe:case FSe:case USe:return Up(+e,+t);case HSe:return e.name==t.name&&e.message==t.message;case GSe:case jSe:return e==t+"";case $Se:var s=RSe;case zSe:var u=i&MSe;if(s||(s=NSe),e.size!=t.size&&!u)return!1;var c=o.get(e);if(c)return c==t;i|=LSe,o.set(e,t);var l=v9(s(e),s(t),i,r,a,o);return o.delete(e),l;case VSe:if(aw)return aw.call(e)==aw.call(t)}return!1}function T9(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function E9(e,t,n){var i=t(e);return si(e)?i:T9(i,n(e))}function XSe(e,t){for(var n=-1,i=e==null?0:e.length,r=0,a=[];++n<i;){var o=e[n];t(o,n,e)&&(a[r++]=o)}return a}function b9(){return[]}var KSe=Object.prototype,ZSe=KSe.propertyIsEnumerable,_9=Object.getOwnPropertySymbols,QSe=_9?function(e){return e==null?[]:(e=Object(e),XSe(_9(e),function(t){return ZSe.call(e,t)}))}:b9;const ow=QSe;function sw(e){return E9(e,$p,ow)}var JSe=1,eAe=Object.prototype,tAe=eAe.hasOwnProperty;function nAe(e,t,n,i,r,a){var o=n&JSe,s=sw(e),u=s.length,c=sw(t),l=c.length;if(u!=l&&!o)return!1;for(var f=u;f--;){var h=s[f];if(!(o?h in t:tAe.call(t,h)))return!1}var d=a.get(e),p=a.get(t);if(d&&p)return d==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);for(var g=o;++f<u;){h=s[f];var v=e[h],E=t[h];if(i)var y=o?i(E,v,h,t,e,a):i(v,E,h,e,t,a);if(!(y===void 0?v===E||r(v,E,n,i,a):y)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var T=e.constructor,b=t.constructor;T!=b&&"constructor"in e&&"constructor"in t&&!(typeof T=="function"&&T instanceof T&&typeof b=="function"&&b instanceof b)&&(m=!1)}return a.delete(e),a.delete(t),m}var rAe=tu(_a,"DataView");const lw=rAe;var iAe=tu(_a,"Promise");const uw=iAe;var aAe=tu(_a,"Set");const cw=aAe;var oAe=tu(_a,"WeakMap");const hw=oAe;var S9="[object Map]",sAe="[object Object]",A9="[object Promise]",C9="[object Set]",D9="[object WeakMap]",w9="[object DataView]",lAe=eu(lw),uAe=eu(Gp),cAe=eu(uw),hAe=eu(cw),fAe=eu(hw),ru=xs;(lw&&ru(new lw(new ArrayBuffer(1)))!=w9||Gp&&ru(new Gp)!=S9||uw&&ru(uw.resolve())!=A9||cw&&ru(new cw)!=C9||hw&&ru(new hw)!=D9)&&(ru=function(e){var t=xs(e),n=t==sAe?e.constructor:void 0,i=n?eu(n):"";if(i)switch(i){case lAe:return w9;case uAe:return S9;case cAe:return A9;case hAe:return C9;case fAe:return D9}return t});const jp=ru;var dAe=1,I9="[object Arguments]",k9="[object Array]",aT="[object Object]",pAe=Object.prototype,O9=pAe.hasOwnProperty;function mAe(e,t,n,i,r,a){var o=si(e),s=si(t),u=o?k9:jp(e),c=s?k9:jp(t);u=u==I9?aT:u,c=c==I9?aT:c;var l=u==aT,f=c==aT,h=u==c;if(h&&Fp(e)){if(!Fp(t))return!1;o=!0,l=!1}if(h&&!l)return a||(a=new Aa),o||JD(e)?v9(e,t,n,i,r,a):qSe(e,t,u,n,i,r,a);if(!(n&dAe)){var d=l&&O9.call(e,"__wrapped__"),p=f&&O9.call(t,"__wrapped__");if(d||p){var m=d?e.value():e,g=p?t.value():t;return a||(a=new Aa),r(m,g,n,i,a)}}return h?(a||(a=new Aa),nAe(e,t,n,i,r,a)):!1}function fw(e,t,n,i,r){return e===t?!0:e==null||t==null||!Sa(e)&&!Sa(t)?e!==e&&t!==t:mAe(e,t,n,i,fw,r)}var gAe=1,vAe=2;function yAe(e,t,n,i){var r=n.length,a=r,o=!i;if(e==null)return!a;for(e=Object(e);r--;){var s=n[r];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++r<a;){s=n[r];var u=s[0],c=e[u],l=s[1];if(o&&s[2]){if(c===void 0&&!(u in e))return!1}else{var f=new Aa;if(i)var h=i(c,l,u,e,t,f);if(!(h===void 0?fw(l,c,gAe|vAe,i,f):h))return!1}}return!0}function x9(e){return e===e&&!Ri(e)}function TAe(e){for(var t=$p(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,x9(r)]}return t}function P9(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function EAe(e){var t=TAe(e);return t.length==1&&t[0][2]?P9(t[0][0],t[0][1]):function(n){return n===e||yAe(n,e,t)}}var bAe="[object Symbol]";function oT(e){return typeof e=="symbol"||Sa(e)&&xs(e)==bAe}var _Ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,SAe=/^\w*$/;function dw(e,t){if(si(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||oT(e)?!0:SAe.test(e)||!_Ae.test(e)||t!=null&&e in Object(t)}var AAe="Expected a function";function pw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(AAe);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(pw.Cache||jo),n}pw.Cache=jo;var CAe=500;function DAe(e){var t=pw(e,function(i){return n.size===CAe&&n.clear(),i}),n=t.cache;return t}var wAe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,IAe=/\\(\\)?/g,kAe=DAe(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(wAe,function(n,i,r,a){t.push(r?a.replace(IAe,"$1"):i||n)}),t});const OAe=kAe;var xAe=1/0,R9=uo?uo.prototype:void 0,N9=R9?R9.toString:void 0;function M9(e){if(typeof e=="string")return e;if(si(e))return m9(e,M9)+"";if(oT(e))return N9?N9.call(e):"";var t=e+"";return t=="0"&&1/e==-xAe?"-0":t}function PAe(e){return e==null?"":M9(e)}function L9(e,t){return si(e)?e:dw(e,t)?[e]:OAe(PAe(e))}var RAe=1/0;function sT(e){if(typeof e=="string"||oT(e))return e;var t=e+"";return t=="0"&&1/e==-RAe?"-0":t}function B9(e,t){t=L9(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[sT(t[n++])];return n&&n==i?e:void 0}function NAe(e,t,n){var i=e==null?void 0:B9(e,t);return i===void 0?n:i}function MAe(e,t){return e!=null&&t in Object(e)}function LAe(e,t,n){t=L9(t,e);for(var i=-1,r=t.length,a=!1;++i<r;){var o=sT(t[i]);if(!(a=e!=null&&n(e,o)))break;e=e[o]}return a||++i!=r?a:(r=e==null?0:e.length,!!r&&KD(r)&&XD(o,r)&&(si(e)||Jy(e)))}function BAe(e,t){return e!=null&&LAe(e,t,MAe)}var FAe=1,HAe=2;function $Ae(e,t){return dw(e)&&x9(t)?P9(sT(e),t):function(n){var i=NAe(n,e);return i===void 0&&i===t?BAe(n,e):fw(t,i,FAe|HAe)}}function UAe(e){return function(t){return t?.[e]}}function GAe(e){return function(t){return B9(t,e)}}function zAe(e){return dw(e)?UAe(sT(e)):GAe(e)}function jAe(e){return typeof e=="function"?e:e==null?eT:typeof e=="object"?si(e)?$Ae(e[0],e[1]):EAe(e):zAe(e)}function VAe(e,t){return function(n,i){if(n==null)return n;if(!yh(n))return e(n,i);for(var r=n.length,a=t?r:-1,o=Object(n);(t?a--:++a<r)&&i(o[a],a,o)!==!1;);return n}}var YAe=VAe(h9);const F9=YAe;function WAe(e,t){var n=-1,i=yh(e)?Array(e.length):[];return F9(e,function(r,a,o){i[++n]=t(r,a,o)}),i}function Ps(e,t){var n=si(e)?m9:WAe;return n(e,jAe(t))}const qAe=fo(Object.freeze(Object.defineProperty({__proto__:null,default:Ps},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(Lp,"__esModule",{value:!0}),Lp.flattenNames=void 0;var XAe=Cbe,KAe=lT(XAe),ZAe=nw,QAe=lT(ZAe),JAe=R_e,eCe=lT(JAe),tCe=qAe,nCe=lT(tCe);function lT(e){return e&&e.__esModule?e:{default:e}}var rCe=Lp.flattenNames=function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[];return(0,nCe.default)(t,function(i){Array.isArray(i)?e(i).map(function(r){return n.push(r)}):(0,eCe.default)(i)?(0,QAe.default)(i,function(r,a){r===!0&&n.push(a),n.push(a+"-"+r)}):(0,KAe.default)(i)&&n.push(i)}),n};Lp.default=rCe;var Vp={};function H9(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}var iCe=function(){try{var e=tu(Object,"defineProperty");return e({},"",{}),e}catch{}}();const uT=iCe;function mw(e,t,n){t=="__proto__"&&uT?uT(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var aCe=Object.prototype,oCe=aCe.hasOwnProperty;function $9(e,t,n){var i=e[t];(!(oCe.call(e,t)&&Up(i,n))||n===void 0&&!(t in e))&&mw(e,t,n)}function Yp(e,t,n,i){var r=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],u=i?i(n[s],e[s],s,n,e):void 0;u===void 0&&(u=e[s]),r?mw(n,s,u):$9(n,s,u)}return n}function sCe(e,t){return e&&Yp(t,$p(t),e)}function lCe(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var uCe=Object.prototype,cCe=uCe.hasOwnProperty;function hCe(e){if(!Ri(e))return lCe(e);var t=ew(e),n=[];for(var i in e)i=="constructor"&&(t||!cCe.call(e,i))||n.push(i);return n}function Wp(e){return yh(e)?u9(e,!0):hCe(e)}function fCe(e,t){return e&&Yp(t,Wp(t),e)}var U9=typeof Ve=="object"&&Ve&&!Ve.nodeType&&Ve,G9=U9&&typeof module=="object"&&module&&!module.nodeType&&module,dCe=G9&&G9.exports===U9,z9=dCe?_a.Buffer:void 0,j9=z9?z9.allocUnsafe:void 0;function V9(e,t){if(t)return e.slice();var n=e.length,i=j9?j9(n):new e.constructor(n);return e.copy(i),i}function Y9(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}function pCe(e,t){return Yp(e,ow(e),t)}var mCe=Object.getOwnPropertySymbols,gCe=mCe?function(e){for(var t=[];e;)T9(t,ow(e)),e=rw(e);return t}:b9;const W9=gCe;function vCe(e,t){return Yp(e,W9(e),t)}function yCe(e){return E9(e,Wp,W9)}var TCe=Object.prototype,ECe=TCe.hasOwnProperty;function bCe(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&ECe.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function gw(e){var t=new e.constructor(e.byteLength);return new iT(t).set(new iT(e)),t}function _Ce(e,t){var n=t?gw(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var SCe=/\w*$/;function ACe(e){var t=new e.constructor(e.source,SCe.exec(e));return t.lastIndex=e.lastIndex,t}var q9=uo?uo.prototype:void 0,X9=q9?q9.valueOf:void 0;function CCe(e){return X9?Object(X9.call(e)):{}}function K9(e,t){var n=t?gw(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var DCe="[object Boolean]",wCe="[object Date]",ICe="[object Map]",kCe="[object Number]",OCe="[object RegExp]",xCe="[object Set]",PCe="[object String]",RCe="[object Symbol]",NCe="[object ArrayBuffer]",MCe="[object DataView]",LCe="[object Float32Array]",BCe="[object Float64Array]",FCe="[object Int8Array]",HCe="[object Int16Array]",$Ce="[object Int32Array]",UCe="[object Uint8Array]",GCe="[object Uint8ClampedArray]",zCe="[object Uint16Array]",jCe="[object Uint32Array]";function VCe(e,t,n){var i=e.constructor;switch(t){case NCe:return gw(e);case DCe:case wCe:return new i(+e);case MCe:return _Ce(e,n);case LCe:case BCe:case FCe:case HCe:case $Ce:case UCe:case GCe:case zCe:case jCe:return K9(e,n);case ICe:return new i;case kCe:case PCe:return new i(e);case OCe:return ACe(e);case xCe:return new i;case RCe:return CCe(e)}}var Z9=Object.create,YCe=function(){function e(){}return function(t){if(!Ri(t))return{};if(Z9)return Z9(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const WCe=YCe;function Q9(e){return typeof e.constructor=="function"&&!ew(e)?WCe(rw(e)):{}}var qCe="[object Map]";function XCe(e){return Sa(e)&&jp(e)==qCe}var J9=vh&&vh.isMap,KCe=J9?ZD(J9):XCe;const ZCe=KCe;var QCe="[object Set]";function JCe(e){return Sa(e)&&jp(e)==QCe}var e$=vh&&vh.isSet,eDe=e$?ZD(e$):JCe;const tDe=eDe;var nDe=1,rDe=2,iDe=4,t$="[object Arguments]",aDe="[object Array]",oDe="[object Boolean]",sDe="[object Date]",lDe="[object Error]",n$="[object Function]",uDe="[object GeneratorFunction]",cDe="[object Map]",hDe="[object Number]",r$="[object Object]",fDe="[object RegExp]",dDe="[object Set]",pDe="[object String]",mDe="[object Symbol]",gDe="[object WeakMap]",vDe="[object ArrayBuffer]",yDe="[object DataView]",TDe="[object Float32Array]",EDe="[object Float64Array]",bDe="[object Int8Array]",_De="[object Int16Array]",SDe="[object Int32Array]",ADe="[object Uint8Array]",CDe="[object Uint8ClampedArray]",DDe="[object Uint16Array]",wDe="[object Uint32Array]",Tn={};Tn[t$]=Tn[aDe]=Tn[vDe]=Tn[yDe]=Tn[oDe]=Tn[sDe]=Tn[TDe]=Tn[EDe]=Tn[bDe]=Tn[_De]=Tn[SDe]=Tn[cDe]=Tn[hDe]=Tn[r$]=Tn[fDe]=Tn[dDe]=Tn[pDe]=Tn[mDe]=Tn[ADe]=Tn[CDe]=Tn[DDe]=Tn[wDe]=!0,Tn[lDe]=Tn[n$]=Tn[gDe]=!1;function cT(e,t,n,i,r,a){var o,s=t&nDe,u=t&rDe,c=t&iDe;if(n&&(o=r?n(e,i,r,a):n(e)),o!==void 0)return o;if(!Ri(e))return e;var l=si(e);if(l){if(o=bCe(e),!s)return Y9(e,o)}else{var f=jp(e),h=f==n$||f==uDe;if(Fp(e))return V9(e,s);if(f==r$||f==t$||h&&!r){if(o=u||h?{}:Q9(e),!s)return u?vCe(e,fCe(o,e)):pCe(e,sCe(o,e))}else{if(!Tn[f])return r?e:{};o=VCe(e,f,s)}}a||(a=new Aa);var d=a.get(e);if(d)return d;a.set(e,o),tDe(e)?e.forEach(function(g){o.add(cT(g,t,n,g,e,a))}):ZCe(e)&&e.forEach(function(g,v){o.set(v,cT(g,t,n,v,e,a))});var p=c?u?yCe:sw:u?Wp:$p,m=l?void 0:p(e);return H9(m||e,function(g,v){m&&(v=g,g=e[v]),$9(o,v,cT(g,t,n,v,e,a))}),o}var IDe=1,kDe=4;function ODe(e){return cT(e,IDe|kDe)}const xDe=fo(Object.freeze(Object.defineProperty({__proto__:null,default:ODe},Symbol.toStringTag,{value:"Module"})));Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.mergeClasses=void 0;var PDe=nw,RDe=i$(PDe),NDe=xDe,MDe=i$(NDe),LDe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function i$(e){return e&&e.__esModule?e:{default:e}}var BDe=Vp.mergeClasses=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=t.default&&(0,MDe.default)(t.default)||{};return n.map(function(r){var a=t[r];return a&&(0,RDe.default)(a,function(o,s){i[s]||(i[s]={}),i[s]=LDe({},i[s],a[s])}),r}),i};Vp.default=BDe;var qp={};Object.defineProperty(qp,"__esModule",{value:!0}),qp.autoprefix=void 0;var FDe=nw,a$=$De(FDe),HDe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};function $De(e){return e&&e.__esModule?e:{default:e}}var UDe={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var n=t&&t.split(" ");return{position:"absolute",top:n&&n[0],right:n&&n[1],bottom:n&&n[2],left:n&&n[3]}},extend:function(t,n){var i=n[t];return i||{extend:t}}},GDe=qp.autoprefix=function(t){var n={};return(0,a$.default)(t,function(i,r){var a={};(0,a$.default)(i,function(o,s){var u=UDe[s];u?a=HDe({},a,u(o)):a[s]=o}),n[r]=a}),n};qp.default=GDe;var Xp={};Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.hover=void 0;var zDe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jDe=A.default,vw=VDe(jDe);function VDe(e){return e&&e.__esModule?e:{default:e}}function YDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o$(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function WDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var qDe=Xp.hover=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){WDe(r,i);function r(){var a,o,s,u;YDe(this,r);for(var c=arguments.length,l=Array(c),f=0;f<c;f++)l[f]=arguments[f];return u=(o=(s=o$(this,(a=r.__proto__||Object.getPrototypeOf(r)).call.apply(a,[this].concat(l))),s),s.state={hover:!1},s.handleMouseOver=function(){return s.setState({hover:!0})},s.handleMouseOut=function(){return s.setState({hover:!1})},s.render=function(){return vw.default.createElement(n,{onMouseOver:s.handleMouseOver,onMouseOut:s.handleMouseOut},vw.default.createElement(t,zDe({},s.props,s.state)))},o),o$(s,u)}return r}(vw.default.Component)};Xp.default=qDe;var Kp={};Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.active=void 0;var XDe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},KDe=A.default,yw=ZDe(KDe);function ZDe(e){return e&&e.__esModule?e:{default:e}}function QDe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s$(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function JDe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ewe=Kp.active=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){JDe(r,i);function r(){var a,o,s,u;QDe(this,r);for(var c=arguments.length,l=Array(c),f=0;f<c;f++)l[f]=arguments[f];return u=(o=(s=s$(this,(a=r.__proto__||Object.getPrototypeOf(r)).call.apply(a,[this].concat(l))),s),s.state={active:!1},s.handleMouseDown=function(){return s.setState({active:!0})},s.handleMouseUp=function(){return s.setState({active:!1})},s.render=function(){return yw.default.createElement(n,{onMouseDown:s.handleMouseDown,onMouseUp:s.handleMouseUp},yw.default.createElement(t,XDe({},s.props,s.state)))},o),s$(s,u)}return r}(yw.default.Component)};Kp.default=ewe;var Tw={};Object.defineProperty(Tw,"__esModule",{value:!0});var twe=function(t,n){var i={},r=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;i[o]=s};return t===0&&r("first-child"),t===n-1&&r("last-child"),(t===0||t%2===0)&&r("even"),Math.abs(t%2)===1&&r("odd"),r("nth-child",t),i};Tw.default=twe,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.ReactCSS=Ji.loop=Ji.handleActive=Ew=Ji.handleHover=Ji.hover=void 0;var nwe=Lp,rwe=Th(nwe),iwe=Vp,awe=Th(iwe),owe=qp,swe=Th(owe),lwe=Xp,l$=Th(lwe),uwe=Kp,cwe=Th(uwe),hwe=Tw,fwe=Th(hwe);function Th(e){return e&&e.__esModule?e:{default:e}}Ji.hover=l$.default;var Ew=Ji.handleHover=l$.default;Ji.handleActive=cwe.default,Ji.loop=fwe.default;var dwe=Ji.ReactCSS=function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a=(0,rwe.default)(i),o=(0,awe.default)(t,a);return(0,swe.default)(o)},vt=Ji.default=dwe,pwe=function(t,n,i,r,a){var o=a.clientWidth,s=a.clientHeight,u=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,c=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,l=u-(a.getBoundingClientRect().left+window.pageXOffset),f=c-(a.getBoundingClientRect().top+window.pageYOffset);if(i==="vertical"){var h=void 0;if(f<0?h=0:f>s?h=1:h=Math.round(f*100/s)/100,n.a!==h)return{h:n.h,s:n.s,l:n.l,a:h,source:"rgb"}}else{var d=void 0;if(l<0?d=0:l>o?d=1:d=Math.round(l*100/o)/100,r!==d)return{h:n.h,s:n.s,l:n.l,a:d,source:"rgb"}}return null},bw={},mwe=function(t,n,i,r){if(typeof document>"u"&&!r)return null;var a=r?new r:document.createElement("canvas");a.width=i*2,a.height=i*2;var o=a.getContext("2d");return o?(o.fillStyle=t,o.fillRect(0,0,a.width,a.height),o.fillStyle=n,o.fillRect(0,0,i,i),o.translate(i,i),o.fillRect(0,0,i,i),a.toDataURL()):null},gwe=function(t,n,i,r){var a=t+"-"+n+"-"+i+(r?"-server":"");if(bw[a])return bw[a];var o=mwe(t,n,i,r);return bw[a]=o,o},u$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Eh=function(t){var n=t.white,i=t.grey,r=t.size,a=t.renderers,o=t.borderRadius,s=t.boxShadow,u=t.children,c=vt({default:{grid:{borderRadius:o,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+gwe(n,i,r,a.canvas)+") center left"}}});return Ze.isValidElement(u)?A.default.cloneElement(u,u$({},u.props,{style:u$({},u.props.style,c.grid)})):A.default.createElement("div",{style:c.grid})};Eh.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var vwe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ywe=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function Twe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c$(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ewe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _w=function(e){Ewe(t,e);function t(){var n,i,r,a;Twe(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=(i=(r=c$(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(s))),r),r.handleChange=function(c){var l=pwe(c,r.props.hsl,r.props.direction,r.props.a,r.container);l&&typeof r.props.onChange=="function"&&r.props.onChange(l,c)},r.handleMouseDown=function(c){r.handleChange(c),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},i),c$(r,a)}return ywe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var i=this,r=this.props.rgb,a=vt({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+r.r+","+r.g+","+r.b+`, 0) 0%,
           rgba(`+r.r+","+r.g+","+r.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:r.a*100+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+r.r+","+r.g+","+r.b+`, 0) 0%,
           rgba(`+r.r+","+r.g+","+r.b+", 1) 100%)"},pointer:{left:0,top:r.a*100+"%"}},overwrite:vwe({},this.props.style)},{vertical:this.props.direction==="vertical",overwrite:!0});return A.default.createElement("div",{style:a.alpha},A.default.createElement("div",{style:a.checkboard},A.default.createElement(Eh,{renderers:this.props.renderers})),A.default.createElement("div",{style:a.gradient}),A.default.createElement("div",{style:a.container,ref:function(s){return i.container=s},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},A.default.createElement("div",{style:a.pointer},this.props.pointer?A.default.createElement(this.props.pointer,this.props):A.default.createElement("div",{style:a.slider}))))}}]),t}(Ze.PureComponent||Ze.Component),bwe=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function _we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Swe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Awe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Cwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Dwe=1,h$=38,wwe=40,Iwe=[h$,wwe],kwe=function(t){return Iwe.indexOf(t)>-1},Owe=function(t){return Number(String(t).replace(/%/g,""))},xwe=1,Yt=function(e){Cwe(t,e);function t(n){Swe(this,t);var i=Awe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.handleBlur=function(){i.state.blurValue&&i.setState({value:i.state.blurValue,blurValue:null})},i.handleChange=function(r){i.setUpdatedValue(r.target.value,r)},i.handleKeyDown=function(r){var a=Owe(r.target.value);if(!isNaN(a)&&kwe(r.keyCode)){var o=i.getArrowOffset(),s=r.keyCode===h$?a+o:a-o;i.setUpdatedValue(s,r)}},i.handleDrag=function(r){if(i.props.dragLabel){var a=Math.round(i.props.value+r.movementX);a>=0&&a<=i.props.dragMax&&i.props.onChange&&i.props.onChange(i.getValueObjectWithLabel(a),r)}},i.handleMouseDown=function(r){i.props.dragLabel&&(r.preventDefault(),i.handleDrag(r),window.addEventListener("mousemove",i.handleDrag),window.addEventListener("mouseup",i.handleMouseUp))},i.handleMouseUp=function(){i.unbindEventListeners()},i.unbindEventListeners=function(){window.removeEventListener("mousemove",i.handleDrag),window.removeEventListener("mouseup",i.handleMouseUp)},i.state={value:String(n.value).toUpperCase(),blurValue:String(n.value).toUpperCase()},i.inputId="rc-editable-input-"+xwe++,i}return bwe(t,[{key:"componentDidUpdate",value:function(i,r){this.props.value!==this.state.value&&(i.value!==this.props.value||r.value!==this.state.value)&&(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(i){return _we({},this.props.label,i)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||Dwe}},{key:"setUpdatedValue",value:function(i,r){var a=this.props.label?this.getValueObjectWithLabel(i):i;this.props.onChange&&this.props.onChange(a,r),this.setState({value:i})}},{key:"render",value:function(){var i=this,r=vt({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return A.default.createElement("div",{style:r.wrap},A.default.createElement("input",{id:this.inputId,style:r.input,ref:function(o){return i.input=o},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?A.default.createElement("label",{htmlFor:this.inputId,style:r.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(Ze.PureComponent||Ze.Component),Pwe=function(t,n,i,r){var a=r.clientWidth,o=r.clientHeight,s=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,u=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,c=s-(r.getBoundingClientRect().left+window.pageXOffset),l=u-(r.getBoundingClientRect().top+window.pageYOffset);if(n==="vertical"){var f=void 0;if(l<0)f=359;else if(l>o)f=0;else{var h=-(l*100/o)+100;f=360*h/100}if(i.h!==f)return{h:f,s:i.s,l:i.l,a:i.a,source:"hsl"}}else{var d=void 0;if(c<0)d=0;else if(c>a)d=359;else{var p=c*100/a;d=360*p/100}if(i.h!==d)return{h:d,s:i.s,l:i.l,a:i.a,source:"hsl"}}return null},Rwe=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function Nwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f$(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Mwe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var bh=function(e){Mwe(t,e);function t(){var n,i,r,a;Nwe(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=(i=(r=f$(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(s))),r),r.handleChange=function(c){var l=Pwe(c,r.props.direction,r.props.hsl,r.container);l&&typeof r.props.onChange=="function"&&r.props.onChange(l,c)},r.handleMouseDown=function(c){r.handleChange(c),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},i),f$(r,a)}return Rwe(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var i=this,r=this.props.direction,a=r===void 0?"horizontal":r,o=vt({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:this.props.hsl.h*100/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-(this.props.hsl.h*100/360)+100+"%"}}},{vertical:a==="vertical"});return A.default.createElement("div",{style:o.hue},A.default.createElement("div",{className:"hue-"+a,style:o.container,ref:function(u){return i.container=u},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},A.default.createElement("style",null,`
            .hue-horizontal {
              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0
                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to right, #f00 0%, #ff0
                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }

            .hue-vertical {
              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,
                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,
                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);
            }
          `),A.default.createElement("div",{style:o.pointer},this.props.pointer?A.default.createElement(this.props.pointer,this.props):A.default.createElement("div",{style:o.slider}))))}}]),t}(Ze.PureComponent||Ze.Component);function Sw(e,t,n){(n!==void 0&&!Up(e[t],n)||n===void 0&&!(t in e))&&mw(e,t,n)}function Lwe(e){return Sa(e)&&yh(e)}function Aw(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Bwe(e){return Yp(e,Wp(e))}function Fwe(e,t,n,i,r,a,o){var s=Aw(e,n),u=Aw(t,n),c=o.get(u);if(c){Sw(e,n,c);return}var l=a?a(s,u,n+"",e,t,o):void 0,f=l===void 0;if(f){var h=si(u),d=!h&&Fp(u),p=!h&&!d&&JD(u);l=u,h||d||p?si(s)?l=s:Lwe(s)?l=Y9(s):d?(f=!1,l=V9(u,!0)):p?(f=!1,l=K9(u,!0)):l=[]:p9(u)||Jy(u)?(l=s,Jy(s)?l=Bwe(s):(!Ri(s)||tw(s))&&(l=Q9(u))):f=!1}f&&(o.set(u,l),r(l,u,i,a,o),o.delete(u)),Sw(e,n,l)}function d$(e,t,n,i,r){e!==t&&t9(t,function(a,o){if(r||(r=new Aa),Ri(a))Fwe(e,t,o,n,d$,i,r);else{var s=i?i(Aw(e,o),a,o+"",e,t,r):void 0;s===void 0&&(s=a),Sw(e,o,s)}},Wp)}function Hwe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var p$=Math.max;function $we(e,t,n){return t=p$(t===void 0?e.length-1:t,0),function(){for(var i=arguments,r=-1,a=p$(i.length-t,0),o=Array(a);++r<a;)o[r]=i[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=i[r];return s[t]=n(o),Hwe(e,this,s)}}function Uwe(e){return function(){return e}}var Gwe=uT?function(e,t){return uT(e,"toString",{configurable:!0,enumerable:!1,value:Uwe(t),writable:!0})}:eT;const zwe=Gwe;var jwe=800,Vwe=16,Ywe=Date.now;function Wwe(e){var t=0,n=0;return function(){var i=Ywe(),r=Vwe-(i-n);if(n=i,r>0){if(++t>=jwe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var qwe=Wwe(zwe);const Xwe=qwe;function Kwe(e,t){return Xwe($we(e,t,eT),e+"")}function Zwe(e,t,n){if(!Ri(n))return!1;var i=typeof t;return(i=="number"?yh(n)&&XD(t,n.length):i=="string"&&t in n)?Up(n[t],e):!1}function Qwe(e){return Kwe(function(t,n){var i=-1,r=n.length,a=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(r--,a):void 0,o&&Zwe(n[0],n[1],o)&&(a=r<3?void 0:a,r=1),t=Object(t);++i<r;){var s=n[i];s&&e(t,s,i,a)}return t})}var Jwe=Qwe(function(e,t,n){d$(e,t,n)});const Ti=Jwe;var Zp=function(t){var n=t.zDepth,i=t.radius,r=t.background,a=t.children,o=t.styles,s=o===void 0?{}:o,u=vt(Ti({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+n+"px "+n*4+"px rgba(0,0,0,.24)",borderRadius:i,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":n===1});return A.default.createElement("div",{style:u.wrap},A.default.createElement("div",{style:u.bg}),A.default.createElement("div",{style:u.content},a))};Zp.propTypes={background:N.exports.string,zDepth:N.exports.oneOf([0,1,2,3,4,5]),radius:N.exports.number,styles:N.exports.object},Zp.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var eIe=function(){return _a.Date.now()};const Cw=eIe;var tIe=/\s/;function nIe(e){for(var t=e.length;t--&&tIe.test(e.charAt(t)););return t}var rIe=/^\s+/;function iIe(e){return e&&e.slice(0,nIe(e)+1).replace(rIe,"")}var m$=0/0,aIe=/^[-+]0x[0-9a-f]+$/i,oIe=/^0b[01]+$/i,sIe=/^0o[0-7]+$/i,lIe=parseInt;function g$(e){if(typeof e=="number")return e;if(oT(e))return m$;if(Ri(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ri(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=iIe(e);var n=oIe.test(e);return n||sIe.test(e)?lIe(e.slice(2),n?2:8):aIe.test(e)?m$:+e}var uIe="Expected a function",cIe=Math.max,hIe=Math.min;function v$(e,t,n){var i,r,a,o,s,u,c=0,l=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(uIe);t=g$(t)||0,Ri(n)&&(l=!!n.leading,f="maxWait"in n,a=f?cIe(g$(n.maxWait)||0,t):a,h="trailing"in n?!!n.trailing:h);function d(S){var w=i,D=r;return i=r=void 0,c=S,o=e.apply(D,w),o}function p(S){return c=S,s=setTimeout(v,t),l?d(S):o}function m(S){var w=S-u,D=S-c,R=t-w;return f?hIe(R,a-D):R}function g(S){var w=S-u,D=S-c;return u===void 0||w>=t||w<0||f&&D>=a}function v(){var S=Cw();if(g(S))return E(S);s=setTimeout(v,m(S))}function E(S){return s=void 0,h&&i?d(S):(i=r=void 0,o)}function y(){s!==void 0&&clearTimeout(s),c=0,i=u=r=s=void 0}function T(){return s===void 0?o:E(Cw())}function b(){var S=Cw(),w=g(S);if(i=arguments,r=this,u=S,w){if(s===void 0)return p(u);if(f)return clearTimeout(s),s=setTimeout(v,t),d(u)}return s===void 0&&(s=setTimeout(v,t)),o}return b.cancel=y,b.flush=T,b}var fIe="Expected a function";function dIe(e,t,n){var i=!0,r=!0;if(typeof e!="function")throw new TypeError(fIe);return Ri(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),v$(e,t,{leading:i,maxWait:t,trailing:r})}var pIe=function(t,n,i){var r=i.getBoundingClientRect(),a=r.width,o=r.height,s=typeof t.pageX=="number"?t.pageX:t.touches[0].pageX,u=typeof t.pageY=="number"?t.pageY:t.touches[0].pageY,c=s-(i.getBoundingClientRect().left+window.pageXOffset),l=u-(i.getBoundingClientRect().top+window.pageYOffset);c<0?c=0:c>a&&(c=a),l<0?l=0:l>o&&(l=o);var f=c/a,h=1-l/o;return{h:n.h,s:f,v:h,a:n.a,source:"hsv"}},mIe=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function gIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vIe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function yIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var hT=function(e){yIe(t,e);function t(n){gIe(this,t);var i=vIe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.handleChange=function(r){typeof i.props.onChange=="function"&&i.throttle(i.props.onChange,pIe(r,i.props.hsl,i.container),r)},i.handleMouseDown=function(r){i.handleChange(r);var a=i.getContainerRenderWindow();a.addEventListener("mousemove",i.handleChange),a.addEventListener("mouseup",i.handleMouseUp)},i.handleMouseUp=function(){i.unbindEventListeners()},i.throttle=dIe(function(r,a,o){r(a,o)},50),i}return mIe(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var i=this.container,r=window;!r.document.contains(i)&&r.parent!==r;)r=r.parent;return r}},{key:"unbindEventListeners",value:function(){var i=this.getContainerRenderWindow();i.removeEventListener("mousemove",this.handleChange),i.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var i=this,r=this.props.style||{},a=r.color,o=r.white,s=r.black,u=r.pointer,c=r.circle,l=vt({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-(this.props.hsv.v*100)+100+"%",left:this.props.hsv.s*100+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:`0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),
            0 0 1px 2px rgba(0,0,0,.4)`,borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:a,white:o,black:s,pointer:u,circle:c}},{custom:!!this.props.style});return A.default.createElement("div",{style:l.color,ref:function(h){return i.container=h},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},A.default.createElement("style",null,`
          .saturation-white {
            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));
            background: linear-gradient(to right, #fff, rgba(255,255,255,0));
          }
          .saturation-black {
            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));
            background: linear-gradient(to top, #000, rgba(0,0,0,0));
          }
        `),A.default.createElement("div",{style:l.white,className:"saturation-white"},A.default.createElement("div",{style:l.black,className:"saturation-black"}),A.default.createElement("div",{style:l.pointer},this.props.pointer?A.default.createElement(this.props.pointer,this.props):A.default.createElement("div",{style:l.circle}))))}}]),t}(Ze.PureComponent||Ze.Component);function TIe(e,t){var n=si(e)?H9:F9;return n(e,f9(t))}const EIe=/^\s+/,bIe=/\s+$/;function it(e,t){if(e=e||"",t=t||{},e instanceof it)return e;if(!(this instanceof it))return new it(e,t);var n=_Ie(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}it.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,i,r,a,o;return t=e.r/255,n=e.g/255,i=e.b/255,t<=.03928?r=t/12.92:r=Math.pow((t+.055)/1.055,2.4),n<=.03928?a=n/12.92:a=Math.pow((n+.055)/1.055,2.4),i<=.03928?o=i/12.92:o=Math.pow((i+.055)/1.055,2.4),.2126*r+.7152*a+.0722*o},setAlpha:function(e){return this._a=S$(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=T$(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=T$(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=y$(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=y$(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),i=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return E$(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return DIe(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(kn(this._r,255)*100)+"%",g:Math.round(kn(this._g,255)*100)+"%",b:Math.round(kn(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(kn(this._r,255)*100)+"%, "+Math.round(kn(this._g,255)*100)+"%, "+Math.round(kn(this._b,255)*100)+"%)":"rgba("+Math.round(kn(this._r,255)*100)+"%, "+Math.round(kn(this._g,255)*100)+"%, "+Math.round(kn(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:FIe[E$(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+b$(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var r=it(e);n="#"+b$(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,r=!t&&i&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return r?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return it(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(OIe,arguments)},brighten:function(){return this._applyModification(xIe,arguments)},darken:function(){return this._applyModification(PIe,arguments)},desaturate:function(){return this._applyModification(wIe,arguments)},saturate:function(){return this._applyModification(IIe,arguments)},greyscale:function(){return this._applyModification(kIe,arguments)},spin:function(){return this._applyModification(RIe,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(LIe,arguments)},complement:function(){return this._applyCombination(NIe,arguments)},monochromatic:function(){return this._applyCombination(BIe,arguments)},splitcomplement:function(){return this._applyCombination(MIe,arguments)},triad:function(){return this._applyCombination(_$,[3])},tetrad:function(){return this._applyCombination(_$,[4])}},it.fromRatio=function(e,t){if(typeof e=="object"){var n={};for(var i in e)e.hasOwnProperty(i)&&(i==="a"?n[i]=e[i]:n[i]=Qp(e[i]));e=n}return it(e,t)};function _Ie(e){var t={r:0,g:0,b:0},n=1,i=null,r=null,a=null,o=!1,s=!1;return typeof e=="string"&&(e=GIe(e)),typeof e=="object"&&(Vo(e.r)&&Vo(e.g)&&Vo(e.b)?(t=SIe(e.r,e.g,e.b),o=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):Vo(e.h)&&Vo(e.s)&&Vo(e.v)?(i=Qp(e.s),r=Qp(e.v),t=CIe(e.h,i,r),o=!0,s="hsv"):Vo(e.h)&&Vo(e.s)&&Vo(e.l)&&(i=Qp(e.s),a=Qp(e.l),t=AIe(e.h,i,a),o=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=S$(n),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function SIe(e,t,n){return{r:kn(e,255)*255,g:kn(t,255)*255,b:kn(n,255)*255}}function y$(e,t,n){e=kn(e,255),t=kn(t,255),n=kn(n,255);var i=Math.max(e,t,n),r=Math.min(e,t,n),a,o,s=(i+r)/2;if(i==r)a=o=0;else{var u=i-r;switch(o=s>.5?u/(2-i-r):u/(i+r),i){case e:a=(t-n)/u+(t<n?6:0);break;case t:a=(n-e)/u+2;break;case n:a=(e-t)/u+4;break}a/=6}return{h:a,s:o,l:s}}function AIe(e,t,n){var i,r,a;e=kn(e,360),t=kn(t,100),n=kn(n,100);function o(c,l,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?c+(l-c)*6*f:f<1/2?l:f<2/3?c+(l-c)*(2/3-f)*6:c}if(t===0)i=r=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,u=2*n-s;i=o(u,s,e+1/3),r=o(u,s,e),a=o(u,s,e-1/3)}return{r:i*255,g:r*255,b:a*255}}function T$(e,t,n){e=kn(e,255),t=kn(t,255),n=kn(n,255);var i=Math.max(e,t,n),r=Math.min(e,t,n),a,o,s=i,u=i-r;if(o=i===0?0:u/i,i==r)a=0;else{switch(i){case e:a=(t-n)/u+(t<n?6:0);break;case t:a=(n-e)/u+2;break;case n:a=(e-t)/u+4;break}a/=6}return{h:a,s:o,v:s}}function CIe(e,t,n){e=kn(e,360)*6,t=kn(t,100),n=kn(n,100);var i=Math.floor(e),r=e-i,a=n*(1-t),o=n*(1-r*t),s=n*(1-(1-r)*t),u=i%6,c=[n,o,a,a,s,n][u],l=[s,n,n,o,a,a][u],f=[a,a,s,n,n,o][u];return{r:c*255,g:l*255,b:f*255}}function E$(e,t,n,i){var r=[Ca(Math.round(e).toString(16)),Ca(Math.round(t).toString(16)),Ca(Math.round(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function DIe(e,t,n,i,r){var a=[Ca(Math.round(e).toString(16)),Ca(Math.round(t).toString(16)),Ca(Math.round(n).toString(16)),Ca(A$(i))];return r&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function b$(e,t,n,i){var r=[Ca(A$(i)),Ca(Math.round(e).toString(16)),Ca(Math.round(t).toString(16)),Ca(Math.round(n).toString(16))];return r.join("")}it.equals=function(e,t){return!e||!t?!1:it(e).toRgbString()==it(t).toRgbString()},it.random=function(){return it.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function wIe(e,t){t=t===0?0:t||10;var n=it(e).toHsl();return n.s-=t/100,n.s=fT(n.s),it(n)}function IIe(e,t){t=t===0?0:t||10;var n=it(e).toHsl();return n.s+=t/100,n.s=fT(n.s),it(n)}function kIe(e){return it(e).desaturate(100)}function OIe(e,t){t=t===0?0:t||10;var n=it(e).toHsl();return n.l+=t/100,n.l=fT(n.l),it(n)}function xIe(e,t){t=t===0?0:t||10;var n=it(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(t/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(t/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(t/100)))),it(n)}function PIe(e,t){t=t===0?0:t||10;var n=it(e).toHsl();return n.l-=t/100,n.l=fT(n.l),it(n)}function RIe(e,t){var n=it(e).toHsl(),i=(n.h+t)%360;return n.h=i<0?360+i:i,it(n)}function NIe(e){var t=it(e).toHsl();return t.h=(t.h+180)%360,it(t)}function _$(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=it(e).toHsl(),i=[it(e)],r=360/t,a=1;a<t;a++)i.push(it({h:(n.h+a*r)%360,s:n.s,l:n.l}));return i}function MIe(e){var t=it(e).toHsl(),n=t.h;return[it(e),it({h:(n+72)%360,s:t.s,l:t.l}),it({h:(n+216)%360,s:t.s,l:t.l})]}function LIe(e,t,n){t=t||6,n=n||30;var i=it(e).toHsl(),r=360/n,a=[it(e)];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,a.push(it(i));return a}function BIe(e,t){t=t||6;for(var n=it(e).toHsv(),i=n.h,r=n.s,a=n.v,o=[],s=1/t;t--;)o.push(it({h:i,s:r,v:a})),a=(a+s)%1;return o}it.mix=function(e,t,n){n=n===0?0:n||50;var i=it(e).toRgb(),r=it(t).toRgb(),a=n/100,o={r:(r.r-i.r)*a+i.r,g:(r.g-i.g)*a+i.g,b:(r.b-i.b)*a+i.b,a:(r.a-i.a)*a+i.a};return it(o)},it.readability=function(e,t){var n=it(e),i=it(t);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)},it.isReadable=function(e,t,n){var i=it.readability(e,t),r,a;switch(a=!1,r=zIe(n),r.level+r.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7;break}return a},it.mostReadable=function(e,t,n){var i=null,r=0,a,o,s,u;n=n||{},o=n.includeFallbackColors,s=n.level,u=n.size;for(var c=0;c<t.length;c++)a=it.readability(e,t[c]),a>r&&(r=a,i=it(t[c]));return it.isReadable(e,i,{level:s,size:u})||!o?i:(n.includeFallbackColors=!1,it.mostReadable(e,["#fff","#000"],n))};var Dw=it.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},FIe=it.hexNames=HIe(Dw);function HIe(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function S$(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function kn(e,t){$Ie(e)&&(e="100%");var n=UIe(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function fT(e){return Math.min(1,Math.max(0,e))}function Ni(e){return parseInt(e,16)}function $Ie(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function UIe(e){return typeof e=="string"&&e.indexOf("%")!=-1}function Ca(e){return e.length==1?"0"+e:""+e}function Qp(e){return e<=1&&(e=e*100+"%"),e}function A$(e){return Math.round(parseFloat(e)*255).toString(16)}function C$(e){return Ni(e)/255}var Da=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{CSS_UNIT:new RegExp(n),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Vo(e){return!!Da.CSS_UNIT.exec(e)}function GIe(e){e=e.replace(EIe,"").replace(bIe,"").toLowerCase();var t=!1;if(Dw[e])e=Dw[e],t=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=Da.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=Da.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Da.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=Da.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Da.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=Da.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Da.hex8.exec(e))?{r:Ni(n[1]),g:Ni(n[2]),b:Ni(n[3]),a:C$(n[4]),format:t?"name":"hex8"}:(n=Da.hex6.exec(e))?{r:Ni(n[1]),g:Ni(n[2]),b:Ni(n[3]),format:t?"name":"hex"}:(n=Da.hex4.exec(e))?{r:Ni(n[1]+""+n[1]),g:Ni(n[2]+""+n[2]),b:Ni(n[3]+""+n[3]),a:C$(n[4]+""+n[4]),format:t?"name":"hex8"}:(n=Da.hex3.exec(e))?{r:Ni(n[1]+""+n[1]),g:Ni(n[2]+""+n[2]),b:Ni(n[3]+""+n[3]),format:t?"name":"hex"}:!1}function zIe(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),n!=="small"&&n!=="large"&&(n="small"),{level:t,size:n}}var D$=function(t){var n=["r","g","b","a","h","s","l","v"],i=0,r=0;return TIe(n,function(a){if(t[a]&&(i+=1,isNaN(t[a])||(r+=1),a==="s"||a==="l")){var o=/^\d+%$/;o.test(t[a])&&(r+=1)}}),i===r?t:!1},Jp=function(t,n){var i=t.hex?it(t.hex):it(t),r=i.toHsl(),a=i.toHsv(),o=i.toRgb(),s=i.toHex();r.s===0&&(r.h=n||0,a.h=n||0);var u=s==="000000"&&o.a===0;return{hsl:r,hex:u?"transparent":"#"+s,rgb:o,hsv:a,oldHue:t.h||n||r.h,source:t.source}},Rs=function(t){if(t==="transparent")return!0;var n=String(t).charAt(0)==="#"?1:0;return t.length!==4+n&&t.length<7+n&&it(t).isValid()},ww=function(t){if(!t)return"#fff";var n=Jp(t);if(n.hex==="transparent")return"rgba(0,0,0,0.4)";var i=(n.rgb.r*299+n.rgb.g*587+n.rgb.b*114)/1e3;return i>=128?"#000":"#fff"},Iw=function(t,n){var i=t.replace("\xB0","");return it(n+" ("+i+")")._ok},em=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},jIe=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function VIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YIe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function WIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ei=function(t){var n=function(i){WIe(r,i);function r(a){VIe(this,r);var o=YIe(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return o.handleChange=function(s,u){var c=D$(s);if(c){var l=Jp(s,s.h||o.state.oldHue);o.setState(l),o.props.onChangeComplete&&o.debounce(o.props.onChangeComplete,l,u),o.props.onChange&&o.props.onChange(l,u)}},o.handleSwatchHover=function(s,u){var c=D$(s);if(c){var l=Jp(s,s.h||o.state.oldHue);o.props.onSwatchHover&&o.props.onSwatchHover(l,u)}},o.state=em({},Jp(a.color,0)),o.debounce=v$(function(s,u,c){s(u,c)},100),o}return jIe(r,[{key:"render",value:function(){var o={};return this.props.onSwatchHover&&(o.onSwatchHover=this.handleSwatchHover),A.default.createElement(t,em({},this.props,this.state,{onChange:this.handleChange},o))}}],[{key:"getDerivedStateFromProps",value:function(o,s){return em({},Jp(o.color,s.oldHue))}}]),r}(Ze.PureComponent||Ze.Component);return n.propTypes=em({},t.propTypes),n.defaultProps=em({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),n},qIe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},XIe=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function KIe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w$(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function ZIe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var QIe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"span";return function(i){ZIe(r,i);function r(){var a,o,s,u;KIe(this,r);for(var c=arguments.length,l=Array(c),f=0;f<c;f++)l[f]=arguments[f];return u=(o=(s=w$(this,(a=r.__proto__||Object.getPrototypeOf(r)).call.apply(a,[this].concat(l))),s),s.state={focus:!1},s.handleFocus=function(){return s.setState({focus:!0})},s.handleBlur=function(){return s.setState({focus:!1})},o),w$(s,u)}return XIe(r,[{key:"render",value:function(){return A.default.createElement(n,{onFocus:this.handleFocus,onBlur:this.handleBlur},A.default.createElement(t,qIe({},this.props,this.state)))}}]),r}(A.default.Component)},I$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},JIe=13,eke=function(t){var n=t.color,i=t.style,r=t.onClick,a=r===void 0?function(){}:r,o=t.onHover,s=t.title,u=s===void 0?n:s,c=t.children,l=t.focus,f=t.focusStyle,h=f===void 0?{}:f,d=n==="transparent",p=vt({default:{swatch:I$({background:n,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},i,l?h:{})}}),m=function(T){return a(n,T)},g=function(T){return T.keyCode===JIe&&a(n,T)},v=function(T){return o(n,T)},E={};return o&&(E.onMouseOver=v),A.default.createElement("div",I$({style:p.swatch,onClick:m,title:u,tabIndex:0,onKeyDown:g},E),c,d&&A.default.createElement(Eh,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))};const iu=QIe(eke);var tke=function(t){var n=t.direction,i=vt({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return A.default.createElement("div",{style:i.picker})},nke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k$=function(t){var n=t.rgb,i=t.hsl,r=t.width,a=t.height,o=t.onChange,s=t.direction,u=t.style,c=t.renderers,l=t.pointer,f=t.className,h=f===void 0?"":f,d=vt({default:{picker:{position:"relative",width:r,height:a},alpha:{radius:"2px",style:u}}});return A.default.createElement("div",{style:d.picker,className:"alpha-picker "+h},A.default.createElement(_w,nke({},d.alpha,{rgb:n,hsl:i,pointer:l,renderers:c,onChange:o,direction:s})))};k$.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:tke},Ei(k$);var rke=function(t){var n=t.colors,i=t.onClick,r=t.onSwatchHover,a=vt({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return A.default.createElement("div",{style:a.swatches},Ps(n,function(o){return A.default.createElement(iu,{key:o,color:o,style:a.swatch,onClick:i,onHover:r,focusStyle:{boxShadow:"0 0 4px "+o}})}),A.default.createElement("div",{style:a.clear}))},kw=function(t){var n=t.onChange,i=t.onSwatchHover,r=t.hex,a=t.colors,o=t.width,s=t.triangle,u=t.styles,c=u===void 0?{}:u,l=t.className,f=l===void 0?"":l,h=r==="transparent",d=function(g,v){Rs(g)&&n({hex:g,source:"hex"},v)},p=vt(Ti({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:ww(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},c),{"hide-triangle":s==="hide"});return A.default.createElement("div",{style:p.card,className:"block-picker "+f},A.default.createElement("div",{style:p.triangle}),A.default.createElement("div",{style:p.head},h&&A.default.createElement(Eh,{borderRadius:"6px 6px 0 0"}),A.default.createElement("div",{style:p.label},r)),A.default.createElement("div",{style:p.body},A.default.createElement(rke,{colors:a,onClick:d,onSwatchHover:i}),A.default.createElement(Yt,{style:{input:p.input},value:r,onChange:d})))};kw.propTypes={width:N.exports.oneOfType([N.exports.string,N.exports.number]),colors:N.exports.arrayOf(N.exports.string),triangle:N.exports.oneOf(["top","hide"]),styles:N.exports.object},kw.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},Ei(kw);var _h={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},Sh={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Ah={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},Ch={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Dh={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},wh={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},Ih={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},kh={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},Oh={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},tm={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},xh={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},Ph={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},Rh={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},Nh={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},Mh={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},Lh={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},Bh={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},Fh={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},O$=function(t){var n=t.color,i=t.onClick,r=t.onSwatchHover,a=t.hover,o=t.active,s=t.circleSize,u=t.circleSpacing,c=vt({default:{swatch:{width:s,height:s,marginRight:u,marginBottom:u,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+n,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+n}}},{hover:a,active:o});return A.default.createElement("div",{style:c.swatch},A.default.createElement(iu,{style:c.Swatch,color:n,onClick:i,onHover:r,focusStyle:{boxShadow:c.Swatch.boxShadow+", 0 0 5px "+n}}))};O$.defaultProps={circleSize:28,circleSpacing:14};const ike=Ew(O$);var Ow=function(t){var n=t.width,i=t.onChange,r=t.onSwatchHover,a=t.colors,o=t.hex,s=t.circleSize,u=t.styles,c=u===void 0?{}:u,l=t.circleSpacing,f=t.className,h=f===void 0?"":f,d=vt(Ti({default:{card:{width:n,display:"flex",flexWrap:"wrap",marginRight:-l,marginBottom:-l}}},c)),p=function(g,v){return i({hex:g,source:"hex"},v)};return A.default.createElement("div",{style:d.card,className:"circle-picker "+h},Ps(a,function(m){return A.default.createElement(ike,{key:m,color:m,onClick:p,onSwatchHover:r,active:o===m.toLowerCase(),circleSize:s,circleSpacing:l})}))};Ow.propTypes={width:N.exports.oneOfType([N.exports.string,N.exports.number]),circleSize:N.exports.number,circleSpacing:N.exports.number,styles:N.exports.object},Ow.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[_h[500],Sh[500],Ah[500],Ch[500],Dh[500],wh[500],Ih[500],kh[500],Oh[500],tm[500],xh[500],Ph[500],Rh[500],Nh[500],Mh[500],Lh[500],Bh[500],Fh[500]],styles:{}},Ei(Ow);function x$(e){return e===void 0}var P$={};Object.defineProperty(P$,"__esModule",{value:!0});var R$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ake=A.default,N$=oke(ake);function oke(e){return e&&e.__esModule?e:{default:e}}function ske(e,t){var n={};for(var i in e)t.indexOf(i)>=0||!Object.prototype.hasOwnProperty.call(e,i)||(n[i]=e[i]);return n}var dT=24,lke=P$.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,i=e.width,r=i===void 0?dT:i,a=e.height,o=a===void 0?dT:a,s=e.style,u=s===void 0?{}:s,c=ske(e,["fill","width","height","style"]);return N$.default.createElement("svg",R$({viewBox:"0 0 "+dT+" "+dT,style:R$({fill:n,width:r,height:o},u)},c),N$.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))},uke=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function cke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function fke(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var M$=function(e){fke(t,e);function t(n){cke(this,t);var i=hke(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.toggleViews=function(){i.state.view==="hex"?i.setState({view:"rgb"}):i.state.view==="rgb"?i.setState({view:"hsl"}):i.state.view==="hsl"&&(i.props.hsl.a===1?i.setState({view:"hex"}):i.setState({view:"rgb"}))},i.handleChange=function(r,a){r.hex?Rs(r.hex)&&i.props.onChange({hex:r.hex,source:"hex"},a):r.r||r.g||r.b?i.props.onChange({r:r.r||i.props.rgb.r,g:r.g||i.props.rgb.g,b:r.b||i.props.rgb.b,source:"rgb"},a):r.a?(r.a<0?r.a=0:r.a>1&&(r.a=1),i.props.onChange({h:i.props.hsl.h,s:i.props.hsl.s,l:i.props.hsl.l,a:Math.round(r.a*100)/100,source:"rgb"},a)):(r.h||r.s||r.l)&&(typeof r.s=="string"&&r.s.includes("%")&&(r.s=r.s.replace("%","")),typeof r.l=="string"&&r.l.includes("%")&&(r.l=r.l.replace("%","")),r.s==1?r.s=.01:r.l==1&&(r.l=.01),i.props.onChange({h:r.h||i.props.hsl.h,s:Number(x$(r.s)?i.props.hsl.s:r.s),l:Number(x$(r.l)?i.props.hsl.l:r.l),source:"hsl"},a))},i.showHighlight=function(r){r.currentTarget.style.background="#eee"},i.hideHighlight=function(r){r.currentTarget.style.background="transparent"},n.hsl.a!==1&&n.view==="hex"?i.state={view:"rgb"}:i.state={view:n.view},i}return uke(t,[{key:"render",value:function(){var i=this,r=vt({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),a=void 0;return this.state.view==="hex"?a=A.default.createElement("div",{style:r.fields,className:"flexbox-fix"},A.default.createElement("div",{style:r.field},A.default.createElement(Yt,{style:{input:r.input,label:r.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):this.state.view==="rgb"?a=A.default.createElement("div",{style:r.fields,className:"flexbox-fix"},A.default.createElement("div",{style:r.field},A.default.createElement(Yt,{style:{input:r.input,label:r.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),A.default.createElement("div",{style:r.field},A.default.createElement(Yt,{style:{input:r.input,label:r.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),A.default.createElement("div",{style:r.field},A.default.createElement(Yt,{style:{input:r.input,label:r.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),A.default.createElement("div",{style:r.alpha},A.default.createElement(Yt,{style:{input:r.input,label:r.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):this.state.view==="hsl"&&(a=A.default.createElement("div",{style:r.fields,className:"flexbox-fix"},A.default.createElement("div",{style:r.field},A.default.createElement(Yt,{style:{input:r.input,label:r.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),A.default.createElement("div",{style:r.field},A.default.createElement(Yt,{style:{input:r.input,label:r.label},label:"s",value:Math.round(this.props.hsl.s*100)+"%",onChange:this.handleChange})),A.default.createElement("div",{style:r.field},A.default.createElement(Yt,{style:{input:r.input,label:r.label},label:"l",value:Math.round(this.props.hsl.l*100)+"%",onChange:this.handleChange})),A.default.createElement("div",{style:r.alpha},A.default.createElement(Yt,{style:{input:r.input,label:r.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),A.default.createElement("div",{style:r.wrap,className:"flexbox-fix"},a,A.default.createElement("div",{style:r.toggle},A.default.createElement("div",{style:r.icon,onClick:this.toggleViews,ref:function(s){return i.icon=s}},A.default.createElement(lke,{style:r.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(i,r){return i.hsl.a!==1&&r.view==="hex"?{view:"rgb"}:null}}]),t}(A.default.Component);M$.defaultProps={view:"hex"};var L$=function(){var t=vt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return A.default.createElement("div",{style:t.picker})},dke=function(){var t=vt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return A.default.createElement("div",{style:t.picker})},xw=function(t){var n=t.width,i=t.onChange,r=t.disableAlpha,a=t.rgb,o=t.hsl,s=t.hsv,u=t.hex,c=t.renderers,l=t.styles,f=l===void 0?{}:l,h=t.className,d=h===void 0?"":h,p=t.defaultView,m=vt(Ti({default:{picker:{width:n,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+a.r+", "+a.g+", "+a.b+", "+a.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},f),{disableAlpha:r});return A.default.createElement("div",{style:m.picker,className:"chrome-picker "+d},A.default.createElement("div",{style:m.saturation},A.default.createElement(hT,{style:m.Saturation,hsl:o,hsv:s,pointer:dke,onChange:i})),A.default.createElement("div",{style:m.body},A.default.createElement("div",{style:m.controls,className:"flexbox-fix"},A.default.createElement("div",{style:m.color},A.default.createElement("div",{style:m.swatch},A.default.createElement("div",{style:m.active}),A.default.createElement(Eh,{renderers:c}))),A.default.createElement("div",{style:m.toggles},A.default.createElement("div",{style:m.hue},A.default.createElement(bh,{style:m.Hue,hsl:o,pointer:L$,onChange:i})),A.default.createElement("div",{style:m.alpha},A.default.createElement(_w,{style:m.Alpha,rgb:a,hsl:o,pointer:L$,renderers:c,onChange:i})))),A.default.createElement(M$,{rgb:a,hsl:o,hex:u,view:p,onChange:i,disableAlpha:r})))};xw.propTypes={width:N.exports.oneOfType([N.exports.string,N.exports.number]),disableAlpha:N.exports.bool,styles:N.exports.object,defaultView:N.exports.oneOf(["hex","rgb","hsl"])},xw.defaultProps={width:225,disableAlpha:!1,styles:{}},Ei(xw);var pke=function(t){var n=t.color,i=t.onClick,r=i===void 0?function(){}:i,a=t.onSwatchHover,o=t.active,s=vt({default:{color:{background:n,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:ww(n),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return A.default.createElement(iu,{style:s.color,color:n,onClick:r,onHover:a,focusStyle:{boxShadow:"0 0 4px "+n}},A.default.createElement("div",{style:s.dot}))},mke=function(t){var n=t.hex,i=t.rgb,r=t.onChange,a=vt({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:n},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(u,c){u.r||u.g||u.b?r({r:u.r||i.r,g:u.g||i.g,b:u.b||i.b,source:"rgb"},c):r({hex:u.hex,source:"hex"},c)};return A.default.createElement("div",{style:a.fields,className:"flexbox-fix"},A.default.createElement("div",{style:a.active}),A.default.createElement(Yt,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"hex",value:n,onChange:o}),A.default.createElement(Yt,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:i.r,onChange:o}),A.default.createElement(Yt,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:i.g,onChange:o}),A.default.createElement(Yt,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:i.b,onChange:o}))},Pw=function(t){var n=t.onChange,i=t.onSwatchHover,r=t.colors,a=t.hex,o=t.rgb,s=t.styles,u=s===void 0?{}:s,c=t.className,l=c===void 0?"":c,f=vt(Ti({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},u)),h=function(p,m){p.hex?Rs(p.hex)&&n({hex:p.hex,source:"hex"},m):n(p,m)};return A.default.createElement(Zp,{style:f.Compact,styles:u},A.default.createElement("div",{style:f.compact,className:"compact-picker "+l},A.default.createElement("div",null,Ps(r,function(d){return A.default.createElement(pke,{key:d,color:d,active:d.toLowerCase()===a,onClick:h,onSwatchHover:i})}),A.default.createElement("div",{style:f.clear})),A.default.createElement(mke,{hex:a,rgb:o,onChange:h})))};Pw.propTypes={colors:N.exports.arrayOf(N.exports.string),styles:N.exports.object},Pw.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},Ei(Pw);var gke=function(t){var n=t.hover,i=t.color,r=t.onClick,a=t.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=vt({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:n});return A.default.createElement("div",{style:s.swatch},A.default.createElement(iu,{color:i,onClick:r,onHover:a,focusStyle:o}))};const vke=Ew(gke);var Rw=function(t){var n=t.width,i=t.colors,r=t.onChange,a=t.onSwatchHover,o=t.triangle,s=t.styles,u=s===void 0?{}:s,c=t.className,l=c===void 0?"":c,f=vt(Ti({default:{card:{width:n,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},u),{"hide-triangle":o==="hide","top-left-triangle":o==="top-left","top-right-triangle":o==="top-right","bottom-left-triangle":o==="bottom-left","bottom-right-triangle":o==="bottom-right"}),h=function(p,m){return r({hex:p,source:"hex"},m)};return A.default.createElement("div",{style:f.card,className:"github-picker "+l},A.default.createElement("div",{style:f.triangleShadow}),A.default.createElement("div",{style:f.triangle}),Ps(i,function(d){return A.default.createElement(vke,{color:d,key:d,onClick:h,onSwatchHover:a})}))};Rw.propTypes={width:N.exports.oneOfType([N.exports.string,N.exports.number]),colors:N.exports.arrayOf(N.exports.string),triangle:N.exports.oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:N.exports.object},Rw.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},Ei(Rw);var yke=function(t){var n=t.direction,i=vt({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:n==="vertical"});return A.default.createElement("div",{style:i.picker})},Tke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Nw=function(t){var n=t.width,i=t.height,r=t.onChange,a=t.hsl,o=t.direction,s=t.pointer,u=t.styles,c=u===void 0?{}:u,l=t.className,f=l===void 0?"":l,h=vt(Ti({default:{picker:{position:"relative",width:n,height:i},hue:{radius:"2px"}}},c)),d=function(m){return r({a:1,h:m.h,l:.5,s:1})};return A.default.createElement("div",{style:h.picker,className:"hue-picker "+f},A.default.createElement(bh,Tke({},h.hue,{hsl:a,pointer:s,onChange:d,direction:o})))};Nw.propTypes={styles:N.exports.object},Nw.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:yke,styles:{}},Ei(Nw);var Eke=function(t){var n=t.onChange,i=t.hex,r=t.rgb,a=t.styles,o=a===void 0?{}:a,s=t.className,u=s===void 0?"":s,c=vt(Ti({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+i,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),l=function(h,d){h.hex?Rs(h.hex)&&n({hex:h.hex,source:"hex"},d):(h.r||h.g||h.b)&&n({r:h.r||r.r,g:h.g||r.g,b:h.b||r.b,source:"rgb"},d)};return A.default.createElement(Zp,{styles:o},A.default.createElement("div",{style:c.material,className:"material-picker "+u},A.default.createElement(Yt,{style:{wrap:c.HEXwrap,input:c.HEXinput,label:c.HEXlabel},label:"hex",value:i,onChange:l}),A.default.createElement("div",{style:c.split,className:"flexbox-fix"},A.default.createElement("div",{style:c.third},A.default.createElement(Yt,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"r",value:r.r,onChange:l})),A.default.createElement("div",{style:c.third},A.default.createElement(Yt,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"g",value:r.g,onChange:l})),A.default.createElement("div",{style:c.third},A.default.createElement(Yt,{style:{wrap:c.RGBwrap,input:c.RGBinput,label:c.RGBlabel},label:"b",value:r.b,onChange:l})))))};Ei(Eke);var bke=function(t){var n=t.onChange,i=t.rgb,r=t.hsv,a=t.hex,o=vt({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(c,l){c["#"]?Rs(c["#"])&&n({hex:c["#"],source:"hex"},l):c.r||c.g||c.b?n({r:c.r||i.r,g:c.g||i.g,b:c.b||i.b,source:"rgb"},l):(c.h||c.s||c.v)&&n({h:c.h||r.h,s:c.s||r.s,v:c.v||r.v,source:"hsv"},l)};return A.default.createElement("div",{style:o.fields},A.default.createElement(Yt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(r.h),onChange:s}),A.default.createElement(Yt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(r.s*100),onChange:s}),A.default.createElement(Yt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(r.v*100),onChange:s}),A.default.createElement("div",{style:o.divider}),A.default.createElement(Yt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:i.r,onChange:s}),A.default.createElement(Yt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:i.g,onChange:s}),A.default.createElement(Yt,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:i.b,onChange:s}),A.default.createElement("div",{style:o.divider}),A.default.createElement(Yt,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:a.replace("#",""),onChange:s}),A.default.createElement("div",{style:o.fieldSymbols},A.default.createElement("div",{style:o.symbol},"\xB0"),A.default.createElement("div",{style:o.symbol},"%"),A.default.createElement("div",{style:o.symbol},"%")))},_ke=function(t){var n=t.hsl,i=vt({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":n.l>.5});return A.default.createElement("div",{style:i.picker})},Ske=function(){var t=vt({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return A.default.createElement("div",{style:t.pointer},A.default.createElement("div",{style:t.left},A.default.createElement("div",{style:t.leftInside})),A.default.createElement("div",{style:t.right},A.default.createElement("div",{style:t.rightInside})))},B$=function(t){var n=t.onClick,i=t.label,r=t.children,a=t.active,o=vt({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:a});return A.default.createElement("div",{style:o.button,onClick:n},i||r)},Ake=function(t){var n=t.rgb,i=t.currentColor,r=vt({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+n.r+","+n.g+", "+n.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:i,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return A.default.createElement("div",null,A.default.createElement("div",{style:r.label},"new"),A.default.createElement("div",{style:r.swatches},A.default.createElement("div",{style:r.new}),A.default.createElement("div",{style:r.current})),A.default.createElement("div",{style:r.label},"current"))},Cke=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function Dke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wke(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Ike(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Mw=function(e){Ike(t,e);function t(n){Dke(this,t);var i=wke(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.state={currentColor:n.hex},i}return Cke(t,[{key:"render",value:function(){var i=this.props,r=i.styles,a=r===void 0?{}:r,o=i.className,s=o===void 0?"":o,u=vt(Ti({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},a));return A.default.createElement("div",{style:u.picker,className:"photoshop-picker "+s},A.default.createElement("div",{style:u.head},this.props.header),A.default.createElement("div",{style:u.body,className:"flexbox-fix"},A.default.createElement("div",{style:u.saturation},A.default.createElement(hT,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:_ke,onChange:this.props.onChange})),A.default.createElement("div",{style:u.hue},A.default.createElement(bh,{direction:"vertical",hsl:this.props.hsl,pointer:Ske,onChange:this.props.onChange})),A.default.createElement("div",{style:u.controls},A.default.createElement("div",{style:u.top,className:"flexbox-fix"},A.default.createElement("div",{style:u.previews},A.default.createElement(Ake,{rgb:this.props.rgb,currentColor:this.state.currentColor})),A.default.createElement("div",{style:u.actions},A.default.createElement(B$,{label:"OK",onClick:this.props.onAccept,active:!0}),A.default.createElement(B$,{label:"Cancel",onClick:this.props.onCancel}),A.default.createElement(bke,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(A.default.Component);Mw.propTypes={header:N.exports.string,styles:N.exports.object},Mw.defaultProps={header:"Color Picker",styles:{}},Ei(Mw);var kke=function(t){var n=t.onChange,i=t.rgb,r=t.hsl,a=t.hex,o=t.disableAlpha,s=vt({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),u=function(l,f){l.hex?Rs(l.hex)&&n({hex:l.hex,source:"hex"},f):l.r||l.g||l.b?n({r:l.r||i.r,g:l.g||i.g,b:l.b||i.b,a:i.a,source:"rgb"},f):l.a&&(l.a<0?l.a=0:l.a>100&&(l.a=100),l.a/=100,n({h:r.h,s:r.s,l:r.l,a:l.a,source:"rgb"},f))};return A.default.createElement("div",{style:s.fields,className:"flexbox-fix"},A.default.createElement("div",{style:s.double},A.default.createElement(Yt,{style:{input:s.input,label:s.label},label:"hex",value:a.replace("#",""),onChange:u})),A.default.createElement("div",{style:s.single},A.default.createElement(Yt,{style:{input:s.input,label:s.label},label:"r",value:i.r,onChange:u,dragLabel:"true",dragMax:"255"})),A.default.createElement("div",{style:s.single},A.default.createElement(Yt,{style:{input:s.input,label:s.label},label:"g",value:i.g,onChange:u,dragLabel:"true",dragMax:"255"})),A.default.createElement("div",{style:s.single},A.default.createElement(Yt,{style:{input:s.input,label:s.label},label:"b",value:i.b,onChange:u,dragLabel:"true",dragMax:"255"})),A.default.createElement("div",{style:s.alpha},A.default.createElement(Yt,{style:{input:s.input,label:s.label},label:"a",value:Math.round(i.a*100),onChange:u,dragLabel:"true",dragMax:"100"})))},Oke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},F$=function(t){var n=t.colors,i=t.onClick,r=i===void 0?function(){}:i,a=t.onSwatchHover,o=vt({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!n||!n.length}),s=function(c,l){r({hex:c,source:"hex"},l)};return A.default.createElement("div",{style:o.colors,className:"flexbox-fix"},n.map(function(u){var c=typeof u=="string"?{color:u}:u,l=""+c.color+(c.title||"");return A.default.createElement("div",{key:l,style:o.swatchWrap},A.default.createElement(iu,Oke({},c,{style:o.swatch,onClick:s,onHover:a,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+c.color}})))}))};F$.propTypes={colors:N.exports.arrayOf(N.exports.oneOfType([N.exports.string,N.exports.shape({color:N.exports.string,title:N.exports.string})])).isRequired};var xke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lw=function(t){var n=t.width,i=t.rgb,r=t.hex,a=t.hsv,o=t.hsl,s=t.onChange,u=t.onSwatchHover,c=t.disableAlpha,l=t.presetColors,f=t.renderers,h=t.styles,d=h===void 0?{}:h,p=t.className,m=p===void 0?"":p,g=vt(Ti({default:xke({picker:{width:n,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+i.r+","+i.g+","+i.b+","+i.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},d),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},d),{disableAlpha:c});return A.default.createElement("div",{style:g.picker,className:"sketch-picker "+m},A.default.createElement("div",{style:g.saturation},A.default.createElement(hT,{style:g.Saturation,hsl:o,hsv:a,onChange:s})),A.default.createElement("div",{style:g.controls,className:"flexbox-fix"},A.default.createElement("div",{style:g.sliders},A.default.createElement("div",{style:g.hue},A.default.createElement(bh,{style:g.Hue,hsl:o,onChange:s})),A.default.createElement("div",{style:g.alpha},A.default.createElement(_w,{style:g.Alpha,rgb:i,hsl:o,renderers:f,onChange:s}))),A.default.createElement("div",{style:g.color},A.default.createElement(Eh,null),A.default.createElement("div",{style:g.activeColor}))),A.default.createElement(kke,{rgb:i,hsl:o,hex:r,onChange:s,disableAlpha:c}),A.default.createElement(F$,{colors:l,onClick:s,onSwatchHover:u}))};Lw.propTypes={disableAlpha:N.exports.bool,width:N.exports.oneOfType([N.exports.string,N.exports.number]),styles:N.exports.object},Lw.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const Pke=Ei(Lw);var nm=function(t){var n=t.hsl,i=t.offset,r=t.onClick,a=r===void 0?function(){}:r,o=t.active,s=t.first,u=t.last,c=vt({default:{swatch:{height:"12px",background:"hsl("+n.h+", 50%, "+i*100+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:s,last:u}),l=function(h){return a({h:n.h,s:.5,l:i,source:"hsl"},h)};return A.default.createElement("div",{style:c.swatch,onClick:l})},Rke=function(t){var n=t.onClick,i=t.hsl,r=vt({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),a=.1;return A.default.createElement("div",{style:r.swatches},A.default.createElement("div",{style:r.swatch},A.default.createElement(nm,{hsl:i,offset:".80",active:Math.abs(i.l-.8)<a&&Math.abs(i.s-.5)<a,onClick:n,first:!0})),A.default.createElement("div",{style:r.swatch},A.default.createElement(nm,{hsl:i,offset:".65",active:Math.abs(i.l-.65)<a&&Math.abs(i.s-.5)<a,onClick:n})),A.default.createElement("div",{style:r.swatch},A.default.createElement(nm,{hsl:i,offset:".50",active:Math.abs(i.l-.5)<a&&Math.abs(i.s-.5)<a,onClick:n})),A.default.createElement("div",{style:r.swatch},A.default.createElement(nm,{hsl:i,offset:".35",active:Math.abs(i.l-.35)<a&&Math.abs(i.s-.5)<a,onClick:n})),A.default.createElement("div",{style:r.swatch},A.default.createElement(nm,{hsl:i,offset:".20",active:Math.abs(i.l-.2)<a&&Math.abs(i.s-.5)<a,onClick:n,last:!0})),A.default.createElement("div",{style:r.clear}))},Nke=function(){var t=vt({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return A.default.createElement("div",{style:t.picker})},Bw=function(t){var n=t.hsl,i=t.onChange,r=t.pointer,a=t.styles,o=a===void 0?{}:a,s=t.className,u=s===void 0?"":s,c=vt(Ti({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return A.default.createElement("div",{style:c.wrap||{},className:"slider-picker "+u},A.default.createElement("div",{style:c.hue},A.default.createElement(bh,{style:c.Hue,hsl:n,pointer:r,onChange:i})),A.default.createElement("div",{style:c.swatches},A.default.createElement(Rke,{hsl:n,onClick:i})))};Bw.propTypes={styles:N.exports.object},Bw.defaultProps={pointer:Nke,styles:{}},Ei(Bw);var H$={};Object.defineProperty(H$,"__esModule",{value:!0});var U$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Mke=A.default,G$=Lke(Mke);function Lke(e){return e&&e.__esModule?e:{default:e}}function Bke(e,t){var n={};for(var i in e)t.indexOf(i)>=0||!Object.prototype.hasOwnProperty.call(e,i)||(n[i]=e[i]);return n}var pT=24,Fke=H$.default=function(e){var t=e.fill,n=t===void 0?"currentColor":t,i=e.width,r=i===void 0?pT:i,a=e.height,o=a===void 0?pT:a,s=e.style,u=s===void 0?{}:s,c=Bke(e,["fill","width","height","style"]);return G$.default.createElement("svg",U$({viewBox:"0 0 "+pT+" "+pT,style:U$({fill:n,width:r,height:o},u)},c),G$.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))},Hke=function(t){var n=t.color,i=t.onClick,r=i===void 0?function(){}:i,a=t.onSwatchHover,o=t.first,s=t.last,u=t.active,c=vt({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:n,marginBottom:"1px"},check:{color:ww(n),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:s,active:u,"color-#FFFFFF":n==="#FFFFFF",transparent:n==="transparent"});return A.default.createElement(iu,{color:n,style:c.color,onClick:r,onHover:a,focusStyle:{boxShadow:"0 0 4px "+n}},A.default.createElement("div",{style:c.check},A.default.createElement(Fke,null)))},$ke=function(t){var n=t.onClick,i=t.onSwatchHover,r=t.group,a=t.active,o=vt({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return A.default.createElement("div",{style:o.group},Ps(r,function(s,u){return A.default.createElement(Hke,{key:s,color:s,active:s.toLowerCase()===a,first:u===0,last:u===r.length-1,onClick:n,onSwatchHover:i})}))},Fw=function(t){var n=t.width,i=t.height,r=t.onChange,a=t.onSwatchHover,o=t.colors,s=t.hex,u=t.styles,c=u===void 0?{}:u,l=t.className,f=l===void 0?"":l,h=vt(Ti({default:{picker:{width:n,height:i},overflow:{height:i,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},c)),d=function(m,g){return r({hex:m,source:"hex"},g)};return A.default.createElement("div",{style:h.picker,className:"swatches-picker "+f},A.default.createElement(Zp,null,A.default.createElement("div",{style:h.overflow},A.default.createElement("div",{style:h.body},Ps(o,function(p){return A.default.createElement($ke,{key:p.toString(),group:p,active:s,onClick:d,onSwatchHover:a})}),A.default.createElement("div",{style:h.clear})))))};Fw.propTypes={width:N.exports.oneOfType([N.exports.string,N.exports.number]),height:N.exports.oneOfType([N.exports.string,N.exports.number]),colors:N.exports.arrayOf(N.exports.arrayOf(N.exports.string)),styles:N.exports.object},Fw.defaultProps={width:320,height:240,colors:[[_h[900],_h[700],_h[500],_h[300],_h[100]],[Sh[900],Sh[700],Sh[500],Sh[300],Sh[100]],[Ah[900],Ah[700],Ah[500],Ah[300],Ah[100]],[Ch[900],Ch[700],Ch[500],Ch[300],Ch[100]],[Dh[900],Dh[700],Dh[500],Dh[300],Dh[100]],[wh[900],wh[700],wh[500],wh[300],wh[100]],[Ih[900],Ih[700],Ih[500],Ih[300],Ih[100]],[kh[900],kh[700],kh[500],kh[300],kh[100]],[Oh[900],Oh[700],Oh[500],Oh[300],Oh[100]],["#194D33",tm[700],tm[500],tm[300],tm[100]],[xh[900],xh[700],xh[500],xh[300],xh[100]],[Ph[900],Ph[700],Ph[500],Ph[300],Ph[100]],[Rh[900],Rh[700],Rh[500],Rh[300],Rh[100]],[Nh[900],Nh[700],Nh[500],Nh[300],Nh[100]],[Mh[900],Mh[700],Mh[500],Mh[300],Mh[100]],[Lh[900],Lh[700],Lh[500],Lh[300],Lh[100]],[Bh[900],Bh[700],Bh[500],Bh[300],Bh[100]],[Fh[900],Fh[700],Fh[500],Fh[300],Fh[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},Ei(Fw);var Hw=function(t){var n=t.onChange,i=t.onSwatchHover,r=t.hex,a=t.colors,o=t.width,s=t.triangle,u=t.styles,c=u===void 0?{}:u,l=t.className,f=l===void 0?"":l,h=vt(Ti({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},c),{"hide-triangle":s==="hide","top-left-triangle":s==="top-left","top-right-triangle":s==="top-right"}),d=function(m,g){Rs(m)&&n({hex:m,source:"hex"},g)};return A.default.createElement("div",{style:h.card,className:"twitter-picker "+f},A.default.createElement("div",{style:h.triangleShadow}),A.default.createElement("div",{style:h.triangle}),A.default.createElement("div",{style:h.body},Ps(a,function(p,m){return A.default.createElement(iu,{key:m,color:p,hex:p,style:h.swatch,onClick:d,onHover:i,focusStyle:{boxShadow:"0 0 4px "+p}})}),A.default.createElement("div",{style:h.hash},"#"),A.default.createElement(Yt,{label:null,style:{input:h.input},value:r.replace("#",""),onChange:d}),A.default.createElement("div",{style:h.clear})))};Hw.propTypes={width:N.exports.oneOfType([N.exports.string,N.exports.number]),triangle:N.exports.oneOf(["hide","top-left","top-right"]),colors:N.exports.arrayOf(N.exports.string),styles:N.exports.object},Hw.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},Ei(Hw);var $w=function(t){var n=vt({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(t.hsl.s*100)+"%, "+Math.round(t.hsl.l*100)+"%)"}}});return A.default.createElement("div",{style:n.picker})};$w.propTypes={hsl:N.exports.shape({h:N.exports.number,s:N.exports.number,l:N.exports.number,a:N.exports.number})},$w.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Uw=function(t){var n=vt({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return A.default.createElement("div",{style:n.picker})};Uw.propTypes={hsl:N.exports.shape({h:N.exports.number,s:N.exports.number,l:N.exports.number,a:N.exports.number})},Uw.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var Uke=function(t){var n=t.onChange,i=t.rgb,r=t.hsl,a=t.hex,o=t.hsv,s=function(d,p){if(d.hex)Rs(d.hex)&&n({hex:d.hex,source:"hex"},p);else if(d.rgb){var m=d.rgb.split(",");Iw(d.rgb,"rgb")&&n({r:m[0],g:m[1],b:m[2],a:1,source:"rgb"},p)}else if(d.hsv){var g=d.hsv.split(",");Iw(d.hsv,"hsv")&&(g[2]=g[2].replace("%",""),g[1]=g[1].replace("%",""),g[0]=g[0].replace("\xB0",""),g[1]==1?g[1]=.01:g[2]==1&&(g[2]=.01),n({h:Number(g[0]),s:Number(g[1]),v:Number(g[2]),source:"hsv"},p))}else if(d.hsl){var v=d.hsl.split(",");Iw(d.hsl,"hsl")&&(v[2]=v[2].replace("%",""),v[1]=v[1].replace("%",""),v[0]=v[0].replace("\xB0",""),f[1]==1?f[1]=.01:f[2]==1&&(f[2]=.01),n({h:Number(v[0]),s:Number(v[1]),v:Number(v[2]),source:"hsl"},p))}},u=vt({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),c=i.r+", "+i.g+", "+i.b,l=Math.round(r.h)+"\xB0, "+Math.round(r.s*100)+"%, "+Math.round(r.l*100)+"%",f=Math.round(o.h)+"\xB0, "+Math.round(o.s*100)+"%, "+Math.round(o.v*100)+"%";return A.default.createElement("div",{style:u.wrap,className:"flexbox-fix"},A.default.createElement("div",{style:u.fields},A.default.createElement("div",{style:u.double},A.default.createElement(Yt,{style:{input:u.input,label:u.label},label:"hex",value:a,onChange:s})),A.default.createElement("div",{style:u.column},A.default.createElement("div",{style:u.single},A.default.createElement(Yt,{style:{input:u.input2,label:u.label2},label:"rgb",value:c,onChange:s})),A.default.createElement("div",{style:u.single},A.default.createElement(Yt,{style:{input:u.input2,label:u.label2},label:"hsv",value:f,onChange:s})),A.default.createElement("div",{style:u.single},A.default.createElement(Yt,{style:{input:u.input2,label:u.label2},label:"hsl",value:l,onChange:s})))))},Gw=function(t){var n=t.width,i=t.onChange,r=t.rgb,a=t.hsl,o=t.hsv,s=t.hex,u=t.header,c=t.styles,l=c===void 0?{}:c,f=t.className,h=f===void 0?"":f,d=vt(Ti({default:{picker:{width:n,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},l));return A.default.createElement("div",{style:d.picker,className:"google-picker "+h},A.default.createElement("div",{style:d.head},u),A.default.createElement("div",{style:d.swatch}),A.default.createElement("div",{style:d.saturation},A.default.createElement(hT,{hsl:a,hsv:o,pointer:$w,onChange:i})),A.default.createElement("div",{style:d.body},A.default.createElement("div",{style:d.controls,className:"flexbox-fix"},A.default.createElement("div",{style:d.hue},A.default.createElement(bh,{style:d.Hue,hsl:a,radius:"4px",pointer:Uw,onChange:i}))),A.default.createElement(Uke,{rgb:r,hsl:a,hex:s,hsv:o,onChange:i})))};Gw.propTypes={width:N.exports.oneOfType([N.exports.string,N.exports.number]),styles:N.exports.object,header:N.exports.string},Gw.defaultProps={width:652,styles:{},header:"Color picker"},Ei(Gw);let z$=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;_classCallCheck3(this,n),r=t.call(this,i);const a=vu(i.color);return r.state={displayColorPicker:!1,color:{r:a.r,g:a.g,b:a.b,a:a.opacity}},r}return _createClass3(n,[{key:"handleClick",value:function(){this.setState(r=>({displayColorPicker:!r.displayColorPicker}))}},{key:"handleClose",value:function(){this.setState({displayColorPicker:!1})}},{key:"handleChange",value:function(r){const a=r.rgb,o=`rgba(${a.r},${a.g},${a.b},${a.a})`;this.props.onChange(o),this.setState({color:r.rgb})}},{key:"render",value:function(){const r=vt({default:{color:{width:"32px",height:"14px",borderRadius:"2px",background:`rgba(${this.state.color.r}, ${this.state.color.g}, ${this.state.color.b}, ${this.state.color.a})`},swatch:{padding:"5px",background:"#fff",cursor:"pointer",borderRadius:"1px"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return A.default.createElement("div",null,A.default.createElement("div",{onClick:this.handleClick.bind(this),style:r.swatch},A.default.createElement("div",{style:r.color})),this.state.displayColorPicker?A.default.createElement("div",{style:r.popover},A.default.createElement("div",{onClick:this.handleClose.bind(this),style:r.cover}),A.default.createElement(Pke,{color:this.state.color,onChange:this.handleChange.bind(this)})):null)}}]),n}(A.default.Component);z$.propTypes={color:N.exports.string,onChange:N.exports.func};const dNe="";let zw=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.state={colors:i.track.options.colorRange.slice()},r}return _createClass3(n,[{key:"handleColorsChanged",value:function(r){this.setState({colors:r})}},{key:"handleSubmit",value:function(){const r=this.props.track.options;r.colorRange=this.state.colors,this.props.onSubmit(this.props.track.options)}},{key:"handleAddColor",value:function(){this.setState(r=>({colors:r.colors.concat(r.colors[r.colors.length-1])}))}},{key:"handleRemoveColor",value:function(r){this.setState(a=>({colors:a.colors.slice(0,r).concat(a.colors.slice(r+1))}))}},{key:"render",value:function(){const r=JSON.parse(JSON.stringify(this.props.track)),a=Object.assign(r,{options:{colorRange:this.state.colors}}),o={editable:!1,zoomFixed:!0,views:[{uid:`hmo-${this.props.track.uid}`,initialXDomain:this.props.xScale?this.props.xScale.domain():[0,1],initialYDomain:this.props.yScale?this.props.yScale.domain():[0,1],tracks:{center:[a]},layout:{x:0,y:0,h:12,w:12,i:`hmo-${this.props.track.id}`}}]},s=this.state.colors.map((c,l)=>{const f=this.state.colors.length>2&&l===this.state.colors.length-1?A.default.createElement("div",{onClick:()=>this.handleRemoveColor(l),style:{background:"white",position:"absolute",top:0,right:0,opacity:1,width:14,height:14,borderRadius:2,cursor:"pointer"}},A.default.createElement("svg",{height:"10px",style:{position:"absolute",top:2,right:2,opacity:.5,width:10,height:10}},A.default.createElement("use",{xlinkHref:"#cross"}))):null;return A.default.createElement("div",{key:`l${l}`,style:{borderRadius:"1px",boxShadow:"0 0 0 1px #E5E5E5",position:"relative",outline:"none"}},f,A.default.createElement(z$,{key:l,color:this.state.colors[l],onChange:h=>{this.setState(d=>{const p=d.colors.slice();return p[l]=h,{colors:p}},()=>{this.handleColorsChanged(this.state.colors)})}}))}).reverse(),u=this.state.colors.length<10?A.default.createElement("div",{onClick:this.handleAddColor.bind(this),style:{position:"relative",outline:"none",height:"25px",padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px #E5E5E5",cursor:"pointer"}},A.default.createElement("div",{style:{textAlign:"center",width:"32px",height:"14px"}},A.default.createElement("svg",{height:"100%",style:{opacity:.5,margin:"auto",display:"block"},width:"10px"},A.default.createElement("use",{xlinkHref:"#plus"})))):null;return A.default.createElement(Mp,{okayTitle:"Submit",onCancel:this.props.onCancel,onOkay:this.handleSubmit.bind(this),title:"Custom Color Map"},A.default.createElement("table",{className:"table-track-options"},A.default.createElement("thead",null),A.default.createElement("tbody",{style:{verticalAlign:"top"}},A.default.createElement("tr",null,A.default.createElement("td",{className:"td-track-options"},A.default.createElement("table",null,A.default.createElement("tbody",null,A.default.createElement("tr",null,A.default.createElement("td",{className:"td-track-options"},"Preview")),A.default.createElement("tr",null,A.default.createElement("td",{className:"td-track-options"},A.default.createElement("div",{style:{width:200}},A.default.createElement(MT,{options:{bounded:!1},viewConfig:o}))))))),A.default.createElement("td",{className:"td-track-options"},A.default.createElement("table",null,A.default.createElement("tbody",null,A.default.createElement("tr",null,A.default.createElement("td",{className:"td-track-options"},"Colors")),A.default.createElement("tr",null,A.default.createElement("td",{className:"td-track-options"},u,A.default.createElement("div",{style:{position:"relative"}},s))))))))))}}]),n}(A.default.Component);zw.propTypes={handleCancel:N.exports.func,onCancel:N.exports.func,onSubmit:N.exports.func,track:N.exports.object,xScale:N.exports.object,yScale:N.exports.object};const j$=e=>{if(!e.header)return[];const t=e.header.split("	"),n=[];for(let i=0;i<t.length;i++)n.push({name:t[i],value:i+1});return n},Hh=(e,t="",n=1)=>e.reduce((i,r)=>(i[r]={name:`${r*n}${t}`,value:r},i),{}),Mi={yes:{name:"Yes",value:!0},no:{name:"No",value:!1}},Nn={black:{name:"Black",value:"black"},blue:{name:"Blue",value:"blue"},brown:{name:"Brown",value:"brown"},cyan:{name:"Cyan",value:"cyan"},green:{name:"Green",value:"green"},grey:{name:"Grey",value:"grey"},orange:{name:"Orange",value:"orange"},purple:{name:"Purple",value:"purple"},turquoise:{name:"Turquoise",value:"turquoise"},red:{name:"Red",value:"red"},white:{name:"White",value:"white"}},Gke={use_stroke:{name:"Glyph color",value:"[glyph-color]"}},rm=Hh([1,2,3,5,8,13,21]),zke=Object.assign(rm,{none:{name:"none",value:"none"}}),mT=Hh([0,2,4,8,16,32,64,128,256]),Ns=Hh([0,.2,.4,.6,.8,1],"%",100),jke=Hh([.2,.4,.6,.8,1],"%",100),yr={axisLabelFormatting:{name:"Axis Label Formatting",inlineOptions:{normal:{name:"normal",value:"normal"},scientific:{name:"scientific",value:"scientific"}}},flipDiagonal:{name:"Flip Across Diagonal",inlineOptions:{none:{name:"No",value:"none"},yes:{name:"Yes",value:"yes"},copy:{name:"Copy",value:"copy"}}},heatmapValueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},valueScaling:{name:"Value Scaling",inlineOptions:{linear:{name:"Linear",value:"linear"},log:{name:"Log",value:"log"}}},extent:{name:"Extent",inlineOptions:{full:{name:"Full",value:"full"},upperRight:{name:"Upper Right",value:"upper-right"},lowerLeft:{name:"Lower Left",value:"lower-left"}}},labelLeftMargin:{name:"Label Left Margin",inlineOptions:mT},labelRightMargin:{name:"Label Right Margin",inlineOptions:mT},labelTopMargin:{name:"Label Top Margin",inlineOptions:mT},labelBottomMargin:{name:"Label Bottom Margin",inlineOptions:mT},labelShowResolution:{name:"Label Show Resolution",inlineOptions:Mi},labelShowAssembly:{name:"Label Show Assembly",inlineOptions:Mi},lineStrokeWidth:{name:"Stroke Width",inlineOptions:rm},strokeWidth:{name:"Stroke Width",inlineOptions:rm},trackBorderWidth:{name:"Track Border Width",inlineOptions:rm},separatePlusMinusStrands:{name:"Separate +/- strands",inlineOptions:Mi},sortLargestOnTop:{name:"Sort Largest On Top",inlineOptions:Mi},showTexts:{name:"Show texts",inlineOptions:Mi},staggered:{name:"Staggered",inlineOptions:Mi},minSquareSize:{name:"Minimum size",inlineOptions:zke},pointSize:{name:"Point Size",inlineOptions:rm},pointColor:{name:"Point Color",inlineOptions:Nn},trackBorderColor:{name:"Track Border Color",inlineOptions:Nn},backgroundColor:{name:"Background Color",inlineOptions:{white:{name:"White",value:"white"},lightGrey:{name:"Light Grey",value:"#eeeeee"},grey:{name:"Grey",value:"#cccccc"},black:{name:"Black",value:"black"},transparent:{name:"Transparent",value:"transparent"}}},colorScale:{name:"Color Scale",inlineOptions:{epilogos:{name:"Epilogos",values:["#FF0000","#FF4500","#32CD32","#008000","#006400","#C2E105","#FFFF00","#66CDAA","#8A91D0","#CD5C5C","#E9967A","#BDB76B","#808080","#C0C0C0","#FFFFFF"]},category10:{name:"D3 Category10",values:["#1F77B4","#FF7F0E","#2CA02C","#D62728","#9467BD","#8C564B","#E377C2","#7F7F7F","#BCBD22","#17BECF"]}}},minusStrandColor:{name:"- Strand Color",inlineOptions:Nn},plusStrandColor:{name:"+ Strand Color",inlineOptions:Nn},lineStrokeColor:{name:"Stroke color",inlineOptions:Nn},projectionStrokeColor:{name:"Stroke color",inlineOptions:Nn},projectionFillColor:{name:"Fill color",inlineOptions:Nn},stroke:{name:"Stroke Color",inlineOptions:Nn},strokeColor:{name:"Stroke color",inlineOptions:Nn},fill:{name:"Fill Color",inlineOptions:Nn},color:{name:"Color",inlineOptions:Nn},fontColor:{name:"Font color",inlineOptions:Nn},fillColor:{name:"Fill color",inlineOptions:Nn},barFillColor:{name:"Fill color",inlineOptions:Nn},barFillColorTop:{name:"Top Fill color",inlineOptions:Nn},barFillColorBottom:{name:"Bottom Fill color",inlineOptions:Nn},barOpacity:{name:"Bar opacity",inlineOptions:Ns},zeroLineVisible:{name:"Zero line visible",inlineOptions:Mi},zeroLineColor:{name:"Zero line color",inlineOptions:Nn},zeroLineOpacity:{name:"Zero line opacity",inlineOptions:jke},fillOpacity:{name:"Fill Opacity",inlineOptions:Ns},strokeOpacity:{name:"Stroke Opacity",inlineOptions:Ns},strokePos:{name:"Stroke Position",inlineOptions:{aroundInner:{name:"Around Inner",value:"around"},aroundCenter:{name:"Around Center",value:null},hidden:{name:"Hidden",value:"hidden"},top:{name:"Top",value:"top"},right:{name:"Right",value:"right"},bottom:{name:"Bottom",value:"bottom"},left:{name:"Left",value:"left"}}},barBorder:{name:"Bar border",inlineOptions:Mi},scaledHeight:{name:"Scaled height",inlineOptions:Mi},rectangleDomainStrokeColor:{name:"Stroke color",inlineOptions:Nn},rectangleDomainFillColor:{name:"Fill color",inlineOptions:Nn},rectangleDomainFillOpacity:{name:"Fill opacity",inlineOptions:Ns},rectangleDomainOpacity:{name:"Opacity",inlineOptions:Ns},mapboxStyle:{name:"Map style",inlineOptions:{streets:{name:"streets",value:"mapbox.streets"},light:{name:"light",value:"mapbox.light"},dark:{name:"dark",value:"mapbox.dark"},satellite:{name:"satellite",value:"mapbox.satellite"},"streets-satellite":{name:"streets-satellite",value:"mapbox.streets-satellite"},wheatpaste:{name:"wheatpaste",value:"mapbox.wheatpaste"},"streets-basic":{name:"streets-basic",value:"mapbox.streets-basic"},comic:{name:"comic",value:"mapbox.comic"},outdoors:{name:"outdoors",value:"mapbox.outdoors"},"run-bike-hike":{name:"run-bike-hike",value:"mapbox.run-bike-hike"},pencil:{name:"pencil",value:"mapbox.pencil"},pirates:{name:"pirates",value:"mapbox.pirates"},emerald:{name:"emerald",value:"mapbox.emerald"},"high-contrast":{name:"high-contrast",value:"mapbox.high-contrast"}}},oneDHeatmapFlipped:{name:"Flip Heatmap",inlineOptions:{yes:{name:"Yes",value:"yes"},no:{name:"No",value:null}}},showMousePosition:{name:"Show Mouse Position",inlineOptions:Mi},showTooltip:{name:"Show Tooltip",inlineOptions:Mi},fontSize:{name:"Font Size",inlineOptions:Hh([8,9,10,11,12,14,16,18,24],"px")},tickPositions:{name:"Tick Positions",inlineOptions:{even:{name:"Even",value:"even"},ends:{name:"Ends",value:"ends"}}},tickFormat:{name:"Tick Format",inlineOptions:{plain:{name:"Plain",value:"plain"},si:{name:"SI",value:"si"}}},colorEncoding:{name:"Color Encode Annotations",inlineOptions:{none:{name:"None",value:null},itemRgb:{name:"itemRgb",value:"itemRgb"}},generateOptions:j$},fontIsAligned:{name:"Left-Align Font",inlineOptions:Mi},axisPositionHorizontal:{name:"Axis Position",inlineOptions:{left:{name:"Left",value:"left"},outsideLeft:{name:"Outside left",value:"outsideLeft"},right:{name:"Right",value:"right"},outsideRight:{name:"Outside right",value:"outsideRight"},hidden:{name:"Hidden",value:null}}},axisPositionVertical:{name:"Axis Position",inlineOptions:{top:{name:"Top",value:"top"},outsideTop:{name:"Outside top",value:"outsideTop"},bottom:{name:"Bottom",value:"bottom"},outsideBottom:{name:"Outside bottom",value:"outsideBottom"},hidden:{name:"Hidden",value:null}}},axisMargin:{name:"Axis Margin",inlineOptions:Hh([0,10,20,30,40,50,100,200,400],"px")},colorbarPosition:{name:"Colorbar Position",inlineOptions:{topLeft:{name:"Top Left",value:"topLeft"},topRight:{name:"Top Right",value:"topRight"},bottomLeft:{name:"Bottom Left",value:"bottomLeft"},bottomRight:{name:"Bottom Right",value:"bottomRight"},hidden:{name:"Hidden",value:null}}},colorbarBackgroundColor:{name:"Colorbar Background Color",inlineOptions:Nn},colorbarBackgroundOpacity:{name:"Colorbar Background Opacity",inlineOptions:Ns},colorbarLabelsPosition:{name:"Colorbar Labels Position",inlineOptions:{inside:{name:"Inside",value:"inside"},outside:{name:"Outside",value:"outside"}}},labelColor:{name:"Label Color",inlineOptions:{...Nn,...Gke}},labelPosition:{name:"Label Position",inlineOptions:{ol:{name:"Outer left",value:"outerLeft"},or:{name:"Outer right",value:"outerRight"},ot:{name:"Outer top",value:"outerTop"},ob:{name:"Outer bottom",value:"outerBottom"},tl:{name:"Top left",value:"topLeft"},tr:{name:"Top right",value:"topRight"},bl:{name:"Bottom left",value:"bottomLeft"},br:{name:"Bottom right",value:"bottomRight"},hidden:{name:"Hidden",value:"hidden"}}},labelTextOpacity:{name:"Label Text Opacity",inlineOptions:Ns},geneAnnotationHeight:{name:"Gene Annotation Height",inlineOptions:{8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16}}},annotationHeight:{name:"Annotation Height",inlineOptions:{5:{name:"5px",value:5},8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16},20:{name:"20px",value:20},scaled:{name:"scaled",value:"scaled"}}},maxAnnotationHeight:{name:"Max Annotation Height",inlineOptions:{5:{name:"5px",value:5},8:{name:"8px",value:8},10:{name:"10px",value:10},12:{name:"12px",value:12},16:{name:"16px",value:16},20:{name:"20px",value:20},none:{name:"none",value:null}}},annotationStyle:{name:"Annotation Style",inlineOptions:{box:{name:"Box",value:"box"},segment:{name:"Segment",value:"segment"}}},geneLabelPosition:{name:"Gene Label Position",inlineOptions:{inside:{name:"Inside",value:"inside"},outside:{name:"Outside",value:"outside"}}},geneStrandSpacing:{name:"Gene Strand Spacing",inlineOptions:{2:{name:"2px",value:2},4:{name:"4px",value:4},8:{name:"8px",value:8}}},labelBackgroundColor:{name:"Label Background Color",inlineOptions:Nn},labelBackgroundOpacity:{name:"Label Background Opacity",inlineOptions:Ns},viewResolution:{name:"View Resolution",inlineOptions:{high:{name:"High",value:384},medium:{name:"Medium",value:1024},low:{name:"Low",value:2048}}},colorRange:{name:"Color map",inlineOptions:{afmhot:{name:"afmhot",value:["rgba(0,0,0,1.0)","rgba(128,0,0,1.0)","rgba(256,129,1,1.0)","rgba(256,256,129,1.0)","rgba(256,256,256,1.0)"]},fall:{name:"fall",value:["white","rgba(245,166,35,1.0)","rgba(208,2,27,1.0)","black"]},hot:{name:"hot",value:["rgba(10,0,0,1.0)","rgba(179,0,0,1.0)","rgba(256,91,0,1.0)","rgba(256,256,6,1.0)","rgba(256,256,256,1.0)"]},jet:{name:"jet",value:["rgba(0,0,128,1.0)","rgba(0,129,256,1.0)","rgba(125,256,122,1.0)","rgba(256,148,0,1.0)","rgba(128,0,0,1.0)"]},bwr:{name:"bwr",value:["rgba(0,0,256,1.0)","rgba(128,128,256,1.0)","rgba(256,254,254,1.0)","rgba(256,126,126,1.0)","rgba(256,0,0,1.0)"]},cubehelix:{name:"cubehelix",value:["rgba(0,0,0,1.0)","rgba(21,83,76,1.0)","rgba(162,121,74,1.0)","rgba(199,180,238,1.0)","rgba(256,256,256,1.0)"]},rainbow:{name:"rainbow",value:["rgba(128,0,256,1.0)","rgba(0,181,236,1.0)","rgba(129,255,180,1.0)","rgba(256,179,96,1.0)","rgba(256,0,0,1.0)"]},gray:{name:"greys",value:["rgba(255,255,255,1)","rgba(0,0,0,1)"]},red:{name:"White to red",value:["rgba(255,255,255,1)","rgba(255,0,0,1)"]},green:{name:"White to green",value:["rgba(255,255,255,1)","rgba(0,255,0,1)"]},blue:{name:"White to blue",value:["rgba(255,255,255,1)","rgba(0,0,255,1)"]},custard:{name:"custard",value:["#FFFFFF","#F8E71C","rgba(245,166,35,1)","rgba(0,0,0,1)"]},magma:{name:"magma",value:["rgba(0,0,3,1)","rgba(0,0,4,1)","rgba(0,0,6,1)","rgba(1,0,7,1)","rgba(1,1,9,1)","rgba(1,1,11,1)","rgba(2,2,13,1)","rgba(2,2,15,1)","rgba(3,3,17,1)","rgba(4,3,19,1)","rgba(4,4,21,1)","rgba(5,4,23,1)","rgba(6,5,25,1)","rgba(7,5,27,1)","rgba(8,6,29,1)","rgba(9,7,32,1)","rgba(10,7,34,1)","rgba(11,8,36,1)","rgba(12,9,38,1)","rgba(13,10,40,1)","rgba(14,10,42,1)","rgba(15,11,45,1)","rgba(16,12,47,1)","rgba(17,12,49,1)","rgba(19,13,51,1)","rgba(20,13,54,1)","rgba(21,14,56,1)","rgba(22,14,58,1)","rgba(23,15,61,1)","rgba(25,15,63,1)","rgba(26,16,66,1)","rgba(27,16,68,1)","rgba(28,16,70,1)","rgba(30,17,73,1)","rgba(31,17,75,1)","rgba(33,17,78,1)","rgba(34,17,80,1)","rgba(36,17,83,1)","rgba(37,17,85,1)","rgba(39,17,87,1)","rgba(40,17,90,1)","rgba(42,17,92,1)","rgba(43,17,94,1)","rgba(45,17,97,1)","rgba(47,16,99,1)","rgba(49,16,101,1)","rgba(50,16,103,1)","rgba(52,16,105,1)","rgba(54,15,107,1)","rgba(55,15,108,1)","rgba(57,15,110,1)","rgba(59,15,112,1)","rgba(61,15,113,1)","rgba(62,15,114,1)","rgba(64,15,116,1)","rgba(66,15,117,1)","rgba(67,15,118,1)","rgba(69,15,119,1)","rgba(71,15,120,1)","rgba(72,16,120,1)","rgba(74,16,121,1)","rgba(76,16,122,1)","rgba(77,17,123,1)","rgba(79,17,123,1)","rgba(81,18,124,1)","rgba(82,18,124,1)","rgba(84,19,125,1)","rgba(85,20,125,1)","rgba(87,20,126,1)","rgba(88,21,126,1)","rgba(90,21,126,1)","rgba(92,22,127,1)","rgba(93,23,127,1)","rgba(95,23,127,1)","rgba(96,24,128,1)","rgba(98,25,128,1)","rgba(99,25,128,1)","rgba(101,26,128,1)","rgba(103,26,128,1)","rgba(104,27,129,1)","rgba(106,28,129,1)","rgba(107,28,129,1)","rgba(109,29,129,1)","rgba(110,30,129,1)","rgba(112,30,129,1)","rgba(113,31,129,1)","rgba(115,32,129,1)","rgba(117,32,129,1)","rgba(118,33,129,1)","rgba(120,33,129,1)","rgba(121,34,130,1)","rgba(123,35,130,1)","rgba(124,35,130,1)","rgba(126,36,130,1)","rgba(128,36,130,1)","rgba(129,37,129,1)","rgba(131,37,129,1)","rgba(132,38,129,1)","rgba(134,39,129,1)","rgba(136,39,129,1)","rgba(137,40,129,1)","rgba(139,40,129,1)","rgba(140,41,129,1)","rgba(142,41,129,1)","rgba(144,42,129,1)","rgba(145,42,129,1)","rgba(147,43,128,1)","rgba(148,43,128,1)","rgba(150,44,128,1)","rgba(152,44,128,1)","rgba(153,45,128,1)","rgba(155,46,127,1)","rgba(157,46,127,1)","rgba(158,47,127,1)","rgba(160,47,127,1)","rgba(161,48,126,1)","rgba(163,48,126,1)","rgba(165,49,126,1)","rgba(166,49,125,1)","rgba(168,50,125,1)","rgba(170,50,125,1)","rgba(171,51,124,1)","rgba(173,51,124,1)","rgba(175,52,123,1)","rgba(176,52,123,1)","rgba(178,53,123,1)","rgba(180,53,122,1)","rgba(181,54,122,1)","rgba(183,55,121,1)","rgba(185,55,121,1)","rgba(186,56,120,1)","rgba(188,56,120,1)","rgba(189,57,119,1)","rgba(191,57,118,1)","rgba(193,58,118,1)","rgba(194,59,117,1)","rgba(196,59,117,1)","rgba(198,60,116,1)","rgba(199,61,115,1)","rgba(201,61,115,1)","rgba(202,62,114,1)","rgba(204,63,113,1)","rgba(206,63,113,1)","rgba(207,64,112,1)","rgba(209,65,111,1)","rgba(210,66,110,1)","rgba(212,67,110,1)","rgba(213,67,109,1)","rgba(215,68,108,1)","rgba(216,69,107,1)","rgba(218,70,107,1)","rgba(219,71,106,1)","rgba(221,72,105,1)","rgba(222,73,104,1)","rgba(223,74,103,1)","rgba(225,75,103,1)","rgba(226,76,102,1)","rgba(227,78,101,1)","rgba(229,79,100,1)","rgba(230,80,100,1)","rgba(231,81,99,1)","rgba(232,83,98,1)","rgba(233,84,97,1)","rgba(234,85,97,1)","rgba(236,87,96,1)","rgba(237,88,95,1)","rgba(238,90,95,1)","rgba(239,91,94,1)","rgba(239,93,94,1)","rgba(240,95,93,1)","rgba(241,96,93,1)","rgba(242,98,93,1)","rgba(243,100,92,1)","rgba(243,101,92,1)","rgba(244,103,92,1)","rgba(245,105,92,1)","rgba(246,107,92,1)","rgba(246,108,92,1)","rgba(247,110,92,1)","rgba(247,112,92,1)","rgba(248,114,92,1)","rgba(248,116,92,1)","rgba(249,118,92,1)","rgba(249,120,92,1)","rgba(250,121,93,1)","rgba(250,123,93,1)","rgba(250,125,94,1)","rgba(251,127,94,1)","rgba(251,129,95,1)","rgba(251,131,95,1)","rgba(252,133,96,1)","rgba(252,135,97,1)","rgba(252,137,97,1)","rgba(252,139,98,1)","rgba(253,140,99,1)","rgba(253,142,100,1)","rgba(253,144,101,1)","rgba(253,146,102,1)","rgba(253,148,103,1)","rgba(254,150,104,1)","rgba(254,152,105,1)","rgba(254,154,106,1)","rgba(254,156,107,1)","rgba(254,157,108,1)","rgba(254,159,109,1)","rgba(254,161,110,1)","rgba(254,163,111,1)","rgba(254,165,112,1)","rgba(255,167,114,1)","rgba(255,169,115,1)","rgba(255,171,116,1)","rgba(255,172,118,1)","rgba(255,174,119,1)","rgba(255,176,120,1)","rgba(255,178,122,1)","rgba(255,180,123,1)","rgba(255,182,124,1)","rgba(255,184,126,1)","rgba(255,185,127,1)","rgba(255,187,129,1)","rgba(255,189,130,1)","rgba(255,191,132,1)","rgba(255,193,133,1)","rgba(255,195,135,1)","rgba(255,197,136,1)","rgba(255,198,138,1)","rgba(255,200,140,1)","rgba(255,202,141,1)","rgba(255,204,143,1)","rgba(254,206,144,1)","rgba(254,208,146,1)","rgba(254,209,148,1)","rgba(254,211,149,1)","rgba(254,213,151,1)","rgba(254,215,153,1)","rgba(254,217,155,1)","rgba(254,219,156,1)","rgba(254,220,158,1)","rgba(254,222,160,1)","rgba(254,224,162,1)","rgba(254,226,163,1)","rgba(253,228,165,1)","rgba(253,230,167,1)","rgba(253,231,169,1)","rgba(253,233,171,1)","rgba(253,235,172,1)","rgba(253,237,174,1)","rgba(253,239,176,1)","rgba(253,241,178,1)","rgba(253,242,180,1)","rgba(253,244,182,1)","rgba(253,246,184,1)","rgba(252,248,186,1)","rgba(252,250,188,1)","rgba(252,251,189,1)","rgba(252,253,191,1)"]},viridis:{name:"viridis",value:["rgba(68,1,84,1)","rgba(68,2,85,1)","rgba(69,3,87,1)","rgba(69,5,88,1)","rgba(69,6,90,1)","rgba(70,8,91,1)","rgba(70,9,93,1)","rgba(70,11,94,1)","rgba(70,12,96,1)","rgba(71,14,97,1)","rgba(71,15,98,1)","rgba(71,17,100,1)","rgba(71,18,101,1)","rgba(71,20,102,1)","rgba(72,21,104,1)","rgba(72,22,105,1)","rgba(72,24,106,1)","rgba(72,25,108,1)","rgba(72,26,109,1)","rgba(72,28,110,1)","rgba(72,29,111,1)","rgba(72,30,112,1)","rgba(72,32,113,1)","rgba(72,33,115,1)","rgba(72,34,116,1)","rgba(72,36,117,1)","rgba(72,37,118,1)","rgba(72,38,119,1)","rgba(72,39,120,1)","rgba(71,41,121,1)","rgba(71,42,121,1)","rgba(71,43,122,1)","rgba(71,44,123,1)","rgba(71,46,124,1)","rgba(70,47,125,1)","rgba(70,48,126,1)","rgba(70,49,126,1)","rgba(70,51,127,1)","rgba(69,52,128,1)","rgba(69,53,129,1)","rgba(69,54,129,1)","rgba(68,56,130,1)","rgba(68,57,131,1)","rgba(68,58,131,1)","rgba(67,59,132,1)","rgba(67,60,132,1)","rgba(67,62,133,1)","rgba(66,63,133,1)","rgba(66,64,134,1)","rgba(65,65,134,1)","rgba(65,66,135,1)","rgba(65,67,135,1)","rgba(64,69,136,1)","rgba(64,70,136,1)","rgba(63,71,136,1)","rgba(63,72,137,1)","rgba(62,73,137,1)","rgba(62,74,137,1)","rgba(61,75,138,1)","rgba(61,77,138,1)","rgba(60,78,138,1)","rgba(60,79,138,1)","rgba(59,80,139,1)","rgba(59,81,139,1)","rgba(58,82,139,1)","rgba(58,83,139,1)","rgba(57,84,140,1)","rgba(57,85,140,1)","rgba(56,86,140,1)","rgba(56,87,140,1)","rgba(55,88,140,1)","rgba(55,89,140,1)","rgba(54,91,141,1)","rgba(54,92,141,1)","rgba(53,93,141,1)","rgba(53,94,141,1)","rgba(52,95,141,1)","rgba(52,96,141,1)","rgba(51,97,141,1)","rgba(51,98,141,1)","rgba(51,99,141,1)","rgba(50,100,142,1)","rgba(50,101,142,1)","rgba(49,102,142,1)","rgba(49,103,142,1)","rgba(48,104,142,1)","rgba(48,105,142,1)","rgba(47,106,142,1)","rgba(47,107,142,1)","rgba(47,108,142,1)","rgba(46,109,142,1)","rgba(46,110,142,1)","rgba(45,111,142,1)","rgba(45,112,142,1)","rgba(45,112,142,1)","rgba(44,113,142,1)","rgba(44,114,142,1)","rgba(43,115,142,1)","rgba(43,116,142,1)","rgba(43,117,142,1)","rgba(42,118,142,1)","rgba(42,119,142,1)","rgba(41,120,142,1)","rgba(41,121,142,1)","rgba(41,122,142,1)","rgba(40,123,142,1)","rgba(40,124,142,1)","rgba(40,125,142,1)","rgba(39,126,142,1)","rgba(39,127,142,1)","rgba(38,128,142,1)","rgba(38,129,142,1)","rgba(38,130,142,1)","rgba(37,131,142,1)","rgba(37,131,142,1)","rgba(37,132,142,1)","rgba(36,133,142,1)","rgba(36,134,142,1)","rgba(35,135,142,1)","rgba(35,136,142,1)","rgba(35,137,142,1)","rgba(34,138,141,1)","rgba(34,139,141,1)","rgba(34,140,141,1)","rgba(33,141,141,1)","rgba(33,142,141,1)","rgba(33,143,141,1)","rgba(32,144,141,1)","rgba(32,145,140,1)","rgba(32,146,140,1)","rgba(32,147,140,1)","rgba(31,147,140,1)","rgba(31,148,140,1)","rgba(31,149,139,1)","rgba(31,150,139,1)","rgba(31,151,139,1)","rgba(30,152,139,1)","rgba(30,153,138,1)","rgba(30,154,138,1)","rgba(30,155,138,1)","rgba(30,156,137,1)","rgba(30,157,137,1)","rgba(30,158,137,1)","rgba(30,159,136,1)","rgba(30,160,136,1)","rgba(31,161,136,1)","rgba(31,162,135,1)","rgba(31,163,135,1)","rgba(31,163,134,1)","rgba(32,164,134,1)","rgba(32,165,134,1)","rgba(33,166,133,1)","rgba(33,167,133,1)","rgba(34,168,132,1)","rgba(35,169,131,1)","rgba(35,170,131,1)","rgba(36,171,130,1)","rgba(37,172,130,1)","rgba(38,173,129,1)","rgba(39,174,129,1)","rgba(40,175,128,1)","rgba(41,175,127,1)","rgba(42,176,127,1)","rgba(43,177,126,1)","rgba(44,178,125,1)","rgba(46,179,124,1)","rgba(47,180,124,1)","rgba(48,181,123,1)","rgba(50,182,122,1)","rgba(51,183,121,1)","rgba(53,183,121,1)","rgba(54,184,120,1)","rgba(56,185,119,1)","rgba(57,186,118,1)","rgba(59,187,117,1)","rgba(61,188,116,1)","rgba(62,189,115,1)","rgba(64,190,114,1)","rgba(66,190,113,1)","rgba(68,191,112,1)","rgba(70,192,111,1)","rgba(72,193,110,1)","rgba(73,194,109,1)","rgba(75,194,108,1)","rgba(77,195,107,1)","rgba(79,196,106,1)","rgba(81,197,105,1)","rgba(83,198,104,1)","rgba(85,198,102,1)","rgba(88,199,101,1)","rgba(90,200,100,1)","rgba(92,201,99,1)","rgba(94,201,98,1)","rgba(96,202,96,1)","rgba(98,203,95,1)","rgba(101,204,94,1)","rgba(103,204,92,1)","rgba(105,205,91,1)","rgba(108,206,90,1)","rgba(110,206,88,1)","rgba(112,207,87,1)","rgba(115,208,85,1)","rgba(117,208,84,1)","rgba(119,209,82,1)","rgba(122,210,81,1)","rgba(124,210,79,1)","rgba(127,211,78,1)","rgba(129,212,76,1)","rgba(132,212,75,1)","rgba(134,213,73,1)","rgba(137,213,72,1)","rgba(139,214,70,1)","rgba(142,215,68,1)","rgba(144,215,67,1)","rgba(147,216,65,1)","rgba(149,216,63,1)","rgba(152,217,62,1)","rgba(155,217,60,1)","rgba(157,218,58,1)","rgba(160,218,57,1)","rgba(163,219,55,1)","rgba(165,219,53,1)","rgba(168,220,51,1)","rgba(171,220,50,1)","rgba(173,221,48,1)","rgba(176,221,46,1)","rgba(179,221,45,1)","rgba(181,222,43,1)","rgba(184,222,41,1)","rgba(187,223,39,1)","rgba(189,223,38,1)","rgba(192,223,36,1)","rgba(195,224,35,1)","rgba(197,224,33,1)","rgba(200,225,32,1)","rgba(203,225,30,1)","rgba(205,225,29,1)","rgba(208,226,28,1)","rgba(211,226,27,1)","rgba(213,226,26,1)","rgba(216,227,25,1)","rgba(219,227,24,1)","rgba(221,227,24,1)","rgba(224,228,24,1)","rgba(226,228,24,1)","rgba(229,228,24,1)","rgba(232,229,25,1)","rgba(234,229,25,1)","rgba(237,229,26,1)","rgba(239,230,27,1)","rgba(242,230,28,1)","rgba(244,230,30,1)","rgba(247,230,31,1)","rgba(249,231,33,1)","rgba(251,231,35,1)","rgba(254,231,36,1)"]},custom:{name:"Custom...",componentPickers:{heatmap:zw,"horizontal-heatmap":zw}}}},align:{name:"Align",inlineOptions:{white:{name:"Top",value:"top"},lightGrey:{name:"Bottom",value:"bottom"}}},colorRangeGradient:{name:"Color Gradient",inlineOptions:Mi},dataTransform:{name:"Transforms",inlineOptions:{default:{name:"Default",value:"default"},None:{name:"None",value:"None"}},generateOptions:e=>{const t=[];if(e.transforms)for(const n of e.transforms)t.push({name:n.name,value:n.value});return t}},aggregationMode:{name:"Aggregation Mode",inlineOptions:{},generateOptions:e=>{const t=[];return e.aggregationModes?Object.values(e.aggregationModes).forEach(({name:n,value:i})=>{t.push({name:n,value:i})}):t.push({name:"Default",value:"default"}),t}},maxZoom:{name:"Zoom limit",inlineOptions:{none:{name:"None",value:null}},generateOptions:e=>{if(e.maxZoom){const t=[];for(let n=0;n<=e.maxZoom;n++){const{maxWidth:i,binsPerDimension:r,maxZoom:a}=e;let o=1,s=1;if(e.resolutions){const f=e.resolutions.map(h=>+h).sort((h,d)=>d-h);[o]=f,s=f[n]}else s=e.maxWidth/(2**n*e.binsPerDimension),o=i/(2**a*r);const u=_u(o,s),l=Zs(`.${u}`,s)(s);t.push({name:l,value:n.toString()})}return t}return[]}},valueColumn:{name:"Value column",inlineOptions:{none:{name:"None",value:null}},generateOptions:j$},zeroValueColor:{name:"Zero Value Color",inlineOptions:Nn}},V$={...BZ,IS_TRACK_RANGE_SELECTABLE:ju,OPTIONS_INFO:yr},Vke={d3Array:Jz,d3Axis:Eye,d3Brush:HK,d3Color:dj,d3Drag:vX,d3Dsv:oQ,d3Format:Uj,d3Geo:T1e,d3Queue:A1e,d3Request:j1e,d3Scale:gY,d3Selection:sz,d3Transition:Rge,d3Zoom:$ge,PIXI:V$.GLOBALS.PIXI,mix:lh,slugid:Pt},gT={chromosomes:{ChromosomeInfo:io,SearchField:sh},libraries:Vke,tracks:{Annotations1dTrack:FC,Annotations2dTrack:Q2,ArrowheadDomainsTrack:Z2,BarTrack:xC,BedLikeTrack:L2,CNVIntervalTrack:z2,Chromosome2DAnnotations:nH,Chromosome2DLabels:tH,ChromosomeGrid:dp,CombinedTrack:kb,CrossRule:mH,DivergentBarTrack:U2,HeatmapTiledPixiTrack:ip,Horizontal1dHeatmapTrack:G2,Horizontal2DDomainsTrack:J2,HorizontalChromosomeLabels:iH,HorizontalGeneAnnotationsTrack:BC,HorizontalHeatmapTrack:aH,HorizontalLine1DPixiTrack:ah,HorizontalMultivecTrack:$2,HorizontalPoint1DPixiTrack:H2,HorizontalRule:fH,HorizontalTiled1DPixiTrack:Xc,HorizontalTiledPlot:Ky,HorizontalTrack:Y8,Id2DTiledPixiTrack:H4,IdHorizontal1DTiledPixiTrack:$4,IdVertical1DTiledPixiTrack:G4,LeftAxisTrack:W4,MapboxTilesTrack:vH,MoveableTrack:qy,OSMTileIdsTrack:gH,OSMTilesTrack:pp,OverlayTrack:F2,PixiTrack:Qr,RasterTilesTrack:yH,SVGTrack:Cs,SquareMarkersTrack:eH,Tiled1DPixiTrack:fC,TiledPixiTrack:bs,TopAxisTrack:Y4,Track:Fc,ValueIntervalTrack:sH,VerticalRule:pH,VerticalTiled1DPixiTrack:U4,VerticalTrack:X8,ViewportTracker2D:lH,ViewportTracker2DPixi:q1e,ViewportTrackerHorizontal:uH,ViewportTrackerVertical:cH},dataFetchers:{DataFetcher:Iv,GBKDataFetcher:P4,LocalDataFetcher:R4,getDataFetcher:aEe},factories:{ContextMenuItem:St,DataFetcher:Iv,LruCache:K8},services:xQ,utils:Qge,configs:V$,VERSION:jD},jw={"track-renderer":"_track-renderer_11dwb_1","track-renderer-element":"_track-renderer-element_11dwb_5","track-renderer-events":"_track-renderer-events_11dwb_6"},{getDataFetcher:Yke}=gT.dataFetchers,Wke=100;let Vw=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.dragging=!1,r.element=null,r.closing=!1,r.yPositionOffset=0,r.xPositionOffset=0,r.scrollTop=0,r.scrollTimeout=null,r.activeTransitions=0,r.zoomTransform=sr,r.windowScrolledBound=r.windowScrolled.bind(_assertThisInitialized3(r)),r.zoomStartedBound=r.zoomStarted.bind(_assertThisInitialized3(r)),r.zoomedBound=r.zoomed.bind(_assertThisInitialized3(r)),r.zoomEndedBound=r.zoomEnded.bind(_assertThisInitialized3(r)),r.uid=Pt.nice(),r.viewUid=r.props.uid,r.availableForPlugins={...gT,services:{...gT.services,pubSub:r.props.pubSub,pixiRenderer:r.props.pixiRenderer}},r.mounted=!1,r.emptyZoomBehavior=PA(),r.currentProps=i,r.prevPropsStr="",r.zoomBehavior=PA().filter(a=>!(a.target.classList.contains("no-zoom")||a.target.classList.contains("react-resizable-handle"))).on("start",r.zoomStartedBound).on("zoom",r.zoomedBound).on("end",r.zoomEndedBound),r.zoomTransform=sr,r.prevZoomTransform=sr,r.initialXDomain=[0,1],r.initialYDomain=[0,1],r.xDomainLimits=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],r.yDomainLimits=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],r.zoomLimits=[0,Number.MAX_SAFE_INTEGER],r.prevCenterX=r.currentProps.paddingLeft+r.currentProps.leftWidth+r.currentProps.centerWidth/2,r.prevCenterY=r.currentProps.paddingTop+r.currentProps.topHeight+r.currentProps.centerHeight/2,r.cumCenterXOffset=0,r.cumCenterYOffset=0,r.setUpInitialScales(r.currentProps.initialXDomain,r.currentProps.initialYDomain,r.currentProps.xDomainLimits,r.currentProps.yDomainLimits,r.currentProps.zoomLimits),r.setUpScales(),r.trackDefObjects={},r.metaTracks={},r.pubSubs=[],window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(a=>{fn[a]=window.higlassTracksByType[a].config}),r.boundForwardEvent=r.forwardEvent.bind(_assertThisInitialized3(r)),r.boundScrollEvent=r.scrollEvent.bind(_assertThisInitialized3(r)),r.boundForwardContextMenu=r.forwardContextMenu.bind(_assertThisInitialized3(r)),r.dispatchEventBound=r.dispatchEvent.bind(_assertThisInitialized3(r)),r.zoomToDataPosHandlerBound=r.zoomToDataPosHandler.bind(_assertThisInitialized3(r)),r.onScrollHandlerBound=r.onScrollHandler.bind(_assertThisInitialized3(r)),r}return _createClass3(n,[{key:"UNSAFE_componentWillMount",value:function(){this.pubSubs=[],this.pubSubs.push(this.props.pubSub.subscribe("scroll",this.windowScrolledBound)),this.pubSubs.push(this.props.pubSub.subscribe("app.event",this.dispatchEventBound)),this.pubSubs.push(this.props.pubSub.subscribe("zoomToDataPos",this.zoomToDataPosHandlerBound)),this.pubSubs.push(this.props.pubSub.subscribe("app.scroll",this.onScrollHandlerBound))}},{key:"componentDidMount",value:function(){if(this.elementPos=this.element.getBoundingClientRect(),this.elementSelection=xt(this.element),this.svgTrackAreaSelection=xt(this.svgTrackArea),this.pStage=new Be.PIXI.Graphics,this.pMask=new Be.PIXI.Graphics,this.pOutline=new Be.PIXI.Graphics,this.pBackground=new Be.PIXI.Graphics,this.pStage.addChild(this.pMask),this.pStage.addChild(this.pOutline),this.currentProps.pixiStage.addChild(this.pStage),this.pStage.mask=this.pMask,this.props.isRangeSelection||this.addZoom(),!this.currentProps.svgElement||!this.currentProps.canvasElement)return;this.svgElement=this.currentProps.svgElement,this.syncTrackObjects(this.currentProps.positionedTracks),this.syncMetaTracks(this.currentProps.metaTracks),this.currentProps.setCentersFunction(this.setCenter.bind(this)),this.currentProps.registerDraggingChangedListener(this.draggingChanged.bind(this)),this.draggingChanged(!0),this.addEventTracker();const r=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],a=this.svgElement.getBoundingClientRect(),o=[[Math.max(r[0][0],0),Math.max(r[0][1],0)],[Math.min(r[1][0],a.width),Math.min(r[1][1],a.height)]];this.zoomBehavior.extent(o).translateExtent(r).scaleExtent(this.zoomLimits)}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){if(!r.svgElement||!r.canvasElement)return;const a=this.updatablePropsToString(r);if(this.currentProps=r,this.prevPropsStr===a)return;this.setBackground();for(const c in this.trackDefObjects){const l=this.trackDefObjects[c].trackObject;l.delayDrawing=!0}this.prevPropsStr=a,this.setUpInitialScales(r.initialXDomain,r.initialYDomain,r.xDomainLimits,r.yDomainLimits,r.zoomLimits),this.setUpScales(r.width!==this.props.width||r.height!==this.props.height),this.svgElement=r.svgElement;const o=[[this.xScale(this.xDomainLimits[0]),this.yScale(this.yDomainLimits[0])],[this.xScale(this.xDomainLimits[1]),this.yScale(this.yDomainLimits[1])]],s=this.svgElement.getBoundingClientRect(),u=[[Math.max(o[0][0],0),Math.max(o[0][1],0)],[Math.min(o[1][0],s.width),Math.min(o[1][1],s.height)]];this.zoomBehavior.extent(u).translateExtent(o).scaleExtent(this.zoomLimits),this.syncTrackObjects(r.positionedTracks),this.syncMetaTracks(r.metaTracks);for(const c of r.positionedTracks){const l=c.track.options,f=this.trackDefObjects[c.track.uid].trackObject;if(f.rerender(l),c.track.hasOwnProperty("contents")){const h={};for(const d of c.track.contents)h[d.uid]=d;for(const d in f.createdTracks)f.createdTracks[d].rerender(h[d].options)}}this.props.onNewTilesLoaded();for(const c in this.trackDefObjects){const l=this.trackDefObjects[c].trackObject;l.delayDrawing=!1,l.draw()}}},{key:"componentDidUpdate",value:function(r){(this.props.initialXDomain[0]!==r.initialXDomain[0]||this.props.initialXDomain[1]!==r.initialXDomain[1]||this.props.initialYDomain[0]!==r.initialYDomain[0]||this.props.initialYDomain[1]!==r.initialYDomain[1])&&(this.element.__zoom=sr),r.isRangeSelection!==this.props.isRangeSelection&&(this.props.isRangeSelection?this.removeZoom():this.addZoom()),r.zoomable!==this.props.zoomable&&(this.props.zoomable?this.addZoom():this.removeZoom()),this.addEventTracker()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.removeTracks(Object.keys(this.trackDefObjects)),this.removeMetaTracks(Object.keys(this.metaTracks)),this.currentProps.removeDraggingChangedListener(this.draggingChanged),this.currentProps.pixiStage.removeChild(this.pStage),this.pMask.destroy(!0),this.pStage.destroy(!0),this.pubSubs.forEach(r=>this.props.pubSub.unsubscribe(r)),this.pubSubs=[],this.removeEventTracker()}},{key:"dispatchEvent",value:function(r){r.sourceUid===this.uid&&r.type!=="contextmenu"&&Hg(r,this.element)}},{key:"isWithin",value:function(r,a){if(!this.element)return!1;const o=r>=this.elementPos.left&&r<=this.elementPos.width+this.elementPos.left,s=a>=this.elementPos.top&&a<=this.elementPos.height+this.elementPos.top;return o&&s}},{key:"zoomToDataPosHandler",value:function({pos:r,animateTime:a,isMercator:o}){this.zoomToDataPos(...r,a,o)}},{key:"addZoom",value:function(){!this.elementSelection||!this.currentProps.zoomable||(this.elementSelection.call(this.zoomBehavior),this.zoomBehavior.transform(this.elementSelection,this.zoomTransform))}},{key:"removeZoom",value:function(){this.elementSelection&&(this.zoomEnded(),this.elementSelection.on(".zoom",null))}},{key:"setMask",value:function(){this.pMask.clear(),this.pMask.beginFill(),this.pMask.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),this.pMask.endFill()}},{key:"setBackground",value:function(){const r=this.props.theme===pn?"black":"white",a=at(this.currentProps.viewOptions&&this.currentProps.viewOptions.backgroundColor||r);this.pBackground.clear(),this.pBackground.beginFill(a),this.pBackground.drawRect(this.xPositionOffset,this.yPositionOffset,this.currentProps.width,this.currentProps.height),this.pBackground.endFill()}},{key:"windowScrolled",value:function(){this.removeZoom(),this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout(()=>{this.addZoom()},Wke)}},{key:"setUpInitialScales",value:function(r=[0,1],a=[0,1],o=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],s=[-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],u=[0,Number.MAX_SAFE_INTEGER]){u[0]=u[0]===null?0:u[0],u[1]=u[1]===null?1/0:u[1];const c=r[1]-r[0],l=(a[0]+a[1])/2;if(a[0]=l-c/2,a[1]=l+c/2,r[0]===this.initialXDomain[0]&&r[1]===this.initialXDomain[1]&&a[0]===this.initialYDomain[0]&&a[1]===this.initialYDomain[1]&&o[0]===this.xDomainLimits[0]&&o[1]===this.xDomainLimits[1]&&s[0]===this.yDomainLimits[0]&&s[1]===this.yDomainLimits[1]&&u[0]===this.zoomLimits[0]&&u[1]===this.zoomLimits[1])return;this.initialXDomain=r,this.initialYDomain=a,this.xDomainLimits=o,this.yDomainLimits=s,this.zoomLimits=u,this.zoomTransform=sr,this.prevZoomTransform=sr,this.cumCenterYOffset=0,this.cumCenterXOffset=0,this.drawableToDomainX=Et().domain([this.currentProps.paddingLeft+this.currentProps.leftWidth,this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth]).range([r[0],r[1]]);let f,h;this.currentProps.centerWidth===0?(f=this.currentProps.paddingTop+this.currentProps.topHeight,h=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight):(f=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2-this.currentProps.centerWidth/2,h=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2+this.currentProps.centerWidth/2),this.drawableToDomainY=Et().domain([f,h]).range([a[0],a[1]]),this.prevCenterX=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,this.prevCenterY=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2}},{key:"updatablePropsToString",value:function(r){return JSON.stringify({positionedTracks:r.positionedTracks,initialXDomain:r.initialXDomain,initialYDomain:r.initialYDomain,width:r.width,height:r.height,paddingLeft:r.paddingLeft,paddingTop:r.paddingTop,leftWidth:r.leftWidth,topHeight:r.topHeight,dragging:r.dragging,viewOptions:r.viewOptions})}},{key:"draggingChanged",value:function(r){this.dragging=r,this.timedUpdatePositionAndDimensions()}},{key:"setUpScales",value:function(r=!1){const a=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,o=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2,s=(this.drawableToDomainX(a)-this.drawableToDomainX(this.prevCenterX))/this.zoomTransform.k,u=(this.drawableToDomainY(o)-this.drawableToDomainY(this.prevCenterY))/this.zoomTransform.k;this.cumCenterYOffset+=u,this.cumCenterXOffset+=s,this.prevCenterY=o,this.prevCenterX=a;const c=[this.drawableToDomainX(0)-this.cumCenterXOffset,this.drawableToDomainX(this.currentProps.width)-this.cumCenterXOffset],l=[this.drawableToDomainY(0)-this.cumCenterYOffset,this.drawableToDomainY(this.currentProps.height)-this.cumCenterYOffset];this.xScale=Et().domain(c).range([0,this.currentProps.width]),this.yScale=Et().domain(l).range([0,this.currentProps.height]);for(const f in this.trackDefObjects)this.trackDefObjects[f].trackObject.refScalesChanged(this.xScale,this.yScale);this.applyZoomTransform(r)}},{key:"getTrackDef",value:function(r){const a=Vi(this.trackDefObjects);for(const[,{trackDef:o,trackObject:s}]of a){if(s===r)return o.track;if(o.track.contents){for(const u of o.track.contents)if(s.createdTracks[u.uid]===r)return u}}return null}},{key:"getTrackObject",value:function(r){const a=Vi(this.trackDefObjects);for(let o=0;o<a.length;o++){const s=a[o][0],u=a[o][1].trackObject;if(s===r)return u;if(u.createdTracks){const c=Vi(u.createdTracks);for(let l=0;l<c.length;l++){const f=c[l][0],h=c[l][1];if(f===r)return h}}}}},{key:"timedUpdatePositionAndDimensions",value:function(){this.closing||!this.element||(this.elementPos=this.element.getBoundingClientRect(),this.dragging&&(this.yPositionOffset=this.element.getBoundingClientRect().top-this.currentProps.canvasElement.getBoundingClientRect().top+this.scrollTop,this.xPositionOffset=this.element.getBoundingClientRect().left-this.currentProps.canvasElement.getBoundingClientRect().left,this.setMask(),this.setBackground(),this.updateTrackPositions()&&this.applyZoomTransform(!0),requestAnimationFrame(this.timedUpdatePositionAndDimensions.bind(this))))}},{key:"syncMetaTracks",value:function(r){const a=Object.keys(this.metaTracks),o=new Set(r.map(s=>s.uid));this.addMetaTracks(r.filter(s=>!this.metaTracks[s.uid])),this.updateMetaTracks(r.filter(s=>this.metaTracks[s.uid])),this.removeMetaTracks(a.filter(s=>!o.has(s)))}},{key:"syncTrackObjects",value:function(r){this.prevTrackDefinitions=JSON.stringify(r);const a={};for(let f=0;f<r.length;f++)a[r[f].track.uid]=r[f];const o=new Set(Object.keys(this.trackDefObjects)),s=new Set(Object.keys(a)),u=new Set([...s].filter(f=>!o.has(f))),c=new Set([...o].filter(f=>!s.has(f))),l=new Set([...s].filter(f=>o.has(f)));this.updateExistingTrackDefs([...l].map(f=>a[f])),this.addNewTracks([...u].map(f=>a[f])),this.updateExistingTrackDefs([...u].map(f=>a[f])),this.removeTracks([...c])}},{key:"addMetaTracks",value:function(r){r.filter(a=>!this.metaTracks[a.uid]).forEach(a=>{this.metaTracks[a.uid]={trackDef:a,trackObject:this.createMetaTrack(a)}})}},{key:"addNewTracks",value:function(r){if(!!this.currentProps.pixiStage){for(let a=0;a<r.length;a++){const o=r[a],s=this.createTrackObject(o.track);s.refScalesChanged(this.xScale,this.yScale),this.trackDefObjects[o.track.uid]={trackDef:o,trackObject:s};const u=this.zoomTransform.rescaleX(this.xScale),c=this.zoomTransform.rescaleY(this.yScale);s.setDimensions([o.width,o.height]),s.zoomed(u,c)}this.applyZoomTransform(!1)}}},{key:"updateMetaTracks",value:function(){}},{key:"updateExistingTrackDefs",value:function(r){for(let o=0;o<r.length;o++)this.trackDefObjects[r[o].track.uid].trackDef=r[o],r[o].track.type==="combined"&&this.trackDefObjects[r[o].track.uid].trackObject.updateContents(r[o].track.contents,this.createTrackObject.bind(this)).refScalesChanged(this.xScale,this.yScale);this.updateTrackPositions()&&this.applyZoomTransform(!1)}},{key:"updateTrackPositions",value:function(){let r=!1;for(const a in this.trackDefObjects){const o=this.trackDefObjects[a].trackDef,s=this.trackDefObjects[a].trackObject,u=s.position,c=s.dimensions,l=[this.xPositionOffset+o.left,this.yPositionOffset+o.top],f=[o.width,o.height];(!u||l[0]!==u[0]||l[1]!==u[1])&&(s.setPosition(l),r=!0),(!c||f[0]!==c[0]||f[1]!==c[1])&&(s.setDimensions(f),r=!0)}return r}},{key:"removeMetaTracks",value:function(r){r.forEach(a=>{this.metaTracks[a].trackObject.remove(),this.metaTracks[a]=void 0,delete this.metaTracks[a]})}},{key:"removeTracks",value:function(r){for(let a=0;a<r.length;a++)this.trackDefObjects[r[a]].trackObject.remove(),delete this.trackDefObjects[r[a]]}},{key:"setCenter",value:function(r,a,o,s=!1,u=0,c=this.xScale,l=this.yScale){const h=(this.xScale.invert(1)-this.xScale.invert(0))/o,d=this.currentProps.paddingLeft+this.currentProps.leftWidth+this.currentProps.centerWidth/2,p=this.currentProps.paddingTop+this.currentProps.topHeight+this.currentProps.centerHeight/2,m=d-c(r)*h,g=p-l(a)*h;let v;const E=()=>{const y=sr.translate(m,g).scale(h);this.zoomTransform=y,this.emptyZoomBehavior.transform(this.elementSelection,y),v=this.applyZoomTransform(s)};if(u){let y=this.elementSelection;this.activeTransitions+=1,document.hidden||(y=y.transition().duration(u)),y.call(this.zoomBehavior.transform,sr.translate(m,g).scale(h)).on("end",()=>{E(),this.activeTransitions-=1})}else E();return v}},{key:"valueScaleMove",value:function(r){for(const a of this.getTracksAtPosition(...this.zoomStartPos))a.movedY(r);this.zoomTransform=this.zoomStartTransform}},{key:"valueScaleZoom",value:function(r,a){const o=r.sourceEvent.deltaY,s=r.sourceEvent.deltaMode,c=((f,h)=>f*(h?120:1)/500)(o,s),l=sn(r.sourceEvent,this.props.canvasElement);for(const f of this.getTracksAtPosition(...l)){const h=a==="1d-horizontal"?l[1]-f.position[1]:l[0]-f.position[0];f.zoomedY(h,2**c)}this.zoomTransform=this.zoomStartTransform}},{key:"zoomed",value:function(r){let a=null;if(this.zoomStartPos){const s=this.getTracksAtPosition(...this.zoomStartPos);if(s.length){const u=s[0],c=this.getTrackDef(u);fn[c.type]&&(a=fn[c.type].orientation),u instanceof j2&&(a="1d-vertical")}}if(a&&r.sourceEvent){if(r.shiftKey||this.valueScaleZooming){if(r.sourceEvent.deltaY!==void 0){this.valueScaleZoom(r,a);return}a==="1d-horizontal"?this.valueScaleMove(r.sourceEvent.movementY):a==="1d-vertical"&&this.valueScaleMove(r.sourceEvent.movementX)}a==="1d-horizontal"&&r.sourceEvent.movementY?this.valueScaleMove(r.sourceEvent.movementY):a==="1d-vertical"&&r.sourceEvent.movementX&&this.valueScaleMove(r.sourceEvent.movementX)}this.zoomTransform=this.currentProps.zoomable?r.transform:sr,this.prevZoomTransform.k!==this.zoomTransform.k||(a==="1d-horizontal"?this.zoomTransform=sr.translate(this.zoomTransform.x,this.prevZoomTransform.y).scale(this.zoomTransform.k):a==="1d-vertical"&&(this.zoomTransform=sr.translate(this.prevZoomTransform.x,this.zoomTransform.y).scale(this.zoomTransform.k)),this.element.__zoom=this.zoomTransform),this.applyZoomTransform(!0),this.prevZoomTransform=this.zoomTransform,this.props.pubSub.publish("app.zoom",r),r.sourceEvent&&(r.sourceEvent.stopPropagation(),r.sourceEvent.preventDefault())}},{key:"getTracksAtPosition",value:function(r,a){const o=[];let s=[];for(const u in this.trackDefObjects){const c=this.trackDefObjects[u].trackObject;c.childTracks?s=s.concat(c.childTracks):s.push(c)}for(const u of s){const c=u.position[0]<=r&&r<=u.position[0]+u.dimensions[0],l=u.position[1]<=a&&a<=u.position[1]+u.dimensions[1];c&&l&&o.push(u)}return o}},{key:"zoomStarted",value:function(r){this.zooming=!0,r&&r.sourceEvent&&(this.zoomStartPos=sn(r.sourceEvent,this.props.canvasElement),r.sourceEvent.shiftKey&&(this.valueScaleZooming=!0)),this.zoomStartTransform=this.zoomTransform,this.props.pubSub.publish("app.zoomStart")}},{key:"zoomEnded",value:function(){this.zooming=!1,this.zoomStartPos=null,this.valueScaleZooming&&(this.valueScaleZooming=!1,this.element.__zoom=this.zoomStartTransform),this.props.pubSub.publish("app.zoomEnd")}},{key:"applyZoomTransform",value:function(r=!0){const a=this.currentProps,o=a.paddingLeft+a.leftWidth,s=a.paddingTop+a.topHeight;this.zoomedXScale=this.zoomTransform.rescaleX(this.xScale),this.zoomedYScale=this.zoomTransform.rescaleY(this.yScale);const u=Et().domain([o,o+a.centerWidth].map(this.zoomedXScale.invert)).range([0,a.centerWidth]),c=Et().domain([s,s+a.centerHeight].map(this.zoomedYScale.invert)).range([0,a.centerHeight]);for(const l in this.trackDefObjects){const f=this.trackDefObjects[l].trackObject,h=this.trackDefObjects[l].trackDef;let d="unknown";if(fn[h.track.type]&&(d=fn[h.track.type].orientation),d==="whole"){const p=Et().domain([a.paddingLeft,a.width-a.paddingLeft].map(this.zoomedXScale.invert)).range([0,a.width-2*a.paddingLeft]),m=Et().domain([a.paddingTop,a.height-a.paddingTop].map(this.zoomedYScale.invert)).range([0,a.height-2*a.paddingTop]);f.zoomed(p,m);continue}if(this.trackDefObjects[l].trackDef.track.position==="gallery"){const p=Et().domain([a.paddingLeft+a.leftWidthNoGallery,a.paddingLeft+a.leftWidth+a.centerWidth+a.galleryDim].map(this.zoomedXScale.invert)).range([0,a.centerWidth+2*a.galleryDim]),m=Et().domain([a.paddingTop+a.topHeightNoGallery,a.paddingTop+a.topHeight+a.centerHeight+a.galleryDim].map(this.zoomedYScale.invert)).range([0,a.centerHeight-2*a.galleryDim]);f.zoomed(p.copy(),m.copy(),this.zoomTransform.k);continue}f.zoomed(u.copy(),c.copy(),this.zoomTransform.k,this.zoomTransform.x+this.xPositionOffset,this.zoomTransform.y+this.yPositionOffset,a.paddingLeft+a.leftWidth,a.paddingTop+a.topHeight)}return this.currentXScale=u,this.currentYScale=c,r&&this.currentProps.onScalesChanged(u,c),[u,c]}},{key:"createMetaTrack",value:function(r){switch(r.type){default:{const a=this.props.pluginTracks[r.type];if(a&&a.isMetaTrack){const o={getTrackObject:this.getTrackObject.bind(this),onNewTilesLoaded:()=>{this.currentProps.onNewTilesLoaded(r.uid)},definition:r};try{return new a.track(this.availableForPlugins,o,r.options)}catch(s){console.error("Plugin meta track",r.type,"failed to instantiate.",s)}}return console.warn(`Unknown meta track of type: ${r.type}`),new oH(this.pStage,{name:"Unknown Track Type",type:r.type},()=>this.currentProps.onNewTilesLoaded(r.uid))}}}},{key:"createTrackObject",value:function(r){const a=this.createLocationAgnosticTrackObject(r);return(r.position==="left"||r.position==="right")&&fn[r.type].orientation==="1d-horizontal"?new j2(a):a}},{key:"createLocationAgnosticTrackObject",value:function(r){const a=l=>{this.currentProps.onTilesetInfoReceived(r.uid,l)};let o=r.data;o||(o={server:Vg(r.server),tilesetUid:r.tilesetUid}),r.coordSystem&&(o.coordSystem=r.coordSystem);const s=Yke(o,this.props.pubSub,this.props.pluginDataFetchers,this.availableForPlugins),u={id:r.uid,trackUid:r.uid,trackType:r.type,viewUid:this.viewUid,pubSub:this.props.pubSub,scene:this.pStage,dataConfig:o,dataFetcher:s,getLockGroupExtrema:()=>this.currentProps.getLockGroupExtrema(r.uid),handleTilesetInfoReceived:a,animate:()=>{this.currentProps.onNewTilesLoaded(r.uid)},svgElement:this.svgElement,isValueScaleLocked:()=>this.currentProps.isValueScaleLocked(r.uid),onValueScaleChanged:()=>{this.currentProps.onValueScaleChanged(r.uid)},onTrackOptionsChanged:l=>{this.currentProps.onTrackOptionsChanged(r.uid,l)},onMouseMoveZoom:this.props.onMouseMoveZoom,chromInfoPath:r.chromInfoPath,isShowGlobalMousePosition:()=>this.props.isShowGlobalMousePosition,getTheme:()=>this.props.theme};r.y&&(u.yPosition=r.y),r.x&&(u.xPosition=r.x),r.projectionXDomain&&(u.projectionXDomain=r.projectionXDomain),r.projectionYDomain&&(u.projectionYDomain=r.projectionYDomain);const c=r.options;switch(r.type){case"left-axis":return new W4(u,c);case"top-axis":return new Y4(u,c);case"heatmap":return new ip(u,c);case"multivec":case"vector-heatmap":case"horizontal-multivec":case"horizontal-vector-heatmap":case"vertical-multivec":case"vertical-vector-heatmap":return new $2(u,c);case"1d-heatmap":case"horizontal-1d-heatmap":case"vertical-1d-heatmap":return new G2(u,c);case"line":case"horizontal-line":case"vertical-line":return new ah(u,c);case"point":case"horizontal-point":case"vertical-point":return new H2(u,c);case"bar":case"horizontal-bar":case"vertical-bar":return new xC(u,c);case"divergent-bar":case"horizontal-divergent-bar":case"vertical-divergent-bar":return new U2(u,c);case"horizontal-1d-tiles":return new $4(u,c);case"vertical-1d-tiles":return new G4(u,c);case"2d-tiles":return new H4(u,c);case"stacked-interval":case"top-stacked-interval":case"left-stacked-interval":return new z2(u,c);case"viewport-projection-center":return r.registerViewportChanged&&r.removeViewportChanged&&r.setDomainsCallback?(u.registerViewportChanged=r.registerViewportChanged,u.removeViewportChanged=r.removeViewportChanged,u.setDomainsCallback=r.setDomainsCallback,new lH(u,c)):new Fc(u,c);case"viewport-projection-horizontal":return r.registerViewportChanged&&r.removeViewportChanged&&r.setDomainsCallback?(u.registerViewportChanged=r.registerViewportChanged,u.removeViewportChanged=r.removeViewportChanged,u.setDomainsCallback=r.setDomainsCallback,new uH(u,c)):new Fc(u,c);case"viewport-projection-vertical":return r.registerViewportChanged&&r.removeViewportChanged&&r.setDomainsCallback?(u.registerViewportChanged=r.registerViewportChanged,u.removeViewportChanged=r.removeViewportChanged,u.setDomainsCallback=r.setDomainsCallback,new cH(u,c)):new Fc(u,c);case"gene-annotations":case"horizontal-gene-annotations":case"vertical-gene-annotations":return new BC(u,c);case"2d-rectangle-domains":case"arrowhead-domains":return new Z2(u,c);case"horizontal-1d-annotations":return new FC(u,c);case"vertical-1d-annotations":return new FC(u,c,!0);case"2d-annotations":return new Q2(u,c);case"linear-2d-rectangle-domains":case"horizontal-2d-rectangle-domains":case"vertical-2d-rectangle-domains":return new J2(u,c);case"square-markers":return new eH(u,c);case"combined":return u.tracks=r.contents,u.createTrackObject=this.createTrackObject.bind(this),new kb(u,c);case"2d-chromosome-labels":return new tH(u,c);case"horizontal-chromosome-grid":return u.orientation="1d-horizontal",new dp(u,c);case"vertical-chromosome-grid":return u.orientation="1d-vertical",new dp(u,c);case"2d-chromosome-grid":return new dp(u,c);case"chromosome-labels":case"horizontal-chromosome-labels":case"vertical-chromosome-labels":return new iH(u,c);case"linear-heatmap":case"horizontal-heatmap":case"vertical-heatmap":return new aH(u,c);case"2d-chromosome-annotations":return new nH(u,c);case"1d-value-interval":case"horizontal-1d-value-interval":case"vertical-1d-value-interval":return new sH(u,c);case"osm":case"osm-tiles":return new pp(u,c);case"osm-2d-tile-ids":return new gH(u,c);case"mapbox":case"mapbox-tiles":return new vH(u,c);case"raster-tiles":return new yH(u,c);case"bedlike":case"vertical-bedlike":return new L2(u,c);case"overlay-track":return new F2(u,c);case"overlay-chromosome-grid-track":return u.isOverlay=!0,new dp(u,c);case"horizontal-rule":return new fH(u,c);case"vertical-rule":return new pH(u,c);case"cross-rule":return u.x=r.x,u.y=r.y,new mH(u,c);case"simple-svg":return new Cs(u,c);case"empty":return new Qr(u,c);default:{const l=this.props.pluginTracks[r.type];if(l&&!l.isMetaTrack){u.AVAILABLE_FOR_PLUGINS=this.availableForPlugins,u.baseEl=this.baseEl,u.definition=r,r.registerViewportChanged&&r.removeViewportChanged&&r.setDomainsCallback&&(u.registerViewportChanged=r.registerViewportChanged,u.removeViewportChanged=r.removeViewportChanged,u.setDomainsCallback=r.setDomainsCallback);try{return new l.track(this.availableForPlugins,u,c)}catch(f){console.error("Plugin track",r.type,"failed to instantiate.",f)}}return console.warn("Unknown track type:",r.type),new oH(u,{name:"Unknown Track Type",type:r.type})}}}},{key:"zoomToDataPos",value:function(r,a,o,s,u=3e3,c=null){const[l,f,h]=Qn(this.xScale.copy().domain([r,a]),this.yScale.copy().domain([o,s])),d=c?c(this.xScale,this.yScale):[this.xScale,this.yScale];this.setCenter(l,f,h,!1,u,d[0],d[1])}},{key:"forwardContextMenu",value:function(r){this.props.disableTrackMenu||r.altKey||(r.preventDefault(),setTimeout(()=>{this.props.pubSub.publish("contextmenu",r)},0))}},{key:"addEventTracker",value:function(){!this.eventTracker||this.eventTracker===this.eventTrackerOld||(this.eventTrackerOld||(this.eventTrackerOld=this.eventTracker),this.eventTracker=this.eventTrackerOld,this.eventTracker.addEventListener("click",this.boundForwardEvent),this.eventTracker.addEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.addEventListener("dblclick",this.boundForwardEvent),this.eventTracker.addEventListener("wheel",this.boundForwardEvent),this.eventTracker.addEventListener("dragstart",this.boundForwardEvent),this.eventTracker.addEventListener("selectstart",this.boundForwardEvent),this.eventTracker.addEventListener("mouseover",this.boundForwardEvent),this.eventTracker.addEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.addEventListener("mousedown",this.boundForwardEvent),this.eventTracker.addEventListener("mouseup",this.boundForwardEvent),this.eventTracker.addEventListener("mouseout",this.boundForwardEvent),this.eventTracker.addEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.addEventListener("touchstart",this.boundForwardEvent),this.eventTracker.addEventListener("touchend",this.boundForwardEvent),this.eventTracker.addEventListener("touchmove",this.boundForwardEvent),this.eventTracker.addEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerover",this.boundForwardEvent),this.eventTracker.addEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.addEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.addEventListener("pointerup",this.boundForwardEvent),this.eventTracker.addEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.addEventListener("pointerout",this.boundForwardEvent),this.eventTracker.addEventListener("pointerleave",this.boundForwardEvent),window.addEventListener("scroll",this.boundScrollEvent))}},{key:"removeEventTracker",value:function(){!this.eventTracker||(this.eventTracker.removeEventListener("click",this.boundForwardEvent),this.eventTracker.removeEventListener("contextmenu",this.boundForwardContextMenu),this.eventTracker.removeEventListener("dblclick",this.boundForwardEvent),this.eventTracker.removeEventListener("wheel",this.boundForwardEvent),this.eventTracker.removeEventListener("dragstart",this.boundForwardEvent),this.eventTracker.removeEventListener("selectstart",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseover",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseenter",this.boundForwardEvent),this.eventTracker.removeEventListener("mousedown",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseup",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseout",this.boundForwardEvent),this.eventTracker.removeEventListener("mouseleave",this.boundForwardEvent),this.eventTracker.removeEventListener("touchstart",this.boundForwardEvent),this.eventTracker.removeEventListener("touchend",this.boundForwardEvent),this.eventTracker.removeEventListener("touchcancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerover",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerenter",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerdown",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerup",this.boundForwardEvent),this.eventTracker.removeEventListener("pointercancel",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerout",this.boundForwardEvent),this.eventTracker.removeEventListener("pointerleave",this.boundForwardEvent),window.removeEventListener("scroll",this.boundScrollEvent))}},{key:"scrollEvent",value:function(){this.elementPos=this.element.getBoundingClientRect()}},{key:"forwardEvent",value:function(r){r.sourceUid=this.uid,r.forwarded=!0,this.props.pubSub.publish("app.event",r)}},{key:"onScrollHandler",value:function(r){this.scrollTop=r}},{key:"render",value:function(){return A.default.createElement("div",{ref:r=>{this.baseEl=r},className:qt("track-renderer-div",jw["track-renderer"]),style:{height:this.currentProps.height,width:this.currentProps.width}},A.default.createElement("div",{ref:r=>{this.element=r},className:qt("track-renderer-element",jw["track-renderer-element"])}),A.default.createElement("div",{ref:r=>{this.eventTracker=r},className:qt("track-renderer-events",jw["track-renderer-events"])},this.currentProps.children))}}]),n}(A.default.Component);Vw.defaultProps={pluginDataFetchers:{},pluginTracks:{},canvasElement:null,centerHeight:0,centerWidth:0,children:[],galleryDim:0,height:0,initialXDomain:[],initialYDomain:[],isShowGlobalMousePosition:!1,isRangeSelection:!1,leftWidth:0,leftWidthNoGallery:0,paddingLeft:0,paddingTop:0,positionedTracks:[],topHeight:0,topHeightNoGallery:0,width:0,metaTracks:[]},Vw.propTypes={canvasElement:N.exports.object,centerHeight:N.exports.number,centerWidth:N.exports.number,children:N.exports.array,disableTrackMenu:N.exports.bool,galleryDim:N.exports.number,height:N.exports.number,initialXDomain:N.exports.array,initialYDomain:N.exports.array,isShowGlobalMousePosition:N.exports.bool,isRangeSelection:N.exports.bool,leftWidth:N.exports.number,leftWidthNoGallery:N.exports.number,paddingLeft:N.exports.number,paddingTop:N.exports.number,metaTracks:N.exports.array,onMouseMoveZoom:N.exports.func,onNewTilesLoaded:N.exports.func.isRequired,onScalesChanged:N.exports.func.isRequired,pixiRenderer:N.exports.object.isRequired,pixiStage:N.exports.object.isRequired,pluginDataFetchers:N.exports.object,pluginTracks:N.exports.object,positionedTracks:N.exports.array,pubSub:N.exports.object.isRequired,setCentersFunction:N.exports.func,svgElement:N.exports.object.isRequired,theme:N.exports.symbol.isRequired,topHeight:N.exports.number,topHeightNoGallery:N.exports.number,viewOptions:N.exports.object,width:N.exports.number,xDomainLimits:N.exports.array,yDomainLimits:N.exports.array,valueScaleZoom:N.exports.bool,zoomable:N.exports.bool.isRequired,zoomDomain:N.exports.array};const qke=Bc(Nl(Vw));var Y$={exports:{}};/*! react-checkbox-tree - v1.8.0 | 2022 */(function(e,t){/*! For license information please see index.browser.js.LICENSE.txt */(function(n,i){e.exports=i(A.default)})(self,n=>(()=>{var i={4184:(s,u)=>{var c;(function(){var l={}.hasOwnProperty;function f(){for(var h=[],d=0;d<arguments.length;d++){var p=arguments[d];if(p){var m=typeof p;if(m==="string"||m==="number")h.push(p);else if(Array.isArray(p)){if(p.length){var g=f.apply(null,p);g&&h.push(g)}}else if(m==="object")if(p.toString===Object.prototype.toString)for(var v in p)l.call(p,v)&&p[v]&&h.push(v);else h.push(p.toString())}}return h.join(" ")}s.exports?(f.default=f,s.exports=f):(c=function(){return f}.apply(u,[]))===void 0||(s.exports=c)})()},8552:(s,u,c)=>{var l=c(852)(c(5639),"DataView");s.exports=l},1989:(s,u,c)=>{var l=c(1789),f=c(401),h=c(7667),d=c(1327),p=c(1866);function m(g){var v=-1,E=g==null?0:g.length;for(this.clear();++v<E;){var y=g[v];this.set(y[0],y[1])}}m.prototype.clear=l,m.prototype.delete=f,m.prototype.get=h,m.prototype.has=d,m.prototype.set=p,s.exports=m},8407:(s,u,c)=>{var l=c(7040),f=c(4125),h=c(2117),d=c(7518),p=c(4705);function m(g){var v=-1,E=g==null?0:g.length;for(this.clear();++v<E;){var y=g[v];this.set(y[0],y[1])}}m.prototype.clear=l,m.prototype.delete=f,m.prototype.get=h,m.prototype.has=d,m.prototype.set=p,s.exports=m},7071:(s,u,c)=>{var l=c(852)(c(5639),"Map");s.exports=l},3369:(s,u,c)=>{var l=c(4785),f=c(1285),h=c(6e3),d=c(9916),p=c(5265);function m(g){var v=-1,E=g==null?0:g.length;for(this.clear();++v<E;){var y=g[v];this.set(y[0],y[1])}}m.prototype.clear=l,m.prototype.delete=f,m.prototype.get=h,m.prototype.has=d,m.prototype.set=p,s.exports=m},3818:(s,u,c)=>{var l=c(852)(c(5639),"Promise");s.exports=l},8525:(s,u,c)=>{var l=c(852)(c(5639),"Set");s.exports=l},8668:(s,u,c)=>{var l=c(3369),f=c(619),h=c(2385);function d(p){var m=-1,g=p==null?0:p.length;for(this.__data__=new l;++m<g;)this.add(p[m])}d.prototype.add=d.prototype.push=f,d.prototype.has=h,s.exports=d},6384:(s,u,c)=>{var l=c(8407),f=c(7465),h=c(3779),d=c(7599),p=c(4758),m=c(4309);function g(v){var E=this.__data__=new l(v);this.size=E.size}g.prototype.clear=f,g.prototype.delete=h,g.prototype.get=d,g.prototype.has=p,g.prototype.set=m,s.exports=g},2705:(s,u,c)=>{var l=c(5639).Symbol;s.exports=l},1149:(s,u,c)=>{var l=c(5639).Uint8Array;s.exports=l},577:(s,u,c)=>{var l=c(852)(c(5639),"WeakMap");s.exports=l},4963:s=>{s.exports=function(u,c){for(var l=-1,f=u==null?0:u.length,h=0,d=[];++l<f;){var p=u[l];c(p,l,u)&&(d[h++]=p)}return d}},4636:(s,u,c)=>{var l=c(2545),f=c(5694),h=c(1469),d=c(4144),p=c(5776),m=c(6719),g=Object.prototype.hasOwnProperty;s.exports=function(v,E){var y=h(v),T=!y&&f(v),b=!y&&!T&&d(v),S=!y&&!T&&!b&&m(v),w=y||T||b||S,D=w?l(v.length,String):[],R=D.length;for(var M in v)!E&&!g.call(v,M)||w&&(M=="length"||b&&(M=="offset"||M=="parent")||S&&(M=="buffer"||M=="byteLength"||M=="byteOffset")||p(M,R))||D.push(M);return D}},2488:s=>{s.exports=function(u,c){for(var l=-1,f=c.length,h=u.length;++l<f;)u[h+l]=c[l];return u}},2908:s=>{s.exports=function(u,c){for(var l=-1,f=u==null?0:u.length;++l<f;)if(c(u[l],l,u))return!0;return!1}},8470:(s,u,c)=>{var l=c(7813);s.exports=function(f,h){for(var d=f.length;d--;)if(l(f[d][0],h))return d;return-1}},8866:(s,u,c)=>{var l=c(2488),f=c(1469);s.exports=function(h,d,p){var m=d(h);return f(h)?m:l(m,p(h))}},4239:(s,u,c)=>{var l=c(2705),f=c(9607),h=c(2333),d=l?l.toStringTag:void 0;s.exports=function(p){return p==null?p===void 0?"[object Undefined]":"[object Null]":d&&d in Object(p)?f(p):h(p)}},9454:(s,u,c)=>{var l=c(4239),f=c(7005);s.exports=function(h){return f(h)&&l(h)=="[object Arguments]"}},939:(s,u,c)=>{var l=c(2492),f=c(7005);s.exports=function h(d,p,m,g,v){return d===p||(d==null||p==null||!f(d)&&!f(p)?d!=d&&p!=p:l(d,p,m,g,h,v))}},2492:(s,u,c)=>{var l=c(6384),f=c(7114),h=c(8351),d=c(6096),p=c(4160),m=c(1469),g=c(4144),v=c(6719),E="[object Arguments]",y="[object Array]",T="[object Object]",b=Object.prototype.hasOwnProperty;s.exports=function(S,w,D,R,M,k){var L=m(S),$=m(w),P=L?y:p(S),B=$?y:p(w),X=(P=P==E?T:P)==T,ee=(B=B==E?T:B)==T,se=P==B;if(se&&g(S)){if(!g(w))return!1;L=!0,X=!1}if(se&&!X)return k||(k=new l),L||v(S)?f(S,w,D,R,M,k):h(S,w,P,D,R,M,k);if(!(1&D)){var fe=X&&b.call(S,"__wrapped__"),Z=ee&&b.call(w,"__wrapped__");if(fe||Z){var he=fe?S.value():S,j=Z?w.value():w;return k||(k=new l),M(he,j,D,R,k)}}return!!se&&(k||(k=new l),d(S,w,D,R,M,k))}},8458:(s,u,c)=>{var l=c(3560),f=c(5346),h=c(3218),d=c(346),p=/^\[object .+?Constructor\]$/,m=Function.prototype,g=Object.prototype,v=m.toString,E=g.hasOwnProperty,y=RegExp("^"+v.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");s.exports=function(T){return!(!h(T)||f(T))&&(l(T)?y:p).test(d(T))}},8749:(s,u,c)=>{var l=c(4239),f=c(1780),h=c(7005),d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Arguments]"]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object DataView]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d["[object Map]"]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1,s.exports=function(p){return h(p)&&f(p.length)&&!!d[l(p)]}},280:(s,u,c)=>{var l=c(5726),f=c(6916),h=Object.prototype.hasOwnProperty;s.exports=function(d){if(!l(d))return f(d);var p=[];for(var m in Object(d))h.call(d,m)&&m!="constructor"&&p.push(m);return p}},2545:s=>{s.exports=function(u,c){for(var l=-1,f=Array(u);++l<u;)f[l]=c(l);return f}},1717:s=>{s.exports=function(u){return function(c){return u(c)}}},4757:s=>{s.exports=function(u,c){return u.has(c)}},4429:(s,u,c)=>{var l=c(5639)["__core-js_shared__"];s.exports=l},7114:(s,u,c)=>{var l=c(8668),f=c(2908),h=c(4757);s.exports=function(d,p,m,g,v,E){var y=1&m,T=d.length,b=p.length;if(T!=b&&!(y&&b>T))return!1;var S=E.get(d),w=E.get(p);if(S&&w)return S==p&&w==d;var D=-1,R=!0,M=2&m?new l:void 0;for(E.set(d,p),E.set(p,d);++D<T;){var k=d[D],L=p[D];if(g)var $=y?g(L,k,D,p,d,E):g(k,L,D,d,p,E);if($!==void 0){if($)continue;R=!1;break}if(M){if(!f(p,function(P,B){if(!h(M,B)&&(k===P||v(k,P,m,g,E)))return M.push(B)})){R=!1;break}}else if(k!==L&&!v(k,L,m,g,E)){R=!1;break}}return E.delete(d),E.delete(p),R}},8351:(s,u,c)=>{var l=c(2705),f=c(1149),h=c(7813),d=c(7114),p=c(8776),m=c(1814),g=l?l.prototype:void 0,v=g?g.valueOf:void 0;s.exports=function(E,y,T,b,S,w,D){switch(T){case"[object DataView]":if(E.byteLength!=y.byteLength||E.byteOffset!=y.byteOffset)return!1;E=E.buffer,y=y.buffer;case"[object ArrayBuffer]":return!(E.byteLength!=y.byteLength||!w(new f(E),new f(y)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+E,+y);case"[object Error]":return E.name==y.name&&E.message==y.message;case"[object RegExp]":case"[object String]":return E==y+"";case"[object Map]":var R=p;case"[object Set]":var M=1&b;if(R||(R=m),E.size!=y.size&&!M)return!1;var k=D.get(E);if(k)return k==y;b|=2,D.set(E,y);var L=d(R(E),R(y),b,S,w,D);return D.delete(E),L;case"[object Symbol]":if(v)return v.call(E)==v.call(y)}return!1}},6096:(s,u,c)=>{var l=c(8234),f=Object.prototype.hasOwnProperty;s.exports=function(h,d,p,m,g,v){var E=1&p,y=l(h),T=y.length;if(T!=l(d).length&&!E)return!1;for(var b=T;b--;){var S=y[b];if(!(E?S in d:f.call(d,S)))return!1}var w=v.get(h),D=v.get(d);if(w&&D)return w==d&&D==h;var R=!0;v.set(h,d),v.set(d,h);for(var M=E;++b<T;){var k=h[S=y[b]],L=d[S];if(m)var $=E?m(L,k,S,d,h,v):m(k,L,S,h,d,v);if(!($===void 0?k===L||g(k,L,p,m,v):$)){R=!1;break}M||(M=S=="constructor")}if(R&&!M){var P=h.constructor,B=d.constructor;P==B||!("constructor"in h)||!("constructor"in d)||typeof P=="function"&&P instanceof P&&typeof B=="function"&&B instanceof B||(R=!1)}return v.delete(h),v.delete(d),R}},1957:(s,u,c)=>{var l=typeof c.g=="object"&&c.g&&c.g.Object===Object&&c.g;s.exports=l},8234:(s,u,c)=>{var l=c(8866),f=c(9551),h=c(3674);s.exports=function(d){return l(d,h,f)}},5050:(s,u,c)=>{var l=c(7019);s.exports=function(f,h){var d=f.__data__;return l(h)?d[typeof h=="string"?"string":"hash"]:d.map}},852:(s,u,c)=>{var l=c(8458),f=c(7801);s.exports=function(h,d){var p=f(h,d);return l(p)?p:void 0}},9607:(s,u,c)=>{var l=c(2705),f=Object.prototype,h=f.hasOwnProperty,d=f.toString,p=l?l.toStringTag:void 0;s.exports=function(m){var g=h.call(m,p),v=m[p];try{m[p]=void 0;var E=!0}catch{}var y=d.call(m);return E&&(g?m[p]=v:delete m[p]),y}},9551:(s,u,c)=>{var l=c(4963),f=c(479),h=Object.prototype.propertyIsEnumerable,d=Object.getOwnPropertySymbols,p=d?function(m){return m==null?[]:(m=Object(m),l(d(m),function(g){return h.call(m,g)}))}:f;s.exports=p},4160:(s,u,c)=>{var l=c(8552),f=c(7071),h=c(3818),d=c(8525),p=c(577),m=c(4239),g=c(346),v="[object Map]",E="[object Promise]",y="[object Set]",T="[object WeakMap]",b="[object DataView]",S=g(l),w=g(f),D=g(h),R=g(d),M=g(p),k=m;(l&&k(new l(new ArrayBuffer(1)))!=b||f&&k(new f)!=v||h&&k(h.resolve())!=E||d&&k(new d)!=y||p&&k(new p)!=T)&&(k=function(L){var $=m(L),P=$=="[object Object]"?L.constructor:void 0,B=P?g(P):"";if(B)switch(B){case S:return b;case w:return v;case D:return E;case R:return y;case M:return T}return $}),s.exports=k},7801:s=>{s.exports=function(u,c){return u?.[c]}},1789:(s,u,c)=>{var l=c(4536);s.exports=function(){this.__data__=l?l(null):{},this.size=0}},401:s=>{s.exports=function(u){var c=this.has(u)&&delete this.__data__[u];return this.size-=c?1:0,c}},7667:(s,u,c)=>{var l=c(4536),f=Object.prototype.hasOwnProperty;s.exports=function(h){var d=this.__data__;if(l){var p=d[h];return p==="__lodash_hash_undefined__"?void 0:p}return f.call(d,h)?d[h]:void 0}},1327:(s,u,c)=>{var l=c(4536),f=Object.prototype.hasOwnProperty;s.exports=function(h){var d=this.__data__;return l?d[h]!==void 0:f.call(d,h)}},1866:(s,u,c)=>{var l=c(4536);s.exports=function(f,h){var d=this.__data__;return this.size+=this.has(f)?0:1,d[f]=l&&h===void 0?"__lodash_hash_undefined__":h,this}},5776:s=>{var u=/^(?:0|[1-9]\d*)$/;s.exports=function(c,l){var f=typeof c;return!!(l=l??9007199254740991)&&(f=="number"||f!="symbol"&&u.test(c))&&c>-1&&c%1==0&&c<l}},7019:s=>{s.exports=function(u){var c=typeof u;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?u!=="__proto__":u===null}},5346:(s,u,c)=>{var l,f=c(4429),h=(l=/[^.]+$/.exec(f&&f.keys&&f.keys.IE_PROTO||""))?"Symbol(src)_1."+l:"";s.exports=function(d){return!!h&&h in d}},5726:s=>{var u=Object.prototype;s.exports=function(c){var l=c&&c.constructor;return c===(typeof l=="function"&&l.prototype||u)}},7040:s=>{s.exports=function(){this.__data__=[],this.size=0}},4125:(s,u,c)=>{var l=c(8470),f=Array.prototype.splice;s.exports=function(h){var d=this.__data__,p=l(d,h);return!(p<0||(p==d.length-1?d.pop():f.call(d,p,1),--this.size,0))}},2117:(s,u,c)=>{var l=c(8470);s.exports=function(f){var h=this.__data__,d=l(h,f);return d<0?void 0:h[d][1]}},7518:(s,u,c)=>{var l=c(8470);s.exports=function(f){return l(this.__data__,f)>-1}},4705:(s,u,c)=>{var l=c(8470);s.exports=function(f,h){var d=this.__data__,p=l(d,f);return p<0?(++this.size,d.push([f,h])):d[p][1]=h,this}},4785:(s,u,c)=>{var l=c(1989),f=c(8407),h=c(7071);s.exports=function(){this.size=0,this.__data__={hash:new l,map:new(h||f),string:new l}}},1285:(s,u,c)=>{var l=c(5050);s.exports=function(f){var h=l(this,f).delete(f);return this.size-=h?1:0,h}},6e3:(s,u,c)=>{var l=c(5050);s.exports=function(f){return l(this,f).get(f)}},9916:(s,u,c)=>{var l=c(5050);s.exports=function(f){return l(this,f).has(f)}},5265:(s,u,c)=>{var l=c(5050);s.exports=function(f,h){var d=l(this,f),p=d.size;return d.set(f,h),this.size+=d.size==p?0:1,this}},8776:s=>{s.exports=function(u){var c=-1,l=Array(u.size);return u.forEach(function(f,h){l[++c]=[h,f]}),l}},4536:(s,u,c)=>{var l=c(852)(Object,"create");s.exports=l},6916:(s,u,c)=>{var l=c(5569)(Object.keys,Object);s.exports=l},1167:(s,u,c)=>{s=c.nmd(s);var l=c(1957),f=u&&!u.nodeType&&u,h=f&&s&&!s.nodeType&&s,d=h&&h.exports===f&&l.process,p=function(){try{return h&&h.require&&h.require("util").types||d&&d.binding&&d.binding("util")}catch{}}();s.exports=p},2333:s=>{var u=Object.prototype.toString;s.exports=function(c){return u.call(c)}},5569:s=>{s.exports=function(u,c){return function(l){return u(c(l))}}},5639:(s,u,c)=>{var l=c(1957),f=typeof self=="object"&&self&&self.Object===Object&&self,h=l||f||Function("return this")();s.exports=h},619:s=>{s.exports=function(u){return this.__data__.set(u,"__lodash_hash_undefined__"),this}},2385:s=>{s.exports=function(u){return this.__data__.has(u)}},1814:s=>{s.exports=function(u){var c=-1,l=Array(u.size);return u.forEach(function(f){l[++c]=f}),l}},7465:(s,u,c)=>{var l=c(8407);s.exports=function(){this.__data__=new l,this.size=0}},3779:s=>{s.exports=function(u){var c=this.__data__,l=c.delete(u);return this.size=c.size,l}},7599:s=>{s.exports=function(u){return this.__data__.get(u)}},4758:s=>{s.exports=function(u){return this.__data__.has(u)}},4309:(s,u,c)=>{var l=c(8407),f=c(7071),h=c(3369);s.exports=function(d,p){var m=this.__data__;if(m instanceof l){var g=m.__data__;if(!f||g.length<199)return g.push([d,p]),this.size=++m.size,this;m=this.__data__=new h(g)}return m.set(d,p),this.size=m.size,this}},346:s=>{var u=Function.prototype.toString;s.exports=function(c){if(c!=null){try{return u.call(c)}catch{}try{return c+""}catch{}}return""}},7813:s=>{s.exports=function(u,c){return u===c||u!=u&&c!=c}},5694:(s,u,c)=>{var l=c(9454),f=c(7005),h=Object.prototype,d=h.hasOwnProperty,p=h.propertyIsEnumerable,m=l(function(){return arguments}())?l:function(g){return f(g)&&d.call(g,"callee")&&!p.call(g,"callee")};s.exports=m},1469:s=>{var u=Array.isArray;s.exports=u},8612:(s,u,c)=>{var l=c(3560),f=c(1780);s.exports=function(h){return h!=null&&f(h.length)&&!l(h)}},4144:(s,u,c)=>{s=c.nmd(s);var l=c(5639),f=c(5062),h=u&&!u.nodeType&&u,d=h&&s&&!s.nodeType&&s,p=d&&d.exports===h?l.Buffer:void 0,m=(p?p.isBuffer:void 0)||f;s.exports=m},8446:(s,u,c)=>{var l=c(939);s.exports=function(f,h){return l(f,h)}},3560:(s,u,c)=>{var l=c(4239),f=c(3218);s.exports=function(h){if(!f(h))return!1;var d=l(h);return d=="[object Function]"||d=="[object GeneratorFunction]"||d=="[object AsyncFunction]"||d=="[object Proxy]"}},1780:s=>{s.exports=function(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=9007199254740991}},3218:s=>{s.exports=function(u){var c=typeof u;return u!=null&&(c=="object"||c=="function")}},7005:s=>{s.exports=function(u){return u!=null&&typeof u=="object"}},6719:(s,u,c)=>{var l=c(8749),f=c(1717),h=c(1167),d=h&&h.isTypedArray,p=d?f(d):l;s.exports=p},3674:(s,u,c)=>{var l=c(4636),f=c(280),h=c(8612);s.exports=function(d){return h(d)?l(d):f(d)}},8306:(s,u,c)=>{var l=c(3369);function f(h,d){if(typeof h!="function"||d!=null&&typeof d!="function")throw new TypeError("Expected a function");var p=function(){var m=arguments,g=d?d.apply(this,m):m[0],v=p.cache;if(v.has(g))return v.get(g);var E=h.apply(this,m);return p.cache=v.set(g,E)||v,E};return p.cache=new(f.Cache||l),p}f.Cache=l,s.exports=f},479:s=>{s.exports=function(){return[]}},5062:s=>{s.exports=function(){return!1}},2703:(s,u,c)=>{var l=c(414);function f(){}function h(){}h.resetWarningCache=f,s.exports=function(){function d(g,v,E,y,T,b){if(b!==l){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}function p(){return d}d.isRequired=d;var m={array:d,bigint:d,bool:d,func:d,number:d,object:d,string:d,symbol:d,any:d,arrayOf:p,element:d,elementType:d,instanceOf:p,node:d,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:h,resetWarningCache:f};return m.PropTypes=m,m}},5697:(s,u,c)=>{s.exports=c(2703)()},414:s=>{s.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9787:s=>{s.exports=n}},r={};function a(s){var u=r[s];if(u!==void 0)return u.exports;var c=r[s]={id:s,loaded:!1,exports:{}};return i[s](c,c.exports,a),c.loaded=!0,c.exports}a.n=s=>{var u=s&&s.__esModule?()=>s.default:()=>s;return a.d(u,{a:u}),u},a.d=(s,u)=>{for(var c in u)a.o(u,c)&&!a.o(s,c)&&Object.defineProperty(s,c,{enumerable:!0,get:u[c]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(s,u)=>Object.prototype.hasOwnProperty.call(s,u),a.r=s=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},a.nmd=s=>(s.paths=[],s.children||(s.children=[]),s);var o={};return(()=>{a.r(o),a.d(o,{default:()=>Fr,expandNodesToLevel:()=>Br});var s=a(4184),u=a.n(s),c=a(8446),l=a.n(c),f=a(8306),h=a.n(f);let d=(Ie=21)=>crypto.getRandomValues(new Uint8Array(Ie)).reduce((ge,W)=>ge+((W&=63)<36?W.toString(36):W<62?(W-26).toString(36).toUpperCase():W>62?"-":"_"),"");var p=a(5697),m=a.n(p),g=a(9787),v=a.n(g);function E(Ie){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},E(Ie)}var y=["children","title"];function T(){return T=Object.assign?Object.assign.bind():function(Ie){for(var ge=1;ge<arguments.length;ge++){var W=arguments[ge];for(var q in W)Object.prototype.hasOwnProperty.call(W,q)&&(Ie[q]=W[q])}return Ie},T.apply(this,arguments)}function b(Ie,ge){if(!(Ie instanceof ge))throw new TypeError("Cannot call a class as a function")}function S(Ie,ge){for(var W=0;W<ge.length;W++){var q=ge[W];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(Ie,q.key,q)}}function w(Ie,ge){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,q){return W.__proto__=q,W},w(Ie,ge)}function D(Ie,ge){if(ge&&(E(ge)==="object"||typeof ge=="function"))return ge;if(ge!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}(Ie)}function R(Ie){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ge){return ge.__proto__||Object.getPrototypeOf(ge)},R(Ie)}function M(Ie,ge,W){return ge in Ie?Object.defineProperty(Ie,ge,{value:W,enumerable:!0,configurable:!0,writable:!0}):Ie[ge]=W,Ie}var k=function(Ie){(function(be,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");be.prototype=Object.create(de&&de.prototype,{constructor:{value:be,writable:!0,configurable:!0}}),Object.defineProperty(be,"prototype",{writable:!1}),de&&w(be,de)})(De,Ie);var ge,W,q,me,Se=(q=De,me=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var be,de=R(q);if(me){var ye=R(this).constructor;be=Reflect.construct(de,arguments,ye)}else be=de.apply(this,arguments);return D(this,be)});function De(){return b(this,De),Se.apply(this,arguments)}return ge=De,(W=[{key:"render",value:function(){var be=this.props,de=be.children,ye=be.title,z=function(U,re){if(U==null)return{};var _e,Ce,Ge=function(ct,Tt){if(ct==null)return{};var Ht,pt,Nt={},Qt=Object.keys(ct);for(pt=0;pt<Qt.length;pt++)Ht=Qt[pt],Tt.indexOf(Ht)>=0||(Nt[Ht]=ct[Ht]);return Nt}(U,re);if(Object.getOwnPropertySymbols){var ze=Object.getOwnPropertySymbols(U);for(Ce=0;Ce<ze.length;Ce++)_e=ze[Ce],re.indexOf(_e)>=0||Object.prototype.propertyIsEnumerable.call(U,_e)&&(Ge[_e]=U[_e])}return Ge}(be,y);return v().createElement("button",T({"aria-label":ye,title:ye,type:"button"},z),de)}}])&&S(ge.prototype,W),Object.defineProperty(ge,"prototype",{writable:!1}),De}(v().PureComponent);M(k,"propTypes",{children:m().node.isRequired,title:m().string}),M(k,"defaultProps",{title:null});const L=k,$={ALL:"all",PARENT:"parent",LEAF:"leaf"};function P(Ie){this.message=Ie,this.stack=Error().stack}P.prototype=Object.create(Error.prototype),P.prototype.name="CheckboxTreeError";const B=P;function X(Ie,ge){var W=Object.keys(Ie);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(Ie);ge&&(q=q.filter(function(me){return Object.getOwnPropertyDescriptor(Ie,me).enumerable})),W.push.apply(W,q)}return W}function ee(Ie,ge,W){return ge in Ie?Object.defineProperty(Ie,ge,{value:W,enumerable:!0,configurable:!0,writable:!0}):Ie[ge]=W,Ie}function se(Ie,ge){if(!(Ie instanceof ge))throw new TypeError("Cannot call a class as a function")}function fe(Ie,ge){for(var W=0;W<ge.length;W++){var q=ge[W];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(Ie,q.key,q)}}var Z=$;const he=function(){function Ie(q){var me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};se(this,Ie),this.props=q,this.flatNodes=me}var ge,W;return ge=Ie,W=[{key:"setProps",value:function(q){this.props=q}},{key:"clone",value:function(){var q=this,me={};return Object.keys(this.flatNodes).forEach(function(Se){var De=q.flatNodes[Se];me[Se]=function(be){for(var de=1;de<arguments.length;de++){var ye=arguments[de]!=null?arguments[de]:{};de%2?X(Object(ye),!0).forEach(function(z){ee(be,z,ye[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors(ye)):X(Object(ye)).forEach(function(z){Object.defineProperty(be,z,Object.getOwnPropertyDescriptor(ye,z))})}return be}({},De)}),new Ie(this.props,me)}},{key:"getNode",value:function(q){return this.flatNodes[q]}},{key:"reset",value:function(){this.flatNodes={}}},{key:"flattenNodes",value:function(q){var me=this,Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},De=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(Array.isArray(q)&&q.length!==0){var be=this.props,de=be.disabled,ye=be.noCascade;q.forEach(function(z,U){var re=me.nodeHasChildren(z);if(me.flatNodes[z.value]!==void 0)throw new B("Duplicate value '".concat(z.value,"' detected. All node values must be unique."));me.flatNodes[z.value]={label:z.label,value:z.value,children:z.children,parent:Se,isChild:Se.value!==void 0,isParent:re,isLeaf:!re,showCheckbox:z.showCheckbox===void 0||z.showCheckbox,disabled:me.getDisabledState(z,Se,de,ye),treeDepth:De,index:U},me.flattenNodes(z.children,z,De+1)})}}},{key:"nodeHasChildren",value:function(q){return Array.isArray(q.children)}},{key:"getDisabledState",value:function(q,me,Se,De){return!!Se||!(De||!me.disabled)||Boolean(q.disabled)}},{key:"deserializeLists",value:function(q){var me=this,Se=["checked","expanded"];Object.keys(this.flatNodes).forEach(function(De){Se.forEach(function(be){me.flatNodes[De][be]=!1})}),Se.forEach(function(De){q[De].forEach(function(be){me.flatNodes[be]!==void 0&&(me.flatNodes[be][De]=!0)})})}},{key:"serializeList",value:function(q){var me=this,Se=[];return Object.keys(this.flatNodes).forEach(function(De){me.flatNodes[De][q]&&Se.push(De)}),Se}},{key:"expandAllNodes",value:function(q){var me=this;return Object.keys(this.flatNodes).forEach(function(Se){me.flatNodes[Se].isParent&&(me.flatNodes[Se].expanded=q)}),this}},{key:"toggleChecked",value:function(q,me,Se,De){var be=this,de=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],ye=this.flatNodes[q.value],z=[Z.PARENT,Z.ALL].indexOf(Se)>-1,U=[Z.LEAF,Z.ALL].indexOf(Se)>-1;if(ye.isLeaf||De){if(q.disabled)return this;this.toggleNode(q.value,"checked",me)}else(z||ye.children.length===0)&&this.toggleNode(q.value,"checked",me),U&&ye.children.forEach(function(re){be.toggleChecked(re,me,Se,De,!1)});return de&&!De&&ye.isChild&&z&&this.toggleParentStatus(ye.parent,Se),this}},{key:"toggleParentStatus",value:function(q,me){var Se=this.flatNodes[q.value];Se.isChild?(me===Z.ALL&&this.toggleNode(q.value,"checked",this.isEveryChildChecked(Se)),this.toggleParentStatus(Se.parent,me)):this.toggleNode(q.value,"checked",this.isEveryChildChecked(Se))}},{key:"isEveryChildChecked",value:function(q){var me=this;return q.children.every(function(Se){return me.getNode(Se.value).checked})}},{key:"toggleNode",value:function(q,me,Se){return this.flatNodes[q][me]=Se,this}}],W&&fe(ge.prototype,W),Object.defineProperty(ge,"prototype",{writable:!1}),Ie}();function j(Ie){return j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},j(Ie)}function H(){return H=Object.assign?Object.assign.bind():function(Ie){for(var ge=1;ge<arguments.length;ge++){var W=arguments[ge];for(var q in W)Object.prototype.hasOwnProperty.call(W,q)&&(Ie[q]=W[q])}return Ie},H.apply(this,arguments)}function G(Ie,ge){var W=Object.keys(Ie);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(Ie);ge&&(q=q.filter(function(me){return Object.getOwnPropertyDescriptor(Ie,me).enumerable})),W.push.apply(W,q)}return W}function K(Ie,ge){if(!(Ie instanceof ge))throw new TypeError("Cannot call a class as a function")}function ae(Ie,ge){for(var W=0;W<ge.length;W++){var q=ge[W];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(Ie,q.key,q)}}function pe(Ie,ge){return pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,q){return W.__proto__=q,W},pe(Ie,ge)}function we(Ie,ge){if(ge&&(j(ge)==="object"||typeof ge=="function"))return ge;if(ge!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(W){if(W===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return W}(Ie)}function Ee(Ie){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ge){return ge.__proto__||Object.getPrototypeOf(ge)},Ee(Ie)}function xe(Ie,ge,W){return ge in Ie?Object.defineProperty(Ie,ge,{value:W,enumerable:!0,configurable:!0,writable:!0}):Ie[ge]=W,Ie}var He=function(Ie){(function(be,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");be.prototype=Object.create(de&&de.prototype,{constructor:{value:be,writable:!0,configurable:!0}}),Object.defineProperty(be,"prototype",{writable:!1}),de&&pe(be,de)})(De,Ie);var ge,W,q,me,Se=(q=De,me=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var be,de=Ee(q);if(me){var ye=Ee(this).constructor;be=Reflect.construct(de,arguments,ye)}else be=de.apply(this,arguments);return we(this,be)});function De(){return K(this,De),Se.apply(this,arguments)}return ge=De,W=[{key:"componentDidMount",value:function(){this.updateDeterminateProperty()}},{key:"componentDidUpdate",value:function(){this.updateDeterminateProperty()}},{key:"updateDeterminateProperty",value:function(){var be=this.props.indeterminate;this.checkbox.indeterminate=be}},{key:"render",value:function(){var be=this,de=function(ye){for(var z=1;z<arguments.length;z++){var U=arguments[z]!=null?arguments[z]:{};z%2?G(Object(U),!0).forEach(function(re){xe(ye,re,U[re])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ye,Object.getOwnPropertyDescriptors(U)):G(Object(U)).forEach(function(re){Object.defineProperty(ye,re,Object.getOwnPropertyDescriptor(U,re))})}return ye}({},this.props);return delete de.indeterminate,v().createElement("input",H({},de,{ref:function(ye){be.checkbox=ye},type:"checkbox"}))}}],W&&ae(ge.prototype,W),Object.defineProperty(ge,"prototype",{writable:!1}),De}(v().PureComponent);xe(He,"propTypes",{indeterminate:m().bool}),xe(He,"defaultProps",{indeterminate:!1});const ke=He,Ye=m().shape({check:m().node,uncheck:m().node,halfCheck:m().node,expandClose:m().node,expandOpen:m().node,expandAll:m().node,collapseAll:m().node,parentClose:m().node,parentOpen:m().node,leaf:m().node}),je=m().shape({collapseAll:m().string.isRequired,expandAll:m().string.isRequired,toggle:m().string.isRequired});function dt(Ie){return dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},dt(Ie)}function st(Ie,ge){for(var W=0;W<ge.length;W++){var q=ge[W];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(Ie,q.key,q)}}function qe(Ie,ge){return qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,q){return W.__proto__=q,W},qe(Ie,ge)}function bt(Ie,ge){if(ge&&(dt(ge)==="object"||typeof ge=="function"))return ge;if(ge!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yt(Ie)}function yt(Ie){if(Ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie}function Bt(Ie){return Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ge){return ge.__proto__||Object.getPrototypeOf(ge)},Bt(Ie)}function On(Ie,ge,W){return ge in Ie?Object.defineProperty(Ie,ge,{value:W,enumerable:!0,configurable:!0,writable:!0}):Ie[ge]=W,Ie}var gt=function(Ie){(function(be,de){if(typeof de!="function"&&de!==null)throw new TypeError("Super expression must either be null or a function");be.prototype=Object.create(de&&de.prototype,{constructor:{value:be,writable:!0,configurable:!0}}),Object.defineProperty(be,"prototype",{writable:!1}),de&&qe(be,de)})(De,Ie);var ge,W,q,me,Se=(q=De,me=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var be,de=Bt(q);if(me){var ye=Bt(this).constructor;be=Reflect.construct(de,arguments,ye)}else be=de.apply(this,arguments);return bt(this,be)});function De(be){var de;return function(ye,z){if(!(ye instanceof z))throw new TypeError("Cannot call a class as a function")}(this,De),(de=Se.call(this,be)).onCheck=de.onCheck.bind(yt(de)),de.onCheckboxKeyPress=de.onCheckboxKeyPress.bind(yt(de)),de.onCheckboxKeyUp=de.onCheckboxKeyUp.bind(yt(de)),de.onClick=de.onClick.bind(yt(de)),de.onExpand=de.onExpand.bind(yt(de)),de}return ge=De,(W=[{key:"onCheck",value:function(){var be=this.props,de=be.value;(0,be.onCheck)({value:de,checked:this.getCheckState({toggle:!0})})}},{key:"onCheckboxKeyPress",value:function(be){be.which===32&&be.preventDefault()}},{key:"onCheckboxKeyUp",value:function(be){var de=be.keyCode;[13,32].includes(de)&&this.onCheck()}},{key:"onClick",value:function(){var be=this.props,de=be.expandOnClick,ye=be.isParent,z=be.value,U=be.onClick;ye&&de&&this.onExpand(),U({value:z,checked:this.getCheckState({toggle:!1})})}},{key:"onExpand",value:function(){var be=this.props,de=be.expanded,ye=be.value;(0,be.onExpand)({value:ye,expanded:!de})}},{key:"getCheckState",value:function(be){var de=be.toggle,ye=this.props,z=ye.checked,U=ye.optimisticToggle;return!(z!==0||!de)||z===1&&!de||z===2&&U}},{key:"renderCollapseButton",value:function(){var be=this.props,de=be.expandDisabled,ye=be.isLeaf,z=be.lang;return ye?v().createElement("span",{className:"rct-collapse"},v().createElement("span",{className:"rct-icon"})):v().createElement(L,{className:"rct-collapse rct-collapse-btn",disabled:de,title:z.toggle,onClick:this.onExpand},this.renderCollapseIcon())}},{key:"renderCollapseIcon",value:function(){var be=this.props,de=be.expanded,ye=be.icons,z=ye.expandClose,U=ye.expandOpen;return de?U:z}},{key:"renderCheckboxIcon",value:function(){var be=this.props,de=be.checked,ye=be.icons,z=ye.uncheck,U=ye.check,re=ye.halfCheck;return de===0?z:de===1?U:re}},{key:"renderNodeIcon",value:function(){var be=this.props,de=be.expanded,ye=be.icon,z=be.icons,U=z.leaf,re=z.parentClose,_e=z.parentOpen,Ce=be.isLeaf;return ye!==null?ye:Ce?U:de?_e:re}},{key:"renderBareLabel",value:function(be){var de=this.props,ye=de.onClick,z=de.title,U=ye!==null;return v().createElement("span",{className:"rct-bare-label",title:z},U?v().createElement("span",{className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"button",tabIndex:0},be):be)}},{key:"renderCheckboxLabel",value:function(be){var de=this.props,ye=de.checked,z=de.disabled,U=de.title,re=de.treeId,_e=de.value,Ce=de.onClick!==null,Ge="".concat(re,"-").concat(String(_e).split(" ").join("_")),ze=[v().createElement("label",{key:0,htmlFor:Ge,title:U},v().createElement(ke,{checked:ye===1,disabled:z,id:Ge,indeterminate:ye===2,onClick:this.onCheck,onChange:function(){}}),v().createElement("span",{"aria-checked":ye===1,"aria-disabled":z,className:"rct-checkbox",role:"checkbox",tabIndex:0,onKeyPress:this.onCheckboxKeyPress,onKeyUp:this.onCheckboxKeyUp},this.renderCheckboxIcon()),Ce?null:be)];return Ce&&ze.push(v().createElement("span",{key:1,className:"rct-node-clickable",onClick:this.onClick,onKeyPress:this.onClick,role:"link",tabIndex:0},be)),ze}},{key:"renderLabel",value:function(){var be=this.props,de=be.label,ye=be.showCheckbox,z=[be.showNodeIcon?v().createElement("span",{key:0,className:"rct-node-icon"},this.renderNodeIcon()):null,v().createElement("span",{key:1,className:"rct-title"},de)];return ye?this.renderCheckboxLabel(z):this.renderBareLabel(z)}},{key:"renderChildren",value:function(){return this.props.expanded?this.props.children:null}},{key:"render",value:function(){var be=this.props,de=be.className,ye=be.disabled,z=be.expanded,U=be.isLeaf,re=u()({"rct-node":!0,"rct-node-leaf":U,"rct-node-parent":!U,"rct-node-expanded":!U&&z,"rct-node-collapsed":!U&&!z,"rct-disabled":ye},de);return v().createElement("li",{className:re},v().createElement("span",{className:"rct-text"},this.renderCollapseButton(),this.renderLabel()),this.renderChildren())}}])&&st(ge.prototype,W),Object.defineProperty(ge,"prototype",{writable:!1}),De}(v().PureComponent);On(gt,"propTypes",{checked:m().number.isRequired,disabled:m().bool.isRequired,expandDisabled:m().bool.isRequired,expanded:m().bool.isRequired,icons:Ye.isRequired,isLeaf:m().bool.isRequired,isParent:m().bool.isRequired,label:m().node.isRequired,lang:je.isRequired,optimisticToggle:m().bool.isRequired,showNodeIcon:m().bool.isRequired,treeId:m().string.isRequired,value:m().oneOfType([m().string,m().number]).isRequired,onCheck:m().func.isRequired,onExpand:m().func.isRequired,children:m().node,className:m().string,expandOnClick:m().bool,icon:m().node,showCheckbox:m().bool,title:m().string,onClick:m().func}),On(gt,"defaultProps",{children:null,className:null,expandOnClick:!1,icon:null,showCheckbox:!0,title:null,onClick:function(){}});const Oe=gt,ne=m().oneOfType([m().arrayOf(m().string),m().arrayOf(m().number)]);function oe(Ie,ge){var W=Object.keys(Ie);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(Ie);ge&&(q=q.filter(function(me){return Object.getOwnPropertyDescriptor(Ie,me).enumerable})),W.push.apply(W,q)}return W}function Te(Ie){for(var ge=1;ge<arguments.length;ge++){var W=arguments[ge]!=null?arguments[ge]:{};ge%2?oe(Object(W),!0).forEach(function(q){I(Ie,q,W[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors(W)):oe(Object(W)).forEach(function(q){Object.defineProperty(Ie,q,Object.getOwnPropertyDescriptor(W,q))})}return Ie}function I(Ie,ge,W){return ge in Ie?Object.defineProperty(Ie,ge,{value:W,enumerable:!0,configurable:!0,writable:!0}):Ie[ge]=W,Ie}var _={label:m().node.isRequired,value:m().oneOfType([m().string,m().number]).isRequired,disabled:m().bool,icon:m().node,showCheckbox:m().bool,title:m().string};const C=m().oneOfType([m().shape(_),m().shape(Te(Te({},_),{},{children:m().arrayOf(_).isRequired}))]);function F(Ie){return F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ge){return typeof ge}:function(ge){return ge&&typeof Symbol=="function"&&ge.constructor===Symbol&&ge!==Symbol.prototype?"symbol":typeof ge},F(Ie)}function te(Ie,ge){var W=Object.keys(Ie);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(Ie);ge&&(q=q.filter(function(me){return Object.getOwnPropertyDescriptor(Ie,me).enumerable})),W.push.apply(W,q)}return W}function le(Ie){for(var ge=1;ge<arguments.length;ge++){var W=arguments[ge]!=null?arguments[ge]:{};ge%2?te(Object(W),!0).forEach(function(q){ot(Ie,q,W[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ie,Object.getOwnPropertyDescriptors(W)):te(Object(W)).forEach(function(q){Object.defineProperty(Ie,q,Object.getOwnPropertyDescriptor(W,q))})}return Ie}function ve(Ie,ge){for(var W=0;W<ge.length;W++){var q=ge[W];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(Ie,q.key,q)}}function Ue(Ie,ge){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,q){return W.__proto__=q,W},Ue(Ie,ge)}function We(Ie,ge){if(ge&&(F(ge)==="object"||typeof ge=="function"))return ge;if(ge!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nt(Ie)}function nt(Ie){if(Ie===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ie}function Qe(Ie){return Qe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(ge){return ge.__proto__||Object.getPrototypeOf(ge)},Qe(Ie)}function ot(Ie,ge,W){return ge in Ie?Object.defineProperty(Ie,ge,{value:W,enumerable:!0,configurable:!0,writable:!0}):Ie[ge]=W,Ie}var xn=function(Ie){(function(de,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function");de.prototype=Object.create(ye&&ye.prototype,{constructor:{value:de,writable:!0,configurable:!0}}),Object.defineProperty(de,"prototype",{writable:!1}),ye&&Ue(de,ye)})(be,Ie);var ge,W,q,me,Se,De=(me=be,Se=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var de,ye=Qe(me);if(Se){var z=Qe(this).constructor;de=Reflect.construct(ye,arguments,z)}else de=ye.apply(this,arguments);return We(this,de)});function be(de){var ye;(function(U,re){if(!(U instanceof re))throw new TypeError("Cannot call a class as a function")})(this,be),ye=De.call(this,de);var z=new he(de);return z.flattenNodes(de.nodes),z.deserializeLists({checked:de.checked,expanded:de.expanded}),ye.state={id:de.id||"rct-".concat(d()),model:z,prevProps:de},ye.onCheck=ye.onCheck.bind(nt(ye)),ye.onExpand=ye.onExpand.bind(nt(ye)),ye.onNodeClick=ye.onNodeClick.bind(nt(ye)),ye.onExpandAll=ye.onExpandAll.bind(nt(ye)),ye.onCollapseAll=ye.onCollapseAll.bind(nt(ye)),ye.combineMemorized=h()(function(U,re){return le(le({},U),re)}).bind(nt(ye)),ye}return ge=be,W=[{key:"onCheck",value:function(de){var ye=this.props,z=ye.checkModel,U=ye.noCascade,re=ye.onCheck,_e=this.state.model.clone(),Ce=_e.getNode(de.value);_e.toggleChecked(de,de.checked,z,U),re(_e.serializeList("checked"),le(le({},Ce),de))}},{key:"onExpand",value:function(de){var ye=this.props.onExpand,z=this.state.model.clone(),U=z.getNode(de.value);z.toggleNode(de.value,"expanded",de.expanded),ye(z.serializeList("expanded"),le(le({},U),de))}},{key:"onNodeClick",value:function(de){(0,this.props.onClick)(le(le({},this.state.model.getNode(de.value)),de))}},{key:"onExpandAll",value:function(){this.expandAllNodes()}},{key:"onCollapseAll",value:function(){this.expandAllNodes(!1)}},{key:"expandAllNodes",value:function(){var de=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],ye=this.props.onExpand;ye(this.state.model.clone().expandAllNodes(de).serializeList("expanded"))}},{key:"determineShallowCheckState",value:function(de,ye){var z=this.state.model.getNode(de.value);return z.isLeaf||ye||de.children.length===0?z.checked?1:0:this.isEveryChildChecked(de)?1:this.isSomeChildChecked(de)?2:0}},{key:"isEveryChildChecked",value:function(de){var ye=this;return de.children.every(function(z){return ye.state.model.getNode(z.value).checkState===1})}},{key:"isSomeChildChecked",value:function(de){var ye=this;return de.children.some(function(z){return ye.state.model.getNode(z.value).checkState>0})}},{key:"renderTreeNodes",value:function(de){var ye=this,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},U=this.props,re=U.expandDisabled,_e=U.expandOnClick,Ce=U.icons,Ge=U.lang,ze=U.noCascade,ct=U.onClick,Tt=U.onlyLeafCheckboxes,Ht=U.optimisticToggle,pt=U.showNodeTitle,Nt=U.showNodeIcon,Qt=this.state,ht=Qt.id,Ft=Qt.model,Jt=be.defaultProps.icons,nn=de.map(function(An){var Hr=An.value,$e=Ft.getNode(An.value),et=$e.isParent?ye.renderTreeNodes(An.children,An):null;$e.checkState=ye.determineShallowCheckState(An,ze);var Dt=Tt?$e.isLeaf:$e.showCheckbox;return!z.value||Ft.getNode(z.value).expanded?v().createElement(Oe,{key:Hr,checked:$e.checkState,className:An.className,disabled:$e.disabled,expandDisabled:re,expandOnClick:_e,expanded:$e.expanded,icon:An.icon,icons:ye.combineMemorized(Jt,Ce),label:An.label,lang:Ge,optimisticToggle:Ht,isLeaf:$e.isLeaf,isParent:$e.isParent,showCheckbox:Dt,showNodeIcon:Nt,title:pt?An.title||An.label:An.title,treeId:ht,value:An.value,onCheck:ye.onCheck,onClick:ct&&ye.onNodeClick,onExpand:ye.onExpand},et):null});return v().createElement("ol",null,nn)}},{key:"renderExpandAll",value:function(){var de=this.props,ye=de.icons,z=ye.expandAll,U=ye.collapseAll,re=de.lang;return de.showExpandAll?v().createElement("div",{className:"rct-options"},v().createElement(L,{className:"rct-option rct-option-expand-all",title:re.expandAll,onClick:this.onExpandAll},z),v().createElement(L,{className:"rct-option rct-option-collapse-all",title:re.collapseAll,onClick:this.onCollapseAll},U)):null}},{key:"renderHiddenInput",value:function(){var de=this.props,ye=de.name,z=de.nameAsArray;return ye===void 0?null:z?this.renderArrayHiddenInput():this.renderJoinedHiddenInput()}},{key:"renderArrayHiddenInput",value:function(){var de=this.props,ye=de.checked,z=de.name;return ye.map(function(U){var re="".concat(z,"[]");return v().createElement("input",{key:U,name:re,type:"hidden",value:U})})}},{key:"renderJoinedHiddenInput",value:function(){var de=this.props,ye=de.checked,z=de.name,U=ye.join(",");return v().createElement("input",{name:z,type:"hidden",value:U})}},{key:"render",value:function(){var de,ye=this.props,z=ye.direction,U=ye.disabled,re=ye.iconsClass,_e=ye.nodes,Ce=ye.nativeCheckboxes,Ge=this.state.id,ze=this.renderTreeNodes(_e),ct=u()((ot(de={"react-checkbox-tree":!0,"rct-disabled":U},"rct-icons-".concat(re),!0),ot(de,"rct-native-display",Ce),ot(de,"rct-direction-rtl",z==="rtl"),de));return v().createElement("div",{className:ct,id:Ge},this.renderExpandAll(),this.renderHiddenInput(),ze)}}],q=[{key:"getDerivedStateFromProps",value:function(de,ye){var z=ye.model,U=ye.prevProps,re=de.disabled,_e=de.id,Ce=de.nodes,Ge=le(le({},ye),{},{prevProps:de});return z.setProps(de),l()(U.nodes,Ce)&&U.disabled===re||(z.reset(),z.flattenNodes(Ce)),_e!==null&&(Ge=le(le({},Ge),{},{id:_e})),z.deserializeLists({checked:de.checked,expanded:de.expanded}),Ge}}],W&&ve(ge.prototype,W),q&&ve(ge,q),Object.defineProperty(ge,"prototype",{writable:!1}),be}(v().Component);function Tr(Ie){return function(ge){if(Array.isArray(ge))return Li(ge)}(Ie)||function(ge){if(typeof Symbol<"u"&&ge[Symbol.iterator]!=null||ge["@@iterator"]!=null)return Array.from(ge)}(Ie)||function(ge,W){if(ge){if(typeof ge=="string")return Li(ge,W);var q=Object.prototype.toString.call(ge).slice(8,-1);return q==="Object"&&ge.constructor&&(q=ge.constructor.name),q==="Map"||q==="Set"?Array.from(ge):q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q)?Li(ge,W):void 0}}(Ie)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Li(Ie,ge){(ge==null||ge>Ie.length)&&(ge=Ie.length);for(var W=0,q=new Array(ge);W<ge;W++)q[W]=Ie[W];return q}function Br(Ie,ge){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(W>ge)return[];var q=[];return Ie.forEach(function(me){me.children&&(q=[].concat(Tr(q),[me.value],Tr(Br(me.children,ge,W+1))))}),q}ot(xn,"propTypes",{nodes:m().arrayOf(C).isRequired,checkModel:m().oneOf([$.LEAF,$.ALL]),checked:ne,direction:m().string,disabled:m().bool,expandDisabled:m().bool,expandOnClick:m().bool,expanded:ne,icons:Ye,iconsClass:m().string,id:m().string,lang:je,name:m().string,nameAsArray:m().bool,nativeCheckboxes:m().bool,noCascade:m().bool,onlyLeafCheckboxes:m().bool,optimisticToggle:m().bool,showExpandAll:m().bool,showNodeIcon:m().bool,showNodeTitle:m().bool,onCheck:m().func,onClick:m().func,onExpand:m().func}),ot(xn,"defaultProps",{checkModel:$.LEAF,checked:[],direction:"ltr",disabled:!1,expandDisabled:!1,expandOnClick:!1,expanded:[],icons:{check:v().createElement("span",{className:"rct-icon rct-icon-check"}),uncheck:v().createElement("span",{className:"rct-icon rct-icon-uncheck"}),halfCheck:v().createElement("span",{className:"rct-icon rct-icon-half-check"}),expandClose:v().createElement("span",{className:"rct-icon rct-icon-expand-close"}),expandOpen:v().createElement("span",{className:"rct-icon rct-icon-expand-open"}),expandAll:v().createElement("span",{className:"rct-icon rct-icon-expand-all"}),collapseAll:v().createElement("span",{className:"rct-icon rct-icon-collapse-all"}),parentClose:v().createElement("span",{className:"rct-icon rct-icon-parent-close"}),parentOpen:v().createElement("span",{className:"rct-icon rct-icon-parent-open"}),leaf:v().createElement("span",{className:"rct-icon rct-icon-leaf"})},iconsClass:"fa4",id:null,lang:{collapseAll:"Collapse all",expandAll:"Expand all",toggle:"Toggle"},name:void 0,nameAsArray:!1,nativeCheckboxes:!1,noCascade:!1,onlyLeafCheckboxes:!1,optimisticToggle:!0,showExpandAll:!1,showNodeIcon:!0,showNodeTitle:!1,onCheck:function(){},onClick:null,onExpand:function(){}});const Fr=xn})(),o})())})(Y$);const Xke=$T(Y$.exports),yNe="";let W$=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;_classCallCheck3(this,n),r=t.call(this,i),r.localTracks=hl.filter(u=>u.local&&!u.hidden).map(u=>{const c={...u};return c.datatype=u.datatype[0],c}),r.augmentedTracksInfo=hl,window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(u=>{r.augmentedTracksInfo.push(window.higlassTracksByType[u].config)}),i.datatype?r.localTracks=r.localTracks.filter(u=>u.datatype[0]===i.datatype):r.localTracks=r.localTracks.filter(u=>u.orientation===r.props.orientation),r.localTracks.forEach(u=>{u.uuid=Pt.nice()});const a=r.prepareNewEntries("",r.localTracks,{}),o=Object.keys(a),s=o.length?[o[0]]:null;return r.mounted=!1,r.state={selectedUuid:s,options:a,filter:"",checked:[],expanded:[]},r.requestTilesetLists(),r}return _createClass3(n,[{key:"componentDidMount",value:function(){this.mounted=!0,this.requestTilesetLists(),this.searchBox.focus()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"prepareNewEntries",value:function(r,a,o){const s=o;return a.map(c=>({...c,server:r,tilesetUid:c.uuid,serverUidKey:this.serverUidKey(r,c.uuid),datatype:c.datatype,name:c.name,uid:Pt.nice()})).forEach(c=>{s[c.serverUidKey]=c}),s}},{key:"serverUidKey",value:function(r,a){return`${r}/${a}`}},{key:"requestTilesetLists",value:function(){let r=null;if(this.props.datatype?r=`dt=${this.props.datatype}`:r=[...new Set([].concat(...this.augmentedTracksInfo.filter(o=>o.datatype).filter(o=>o.orientation===this.props.orientation||this.props.orientation==="1d-vertical"&&o.orientation==="1d-horizontal").map(o=>o.datatype)))].map(o=>`dt=${o}`).join("&"),!this.props.trackSourceServers){console.warn("No track source servers specified in the viewconf");return}this.props.trackSourceServers.forEach(a=>{Xe.json(`${a}/tilesets/?limit=10000&${r}`,(o,s)=>{if(o)console.error("ERROR:",o);else{const u=this.prepareNewEntries(a,s.results,this.state.options),c=Object.keys(u);let{selectedUuid:l}=this.state;if(!l){l=c.length?[c[0]]:null;const f=this.state.options[l[0]];this.props.selectedTilesetChanged([f])}this.mounted&&this.setState({selectedUuid:l,options:u})}},this.props.pubSub)})}},{key:"handleOptionDoubleClick",value:function(r){const a=this.state.options[r.target.value];this.props.onDoubleClick(a)}},{key:"handleSelectedOptions",value:function(r){const a=[],o=[];for(let s=0;s<r.length;s++)a.push(r[s]),o.push(this.state.options[r[s]]);this.props.selectedTilesetChanged(o),this.setState({selectedUuid:a})}},{key:"handleSelect",value:function(){const{selectedOptions:r}=this.multiSelect,a=[];for(let o=0;o<r.length;o++){const s=r[o];a.push(s.value)}this.handleSelectedOptions(a)}},{key:"handleSearchChange",value:function(){const r=this.searchBox;this.setState({filter:r.value})}},{key:"partitionByGroup",value:function(r,a){const o={"":{name:"",value:"",children:[]}};for(const u of Object.keys(r)){const c=r[u];if(!!c.name.toLowerCase().includes(a))if("project_name"in c){const l=c.project_name;l in o||(o[l]={value:l,label:l,children:[]}),o[l].children.push({label:c.name,value:u})}else o[""].children.push({label:c.name,value:u})}const s=o[""].children;for(const u of Object.keys(o))u!==""&&(o[u].children.sort((c,l)=>c.label.toLowerCase().localeCompare(l.label.toLowerCase(),"en")),s.push(o[u]));return s.sort((u,c)=>u.label.toLowerCase().localeCompare(c.label.toLowerCase(),"en")),s}},{key:"handleChecked",value:function(r){this.handleSelectedOptions(r),this.setState({checked:r})}},{key:"handleExpanded",value:function(r){this.setState({expanded:r})}},{key:"render",value:function(){const r=[];for(const c in this.state.options)r.push(this.state.options[c]);const a=this.partitionByGroup(this.state.options,this.state.filter),o={width:15,height:15,top:2,right:2,position:"relative"},s=JSON.parse(JSON.stringify(o));s.opacity=.5;const u=A.default.createElement("form",{onSubmit:c=>{c.preventDefault()}},A.default.createElement("div",{className:"tileset-finder-search-bar"},A.default.createElement("span",{className:"tileset-finder-label"},"Select tileset:"),A.default.createElement("input",{ref:c=>{this.searchBox=c},className:"tileset-finder-search-box",onChange:this.handleSearchChange.bind(this),placeholder:"Search Term",type:"text"})),A.default.createElement("div",{className:"tileset-finder-checkbox-tree"},A.default.createElement(Xke,{checked:this.state.checked,expanded:this.state.expanded,icons:{uncheck:A.default.createElement("svg",{style:o},A.default.createElement("use",{xlinkHref:"#square_o"})),check:A.default.createElement("svg",{style:o},A.default.createElement("use",{xlinkHref:"#check_square_o"})),halfCheck:A.default.createElement("svg",{style:s},A.default.createElement("use",{xlinkHref:"#check_square_o"})),leaf:A.default.createElement("svg",{style:o},A.default.createElement("use",{xlinkHref:"#file_o"})),expandClose:A.default.createElement("svg",{style:o},A.default.createElement("use",{xlinkHref:"#chevron_right"})),expandOpen:A.default.createElement("svg",{style:o},A.default.createElement("use",{xlinkHref:"#chevron_down"})),parentClose:A.default.createElement("svg",{style:o},A.default.createElement("use",{xlinkHref:"#folder_o"})),parentOpen:A.default.createElement("svg",{style:o},A.default.createElement("use",{xlinkHref:"#folder_open_o"}))},nodes:a,onCheck:this.handleChecked.bind(this),onExpand:this.handleExpanded.bind(this)})));return A.default.createElement("div",null,u)}}]),n}(A.default.Component);W$.propTypes={datatype:N.exports.string,orientation:N.exports.string,onDoubleClick:N.exports.func,pubSub:N.exports.object.isRequired,selectedTilesetChanged:N.exports.func,trackSourceServers:N.exports.array};const Kke=Bc(W$),TNe="";let q$=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.DATATYPE_TO_TRACK_TYPE=gb(r.props.orientation),r.AVAILABLE_TRACK_TYPES=Lg(r.props.datatypes,r.props.orientation),r.state={selectedPlotType:r.AVAILABLE_TRACK_TYPES[0]},r}return _createClass3(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(r){if(this.AVAILABLE_TRACK_TYPES=Lg(r.datatypes,this.props.orientation),!!this.AVAILABLE_TRACK_TYPES&&!!r.allTracksSameDatatype&&this.AVAILABLE_TRACK_TYPES.length>0&&!this.AVAILABLE_TRACK_TYPES.includes(this.state.selectedPlotType)){const a=Tb(r.datatypes[0][0],this.props.position,this.AVAILABLE_TRACK_TYPES);this.handlePlotTypeSelected(a)}}},{key:"handlePlotTypeSelected",value:function(r){this.setState({selectedPlotType:r}),this.props.onPlotTypeSelected(r.type)}},{key:"render",value:function(){let r="No plot types available for track";const a={};return hl.forEach(o=>{a[o.type]=o}),this.AVAILABLE_TRACK_TYPES&&(r=this.AVAILABLE_TRACK_TYPES.sort((o,s)=>o.type<s.type).map(o=>{const s=a[o.type].thumbnail,u=this.state.selectedPlotType.type===o.type?"plot-type-item plot-type-selected":"plot-type-item",c=a[o.type].thumbnail?A.default.createElement("div",{className:"track-thumbnail",dangerouslySetInnerHTML:{__html:s.outerHTML}}):A.default.createElement("div",{className:"track-thumbnail"},A.default.createElement("svg",{height:20,width:30}));return A.default.createElement("li",{key:o.type,className:u,onClick:l=>{this.setState({selectedPlotType:o}),this.props.onPlotTypeSelected(o.type)},style:{listStyle:"none",paddingLeft:5,paddingBottom:0}},c,A.default.createElement("span",{style:{verticalAlign:"middle"}},o.type))})),A.default.createElement("div",null,r.length>0&&this.props.allTracksSameDatatype&&A.default.createElement("div",{className:"plot-type-container"},r),!this.props.allTracksSameDatatype&&A.default.createElement("div",{className:"plot-type-container-empty"},"Datasets with multiple datatypes chosen. They will be added with their default track types."))}}]),n}(A.default.Component);q$.propTypes={allTracksSameDatatype:N.exports.bool,datatypes:N.exports.array,orientation:N.exports.string,onPlotTypeSelected:N.exports.func,position:N.exports.string};const _Ne={"collapse-toggle-icon":"_collapse-toggle-icon_ub7s6_1",collapsed:"_collapsed_ub7s6_9","modal-title":"_modal-title_ub7s6_14","modal-container":"_modal-container_ub7s6_19",modal:"_modal_ub7s6_14","modal-backdrop":"_modal-backdrop_ub7s6_23","modal-dialog":"_modal-dialog_ub7s6_27"};let vT=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.options={},r.state={selectedTilesets:[{datatype:"none"}],allTracksSameDatatype:!0},r.handleSubmitBound=r.handleSubmit.bind(_assertThisInitialized3(r)),r.handleTilesetPickerDoubleClickBound=r.handleTilesetPickerDoubleClick.bind(_assertThisInitialized3(r)),r.selectedTilesetsChangedBound=r.selectedTilesetsChanged.bind(_assertThisInitialized3(r)),r}return _createClass3(n,[{key:"getOrientation",value:function(r){let a=null;return r==="top"||r==="bottom"?a="1d-horizontal":r==="left"||r==="right"?a="1d-vertical":a="2d",a}},{key:"handleSubmit",value:function(r){r&&r.preventDefault(),this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.host)}},{key:"handleTilesetPickerDoubleClick",value:function(r){this.selectedTilesetsChanged([r]),this.props.onTracksChosen(this.state.selectedTilesets,this.props.position,this.props.host)}},{key:"handleOptionsChanged",value:function(r){this.options=r}},{key:"handlePlotTypeSelected",value:function(r){const{selectedTilesets:a}=this.state;for(const o of a)o.type=r;this.selectedPlotType=r,this.setState({selectedTilesets:a})}},{key:"selectedTilesetsChanged",value:function(r){let a=null;r.length===0?a=[{datatype:"none"}]:a=r;let o=!0;const s=a[0].datatype;for(const u of a)u.datatype!==s&&(o=!1);if(o)for(const u of a)u.type=this.selectedPlotType;else for(const u of a){let c=[u.datatype];const l=this.getOrientation(this.props.position);u.filetype==="cooler"&&(c=[u.datatype,"chromsizes"]);const f=Lg([c],l),h=Tb(c[0],this.props.position,f);u.type=h.type}this.setState({selectedTilesets:a,allTracksSameDatatype:o})}},{key:"render",value:function(){const r=this.getOrientation(this.props.position),a=A.default.createElement("div",null,A.default.createElement(Kke,{ref:o=>{this.tilesetFinder=o},datatype:this.props.datatype,onDoubleClick:this.handleTilesetPickerDoubleClick.bind(this),onTracksChosen:o=>this.props.onTracksChosen(o,this.props.position),orientation:r,selectedTilesetChanged:this.selectedTilesetsChanged.bind(this),trackSourceServers:this.props.trackSourceServers}));return A.default.createElement(Mp,{maxHeight:!0,okayTitle:"Submit",onCancel:this.props.onCancel,onOkay:this.handleSubmitBound,title:"Add Track"},A.default.createElement(A.default.Fragment,null,a,A.default.createElement(q$,{ref:o=>{this.plotTypeChooser=o},allTracksSameDatatype:this.state.allTracksSameDatatype,datatypes:this.state.selectedTilesets.map(o=>o.filetype==="cooler"?[o.datatype,"chromsizes"]:[o.datatype]),onPlotTypeSelected:this.handlePlotTypeSelected.bind(this),orientation:r,position:this.props.position})))}}]),n}(A.default.Component);vT.defaultProps={position:"top"},vT.propTypes={datatype:N.exports.string,host:N.exports.string,onCancel:N.exports.func.isRequired,onTracksChosen:N.exports.func.isRequired,position:N.exports.string,trackSourceServers:N.exports.array.isRequired};let Yw=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"render",value:function(){const r=[];return this.props.children.forEach((a,o)=>{const s=`customTrackDialog_${o}`;r.push(A.default.createElement(a,{key:s,...this.props.bodyProps[o]}))}),A.default.createElement(Mp,{maxHeight:!0,okayOnly:!0,okayTitle:"Close",onCancel:this.props.onCancel,onOkay:this.props.onCancel,title:this.props.title},r)}}]),n}(A.default.PureComponent);Yw.defaultProps={},Yw.propTypes={onCancel:N.exports.func.isRequired};const X$=20;let Ms=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.adjusted=!1,r.state={orientation:r.props.orientation?r.props.orientation:"right",left:r.props.position.left,top:r.props.position.top,submenuShown:null},r}return _createClass3(n,[{key:"componentDidMount",value:function(){this.updateOrientation()}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){this.adjusted=!1,this.setState({left:r.position.left,top:r.position.top})}},{key:"componentDidUpdate",value:function(){this.updateOrientation()}},{key:"handleItemMouseEnterWithRect",value:function(r,a){this.setState({submenuShown:a,submenuSourceBbox:r})}},{key:"handleItemMouseEnter",value:function(r,a){this.handleItemMouseEnterWithRect(r.currentTarget.getBoundingClientRect(),a)}},{key:"handleMouseLeave",value:function(){}},{key:"handleOtherMouseEnter",value:function(){this.setState({submenuShown:null})}},{key:"updateOrientation",value:function(){if(this.adjusted)return;this.adjusted=!0,this.divDom=Un.default.findDOMNode(this.div);const r=this.divDom.getBoundingClientRect(),a=this.props.parentBbox?this.props.parentBbox:{top:this.props.position.top,left:this.props.position.left,width:0,height:0};let o=this.state.orientation,s=a.top;if(a.top+r.height>window.innerHeight&&(a.top-r.height>0?s=a.top-r.height+X$:(s=a.top-r.height+X$,s-=s+r.height-window.innerHeight)),this.state.orientation==="left"){let u=a.left-r.width;u<0&&(a.left+a.width+r.width>window.innerWidth?u=0:(u=a.left+a.width,o="right")),this.setState({left:u,top:s,orientation:o})}else{let u=a.left+a.width;a.left+a.width+r.width>window.innerWidth&&(a.left-r.width<0?(u=0,o="right"):(u=a.left-r.width,o="left")),this.setState({left:u,top:s,orientation:o})}}},{key:"render",value:function(){const r=this.state.left?{left:this.state.left}:{right:this.state.right},a={top:this.state.top},o=Object.assign(r,a);return A.default.createElement("div",{ref:s=>{this.div=s},className:qt("context-menu-item",mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===pn}),style:o},this.props.children)}}]),n}(A.default.Component);Ms.propTypes={children:N.exports.node,orientation:N.exports.string,parentBbox:N.exports.object,position:N.exports.object,theme:N.exports.symbol.isRequired};let Ww=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"getSubmenu",value:function(){if(this.state.submenuShown){const r=this.state.submenuSourceBbox,a=this.state.orientation==="left"?{left:this.state.left,top:r.top}:{left:this.state.left+r.width+7,top:r.top},o=this.state.submenuShown;return A.default.createElement(n,{menuItems:o.children,orientation:this.state.orientation,parentBbox:r,position:a,theme:this.props.theme})}return A.default.createElement("div",null)}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){const r=[];for(const a in this.props.menuItems){const o=this.props.menuItems[a];r.push(A.default.createElement(St,{key:a,onClick:o.handler?o.handler:()=>null,onMouseEnter:o.children?s=>this.handleItemMouseEnter(s,o):this.handleOtherMouseEnter.bind(this),onMouseLeave:this.handleMouseLeave},o.name,o.children&&A.default.createElement("svg",{className:mt["play-icon"]},A.default.createElement("use",{xlinkHref:"#play"}))))}return A.default.createElement("div",{ref:a=>{this.div=a},className:qt(mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===pn}),style:{left:this.state.left,top:this.state.top}},r,this.getSubmenu())}}]),n}(Ms),Zke=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"getConfigureSeriesMenu",value:function(r,a,o){const s={},u=window.higlassTracksByType&&window.higlassTracksByType[o.type]&&window.higlassTracksByType[o.type].config&&window.higlassTracksByType[o.type].config.optionsInfo;if(u)for(const c of Object.keys(u))yr[c]=u[c];if(!fn[o.type]||!fn[o.type].availableOptions)return null;for(const c of fn[o.type].availableOptions)if(c in yr){if(s[c]={name:yr[c].name},yr[c].generateOptions){const l=yr[c].generateOptions(o);s[c].children||(s[c].children={});for(const f of l){const h={name:f.name,value:f.value,handler:()=>{o.options[c]=f.value,this.props.onTrackOptionsChanged(o.uid,o.options),this.props.closeMenu()}};s[c].children[f.value]=h}}if(yr[c].inlineOptions)for(const l in yr[c].inlineOptions){const f=yr[c].inlineOptions[l];s[c].children||(s[c].children={});const h={name:f.name,value:f.value};f.componentPickers&&f.componentPickers[o.type]?h.handler=()=>{this.props.onConfigureTrack(o,f.componentPickers[o.type]),this.props.closeMenu()}:h.handler=()=>{o.options[c]=f.value,this.props.onTrackOptionsChanged(o.uid,o.options),this.props.closeMenu()},s[c].children[l]=h}else yr[c].componentPickers&&yr[c].componentPickers[o.type]&&(s[c].handler=()=>{this.props.onConfigureTrack(o,yr[c].componentPickers[o.type]),this.props.closeMenu()})}return A.default.createElement(Ww,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:s,orientation:this.state.orientation,parentBbox:a,position:r,theme:this.props.theme})}},{key:"getTrackTypeItems",value:function(r,a,o){window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(f=>{fn[f]=window.higlassTracksByType[f].config});let{datatype:s}=o,u=null;o.type in fn&&(s||(s=fn[o.type].datatype[0]),{orientation:u}=fn[o.type]);const c=Object.values(fn).filter(f=>f.datatype).filter(f=>f.orientation).filter(f=>f.datatype.includes(s)).filter(f=>f.orientation===u).map(f=>f.type),l={};for(let f=0;f<c.length;f++)l[c[f]]={value:c[f],name:c[f],handler:()=>{this.props.onChangeTrackType(o.uid,c[f])}};return A.default.createElement(Ww,{key:"track-type-items",closeMenu:this.props.closeMenu,menuItems:l,orientation:this.state.orientation,parentBbox:a,position:r,theme:this.props.theme})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){const r=this.state.submenuSourceBbox,a=this.state.orientation==="left"?{left:this.state.left,top:r.top}:{left:this.state.left+r.width+7,top:r.top},o=this.state.submenuShown,s=o.value;return o.option==="track-type"?this.getTrackTypeItems(a,r,s):this.getConfigureSeriesMenu(a,r,s)}return A.default.createElement("div",null)}},{key:"getDivideByMenuItem",value:function(){if(this.props.series.data&&this.props.series.data.type==="divided"){const r={tilesetUid:this.props.series.data.children[0].tilesetUid,server:this.props.series.data.children[0].server};return A.default.createElement(St,{className:mt["context-menu-item"],onClick:()=>this.props.onChangeTrackData(this.props.series.uid,r),onMouseEnter:a=>this.handleOtherMouseEnter(a)},A.default.createElement("span",{className:mt["context-menu-span"]},"Remove divisor"))}return A.default.createElement(St,{className:mt["context-menu-item"],onClick:()=>this.props.onAddDivisor(this.props.series),onMouseEnter:r=>this.handleOtherMouseEnter(r)},A.default.createElement("span",{className:mt["context-menu-span"]},"Divide by"))}},{key:"componentWillUnmount",value:function(){}},{key:"render",value:function(){let r=null;fn[this.props.series.type]&&fn[this.props.series.type].exportable&&(r=A.default.createElement(St,{className:mt["context-menu-item"],onClick:()=>this.props.onExportData(this.props.hostTrack.uid,this.props.track.uid),onMouseEnter:o=>this.handleOtherMouseEnter(o)},A.default.createElement("span",{className:mt["context-menu-span"]},"Export Data")));const a=this.props.onAddSeries?A.default.createElement(St,{className:mt["context-menu-item"],onClick:()=>{this.props.onCloseTrack(this.props.series.uid),this.props.onAddSeries(this.props.hostTrack.uid)},onMouseEnter:o=>this.handleOtherMouseEnter(o)},A.default.createElement("span",{className:mt["context-menu-span"]},"Replace Series")):null;return A.default.createElement("div",{ref:o=>{this.div=o},className:qt(mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===pn}),"data-menu-type":"SeriesListMenu",onMouseLeave:this.props.handleMouseLeave,style:{left:this.state.left,top:this.state.top}},A.default.createElement(St,{onClick:()=>{},onMouseEnter:o=>this.handleItemMouseEnter(o,{option:"configure-series",value:this.props.track}),onMouseLeave:o=>this.handleMouseLeave(o)},"Configure Series",A.default.createElement("svg",{className:mt["play-icon"]},A.default.createElement("use",{xlinkHref:"#play"}))),A.default.createElement(St,{className:mt["context-menu-item"],onClick:()=>{},onMouseEnter:o=>this.handleItemMouseEnter(o,{option:"track-type",value:this.props.track}),onMouseLeave:o=>this.handleMouseLeave(o)},A.default.createElement("span",{className:mt["context-menu-span"]},"Track Type",A.default.createElement("svg",{className:mt["play-icon"]},A.default.createElement("use",{xlinkHref:"#play"})))),r,this.getDivideByMenuItem(),A.default.createElement(St,{className:mt["context-menu-item"],onClick:this.props.onCloseTrack,onMouseEnter:o=>this.handleOtherMouseEnter(o)},A.default.createElement("span",{className:mt["context-menu-span"]},"Close Series")),a,this.getSubmenu())}}]),n}(Ms);const K$=e=>{let t=[];for(const n of e)n.contents?t=t.concat(n.contents):t.push(n);return t},qw=(e,t,n,i)=>e?(window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(r=>{fn[r]=window.higlassTracksByType[r].config}),K$(e).map(r=>{const a=fn[r.type]?fn[r.type].thumbnail:null,o=a?A.default.createElement("div",{className:mt["context-menu-icon"],dangerouslySetInnerHTML:{__html:a.outerHTML}}):A.default.createElement("div",{className:mt["context-menu-icon"]},A.default.createElement("svg",null));return A.default.createElement(St,{key:r.uid,className:mt["context-menu-item"],onClick:()=>{i&&i(r.uid)},onMouseEnter:s=>{t&&t(s,r)},onMouseLeave:s=>{n&&n(s)}},o,A.default.createElement("span",{className:mt["context-menu-span"]},r.options&&r.options.name&&r.options.name.length?r.options.name:r.type,t&&n?A.default.createElement("svg",{className:mt["play-icon"]},A.default.createElement("use",{xlinkHref:"#play"})):null))})):null,Z$=sy(e=>function(t){_inherits3(i,t);var n=_createSuper3(i);function i(){return _classCallCheck3(this,i),n.apply(this,arguments)}return _createClass3(i,[{key:"getSubmenu",value:function(){if(this.state.submenuShown){const a=this.state.submenuSourceBbox;let o=null;this.state.orientation==="left"?o={left:this.state.left,top:a.top}:o={left:this.state.left+a.width+7,top:a.top};const u=K$(this.props.tracks).filter(l=>l.uid===this.state.submenuShown.uid)[0],c=u&&u.position!=="whole";return A.default.createElement(Zke,{key:`series-list-menu-${u.uid}`,ref:l=>{this.seriesListMenu=l},closeMenu:this.props.closeMenu,hostTrack:this.props.tracks[0],onAddDivisor:this.props.onAddDivisor,onAddSeries:c?this.props.onAddSeries:null,onChangeTrackData:this.props.onChangeTrackData,onChangeTrackType:this.props.onChangeTrackType,onCloseTrack:()=>this.props.onCloseTrack(this.state.submenuShown.uid),onConfigureTrack:this.props.onConfigureTrack,onDivideSeries:this.props.onDivideSeries,onExportData:this.props.onExportData,onLockScales:this.props.onLockScales,onTrackOptionsChanged:this.props.onTrackOptionsChanged,orientation:this.state.orientation,parentBbox:a,position:o,series:this.state.submenuShown,theme:this.props.theme,track:u,trackOrientation:this.props.trackOrientation,trackSourceServers:this.props.trackSourceServers})}return A.default.createElement("div",null)}}]),i}(e));let Qke=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.seriesRefs={},r.seriesListMenu=null,r}return _createClass3(n,[{key:"componentDidMount",value:function(){_get4(_getPrototypeOf4(n.prototype),"componentDidMount",this).call(this)}},{key:"render",value:function(){return A.default.createElement("div",{ref:r=>{this.div=r},className:qt(mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===pn}),"data-menu-type":"ConfigTrackMenu",style:{left:this.state.left,top:this.state.top}},qw(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this),null),A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{contextMenu:this,onClick:()=>this.props.onLockValueScale(this.props.tracks[0].uid),onMouseEnter:r=>this.handleOtherMouseEnter(r)},"Lock Value Scale With"),A.default.createElement(St,{contextMenu:this,onClick:()=>this.props.onUnlockValueScale(this.props.tracks[0].uid),onMouseEnter:r=>this.handleOtherMouseEnter(r)},"Unlock Value Scale"),A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{contextMenu:this,onClick:()=>this.props.onAddSeries(this.props.tracks[0].uid),onMouseEnter:r=>this.handleOtherMouseEnter(r)},"Add Series"),A.default.createElement(St,{onClick:()=>this.props.onCloseTrack(this.props.tracks[0].uid)},"Close Track"),A.default.createElement(St,{onClick:()=>{this.props.onReplaceTrack(this.props.tracks[0].uid,this.props.trackOrientation)}},"Replace Track"),this.getSubmenu())}}]),n}(lh(Ms).with(Z$));function Q$(e){return A.default.createElement("div",null,qw(e.tracks,null,null,e.onCloseTrack),A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{onClick:()=>e.onCloseTrack(e.tracks[0].uid)},"Close all series"))}Q$.propTypes={onCloseTrack:N.exports.func.isRequired,tracks:N.exports.array.isRequired};let Ls=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.clickHandlerBound=r.clickHandler.bind(_assertThisInitialized3(r)),r.contextMenuHandlerBound=r.contextMenuHandler.bind(_assertThisInitialized3(r)),r.resizeHandlerBound=r.resizeHandler.bind(_assertThisInitialized3(r)),r}return _createClass3(n,[{key:"componentDidMount",value:function(){this.popup=document.createElement("div"),document.body.appendChild(this.popup),this.popup.style.zIndex=99,this.popup.style.position="absolute",this.popup.className="hg-popup",document.addEventListener("click",this.clickHandlerBound,!0),document.addEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.addEventListener("resize",this.resizeHandlerBound,!0),this._renderLayer()}},{key:"componentDidUpdate",value:function(){this._renderLayer()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.clickHandlerBound,!0),document.removeEventListener("contextmenu",this.contextMenuHandlerBound,!0),window.removeEventListener("resize",this.resizeHandlerBound,!0),Un.default.unmountComponentAtNode(this.popup),document.body.removeChild(this.popup)}},{key:"_renderLayer",value:function(){Un.default.render(this.props.children,this.popup)}},{key:"clickHandler",value:function(r){this.popup.contains(r.target)||this.props.onMenuClosed&&this.props.onMenuClosed(r)}},{key:"contextMenuHandler",value:function(r){r.altKey||(r.preventDefault(),this.clickHandler(r))}},{key:"resizeHandler",value:function(){this.props.onMenuClosed(null)}},{key:"render",value:function(){return A.default.createElement("div",null)}}]),n}(A.default.Component);Ls.defaultProps={onMenuClosed:CR},Ls.propTypes={children:N.exports.node.isRequired,onMenuClosed:N.exports.func};const Jke=$P(e=>A.default.createElement(X8,{className:e.className,controlAlignLeft:e.controlAlignLeft,editable:e.editable,handleConfigTrack:e.handleConfigTrack,handleResizeTrack:e.handleResizeTrack,height:e.height,item:e.item,onAddSeries:e.onAddSeries,onCloseTrack:e.onCloseTrack,onCloseTrackMenuOpened:e.onCloseTrackMenuOpened,onConfigTrackMenuOpened:e.onConfigTrackMenuOpened,resizeHandles:e.resizeHandles,uid:e.uid,width:e.width})),eOe={"vertical-tiled-plot":"_vertical-tiled-plot_f3ho8_1"};function J$(e){return e&&e.sourceEvent}let Xw=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.brushBehavior=yf().on("start",r.brushStarted.bind(_assertThisInitialized3(r))).on("brush",r.brushed.bind(_assertThisInitialized3(r))).on("end",r.brushedEnded.bind(_assertThisInitialized3(r))),r}return _createClass3(n,[{key:"componentDidMount",value:function(){this.props.isRangeSelectionActive&&this.addBrush()}},{key:"shouldComponentUpdate",value:function(r,a){if(this.rangeSelectionTriggered)return this.rangeSelectionTriggered=!1,this.rangeSelectionTriggeredEnd&&this.props.rangeSelection!==r.rangeSelection&&this.moveBrush(r.rangeSelection[0]?r.rangeSelection[0]:null,!0),this.rangeSelectionTriggeredEnd=!1,this.state!==a;if(this.props.rangeSelection!==r.rangeSelection){const o=this.props.is1dRangeSelection?0:1;return this.moveBrush(r.rangeSelection[o]?r.rangeSelection[o]:null,r.rangeSelectionEnd),this.state!==a}return!0}},{key:"componentDidUpdate",value:function(){this.props.isRangeSelectionActive?this.addBrush():this.removeBrush()}},{key:"addBrush",value:function(){!this.brushEl||this.brushElAddedBefore===this.brushEl||(this.brushElAddedBefore&&this.brushElAddedBefore.on(".brush",null),this.brushEl.call(this.brushBehavior),this.brushElAddedBefore=this.brushEl,zu(this.brushEl,pa["track-range-selection-group-brush-selection"]))}},{key:"brushed",value:function(r){const a=this.rangeSelectionMoved;this.rangeSelectionMoved=!1,!(!J$(r)||!this.props.onRangeSelection||a)&&(this.rangeSelectionTriggered=!0,this.props.onRangeSelection(r.selection))}},{key:"brushStarted",value:function(r){!J$(r)||!r.selection||this.props.onRangeSelectionStart()}},{key:"brushedEnded",value:function(r){if(!this.props.is1dRangeSelection)return;const a=this.rangeSelectionMovedEnd;this.rangeSelectionMovedEnd=!1,r.selection&&r.sourceEvent&&this.props.onRangeSelection&&!a&&(this.rangeSelectionTriggered=!0,this.rangeSelectionTriggeredEnd=!0,this.props.onRangeSelectionEnd(r.selection)),r.selection||(this.rangeSelectionTriggered=!0,this.props.onRangeSelectionReset())}},{key:"moveBrush",value:function(r,a=!1){if(!this.brushEl)return;const o=r?[this.props.scale(r[0]),this.props.scale(r[1])]:null;this.rangeSelectionMoved=!0,this.rangeSelectionMovedEnd=!0,a?this.brushEl.transition().call(this.brushBehavior.move,o):this.brushEl.call(this.brushBehavior.move,o)}},{key:"removeBrush",value:function(){this.brushElAddedBefore&&(this.brushElAddedBefore.call(this.brushBehavior.move,null),this.brushElAddedBefore.on(".brush",null),this.brushElAddedBefore=void 0,this.props.onRangeSelectionReset())}},{key:"render",value:function(){const r=this.props.tracks.map(s=>s.width).reduce(es,0),a=this.props.tracks.map(s=>ju(s)).reduce(Bf,!1),o=pa[this.props.isRangeSelectionActive?"track-range-selection-active":"track-range-selection"];return A.default.createElement("div",{className:eOe["vertical-tiled-plot"]},a&&A.default.createElement("svg",{ref:s=>{this.brushEl=xt(s)},className:o,style:{height:this.props.height,width:r},xmlns:"http://www.w3.org/2000/svg"}),A.default.createElement(Wy,{axis:"x",className:qt(ma.list,ma.stylizedList,ma.horizontalList),component:W8,editable:this.props.editable,handleConfigTrack:this.props.handleConfigTrack,handleResizeTrack:this.props.handleResizeTrack,height:this.props.height,helperClass:ma.stylizedHelper,itemClass:qt(ma.stylizedItem,ma.horizontalItem),itemControlAlignLeft:this.props.tracksControlAlignLeft,itemReactClass:Jke,items:this.props.tracks.map(s=>({configMenuVisible:s.uid===this.props.configTrackMenuId,uid:s.uid||Pt.nice(),height:this.props.height,width:s.width,value:s.value})),onAddSeries:this.props.onAddSeries,onCloseTrack:this.props.onCloseTrack,onCloseTrackMenuOpened:this.props.onCloseTrackMenuOpened,onConfigTrackMenuOpened:this.props.onConfigTrackMenuOpened,onSortEnd:this.props.handleSortEnd,referenceAncestor:this.props.referenceAncestor,resizeHandles:this.props.resizeHandles,useDragHandle:!0,width:r}))}}]),n}(A.default.Component);Xw.propTypes={configTrackMenuId:N.exports.string,editable:N.exports.bool,handleConfigTrack:N.exports.func,handleResizeTrack:N.exports.func,handleSortEnd:N.exports.func,is1dRangeSelection:N.exports.bool,isRangeSelectionActive:N.exports.bool,height:N.exports.number,onAddSeries:N.exports.func,onCloseTrack:N.exports.func,onCloseTrackMenuOpened:N.exports.func,onConfigTrackMenuOpened:N.exports.func,onRangeSelection:N.exports.func,onRangeSelectionEnd:N.exports.func,onRangeSelectionReset:N.exports.func,onRangeSelectionStart:N.exports.func,rangeSelection:N.exports.array,rangeSelectionEnd:N.exports.bool,referenceAncestor:N.exports.func,resizeHandles:N.exports.object,scale:N.exports.func,tracks:N.exports.array,tracksControlAlignLeft:N.exports.bool};let eU=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"render",value:function(){const r=qw(this.props.tracks,this.handleItemMouseEnter.bind(this),this.handleMouseLeave.bind(this)),a=this.props.customItems?A.default.Children.map(this.props.customItems,o=>A.default.cloneElement(o,{onMouseEnter:s=>{this.handleOtherMouseEnter(s)}})):null;return A.default.createElement("div",{ref:o=>{this.div=o},className:qt(mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===pn}),"data-menu-type":"ViewContextMenu",style:{left:this.state.left,top:this.state.top}},a,a&&A.default.createElement("hr",{className:mt["context-menu-hr"]}),r,r&&A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{onClick:()=>this.props.onAddTrack({type:"horizontal-rule",y:this.props.coords[1],position:"whole"}),onMouseEnter:o=>this.handleOtherMouseEnter(o)},"Add Horizontal Rule"),A.default.createElement(St,{onClick:()=>this.props.onAddTrack({type:"vertical-rule",x:this.props.coords[0],position:"whole"}),onMouseEnter:o=>this.handleOtherMouseEnter(o)},"Add Vertical Rule"),A.default.createElement(St,{onClick:()=>this.props.onAddTrack({type:"cross-rule",x:this.props.coords[0],y:this.props.coords[1],position:"whole"}),onMouseEnter:o=>this.handleOtherMouseEnter(o)},"Add Cross Rule"),A.default.createElement("hr",{className:mt["context-menu-hr"]}),this.hasMatrixTrack(this.props.tracks)&&A.default.createElement(St,{onClick:this.handleAddHorizontalSection.bind(this),onMouseEnter:o=>this.handleOtherMouseEnter(o)},"Add Horizontal Cross Section"),this.hasMatrixTrack(this.props.tracks)&&A.default.createElement(St,{onClick:this.handleAddVerticalSection.bind(this),onMouseEnter:o=>this.handleOtherMouseEnter(o)},"Add Vertical Cross Section"),this.getSubmenu())}},{key:"hasMatrixTrack",value:function(r){return Yg(this.props.tracks).filter(o=>o.type==="heatmap").length>0}},{key:"handleAddHorizontalSection",value:function(){const a=Yg(this.props.tracks).filter(o=>o.type==="heatmap")[0];this.props.onAddTrack({type:"horizontal-rule",y:this.props.coords[1],position:"whole"}),this.props.onAddTrack({data:{type:"horizontal-section",server:a.server,tilesetUid:a.tilesetUid,slicePos:this.props.coords[1]},options:{valueScaling:"log"},type:"horizontal-bar",height:30,position:"top"})}},{key:"handleAddVerticalSection",value:function(){const a=Yg(this.props.tracks).filter(o=>o.type==="heatmap")[0];this.props.onAddTrack({type:"vertical-rule",x:this.props.coords[0],position:"whole"}),this.props.onAddTrack({data:{type:"vertical-section",server:a.server,tilesetUid:a.tilesetUid,slicePos:this.props.coords[0]},options:{valueScaling:"log"},type:"vertical-bar",height:30,position:"left"})}}]),n}(lh(Ms).with(Z$));eU.propTypes={coords:N.exports.array,customItems:N.exports.array};let Kw=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;_classCallCheck3(this,n),r=t.call(this,i),r.closing=!1;const{tracks:a}=r.props;return r.canvasElement=null,r.tracksByUidInit={},[...r.props.tracks.top||[],...r.props.tracks.right||[],...r.props.tracks.bottom||[],...r.props.tracks.left||[],...r.props.tracks.gallery||[],...r.props.tracks.center||[]].forEach(o=>{o.type==="combined"?o.contents.forEach(s=>{r.tracksByUidInit[s.uid]=!1}):r.tracksByUidInit[o.uid]=!1}),r.xScale=null,r.yScale=null,r.addUidsToTracks(a),r.trackToReplace=null,r.trackRenderer=null,r.configTrackMenu=null,r.state={sizeMeasured:!1,height:10,width:10,tracks:a,init:!1,addTrackPosition:null,customDialog:null,mouseOverOverlayUid:null,forceUpdate:0,rangeSelection:[null,null],rangeSelectionEnd:!1,chromInfo:null,defaultChromSizes:null,contextMenuCustomItems:null,contextMenuPosition:null,addDivisorDialog:null},r.reset=!0,window.higlassTracksByType&&Object.keys(window.higlassTracksByType).forEach(o=>{fn[o]=window.higlassTracksByType[o].config}),r.topHeight=0,r.bottomHeight=0,r.leftWidth=0,r.rightWidth=0,r.centerHeight=0,r.centerWidth=0,r.dragTimeout=null,r.previousPropsStr="",r.contextMenuHandlerBound=r.contextMenuHandler.bind(_assertThisInitialized3(r)),r.handleNoTrackAddedBound=r.handleNoTrackAdded.bind(_assertThisInitialized3(r)),r.handleTracksAddedBound=r.handleTracksAdded.bind(_assertThisInitialized3(r)),r.closeMenusBound=r.closeMenus.bind(_assertThisInitialized3(r)),r.handleAddDivisorBound=r.handleAddDivisor.bind(_assertThisInitialized3(r)),r.handleAddSeriesBound=r.handleAddSeries.bind(_assertThisInitialized3(r)),r.handleChangeTrackDataBound=r.handleChangeTrackData.bind(_assertThisInitialized3(r)),r.handleChangeTrackTypeBound=r.handleChangeTrackType.bind(_assertThisInitialized3(r)),r.handleCloseTrackBound=r.handleCloseTrack.bind(_assertThisInitialized3(r)),r.handleConfigureTrackBound=r.handleConfigureTrack.bind(_assertThisInitialized3(r)),r.handleExportTrackDataBound=r.handleExportTrackData.bind(_assertThisInitialized3(r)),r.handleLockValueScaleBound=r.handleLockValueScale.bind(_assertThisInitialized3(r)),r.handleReplaceTrackBound=r.handleReplaceTrack.bind(_assertThisInitialized3(r)),r.handleTrackOptionsChangedBound=r.handleTrackOptionsChanged.bind(_assertThisInitialized3(r)),r.handleUnlockValueScaleBound=r.handleUnlockValueScale.bind(_assertThisInitialized3(r)),r.onAddTrack=r.handleAddTrack.bind(_assertThisInitialized3(r)),r}return _createClass3(n,[{key:"waitForDOMAttachment",value:function(r){if(!this.mounted)return;const a=Un.default.findDOMNode(this);document.body.contains(a)?r():requestAnimationFrame(()=>this.waitForDOMAttachment(r))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.element=Un.default.findDOMNode(this),this.canvasElement=Un.default.findDOMNode(this.props.canvasElement),this.waitForDOMAttachment(()=>{ug.ElementQueries.listen(),this.resizeSensor=new ug.ResizeSensor(this.element.parentNode,this.measureSize.bind(this)),this.measureSize()}),this.addEventListeners(),this.pubSubs=[],this.pubSubs.push(this.props.pubSub.subscribe("contextmenu",this.contextMenuHandlerBound))}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){this.addUidsToTracks(r.tracks),this.setState({tracks:r.tracks})}},{key:"shouldComponentUpdate",value:function(r,a){const o=this.previousPropsStr,s=this.updatablePropsToString(r),u=JSON.stringify(this.state),c=JSON.stringify(a),l=o!==s||u!==c||this.props.chooseTrackHandler!==r.chooseTrackHandler||this.props.customDialog!==r.customDialog;l&&(this.previousPropsStr=s);const f=this.numTracks;return this.numTracks=0,Co(this.props.tracks,()=>this.numTracks++),this.reset=this.reset||f===0&&this.numTracks>0,this.numTracks||(this.tracksByUidInit={}),l}},{key:"UNSAFE_componentWillUpdate",value:function(){}},{key:"componentDidUpdate",value:function(r,a){if(a.rangeSelection!==this.state.rangeSelection){let o=[null,null];this.state.defaultChromSizes&&this.state.rangeSelection.every(s=>s&&s.length)&&(o=this.state.rangeSelection.map(s=>Bg(...s,this.state.defaultChromSizes))),this.props.onRangeSelection({dataRange:this.state.rangeSelection,genomicRange:o})}if(this.state.customDialog||this.props.customDialog){const o=this.state.customDialog||this.props.customDialog;if(o.length>0){const s=[],u=[];o.forEach(c=>{s.push(c.bodyComponent),u.push(c.bodyProps)}),this.props.modal.open(A.default.createElement(Yw,{children:s,bodyProps:u,onCancel:this.props.closeCustomDialog,title:o[0].title}))}}if(r.tracks.center,this.props.tracks.center,(this.state.addTrackPosition||this.props.addTrackPosition)&&this.props.modal.open(A.default.createElement(vT,{host:this.state.addTrackHost,onCancel:this.handleNoTrackAddedBound,onTracksChosen:this.handleTracksAddedBound,position:this.state.addTrackPosition||this.props.addTrackPosition,trackSourceServers:this.props.trackSourceServers})),this.state.addDivisorDialog){const o=this.state.addDivisorDialog;this.props.modal.open(A.default.createElement(vT,{datatype:fn[o.type].datatype[0],host:this.state.addTrackHost,onCancel:()=>{this.setState({addDivisorDialog:null})},onTracksChosen:s=>{this.handleDivisorChosen(o,s)},trackSourceServers:this.props.trackSourceServers}))}}},{key:"componentWillUnmount",value:function(){this.closing=!0,this.removeEventListeners(),this.pubSubs.forEach(r=>this.props.pubSub.unsubscribe(r))}},{key:"addUidsToTracks",value:function(r){Object.keys(r).forEach(a=>{r[a].forEach(o=>{o.uid=o.uid||Pt.nice()})})}},{key:"contextMenuHandler",value:function(r){if(!this.divTiledPlot)return;const a=this.divTiledPlot.getBoundingClientRect();if(!Ob(r.clientX,r.clientY,a.left,a.left+a.width,a.top,a.top+a.height))return;const s=[r.clientX,r.clientY],u=sn(r,this.divTiledPlot),c=this.trackRenderer.zoomedXScale.invert(u[0]),l=this.trackRenderer.zoomedYScale.invert(u[1]);let f=null;r.hgCustomItems&&(f=r.hgCustomItems.map(h=>A.default.createElement(St,{key:h.key,onClick:h.onClick},h.text))),this.setState({contextMenuCustomItems:f,contextMenuPosition:{left:s[0],top:s[1],canvasLeft:u[0]+this.trackRenderer.xPositionOffset,canvasTop:u[1]+this.trackRenderer.yPositionOffset},contextMenuDataX:c,contextMenuDataY:l})}},{key:"measureSize",value:function(){this.element.clientWidth>0&&this.element.clientHeight>0&&this.setState({sizeMeasured:!0,width:this.element.clientWidth,height:this.element.clientHeight})}},{key:"handleTrackOptionsChanged",value:function(r,a){return this.props.onTrackOptionsChanged(r,a)}},{key:"handleScalesChanged",value:function(r,a){this.xScale=r,this.yScale=a,this.props.onScalesChanged(r,a)}},{key:"handleTilesetInfoReceived",value:function(r,a){const o=Ci(this.props.tracks,r);if(!o){console.warn("Strange, track not found:",r);return}this.tracksByUidInit[o.uid]=!0,this.checkAllTilesetInfoReceived(),o.options||(o.options={}),o.name=a.name,o.maxWidth=a.max_width,o.transforms=a.transforms,o.aggregationModes=a.aggregation_modes,o.header=a.header,o.binsPerDimension=a.bins_per_dimension,a.resolutions?(o.maxZoom=a.resolutions.length-1,o.resolutions=a.resolutions):o.maxZoom=a.max_zoom,o.coordSystem=a.coordSystem,o.datatype=a.datatype}},{key:"checkAllTilesetInfoReceived",value:function(){if(this.state.init&&!this.reset||!this.trackRenderer||!this.props.zoomToDataExtentOnInit())return;const r=Object.keys(this.trackRenderer.trackDefObjects).map(o=>{const s=this.trackRenderer.trackDefObjects[o].trackObject;return s.childTracks?s.childTracks:s}).reduce((o,s)=>o.concat(s),[]).filter(({tilesetInfo:o})=>typeof o<"u"&&o!==!0),a=Object.values(this.tracksByUidInit).filter(o=>o).length;r.length===a&&(this.setState({init:!0}),this.reset=!1,this.handleZoomToData())}},{key:"handleOverlayMouseEnter",value:function(r){this.setState({mouseOverOverlayUid:r})}},{key:"handleOverlayMouseLeave",value:function(r){r===this.state.mouseOverOverlayUid&&this.setState({mouseOverOverlayUid:null})}},{key:"handleTrackPositionChosen",value:function(r){this.setState({mouseOverOverlayUid:null}),this.props.chooseTrackHandler(r.track.uid)}},{key:"handleNoTrackAdded",value:function(){this.trackToReplace=null,this.props.onNoTrackAdded(),this.setState({addTrackPosition:null,addTrackHost:null})}},{key:"handleAddDivisor",value:function(r){this.setState({addDivisorDialog:r})}},{key:"handleDivisorChosen",value:function(r,a){this.setState({addDivisorDialog:null});const o=r.data?{server:r.data.server,tilesetUid:r.data.tilesetUid}:{server:r.server,tilesetUid:r.tilesetUid},s={server:a[0].server,tilesetUid:a[0].uuid};this.handleChangeTrackData(r.uid,{type:"divided",children:[o,s]})}},{key:"handleDivideSeries",value:function(r){}},{key:"handleAddSeries",value:function(r){const a=Lf(this.props.tracks,r),o=Ci(this.props.tracks,r);this.setState({addTrackPosition:a,addTrackHost:o})}},{key:"handleReplaceTrack",value:function(r,a){this.trackToReplace=r,this.handleAddTrack(a)}},{key:"handleAddTrack",value:function(r){this.setState({addTrackPosition:r,addTrackHost:null})}},{key:"handleResizeTrack",value:function(r,a,o){const{tracks:s}=this.state;for(const u in s){const l=s[u].filter(f=>f.uid===r);l.length>0&&(l[0].width=a,l[0].height=o)}this.setState({tracks:s,forceUpdate:Math.random()}),this.props.onResizeTrack()}},{key:"closeMenus",value:function(){this.setState({closeTrackMenuId:null,configTrackMenuId:null,contextMenuPosition:null,contextMenuCustomItems:null})}},{key:"handleLockValueScale",value:function(r){this.closeMenus(),this.props.onLockValueScale(r)}},{key:"handleUnlockValueScale",value:function(r){this.closeMenus(),this.props.onUnlockValueScale(r)}},{key:"handleCloseTrack",value:function(r){this.closeMenus(),this.props.onCloseTrack(r)}},{key:"handleChangeTrackType",value:function(r,a){this.closeMenus(),this.props.onChangeTrackType(r,a)}},{key:"handleChangeTrackData",value:function(r,a){this.closeMenus(),this.props.onChangeTrackData(r,a)}},{key:"handleTracksAdded",value:function(r,a,o){return this.trackToReplace&&(this.handleCloseTrack(this.trackToReplace),this.trackToReplace=null),this.props.onTracksAdded(r,a,o),this.setState({addTrackPosition:null,addTrackHost:null}),r}},{key:"handleCloseTrackMenuOpened",value:function(r,a){this.setState({closeTrackMenuId:r,closeTrackMenuLocation:a})}},{key:"handleCloseContextMenu",value:function(){this.setState({contextMenuCustomItems:null,contextMenuPosition:null,contextMenuDataX:null,contextMenuDataY:null})}},{key:"handleCloseTrackMenuClosed",value:function(){this.setState({closeTrackMenuId:null})}},{key:"handleConfigTrackMenuOpened",value:function(r,a){this.closeMenus(),this.setState({configTrackMenuId:r,configTrackMenuLocation:a})}},{key:"handleConfigureTrack",value:function(r,a){this.setState({configTrackMenuId:null,trackOptions:{track:r,configComponent:a}}),this.closeMenus()}},{key:"handleSortEnd",value:function(r){this.setState(a=>{const o=a.tracks,s={};for(let u=0;u<r.length;u++)s[r[u].uid]=u;for(const u in o){const c=o[u];if(!!c.length&&c[0].uid in s){const l=new Array(c.length);for(let f=0;f<c.length;f++)l[s[c[f].uid]]=c[f];o[u]=l}}return{tracks:o,forceUpdate:Math.random()}})}},{key:"createTracksAndLocations",value:function(){const r=[],{tracks:a}=this.state;return pb.forEach(o=>{a[o]&&a[o].forEach(s=>{s.contents&&s.contents.forEach(u=>{u.position=o}),s.position=o,r.push({track:s,location:o})})}),r}},{key:"calculateTrackPosition",value:function(r,a){let o=this.props.paddingTop,s=this.props.paddingBottom,u=this.props.paddingLeft,c=this.props.paddingRight,l=this.centerWidth,f=r.height,h=0,d=0;switch(a){case"top":u+=this.leftWidth;for(let p=0;p<this.state.tracks.top.length&&this.state.tracks.top[p].uid!==r.uid;p++)o+=this.state.tracks.top[p].height;break;case"bottom":u+=this.leftWidth,o+=this.topHeight+this.centerHeight+this.galleryDim;for(let p=0;p<this.state.tracks.bottom.length&&this.state.tracks.bottom[p].uid!==r.uid;p++)o+=this.state.tracks.bottom[p].height;break;case"left":o+=this.topHeight,l=r.width,f=this.centerHeight;for(let p=0;p<this.state.tracks.left.length&&this.state.tracks.left[p].uid!==r.uid;p++)u+=this.state.tracks.left[p].width;break;case"right":u+=this.leftWidth+this.centerWidth+this.galleryDim,o+=this.topHeight,l=r.width,f=this.centerHeight;for(let p=0;p<this.state.tracks.right.length&&this.state.tracks.right[p].uid!==r.uid;p++)u+=this.state.tracks.right[p].width;break;case"center":u+=this.leftWidth,o+=this.topHeight,f=this.centerHeight;break;case"gallery":u+=this.leftWidthNoGallery,o+=this.topHeightNoGallery,l=this.state.width-this.leftWidthNoGallery-this.rightWidthNoGallery-this.props.paddingLeft,f=this.state.height-this.topHeightNoGallery-this.bottomHeightNoGallery-this.props.paddingTop,h=this.galleryDim,d=this.galleryDim;for(let p=0;p<this.state.tracks.gallery.length&&this.state.tracks.gallery[p].uid!==r.uid;p++)l-=2*this.state.tracks.gallery[p].height,f-=2*this.state.tracks.gallery[p].height,u+=this.state.tracks.gallery[p].height,o+=this.state.tracks.gallery[p].height,h-=this.state.tracks.gallery[p].height,d-=this.state.tracks.gallery[p].height;for(let p=0;p<this.state.tracks.right.length;p++)c+=this.state.tracks.right[p].width;for(let p=0;p<this.state.tracks.bottom.length;p++)s+=this.state.tracks.bottom[p].height;r.offsetX=h,r.offsetY=d,r.offsetTop=o,r.offsetRight=c,r.offsetBottom=s,r.offsetLeft=u;break;case"whole":default:l=this.leftWidth+this.centerWidth+this.rightWidth,f=this.topHeight+this.centerHeight+this.bottomHeight}return pb.indexOf(a)===-1&&console.warn("Track with unknown position present:",a,r),{left:u,top:o,width:l,height:f,track:r}}},{key:"findCentralHeatmapTrack",value:function(r){for(let a=0;a<r.length;a++){if(r[a].type==="combined")return this.findCentralHeatmapTrack(r[a].contents);if(r[a].type==="heatmap")return r[a]}}},{key:"trackUuidToOrientation",value:function(r){}},{key:"overlayTracks",value:function(r){return this.props.overlays?this.props.overlays.filter(o=>o.includes&&o.includes.length).map(o=>{const s=o.type?`overlay-${o.type}-track`:"overlay-track",u={...o,uid:o.uid||Pt.nice(),includes:o.includes,type:s,options:Object.assign(o.options,{orientationsAndPositions:o.includes.map(c=>{const l=Ci(this.props.tracks,c);if(!l)return console.warn(`OverlayTrack included uid (${c}) not found in the track list`),null;const f=Lf(this.props.tracks,l.uid);let h;if((f==="top"||f==="bottom")&&(h="1d-horizontal"),(f==="left"||f==="right")&&(h="1d-vertical"),f==="center"&&(h="2d"),!h)return console.warn("Only top, bottom, left, right, or center tracks can be overlaid at the moment"),null;const d=r.filter(m=>m.track.uid===c);if(!d.length)return null;const p={left:d[0].left-this.props.paddingLeft,top:d[0].top-this.props.paddingTop,width:d[0].width,height:d[0].height};return{orientation:h,position:p}}).filter(c=>c)})};return{top:this.props.paddingTop,left:this.props.paddingLeft,width:this.leftWidth+this.centerWidth+this.rightWidth,height:this.topHeight+this.centerHeight+this.bottomHeight+this.props.marginTop+this.props.marginBottom,track:u}}):[]}},{key:"positionedTracks",value:function(){return this.createTracksAndLocations().map(({track:a,location:o})=>this.calculateTrackPosition(a,o))}},{key:"createTrackPositionTexts",value:function(){const r=this.positionedTracks();return this.createTracksAndLocations(),r.map(o=>{const{track:s}=o;return A.default.createElement("div",{key:s.uid,style:{left:o.left,top:o.top,width:o.width,height:o.height,position:"absolute"}},s.uid.slice(0,2))})}},{key:"handleExportTrackData",value:function(r,a){const o=Ci(this.props.tracks,a);let s=null;r!==a?s=this.trackRenderer.trackDefObjects[r].trackObject.createdTracks[o.uid]:{trackObject:s}=this.trackRenderer.trackDefObjects[r],s.exportData(),this.closeMenus()}},{key:"listTracksAtPosition",value:function(r,a,o=!1){const s=[];if(!this.trackRenderer)return[];for(const u in this.trackRenderer.trackDefObjects){const c=this.trackRenderer.trackDefObjects[u].trackObject;if(c.respondsToPosition(r,a))if(o){if(this.props.tracks.center)if(this.props.tracks.center.contents)for(let l=0;l<this.props.tracks.center.contents.length;l++)this.props.tracks.center.contents[l].uid===u&&(c.is2d=!0);else this.props.tracks.center&&this.props.tracks.center.length&&this.props.tracks.center[0].uid===u&&(c.is2d=!0);s.push(c)}else s.push(this.trackRenderer.trackDefObjects[u].trackDef.track)}return s}},{key:"listAllTrackObjects",value:function(){const r=[];for(const a in this.trackRenderer.trackDefObjects){const o=this.trackRenderer.trackDefObjects[a];if(o.trackObject.createdTracks)for(const s in o.trackObject.createdTracks){const u=o.trackObject.createdTracks[s];r.push(u)}else r.push(o.trackObject)}return r}},{key:"handleZoomToData",value:function(){const r=Number.MAX_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER,o=[r,r],s=[a,a],u=this.listAllTrackObjects();for(const d of u)if(d.tilesetInfo&&d.tilesetInfo.min_pos)for(let p=0;p<d.tilesetInfo.min_pos.length;p++)d.tilesetInfo.min_pos[p]<o[p]&&(o[p]=d.tilesetInfo.min_pos[p]),d.tilesetInfo.max_pos[p]>s[p]&&(s[p]=d.tilesetInfo.max_pos[p]);const c=this.trackRenderer.currentProps.paddingLeft+this.trackRenderer.currentProps.leftWidth;let l=[c,c+this.trackRenderer.currentProps.centerWidth].map(this.trackRenderer.zoomTransform.rescaleX(this.trackRenderer.xScale).invert);const f=this.trackRenderer.currentProps.paddingTop+this.trackRenderer.currentProps.topHeight;let h=[f,f+this.trackRenderer.currentProps.centerHeight].map(this.trackRenderer.zoomTransform.rescaleY(this.trackRenderer.yScale).invert);this.trackRenderer.zoomTransform.k=1,this.trackRenderer.zoomTransform.x=0,this.trackRenderer.zoomTransform.y=0,this.trackRenderer.applyZoomTransform(),o[0]<Number.MAX_SAFE_INTEGER&&s[0]>Number.MIN_SAFE_INTEGER&&(l=[o[0],s[0]]),o[1]<Number.MAX_SAFE_INTEGER&&s[1]>Number.MIN_SAFE_INTEGER&&(h=[o[1],s[1]]),this.props.onDataDomainChanged(l,h)}},{key:"resetViewport",value:function(){this.trackRenderer.zoomTransform.k=1,this.trackRenderer.zoomTransform.x=0,this.trackRenderer.zoomTransform.y=0,this.trackRenderer.applyZoomTransform(),this.props.onDataDomainChanged(this.props.initialXDomain,this.props.initialYDomain)}},{key:"updatablePropsToString",value:function(r){return JSON.stringify({tracks:r.tracks,overlays:r.overlays,viewOptions:r.viewOptions,uid:r.uid,addTrackPosition:r.addTrackPosition,editable:r.editable,marginTop:r.marginTop,marginBottom:r.marginBottom,marginLeft:r.marginLeft,marginRight:r.marginRight,paddingTop:r.paddingTop,paddingBottom:r.paddingBottom,paddingLeft:r.paddingLeft,paddingRight:r.paddingRight,mouseTool:r.mouseTool,initialXDomain:r.initialXDomain,initialYDomain:r.initialYDomain,trackSourceServers:r.trackSourceServers,zoomable:r.zoomable,draggingHappening:r.draggingHappening})}},{key:"getXYScales",value:function(){this.trackRenderer&&(this.xScale=this.trackRenderer.currentXScale,this.yScale=this.trackRenderer.currentYScale)}},{key:"rangeViewToDataLoci",value:function(r,a){return a?[parseInt(a.invert(r[0]),10),parseInt(a.invert(r[1]),10)]:[null,null]}},{key:"rangeSelectionResetHandler",value:function(){this.state.rangeSelectionMaster&&this.setState({is1dRangeSelection:null,rangeSelection:[null,null],rangeSelectionMaster:null,rangeSelectionEnd:!1})}},{key:"rangeSelection1dEndHandler",value:function(r){(!this.xScale||!this.yScale)&&this.getXYScales();const a=r==="x"?this.xScale:this.yScale;return o=>{this.setState(s=>{const u=s.is1dRangeSelection?[null,null]:s.rangeSelection.slice(),c=!this.state.is1dRangeSelection&&r==="y"?1:0;let l=this.rangeViewToDataLoci(o,a);const f=l[1]-l[0];if(this.props.rangeSelection1dSize[0]>f){const h=l[0]+f/2;l=[h-this.props.rangeSelection1dSize[0]/2,h+this.props.rangeSelection1dSize[0]/2]}else if(this.props.rangeSelection1dSize[1]<f){const h=l[0]+f/2;l=[h-this.props.rangeSelection1dSize[1]/2,h+this.props.rangeSelection1dSize[1]/2]}return u[c]=l,this.props.rangeSelectionToInt&&(u[c]=u[c].map(h=>Math.round(h))),{rangeSelection:u,rangeSelectionEnd:!0}})}}},{key:"rangeSelection1dHandler",value:function(r){(!this.xScale||!this.yScale)&&this.getXYScales();const a=r==="x"?this.xScale:this.yScale;return o=>{this.setState(s=>{const u=s.is1dRangeSelection?[null,null]:s.rangeSelection.slice(),c=!s.is1dRangeSelection&&r==="y"?1:0;return u[c]=this.rangeViewToDataLoci(o,a),{rangeSelection:u,rangeSelectionEnd:!1}})}}},{key:"rangeSelection1dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!0,rangeSelectionMaster:!0,rangeSelectionEnd:!1})}},{key:"rangeSelection2dHandler",value:function(r){(!this.xScale||!this.yScale)&&this.getXYScales(),this.setState({rangeSelection:[this.rangeViewToDataLoci(r[0],this.xScale),this.rangeViewToDataLoci(r[1],this.yScale)],rangeSelectionEnd:!1})}},{key:"rangeSelection2dStartHandler",value:function(){this.state.rangeSelectionMaster||this.setState({is1dRangeSelection:!1,rangeSelectionMaster:!0,rangeSelectionEnd:!1})}},{key:"rangeSelection2dEndHandler",value:function(r){(!this.xScale||!this.yScale)&&this.getXYScales();const a=this.rangeViewToDataLoci(r[0],this.xScale),o=this.rangeViewToDataLoci(r[1],this.yScale);let s=[a,o];const u=a[1]-a[0],c=o[1]-o[0],l=[u,c];s.forEach((f,h)=>{if(this.props.rangeSelection1dSize[0]>l[h]){const d=f[0]+Math.round(l[h]/2);f[0]=d-this.props.rangeSelection1dSize[0]/2,f[1]=d+this.props.rangeSelection1dSize[0]/2}else if(this.props.rangeSelection1dSize[1]<l[h]){const d=f[0]+Math.round(l[h]/2);f[0]=d-this.props.rangeSelection1dSize[1]/2,f[1]=d+this.props.rangeSelection1dSize[1]/2}}),this.props.rangeSelectionToInt&&(s=s.map(f=>f.map(h=>Math.round(h)))),this.setState({rangeSelection:s,rangeSelectionEnd:!0})}},{key:"getContextMenu",value:function(){if(this.state.contextMenuPosition){const r=this.listTracksAtPosition(this.state.contextMenuPosition.canvasLeft,this.state.contextMenuPosition.canvasTop);return A.default.createElement(Ls,{onMenuClosed:this.closeMenusBound},A.default.createElement(eU,{closeMenu:this.closeMenusBound,coords:[this.state.contextMenuDataX,this.state.contextMenuDataY],customItems:this.state.contextMenuCustomItems,onAddDivisor:this.handleAddDivisorBound,onAddSeries:this.handleAddSeriesBound,onAddTrack:a=>{this.props.onTracksAdded([a],a.position,null),this.handleCloseContextMenu()},onChangeTrackData:this.handleChangeTrackDataBound,onChangeTrackType:this.handleChangeTrackTypeBound,onCloseTrack:this.handleCloseTrackBound,onConfigureTrack:this.handleConfigureTrackBound,onExportData:this.handleExportTrackDataBound,onLockValueScale:this.handleLockValueScaleBound,onReplaceTrack:this.handleReplaceTrackBound,onTrackOptionsChanged:this.handleTrackOptionsChangedBound,onUnlockValueScale:this.handleUnlockValueScaleBound,orientation:"right",position:this.state.contextMenuPosition,theme:this.props.theme,tracks:r,trackSourceServers:this.props.trackSourceServers}))}return null}},{key:"getIdealizedTrackPositionsOverlay",value:function(){const r=this.props.draggingHappening,a=r.datatype;if(!(a in Of)&&!r.defaultTracks){console.warn("unknown data type:",r.higlassTrack);return}const o={"1d-horizontal":["top","bottom","left","right"],"2d":["center"],"1d-vertical":["left","right"]},s=Of[a]||{};if(r.defaultTracks)for(const k of r.defaultTracks)if(!fn[k])console.warn("unknown track type",k);else for(const L of o[fn[k].orientation])s[L]=k;const u=new Set(["top","left","right","center","bottom"].filter(k=>k in this.state.tracks&&this.state.tracks[k].length)),c="top"in s,l="left"in s,f="right"in s,h="bottom"in s,d="center"in s,p="center"in s||u.has("left")||u.has("right")||u.has("center"),m="top"in s,g="bottom"in s&&p,v="left"in s&&p,E="right"in s&&p,y=Object.keys(s).length&&("center"in s||p),T=A.default.createElement("div",{style:{flexGrow:1}}),b=A.default.cloneElement(T),S=A.default.createElement("div",{style:{display:"flex",flexGrow:1}},m&&(y||v)?T:null,A.default.createElement(Dv,{defaultTrackType:s.top,draggingHappening:this.props.draggingHappening,enabled:c,onTrackDropped:k=>this.handleTracksAdded([k],"top"),style:{border:"1px solid black",flexGrow:1}}),m&&(y||v)?b:null),w=A.default.createElement("div",{style:{display:"flex",flexGrow:1}},m&&(y||v)?T:null,A.default.createElement(Dv,{defaultTrackType:s.bottom,draggingHappening:this.props.draggingHappening,enabled:h,onTrackDropped:k=>this.handleTracksAdded([k],"bottom"),style:{border:"1px solid black",flexGrow:1}}),m&&(y||v)?b:null),D=A.default.createElement(Dv,{defaultTrackType:s.left,draggingHappening:this.props.draggingHappening,enabled:l,onTrackDropped:k=>this.handleTracksAdded([k],"left"),style:{border:"1px solid black",flexGrow:1}}),R=A.default.createElement(Dv,{defaultTrackType:s.center,draggingHappening:this.props.draggingHappening,enabled:d,onTrackDropped:k=>this.handleTracksAdded([k],"center"),position:"center",style:{border:"1px solid black",flexGrow:1}}),M=A.default.cloneElement(D,{defaultTrackType:s.right,enabled:f,onTrackDropped:k=>this.handleTracksAdded([k],"right")});return A.default.createElement("div",{style:{position:"absolute",left:"0px",top:"0px",width:this.state.width,height:this.state.height}},A.default.createElement("div",{style:{position:"absolute",width:this.state.width,height:this.state.height,background:"white",opacity:.4}}),A.default.createElement("div",{style:{width:this.state.width,height:this.state.height,position:"absolute",display:"flex",flexDirection:"column"}},m?S:null,p&&A.default.createElement("div",{style:{display:"flex",height:m||g?"40%":"100%",width:"100%"}},v?D:null,y?R:null,E?M:null),g?w:null))}},{key:"render",value:function(){this.galleryDim=this.props.tracks.gallery?this.props.tracks.gallery.map(y=>y.height).reduce(es,0):0,this.topHeightNoGallery=this.props.tracks.top.map(y=>y.height).reduce(es,0),this.topHeight=this.topHeightNoGallery+this.galleryDim,this.bottomHeightNoGallery=this.props.tracks.bottom.map(y=>y.height).reduce(es,0),this.bottomHeight=this.bottomHeightNoGallery+this.galleryDim,this.leftWidthNoGallery=this.props.tracks.left.map(y=>y.width).reduce(es,0),this.leftWidth=this.leftWidthNoGallery+this.galleryDim,this.rightWidthNoGallery=this.props.tracks.right.map(y=>y.width).reduce(es,0),this.rightWidth=this.rightWidthNoGallery+this.galleryDim;const r=this.props.paddingTop+this.props.paddingBottom,a=this.props.paddingLeft+this.props.paddingRight;this.centerHeight=Math.max(0,this.state.height-this.topHeight-this.bottomHeight-r),this.centerWidth=Math.max(0,this.state.width-this.leftWidth-this.rightWidth-a);const o="none",s=A.default.createElement("div",{className:"top-track-container",style:{left:this.leftWidth+this.props.paddingLeft,top:this.props.paddingTop,width:this.centerWidth,height:this.topHeightNoGallery,outline:o,position:"absolute"}},A.default.createElement(Ky,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===zi,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["bottom"]),scale:this.xScale,tracks:this.props.tracks.top,width:this.centerWidth})),u=A.default.createElement("div",{className:"left-track-container",style:{left:this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.leftWidthNoGallery,height:this.centerHeight,outline:o,position:"absolute"}},A.default.createElement(Xw,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===zi,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("y").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["right"]),scale:this.yScale,tracks:this.props.tracks.left})),c=A.default.createElement("div",{className:"right-track-container",style:{right:this.props.paddingRight,top:this.topHeight+this.props.paddingTop,width:this.rightWidthNoGallery,height:this.centerHeight,outline:o,position:"absolute"}},A.default.createElement(Xw,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===zi,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("y").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["left"]),scale:this.yScale,tracks:this.props.tracks.right,tracksControlAlignLeft:!0})),l=A.default.createElement("div",{className:"bottom-track-container",style:{left:this.leftWidth+this.props.paddingLeft,bottom:this.props.paddingBottom,width:this.centerWidth,height:this.bottomHeightNoGallery,outline:o,position:"absolute"}},A.default.createElement(Ky,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,handleConfigTrack:this.handleConfigTrackMenuOpened.bind(this),handleResizeTrack:this.handleResizeTrack.bind(this),handleSortEnd:this.handleSortEnd.bind(this),is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===zi,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelection:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection1dStartHandler.bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,resizeHandles:new Set(["top"]),scale:this.xScale,tracks:this.props.tracks.bottom,width:this.centerWidth})),f=A.default.createElement("div",{key:"galleryTracksDiv",className:"gallery-track-container",style:{left:this.leftWidthNoGallery+this.props.paddingLeft,top:this.topHeightNoGallery+this.props.paddingTop,width:this.centerWidth+2*this.galleryDim,height:this.centerHeight+2*this.galleryDim,outline:o,position:"absolute"}},A.default.createElement(JF,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight+2*this.galleryDim,onAddSeries:this.handleAddSeries.bind(this),onCloseTrack:this.handleCloseTrack.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),tracks:this.props.tracks.gallery,width:this.centerWidth+2*this.galleryDim}));let h=A.default.createElement("div",{className:["center-track-container",NA["center-track-container"]].join(" "),style:{left:this.leftWidth+this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.centerWidth,height:this.bottomHeight,outline:o}});this.props.tracks.center.length&&(h=A.default.createElement("div",{className:["center-track-container",NA["center-track-container"]].join(" "),style:{left:this.leftWidth+this.props.paddingLeft,top:this.topHeight+this.props.paddingTop,width:this.centerWidth,height:this.centerHeight,outline:o}},A.default.createElement(MA,{configTrackMenuId:this.state.configTrackMenuId,editable:this.props.editable,height:this.centerHeight,is1dRangeSelection:this.state.is1dRangeSelection,isRangeSelectionActive:this.props.mouseTool===zi,onAddSeries:this.handleAddSeries.bind(this),onCloseTrackMenuOpened:this.handleCloseTrackMenuOpened.bind(this),onConfigTrackMenuOpened:this.handleConfigTrackMenuOpened.bind(this),onRangeSelectionReset:this.rangeSelectionResetHandler.bind(this),onRangeSelectionStart:this.rangeSelection2dStartHandler.bind(this),onRangeSelectionX:this.rangeSelection1dHandler("x").bind(this),onRangeSelectionXEnd:this.rangeSelection1dEndHandler("x").bind(this),onRangeSelectionXY:this.rangeSelection2dHandler.bind(this),onRangeSelectionXYEnd:this.rangeSelection2dEndHandler.bind(this),onRangeSelectionY:this.rangeSelection1dHandler("y").bind(this),onRangeSelectionYEnd:this.rangeSelection1dEndHandler("y").bind(this),rangeSelection:this.state.rangeSelection,rangeSelectionEnd:this.state.rangeSelectionEnd,scaleX:this.xScale,scaleY:this.yScale,tracks:this.props.tracks.center,uid:this.props.tracks.center[0].uid,width:this.centerWidth}))),this.createTrackPositionTexts();let d=this.positionedTracks();d=d.concat(this.overlayTracks(d));let p=null;this.state.sizeMeasured&&(p=A.default.createElement(qke,{ref:y=>{this.trackRenderer=y,this.checkAllTilesetInfoReceived()},canvasElement:this.canvasElement,centerHeight:this.centerHeight,centerWidth:this.centerWidth,disableTrackMenu:this.props.disableTrackMenu,dragging:this.props.dragging,galleryDim:this.galleryDim,getLockGroupExtrema:this.props.getLockGroupExtrema,height:this.state.height,initialXDomain:this.props.initialXDomain,initialYDomain:this.props.initialYDomain,isRangeSelection:this.props.mouseTool===zi,isShowGlobalMousePosition:this.props.isShowGlobalMousePosition,isValueScaleLocked:this.props.isValueScaleLocked,leftWidth:this.leftWidth,leftWidthNoGallery:this.leftWidthNoGallery,metaTracks:this.props.metaTracks,onMouseMoveZoom:this.props.onMouseMoveZoom,onNewTilesLoaded:this.props.onNewTilesLoaded,onScalesChanged:this.handleScalesChanged.bind(this),onTilesetInfoReceived:this.handleTilesetInfoReceived.bind(this),onTrackOptionsChanged:this.handleTrackOptionsChanged.bind(this),onValueScaleChanged:this.props.onValueScaleChanged,paddingLeft:this.props.paddingLeft,paddingTop:this.props.paddingTop,pixiRenderer:this.props.pixiRenderer,pixiStage:this.props.pixiStage,pluginDataFetchers:this.props.pluginDataFetchers,pluginTracks:this.props.pluginTracks,positionedTracks:d,registerDraggingChangedListener:this.props.registerDraggingChangedListener,removeDraggingChangedListener:this.props.removeDraggingChangedListener,setCentersFunction:this.props.setCentersFunction,svgElement:this.props.svgElement,topHeight:this.topHeight,topHeightNoGallery:this.topHeightNoGallery,uid:this.props.uid,viewOptions:this.props.viewOptions,width:this.state.width,xDomainLimits:this.props.xDomainLimits,yDomainLimits:this.props.yDomainLimits,zoomable:this.props.zoomable,zoomLimits:this.props.zoomLimits},s,u,c,l,f,h));let m=null,g=null;this.state.configTrackMenuId&&(m=A.default.createElement(Ls,{onMenuClosed:this.closeMenusBound},A.default.createElement(Qke,{ref:y=>{this.configTrackMenu=y},closeMenu:this.closeMenusBound,onAddDivisor:this.handleAddDivisorBound,onAddSeries:this.handleAddSeriesBound,onAddTrack:this.handleAddTrackBound,onChangeTrackType:this.handleChangeTrackTypeBound,onCloseTrack:this.handleCloseTrackBound,onConfigureTrack:this.handleConfigureTrackBound,onExportData:this.handleExportTrackDataBound,onLockValueScale:this.handleLockValueScaleBound,onReplaceTrack:this.handleReplaceTrackBound,onTrackOptionsChanged:this.handleTrackOptionsChangedBound,onUnlockValueScale:this.handleUnlockValueScaleBound,position:this.state.configTrackMenuLocation,theme:this.props.theme,trackOrientation:Lf(this.props.tracks,this.state.configTrackMenuId),tracks:[Ci(this.props.tracks,this.state.configTrackMenuId)]}))),this.state.closeTrackMenuId&&(g=A.default.createElement(Ls,{onMenuClosed:this.handleCloseTrackMenuClosed.bind(this)},A.default.createElement(Ms,{position:this.state.closeTrackMenuLocation,theme:this.props.theme},A.default.createElement(Q$,{onCloseTrack:this.handleCloseTrack.bind(this),tracks:[Ci(this.props.tracks,this.state.closeTrackMenuId)]}))));let v=null;this.props.chooseTrackHandler&&(v=d.filter(y=>y.track.position!=="whole").map(y=>{let T="transparent",b="none";return this.state.mouseOverOverlayUid===y.track.uid&&(T="yellow",b="1px solid black"),A.default.createElement("div",{key:y.track.uid,className:"tiled-plot-track-overlay",onClick:()=>this.handleTrackPositionChosen(y),onDragEnter:S=>{this.handleOverlayMouseEnter(y.track.uid),S.preventDefault()},onDragLeave:()=>this.handleOverlayMouseLeave(y.track.uid),onDragOver:S=>S.preventDefault(),onDrop:()=>this.handleTrackPositionChosen(y),onMouseEnter:()=>this.handleOverlayMouseEnter(y.track.uid),onMouseLeave:()=>this.handleOverlayMouseLeave(y.track.uid),style:{position:"absolute",left:y.left,top:y.top,width:y.width,height:y.height,background:T,opacity:.4,border:b,zIndex:1}})}));let E=null;if(this.xScale&&this.yScale&&this.props.editable&&this.state.trackOptions){const y=this.state.trackOptions.configComponent,T=this.state.trackOptions.track;E=A.default.createElement(y,{track:T,xScale:this.xScale,yScale:this.yScale,onCancel:()=>{this.setState({trackOptions:null})},onTrackOptionsChanged:b=>b,onSubmit:b=>{this.handleTrackOptionsChanged(this.state.trackOptions.track.uid,b),this.setState({trackOptions:null})}})}return A.default.createElement("div",{ref:y=>{this.divTiledPlot=y},className:["tiled-plot-div",ma["tiled-plot"]].join(" "),style:{marginBottom:this.props.marginBottom,marginLeft:this.props.marginLeft,marginRight:this.props.marginRight,marginTop:this.props.marginTop}},p,v,m,g,E,this.getContextMenu(),this.props.draggingHappening&&this.getIdealizedTrackPositionsOverlay())}},{key:"addEventListeners",value:function(){this.eventListeners=[],this.eventListeners.forEach(r=>document.addEventListener(r.name,r.callback,!1))}},{key:"removeEventListeners",value:function(){this.eventListeners.forEach(r=>document.removeEventListener(r.name,r.callback))}}]),n}(A.default.Component);Kw.defaultProps={isShowGlobalMousePosition:!1,pluginDataFetchers:{},pluginTracks:{},metaTracks:[],zoomable:!0},Kw.propTypes={addTrackPosition:N.exports.string,canvasElement:N.exports.object,chooseTrackHandler:N.exports.func,chromInfoPath:N.exports.string,disableTrackMenu:N.exports.bool,dragging:N.exports.bool,draggingHappening:N.exports.bool,editable:N.exports.bool,getLockGroupExtrema:N.exports.func,initialXDomain:N.exports.array,initialYDomain:N.exports.array,isShowGlobalMousePosition:N.exports.bool,isValueScaleLocked:N.exports.func,marginBottom:N.exports.number.isRequired,marginLeft:N.exports.number.isRequired,marginRight:N.exports.number.isRequired,marginTop:N.exports.number.isRequired,paddingBottom:N.exports.number.isRequired,paddingLeft:N.exports.number.isRequired,paddingRight:N.exports.number.isRequired,paddingTop:N.exports.number.isRequired,metaTracks:N.exports.array,modal:N.exports.object,mouseTool:N.exports.string,onCloseTrack:N.exports.func,onChangeTrackData:N.exports.func,onChangeTrackType:N.exports.func,onDataDomainChanged:N.exports.func,onLockValueScale:N.exports.func,onMouseMoveZoom:N.exports.func,onNewTilesLoaded:N.exports.func,onNoTrackAdded:N.exports.func,onRangeSelection:N.exports.func.isRequired,onScalesChanged:N.exports.func,onTrackOptionsChanged:N.exports.func,onTrackPositionChosen:N.exports.func,onTracksAdded:N.exports.func,onUnlockValueScale:N.exports.func,onValueScaleChanged:N.exports.func,onResizeTrack:N.exports.func,overlays:N.exports.array,openModal:N.exports.func,pixiRenderer:N.exports.object,pixiStage:N.exports.object,pluginDataFetchers:N.exports.object,pluginTracks:N.exports.object,pubSub:N.exports.object.isRequired,rangeSelection1dSize:N.exports.array,rangeSelectionToInt:N.exports.bool,registerDraggingChangedListener:N.exports.func,removeDraggingChangedListener:N.exports.func,setCentersFunction:N.exports.func,svgElement:N.exports.object,theme:N.exports.symbol.isRequired,tracks:N.exports.object,trackSourceServers:N.exports.array,uid:N.exports.string,viewOptions:N.exports.object,xDomainLimits:N.exports.array,yDomainLimits:N.exports.array,zoomable:N.exports.bool,zoomLimits:N.exports.array,zoomToDataExtentOnInit:N.exports.func};const tOe=Bc(Qy(Nl(Kw)));var tU={exports:{}},nOe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},rOe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol?"symbol":typeof e},iOe=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source;function aOe(e){var t=void 0,n=void 0,i=void 0,r=e.ownerDocument,a=r.body,o=r&&r.documentElement;return t=e.getBoundingClientRect(),n=t.left,i=t.top,n-=o.clientLeft||a.clientLeft||0,i-=o.clientTop||a.clientTop||0,{left:n,top:i}}function nU(e,t){var n=e["page"+(t?"Y":"X")+"Offset"],i="scroll"+(t?"Top":"Left");if(typeof n!="number"){var r=e.document;n=r.documentElement[i],typeof n!="number"&&(n=r.body[i])}return n}function Zw(e){return nU(e)}function Qw(e){return nU(e,!0)}function rU(e){var t=aOe(e),n=e.ownerDocument,i=n.defaultView||n.parentWindow;return t.left+=Zw(i),t.top+=Qw(i),t}function oOe(e,t,n){var i="",r=e.ownerDocument,a=n||r.defaultView.getComputedStyle(e,null);return a&&(i=a.getPropertyValue(t)||a[t]),i}var sOe=new RegExp("^("+iOe+")(?!px)[a-z%]+$","i"),lOe=/^(top|right|bottom|left)$/,Jw="currentStyle",eI="runtimeStyle",au="left",uOe="px";function cOe(e,t){var n=e[Jw]&&e[Jw][t];if(sOe.test(n)&&!lOe.test(t)){var i=e.style,r=i[au],a=e[eI][au];e[eI][au]=e[Jw][au],i[au]=t==="fontSize"?"1em":n||0,n=i.pixelLeft+uOe,i[au]=r,e[eI][au]=a}return n===""?"auto":n}var ou=void 0;typeof window<"u"&&(ou=window.getComputedStyle?oOe:cOe);function tI(e,t){for(var n=0;n<e.length;n++)t(e[n])}function iU(e){return ou(e,"boxSizing")==="border-box"}var hOe=["margin","border","padding"],nI=-1,fOe=2,rI=1,dOe=0;function pOe(e,t,n){var i={},r=e.style,a=void 0;for(a in t)t.hasOwnProperty(a)&&(i[a]=r[a],r[a]=t[a]);n.call(e);for(a in t)t.hasOwnProperty(a)&&(r[a]=i[a])}function im(e,t,n){var i=0,r=void 0,a=void 0,o=void 0;for(a=0;a<t.length;a++)if(r=t[a],r)for(o=0;o<n.length;o++){var s=void 0;r==="border"?s=r+n[o]+"Width":s=r+n[o],i+=parseFloat(ou(e,s))||0}return i}function yT(e){return e!=null&&e==e.window}var co={};tI(["Width","Height"],function(e){co["doc"+e]=function(t){var n=t.document;return Math.max(n.documentElement["scroll"+e],n.body["scroll"+e],co["viewport"+e](n))},co["viewport"+e]=function(t){var n="client"+e,i=t.document,r=i.body,a=i.documentElement,o=a[n];return i.compatMode==="CSS1Compat"&&o||r&&r[n]||o}});function aU(e,t,n){if(yT(e))return t==="width"?co.viewportWidth(e):co.viewportHeight(e);if(e.nodeType===9)return t==="width"?co.docWidth(e):co.docHeight(e);var i=t==="width"?["Left","Right"]:["Top","Bottom"],r=t==="width"?e.offsetWidth:e.offsetHeight;ou(e);var a=iU(e),o=0;(r==null||r<=0)&&(r=void 0,o=ou(e,t),(o==null||Number(o)<0)&&(o=e.style[t]||0),o=parseFloat(o)||0),n===void 0&&(n=a?rI:nI);var s=r!==void 0||a,u=r||o;if(n===nI)return s?u-im(e,["border","padding"],i):o;if(s){var c=n===fOe?-im(e,["border"],i):im(e,["margin"],i);return u+(n===rI?0:c)}return o+im(e,hOe.slice(n),i)}var mOe={position:"absolute",visibility:"hidden",display:"block"};function oU(e){var t=void 0,n=arguments;return e.offsetWidth!==0?t=aU.apply(void 0,n):pOe(e,mOe,function(){t=aU.apply(void 0,n)}),t}function $h(e,t,n){var i=n;if((typeof t>"u"?"undefined":rOe(t))==="object"){for(var r in t)t.hasOwnProperty(r)&&$h(e,r,t[r]);return}if(typeof i<"u"){typeof i=="number"&&(i+="px"),e.style[t]=i;return}return ou(e,t)}tI(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);co["outer"+t]=function(i,r){return i&&oU(i,e,r?dOe:rI)};var n=e==="width"?["Left","Right"]:["Top","Bottom"];co[e]=function(i,r){if(r!==void 0){if(i){ou(i);var a=iU(i);return a&&(r+=im(i,["padding","border"],n)),$h(i,e,r)}return}return i&&oU(i,e,nI)}});function gOe(e,t){$h(e,"position")==="static"&&(e.style.position="relative");var n=rU(e),i={},r=void 0,a=void 0;for(a in t)t.hasOwnProperty(a)&&(r=parseFloat($h(e,a))||0,i[a]=r+t[a]-n[a]);$h(e,i)}var vOe=nOe({getWindow:function(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow},offset:function(t,n){if(typeof n<"u")gOe(t,n);else return rU(t)},isWindow:yT,each:tI,css:$h,clone:function(t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);var r=t.overflow;if(r)for(var i in t)t.hasOwnProperty(i)&&(n.overflow[i]=t.overflow[i]);return n},scrollLeft:function(t,n){if(yT(t)){if(n===void 0)return Zw(t);window.scrollTo(n,Qw(t))}else{if(n===void 0)return t.scrollLeft;t.scrollLeft=n}},scrollTop:function(t,n){if(yT(t)){if(n===void 0)return Qw(t);window.scrollTo(Zw(t),n)}else{if(n===void 0)return t.scrollTop;t.scrollTop=n}},viewportWidth:0,viewportHeight:0},co),En=vOe;function yOe(e,t,n){n=n||{},t.nodeType===9&&(t=En.getWindow(t));var i=n.allowHorizontalScroll,r=n.onlyScrollIfNeeded,a=n.alignWithTop,o=n.alignWithLeft,s=n.offsetTop||0,u=n.offsetLeft||0,c=n.offsetBottom||0,l=n.offsetRight||0;i=i===void 0?!0:i;var f=En.isWindow(t),h=En.offset(e),d=En.outerHeight(e),p=En.outerWidth(e),m=void 0,g=void 0,v=void 0,E=void 0,y=void 0,T=void 0,b=void 0,S=void 0,w=void 0,D=void 0;f?(b=t,D=En.height(b),w=En.width(b),S={left:En.scrollLeft(b),top:En.scrollTop(b)},y={left:h.left-S.left-u,top:h.top-S.top-s},T={left:h.left+p-(S.left+w)+l,top:h.top+d-(S.top+D)+c},E=S):(m=En.offset(t),g=t.clientHeight,v=t.clientWidth,E={left:t.scrollLeft,top:t.scrollTop},y={left:h.left-(m.left+(parseFloat(En.css(t,"borderLeftWidth"))||0))-u,top:h.top-(m.top+(parseFloat(En.css(t,"borderTopWidth"))||0))-s},T={left:h.left+p-(m.left+v+(parseFloat(En.css(t,"borderRightWidth"))||0))+l,top:h.top+d-(m.top+g+(parseFloat(En.css(t,"borderBottomWidth"))||0))+c}),y.top<0||T.top>0?a===!0?En.scrollTop(t,E.top+y.top):a===!1?En.scrollTop(t,E.top+T.top):y.top<0?En.scrollTop(t,E.top+y.top):En.scrollTop(t,E.top+T.top):r||(a=a===void 0?!0:!!a,a?En.scrollTop(t,E.top+y.top):En.scrollTop(t,E.top+T.top)),i&&(y.left<0||T.left>0?o===!0?En.scrollLeft(t,E.left+y.left):o===!1?En.scrollLeft(t,E.left+T.left):y.left<0?En.scrollLeft(t,E.left+y.left):En.scrollLeft(t,E.left+T.left):r||(o=o===void 0?!0:!!o,o?En.scrollLeft(t,E.left+y.left):En.scrollLeft(t,E.left+T.left)))}var TOe=yOe;(function(e){e.exports=TOe})(tU);const EOe=$T(tU.exports),am=[];let iI=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.state={highlightedIndex:null,menuTop:0,menuLeft:0,menuWidth:0,isOpen:!1},r.keyDownHandlers={ArrowDown(a){a.preventDefault();const o=this.getFilteredItems().length;if(!o)return;const{highlightedIndex:s}=this.state,u=s===null||s===o-1?0:s+1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:u,isOpen:!0})},ArrowUp(a){a.preventDefault();const o=this.getFilteredItems().length;if(!o)return;const{highlightedIndex:s}=this.state,u=s===0||s===null?o-1:s-1;this._performAutoCompleteOnKeyUp=!0,this.setState({highlightedIndex:u,isOpen:!0})},Enter(a){if(this.state.isOpen!==!1)if(this.state.highlightedIndex===null)this.setState({isOpen:!1},()=>{this.inputEl.select()});else{a.preventDefault();const o=this.getFilteredItems()[this.state.highlightedIndex],s=this.props.getItemValue(o);this.setState({isOpen:!1,highlightedIndex:null},()=>{this.inputEl.setSelectionRange(s.length,s.length),this.props.onSelect(s,o)})}},Escape(){this.setState({highlightedIndex:null,isOpen:!1})}},r}return _createClass3(n,[{key:"getInitialState",value:function(){return{isOpen:!1,highlightedIndex:null}}},{key:"UNSAFE_componentWillMount",value:function(){this._ignoreBlur=!1,this._performAutoCompleteOnUpdate=!1,this._performAutoCompleteOnKeyUp=!1}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){this._performAutoCompleteOnUpdate=!0,(this.props.items!==r.items||this.state.highlightedIndex>=r.items.length)&&this.setState({highlightedIndex:null})}},{key:"componentDidUpdate",value:function(r,a){this.state.isOpen===!0&&a.isOpen===!1&&this.setMenuPositions(),this.state.isOpen&&this._performAutoCompleteOnUpdate&&(this._performAutoCompleteOnUpdate=!1,this.maybeAutoCompleteText()),this.maybeScrollItemIntoView(),a.isOpen!==this.state.isOpen&&this.props.onMenuVisibilityChange(this.state.isOpen,this.inputEl)}},{key:"maybeScrollItemIntoView",value:function(){if(this.state.isOpen===!0&&this.state.highlightedIndex!==null){const r=this.refs[`item-${this.state.highlightedIndex}`],a=this.refs.menu;r&&EOe(gn.findDOMNode(r),gn.findDOMNode(a),{onlyScrollIfNeeded:!0})}}},{key:"handleKeyDown",value:function(r){this.keyDownHandlers[r.key]?this.keyDownHandlers[r.key].call(this,r):this.setState({highlightedIndex:null,isOpen:!0})}},{key:"handleChange",value:function(r){this._performAutoCompleteOnKeyUp=!0,this.props.onChange(r,r.target.value)}},{key:"handleKeyUp",value:function(){this._performAutoCompleteOnKeyUp&&(this._performAutoCompleteOnKeyUp=!1,this.maybeAutoCompleteText())}},{key:"getFilteredItems",value:function(){let r=this.props.items;return this.props.shouldItemRender&&(r=r.filter(a=>this.props.shouldItemRender(a,this.props.value))),this.props.sortItems&&r.sort((a,o)=>this.props.sortItems(a,o,this.props.value)),r}},{key:"maybeAutoCompleteText",value:function(){if(!this.props.autoHighlight||this.props.value==="")return;const{highlightedIndex:r}=this.state,a=this.getFilteredItems();if(a.length===0)return;const o=r!==null?a[r]:a[0];this.props.getItemValue(o).toLowerCase().indexOf(this.props.value.toLowerCase())===0&&r===null&&this.setState({highlightedIndex:0})}},{key:"setMenuPositions",value:function(){const r=this.inputEl,a=r.getBoundingClientRect(),o=globalThis.window.getComputedStyle(r),s=parseInt(o.marginBottom,10)||0,u=parseInt(o.marginLeft,10)||0,c=parseInt(o.marginRight,10)||0;this.setState({menuTop:a.bottom+s,menuLeft:a.left+u,menuWidth:a.width+u+c})}},{key:"highlightItemFromMouse",value:function(r){this.setState({highlightedIndex:r})}},{key:"selectItemFromMouse",value:function(r){const a=this.props.getItemValue(r);this.setState({isOpen:!1,highlightedIndex:null},()=>{this.props.onSelect(a,r),this.inputEl.focus()})}},{key:"setIgnoreBlur",value:function(r){this._ignoreBlur=r}},{key:"renderMenu",value:function(){const r=this.getFilteredItems().map((s,u)=>{const c=this.props.renderItem(s,this.state.highlightedIndex===u,{cursor:"default"});return A.default.cloneElement(c,{onMouseDown:()=>this.setIgnoreBlur(!0),onMouseEnter:()=>this.highlightItemFromMouse(u),onClick:()=>this.selectItemFromMouse(s),ref:`item-${u}`})}),a={left:this.state.menuLeft,top:this.state.menuTop,minWidth:this.state.menuWidth};if(!r.length)return null;const o=this.props.renderMenu(r,this.props.value,a);return A.default.cloneElement(o,{ref:"menu"})}},{key:"handleInputBlur",value:function(){this.props.onFocus&&this.props.onFocus(),!this._ignoreBlur&&this.setState({isOpen:!1,highlightedIndex:null})}},{key:"handleInputFocus",value:function(){if(this.props.onFocus&&this.props.onFocus(!0),this._ignoreBlur){this.setIgnoreBlur(!1);return}this._ignoreClick=!0,this.setState({isOpen:!0})}},{key:"isInputFocused",value:function(){return this.inputEl.ownerDocument&&this.inputEl===this.inputEl.ownerDocument.activeElement}},{key:"handleInputClick",value:function(){this.isInputFocused()&&this.state.isOpen===!1?this.setState({isOpen:!0}):this.state.highlightedIndex!==null&&!this._ignoreClick&&this.selectItemFromMouse(this.getFilteredItems()[this.state.highlightedIndex]),this._ignoreClick=!1}},{key:"composeEventHandlers",value:function(r,a){return a?o=>{r(o),a(o)}:r}},{key:"render",value:function(){this.props.debug&&am.push({id:am.length,state:this.state});const{inputProps:r}=this.props;return A.default.createElement("div",{style:{...this.props.wrapperStyle},...this.props.wrapperProps},A.default.createElement("input",{...r,ref:a=>{this.inputEl=a},"aria-autocomplete":"list",autoComplete:"off",onBlur:this.composeEventHandlers(this.handleInputBlur.bind(this),r.onBlur&&r.onBlur.bind(this)),onChange:this.handleChange.bind(this),onClick:this.composeEventHandlers(this.handleInputClick.bind(this),r.onClick&&r.onClick.bind(this)),onFocus:this.composeEventHandlers(this.handleInputFocus.bind(this),r.onFocus&&r.onFocus.bind(this)),onKeyDown:this.composeEventHandlers(this.handleKeyDown.bind(this),r.onKeyDown&&r.onKeyDown.bind(this)),onKeyUp:this.composeEventHandlers(this.handleKeyUp.bind(this),r.onKeyUp&&r.onKeyUp.bind(this)),role:"combobox",value:this.props.value}),("open"in this.props?this.props.open:this.state.isOpen)&&this.renderMenu(),this.props.debug&&A.default.createElement("pre",{style:{marginLeft:300}},JSON.stringify(am.slice(am.length-5,am.length),null,2)))}}]),n}(A.default.Component);iI.defaultProps={value:"",wrapperProps:{},wrapperStyle:{display:"inline-block"},inputProps:{},onChange(){},onSelect(){},renderMenu(e,t,n){return A.default.createElement("div",{style:{...n,...this.menuStyle}},e)},shouldItemRender(){return!0},menuStyle:{borderRadius:"3px",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.1)",background:"rgba(255, 255, 255, 0.9)",padding:"2px 0",fontSize:"90%",position:"fixed",overflow:"auto",maxHeight:"50%"},autoHighlight:!0,onMenuVisibilityChange(){}},iI.propTypes={autoHighlight:N.exports.bool,debug:N.exports.bool,getItemValue:N.exports.func.isRequired,inputProps:N.exports.object,items:N.exports.array,menuStyle:N.exports.object,onChange:N.exports.func,onFocus:N.exports.func,onMenuVisibilityChange:N.exports.func,onSelect:N.exports.func,open:N.exports.bool,renderItem:N.exports.func.isRequired,renderMenu:N.exports.func,shouldItemRender:N.exports.func,sortItems:N.exports.func,value:N.exports.any,wrapperProps:N.exports.object,wrapperStyle:N.exports.object};const Uh={"genome-position-search":"_genome-position-search_1l2sx_1","genome-position-search-focus":"_genome-position-search-focus_1l2sx_2","genome-position-search-bar":"_genome-position-search-bar_1l2sx_16","genome-position-search-dark":"_genome-position-search-dark_1l2sx_34","genome-position-search-bar-button":"_genome-position-search-bar-button_1l2sx_38","genome-position-search-bar-button-focus":"_genome-position-search-bar-button-focus_1l2sx_39","genome-position-search-bar-icon":"_genome-position-search-bar-icon_1l2sx_62","genome-position-search-bar-icon-focus":"_genome-position-search-bar-icon-focus_1l2sx_63","genome-position-search-bar-suggestions":"_genome-position-search-bar-suggestions_1l2sx_83",btn:"_btn_1l2sx_95","btn-sm":"_btn-sm_1l2sx_116","btn-default":"_btn-default_1l2sx_122"};let sU=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.mounted=!1,r.uid=Pt.nice(),r.chromInfo=null,r.searchField=null,r.autocompleteMenu=null,r.xScale=null,r.yScale=null,r.prevParts=[],r.props.registerViewportChangedListener(r.scalesChanged.bind(_assertThisInitialized3(r))),r.menuPosition={left:0,top:0},r.positionText="chr4:190,998,876-191,000,255",r.state={genes:[],isFocused:!1,autocompleteServer:r.props.autocompleteServer,autocompleteId:r.props.autocompleteId,availableAssemblies:[],selectedAssembly:null},r.styles={item:{padding:"2px 6px",cursor:"default"},highlightedItem:{color:"white",background:"hsl(200, 50%, 50%)",padding:"2px 6px",cursor:"default"},menu:{border:"solid 1px #ccc"}},r.availableAutocompletes={},r.props.autocompleteId&&(r.availableAutocompletes[r.props.chromInfoId]=new Set([{server:r.props.autocompleteServer,acId:r.props.autocompleteId}])),r.availableChromSizes={},r}return _createClass3(n,[{key:"componentDidMount",value:function(){this.mounted=!0,xt(this.autocompleteMenu.inputEl).on("keypress",this.autocompleteKeyPress.bind(this)),this.findAvailableAutocompleteSources(),this.findAvailableChromSizes(),this.props.chromInfoPath&&(this.searchPosition=!0,io(this.props.chromInfoPath,r=>{if(!r){this.searchPosition=null;return}this.chromInfo=r,this.searchField=new sh(this.chromInfo),this.setPositionText()})),this.setPositionText()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.props.removeViewportChangedListener()}},{key:"onAutocompleteChange",value:function(r,a){this.positionText=a,this.setState({value:a,loading:!0}),this.changedPart=null;const o=a.split(/ /);let s=0;const u=[];let c=!1;for(let l=0;l<o.length;l++){const f=o[l].split(/-/);for(let h=0;h<f.length;h++){if(s+=1,u.push(f[h]),h===0?c=!0:c=!1,h===this.prevParts.length){this.changedPart=s-1;break}if(f[h]!==this.prevParts[h]){this.changedPart=s-1;break}}}if(this.prevParts=u,!!(this.state.autocompleteServer&&this.state.autocompleteId)&&this.changedPart!==null){this.setState({loading:!0});let l=`${this.state.autocompleteServer}/suggest/`;l+=`?d=${this.state.autocompleteId}&ac=${u[this.changedPart].toLowerCase()}`,Xe.json(l,(f,h)=>{if(f)this.setState({loading:!1,genes:[]});else if(this.changedPart>0&&!c){const d=`${this.state.autocompleteServer}/suggest/?d=${this.state.autocompleteId}&ac=${u[this.changedPart-1].toLowerCase()}-${u[this.changedPart].toLowerCase()}`;Xe.json(d,(p,m)=>{p?this.setState({loading:!1,genes:h}):this.setState({loading:!1,genes:m.concat(h)})},this.props.pubSub)}else this.setState({loading:!1,genes:h})},this.props.pubSub)}}},{key:"setAvailableAssemblies",value:function(){const r=new Set(Yi(this.availableChromSizes)),a=new Set([...r]);this.gpsbForm&&this.setState({availableAssemblies:[...a]})}},{key:"setSelectedAssembly",value:function(r){if(!this.mounted||!this.availableChromSizes[r])return;const a=[...this.availableChromSizes[r]][0];this.setState({autocompleteServer:a.server});const{server:o}=a;if(this.availableAutocompletes[r]){const s=[...this.availableAutocompletes[r]][0].acId;this.props.onSelectedAssemblyChanged(r,s,o),this.gpsbForm&&this.setState({autocompleteId:s})}else this.props.onSelectedAssemblyChanged(r,null,o),this.gpsbForm&&this.setState({autocompleteId:null});this.fetchChromInfo(a.uuid,a.server)}},{key:"setPositionText",value:function(){if(!this.mounted||!this.searchField)return;const r=this.searchField.scalesToPositionText(this.xScale,this.yScale,this.props.twoD);this.prevParts=r.split(/[ -]/),this.gpsbForm&&(this.positionText=r,this.origPositionText=r,this.autocompleteMenu.inputEl.value=r)}},{key:"scalesChanged",value:function(r,a){this.xScale=r,this.yScale=a,this.setPositionText()}},{key:"findAvailableChromSizes",value:function(){!this.props.trackSourceServers||this.props.trackSourceServers.forEach(r=>{Xe.json(`${r}/available-chrom-sizes/`,(a,o)=>{a?console.error(a):(o.results.forEach(s=>{s.coordSystem in this.availableChromSizes||(this.availableChromSizes[s.coordSystem]=new Set),this.availableChromSizes[s.coordSystem].add({server:r,uuid:s.uuid}),this.setAvailableAssemblies()}),this.searchField||this.fetchChromInfo(this.props.chromInfoId in this.availableChromSizes?[...this.availableChromSizes[this.props.chromInfoId]][0].uuid:this.props.chromInfoId,this.props.chromInfoId in this.availableChromSizes?[...this.availableChromSizes[this.props.chromInfoId]][0].server:this.props.chromInfoServer))},this.props.pubSub)})}},{key:"findAvailableAutocompleteSources",value:function(){!this.props.trackSourceServers||this.props.trackSourceServers.forEach(r=>{Xe.json(`${r}/tilesets/?limit=100&dt=gene-annotation`,(a,o)=>{a?console.error(a):(o.results.forEach(s=>{s.coordSystem in this.availableAutocompletes||(this.availableAutocompletes[s.coordSystem]=new Set),this.availableAutocompletes[s.coordSystem].add({server:r,acId:s.uuid}),this.setAvailableAssemblies()}),this.state.autocompleteId||this.gpsbForm&&this.availableAutocompletes[this.props.chromInfoId]&&this.setState({autocompleteId:[...this.availableAutocompletes[this.props.chromInfoId]][0].acId}))},this.props.pubSub)})}},{key:"fetchChromInfo",value:function(r,a){io(`${a}/chrom-sizes/?id=${r}`,o=>{!o||(Xe.json(`${a}/tileset_info/?d=${r}`,(s,u)=>{s||this.gpsbForm&&this.setState({selectedAssembly:u[r].coordSystem})},this.props.pubSub),this.chromInfo=o,this.searchField=new sh(this.chromInfo),this.setPositionText())},this.props.pubSub)}},{key:"autocompleteKeyPress",value:function(r){r.keyCode===13&&this.buttonClick()}},{key:"genePositionToSearchBarText",value:function(r){}},{key:"replaceGenesWithLoadedPositions",value:function(r){const a=this.positionText,o=a.split(" ");let s=!1;for(let c=0;c<o.length;c++){const l=o[c].split("-");let f=0,h=0,d="";for(;f<l.length;){for(h=l.length;h>f;){const p=l.slice(f,h).join("-");if(r[p.toLowerCase()]){const m=r[p.toLowerCase()],g=Math.floor((m.txEnd-m.txStart)/4);f===0&&h<l.length?d=`${m.chr}:${m.txStart-g}`:f===0&&h===l.length?d=`${m.chr}:${m.txStart-g}-${m.txEnd+g}`:d+=`- ${m.chr}:${m.txEnd+g}`,s=!0;break}else h===f+1&&(d.length&&(d+="-"),d+=p);h-=1}f=h+1}o[c]=d}const u=o.join(" ");return this.prevParts=u.split(/[ -]/),this.positionText=u,this.setState({value:u}),s?a:null}},{key:"replaceGenesWithPositions",value:function(r){const a=this.positionText.split(/[ -]/),o=[];for(let s=0;s<a.length;s++){if(a[s].length===0)continue;const u=this.searchField.parsePosition(a[s])[2];if(u===null||Number.isNaN(+u)){const c=`${this.state.autocompleteServer}/suggest/?d=${this.state.autocompleteId}&ac=${a[s].toLowerCase()}`;o.push(Xe.json(c,La,this.props.pubSub))}}Promise.all(o).then(s=>{if(s){const u={};for(let l=0;l<s.length;l++)if(!!s[l][0])for(let f=0;f<s[l].length;f++)u[s[l][f].geneName.toLowerCase()]=s[l][f];const c=this.replaceGenesWithLoadedPositions(u);r(c)}}).catch(s=>console.error(s))}},{key:"buttonClick",value:function(){this.setState({genes:[]}),this.replaceGenesWithPositions(r=>{const a=this.positionText;if(this.searchField!==null){const o=this.searchField.searchPosition(a),s=o[0];let u=o[1];if(!s){this.setPositionText();return}if(s&&(Number.isNaN(+s[0])||Number.isNaN(+s[1]))||u&&(Number.isNaN(+u[0])||Number.isNaN(+u[1])))return;u||(u=s);const c=this.xScale.copy().domain(s),l=this.yScale.copy().domain(u),[f,h,d]=Qn(c,l);r&&this.props.onGeneSearch({geneSymbol:r,range:s,centerX:f,centerY:h}),this.props.setCenters(f,h,d,XP)}})}},{key:"searchFieldSubmit",value:function(){this.buttonClick()}},{key:"pathJoin",value:function(r,a){const o=a||"/",s=new RegExp(`${o}{1,}`,"g");return r.join(o).replace(s,o)}},{key:"geneSelected",value:function(r,a){const o=this.positionText.split(" ");let s=this.changedPart;for(let u=0;u<o.length;u++){const c=o[u].split("-"),l=a.geneName.split("-");if(s>c.length-1)s-=c.length;else{if(c[s]=a.geneName,l.length===2&&s>0&&c[s-1].toLowerCase()===l[0].toLowerCase()){const f=c.slice(0,s-1);f.push(l.join("-")),s<c.length-1&&f.push(c.slice(s+1)),o[u]=f.join("-")}else o[u]=c.join("-");break}}this.prevParts=o.join(" ").split(/[ -]/),this.positionText=o.join(" "),this.setState({value:o.join(" "),genes:[]})}},{key:"handleMenuVisibilityChange",value:function(r,a){const o=a.getBoundingClientRect();this.menuPosition={left:o.left,top:o.top+o.height},this.setState({menuOpened:r})}},{key:"handleRenderMenu",value:function(r){return A.default.createElement(Ls,null,A.default.createElement("div",{className:Uh["genome-position-search-bar-suggestions"],style:{left:this.menuPosition.left,top:this.menuPosition.top}},r))}},{key:"handleAssemblySelectEvt",value:function(r){this.handleAssemblySelect(r.target.value)}},{key:"handleAssemblySelect",value:function(r){this.setSelectedAssembly(r),this.setState({selectedAssembly:r})}},{key:"focusHandler",value:function(r){this.setState({isFocused:r})}},{key:"render",value:function(){const r=this.state.availableAssemblies.map(a=>A.default.createElement("option",{key:a,value:a},a));return A.default.createElement("div",{ref:a=>{this.gpsbForm=a},className:qt({[Uh["genome-position-search-focus"]]:this.state.isFocused,[Uh["genome-position-search"]]:!this.state.isFocused,[Uh["genome-position-search-dark"]]:this.props.theme===pn})},!this.props.hideAvailableAssemblies&&A.default.createElement("select",{ref:a=>{this.assemblyPickButton=a},className:Uh["genome-position-search-bar-button"],id:this.uid,onChange:this.handleAssemblySelectEvt.bind(this),value:this.state.selectedAssembly||void 0},r),A.default.createElement(iI,{ref:a=>{this.autocompleteMenu=a},getItemValue:a=>a.geneName,inputProps:{className:Uh["genome-position-search-bar"],title:"Current location: enter a symbol or location to change the position of the current view"},items:this.state.genes,menuStyle:{position:"absolute",left:this.menuPosition.left,top:this.menuPosition.top,border:"1px solid black"},onChange:this.onAutocompleteChange.bind(this),onFocus:this.focusHandler.bind(this),onMenuVisibilityChange:this.handleMenuVisibilityChange.bind(this),onSelect:(a,o)=>this.geneSelected(a,o),onSubmit:this.searchFieldSubmit.bind(this),renderItem:(a,o)=>A.default.createElement("div",{key:a.refseqid,id:a.refseqid,style:o?this.styles.highlightedItem:this.styles.item},a.geneName),renderMenu:this.handleRenderMenu.bind(this),value:this.state.selectedAssembly?this.positionText:"No valid assembly selected",wrapperStyle:{width:"100%"}}),A.default.createElement(MZ,{onClick:this.buttonClick.bind(this),theStyle:"multitrack-header-icon"}))}}]),n}(A.default.Component);sU.propTypes={autocompleteId:N.exports.string,autocompleteServer:N.exports.string,chromInfoId:N.exports.string,chromInfoServer:N.exports.string,hideAvailableAssemblies:N.exports.bool,isFocused:N.exports.bool,pubSub:N.exports.object,onFocus:N.exports.func,onGeneSearch:N.exports.func,onSelectedAssemblyChanged:N.exports.func,registerViewportChangedListener:N.exports.func,removeViewportChangedListener:N.exports.func,setCenters:N.exports.func,theme:N.exports.symbol.isRequired,trackSourceServers:N.exports.array,twoD:N.exports.bool};const bOe=Bc(Nl(sU)),_Oe={"export-link-dialog-wrapper":"_export-link-dialog-wrapper_p9gxw_1"};let aI=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(){return _classCallCheck3(this,n),t.apply(this,arguments)}return _createClass3(n,[{key:"render",value:function(){return A.default.createElement(Mp,{okayOnly:!0,okayTitle:"Done",onOkay:this.props.onDone,title:"Share view link"},A.default.createElement("div",{className:_Oe["export-link-dialog-wrapper"]},A.default.createElement("input",{ref:r=>{!r||(this.input=r,r.focus(),r.select())},onClick:r=>{r.target.select()},placeholder:"Generating the link...",readOnly:!0,value:this.props.url}),A.default.createElement(Go,{onClick:r=>{this.input.select(),document.execCommand("copy")}},"Copy")))}}]),n}(A.default.Component);aI.defaultProps={onDone:()=>{},url:""},aI.propTypes={onDone:N.exports.func,url:N.exports.string};let lU=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.state={submenuShown:!1},r}return _createClass3(n,[{key:"getConfigureViewMenu",value:function(r,a){const o=["backgroundColor"],s={},u={};for(const c of o)if(c in Object.keys(yr)&&(s[c]={name:yr[c].name},yr[c].inlineOptions))for(const l in yr[c].inlineOptions){const f=yr[c].inlineOptions[l];s[c].children||(s[c].children={});const h={name:f.name,value:f.value};h.handler=()=>{u[c]=f.value,this.props.onOptionsChanged(u)},s[c].children[l]=h}return A.default.createElement(Ww,{key:"config-series-menu",closeMenu:this.props.closeMenu,menuItems:s,orientation:this.state.orientation,parentBbox:a,position:r,theme:this.props.theme})}},{key:"getSubmenu",value:function(){if(this.state.submenuShown){const r=this.state.submenuSourceBbox,a=this.state.orientation==="left"?{left:this.state.left,top:r.top}:{left:this.state.left+r.width+7,top:r.top};return this.state.submenuShown.option==="options"?this.getConfigureViewMenu(a,r):A.default.createElement("div",null)}return A.default.createElement("div",null)}},{key:"render",value:function(){return A.default.createElement("div",{ref:r=>{this.div=r},className:qt(mt["context-menu"],{[mt["context-menu-dark"]]:this.props.theme===pn}),"data-menu-type":"ConfigViewMenu",style:{left:this.state.left,top:this.state.top}},A.default.createElement(St,{onClick:r=>this.props.onTogglePositionSearchBox(r)},"Toggle position search box"),A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{onClick:r=>this.props.onZoomToData(r)},"Zoom to data extent"),A.default.createElement(St,{onClick:r=>this.props.onClearView(r)},"Clear View"),A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{onClick:r=>this.props.onYankZoom(r)},"Take zoom from"),A.default.createElement(St,{onClick:r=>this.props.onYankLocation(r)},"Take location from"),A.default.createElement(St,{onClick:r=>this.props.onYankZoomAndLocation(r)},"Take zoom and location from"),A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{onClick:this.props.onLockZoom},"Lock zoom with"),A.default.createElement(St,{onClick:this.props.onLockLocation},"Lock location with"),A.default.createElement(St,{onClick:this.props.onLockZoomAndLocation},"Lock zoom and location with"),A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{onClick:this.props.onTakeAndLockZoomAndLocation},"Take and lock zoom and location with"),A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{onClick:r=>this.props.onUnlockZoom(r)},"Unlock zoom"),A.default.createElement(St,{onClick:r=>this.props.onUnlockLocation(r)},"Unlock location"),A.default.createElement(St,{onClick:r=>this.props.onUnlockZoomAndLocation(r)},"Unlock zoom and location"),A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{onClick:r=>this.props.onProjectViewport(r)},"Show this viewport on"),A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{onClick:r=>this.props.onEditViewConfig(r)},"Edit view config"),A.default.createElement("hr",{className:mt["context-menu-hr"]}),A.default.createElement(St,{onClick:()=>this.props.onExportSVG()},"Export views as SVG"),A.default.createElement(St,{onClick:()=>this.props.onExportPNG()},"Export views as PNG"),A.default.createElement(St,{onClick:()=>this.props.onExportViewAsJSON()},"Export views as JSON"),A.default.createElement(St,{onClick:()=>this.props.onExportViewAsLink()},"Export views as Link"),this.getSubmenu())}}]),n}(Ms);lU.propTypes={onEditViewConfig:N.exports.func.isRequired,onExportSVG:N.exports.func,onExportPNG:N.exports.func,onExportViewAsJSON:N.exports.func,onExportViewAsLink:N.exports.func,onLockLocation:N.exports.func,onLockZoom:N.exports.func,onLockZoomAndLocation:N.exports.func,onProjectViewport:N.exports.func,onTakeAndLockZoomAndLocation:N.exports.func,onTogglePositionSearchBox:N.exports.func,onUnlockLocation:N.exports.func,onUnlockZoom:N.exports.func,onUnlockZoomAndLocation:N.exports.func,onYankLocation:N.exports.func,onYankZoom:N.exports.func,onYankZoomAndLocation:N.exports.func,onZoomToData:N.exports.func,theme:N.exports.symbol};const ea={"add-track-position-table":"_add-track-position-table_wdy5w_1","add-track-position-table-dark":"_add-track-position-table-dark_wdy5w_7","add-track-position-other":"_add-track-position-other_wdy5w_11","add-track-position-top-center":"_add-track-position-top-center_wdy5w_15","add-track-position-middle-left":"_add-track-position-middle-left_wdy5w_30","add-track-position-middle-right":"_add-track-position-middle-right_wdy5w_45","add-track-position-middle-middle":"_add-track-position-middle-middle_wdy5w_60","add-track-position-bottom-middle":"_add-track-position-bottom-middle_wdy5w_71","add-track-position-span":"_add-track-position-span_wdy5w_86"};function uU(e){return A.default.createElement("div",null,A.default.createElement("div",{className:ea["add-track-position-span"]},"Add Track..."),A.default.createElement("table",{className:qt(ea["add-track-position-table"],{[ea["add-track-position-table-dark"]]:e.theme===pn})},A.default.createElement("tbody",null,A.default.createElement("tr",{style:{height:"30px"}},A.default.createElement("td",{className:ea["add-track-position-other"]}),A.default.createElement("td",{className:ea["add-track-position-top-center"],onClick:()=>e.onTrackPositionChosen("top")},"top"),A.default.createElement("td",{className:ea["add-track-position-other"]})),A.default.createElement("tr",{style:{height:"80px"}},A.default.createElement("td",{className:ea["add-track-position-middle-left"],onClick:()=>e.onTrackPositionChosen("left")},"left"),A.default.createElement("td",{className:ea["add-track-position-middle-middle"],onClick:()=>e.onTrackPositionChosen("center")},"center"),A.default.createElement("td",{className:ea["add-track-position-middle-right"],onClick:()=>e.onTrackPositionChosen("right")},"right")),A.default.createElement("tr",{style:{height:"30px"}},A.default.createElement("td",{className:ea["add-track-position-other"]}),A.default.createElement("td",{className:ea["add-track-position-bottom-middle"],onClick:()=>e.onTrackPositionChosen("bottom")},"bottom"),A.default.createElement("td",{className:ea["add-track-position-other"]})))))}uU.propTypes={onTrackPositionChosen:N.exports.func.isRequired,theme:N.exports.symbol.isRequired};const SOe=Nl(uU);let oI=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.configImg=null,r.plusImg=null,r.state={addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null,configMenuUid:null,configMenuPosition:null,isFocused:!1,width:-1},r.handleTrackPositionChosenBound=r.handleTrackPositionChosen.bind(_assertThisInitialized3(r)),r}return _createClass3(n,[{key:"componentDidMount",value:function(){this.setState({width:this.el.clientWidth})}},{key:"checkWidth",value:function(){const r=this.el.clientWidth;r!==this.state.width&&this.setState({width:r})}},{key:"handleConfigMenuOpened",value:function(r){this.setState({configMenuUid:r,configMenuPosition:this.configImg.getBoundingClientRect()})}},{key:"handleAddTrackPositionMenuOpened",value:function(r){this.setState({addTrackPositionMenuUid:r,addTrackPositionMenuPosition:this.plusImg.getBoundingClientRect()})}},{key:"handleTrackPositionChosen",value:function(r){this.props.onTrackPositionChosen(r),this.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},{key:"render",value:function(){let r=null,a=null;this.state.addTrackPositionMenuPosition&&(a=A.default.createElement(Ls,{onMenuClosed:()=>{this.setState({addTrackPositionMenuUid:null,addTrackPositionMenuPosition:null})}},A.default.createElement(Ms,{orientation:"left",position:this.state.addTrackPositionMenuPosition,theme:this.props.theme},A.default.createElement(SOe,{onTrackPositionChosen:this.handleTrackPositionChosenBound})))),this.state.configMenuUid&&(r=A.default.createElement(Ls,{onMenuClosed:()=>this.setState({configMenuUid:null})},A.default.createElement(lU,{onClearView:()=>{this.setState({configMenuUid:null}),this.props.onClearView()},onEditViewConfig:()=>{this.setState({configMenuUid:null}),this.props.onEditViewConfig(this.state.configMenuUid)},onExportPNG:()=>{this.setState({configMenuUid:null}),this.props.onExportPNG()},onExportSVG:()=>{this.setState({configMenuUid:null}),this.props.onExportSVG()},onExportViewAsJSON:()=>{this.setState({configMenuUid:null}),this.props.onExportViewsAsJSON()},onExportViewAsLink:()=>{this.setState({configMenuUid:null}),this.props.onExportViewsAsLink()},onLockLocation:()=>{this.setState({configMenuUid:null}),this.props.onLockLocation(this.state.configMenuUid)},onLockZoom:()=>{this.setState({configMenuUid:null}),this.props.onLockZoom(this.state.configMenuUid)},onLockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onLockZoomAndLocation(this.state.configMenuUid)},onOptionsChanged:c=>{this.props.onViewOptionsChanged(c),this.setState({configMenuUid:null})},onProjectViewport:()=>{this.setState({configMenuUid:null}),this.props.onProjectViewport(this.state.configMenuUid)},onTakeAndLockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onTakeAndLockZoomAndLocation(this.state.configMenuUid)},onTogglePositionSearchBox:()=>{this.setState({configMenuUid:null}),this.props.onTogglePositionSearchBox(this.state.configMenuUid)},onUnlockLocation:()=>{this.setState({configMenuUid:null}),this.props.onUnlockLocation(this.state.configMenuUid)},onUnlockZoom:()=>{this.setState({configMenuUid:null}),this.props.onUnlockZoom(this.state.configMenuUid)},onUnlockZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onUnlockZoomAndLocation(this.state.configMenuUid)},onYankLocation:()=>{this.setState({configMenuUid:null}),this.props.onYankLocation(this.state.configMenuUid)},onYankZoom:()=>{this.setState({configMenuUid:null}),this.props.onYankZoom(this.state.configMenuUid)},onYankZoomAndLocation:()=>{this.setState({configMenuUid:null}),this.props.onYankZoomAndLocation(this.state.configMenuUid)},onZoomToData:()=>{this.setState({configMenuUid:null}),this.props.onZoomToData(this.state.configMenuUid)},orientation:"left",position:this.state.configMenuPosition,theme:this.props.theme})));const o=this.props.getGenomePositionSearchBox(this.state.isFocused,c=>{this.setState({isFocused:c})}),s=qt(this.state.isFocused?ji["multitrack-header-focus"]:ji["multitrack-header"],{[ji["multitrack-header-dark"]]:this.props.theme===pn}),u=this.state.width<=KP?ji["multitrack-header-icon-squeazed"]:ji["multitrack-header-icon"];return A.default.createElement("div",{ref:c=>{this.el=c},className:s},A.default.createElement("div",{className:ji["multitrack-header-left"]},this.props.mouseTool===zi&&A.default.createElement("svg",{className:qt(ji["mouse-tool-selection"],u),title:"Selection tool active"},A.default.createElement("use",{xlinkHref:"#select"})),A.default.createElement("div",{className:ji["multitrack-header-grabber"],title:"Drag to move the view"},A.default.createElement("div",null),A.default.createElement("div",null),A.default.createElement("div",null)),this.state.width>ZP&&A.default.createElement("div",{className:ji["multitrack-header-search"]},this.props.isGenomePositionSearchBoxVisible&&o)),A.default.createElement("nav",{className:ji["multitrack-header-nav-list"]},A.default.createElement("svg",{className:u,onClick:this.props.onAddView},A.default.createElement("title",null,"Add new view (clone this view)"),A.default.createElement("use",{xlinkHref:"#copy"})),A.default.createElement("svg",{ref:c=>{this.configImg=c},className:u,onClick:()=>this.handleConfigMenuOpened(this.props.viewUid)},A.default.createElement("title",null,"Configure this view"),A.default.createElement("use",{xlinkHref:"#cog"})),A.default.createElement("svg",{ref:c=>{this.plusImg=c},className:u,onClick:()=>this.handleAddTrackPositionMenuOpened(this.props.viewUid)},A.default.createElement("title",null,"Add Track"),A.default.createElement("use",{xlinkHref:"#plus"})),A.default.createElement("svg",{className:u,onClick:this.props.onCloseView},A.default.createElement("title",null,"Close View"),A.default.createElement("use",{xlinkHref:"#cross"}))),r,a)}}]),n}(A.default.Component);oI.defaultProps={isGenomePositionSearchBoxVisible:!1},oI.propTypes={getGenomePositionSearchBox:N.exports.func.isRequired,isGenomePositionSearchBoxVisible:N.exports.bool,mouseTool:N.exports.string.isRequired,onAddView:N.exports.func.isRequired,onClearView:N.exports.func.isRequired,onCloseView:N.exports.func.isRequired,onEditViewConfig:N.exports.func.isRequired,onExportSVG:N.exports.func.isRequired,onExportPNG:N.exports.func.isRequired,onExportViewsAsJSON:N.exports.func.isRequired,onExportViewsAsLink:N.exports.func.isRequired,onLockLocation:N.exports.func.isRequired,onLockZoom:N.exports.func.isRequired,onLockZoomAndLocation:N.exports.func.isRequired,onProjectViewport:N.exports.func.isRequired,onTakeAndLockZoomAndLocation:N.exports.func.isRequired,onTogglePositionSearchBox:N.exports.func.isRequired,onTrackPositionChosen:N.exports.func.isRequired,onUnlockLocation:N.exports.func.isRequired,onUnlockZoom:N.exports.func.isRequired,onUnlockZoomAndLocation:N.exports.func.isRequired,onViewOptionsChanged:N.exports.func.isRequired,onYankLocation:N.exports.func.isRequired,onYankZoom:N.exports.func.isRequired,onYankZoomAndLocation:N.exports.func.isRequired,onZoomToData:N.exports.func.isRequired,theme:N.exports.symbol.isRequired,viewUid:N.exports.string.isRequired};const AOe=Nl(oI);var cU={};Object.defineProperty(cU,"__esModule",{value:!0});var Bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},COe=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),DOe=A.default,om=wOe(DOe);function wOe(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function IOe(e,t){var n={};for(var i in e)t.indexOf(i)>=0||!Object.prototype.hasOwnProperty.call(e,i)||(n[i]=e[i]);return n}function kOe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hU(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function OOe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var xOe=13,POe=9,ROe=8,NOe=89,TT=90,MOe=77,fU=57,dU=219,pU=222,mU=192,LOe=27,gU=100,BOe=3e3,FOe="navigator"in globalThis&&/Win/i.test(navigator.platform),sI="navigator"in globalThis&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),ET="npm__react-simple-code-editor__textarea",HOe=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`+ET+`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`+ET+` {
    color: transparent !important;
  }

  .`+ET+`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`,vU=function(e){OOe(t,e);function t(){var n,i,r,a;kOe(this,t);for(var o=arguments.length,s=Array(o),u=0;u<o;u++)s[u]=arguments[u];return a=(i=(r=hU(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(s))),r),r.state={capture:!0},r._recordCurrentState=function(){var c=r._input;if(!!c){var l=c.value,f=c.selectionStart,h=c.selectionEnd;r._recordChange({value:l,selectionStart:f,selectionEnd:h})}},r._getLines=function(c,l){return c.substring(0,l).split(`
`)},r._recordChange=function(c){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=r._history,h=f.stack,d=f.offset;if(h.length&&d>-1){r._history.stack=h.slice(0,d+1);var p=r._history.stack.length;if(p>gU){var m=p-gU;r._history.stack=h.slice(m,p),r._history.offset=Math.max(r._history.offset-m,0)}}var g=Date.now();if(l){var v=r._history.stack[r._history.offset];if(v&&g-v.timestamp<BOe){var E=/[^a-z0-9]([a-z0-9]+)$/i,y=r._getLines(v.value,v.selectionStart).pop().match(E),T=r._getLines(c.value,c.selectionStart).pop().match(E);if(y&&T&&T[1].startsWith(y[1])){r._history.stack[r._history.offset]=Bs({},c,{timestamp:g});return}}}r._history.stack.push(Bs({},c,{timestamp:g})),r._history.offset++},r._updateInput=function(c){var l=r._input;!l||(l.value=c.value,l.selectionStart=c.selectionStart,l.selectionEnd=c.selectionEnd,r.props.onValueChange(c.value))},r._applyEdits=function(c){var l=r._input,f=r._history.stack[r._history.offset];f&&l&&(r._history.stack[r._history.offset]=Bs({},f,{selectionStart:l.selectionStart,selectionEnd:l.selectionEnd})),r._recordChange(c),r._updateInput(c)},r._undoEdit=function(){var c=r._history,l=c.stack,f=c.offset,h=l[f-1];h&&(r._updateInput(h),r._history.offset=Math.max(f-1,0))},r._redoEdit=function(){var c=r._history,l=c.stack,f=c.offset,h=l[f+1];h&&(r._updateInput(h),r._history.offset=Math.min(f+1,l.length-1))},r._handleKeyDown=function(c){var l=r.props,f=l.tabSize,h=l.insertSpaces,d=l.ignoreTabKey,p=l.onKeyDown;if(!(p&&(p(c),c.defaultPrevented))){c.keyCode===LOe&&c.target.blur();var m=c.target,g=m.value,v=m.selectionStart,E=m.selectionEnd,y=(h?" ":"	").repeat(f);if(c.keyCode===POe&&!d&&r.state.capture)if(c.preventDefault(),c.shiftKey){var T=r._getLines(g,v),b=T.length-1,S=r._getLines(g,E).length-1,w=g.split(`
`).map(function(j,H){return H>=b&&H<=S&&j.startsWith(y)?j.substring(y.length):j}).join(`
`);if(g!==w){var D=T[b];r._applyEdits({value:w,selectionStart:D.startsWith(y)?v-y.length:v,selectionEnd:E-(g.length-w.length)})}}else if(v!==E){var R=r._getLines(g,v),M=R.length-1,k=r._getLines(g,E).length-1,L=R[M];r._applyEdits({value:g.split(`
`).map(function(j,H){return H>=M&&H<=k?y+j:j}).join(`
`),selectionStart:/\S/.test(L)?v+y.length:v,selectionEnd:E+y.length*(k-M+1)})}else{var $=v+y.length;r._applyEdits({value:g.substring(0,v)+y+g.substring(E),selectionStart:$,selectionEnd:$})}else if(c.keyCode===ROe){var P=v!==E,B=g.substring(0,v);if(B.endsWith(y)&&!P){c.preventDefault();var X=v-y.length;r._applyEdits({value:g.substring(0,v-y.length)+g.substring(E),selectionStart:X,selectionEnd:X})}}else if(c.keyCode===xOe){if(v===E){var ee=r._getLines(g,v).pop(),se=ee.match(/^\s+/);if(se&&se[0]){c.preventDefault();var fe=`
`+se[0],Z=v+fe.length;r._applyEdits({value:g.substring(0,v)+fe+g.substring(E),selectionStart:Z,selectionEnd:Z})}}}else if(c.keyCode===fU||c.keyCode===dU||c.keyCode===pU||c.keyCode===mU){var he=void 0;c.keyCode===fU&&c.shiftKey?he=["(",")"]:c.keyCode===dU?c.shiftKey?he=["{","}"]:he=["[","]"]:c.keyCode===pU?c.shiftKey?he=['"','"']:he=["'","'"]:c.keyCode===mU&&!c.shiftKey&&(he=["`","`"]),v!==E&&he&&(c.preventDefault(),r._applyEdits({value:g.substring(0,v)+he[0]+g.substring(v,E)+he[1]+g.substring(E),selectionStart:v,selectionEnd:E+2}))}else(sI?c.metaKey&&c.keyCode===TT:c.ctrlKey&&c.keyCode===TT)&&!c.shiftKey&&!c.altKey?(c.preventDefault(),r._undoEdit()):(sI?c.metaKey&&c.keyCode===TT&&c.shiftKey:FOe?c.ctrlKey&&c.keyCode===NOe:c.ctrlKey&&c.keyCode===TT&&c.shiftKey)&&!c.altKey?(c.preventDefault(),r._redoEdit()):c.keyCode===MOe&&c.ctrlKey&&(sI?c.shiftKey:!0)&&(c.preventDefault(),r.setState(function(j){return{capture:!j.capture}}))}},r._handleChange=function(c){var l=c.target,f=l.value,h=l.selectionStart,d=l.selectionEnd;r._recordChange({value:f,selectionStart:h,selectionEnd:d},!0),r.props.onValueChange(f)},r._history={stack:[],offset:-1},i),hU(r,a)}return COe(t,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var i=this,r=this.props,a=r.value,o=r.style,s=r.padding,u=r.highlight,c=r.textareaId,l=r.autoFocus,f=r.disabled,h=r.form,d=r.maxLength,p=r.minLength,m=r.name,g=r.placeholder,v=r.readOnly,E=r.required,y=r.onClick,T=r.onFocus,b=r.onBlur,S=r.onKeyUp;r.onKeyDown,r.onValueChange,r.tabSize,r.insertSpaces,r.ignoreTabKey;var w=IOe(r,["value","style","padding","highlight","textareaId","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey"]),D={paddingTop:s,paddingRight:s,paddingBottom:s,paddingLeft:s},R=u(a);return om.createElement("div",Bs({},w,{style:Bs({},sm.container,o)}),om.createElement("textarea",{ref:function(k){return i._input=k},style:Bs({},sm.editor,sm.textarea,D),className:ET,id:c,value:a,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:y,onKeyUp:S,onFocus:T,onBlur:b,disabled:f,form:h,maxLength:d,minLength:p,name:m,placeholder:g,readOnly:v,required:E,autoFocus:l,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),om.createElement("pre",Bs({"aria-hidden":"true",style:Bs({},sm.editor,sm.highlight,D)},typeof R=="string"?{dangerouslySetInnerHTML:{__html:R+"<br />"}}:{children:R})),om.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:HOe}}))}},{key:"session",get:function(){return{history:this._history}},set:function(i){this._history=i.history}}]),t}(om.Component);vU.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0};var $Oe=cU.default=vU,sm={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}},lI={exports:{}};(function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
* Prism: Lightweight, robust, elegant syntax highlighting
*
* @license MIT <https://opensource.org/licenses/MIT>
* @author Lea Verou <https://lea.verou.me>
* @namespace
* @public
*/var n=function(i){var r=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,o={},s={manual:i.Prism&&i.Prism.manual,disableWorkerMessageHandler:i.Prism&&i.Prism.disableWorkerMessageHandler,util:{encode:function E(y){return y instanceof u?new u(y.type,E(y.content),y.alias):Array.isArray(y)?y.map(E):y.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(E){return Object.prototype.toString.call(E).slice(8,-1)},objId:function(E){return E.__id||Object.defineProperty(E,"__id",{value:++a}),E.__id},clone:function E(y,T){T=T||{};var b,S;switch(s.util.type(y)){case"Object":if(S=s.util.objId(y),T[S])return T[S];b={},T[S]=b;for(var w in y)y.hasOwnProperty(w)&&(b[w]=E(y[w],T));return b;case"Array":return S=s.util.objId(y),T[S]?T[S]:(b=[],T[S]=b,y.forEach(function(D,R){b[R]=E(D,T)}),b);default:return y}},getLanguage:function(E){for(;E;){var y=r.exec(E.className);if(y)return y[1].toLowerCase();E=E.parentElement}return"none"},setLanguage:function(E,y){E.className=E.className.replace(RegExp(r,"gi"),""),E.classList.add("language-"+y)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(b){var E=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(b.stack)||[])[1];if(E){var y=document.getElementsByTagName("script");for(var T in y)if(y[T].src==E)return y[T]}return null}},isActive:function(E,y,T){for(var b="no-"+y;E;){var S=E.classList;if(S.contains(y))return!0;if(S.contains(b))return!1;E=E.parentElement}return!!T}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(E,y){var T=s.util.clone(s.languages[E]);for(var b in y)T[b]=y[b];return T},insertBefore:function(E,y,T,b){b=b||s.languages;var S=b[E],w={};for(var D in S)if(S.hasOwnProperty(D)){if(D==y)for(var R in T)T.hasOwnProperty(R)&&(w[R]=T[R]);T.hasOwnProperty(D)||(w[D]=S[D])}var M=b[E];return b[E]=w,s.languages.DFS(s.languages,function(k,L){L===M&&k!=E&&(this[k]=w)}),w},DFS:function E(y,T,b,S){S=S||{};var w=s.util.objId;for(var D in y)if(y.hasOwnProperty(D)){T.call(y,D,y[D],b||D);var R=y[D],M=s.util.type(R);M==="Object"&&!S[w(R)]?(S[w(R)]=!0,E(R,T,null,S)):M==="Array"&&!S[w(R)]&&(S[w(R)]=!0,E(R,T,D,S))}}},plugins:{},highlightAll:function(E,y){s.highlightAllUnder(document,E,y)},highlightAllUnder:function(E,y,T){var b={callback:T,container:E,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",b),b.elements=Array.prototype.slice.apply(b.container.querySelectorAll(b.selector)),s.hooks.run("before-all-elements-highlight",b);for(var S=0,w;w=b.elements[S++];)s.highlightElement(w,y===!0,b.callback)},highlightElement:function(E,y,T){var b=s.util.getLanguage(E),S=s.languages[b];s.util.setLanguage(E,b);var w=E.parentElement;w&&w.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(w,b);var D=E.textContent,R={element:E,language:b,grammar:S,code:D};function M(L){R.highlightedCode=L,s.hooks.run("before-insert",R),R.element.innerHTML=R.highlightedCode,s.hooks.run("after-highlight",R),s.hooks.run("complete",R),T&&T.call(R.element)}if(s.hooks.run("before-sanity-check",R),w=R.element.parentElement,w&&w.nodeName.toLowerCase()==="pre"&&!w.hasAttribute("tabindex")&&w.setAttribute("tabindex","0"),!R.code){s.hooks.run("complete",R),T&&T.call(R.element);return}if(s.hooks.run("before-highlight",R),!R.grammar){M(s.util.encode(R.code));return}if(y&&i.Worker){var k=new Worker(s.filename);k.onmessage=function(L){M(L.data)},k.postMessage(JSON.stringify({language:R.language,code:R.code,immediateClose:!0}))}else M(s.highlight(R.code,R.grammar,R.language))},highlight:function(E,y,T){var b={code:E,grammar:y,language:T};if(s.hooks.run("before-tokenize",b),!b.grammar)throw new Error('The language "'+b.language+'" has no grammar.');return b.tokens=s.tokenize(b.code,b.grammar),s.hooks.run("after-tokenize",b),u.stringify(s.util.encode(b.tokens),b.language)},tokenize:function(E,y){var T=y.rest;if(T){for(var b in T)y[b]=T[b];delete y.rest}var S=new f;return h(S,S.head,E),l(E,S,y,S.head,0),p(S)},hooks:{all:{},add:function(E,y){var T=s.hooks.all;T[E]=T[E]||[],T[E].push(y)},run:function(E,y){var T=s.hooks.all[E];if(!(!T||!T.length))for(var b=0,S;S=T[b++];)S(y)}},Token:u};i.Prism=s;function u(E,y,T,b){this.type=E,this.content=y,this.alias=T,this.length=(b||"").length|0}u.stringify=function E(y,T){if(typeof y=="string")return y;if(Array.isArray(y)){var b="";return y.forEach(function(M){b+=E(M,T)}),b}var S={type:y.type,content:E(y.content,T),tag:"span",classes:["token",y.type],attributes:{},language:T},w=y.alias;w&&(Array.isArray(w)?Array.prototype.push.apply(S.classes,w):S.classes.push(w)),s.hooks.run("wrap",S);var D="";for(var R in S.attributes)D+=" "+R+'="'+(S.attributes[R]||"").replace(/"/g,"&quot;")+'"';return"<"+S.tag+' class="'+S.classes.join(" ")+'"'+D+">"+S.content+"</"+S.tag+">"};function c(E,y,T,b){E.lastIndex=y;var S=E.exec(T);if(S&&b&&S[1]){var w=S[1].length;S.index+=w,S[0]=S[0].slice(w)}return S}function l(E,y,T,b,S,w){for(var D in T)if(!(!T.hasOwnProperty(D)||!T[D])){var R=T[D];R=Array.isArray(R)?R:[R];for(var M=0;M<R.length;++M){if(w&&w.cause==D+","+M)return;var k=R[M],L=k.inside,$=!!k.lookbehind,P=!!k.greedy,B=k.alias;if(P&&!k.pattern.global){var X=k.pattern.toString().match(/[imsuy]*$/)[0];k.pattern=RegExp(k.pattern.source,X+"g")}for(var ee=k.pattern||k,se=b.next,fe=S;se!==y.tail&&!(w&&fe>=w.reach);fe+=se.value.length,se=se.next){var Z=se.value;if(y.length>E.length)return;if(!(Z instanceof u)){var he=1,j;if(P){if(j=c(ee,fe,E,$),!j||j.index>=E.length)break;var ae=j.index,H=j.index+j[0].length,G=fe;for(G+=se.value.length;ae>=G;)se=se.next,G+=se.value.length;if(G-=se.value.length,fe=G,se.value instanceof u)continue;for(var K=se;K!==y.tail&&(G<H||typeof K.value=="string");K=K.next)he++,G+=K.value.length;he--,Z=E.slice(fe,G),j.index-=fe}else if(j=c(ee,0,Z,$),!j)continue;var ae=j.index,pe=j[0],we=Z.slice(0,ae),Ee=Z.slice(ae+pe.length),xe=fe+Z.length;w&&xe>w.reach&&(w.reach=xe);var He=se.prev;we&&(He=h(y,He,we),fe+=we.length),d(y,He,he);var ke=new u(D,L?s.tokenize(pe,L):pe,B,pe);if(se=h(y,He,ke),Ee&&h(y,se,Ee),he>1){var Ye={cause:D+","+M,reach:xe};l(E,y,T,se.prev,fe,Ye),w&&Ye.reach>w.reach&&(w.reach=Ye.reach)}}}}}}function f(){var E={value:null,prev:null,next:null},y={value:null,prev:E,next:null};E.next=y,this.head=E,this.tail=y,this.length=0}function h(E,y,T){var b=y.next,S={value:T,prev:y,next:b};return y.next=S,b.prev=S,E.length++,S}function d(E,y,T){for(var b=y.next,S=0;S<T&&b!==E.tail;S++)b=b.next;y.next=b,b.prev=y,E.length-=S}function p(E){for(var y=[],T=E.head.next;T!==E.tail;)y.push(T.value),T=T.next;return y}if(!i.document)return i.addEventListener&&(s.disableWorkerMessageHandler||i.addEventListener("message",function(E){var y=JSON.parse(E.data),T=y.language,b=y.code,S=y.immediateClose;i.postMessage(s.highlight(b,s.languages[T],T)),S&&i.close()},!1)),s;var m=s.util.currentScript();m&&(s.filename=m.src,m.hasAttribute("data-manual")&&(s.manual=!0));function g(){s.manual||s.highlightAll()}if(!s.manual){var v=document.readyState;v==="loading"||v==="interactive"&&m&&m.defer?document.addEventListener("DOMContentLoaded",g):window.requestAnimationFrame?window.requestAnimationFrame(g):window.setTimeout(g,16)}return s}(t);e.exports&&(e.exports=n),typeof globalThis<"u"&&(globalThis.Prism=n)})(lI),Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},Prism.languages.webmanifest=Prism.languages.json;var uI={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,i){i(t)})(Pe,function(n){function i(){for(var z=arguments.length,U=Array(z),re=0;re<z;re++)U[re]=arguments[re];if(U.length>1){U[0]=U[0].slice(0,-1);for(var _e=U.length-1,Ce=1;Ce<_e;++Ce)U[Ce]=U[Ce].slice(1,-1);return U[_e]=U[_e].slice(1),U.join("")}else return U[0]}function r(z){return"(?:"+z+")"}function a(z){return z===void 0?"undefined":z===null?"null":Object.prototype.toString.call(z).split(" ").pop().split("]").shift().toLowerCase()}function o(z){return z.toUpperCase()}function s(z){return z!=null?z instanceof Array?z:typeof z.length!="number"||z.split||z.setInterval||z.call?[z]:Array.prototype.slice.call(z):[]}function u(z,U){var re=z;if(U)for(var _e in U)re[_e]=U[_e];return re}function c(z){var U="[A-Za-z]",re="[0-9]",_e=i(re,"[A-Fa-f]"),Ce=r(r("%[EFef]"+_e+"%"+_e+_e+"%"+_e+_e)+"|"+r("%[89A-Fa-f]"+_e+"%"+_e+_e)+"|"+r("%"+_e+_e)),Ge="[\\:\\/\\?\\#\\[\\]\\@]",ze="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",ct=i(Ge,ze),Tt=z?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Ht=z?"[\\uE000-\\uF8FF]":"[]",pt=i(U,re,"[\\-\\.\\_\\~]",Tt);r(U+i(U,re,"[\\+\\-\\.]")+"*"),r(r(Ce+"|"+i(pt,ze,"[\\:]"))+"*");var Nt=r(r("25[0-5]")+"|"+r("2[0-4]"+re)+"|"+r("1"+re+re)+"|"+r("0?[1-9]"+re)+"|0?0?"+re),Qt=r(Nt+"\\."+Nt+"\\."+Nt+"\\."+Nt),ht=r(_e+"{1,4}"),Ft=r(r(ht+"\\:"+ht)+"|"+Qt),Jt=r(r(ht+"\\:")+"{6}"+Ft),nn=r("\\:\\:"+r(ht+"\\:")+"{5}"+Ft),An=r(r(ht)+"?\\:\\:"+r(ht+"\\:")+"{4}"+Ft),Hr=r(r(r(ht+"\\:")+"{0,1}"+ht)+"?\\:\\:"+r(ht+"\\:")+"{3}"+Ft),$e=r(r(r(ht+"\\:")+"{0,2}"+ht)+"?\\:\\:"+r(ht+"\\:")+"{2}"+Ft),et=r(r(r(ht+"\\:")+"{0,3}"+ht)+"?\\:\\:"+ht+"\\:"+Ft),Dt=r(r(r(ht+"\\:")+"{0,4}"+ht)+"?\\:\\:"+Ft),_t=r(r(r(ht+"\\:")+"{0,5}"+ht)+"?\\:\\:"+ht),ft=r(r(r(ht+"\\:")+"{0,6}"+ht)+"?\\:\\:"),$t=r([Jt,nn,An,Hr,$e,et,Dt,_t,ft].join("|")),Ct=r(r(pt+"|"+Ce)+"+");r("[vV]"+_e+"+\\."+i(pt,ze,"[\\:]")+"+"),r(r(Ce+"|"+i(pt,ze))+"*");var kt=r(Ce+"|"+i(pt,ze,"[\\:\\@]"));return r(r(Ce+"|"+i(pt,ze,"[\\@]"))+"+"),r(r(kt+"|"+i("[\\/\\?]",Ht))+"*"),{NOT_SCHEME:new RegExp(i("[^]",U,re,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(i("[^\\%\\:]",pt,ze),"g"),NOT_HOST:new RegExp(i("[^\\%\\[\\]\\:]",pt,ze),"g"),NOT_PATH:new RegExp(i("[^\\%\\/\\:\\@]",pt,ze),"g"),NOT_PATH_NOSCHEME:new RegExp(i("[^\\%\\/\\@]",pt,ze),"g"),NOT_QUERY:new RegExp(i("[^\\%]",pt,ze,"[\\:\\@\\/\\?]",Ht),"g"),NOT_FRAGMENT:new RegExp(i("[^\\%]",pt,ze,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(i("[^]",pt,ze),"g"),UNRESERVED:new RegExp(pt,"g"),OTHER_CHARS:new RegExp(i("[^\\%]",pt,ct),"g"),PCT_ENCODED:new RegExp(Ce,"g"),IPV4ADDRESS:new RegExp("^("+Qt+")$"),IPV6ADDRESS:new RegExp("^\\[?("+$t+")"+r(r("\\%25|\\%(?!"+_e+"{2})")+"("+Ct+")")+"?\\]?$")}}var l=c(!1),f=c(!0),h=function(){function z(U,re){var _e=[],Ce=!0,Ge=!1,ze=void 0;try{for(var ct=U[Symbol.iterator](),Tt;!(Ce=(Tt=ct.next()).done)&&(_e.push(Tt.value),!(re&&_e.length===re));Ce=!0);}catch(Ht){Ge=!0,ze=Ht}finally{try{!Ce&&ct.return&&ct.return()}finally{if(Ge)throw ze}}return _e}return function(U,re){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return z(U,re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(z){if(Array.isArray(z)){for(var U=0,re=Array(z.length);U<z.length;U++)re[U]=z[U];return re}else return Array.from(z)},p=2147483647,m=36,g=1,v=26,E=38,y=700,T=72,b=128,S="-",w=/^xn--/,D=/[^\0-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,M={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=m-g,L=Math.floor,$=String.fromCharCode;function P(z){throw new RangeError(M[z])}function B(z,U){for(var re=[],_e=z.length;_e--;)re[_e]=U(z[_e]);return re}function X(z,U){var re=z.split("@"),_e="";re.length>1&&(_e=re[0]+"@",z=re[1]),z=z.replace(R,".");var Ce=z.split("."),Ge=B(Ce,U).join(".");return _e+Ge}function ee(z){for(var U=[],re=0,_e=z.length;re<_e;){var Ce=z.charCodeAt(re++);if(Ce>=55296&&Ce<=56319&&re<_e){var Ge=z.charCodeAt(re++);(Ge&64512)==56320?U.push(((Ce&1023)<<10)+(Ge&1023)+65536):(U.push(Ce),re--)}else U.push(Ce)}return U}var se=function(U){return String.fromCodePoint.apply(String,d(U))},fe=function(U){return U-48<10?U-22:U-65<26?U-65:U-97<26?U-97:m},Z=function(U,re){return U+22+75*(U<26)-((re!=0)<<5)},he=function(U,re,_e){var Ce=0;for(U=_e?L(U/y):U>>1,U+=L(U/re);U>k*v>>1;Ce+=m)U=L(U/k);return L(Ce+(k+1)*U/(U+E))},j=function(U){var re=[],_e=U.length,Ce=0,Ge=b,ze=T,ct=U.lastIndexOf(S);ct<0&&(ct=0);for(var Tt=0;Tt<ct;++Tt)U.charCodeAt(Tt)>=128&&P("not-basic"),re.push(U.charCodeAt(Tt));for(var Ht=ct>0?ct+1:0;Ht<_e;){for(var pt=Ce,Nt=1,Qt=m;;Qt+=m){Ht>=_e&&P("invalid-input");var ht=fe(U.charCodeAt(Ht++));(ht>=m||ht>L((p-Ce)/Nt))&&P("overflow"),Ce+=ht*Nt;var Ft=Qt<=ze?g:Qt>=ze+v?v:Qt-ze;if(ht<Ft)break;var Jt=m-Ft;Nt>L(p/Jt)&&P("overflow"),Nt*=Jt}var nn=re.length+1;ze=he(Ce-pt,nn,pt==0),L(Ce/nn)>p-Ge&&P("overflow"),Ge+=L(Ce/nn),Ce%=nn,re.splice(Ce++,0,Ge)}return String.fromCodePoint.apply(String,re)},H=function(U){var re=[];U=ee(U);var _e=U.length,Ce=b,Ge=0,ze=T,ct=!0,Tt=!1,Ht=void 0;try{for(var pt=U[Symbol.iterator](),Nt;!(ct=(Nt=pt.next()).done);ct=!0){var Qt=Nt.value;Qt<128&&re.push($(Qt))}}catch(Gs){Tt=!0,Ht=Gs}finally{try{!ct&&pt.return&&pt.return()}finally{if(Tt)throw Ht}}var ht=re.length,Ft=ht;for(ht&&re.push(S);Ft<_e;){var Jt=p,nn=!0,An=!1,Hr=void 0;try{for(var $e=U[Symbol.iterator](),et;!(nn=(et=$e.next()).done);nn=!0){var Dt=et.value;Dt>=Ce&&Dt<Jt&&(Jt=Dt)}}catch(Gs){An=!0,Hr=Gs}finally{try{!nn&&$e.return&&$e.return()}finally{if(An)throw Hr}}var _t=Ft+1;Jt-Ce>L((p-Ge)/_t)&&P("overflow"),Ge+=(Jt-Ce)*_t,Ce=Jt;var ft=!0,$t=!1,Ct=void 0;try{for(var kt=U[Symbol.iterator](),Wt;!(ft=(Wt=kt.next()).done);ft=!0){var rn=Wt.value;if(rn<Ce&&++Ge>p&&P("overflow"),rn==Ce){for(var an=Ge,Er=m;;Er+=m){var ta=Er<=ze?g:Er>=ze+v?v:Er-ze;if(an<ta)break;var Us=an-ta,cm=m-ta;re.push($(Z(ta+Us%cm,0))),an=L(Us/cm)}re.push($(Z(an,0))),ze=he(Ge,_t,Ft==ht),Ge=0,++Ft}}}catch(Gs){$t=!0,Ct=Gs}finally{try{!ft&&kt.return&&kt.return()}finally{if($t)throw Ct}}++Ge,++Ce}return re.join("")},G=function(U){return X(U,function(re){return w.test(re)?j(re.slice(4).toLowerCase()):re})},K=function(U){return X(U,function(re){return D.test(re)?"xn--"+H(re):re})},ae={version:"2.1.0",ucs2:{decode:ee,encode:se},decode:j,encode:H,toASCII:K,toUnicode:G},pe={};function we(z){var U=z.charCodeAt(0),re=void 0;return U<16?re="%0"+U.toString(16).toUpperCase():U<128?re="%"+U.toString(16).toUpperCase():U<2048?re="%"+(U>>6|192).toString(16).toUpperCase()+"%"+(U&63|128).toString(16).toUpperCase():re="%"+(U>>12|224).toString(16).toUpperCase()+"%"+(U>>6&63|128).toString(16).toUpperCase()+"%"+(U&63|128).toString(16).toUpperCase(),re}function Ee(z){for(var U="",re=0,_e=z.length;re<_e;){var Ce=parseInt(z.substr(re+1,2),16);if(Ce<128)U+=String.fromCharCode(Ce),re+=3;else if(Ce>=194&&Ce<224){if(_e-re>=6){var Ge=parseInt(z.substr(re+4,2),16);U+=String.fromCharCode((Ce&31)<<6|Ge&63)}else U+=z.substr(re,6);re+=6}else if(Ce>=224){if(_e-re>=9){var ze=parseInt(z.substr(re+4,2),16),ct=parseInt(z.substr(re+7,2),16);U+=String.fromCharCode((Ce&15)<<12|(ze&63)<<6|ct&63)}else U+=z.substr(re,9);re+=9}else U+=z.substr(re,3),re+=3}return U}function xe(z,U){function re(_e){var Ce=Ee(_e);return Ce.match(U.UNRESERVED)?Ce:_e}return z.scheme&&(z.scheme=String(z.scheme).replace(U.PCT_ENCODED,re).toLowerCase().replace(U.NOT_SCHEME,"")),z.userinfo!==void 0&&(z.userinfo=String(z.userinfo).replace(U.PCT_ENCODED,re).replace(U.NOT_USERINFO,we).replace(U.PCT_ENCODED,o)),z.host!==void 0&&(z.host=String(z.host).replace(U.PCT_ENCODED,re).toLowerCase().replace(U.NOT_HOST,we).replace(U.PCT_ENCODED,o)),z.path!==void 0&&(z.path=String(z.path).replace(U.PCT_ENCODED,re).replace(z.scheme?U.NOT_PATH:U.NOT_PATH_NOSCHEME,we).replace(U.PCT_ENCODED,o)),z.query!==void 0&&(z.query=String(z.query).replace(U.PCT_ENCODED,re).replace(U.NOT_QUERY,we).replace(U.PCT_ENCODED,o)),z.fragment!==void 0&&(z.fragment=String(z.fragment).replace(U.PCT_ENCODED,re).replace(U.NOT_FRAGMENT,we).replace(U.PCT_ENCODED,o)),z}function He(z){return z.replace(/^0*(.*)/,"$1")||"0"}function ke(z,U){var re=z.match(U.IPV4ADDRESS)||[],_e=h(re,2),Ce=_e[1];return Ce?Ce.split(".").map(He).join("."):z}function Ye(z,U){var re=z.match(U.IPV6ADDRESS)||[],_e=h(re,3),Ce=_e[1],Ge=_e[2];if(Ce){for(var ze=Ce.toLowerCase().split("::").reverse(),ct=h(ze,2),Tt=ct[0],Ht=ct[1],pt=Ht?Ht.split(":").map(He):[],Nt=Tt.split(":").map(He),Qt=U.IPV4ADDRESS.test(Nt[Nt.length-1]),ht=Qt?7:8,Ft=Nt.length-ht,Jt=Array(ht),nn=0;nn<ht;++nn)Jt[nn]=pt[nn]||Nt[Ft+nn]||"";Qt&&(Jt[ht-1]=ke(Jt[ht-1],U));var An=Jt.reduce(function(_t,ft,$t){if(!ft||ft==="0"){var Ct=_t[_t.length-1];Ct&&Ct.index+Ct.length===$t?Ct.length++:_t.push({index:$t,length:1})}return _t},[]),Hr=An.sort(function(_t,ft){return ft.length-_t.length})[0],$e=void 0;if(Hr&&Hr.length>1){var et=Jt.slice(0,Hr.index),Dt=Jt.slice(Hr.index+Hr.length);$e=et.join(":")+"::"+Dt.join(":")}else $e=Jt.join(":");return Ge&&($e+="%"+Ge),$e}else return z}var je=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,dt="".match(/(){0}/)[1]===void 0;function st(z){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re={},_e=U.iri!==!1?f:l;U.reference==="suffix"&&(z=(U.scheme?U.scheme+":":"")+"//"+z);var Ce=z.match(je);if(Ce){dt?(re.scheme=Ce[1],re.userinfo=Ce[3],re.host=Ce[4],re.port=parseInt(Ce[5],10),re.path=Ce[6]||"",re.query=Ce[7],re.fragment=Ce[8],isNaN(re.port)&&(re.port=Ce[5])):(re.scheme=Ce[1]||void 0,re.userinfo=z.indexOf("@")!==-1?Ce[3]:void 0,re.host=z.indexOf("//")!==-1?Ce[4]:void 0,re.port=parseInt(Ce[5],10),re.path=Ce[6]||"",re.query=z.indexOf("?")!==-1?Ce[7]:void 0,re.fragment=z.indexOf("#")!==-1?Ce[8]:void 0,isNaN(re.port)&&(re.port=z.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ce[4]:void 0)),re.host&&(re.host=Ye(ke(re.host,_e),_e)),re.scheme===void 0&&re.userinfo===void 0&&re.host===void 0&&re.port===void 0&&!re.path&&re.query===void 0?re.reference="same-document":re.scheme===void 0?re.reference="relative":re.fragment===void 0?re.reference="absolute":re.reference="uri",U.reference&&U.reference!=="suffix"&&U.reference!==re.reference&&(re.error=re.error||"URI is not a "+U.reference+" reference.");var Ge=pe[(U.scheme||re.scheme||"").toLowerCase()];if(!U.unicodeSupport&&(!Ge||!Ge.unicodeSupport)){if(re.host&&(U.domainHost||Ge&&Ge.domainHost))try{re.host=ae.toASCII(re.host.replace(_e.PCT_ENCODED,Ee).toLowerCase())}catch(ze){re.error=re.error||"Host's domain name can not be converted to ASCII via punycode: "+ze}xe(re,l)}else xe(re,_e);Ge&&Ge.parse&&Ge.parse(re,U)}else re.error=re.error||"URI can not be parsed.";return re}function qe(z,U){var re=U.iri!==!1?f:l,_e=[];return z.userinfo!==void 0&&(_e.push(z.userinfo),_e.push("@")),z.host!==void 0&&_e.push(Ye(ke(String(z.host),re),re).replace(re.IPV6ADDRESS,function(Ce,Ge,ze){return"["+Ge+(ze?"%25"+ze:"")+"]"})),(typeof z.port=="number"||typeof z.port=="string")&&(_e.push(":"),_e.push(String(z.port))),_e.length?_e.join(""):void 0}var bt=/^\.\.?\//,yt=/^\/\.(\/|$)/,Bt=/^\/\.\.(\/|$)/,On=/^\/?(?:.|\n)*?(?=\/|$)/;function gt(z){for(var U=[];z.length;)if(z.match(bt))z=z.replace(bt,"");else if(z.match(yt))z=z.replace(yt,"/");else if(z.match(Bt))z=z.replace(Bt,"/"),U.pop();else if(z==="."||z==="..")z="";else{var re=z.match(On);if(re){var _e=re[0];z=z.slice(_e.length),U.push(_e)}else throw new Error("Unexpected dot segment condition")}return U.join("")}function Oe(z){var U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},re=U.iri?f:l,_e=[],Ce=pe[(U.scheme||z.scheme||"").toLowerCase()];if(Ce&&Ce.serialize&&Ce.serialize(z,U),z.host&&!re.IPV6ADDRESS.test(z.host)){if(U.domainHost||Ce&&Ce.domainHost)try{z.host=U.iri?ae.toUnicode(z.host):ae.toASCII(z.host.replace(re.PCT_ENCODED,Ee).toLowerCase())}catch(ct){z.error=z.error||"Host's domain name can not be converted to "+(U.iri?"Unicode":"ASCII")+" via punycode: "+ct}}xe(z,re),U.reference!=="suffix"&&z.scheme&&(_e.push(z.scheme),_e.push(":"));var Ge=qe(z,U);if(Ge!==void 0&&(U.reference!=="suffix"&&_e.push("//"),_e.push(Ge),z.path&&z.path.charAt(0)!=="/"&&_e.push("/")),z.path!==void 0){var ze=z.path;!U.absolutePath&&(!Ce||!Ce.absolutePath)&&(ze=gt(ze)),Ge===void 0&&(ze=ze.replace(/^\/\//,"/%2F")),_e.push(ze)}return z.query!==void 0&&(_e.push("?"),_e.push(z.query)),z.fragment!==void 0&&(_e.push("#"),_e.push(z.fragment)),_e.join("")}function ne(z,U){var re=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_e=arguments[3],Ce={};return _e||(z=st(Oe(z,re),re),U=st(Oe(U,re),re)),re=re||{},!re.tolerant&&U.scheme?(Ce.scheme=U.scheme,Ce.userinfo=U.userinfo,Ce.host=U.host,Ce.port=U.port,Ce.path=gt(U.path||""),Ce.query=U.query):(U.userinfo!==void 0||U.host!==void 0||U.port!==void 0?(Ce.userinfo=U.userinfo,Ce.host=U.host,Ce.port=U.port,Ce.path=gt(U.path||""),Ce.query=U.query):(U.path?(U.path.charAt(0)==="/"?Ce.path=gt(U.path):((z.userinfo!==void 0||z.host!==void 0||z.port!==void 0)&&!z.path?Ce.path="/"+U.path:z.path?Ce.path=z.path.slice(0,z.path.lastIndexOf("/")+1)+U.path:Ce.path=U.path,Ce.path=gt(Ce.path)),Ce.query=U.query):(Ce.path=z.path,U.query!==void 0?Ce.query=U.query:Ce.query=z.query),Ce.userinfo=z.userinfo,Ce.host=z.host,Ce.port=z.port),Ce.scheme=z.scheme),Ce.fragment=U.fragment,Ce}function oe(z,U,re){var _e=u({scheme:"null"},re);return Oe(ne(st(z,_e),st(U,_e),_e,!0),_e)}function Te(z,U){return typeof z=="string"?z=Oe(st(z,U),U):a(z)==="object"&&(z=st(Oe(z,U),U)),z}function I(z,U,re){return typeof z=="string"?z=Oe(st(z,re),re):a(z)==="object"&&(z=Oe(z,re)),typeof U=="string"?U=Oe(st(U,re),re):a(U)==="object"&&(U=Oe(U,re)),z===U}function _(z,U){return z&&z.toString().replace(!U||!U.iri?l.ESCAPE:f.ESCAPE,we)}function C(z,U){return z&&z.toString().replace(!U||!U.iri?l.PCT_ENCODED:f.PCT_ENCODED,Ee)}var F={scheme:"http",domainHost:!0,parse:function(U,re){return U.host||(U.error=U.error||"HTTP URIs must have a host."),U},serialize:function(U,re){var _e=String(U.scheme).toLowerCase()==="https";return(U.port===(_e?443:80)||U.port==="")&&(U.port=void 0),U.path||(U.path="/"),U}},te={scheme:"https",domainHost:F.domainHost,parse:F.parse,serialize:F.serialize};function le(z){return typeof z.secure=="boolean"?z.secure:String(z.scheme).toLowerCase()==="wss"}var ve={scheme:"ws",domainHost:!0,parse:function(U,re){var _e=U;return _e.secure=le(_e),_e.resourceName=(_e.path||"/")+(_e.query?"?"+_e.query:""),_e.path=void 0,_e.query=void 0,_e},serialize:function(U,re){if((U.port===(le(U)?443:80)||U.port==="")&&(U.port=void 0),typeof U.secure=="boolean"&&(U.scheme=U.secure?"wss":"ws",U.secure=void 0),U.resourceName){var _e=U.resourceName.split("?"),Ce=h(_e,2),Ge=Ce[0],ze=Ce[1];U.path=Ge&&Ge!=="/"?Ge:void 0,U.query=ze,U.resourceName=void 0}return U.fragment=void 0,U}},Ue={scheme:"wss",domainHost:ve.domainHost,parse:ve.parse,serialize:ve.serialize},We={},nt="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",Qe="[0-9A-Fa-f]",ot=r(r("%[EFef]"+Qe+"%"+Qe+Qe+"%"+Qe+Qe)+"|"+r("%[89A-Fa-f]"+Qe+"%"+Qe+Qe)+"|"+r("%"+Qe+Qe)),xn="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Tr="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Li=i(Tr,'[\\"\\\\]'),Br="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Fr=new RegExp(nt,"g"),Ie=new RegExp(ot,"g"),ge=new RegExp(i("[^]",xn,"[\\.]",'[\\"]',Li),"g"),W=new RegExp(i("[^]",nt,Br),"g"),q=W;function me(z){var U=Ee(z);return U.match(Fr)?U:z}var Se={scheme:"mailto",parse:function(U,re){var _e=U,Ce=_e.to=_e.path?_e.path.split(","):[];if(_e.path=void 0,_e.query){for(var Ge=!1,ze={},ct=_e.query.split("&"),Tt=0,Ht=ct.length;Tt<Ht;++Tt){var pt=ct[Tt].split("=");switch(pt[0]){case"to":for(var Nt=pt[1].split(","),Qt=0,ht=Nt.length;Qt<ht;++Qt)Ce.push(Nt[Qt]);break;case"subject":_e.subject=C(pt[1],re);break;case"body":_e.body=C(pt[1],re);break;default:Ge=!0,ze[C(pt[0],re)]=C(pt[1],re);break}}Ge&&(_e.headers=ze)}_e.query=void 0;for(var Ft=0,Jt=Ce.length;Ft<Jt;++Ft){var nn=Ce[Ft].split("@");if(nn[0]=C(nn[0]),re.unicodeSupport)nn[1]=C(nn[1],re).toLowerCase();else try{nn[1]=ae.toASCII(C(nn[1],re).toLowerCase())}catch(An){_e.error=_e.error||"Email address's domain name can not be converted to ASCII via punycode: "+An}Ce[Ft]=nn.join("@")}return _e},serialize:function(U,re){var _e=U,Ce=s(U.to);if(Ce){for(var Ge=0,ze=Ce.length;Ge<ze;++Ge){var ct=String(Ce[Ge]),Tt=ct.lastIndexOf("@"),Ht=ct.slice(0,Tt).replace(Ie,me).replace(Ie,o).replace(ge,we),pt=ct.slice(Tt+1);try{pt=re.iri?ae.toUnicode(pt):ae.toASCII(C(pt,re).toLowerCase())}catch(Ft){_e.error=_e.error||"Email address's domain name can not be converted to "+(re.iri?"Unicode":"ASCII")+" via punycode: "+Ft}Ce[Ge]=Ht+"@"+pt}_e.path=Ce.join(",")}var Nt=U.headers=U.headers||{};U.subject&&(Nt.subject=U.subject),U.body&&(Nt.body=U.body);var Qt=[];for(var ht in Nt)Nt[ht]!==We[ht]&&Qt.push(ht.replace(Ie,me).replace(Ie,o).replace(W,we)+"="+Nt[ht].replace(Ie,me).replace(Ie,o).replace(q,we));return Qt.length&&(_e.query=Qt.join("&")),_e}},De=/^([^\:]+)\:(.*)/,be={scheme:"urn",parse:function(U,re){var _e=U.path&&U.path.match(De),Ce=U;if(_e){var Ge=re.scheme||Ce.scheme||"urn",ze=_e[1].toLowerCase(),ct=_e[2],Tt=Ge+":"+(re.nid||ze),Ht=pe[Tt];Ce.nid=ze,Ce.nss=ct,Ce.path=void 0,Ht&&(Ce=Ht.parse(Ce,re))}else Ce.error=Ce.error||"URN can not be parsed.";return Ce},serialize:function(U,re){var _e=re.scheme||U.scheme||"urn",Ce=U.nid,Ge=_e+":"+(re.nid||Ce),ze=pe[Ge];ze&&(U=ze.serialize(U,re));var ct=U,Tt=U.nss;return ct.path=(Ce||re.nid)+":"+Tt,ct}},de=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ye={scheme:"urn:uuid",parse:function(U,re){var _e=U;return _e.uuid=_e.nss,_e.nss=void 0,!re.tolerant&&(!_e.uuid||!_e.uuid.match(de))&&(_e.error=_e.error||"UUID is not valid."),_e},serialize:function(U,re){var _e=U;return _e.nss=(U.uuid||"").toLowerCase(),_e}};pe[F.scheme]=F,pe[te.scheme]=te,pe[ve.scheme]=ve,pe[Ue.scheme]=Ue,pe[Se.scheme]=Se,pe[be.scheme]=be,pe[ye.scheme]=ye,n.SCHEMES=pe,n.pctEncChar=we,n.pctDecChars=Ee,n.parse=st,n.removeDotSegments=gt,n.serialize=Oe,n.resolveComponents=ne,n.resolve=oe,n.normalize=Te,n.equal=I,n.escapeComponent=_,n.unescapeComponent=C,Object.defineProperty(n,"__esModule",{value:!0})})})(uI,uI.exports);var cI=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),i=a.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;r--!==0;){var o=a[r];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n},UOe=function(t){for(var n=0,i=t.length,r=0,a;r<i;)n++,a=t.charCodeAt(r++),a>=55296&&a<=56319&&r<i&&(a=t.charCodeAt(r),(a&64512)==56320&&r++);return n},Gh={copy:GOe,checkDataType:hI,checkDataTypes:zOe,coerceToTypes:jOe,toHash:fI,getProperty:dI,escapeQuotes:pI,equal:cI,ucs2length:UOe,varOccurences:WOe,varReplace:qOe,schemaHasRules:XOe,schemaHasRulesExcept:KOe,schemaUnknownRules:ZOe,toQuotedString:mI,getPathExpr:QOe,getPath:JOe,getData:nxe,unescapeFragment:rxe,unescapeJsonPointer:vI,escapeFragment:ixe,escapeJsonPointer:gI};function GOe(e,t){t=t||{};for(var n in e)t[n]=e[n];return t}function hI(e,t,n,i){var r=i?" !== ":" === ",a=i?" || ":" && ",o=i?"!":"",s=i?"":"!";switch(e){case"null":return t+r+"null";case"array":return o+"Array.isArray("+t+")";case"object":return"("+o+t+a+"typeof "+t+r+'"object"'+a+s+"Array.isArray("+t+"))";case"integer":return"(typeof "+t+r+'"number"'+a+s+"("+t+" % 1)"+a+t+r+t+(n?a+o+"isFinite("+t+")":"")+")";case"number":return"(typeof "+t+r+'"'+e+'"'+(n?a+o+"isFinite("+t+")":"")+")";default:return"typeof "+t+r+'"'+e+'"'}}function zOe(e,t,n){switch(e.length){case 1:return hI(e[0],t,n,!0);default:var i="",r=fI(e);r.array&&r.object&&(i=r.null?"(":"(!"+t+" || ",i+="typeof "+t+' !== "object")',delete r.null,delete r.array,delete r.object),r.number&&delete r.integer;for(var a in r)i+=(i?" && ":"")+hI(a,t,n,!0);return i}}var yU=fI(["string","number","integer","boolean","null"]);function jOe(e,t){if(Array.isArray(t)){for(var n=[],i=0;i<t.length;i++){var r=t[i];(yU[r]||e==="array"&&r==="array")&&(n[n.length]=r)}if(n.length)return n}else{if(yU[t])return[t];if(e==="array"&&t==="array")return["array"]}}function fI(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}var VOe=/^[a-z$_][a-z$_0-9]*$/i,YOe=/'|\\/g;function dI(e){return typeof e=="number"?"["+e+"]":VOe.test(e)?"."+e:"['"+pI(e)+"']"}function pI(e){return e.replace(YOe,"\\$&").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}function WOe(e,t){t+="[^0-9]";var n=e.match(new RegExp(t,"g"));return n?n.length:0}function qOe(e,t,n){return t+="([^0-9])",n=n.replace(/\$/g,"$$$$"),e.replace(new RegExp(t,"g"),n+"$1")}function XOe(e,t){if(typeof e=="boolean")return!e;for(var n in e)if(t[n])return!0}function KOe(e,t,n){if(typeof e=="boolean")return!e&&n!="not";for(var i in e)if(i!=n&&t[i])return!0}function ZOe(e,t){if(typeof e!="boolean"){for(var n in e)if(!t[n])return n}}function mI(e){return"'"+pI(e)+"'"}function QOe(e,t,n,i){var r=n?"'/' + "+t+(i?"":".replace(/~/g, '~0').replace(/\\//g, '~1')"):i?"'[' + "+t+" + ']'":"'[\\'' + "+t+" + '\\']'";return TU(e,r)}function JOe(e,t,n){var i=mI(n?"/"+gI(t):dI(t));return TU(e,i)}var exe=/^\/(?:[^~]|~0|~1)*$/,txe=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function nxe(e,t,n){var i,r,a,o;if(e==="")return"rootData";if(e[0]=="/"){if(!exe.test(e))throw new Error("Invalid JSON-pointer: "+e);r=e,a="rootData"}else{if(o=e.match(txe),!o)throw new Error("Invalid JSON-pointer: "+e);if(i=+o[1],r=o[2],r=="#"){if(i>=t)throw new Error("Cannot access property/index "+i+" levels up, current level is "+t);return n[t-i]}if(i>t)throw new Error("Cannot access data "+i+" levels up, current level is "+t);if(a="data"+(t-i||""),!r)return a}for(var s=a,u=r.split("/"),c=0;c<u.length;c++){var l=u[c];l&&(a+=dI(vI(l)),s+=" && "+a)}return s}function TU(e,t){return e=='""'?t:(e+" + "+t).replace(/([^\\])' \+ '/g,"$1")}function rxe(e){return vI(decodeURIComponent(e))}function ixe(e){return encodeURIComponent(gI(e))}function gI(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}function vI(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}var axe=Gh,EU=oxe;function oxe(e){axe.copy(e,this)}var bU={exports:{}},Fs=bU.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var i=typeof n=="function"?n:n.pre||function(){},r=n.post||function(){};bT(t,i,r,e,"",e)};Fs.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0},Fs.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},Fs.propsKeywords={definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},Fs.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function bT(e,t,n,i,r,a,o,s,u,c){if(i&&typeof i=="object"&&!Array.isArray(i)){t(i,r,a,o,s,u,c);for(var l in i){var f=i[l];if(Array.isArray(f)){if(l in Fs.arrayKeywords)for(var h=0;h<f.length;h++)bT(e,t,n,f[h],r+"/"+l+"/"+h,a,r,l,i,h)}else if(l in Fs.propsKeywords){if(f&&typeof f=="object")for(var d in f)bT(e,t,n,f[d],r+"/"+l+"/"+sxe(d),a,r,l,i,d)}else(l in Fs.keywords||e.allKeys&&!(l in Fs.skipKeywords))&&bT(e,t,n,f,r+"/"+l,a,r,l,i)}n(i,r,a,o,s,u,c)}}function sxe(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var lm=uI.exports,_U=cI,_T=Gh,ST=EU,lxe=bU.exports,yI=Hs;Hs.normalizeId=$s,Hs.fullPath=CT,Hs.url=DT,Hs.ids=dxe,Hs.inlineRef=TI,Hs.schema=AT;function Hs(e,t,n){var i=this._refs[n];if(typeof i=="string")if(this._refs[i])i=this._refs[i];else return Hs.call(this,e,t,i);if(i=i||this._schemas[n],i instanceof ST)return TI(i.schema,this._opts.inlineRefs)?i.schema:i.validate||this._compile(i);var r=AT.call(this,t,n),a,o,s;return r&&(a=r.schema,t=r.root,s=r.baseId),a instanceof ST?o=a.validate||e.call(this,a.schema,t,void 0,s):a!==void 0&&(o=TI(a,this._opts.inlineRefs)?a:e.call(this,a,t,void 0,s)),o}function AT(e,t){var n=lm.parse(t),i=AU(n),r=CT(this._getId(e.schema));if(Object.keys(e.schema).length===0||i!==r){var a=$s(i),o=this._refs[a];if(typeof o=="string")return uxe.call(this,e,o,n);if(o instanceof ST)o.validate||this._compile(o),e=o;else if(o=this._schemas[a],o instanceof ST){if(o.validate||this._compile(o),a==$s(t))return{schema:o,root:e,baseId:r};e=o}else return;if(!e.schema)return;r=CT(this._getId(e.schema))}return SU.call(this,n,r,e.schema,e)}function uxe(e,t,n){var i=AT.call(this,e,t);if(i){var r=i.schema,a=i.baseId;e=i.root;var o=this._getId(r);return o&&(a=DT(a,o)),SU.call(this,n,a,r,e)}}var cxe=_T.toHash(["properties","patternProperties","enum","dependencies","definitions"]);function SU(e,t,n,i){if(e.fragment=e.fragment||"",e.fragment.slice(0,1)=="/"){for(var r=e.fragment.split("/"),a=1;a<r.length;a++){var o=r[a];if(o){if(o=_T.unescapeFragment(o),n=n[o],n===void 0)break;var s;if(!cxe[o]&&(s=this._getId(n),s&&(t=DT(t,s)),n.$ref)){var u=DT(t,n.$ref),c=AT.call(this,i,u);c&&(n=c.schema,i=c.root,t=c.baseId)}}}if(n!==void 0&&n!==i.schema)return{schema:n,root:i,baseId:t}}}var hxe=_T.toHash(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum"]);function TI(e,t){if(t===!1)return!1;if(t===void 0||t===!0)return EI(e);if(t)return bI(e)<=t}function EI(e){var t;if(Array.isArray(e)){for(var n=0;n<e.length;n++)if(t=e[n],typeof t=="object"&&!EI(t))return!1}else for(var i in e)if(i=="$ref"||(t=e[i],typeof t=="object"&&!EI(t)))return!1;return!0}function bI(e){var t=0,n;if(Array.isArray(e)){for(var i=0;i<e.length;i++)if(n=e[i],typeof n=="object"&&(t+=bI(n)),t==1/0)return 1/0}else for(var r in e){if(r=="$ref")return 1/0;if(hxe[r])t++;else if(n=e[r],typeof n=="object"&&(t+=bI(n)+1),t==1/0)return 1/0}return t}function CT(e,t){t!==!1&&(e=$s(e));var n=lm.parse(e);return AU(n)}function AU(e){return lm.serialize(e).split("#")[0]+"#"}var fxe=/#\/?$/;function $s(e){return e?e.replace(fxe,""):""}function DT(e,t){return t=$s(t),lm.resolve(e,t)}function dxe(e){var t=$s(this._getId(e)),n={"":t},i={"":CT(t,!1)},r={},a=this;return lxe(e,{allKeys:!0},function(o,s,u,c,l,f,h){if(s!==""){var d=a._getId(o),p=n[c],m=i[c]+"/"+l;if(h!==void 0&&(m+="/"+(typeof h=="number"?h:_T.escapeFragment(h))),typeof d=="string"){d=p=$s(p?lm.resolve(p,d):d);var g=a._refs[d];if(typeof g=="string"&&(g=a._refs[g]),g&&g.schema){if(!_U(o,g.schema))throw new Error('id "'+d+'" resolves to more than one schema')}else if(d!=$s(m))if(d[0]=="#"){if(r[d]&&!_U(o,r[d]))throw new Error('id "'+d+'" resolves to more than one schema');r[d]=o}else a._refs[d]=m}n[s]=p,i[s]=m}}),r}var _I=yI,SI={Validation:CU(pxe),MissingRef:CU(AI)};function pxe(e){this.message="validation failed",this.errors=e,this.ajv=this.validation=!0}AI.message=function(e,t){return"can't resolve reference "+t+" from id "+e};function AI(e,t,n){this.message=n||AI.message(e,t),this.missingRef=_I.url(e,t),this.missingSchema=_I.normalizeId(_I.fullPath(this.missingRef))}function CU(e){return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var DU=function(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});var n=typeof t.cycles=="boolean"?t.cycles:!1,i=t.cmp&&function(a){return function(o){return function(s,u){var c={key:s,value:o[s]},l={key:u,value:o[u]};return a(c,l)}}}(t.cmp),r=[];return function a(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var s,u;if(Array.isArray(o)){for(u="[",s=0;s<o.length;s++)s&&(u+=","),u+=a(o[s])||"null";return u+"]"}if(o===null)return"null";if(r.indexOf(o)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var c=r.push(o)-1,l=Object.keys(o).sort(i&&i(o));for(u="",s=0;s<l.length;s++){var f=l[s],h=a(o[f]);!h||(u&&(u+=","),u+=JSON.stringify(f)+":"+h)}return r.splice(c,1),"{"+u+"}"}}(e)},wU=function(t,n,i){var r="",a=t.schema.$async===!0,o=t.util.schemaHasRulesExcept(t.schema,t.RULES.all,"$ref"),s=t.self._getId(t.schema);if(t.opts.strictKeywords){var u=t.util.schemaUnknownRules(t.schema,t.RULES.keywords);if(u){var c="unknown keyword: "+u;if(t.opts.strictKeywords==="log")t.logger.warn(c);else throw new Error(c)}}if(t.isTop&&(r+=" var validate = ",a&&(t.async=!0,r+="async "),r+="function(data, dataPath, parentData, parentDataProperty, rootData) { 'use strict'; ",s&&(t.opts.sourceCode||t.opts.processCode)&&(r+=" "+("/*# sourceURL="+s+" */")+" ")),typeof t.schema=="boolean"||!(o||t.schema.$ref)){var n="false schema",l=t.level,f=t.dataLevel,h=t.schema[n],d=t.schemaPath+t.util.getProperty(n),p=t.errSchemaPath+"/"+n,b=!t.opts.allErrors,D,m="data"+(f||""),T="valid"+l;if(t.schema===!1){t.isTop?b=!0:r+=" var "+T+" = false; ";var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(D||"false schema")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'boolean schema is false' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var v=r;r=g.pop(),!t.compositeRule&&b?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else t.isTop?a?r+=" return data; ":r+=" validate.errors = null; return true; ":r+=" var "+T+" = true; ";return t.isTop&&(r+=" }; return validate; "),r}if(t.isTop){var E=t.isTop,l=t.level=0,f=t.dataLevel=0,m="data";if(t.rootId=t.resolve.fullPath(t.self._getId(t.root.schema)),t.baseId=t.baseId||t.rootId,delete t.isTop,t.dataPathArr=[""],t.schema.default!==void 0&&t.opts.useDefaults&&t.opts.strictDefaults){var y="default is ignored in the schema root";if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}r+=" var vErrors = null; ",r+=" var errors = 0;     ",r+=" if (rootData === undefined) rootData = data; "}else{var l=t.level,f=t.dataLevel,m="data"+(f||"");if(s&&(t.baseId=t.resolve.url(t.baseId,s)),a&&!t.async)throw new Error("async schema in sync schema");r+=" var errs_"+l+" = errors;"}var T="valid"+l,b=!t.opts.allErrors,S="",w="",D,R=t.schema.type,M=Array.isArray(R);if(R&&t.opts.nullable&&t.schema.nullable===!0&&(M?R.indexOf("null")==-1&&(R=R.concat("null")):R!="null"&&(R=[R,"null"],M=!0)),M&&R.length==1&&(R=R[0],M=!1),t.schema.$ref&&o){if(t.opts.extendRefs=="fail")throw new Error('$ref: validation keywords used in schema at path "'+t.errSchemaPath+'" (see option extendRefs)');t.opts.extendRefs!==!0&&(o=!1,t.logger.warn('$ref: keywords ignored in schema at path "'+t.errSchemaPath+'"'))}if(t.schema.$comment&&t.opts.$comment&&(r+=" "+t.RULES.all.$comment.code(t,"$comment")),R){if(t.opts.coerceTypes)var k=t.util.coerceToTypes(t.opts.coerceTypes,R);var L=t.RULES.types[R];if(k||M||L===!0||L&&!yt(L)){var d=t.schemaPath+".type",p=t.errSchemaPath+"/type",d=t.schemaPath+".type",p=t.errSchemaPath+"/type",$=M?"checkDataTypes":"checkDataType";if(r+=" if ("+t.util[$](R,m,t.opts.strictNumbers,!0)+") { ",k){var P="dataType"+l,B="coerced"+l;r+=" var "+P+" = typeof "+m+"; var "+B+" = undefined; ",t.opts.coerceTypes=="array"&&(r+=" if ("+P+" == 'object' && Array.isArray("+m+") && "+m+".length == 1) { "+m+" = "+m+"[0]; "+P+" = typeof "+m+"; if ("+t.util.checkDataType(t.schema.type,m,t.opts.strictNumbers)+") "+B+" = "+m+"; } "),r+=" if ("+B+" !== undefined) ; ";var X=k;if(X)for(var ee,se=-1,fe=X.length-1;se<fe;)ee=X[se+=1],ee=="string"?r+=" else if ("+P+" == 'number' || "+P+" == 'boolean') "+B+" = '' + "+m+"; else if ("+m+" === null) "+B+" = ''; ":ee=="number"||ee=="integer"?(r+=" else if ("+P+" == 'boolean' || "+m+" === null || ("+P+" == 'string' && "+m+" && "+m+" == +"+m+" ",ee=="integer"&&(r+=" && !("+m+" % 1)"),r+=")) "+B+" = +"+m+"; "):ee=="boolean"?r+=" else if ("+m+" === 'false' || "+m+" === 0 || "+m+" === null) "+B+" = false; else if ("+m+" === 'true' || "+m+" === 1) "+B+" = true; ":ee=="null"?r+=" else if ("+m+" === '' || "+m+" === 0 || "+m+" === false) "+B+" = null; ":t.opts.coerceTypes=="array"&&ee=="array"&&(r+=" else if ("+P+" == 'string' || "+P+" == 'number' || "+P+" == 'boolean' || "+m+" == null) "+B+" = ["+m+"]; ");r+=" else {   ";var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(D||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",M?r+=""+R.join(","):r+=""+R,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",M?r+=""+R.join(","):r+=""+R,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var v=r;r=g.pop(),!t.compositeRule&&b?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } if ("+B+" !== undefined) {  ";var Z=f?"data"+(f-1||""):"parentData",he=f?t.dataPathArr[f]:"parentDataProperty";r+=" "+m+" = "+B+"; ",f||(r+="if ("+Z+" !== undefined)"),r+=" "+Z+"["+he+"] = "+B+"; } "}else{var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(D||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",M?r+=""+R.join(","):r+=""+R,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",M?r+=""+R.join(","):r+=""+R,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var v=r;r=g.pop(),!t.compositeRule&&b?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}r+=" } "}}if(t.schema.$ref&&!o)r+=" "+t.RULES.all.$ref.code(t,"$ref")+" ",b&&(r+=" } if (errors === ",E?r+="0":r+="errs_"+l,r+=") { ",w+="}");else{var j=t.RULES;if(j){for(var L,H=-1,G=j.length-1;H<G;)if(L=j[H+=1],yt(L)){if(L.type&&(r+=" if ("+t.util.checkDataType(L.type,m,t.opts.strictNumbers)+") { "),t.opts.useDefaults){if(L.type=="object"&&t.schema.properties){var h=t.schema.properties,K=Object.keys(h),ae=K;if(ae)for(var pe,we=-1,Ee=ae.length-1;we<Ee;){pe=ae[we+=1];var xe=h[pe];if(xe.default!==void 0){var He=m+t.util.getProperty(pe);if(t.compositeRule){if(t.opts.strictDefaults){var y="default is ignored for: "+He;if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}}else r+=" if ("+He+" === undefined ",t.opts.useDefaults=="empty"&&(r+=" || "+He+" === null || "+He+" === '' "),r+=" ) "+He+" = ",t.opts.useDefaults=="shared"?r+=" "+t.useDefault(xe.default)+" ":r+=" "+JSON.stringify(xe.default)+" ",r+="; "}}}else if(L.type=="array"&&Array.isArray(t.schema.items)){var ke=t.schema.items;if(ke){for(var xe,se=-1,Ye=ke.length-1;se<Ye;)if(xe=ke[se+=1],xe.default!==void 0){var He=m+"["+se+"]";if(t.compositeRule){if(t.opts.strictDefaults){var y="default is ignored for: "+He;if(t.opts.strictDefaults==="log")t.logger.warn(y);else throw new Error(y)}}else r+=" if ("+He+" === undefined ",t.opts.useDefaults=="empty"&&(r+=" || "+He+" === null || "+He+" === '' "),r+=" ) "+He+" = ",t.opts.useDefaults=="shared"?r+=" "+t.useDefault(xe.default)+" ":r+=" "+JSON.stringify(xe.default)+" ",r+="; "}}}}var je=L.rules;if(je){for(var dt,st=-1,qe=je.length-1;st<qe;)if(dt=je[st+=1],Bt(dt)){var bt=dt.code(t,dt.keyword,L.type);bt&&(r+=" "+bt+" ",b&&(S+="}"))}}if(b&&(r+=" "+S+" ",S=""),L.type&&(r+=" } ",R&&R===L.type&&!k)){r+=" else { ";var d=t.schemaPath+".type",p=t.errSchemaPath+"/type",g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(D||"type")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(p)+" , params: { type: '",M?r+=""+R.join(","):r+=""+R,r+="' } ",t.opts.messages!==!1&&(r+=" , message: 'should be ",M?r+=""+R.join(","):r+=""+R,r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+d+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+m+" "),r+=" } "):r+=" {} ";var v=r;r=g.pop(),!t.compositeRule&&b?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } "}b&&(r+=" if (errors === ",E?r+="0":r+="errs_"+l,r+=") { ",w+="}")}}}b&&(r+=" "+w+" "),E?(a?(r+=" if (errors === 0) return data;           ",r+=" else throw new ValidationError(vErrors); "):(r+=" validate.errors = vErrors; ",r+=" return errors === 0;       "),r+=" }; return validate;"):r+=" var "+T+" = errors === errs_"+l+";";function yt(gt){for(var Oe=gt.rules,ne=0;ne<Oe.length;ne++)if(Bt(Oe[ne]))return!0}function Bt(gt){return t.schema[gt.keyword]!==void 0||gt.implements&&On(gt)}function On(gt){for(var Oe=gt.implements,ne=0;ne<Oe.length;ne++)if(t.schema[Oe[ne]]!==void 0)return!0}return r},wT=yI,IT=Gh,IU=SI,mxe=DU,kU=wU,gxe=IT.ucs2length,vxe=cI,yxe=IU.Validation,Txe=CI;function CI(e,t,n,i){var r=this,a=this._opts,o=[void 0],s={},u=[],c={},l=[],f={},h=[];t=t||{schema:e,refVal:o,refs:s};var d=Exe.call(this,e,t,i),p=this._compilations[d.index];if(d.compiling)return p.callValidate=y;var m=this._formats,g=this.RULES;try{var v=T(e,t,n,i);p.validate=v;var E=p.callValidate;return E&&(E.schema=v.schema,E.errors=null,E.refs=v.refs,E.refVal=v.refVal,E.root=v.root,E.$async=v.$async,a.sourceCode&&(E.source=v.source)),v}finally{bxe.call(this,e,t,i)}function y(){var $=p.validate,P=$.apply(this,arguments);return y.errors=$.errors,P}function T($,P,B,X){var ee=!P||P&&P.schema==$;if(P.schema!=t.schema)return CI.call(r,$,P,B,X);var se=$.$async===!0,fe=kU({isTop:!0,schema:$,isRoot:ee,baseId:X,root:P,schemaPath:"",errSchemaPath:"#",errorPath:'""',MissingRefError:IU.MissingRef,RULES:g,validate:kU,util:IT,resolve:wT,resolveRef:b,usePattern:M,useDefault:k,useCustomRule:L,opts:a,formats:m,logger:r.logger,self:r});fe=kT(o,Axe)+kT(u,_xe)+kT(l,Sxe)+kT(h,Cxe)+fe,a.processCode&&(fe=a.processCode(fe,$));var Z;try{var he=new Function("self","RULES","formats","root","refVal","defaults","customRules","equal","ucs2length","ValidationError",fe);Z=he(r,g,m,t,o,l,h,vxe,gxe,yxe),o[0]=Z}catch(j){throw r.logger.error("Error compiling schema, function code:",fe),j}return Z.schema=$,Z.errors=null,Z.refs=s,Z.refVal=o,Z.root=ee?Z:P,se&&(Z.$async=!0),a.sourceCode===!0&&(Z.source={code:fe,patterns:u,defaults:l}),Z}function b($,P,B){P=wT.url($,P);var X=s[P],ee,se;if(X!==void 0)return ee=o[X],se="refVal["+X+"]",R(ee,se);if(!B&&t.refs){var fe=t.refs[P];if(fe!==void 0)return ee=t.refVal[fe],se=S(P,ee),R(ee,se)}se=S(P);var Z=wT.call(r,T,t,P);if(Z===void 0){var he=n&&n[P];he&&(Z=wT.inlineRef(he,a.inlineRefs)?he:CI.call(r,he,t,n,$))}if(Z===void 0)w(P);else return D(P,Z),R(Z,se)}function S($,P){var B=o.length;return o[B]=P,s[$]=B,"refVal"+B}function w($){delete s[$]}function D($,P){var B=s[$];o[B]=P}function R($,P){return typeof $=="object"||typeof $=="boolean"?{code:P,schema:$,inline:!0}:{code:P,$async:$&&!!$.$async}}function M($){var P=c[$];return P===void 0&&(P=c[$]=u.length,u[P]=$),"pattern"+P}function k($){switch(typeof $){case"boolean":case"number":return""+$;case"string":return IT.toQuotedString($);case"object":if($===null)return"null";var P=mxe($),B=f[P];return B===void 0&&(B=f[P]=l.length,l[B]=$),"default"+B}}function L($,P,B,X){if(r._opts.validateSchema!==!1){var ee=$.definition.dependencies;if(ee&&!ee.every(function(ae){return Object.prototype.hasOwnProperty.call(B,ae)}))throw new Error("parent schema must have all required keywords: "+ee.join(","));var se=$.definition.validateSchema;if(se){var fe=se(P);if(!fe){var Z="keyword schema is invalid: "+r.errorsText(se.errors);if(r._opts.validateSchema=="log")r.logger.error(Z);else throw new Error(Z)}}}var he=$.definition.compile,j=$.definition.inline,H=$.definition.macro,G;if(he)G=he.call(r,P,B,X);else if(H)G=H.call(r,P,B,X),a.validateSchema!==!1&&r.validateSchema(G,!0);else if(j)G=j.call(r,X,$.keyword,P,B);else if(G=$.definition.validate,!G)return;if(G===void 0)throw new Error('custom keyword "'+$.keyword+'"failed to compile');var K=h.length;return h[K]=G,{code:"customRule"+K,validate:G}}}function Exe(e,t,n){var i=OU.call(this,e,t,n);return i>=0?{index:i,compiling:!0}:(i=this._compilations.length,this._compilations[i]={schema:e,root:t,baseId:n},{index:i,compiling:!1})}function bxe(e,t,n){var i=OU.call(this,e,t,n);i>=0&&this._compilations.splice(i,1)}function OU(e,t,n){for(var i=0;i<this._compilations.length;i++){var r=this._compilations[i];if(r.schema==e&&r.root==t&&r.baseId==n)return i}return-1}function _xe(e,t){return"var pattern"+e+" = new RegExp("+IT.toQuotedString(t[e])+");"}function Sxe(e){return"var default"+e+" = defaults["+e+"];"}function Axe(e,t){return t[e]===void 0?"":"var refVal"+e+" = refVal["+e+"];"}function Cxe(e){return"var customRule"+e+" = customRules["+e+"];"}function kT(e,t){if(!e.length)return"";for(var n="",i=0;i<e.length;i++)n+=t(i,e);return n}var xU={exports:{}},OT=xU.exports=function(){this._cache={}};OT.prototype.put=function(t,n){this._cache[t]=n},OT.prototype.get=function(t){return this._cache[t]},OT.prototype.del=function(t){delete this._cache[t]},OT.prototype.clear=function(){this._cache={}};var Dxe=Gh,wxe=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Ixe=[0,31,28,31,30,31,30,31,31,30,31,30,31],kxe=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,PU=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,Oxe=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,xxe=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,RU=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,NU=/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-)*(?:[0-9a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[a-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,MU=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,LU=/^(?:\/(?:[^~/]|~0|~1)*)*$/,BU=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,FU=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,Pxe=xT;function xT(e){return e=e=="full"?"full":"fast",Dxe.copy(xT[e])}xT.fast={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,"uri-template":RU,url:NU,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:PU,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:UU,uuid:MU,"json-pointer":LU,"json-pointer-uri-fragment":BU,"relative-json-pointer":FU},xT.full={date:HU,time:$U,"date-time":Mxe,uri:Bxe,"uri-reference":xxe,"uri-template":RU,url:NU,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:PU,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,regex:UU,uuid:MU,"json-pointer":LU,"json-pointer-uri-fragment":BU,"relative-json-pointer":FU};function Rxe(e){return e%4===0&&(e%100!==0||e%400===0)}function HU(e){var t=e.match(wxe);if(!t)return!1;var n=+t[1],i=+t[2],r=+t[3];return i>=1&&i<=12&&r>=1&&r<=(i==2&&Rxe(n)?29:Ixe[i])}function $U(e,t){var n=e.match(kxe);if(!n)return!1;var i=n[1],r=n[2],a=n[3],o=n[5];return(i<=23&&r<=59&&a<=59||i==23&&r==59&&a==60)&&(!t||o)}var Nxe=/t|\s/i;function Mxe(e){var t=e.split(Nxe);return t.length==2&&HU(t[0])&&$U(t[1],!0)}var Lxe=/\/|:/;function Bxe(e){return Lxe.test(e)&&Oxe.test(e)}var Fxe=/[^\\]\\Z/;function UU(e){if(Fxe.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}var Hxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.errSchemaPath+"/"+n,c=!t.opts.allErrors,l="data"+(o||""),f="valid"+a,h,d;if(s=="#"||s=="#/")t.isRoot?(h=t.async,d="validate"):(h=t.root.schema.$async===!0,d="root.refVal[0]");else{var p=t.resolveRef(t.baseId,s,t.isRoot);if(p===void 0){var m=t.MissingRefError.message(t.baseId,s);if(t.opts.missingRefs=="fail"){t.logger.error(m);var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '$ref' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(u)+" , params: { ref: '"+t.util.escapeQuotes(s)+"' } ",t.opts.messages!==!1&&(r+=" , message: 'can\\'t resolve reference "+t.util.escapeQuotes(s)+"' "),t.opts.verbose&&(r+=" , schema: "+t.util.toQuotedString(s)+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+l+" "),r+=" } "):r+=" {} ";var v=r;r=g.pop(),!t.compositeRule&&c?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c&&(r+=" if (false) { ")}else if(t.opts.missingRefs=="ignore")t.logger.warn(m),c&&(r+=" if (true) { ");else throw new t.MissingRefError(t.baseId,s,m)}else if(p.inline){var E=t.util.copy(t);E.level++;var y="valid"+E.level;E.schema=p.schema,E.schemaPath="",E.errSchemaPath=s;var T=t.validate(E).replace(/validate\.schema/g,p.code);r+=" "+T+" ",c&&(r+=" if ("+y+") { ")}else h=p.$async===!0||t.async&&p.$async!==!1,d=p.code}if(d){var g=g||[];g.push(r),r="",t.opts.passContext?r+=" "+d+".call(this, ":r+=" "+d+"( ",r+=" "+l+", (dataPath || '')",t.errorPath!='""'&&(r+=" + "+t.errorPath);var b=o?"data"+(o-1||""):"parentData",S=o?t.dataPathArr[o]:"parentDataProperty";r+=" , "+b+" , "+S+", rootData)  ";var w=r;if(r=g.pop(),h){if(!t.async)throw new Error("async schema referenced by sync schema");c&&(r+=" var "+f+"; "),r+=" try { await "+w+"; ",c&&(r+=" "+f+" = true; "),r+=" } catch (e) { if (!(e instanceof ValidationError)) throw e; if (vErrors === null) vErrors = e.errors; else vErrors = vErrors.concat(e.errors); errors = vErrors.length; ",c&&(r+=" "+f+" = false; "),r+=" } ",c&&(r+=" if ("+f+") { ")}else r+=" if (!"+w+") { if (vErrors === null) vErrors = "+d+".errors; else vErrors = vErrors.concat("+d+".errors); errors = vErrors.length; } ",c&&(r+=" else { ")}return r},$xe=function(t,n,i){var r=" ",a=t.schema[n],o=t.schemaPath+t.util.getProperty(n),s=t.errSchemaPath+"/"+n,u=!t.opts.allErrors,c=t.util.copy(t),l="";c.level++;var f="valid"+c.level,h=c.baseId,d=!0,p=a;if(p)for(var m,g=-1,v=p.length-1;g<v;)m=p[g+=1],(t.opts.strictKeywords?typeof m=="object"&&Object.keys(m).length>0||m===!1:t.util.schemaHasRules(m,t.RULES.all))&&(d=!1,c.schema=m,c.schemaPath=o+"["+g+"]",c.errSchemaPath=s+"/"+g,r+="  "+t.validate(c)+" ",c.baseId=h,u&&(r+=" if ("+f+") { ",l+="}"));return u&&(d?r+=" if (true) { ":r+=" "+l.slice(0,-1)+" "),r},Uxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="valid"+a,d="errs__"+a,p=t.util.copy(t),m="";p.level++;var g="valid"+p.level,v=s.every(function(D){return t.opts.strictKeywords?typeof D=="object"&&Object.keys(D).length>0||D===!1:t.util.schemaHasRules(D,t.RULES.all)});if(v){var E=p.baseId;r+=" var "+d+" = errors; var "+h+" = false;  ";var y=t.compositeRule;t.compositeRule=p.compositeRule=!0;var T=s;if(T)for(var b,S=-1,w=T.length-1;S<w;)b=T[S+=1],p.schema=b,p.schemaPath=u+"["+S+"]",p.errSchemaPath=c+"/"+S,r+="  "+t.validate(p)+" ",p.baseId=E,r+=" "+h+" = "+h+" || "+g+"; if (!"+h+") { ",m+="}";t.compositeRule=p.compositeRule=y,r+=" "+m+" if (!"+h+") {   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'anyOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should match some schema in anyOf' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" } else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } ",t.opts.allErrors&&(r+=" } ")}else l&&(r+=" if (true) { ");return r},Gxe=function(t,n,i){var r=" ",a=t.schema[n],o=t.errSchemaPath+"/"+n;t.opts.allErrors;var s=t.util.toQuotedString(a);return t.opts.$comment===!0?r+=" console.log("+s+");":typeof t.opts.$comment=="function"&&(r+=" self._opts.$comment("+s+", "+t.util.toQuotedString(o)+", validate.root.schema);"),r},zxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="valid"+a,d=t.opts.$data&&s&&s.$data;d&&(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; "),d||(r+=" var schema"+a+" = validate.schema"+u+";"),r+="var "+h+" = equal("+f+", schema"+a+"); if (!"+h+") {   ";var p=p||[];p.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'const' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { allowedValue: schema"+a+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be equal to constant' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var m=r;return r=p.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",l&&(r+=" else { "),r},jxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="valid"+a,d="errs__"+a,p=t.util.copy(t),m="";p.level++;var g="valid"+p.level,v="i"+a,E=p.dataLevel=t.dataLevel+1,y="data"+E,T=t.baseId,b=t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all);if(r+="var "+d+" = errors;var "+h+";",b){var S=t.compositeRule;t.compositeRule=p.compositeRule=!0,p.schema=s,p.schemaPath=u,p.errSchemaPath=c,r+=" var "+g+" = false; for (var "+v+" = 0; "+v+" < "+f+".length; "+v+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers,!0);var w=f+"["+v+"]";p.dataPathArr[E]=v;var D=t.validate(p);p.baseId=T,t.util.varOccurences(D,y)<2?r+=" "+t.util.varReplace(D,y,w)+" ":r+=" var "+y+" = "+w+"; "+D+" ",r+=" if ("+g+") break; }  ",t.compositeRule=p.compositeRule=S,r+=" "+m+" if (!"+g+") {"}else r+=" if ("+f+".length == 0) {";var R=R||[];R.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'contains' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should contain a valid item' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var M=r;return r=R.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+M+"]); ":r+=" validate.errors = ["+M+"]; return false; ":r+=" var err = "+M+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { ",b&&(r+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; } "),t.opts.allErrors&&(r+=" } "),r},Vxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="errs__"+a,d=t.util.copy(t),p="";d.level++;var m="valid"+d.level,g={},v={},E=t.opts.ownProperties;for(S in s)if(S!="__proto__"){var y=s[S],T=Array.isArray(y)?v:g;T[S]=y}r+="var "+h+" = errors;";var b=t.errorPath;r+="var missing"+a+";";for(var S in v)if(T=v[S],T.length){if(r+=" if ( "+f+t.util.getProperty(S)+" !== undefined ",E&&(r+=" && Object.prototype.hasOwnProperty.call("+f+", '"+t.util.escapeQuotes(S)+"') "),l){r+=" && ( ";var w=T;if(w)for(var D,R=-1,M=w.length-1;R<M;){D=w[R+=1],R&&(r+=" || ");var k=t.util.getProperty(D),L=f+k;r+=" ( ( "+L+" === undefined ",E&&(r+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+t.util.escapeQuotes(D)+"') "),r+=") && (missing"+a+" = "+t.util.toQuotedString(t.opts.jsonPointers?D:k)+") ) "}r+=")) {  ";var $="missing"+a,P="' + "+$+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(b,$,!0):b+" + "+$);var B=B||[];B.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { property: '"+t.util.escapeQuotes(S)+"', missingProperty: '"+P+"', depsCount: "+T.length+", deps: '"+t.util.escapeQuotes(T.length==1?T[0]:T.join(", "))+"' } ",t.opts.messages!==!1&&(r+=" , message: 'should have ",T.length==1?r+="property "+t.util.escapeQuotes(T[0]):r+="properties "+t.util.escapeQuotes(T.join(", ")),r+=" when property "+t.util.escapeQuotes(S)+" is present' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var X=r;r=B.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+X+"]); ":r+=" validate.errors = ["+X+"]; return false; ":r+=" var err = "+X+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; "}else{r+=" ) { ";var ee=T;if(ee)for(var D,se=-1,fe=ee.length-1;se<fe;){D=ee[se+=1];var k=t.util.getProperty(D),P=t.util.escapeQuotes(D),L=f+k;t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(b,D,t.opts.jsonPointers)),r+=" if ( "+L+" === undefined ",E&&(r+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+t.util.escapeQuotes(D)+"') "),r+=") {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'dependencies' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { property: '"+t.util.escapeQuotes(S)+"', missingProperty: '"+P+"', depsCount: "+T.length+", deps: '"+t.util.escapeQuotes(T.length==1?T[0]:T.join(", "))+"' } ",t.opts.messages!==!1&&(r+=" , message: 'should have ",T.length==1?r+="property "+t.util.escapeQuotes(T[0]):r+="properties "+t.util.escapeQuotes(T.join(", ")),r+=" when property "+t.util.escapeQuotes(S)+" is present' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}r+=" }   ",l&&(p+="}",r+=" else { ")}t.errorPath=b;var Z=d.baseId;for(var S in g){var y=g[S];(t.opts.strictKeywords?typeof y=="object"&&Object.keys(y).length>0||y===!1:t.util.schemaHasRules(y,t.RULES.all))&&(r+=" "+m+" = true; if ( "+f+t.util.getProperty(S)+" !== undefined ",E&&(r+=" && Object.prototype.hasOwnProperty.call("+f+", '"+t.util.escapeQuotes(S)+"') "),r+=") { ",d.schema=y,d.schemaPath=u+t.util.getProperty(S),d.errSchemaPath=c+"/"+t.util.escapeFragment(S),r+="  "+t.validate(d)+" ",d.baseId=Z,r+=" }  ",l&&(r+=" if ("+m+") { ",p+="}"))}return l&&(r+="   "+p+" if ("+h+" == errors) {"),r},Yxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="valid"+a,d=t.opts.$data&&s&&s.$data;d&&(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ");var p="i"+a,m="schema"+a;d||(r+=" var "+m+" = validate.schema"+u+";"),r+="var "+h+";",d&&(r+=" if (schema"+a+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+a+")) "+h+" = false; else {"),r+=""+h+" = false;for (var "+p+"=0; "+p+"<"+m+".length; "+p+"++) if (equal("+f+", "+m+"["+p+"])) { "+h+" = true; break; }",d&&(r+="  }  "),r+=" if (!"+h+") {   ";var g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'enum' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { allowedValues: schema"+a+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be equal to one of the allowed values' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var v=r;return r=g.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" }",l&&(r+=" else { "),r},Wxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||"");if(t.opts.format===!1)return l&&(r+=" if (true) { "),r;var h=t.opts.$data&&s&&s.$data,d;h?(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",d="schema"+a):d=s;var p=t.opts.unknownFormats,m=Array.isArray(p);if(h){var g="format"+a,v="isObject"+a,E="formatType"+a;r+=" var "+g+" = formats["+d+"]; var "+v+" = typeof "+g+" == 'object' && !("+g+" instanceof RegExp) && "+g+".validate; var "+E+" = "+v+" && "+g+".type || 'string'; if ("+v+") { ",t.async&&(r+=" var async"+a+" = "+g+".async; "),r+=" "+g+" = "+g+".validate; } if (  ",h&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),r+=" (",p!="ignore"&&(r+=" ("+d+" && !"+g+" ",m&&(r+=" && self._opts.unknownFormats.indexOf("+d+") == -1 "),r+=") || "),r+=" ("+g+" && "+E+" == '"+i+"' && !(typeof "+g+" == 'function' ? ",t.async?r+=" (async"+a+" ? await "+g+"("+f+") : "+g+"("+f+")) ":r+=" "+g+"("+f+") ",r+=" : "+g+".test("+f+"))))) {"}else{var g=t.formats[s];if(!g){if(p=="ignore")return t.logger.warn('unknown format "'+s+'" ignored in schema at path "'+t.errSchemaPath+'"'),l&&(r+=" if (true) { "),r;if(m&&p.indexOf(s)>=0)return l&&(r+=" if (true) { "),r;throw new Error('unknown format "'+s+'" is used in schema at path "'+t.errSchemaPath+'"')}var v=typeof g=="object"&&!(g instanceof RegExp)&&g.validate,E=v&&g.type||"string";if(v){var y=g.async===!0;g=g.validate}if(E!=i)return l&&(r+=" if (true) { "),r;if(y){if(!t.async)throw new Error("async format in sync schema");var T="formats"+t.util.getProperty(s)+".validate";r+=" if (!(await "+T+"("+f+"))) { "}else{r+=" if (! ";var T="formats"+t.util.getProperty(s);v&&(T+=".validate"),typeof g=="function"?r+=" "+T+"("+f+") ":r+=" "+T+".test("+f+") ",r+=") { "}}var b=b||[];b.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'format' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { format:  ",h?r+=""+d:r+=""+t.util.toQuotedString(s),r+="  } ",t.opts.messages!==!1&&(r+=` , message: 'should match format "`,h?r+="' + "+d+" + '":r+=""+t.util.escapeQuotes(s),r+=`"' `),t.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+u:r+=""+t.util.toQuotedString(s),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var S=r;return r=b.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+S+"]); ":r+=" validate.errors = ["+S+"]; return false; ":r+=" var err = "+S+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",l&&(r+=" else { "),r},qxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="valid"+a,d="errs__"+a,p=t.util.copy(t);p.level++;var m="valid"+p.level,g=t.schema.then,v=t.schema.else,E=g!==void 0&&(t.opts.strictKeywords?typeof g=="object"&&Object.keys(g).length>0||g===!1:t.util.schemaHasRules(g,t.RULES.all)),y=v!==void 0&&(t.opts.strictKeywords?typeof v=="object"&&Object.keys(v).length>0||v===!1:t.util.schemaHasRules(v,t.RULES.all)),T=p.baseId;if(E||y){var b;p.createErrors=!1,p.schema=s,p.schemaPath=u,p.errSchemaPath=c,r+=" var "+d+" = errors; var "+h+" = true;  ";var S=t.compositeRule;t.compositeRule=p.compositeRule=!0,r+="  "+t.validate(p)+" ",p.baseId=T,p.createErrors=!0,r+="  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }  ",t.compositeRule=p.compositeRule=S,E?(r+=" if ("+m+") {  ",p.schema=t.schema.then,p.schemaPath=t.schemaPath+".then",p.errSchemaPath=t.errSchemaPath+"/then",r+="  "+t.validate(p)+" ",p.baseId=T,r+=" "+h+" = "+m+"; ",E&&y?(b="ifClause"+a,r+=" var "+b+" = 'then'; "):b="'then'",r+=" } ",y&&(r+=" else { ")):r+=" if (!"+m+") { ",y&&(p.schema=t.schema.else,p.schemaPath=t.schemaPath+".else",p.errSchemaPath=t.errSchemaPath+"/else",r+="  "+t.validate(p)+" ",p.baseId=T,r+=" "+h+" = "+m+"; ",E&&y?(b="ifClause"+a,r+=" var "+b+" = 'else'; "):b="'else'",r+=" } "),r+=" if (!"+h+") {   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'if' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { failingKeyword: "+b+" } ",t.opts.messages!==!1&&(r+=` , message: 'should match "' + `+b+` + '" schema' `),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+=" }   ",l&&(r+=" else { ")}else l&&(r+=" if (true) { ");return r},Xxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="valid"+a,d="errs__"+a,p=t.util.copy(t),m="";p.level++;var g="valid"+p.level,v="i"+a,E=p.dataLevel=t.dataLevel+1,y="data"+E,T=t.baseId;if(r+="var "+d+" = errors;var "+h+";",Array.isArray(s)){var b=t.schema.additionalItems;if(b===!1){r+=" "+h+" = "+f+".length <= "+s.length+"; ";var S=c;c=t.errSchemaPath+"/additionalItems",r+="  if (!"+h+") {   ";var w=w||[];w.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'additionalItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+s.length+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have more than "+s.length+" items' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var D=r;r=w.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+D+"]); ":r+=" validate.errors = ["+D+"]; return false; ":r+=" var err = "+D+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",c=S,l&&(m+="}",r+=" else { ")}var R=s;if(R){for(var M,k=-1,L=R.length-1;k<L;)if(M=R[k+=1],t.opts.strictKeywords?typeof M=="object"&&Object.keys(M).length>0||M===!1:t.util.schemaHasRules(M,t.RULES.all)){r+=" "+g+" = true; if ("+f+".length > "+k+") { ";var $=f+"["+k+"]";p.schema=M,p.schemaPath=u+"["+k+"]",p.errSchemaPath=c+"/"+k,p.errorPath=t.util.getPathExpr(t.errorPath,k,t.opts.jsonPointers,!0),p.dataPathArr[E]=k;var P=t.validate(p);p.baseId=T,t.util.varOccurences(P,y)<2?r+=" "+t.util.varReplace(P,y,$)+" ":r+=" var "+y+" = "+$+"; "+P+" ",r+=" }  ",l&&(r+=" if ("+g+") { ",m+="}")}}if(typeof b=="object"&&(t.opts.strictKeywords?typeof b=="object"&&Object.keys(b).length>0||b===!1:t.util.schemaHasRules(b,t.RULES.all))){p.schema=b,p.schemaPath=t.schemaPath+".additionalItems",p.errSchemaPath=t.errSchemaPath+"/additionalItems",r+=" "+g+" = true; if ("+f+".length > "+s.length+") {  for (var "+v+" = "+s.length+"; "+v+" < "+f+".length; "+v+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers,!0);var $=f+"["+v+"]";p.dataPathArr[E]=v;var P=t.validate(p);p.baseId=T,t.util.varOccurences(P,y)<2?r+=" "+t.util.varReplace(P,y,$)+" ":r+=" var "+y+" = "+$+"; "+P+" ",l&&(r+=" if (!"+g+") break; "),r+=" } }  ",l&&(r+=" if ("+g+") { ",m+="}")}}else if(t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){p.schema=s,p.schemaPath=u,p.errSchemaPath=c,r+="  for (var "+v+" = "+0+"; "+v+" < "+f+".length; "+v+"++) { ",p.errorPath=t.util.getPathExpr(t.errorPath,v,t.opts.jsonPointers,!0);var $=f+"["+v+"]";p.dataPathArr[E]=v;var P=t.validate(p);p.baseId=T,t.util.varOccurences(P,y)<2?r+=" "+t.util.varReplace(P,y,$)+" ":r+=" var "+y+" = "+$+"; "+P+" ",l&&(r+=" if (!"+g+") break; "),r+=" }"}return l&&(r+=" "+m+" if ("+d+" == errors) {"),r},GU=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,T,f="data"+(o||""),h=t.opts.$data&&s&&s.$data,d;h?(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",d="schema"+a):d=s;var p=n=="maximum",m=p?"exclusiveMaximum":"exclusiveMinimum",g=t.schema[m],v=t.opts.$data&&g&&g.$data,E=p?"<":">",y=p?">":"<",T=void 0;if(!(h||typeof s=="number"||s===void 0))throw new Error(n+" must be number");if(!(v||g===void 0||typeof g=="number"||typeof g=="boolean"))throw new Error(m+" must be number or boolean");if(v){var b=t.util.getData(g.$data,o,t.dataPathArr),S="exclusive"+a,w="exclType"+a,D="exclIsNumber"+a,R="op"+a,M="' + "+R+" + '";r+=" var schemaExcl"+a+" = "+b+"; ",b="schemaExcl"+a,r+=" var "+S+"; var "+w+" = typeof "+b+"; if ("+w+" != 'boolean' && "+w+" != 'undefined' && "+w+" != 'number') { ";var T=m,k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(T||"_exclusiveLimit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: '"+m+" should be boolean' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var L=r;r=k.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else if ( ",h&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),r+=" "+w+" == 'number' ? ( ("+S+" = "+d+" === undefined || "+b+" "+E+"= "+d+") ? "+f+" "+y+"= "+b+" : "+f+" "+y+" "+d+" ) : ( ("+S+" = "+b+" === true) ? "+f+" "+y+"= "+d+" : "+f+" "+y+" "+d+" ) || "+f+" !== "+f+") { var op"+a+" = "+S+" ? '"+E+"' : '"+E+"='; ",s===void 0&&(T=m,c=t.errSchemaPath+"/"+m,d=b,h=v)}else{var D=typeof g=="number",M=E;if(D&&h){var R="'"+M+"'";r+=" if ( ",h&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),r+=" ( "+d+" === undefined || "+g+" "+E+"= "+d+" ? "+f+" "+y+"= "+g+" : "+f+" "+y+" "+d+" ) || "+f+" !== "+f+") { "}else{D&&s===void 0?(S=!0,T=m,c=t.errSchemaPath+"/"+m,d=g,y+="="):(D&&(d=Math[p?"min":"max"](g,s)),g===(D?d:!0)?(S=!0,T=m,c=t.errSchemaPath+"/"+m,y+="="):(S=!1,M+="="));var R="'"+M+"'";r+=" if ( ",h&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),r+=" "+f+" "+y+" "+d+" || "+f+" !== "+f+") { "}}T=T||n;var k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(T||"_limit")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { comparison: "+R+", limit: "+d+", exclusive: "+S+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be "+M+" ",h?r+="' + "+d:r+=""+d+"'"),t.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+u:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var L=r;return r=k.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",l&&(r+=" else { "),r},zU=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,m,f="data"+(o||""),h=t.opts.$data&&s&&s.$data,d;if(h?(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",d="schema"+a):d=s,!(h||typeof s=="number"))throw new Error(n+" must be number");var p=n=="maxItems"?">":"<";r+="if ( ",h&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),r+=" "+f+".length "+p+" "+d+") { ";var m=n,g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(m||"_limitItems")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+d+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have ",n=="maxItems"?r+="more":r+="fewer",r+=" than ",h?r+="' + "+d+" + '":r+=""+s,r+=" items' "),t.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+u:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var v=r;return r=g.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",l&&(r+=" else { "),r},jU=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,m,f="data"+(o||""),h=t.opts.$data&&s&&s.$data,d;if(h?(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",d="schema"+a):d=s,!(h||typeof s=="number"))throw new Error(n+" must be number");var p=n=="maxLength"?">":"<";r+="if ( ",h&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),t.opts.unicode===!1?r+=" "+f+".length ":r+=" ucs2length("+f+") ",r+=" "+p+" "+d+") { ";var m=n,g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(m||"_limitLength")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+d+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT be ",n=="maxLength"?r+="longer":r+="shorter",r+=" than ",h?r+="' + "+d+" + '":r+=""+s,r+=" characters' "),t.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+u:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var v=r;return r=g.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",l&&(r+=" else { "),r},VU=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,m,f="data"+(o||""),h=t.opts.$data&&s&&s.$data,d;if(h?(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",d="schema"+a):d=s,!(h||typeof s=="number"))throw new Error(n+" must be number");var p=n=="maxProperties"?">":"<";r+="if ( ",h&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'number') || "),r+=" Object.keys("+f+").length "+p+" "+d+") { ";var m=n,g=g||[];g.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(m||"_limitProperties")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { limit: "+d+" } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have ",n=="maxProperties"?r+="more":r+="fewer",r+=" than ",h?r+="' + "+d+" + '":r+=""+s,r+=" properties' "),t.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+u:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var v=r;return r=g.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+v+"]); ":r+=" validate.errors = ["+v+"]; return false; ":r+=" var err = "+v+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",l&&(r+=" else { "),r},Kxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h=t.opts.$data&&s&&s.$data,d;if(h?(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",d="schema"+a):d=s,!(h||typeof s=="number"))throw new Error(n+" must be number");r+="var division"+a+";if (",h&&(r+=" "+d+" !== undefined && ( typeof "+d+" != 'number' || "),r+=" (division"+a+" = "+f+" / "+d+", ",t.opts.multipleOfPrecision?r+=" Math.abs(Math.round(division"+a+") - division"+a+") > 1e-"+t.opts.multipleOfPrecision+" ":r+=" division"+a+" !== parseInt(division"+a+") ",r+=" ) ",h&&(r+="  )  "),r+=" ) {   ";var p=p||[];p.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'multipleOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { multipleOf: "+d+" } ",t.opts.messages!==!1&&(r+=" , message: 'should be multiple of ",h?r+="' + "+d:r+=""+d+"'"),t.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+u:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var m=r;return r=p.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+m+"]); ":r+=" validate.errors = ["+m+"]; return false; ":r+=" var err = "+m+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",l&&(r+=" else { "),r},Zxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="errs__"+a,d=t.util.copy(t);d.level++;var p="valid"+d.level;if(t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){d.schema=s,d.schemaPath=u,d.errSchemaPath=c,r+=" var "+h+" = errors;  ";var m=t.compositeRule;t.compositeRule=d.compositeRule=!0,d.createErrors=!1;var g;d.opts.allErrors&&(g=d.opts.allErrors,d.opts.allErrors=!1),r+=" "+t.validate(d)+" ",d.createErrors=!0,g&&(d.opts.allErrors=g),t.compositeRule=d.compositeRule=m,r+=" if ("+p+") {   ";var v=v||[];v.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var E=r;r=v.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+E+"]); ":r+=" validate.errors = ["+E+"]; return false; ":r+=" var err = "+E+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else {  errors = "+h+"; if (vErrors !== null) { if ("+h+") vErrors.length = "+h+"; else vErrors = null; } ",t.opts.allErrors&&(r+=" } ")}else r+="  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'not' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: {} ",t.opts.messages!==!1&&(r+=" , message: 'should NOT be valid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",l&&(r+=" if (false) { ");return r},Qxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="valid"+a,d="errs__"+a,p=t.util.copy(t),m="";p.level++;var g="valid"+p.level,v=p.baseId,E="prevValid"+a,y="passingSchemas"+a;r+="var "+d+" = errors , "+E+" = false , "+h+" = false , "+y+" = null; ";var T=t.compositeRule;t.compositeRule=p.compositeRule=!0;var b=s;if(b)for(var S,w=-1,D=b.length-1;w<D;)S=b[w+=1],(t.opts.strictKeywords?typeof S=="object"&&Object.keys(S).length>0||S===!1:t.util.schemaHasRules(S,t.RULES.all))?(p.schema=S,p.schemaPath=u+"["+w+"]",p.errSchemaPath=c+"/"+w,r+="  "+t.validate(p)+" ",p.baseId=v):r+=" var "+g+" = true; ",w&&(r+=" if ("+g+" && "+E+") { "+h+" = false; "+y+" = ["+y+", "+w+"]; } else { ",m+="}"),r+=" if ("+g+") { "+h+" = "+E+" = true; "+y+" = "+w+"; }";return t.compositeRule=p.compositeRule=T,r+=""+m+"if (!"+h+") {   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'oneOf' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { passingSchemas: "+y+" } ",t.opts.messages!==!1&&(r+=" , message: 'should match exactly one schema in oneOf' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),r+="} else {  errors = "+d+"; if (vErrors !== null) { if ("+d+") vErrors.length = "+d+"; else vErrors = null; }",t.opts.allErrors&&(r+=" } "),r},Jxe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h=t.opts.$data&&s&&s.$data,d;h?(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",d="schema"+a):d=s;var p=h?"(new RegExp("+d+"))":t.usePattern(s);r+="if ( ",h&&(r+=" ("+d+" !== undefined && typeof "+d+" != 'string') || "),r+=" !"+p+".test("+f+") ) {   ";var m=m||[];m.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'pattern' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { pattern:  ",h?r+=""+d:r+=""+t.util.toQuotedString(s),r+="  } ",t.opts.messages!==!1&&(r+=` , message: 'should match pattern "`,h?r+="' + "+d+" + '":r+=""+t.util.escapeQuotes(s),r+=`"' `),t.opts.verbose&&(r+=" , schema:  ",h?r+="validate.schema"+u:r+=""+t.util.toQuotedString(s),r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var g=r;return r=m.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+g+"]); ":r+=" validate.errors = ["+g+"]; return false; ":r+=" var err = "+g+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+="} ",l&&(r+=" else { "),r},ePe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="errs__"+a,d=t.util.copy(t),p="";d.level++;var m="valid"+d.level,g="key"+a,v="idx"+a,E=d.dataLevel=t.dataLevel+1,y="data"+E,T="dataProperties"+a,b=Object.keys(s||{}).filter(se),S=t.schema.patternProperties||{},w=Object.keys(S).filter(se),D=t.schema.additionalProperties,R=b.length||w.length,M=D===!1,k=typeof D=="object"&&Object.keys(D).length,L=t.opts.removeAdditional,$=M||k||L,P=t.opts.ownProperties,B=t.baseId,X=t.schema.required;if(X&&!(t.opts.$data&&X.$data)&&X.length<t.opts.loopRequired)var ee=t.util.toHash(X);function se(I){return I!=="__proto__"}if(r+="var "+h+" = errors;var "+m+" = true;",P&&(r+=" var "+T+" = undefined;"),$){if(P?r+=" "+T+" = "+T+" || Object.keys("+f+"); for (var "+v+"=0; "+v+"<"+T+".length; "+v+"++) { var "+g+" = "+T+"["+v+"]; ":r+=" for (var "+g+" in "+f+") { ",R){if(r+=" var isAdditional"+a+" = !(false ",b.length)if(b.length>8)r+=" || validate.schema"+u+".hasOwnProperty("+g+") ";else{var fe=b;if(fe)for(var Z,he=-1,j=fe.length-1;he<j;)Z=fe[he+=1],r+=" || "+g+" == "+t.util.toQuotedString(Z)+" "}if(w.length){var H=w;if(H)for(var G,K=-1,ae=H.length-1;K<ae;)G=H[K+=1],r+=" || "+t.usePattern(G)+".test("+g+") "}r+=" ); if (isAdditional"+a+") { "}if(L=="all")r+=" delete "+f+"["+g+"]; ";else{var pe=t.errorPath,we="' + "+g+" + '";if(t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers)),M)if(L)r+=" delete "+f+"["+g+"]; ";else{r+=" "+m+" = false; ";var Ee=c;c=t.errSchemaPath+"/additionalProperties";var xe=xe||[];xe.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'additionalProperties' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { additionalProperty: '"+we+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is an invalid additional property":r+="should NOT have additional properties",r+="' "),t.opts.verbose&&(r+=" , schema: false , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var He=r;r=xe.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+He+"]); ":r+=" validate.errors = ["+He+"]; return false; ":r+=" var err = "+He+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=Ee,l&&(r+=" break; ")}else if(k)if(L=="failing"){r+=" var "+h+" = errors;  ";var ke=t.compositeRule;t.compositeRule=d.compositeRule=!0,d.schema=D,d.schemaPath=t.schemaPath+".additionalProperties",d.errSchemaPath=t.errSchemaPath+"/additionalProperties",d.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var Ye=f+"["+g+"]";d.dataPathArr[E]=g;var je=t.validate(d);d.baseId=B,t.util.varOccurences(je,y)<2?r+=" "+t.util.varReplace(je,y,Ye)+" ":r+=" var "+y+" = "+Ye+"; "+je+" ",r+=" if (!"+m+") { errors = "+h+"; if (validate.errors !== null) { if (errors) validate.errors.length = errors; else validate.errors = null; } delete "+f+"["+g+"]; }  ",t.compositeRule=d.compositeRule=ke}else{d.schema=D,d.schemaPath=t.schemaPath+".additionalProperties",d.errSchemaPath=t.errSchemaPath+"/additionalProperties",d.errorPath=t.opts._errorDataPathProperty?t.errorPath:t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var Ye=f+"["+g+"]";d.dataPathArr[E]=g;var je=t.validate(d);d.baseId=B,t.util.varOccurences(je,y)<2?r+=" "+t.util.varReplace(je,y,Ye)+" ":r+=" var "+y+" = "+Ye+"; "+je+" ",l&&(r+=" if (!"+m+") break; ")}t.errorPath=pe}R&&(r+=" } "),r+=" }  ",l&&(r+=" if ("+m+") { ",p+="}")}var dt=t.opts.useDefaults&&!t.compositeRule;if(b.length){var st=b;if(st)for(var Z,qe=-1,bt=st.length-1;qe<bt;){Z=st[qe+=1];var yt=s[Z];if(t.opts.strictKeywords?typeof yt=="object"&&Object.keys(yt).length>0||yt===!1:t.util.schemaHasRules(yt,t.RULES.all)){var Bt=t.util.getProperty(Z),Ye=f+Bt,On=dt&&yt.default!==void 0;d.schema=yt,d.schemaPath=u+Bt,d.errSchemaPath=c+"/"+t.util.escapeFragment(Z),d.errorPath=t.util.getPath(t.errorPath,Z,t.opts.jsonPointers),d.dataPathArr[E]=t.util.toQuotedString(Z);var je=t.validate(d);if(d.baseId=B,t.util.varOccurences(je,y)<2){je=t.util.varReplace(je,y,Ye);var gt=Ye}else{var gt=y;r+=" var "+y+" = "+Ye+"; "}if(On)r+=" "+je+" ";else{if(ee&&ee[Z]){r+=" if ( "+gt+" === undefined ",P&&(r+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+t.util.escapeQuotes(Z)+"') "),r+=") { "+m+" = false; ";var pe=t.errorPath,Ee=c,Oe=t.util.escapeQuotes(Z);t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(pe,Z,t.opts.jsonPointers)),c=t.errSchemaPath+"/required";var xe=xe||[];xe.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+Oe+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+Oe+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var He=r;r=xe.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+He+"]); ":r+=" validate.errors = ["+He+"]; return false; ":r+=" var err = "+He+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",c=Ee,t.errorPath=pe,r+=" } else { "}else l?(r+=" if ( "+gt+" === undefined ",P&&(r+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+t.util.escapeQuotes(Z)+"') "),r+=") { "+m+" = true; } else { "):(r+=" if ("+gt+" !== undefined ",P&&(r+=" &&   Object.prototype.hasOwnProperty.call("+f+", '"+t.util.escapeQuotes(Z)+"') "),r+=" ) { ");r+=" "+je+" } "}}l&&(r+=" if ("+m+") { ",p+="}")}}if(w.length){var ne=w;if(ne)for(var G,oe=-1,Te=ne.length-1;oe<Te;){G=ne[oe+=1];var yt=S[G];if(t.opts.strictKeywords?typeof yt=="object"&&Object.keys(yt).length>0||yt===!1:t.util.schemaHasRules(yt,t.RULES.all)){d.schema=yt,d.schemaPath=t.schemaPath+".patternProperties"+t.util.getProperty(G),d.errSchemaPath=t.errSchemaPath+"/patternProperties/"+t.util.escapeFragment(G),P?r+=" "+T+" = "+T+" || Object.keys("+f+"); for (var "+v+"=0; "+v+"<"+T+".length; "+v+"++) { var "+g+" = "+T+"["+v+"]; ":r+=" for (var "+g+" in "+f+") { ",r+=" if ("+t.usePattern(G)+".test("+g+")) { ",d.errorPath=t.util.getPathExpr(t.errorPath,g,t.opts.jsonPointers);var Ye=f+"["+g+"]";d.dataPathArr[E]=g;var je=t.validate(d);d.baseId=B,t.util.varOccurences(je,y)<2?r+=" "+t.util.varReplace(je,y,Ye)+" ":r+=" var "+y+" = "+Ye+"; "+je+" ",l&&(r+=" if (!"+m+") break; "),r+=" } ",l&&(r+=" else "+m+" = true; "),r+=" }  ",l&&(r+=" if ("+m+") { ",p+="}")}}}return l&&(r+=" "+p+" if ("+h+" == errors) {"),r},tPe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="errs__"+a,d=t.util.copy(t),p="";d.level++;var m="valid"+d.level;if(r+="var "+h+" = errors;",t.opts.strictKeywords?typeof s=="object"&&Object.keys(s).length>0||s===!1:t.util.schemaHasRules(s,t.RULES.all)){d.schema=s,d.schemaPath=u,d.errSchemaPath=c;var g="key"+a,v="idx"+a,E="i"+a,y="' + "+g+" + '",T=d.dataLevel=t.dataLevel+1,b="data"+T,S="dataProperties"+a,w=t.opts.ownProperties,D=t.baseId;w&&(r+=" var "+S+" = undefined; "),w?r+=" "+S+" = "+S+" || Object.keys("+f+"); for (var "+v+"=0; "+v+"<"+S+".length; "+v+"++) { var "+g+" = "+S+"["+v+"]; ":r+=" for (var "+g+" in "+f+") { ",r+=" var startErrs"+a+" = errors; ";var R=g,M=t.compositeRule;t.compositeRule=d.compositeRule=!0;var k=t.validate(d);d.baseId=D,t.util.varOccurences(k,b)<2?r+=" "+t.util.varReplace(k,b,R)+" ":r+=" var "+b+" = "+R+"; "+k+" ",t.compositeRule=d.compositeRule=M,r+=" if (!"+m+") { for (var "+E+"=startErrs"+a+"; "+E+"<errors; "+E+"++) { vErrors["+E+"].propertyName = "+g+"; }   var err =   ",t.createErrors!==!1?(r+=" { keyword: 'propertyNames' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { propertyName: '"+y+"' } ",t.opts.messages!==!1&&(r+=" , message: 'property name \\'"+y+"\\' is invalid' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; "),l&&(r+=" break; "),r+=" } }"}return l&&(r+=" "+p+" if ("+h+" == errors) {"),r},nPe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="valid"+a,d=t.opts.$data&&s&&s.$data;d&&(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ");var p="schema"+a;if(!d)if(s.length<t.opts.loopRequired&&t.schema.properties&&Object.keys(t.schema.properties).length){var m=[],g=s;if(g)for(var v,E=-1,y=g.length-1;E<y;){v=g[E+=1];var T=t.schema.properties[v];T&&(t.opts.strictKeywords?typeof T=="object"&&Object.keys(T).length>0||T===!1:t.util.schemaHasRules(T,t.RULES.all))||(m[m.length]=v)}}else var m=s;if(d||m.length){var b=t.errorPath,S=d||m.length>=t.opts.loopRequired,w=t.opts.ownProperties;if(l)if(r+=" var missing"+a+"; ",S){d||(r+=" var "+p+" = validate.schema"+u+"; ");var D="i"+a,R="schema"+a+"["+D+"]",M="' + "+R+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(b,R,t.opts.jsonPointers)),r+=" var "+h+" = true; ",d&&(r+=" if (schema"+a+" === undefined) "+h+" = true; else if (!Array.isArray(schema"+a+")) "+h+" = false; else {"),r+=" for (var "+D+" = 0; "+D+" < "+p+".length; "+D+"++) { "+h+" = "+f+"["+p+"["+D+"]] !== undefined ",w&&(r+=" &&   Object.prototype.hasOwnProperty.call("+f+", "+p+"["+D+"]) "),r+="; if (!"+h+") break; } ",d&&(r+="  }  "),r+="  if (!"+h+") {   ";var k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+M+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var L=r;r=k.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else{r+=" if ( ";var $=m;if($)for(var P,D=-1,B=$.length-1;D<B;){P=$[D+=1],D&&(r+=" || ");var X=t.util.getProperty(P),ee=f+X;r+=" ( ( "+ee+" === undefined ",w&&(r+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+t.util.escapeQuotes(P)+"') "),r+=") && (missing"+a+" = "+t.util.toQuotedString(t.opts.jsonPointers?P:X)+") ) "}r+=") {  ";var R="missing"+a,M="' + "+R+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.opts.jsonPointers?t.util.getPathExpr(b,R,!0):b+" + "+R);var k=k||[];k.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+M+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var L=r;r=k.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+L+"]); ":r+=" validate.errors = ["+L+"]; return false; ":r+=" var err = "+L+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } else { "}else if(S){d||(r+=" var "+p+" = validate.schema"+u+"; ");var D="i"+a,R="schema"+a+"["+D+"]",M="' + "+R+" + '";t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPathExpr(b,R,t.opts.jsonPointers)),d&&(r+=" if ("+p+" && !Array.isArray("+p+")) {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+M+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } else if ("+p+" !== undefined) { "),r+=" for (var "+D+" = 0; "+D+" < "+p+".length; "+D+"++) { if ("+f+"["+p+"["+D+"]] === undefined ",w&&(r+=" || ! Object.prototype.hasOwnProperty.call("+f+", "+p+"["+D+"]) "),r+=") {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+M+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } } ",d&&(r+="  }  ")}else{var se=m;if(se)for(var P,fe=-1,Z=se.length-1;fe<Z;){P=se[fe+=1];var X=t.util.getProperty(P),M=t.util.escapeQuotes(P),ee=f+X;t.opts._errorDataPathProperty&&(t.errorPath=t.util.getPath(b,P,t.opts.jsonPointers)),r+=" if ( "+ee+" === undefined ",w&&(r+=" || ! Object.prototype.hasOwnProperty.call("+f+", '"+t.util.escapeQuotes(P)+"') "),r+=") {  var err =   ",t.createErrors!==!1?(r+=" { keyword: 'required' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { missingProperty: '"+M+"' } ",t.opts.messages!==!1&&(r+=" , message: '",t.opts._errorDataPathProperty?r+="is a required property":r+="should have required property \\'"+M+"\\'",r+="' "),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; } "}}t.errorPath=b}else l&&(r+=" if (true) {");return r},rPe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f="data"+(o||""),h="valid"+a,d=t.opts.$data&&s&&s.$data,p;if(d?(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",p="schema"+a):p=s,(s||d)&&t.opts.uniqueItems!==!1){d&&(r+=" var "+h+"; if ("+p+" === false || "+p+" === undefined) "+h+" = true; else if (typeof "+p+" != 'boolean') "+h+" = false; else { "),r+=" var i = "+f+".length , "+h+" = true , j; if (i > 1) { ";var m=t.schema.items&&t.schema.items.type,g=Array.isArray(m);if(!m||m=="object"||m=="array"||g&&(m.indexOf("object")>=0||m.indexOf("array")>=0))r+=" outer: for (;i--;) { for (j = i; j--;) { if (equal("+f+"[i], "+f+"[j])) { "+h+" = false; break outer; } } } ";else{r+=" var itemIndices = {}, item; for (;i--;) { var item = "+f+"[i]; ";var v="checkDataType"+(g?"s":"");r+=" if ("+t.util[v](m,"item",t.opts.strictNumbers,!0)+") continue; ",g&&(r+=` if (typeof item == 'string') item = '"' + item; `),r+=" if (typeof itemIndices[item] == 'number') { "+h+" = false; j = itemIndices[item]; break; } itemIndices[item] = i; } "}r+=" } ",d&&(r+="  }  "),r+=" if (!"+h+") {   ";var E=E||[];E.push(r),r="",t.createErrors!==!1?(r+=" { keyword: 'uniqueItems' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { i: i, j: j } ",t.opts.messages!==!1&&(r+=" , message: 'should NOT have duplicate items (items ## ' + j + ' and ' + i + ' are identical)' "),t.opts.verbose&&(r+=" , schema:  ",d?r+="validate.schema"+u:r+=""+s,r+="         , parentSchema: validate.schema"+t.schemaPath+" , data: "+f+" "),r+=" } "):r+=" {} ";var y=r;r=E.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+y+"]); ":r+=" validate.errors = ["+y+"]; return false; ":r+=" var err = "+y+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",r+=" } ",l&&(r+=" else { ")}else l&&(r+=" if (true) { ");return r},iPe={$ref:Hxe,allOf:$xe,anyOf:Uxe,$comment:Gxe,const:zxe,contains:jxe,dependencies:Vxe,enum:Yxe,format:Wxe,if:qxe,items:Xxe,maximum:GU,minimum:GU,maxItems:zU,minItems:zU,maxLength:jU,minLength:jU,maxProperties:VU,minProperties:VU,multipleOf:Kxe,not:Zxe,oneOf:Qxe,pattern:Jxe,properties:ePe,propertyNames:tPe,required:nPe,uniqueItems:rPe,validate:wU},YU=iPe,DI=Gh.toHash,aPe=function(){var t=[{type:"number",rules:[{maximum:["exclusiveMaximum"]},{minimum:["exclusiveMinimum"]},"multipleOf","format"]},{type:"string",rules:["maxLength","minLength","pattern","format"]},{type:"array",rules:["maxItems","minItems","items","contains","uniqueItems"]},{type:"object",rules:["maxProperties","minProperties","required","dependencies","propertyNames",{properties:["additionalProperties","patternProperties"]}]},{rules:["$ref","const","enum","not","anyOf","oneOf","allOf","if"]}],n=["type","$comment"],i=["$schema","$id","id","$data","$async","title","description","default","definitions","examples","readOnly","writeOnly","contentMediaType","contentEncoding","additionalItems","then","else"],r=["number","integer","string","array","object","boolean","null"];return t.all=DI(n),t.types=DI(r),t.forEach(function(a){a.rules=a.rules.map(function(o){var s;if(typeof o=="object"){var u=Object.keys(o)[0];s=o[u],o=u,s.forEach(function(l){n.push(l),t.all[l]=!0})}n.push(o);var c=t.all[o]={keyword:o,code:YU[o],implements:s};return c}),t.all.$comment={keyword:"$comment",code:YU.$comment},a.type&&(t.types[a.type]=a)}),t.keywords=DI(n.concat(i)),t.custom={},t},WU=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum","maxLength","minLength","pattern","additionalItems","maxItems","minItems","uniqueItems","maxProperties","minProperties","required","additionalProperties","enum","format","const"],oPe=function(e,t){for(var n=0;n<t.length;n++){e=JSON.parse(JSON.stringify(e));var i=t[n].split("/"),r=e,a;for(a=1;a<i.length;a++)r=r[i[a]];for(a=0;a<WU.length;a++){var o=WU[a],s=r[o];s&&(r[o]={anyOf:[s,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]})}}return e},sPe=SI.MissingRef,lPe=qU;function qU(e,t,n){var i=this;if(typeof this._opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");typeof t=="function"&&(n=t,t=void 0);var r=a(e).then(function(){var s=i._addSchema(e,void 0,t);return s.validate||o(s)});return n&&r.then(function(s){n(null,s)},n),r;function a(s){var u=s.$schema;return u&&!i.getSchema(u)?qU.call(i,{$ref:u},!0):Promise.resolve()}function o(s){try{return i._compile(s)}catch(c){if(c instanceof sPe)return u(c);throw c}function u(c){var l=c.missingSchema;if(d(l))throw new Error("Schema "+l+" is loaded but "+c.missingRef+" cannot be resolved");var f=i._loadingSchemas[l];return f||(f=i._loadingSchemas[l]=i._opts.loadSchema(l),f.then(h,h)),f.then(function(p){if(!d(l))return a(p).then(function(){d(l)||i.addSchema(p,l,void 0,t)})}).then(function(){return o(s)});function h(){delete i._loadingSchemas[l]}function d(p){return i._refs[p]||i._schemas[p]}}}}var uPe=function(t,n,i){var r=" ",a=t.level,o=t.dataLevel,s=t.schema[n],u=t.schemaPath+t.util.getProperty(n),c=t.errSchemaPath+"/"+n,l=!t.opts.allErrors,f,h="data"+(o||""),d="valid"+a,p="errs__"+a,m=t.opts.$data&&s&&s.$data,g;m?(r+=" var schema"+a+" = "+t.util.getData(s.$data,o,t.dataPathArr)+"; ",g="schema"+a):g=s;var v=this,E="definition"+a,y=v.definition,T="",b,S,w,D,R;if(m&&y.$data){R="keywordValidate"+a;var M=y.validateSchema;r+=" var "+E+" = RULES.custom['"+n+"'].definition; var "+R+" = "+E+".validate;"}else{if(D=t.useCustomRule(v,s,t.schema,t),!D)return;g="validate.schema"+u,R=D.code,b=y.compile,S=y.inline,w=y.macro}var k=R+".errors",L="i"+a,$="ruleErr"+a,P=y.async;if(P&&!t.async)throw new Error("async keyword in sync schema");if(S||w||(r+=""+k+" = null;"),r+="var "+p+" = errors;var "+d+";",m&&y.$data&&(T+="}",r+=" if ("+g+" === undefined) { "+d+" = true; } else { ",M&&(T+="}",r+=" "+d+" = "+E+".validateSchema("+g+"); if ("+d+") { ")),S)y.statements?r+=" "+D.validate+" ":r+=" "+d+" = "+D.validate+"; ";else if(w){var B=t.util.copy(t),T="";B.level++;var X="valid"+B.level;B.schema=D.validate,B.schemaPath="";var ee=t.compositeRule;t.compositeRule=B.compositeRule=!0;var se=t.validate(B).replace(/validate\.schema/g,R);t.compositeRule=B.compositeRule=ee,r+=" "+se}else{var fe=fe||[];fe.push(r),r="",r+="  "+R+".call( ",t.opts.passContext?r+="this":r+="self",b||y.schema===!1?r+=" , "+h+" ":r+=" , "+g+" , "+h+" , validate.schema"+t.schemaPath+" ",r+=" , (dataPath || '')",t.errorPath!='""'&&(r+=" + "+t.errorPath);var Z=o?"data"+(o-1||""):"parentData",he=o?t.dataPathArr[o]:"parentDataProperty";r+=" , "+Z+" , "+he+" , rootData )  ";var j=r;r=fe.pop(),y.errors===!1?(r+=" "+d+" = ",P&&(r+="await "),r+=""+j+"; "):P?(k="customErrors"+a,r+=" var "+k+" = null; try { "+d+" = await "+j+"; } catch (e) { "+d+" = false; if (e instanceof ValidationError) "+k+" = e.errors; else throw e; } "):r+=" "+k+" = null; "+d+" = "+j+"; "}if(y.modifying&&(r+=" if ("+Z+") "+h+" = "+Z+"["+he+"];"),r+=""+T,y.valid)l&&(r+=" if (true) { ");else{r+=" if ( ",y.valid===void 0?(r+=" !",w?r+=""+X:r+=""+d):r+=" "+!y.valid+" ",r+=") { ",f=v.keyword;var fe=fe||[];fe.push(r),r="";var fe=fe||[];fe.push(r),r="",t.createErrors!==!1?(r+=" { keyword: '"+(f||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { keyword: '"+v.keyword+"' } ",t.opts.messages!==!1&&(r+=` , message: 'should pass "`+v.keyword+`" keyword validation' `),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ";var H=r;r=fe.pop(),!t.compositeRule&&l?t.async?r+=" throw new ValidationError(["+H+"]); ":r+=" validate.errors = ["+H+"]; return false; ":r+=" var err = "+H+";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ";var G=r;r=fe.pop(),S?y.errors?y.errors!="full"&&(r+="  for (var "+L+"="+p+"; "+L+"<errors; "+L+"++) { var "+$+" = vErrors["+L+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+c+'"; } ',t.opts.verbose&&(r+=" "+$+".schema = "+g+"; "+$+".data = "+h+"; "),r+=" } "):y.errors===!1?r+=" "+G+" ":(r+=" if ("+p+" == errors) { "+G+" } else {  for (var "+L+"="+p+"; "+L+"<errors; "+L+"++) { var "+$+" = vErrors["+L+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+t.errorPath+"; if ("+$+".schemaPath === undefined) { "+$+'.schemaPath = "'+c+'"; } ',t.opts.verbose&&(r+=" "+$+".schema = "+g+"; "+$+".data = "+h+"; "),r+=" } } "):w?(r+="   var err =   ",t.createErrors!==!1?(r+=" { keyword: '"+(f||"custom")+"' , dataPath: (dataPath || '') + "+t.errorPath+" , schemaPath: "+t.util.toQuotedString(c)+" , params: { keyword: '"+v.keyword+"' } ",t.opts.messages!==!1&&(r+=` , message: 'should pass "`+v.keyword+`" keyword validation' `),t.opts.verbose&&(r+=" , schema: validate.schema"+u+" , parentSchema: validate.schema"+t.schemaPath+" , data: "+h+" "),r+=" } "):r+=" {} ",r+=";  if (vErrors === null) vErrors = [err]; else vErrors.push(err); errors++; ",!t.compositeRule&&l&&(t.async?r+=" throw new ValidationError(vErrors); ":r+=" validate.errors = vErrors; return false; ")):y.errors===!1?r+=" "+G+" ":(r+=" if (Array.isArray("+k+")) { if (vErrors === null) vErrors = "+k+"; else vErrors = vErrors.concat("+k+"); errors = vErrors.length;  for (var "+L+"="+p+"; "+L+"<errors; "+L+"++) { var "+$+" = vErrors["+L+"]; if ("+$+".dataPath === undefined) "+$+".dataPath = (dataPath || '') + "+t.errorPath+";  "+$+'.schemaPath = "'+c+'";  ',t.opts.verbose&&(r+=" "+$+".schema = "+g+"; "+$+".data = "+h+"; "),r+=" } } else { "+G+" } "),r+=" } ",l&&(r+=" else { ")}return r};const XU={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0};var KU=XU,cPe={$id:"https://github.com/ajv-validator/ajv/blob/master/lib/definition_schema.js",definitions:{simpleTypes:KU.definitions.simpleTypes},type:"object",dependencies:{schema:["validate"],$data:["validate"],statements:["inline"],valid:{not:{required:["macro"]}}},properties:{type:KU.properties.type,schema:{type:"boolean"},statements:{type:"boolean"},dependencies:{type:"array",items:{type:"string"}},metaSchema:{type:"object"},modifying:{type:"boolean"},valid:{type:"boolean"},$data:{type:"boolean"},async:{type:"boolean"},errors:{anyOf:[{type:"boolean"},{const:"full"}]}}},hPe=/^[a-z_$][a-z0-9_$-]*$/i,fPe=uPe,dPe=cPe,pPe={add:mPe,get:gPe,remove:vPe,validate:wI};function mPe(e,t){var n=this.RULES;if(n.keywords[e])throw new Error("Keyword "+e+" is already defined");if(!hPe.test(e))throw new Error("Keyword "+e+" is not a valid identifier");if(t){this.validateKeyword(t,!0);var i=t.type;if(Array.isArray(i))for(var r=0;r<i.length;r++)o(e,i[r],t);else o(e,i,t);var a=t.metaSchema;a&&(t.$data&&this._opts.$data&&(a={anyOf:[a,{$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"}]}),t.validateSchema=this.compile(a,!0))}n.keywords[e]=n.all[e]=!0;function o(s,u,c){for(var l,f=0;f<n.length;f++){var h=n[f];if(h.type==u){l=h;break}}l||(l={type:u,rules:[]},n.push(l));var d={keyword:s,definition:c,custom:!0,code:fPe,implements:c.implements};l.rules.push(d),n.custom[s]=d}return this}function gPe(e){var t=this.RULES.custom[e];return t?t.definition:this.RULES.keywords[e]||!1}function vPe(e){var t=this.RULES;delete t.keywords[e],delete t.all[e],delete t.custom[e];for(var n=0;n<t.length;n++)for(var i=t[n].rules,r=0;r<i.length;r++)if(i[r].keyword==e){i.splice(r,1);break}return this}function wI(e,t){wI.errors=null;var n=this._validateKeyword=this._validateKeyword||this.compile(dPe,!0);if(n(e))return!0;if(wI.errors=n.errors,t)throw new Error("custom keyword definition is invalid: "+this.errorsText(n.errors));return!1}const yPe={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON Schema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1};var ZU=Txe,su=yI,TPe=xU.exports,QU=EU,EPe=DU,bPe=Pxe,_Pe=aPe,JU=oPe,eG=Gh,tG=Hn;Hn.prototype.validate=APe,Hn.prototype.compile=CPe,Hn.prototype.addSchema=DPe,Hn.prototype.addMetaSchema=wPe,Hn.prototype.validateSchema=IPe,Hn.prototype.getSchema=OPe,Hn.prototype.removeSchema=PPe,Hn.prototype.addFormat=$Pe,Hn.prototype.errorsText=HPe,Hn.prototype._addSchema=RPe,Hn.prototype._compile=NPe,Hn.prototype.compileAsync=lPe;var PT=pPe;Hn.prototype.addKeyword=PT.add,Hn.prototype.getKeyword=PT.get,Hn.prototype.removeKeyword=PT.remove,Hn.prototype.validateKeyword=PT.validate;var nG=SI;Hn.ValidationError=nG.Validation,Hn.MissingRefError=nG.MissingRef,Hn.$dataMetaSchema=JU;var RT="http://json-schema.org/draft-07/schema",rG=["removeAdditional","useDefaults","coerceTypes","strictDefaults"],SPe=["/properties"];function Hn(e){if(!(this instanceof Hn))return new Hn(e);e=this._opts=eG.copy(e)||{},YPe(this),this._schemas={},this._refs={},this._fragments={},this._formats=bPe(e.format),this._cache=e.cache||new TPe,this._loadingSchemas={},this._compilations=[],this.RULES=_Pe(),this._getId=MPe(e),e.loopRequired=e.loopRequired||1/0,e.errorDataPath=="property"&&(e._errorDataPathProperty=!0),e.serialize===void 0&&(e.serialize=EPe),this._metaOpts=VPe(this),e.formats&&zPe(this),e.keywords&&jPe(this),UPe(this),typeof e.meta=="object"&&this.addMetaSchema(e.meta),e.nullable&&this.addKeyword("nullable",{metaSchema:{type:"boolean"}}),GPe(this)}function APe(e,t){var n;if(typeof e=="string"){if(n=this.getSchema(e),!n)throw new Error('no schema with key or ref "'+e+'"')}else{var i=this._addSchema(e);n=i.validate||this._compile(i)}var r=n(t);return n.$async!==!0&&(this.errors=n.errors),r}function CPe(e,t){var n=this._addSchema(e,void 0,t);return n.validate||this._compile(n)}function DPe(e,t,n,i){if(Array.isArray(e)){for(var r=0;r<e.length;r++)this.addSchema(e[r],void 0,n,i);return this}var a=this._getId(e);if(a!==void 0&&typeof a!="string")throw new Error("schema id must be string");return t=su.normalizeId(t||a),aG(this,t),this._schemas[t]=this._addSchema(e,n,i,!0),this}function wPe(e,t,n){return this.addSchema(e,t,n,!0),this}function IPe(e,t){var n=e.$schema;if(n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this._opts.defaultMeta||kPe(this),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;var i=this.validate(n,e);if(!i&&t){var r="schema is invalid: "+this.errorsText();if(this._opts.validateSchema=="log")this.logger.error(r);else throw new Error(r)}return i}function kPe(e){var t=e._opts.meta;return e._opts.defaultMeta=typeof t=="object"?e._getId(t)||t:e.getSchema(RT)?RT:void 0,e._opts.defaultMeta}function OPe(e){var t=iG(this,e);switch(typeof t){case"object":return t.validate||this._compile(t);case"string":return this.getSchema(t);case"undefined":return xPe(this,e)}}function xPe(e,t){var n=su.schema.call(e,{schema:{}},t);if(n){var i=n.schema,r=n.root,a=n.baseId,o=ZU.call(e,i,r,void 0,a);return e._fragments[t]=new QU({ref:t,fragment:!0,schema:i,root:r,baseId:a,validate:o}),o}}function iG(e,t){return t=su.normalizeId(t),e._schemas[t]||e._refs[t]||e._fragments[t]}function PPe(e){if(e instanceof RegExp)return NT(this,this._schemas,e),NT(this,this._refs,e),this;switch(typeof e){case"undefined":return NT(this,this._schemas),NT(this,this._refs),this._cache.clear(),this;case"string":var t=iG(this,e);return t&&this._cache.del(t.cacheKey),delete this._schemas[e],delete this._refs[e],this;case"object":var n=this._opts.serialize,i=n?n(e):e;this._cache.del(i);var r=this._getId(e);r&&(r=su.normalizeId(r),delete this._schemas[r],delete this._refs[r])}return this}function NT(e,t,n){for(var i in t){var r=t[i];!r.meta&&(!n||n.test(i))&&(e._cache.del(r.cacheKey),delete t[i])}}function RPe(e,t,n,i){if(typeof e!="object"&&typeof e!="boolean")throw new Error("schema should be object or boolean");var r=this._opts.serialize,a=r?r(e):e,o=this._cache.get(a);if(o)return o;i=i||this._opts.addUsedSchema!==!1;var s=su.normalizeId(this._getId(e));s&&i&&aG(this,s);var u=this._opts.validateSchema!==!1&&!t,c;u&&!(c=s&&s==su.normalizeId(e.$schema))&&this.validateSchema(e,!0);var l=su.ids.call(this,e),f=new QU({id:s,schema:e,localRefs:l,cacheKey:a,meta:n});return s[0]!="#"&&i&&(this._refs[s]=f),this._cache.put(a,f),u&&c&&this.validateSchema(e,!0),f}function NPe(e,t){if(e.compiling)return e.validate=r,r.schema=e.schema,r.errors=null,r.root=t||r,e.schema.$async===!0&&(r.$async=!0),r;e.compiling=!0;var n;e.meta&&(n=this._opts,this._opts=this._metaOpts);var i;try{i=ZU.call(this,e.schema,t,e.localRefs)}catch(a){throw delete e.validate,a}finally{e.compiling=!1,e.meta&&(this._opts=n)}return e.validate=i,e.refs=i.refs,e.refVal=i.refVal,e.root=i.root,i;function r(){var a=e.validate,o=a.apply(this,arguments);return r.errors=a.errors,o}}function MPe(e){switch(e.schemaId){case"auto":return FPe;case"id":return LPe;default:return BPe}}function LPe(e){return e.$id&&this.logger.warn("schema $id ignored",e.$id),e.id}function BPe(e){return e.id&&this.logger.warn("schema id ignored",e.id),e.$id}function FPe(e){if(e.$id&&e.id&&e.$id!=e.id)throw new Error("schema $id is different from id");return e.$id||e.id}function HPe(e,t){if(e=e||this.errors,!e)return"No errors";t=t||{};for(var n=t.separator===void 0?", ":t.separator,i=t.dataVar===void 0?"data":t.dataVar,r="",a=0;a<e.length;a++){var o=e[a];o&&(r+=i+o.dataPath+" "+o.message+n)}return r.slice(0,-n.length)}function $Pe(e,t){return typeof t=="string"&&(t=new RegExp(t)),this._formats[e]=t,this}function UPe(e){var t;if(e._opts.$data&&(t=yPe,e.addMetaSchema(t,t.$id,!0)),e._opts.meta!==!1){var n=XU;e._opts.$data&&(n=JU(n,SPe)),e.addMetaSchema(n,RT,!0),e._refs["http://json-schema.org/schema"]=RT}}function GPe(e){var t=e._opts.schemas;if(!!t)if(Array.isArray(t))e.addSchema(t);else for(var n in t)e.addSchema(t[n],n)}function zPe(e){for(var t in e._opts.formats){var n=e._opts.formats[t];e.addFormat(t,n)}}function jPe(e){for(var t in e._opts.keywords){var n=e._opts.keywords[t];e.addKeyword(t,n)}}function aG(e,t){if(e._schemas[t]||e._refs[t])throw new Error('schema with key or id "'+t+'" already exists')}function VPe(e){for(var t=eG.copy(e._opts),n=0;n<rG.length;n++)delete t[rG[n]];return t}function YPe(e){var t=e._opts.logger;if(t===!1)e.logger={log:II,warn:II,error:II};else{if(t===void 0&&(t=console),!(typeof t=="object"&&t.log&&t.warn&&t.error))throw new Error("logger must implement log, warn and error methods");e.logger=t}}function II(){}const kI={$schema:"http://json-schema.org/draft-07/schema#",$id:"https://higlass.io/#viewconf",title:"HiGlass viewconf",type:"object",additionalProperties:!1,required:[],properties:{editable:{type:"boolean",default:!0},viewEditable:{type:"boolean",default:!0},tracksEditable:{type:"boolean",default:!0},zoomFixed:{type:"boolean"},compactLayout:{type:"boolean"},exportViewUrl:{type:"string"},trackSourceServers:{type:"array",items:{type:"string"},minLength:1},zoomLocks:{$ref:"#/definitions/locks/zoomLocks"},locationLocks:{$ref:"#/definitions/locks/locationLocks"},valueScaleLocks:{$ref:"#/definitions/locks/valueScaleLocks"},views:{type:"array",items:{$ref:"#/definitions/view"},minLength:1},chromInfoPath:{type:"string"}},definitions:{data:{type:"object",properties:{url:{type:"string"},server:{type:"string"},filetype:{type:"string"},type:{type:"string"},tilesetInfo:{type:"object"},children:{type:"array"},tiles:{type:"object"}}},locks:{slug:{type:"string"},locksByViewUid:{type:"object",additionalProperties:!1,patternProperties:{".":{$ref:"#/definitions/locks/slug"}}},axisSpecificLocks:{additionalProperties:!1,properties:{axis:{enum:["x","y"],type:"string"},lock:{type:"string"}},required:["lock","axis"],type:"object"},locationLocksByViewUid:{type:"object",additionalProperties:!1,patternProperties:{".":{anyOf:[{type:"string"},{additionalProperties:!1,properties:{x:{$ref:"#/definitions/locks/axisSpecificLocks"},y:{$ref:"#/definitions/locks/axisSpecificLocks"}},type:"object"}]}}},zoomLocks:{type:"object",additionalProperties:!1,required:[],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"}},patternProperties:{"^(?!uid).":{type:"array",minLength:3,maxLength:3,items:{type:"number"}}}}}}}},locationLocks:{type:"object",additionalProperties:!1,required:[],properties:{locksByViewUid:{$ref:"#/definitions/locks/locationLocksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"}},patternProperties:{"^(?!uid).":{type:"array",minLength:3,maxLength:3,items:{type:"number"}}}}}}}},valueScaleLocks:{type:"object",additionalProperties:!1,required:["locksByViewUid","locksDict"],properties:{locksByViewUid:{$ref:"#/definitions/locks/locksByViewUid"},locksDict:{type:"object",additionalProperties:!1,patternProperties:{".":{type:"object",additionalProperties:!1,properties:{uid:{$ref:"#/definitions/locks/slug"},ignoreOffScreenValues:{type:"boolean"}},patternProperties:{"^(?!(uid|ignoreOffScreenValues)).":{type:"object",additionalProperties:!1,required:["view","track"],properties:{view:{type:"string"},track:{$ref:"#/definitions/locks/slug"}}}}}}}}}},view:{type:"object",additionalProperties:!1,required:["tracks","layout"],properties:{autocompleteSource:{type:"string"},chromInfoPath:{type:"string"},genomePositionSearchBox:{$ref:"#/definitions/viewProperties/genomePositionSearchBox"},genomePositionSearchBoxVisible:{type:"boolean"},initialXDomain:{$ref:"#/definitions/viewProperties/domain"},initialYDomain:{$ref:"#/definitions/viewProperties/domain"},layout:{$ref:"#/definitions/viewProperties/layout"},overlays:{type:"array",items:{$ref:"#/definitions/viewProperties/overlay"}},selectionView:{type:"boolean"},tracks:{$ref:"#/definitions/viewProperties/tracks_object"},uid:{type:"string"},zoomFixed:{type:"boolean"},zoomLimits:{type:"array",minLength:2,maxLength:2,default:[1,null]}}},viewProperties:{genomePositionSearchBox:{type:"object",title:"The Genome Position Search Box Schema",required:["chromInfoServer","chromInfoId"],properties:{autocompleteServer:{type:"string",title:"The Autocomplete Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},autocompleteId:{type:"string",title:"The Autocomplete ID",default:"",examples:["OHJakQICQD6gTD7skx4EWA"],pattern:"^(.*)$"},chromInfoServer:{type:"string",title:"The Chrominfo Server URL",default:"",examples:["//higlass.io/api/v1"],pattern:"^(.*)$"},chromInfoId:{type:"string",title:"The Chromosome Info ID",default:"",examples:["hg19"],pattern:"^(.*)$"},visible:{type:"boolean",title:"The Visible Schema",default:!1}}},overlay:{type:"object",additionalProperties:!1,properties:{chromInfoPath:{type:"string"},includes:{type:"array"},options:{type:"object",properties:{extent:{type:"array"},minWidth:{type:"number"},fill:{type:"string"},fillOpacity:{type:"number"},stroke:{type:"string"},strokeOpacity:{type:"number"},strokeWidth:{type:"number"},strokePos:{type:["string","array"]},outline:{type:"string"},outlineOpacity:{type:"number"},outlineWidth:{type:"number"},outlinePos:{type:["string","array"]}}},type:{type:"string"},uid:{type:"string"}}},layout:{type:"object",additionalProperties:!1,required:["w","h","x","y"],properties:{x:{type:"integer",title:"The X Position",default:0},y:{type:"integer",title:"The Y Position",default:0},w:{type:"integer",title:"Width",default:12},h:{type:"integer",title:"Height",default:12},moved:{type:"boolean"},static:{type:"boolean"}}},tracks_object:{type:"object",additionalProperties:!1,properties:{left:{$ref:"#/definitions/viewProperties/tracks_array"},right:{$ref:"#/definitions/viewProperties/tracks_array"},top:{$ref:"#/definitions/viewProperties/tracks_array"},bottom:{$ref:"#/definitions/viewProperties/tracks_array"},center:{$ref:"#/definitions/viewProperties/tracks_array"},whole:{$ref:"#/definitions/viewProperties/tracks_array"},gallery:{$ref:"#/definitions/viewProperties/tracks_array"}}},tracks_array:{type:"array",items:{oneOf:[{$ref:"#/definitions/tracks/enum_track"},{$ref:"#/definitions/tracks/combined_track"},{$ref:"#/definitions/tracks/heatmap_track"},{$ref:"#/definitions/tracks/independent_viewport_projection_track"}]}},domain:{type:"array",items:{type:"number"},maxItems:2,minItems:2}},tracks:{heatmap_track:{type:"object",additionalProperties:!1,required:[],properties:{uid:{type:"string"},type:{const:"heatmap"},data:{$ref:"#/definitions/data"},height:{type:"number"},options:{type:"object"},position:{type:"string"},server:{type:"string"},tilesetUid:{type:"string"},width:{type:"number"},transforms:{type:"array"}}},combined_track:{type:"object",additionalProperties:!1,required:["contents"],properties:{contents:{$ref:"#/definitions/viewProperties/tracks_array"},height:{type:"number"},options:{},position:{type:"string"},type:{const:"combined"},uid:{type:"string"},width:{type:"number"}}},enum_track:{type:"object",additionalProperties:!1,required:["type"],properties:{server:{type:"string"},tilesetUid:{type:"string"},data:{$ref:"#/definitions/data"},uid:{type:"string"},type:{enum:["multivec","1d-heatmap","line","point","bar","divergent-bar","stacked-interval","gene-annotations","linear-2d-rectangle-domains","chromosome-labels","linear-heatmap","1d-value-interval","2d-annotations","2d-chromosome-annotations","2d-chromosome-grid","2d-chromosome-labels","2d-rectangle-domains","2d-tiles","arrowhead-domains","bedlike","cross-rule","dummy","horizontal-1d-annotations","horizontal-1d-heatmap","horizontal-1d-tiles","horizontal-1d-value-interval","horizontal-2d-rectangle-domains","horizontal-bar","horizontal-chromosome-grid","horizontal-chromosome-labels","horizontal-divergent-bar","horizontal-gene-annotations","horizontal-heatmap","horizontal-line","horizontal-multivec","horizontal-point","horizontal-rule","horizontal-vector-heatmap","image-tiles","left-axis","left-stacked-interval","mapbox-tiles","osm-2d-tile-ids","osm-tiles","raster-tiles","simple-svg","square-markers","top-axis","top-stacked-interval","vertical-1d-annotations","vertical-1d-heatmap","vertical-1d-tiles","vertical-1d-value-interval","vertical-2d-rectangle-domains","vertical-bar","vertical-bedlike","vertical-chromosome-grid","vertical-chromosome-labels","vertical-gene-annotations","vertical-heatmap","vertical-line","vertical-multivec","vertical-point","vertical-rule","vertical-vector-heatmap","viewport-projection-center","viewport-projection-horizontal","viewport-projection-vertical"]},chromInfoPath:{type:"string"},fromViewUid:{type:"string"},height:{type:"number"},options:{type:"object"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}},independent_viewport_projection_track:{type:"object",additionalProperties:!1,properties:{uid:{type:"string"},type:{enum:["viewport-projection-horizontal","viewport-projection-vertical","viewport-projection-center"]},fromViewUid:{type:"null"},projectionXDomain:{$ref:"#/definitions/viewProperties/domain"},projectionYDomain:{$ref:"#/definitions/viewProperties/domain"},options:{type:"object"},transforms:{type:"array"},width:{type:"number"},x:{type:"number"},y:{type:"number"}}}}}},lu={"view-config-editor-header":"_view-config-editor-header_1hlm6_1","view-config-editor":"_view-config-editor_1hlm6_1","view-config-log":"_view-config-log_1hlm6_34","view-config-log-header":"_view-config-log-header_1hlm6_46","view-config-log-msg":"_view-config-log-msg_1hlm6_60",title:"_title_1hlm6_70",Warning:"_Warning_1hlm6_76",Success:"_Success_1hlm6_79",Error:"_Error_1hlm6_82"};let oG=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.state={code:i.viewConfig,hide:!1,showLog:!1,logMsgs:r.getLogMsgs(i.viewConfig)},r.handleChangeBound=r.handleChange.bind(_assertThisInitialized3(r)),r.handleKeyDownBound=r.handleKeyDown.bind(_assertThisInitialized3(r)),r.handleKeyUpBound=r.handleKeyUp.bind(_assertThisInitialized3(r)),r.handleSubmitBound=r.handleSubmit.bind(_assertThisInitialized3(r)),r.hideBound=r.hide.bind(_assertThisInitialized3(r)),r.showBound=r.show.bind(_assertThisInitialized3(r)),r.toggleLogBound=r.toggleLog.bind(_assertThisInitialized3(r)),r.pubSubs=[],r.pubSubs.push(r.props.pubSub.subscribe("keydown",r.handleKeyDownBound)),r.pubSubs.push(r.props.pubSub.subscribe("keyup",r.handleKeyUpBound)),r}return _createClass3(n,[{key:"componentDidMount",value:async function(){this.editor&&(this.editor._input.focus(),this.editor._input.setSelectionRange(0,0),await Lb(0),this.editorWrap&&(this.editorWrap.scrollTop=0))}},{key:"componentWillUnmount",value:function(){this.pubSubs.forEach(r=>this.props.pubSub.unsubscribe(r)),this.pubSubs=[]}},{key:"handleChange",value:function(r){const a=this.getLogMsgs(r);this.setState({code:r,logMsgs:a})}},{key:"handleKeyDown",value:function(r){r.key==="s"&&(r.ctrlKey||r.metaKey)&&(r.preventDefault(),this.props.onChange(this.state.code)),r.key==="Enter"&&(r.ctrlKey||r.metaKey)&&(r.preventDefault(),this.props.onChange(this.state.code),this.props.modal.close())}},{key:"handleKeyUp",value:function(r){this.setState({hide:!1}),r.key==="Escape"&&(r.preventDefault(),this.props.modal.close(),this.props.onCancel())}},{key:"handleSubmit",value:function(r){r&&r.preventDefault(),this.props.onSave(this.state.code)}},{key:"getLogMsgs",value:function(r){const a=[];let o;try{o=JSON.parse(r)}catch(c){return console.warn(c),a.push({type:"Error",msg:c.toString()}),a}const s=new tG().compile(kI);return s(o)||(console.warn("Invalid viewconf"),a.push({type:"Warning",msg:"Invalid viewconf"})),s.errors&&(console.warn(JSON.stringify(s.errors,null,2)),s.errors.forEach(c=>{a.push({type:"Warning",msg:JSON.stringify(c,null,2)})})),a.length===0&&a.push({type:"Success",msg:"No error or warnings"}),a}},{key:"hide",value:function(){this.setState({hide:!0})}},{key:"show",value:function(){this.setState({hide:!1})}},{key:"hideLog",value:function(){this.setState({showLog:!1})}},{key:"showLog",value:function(){this.setState({showLog:!0})}},{key:"toggleLog",value:function(){this.state.showLog?this.hideLog():this.showLog()}},{key:"render",value:function(){const r=this.state.logMsgs.map((a,o)=>{const s=`${o}-${a.msg}`;return A.default.createElement("tr",{key:s},A.default.createElement("td",{className:qt(lu.title,lu[a.type])},`[${o}] ${a.type}`),A.default.createElement("td",null,A.default.createElement("pre",null,a.msg)))});return A.default.createElement(Mp,{cancelShortcut:"ESC",cancelTitle:"Discard Changes",hide:this.state.hide,maxHeight:!0,okayShortcut:"\u2318+Enter",okayTitle:"Save and Close",onCancel:this.props.onCancel,onOkay:this.handleSubmitBound,title:"Edit View Config"},A.default.createElement(A.default.Fragment,null,A.default.createElement("header",{className:lu["view-config-editor-header"]},A.default.createElement(Go,{onBlur:this.showBound,onMouseDown:this.hideBound,onMouseOut:this.showBound,onMouseUp:this.showBound},"Hide While Mousedown"),A.default.createElement(Go,{onClick:()=>{this.props.onChange(this.state.code)},shortcut:"\u2318+S"},"Save")),A.default.createElement("div",{ref:a=>{this.editorWrap=a},className:lu["view-config-editor"]},A.default.createElement($Oe,{ref:a=>{this.editor=a},highlight:a=>lI.exports.highlight(a,lI.exports.languages.json),onValueChange:this.handleChangeBound,padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace',fontSize:"inherit"},value:this.state.code})),A.default.createElement("div",{className:lu["view-config-log"],style:{height:this.state.showLog?"50%":"30px"}},A.default.createElement("div",{className:lu["view-config-log-header"],onClick:()=>this.toggleLogBound()},`Log Messages (${this.state.logMsgs.filter(a=>a.type!=="Success").length})`),A.default.createElement("div",{className:lu["view-config-log-msg"],style:{padding:this.state.showLog?"10px":0}},A.default.createElement("table",null,A.default.createElement("tbody",null,r))))))}}]),n}(A.default.Component);oG.propTypes={modal:N.exports.object.isRequired,onCancel:N.exports.func.isRequired,onChange:N.exports.func.isRequired,onSave:N.exports.func.isRequired,pubSub:N.exports.object.isRequired,viewConfig:N.exports.string.isRequired};const WPe=Bc(Qy(oG));function qPe(e,t,n,i){const r=e.append("symbol").attr("id",t).attr("viewBox",i);n.forEach(a=>r.append("path").attr("d",a).attr("fill","currentColor"))}const XPe=e=>{e.setState(e.state)},KPe=function(t,n){const i=t;let r=[];const a=fg(),o=()=>{r.forEach(s=>n.unsubscribe(s)),r=[]};return{destroy:o,publish:a.publish,stack:a.stack,public:{get version(){return jD},setBroadcastMousePositionGlobally(s=!1){i.setBroadcastMousePositionGlobally(s)},setShowGlobalMousePosition(s=!1){i.setShowGlobalMousePosition(s)},setGlobalMousePosition(s=!1){i.setBroadcastMousePositionGlobally(s),i.setShowGlobalMousePosition(s)},setAuthHeader(s){Nf(s),i.reload()},getAuthHeader(){return Nf()},getComponent(){return i},reload(s){let u;s?u=s.flatMap(c=>typeof c=="string"?i.iterateOverTracksInView(c):c):u=i.iterateOverTracks();for(const{viewId:c,trackId:l}of u){const f=i.getTrackObject(c,l);for(const h of f.childTracks||[f])h.fetchedTiles&&(h.removeTiles(Object.keys(h.fetchedTiles)),h.fetching.clear(),h.refreshTiles()),h.rerender(h.options,!0)}},destroy(){o(),Un.default.unmountComponentAtNode(i.topDiv.parentNode)},setRangeSelectionToInt(){i.setState({rangeSelectionToInt:!0})},setRangeSelectionToFloat(){i.setState({rangeSelectionToInt:!1})},setRangeSelection1dSize(s=0,u=1/0){i.setState({rangeSelection1dSize:[s,u]})},setViewConfig(s,u=!1){const c=i.processViewConfig(s);return new Promise(f=>{this.requestsInFlight=0,r.push(n.subscribe("requestSent",()=>{this.requestsInFlight+=1})),r.push(n.subscribe("requestReceived",()=>{this.requestsInFlight-=1,this.requestsInFlight===0&&f()})),i.setState({viewConfig:s,views:c},()=>{u&&f()})})},getViewConfig(){return i.getViewsAsJson()},validateViewConfig(s,{verbose:u=!1}={}){const c=new tG().compile(kI),l=c(s);return u&&c.errors&&console.warn(JSON.stringify(c.errors,null,2)),l},getMinMaxValue(s,u,c=!1,l=!1){return i.getMinMaxValue(s,u,c,l)},shareViewConfigAsLink(s){return i.handleExportViewsAsLink(s,!0)},showAvailableTrackPositions(s){i.setState({draggingHappening:s})},hideAvailableTrackPositions(){i.setState({draggingHappening:null})},showTrackChooser(s){i.setState({chooseTrackHandler:(...u)=>{i.setState({chooseTrackHandler:null}),s(...u)}})},hideTrackChooser(){this.setState({chooseTrackHandler:null})},setTrackValueScaleLimits(s,u,c,l){i.setTrackValueScaleLimits(s,u,c,l)},setDarkTheme(s){console.warn('`setDarkTheme(true)` is deprecated. Please use `setTheme("dark")`.');const u=s?"dark":"light";i.setTheme(u)},setTheme(s){console.warn("Please note that theming is still in beta!"),i.setTheme(s)},zoomTo(s,u,c,l,f,h=0){i.zoomTo(s,u,c,l,f,h)},zoomToGene(s,u,c=0,l=0){i.zoomToGene(s,u,c,l)},suggestGene(s,u,c){return i.suggestGene(s,u,c)},zoomToDataExtent(s){i.handleZoomToData(s)},resetViewport(s){i.resetViewport(s)},activateTool(s){switch(s){case"select":i.setMouseTool(zi);break;default:i.setMouseTool(Rg);break}},exportAsPngBlobPromise(){return i.createPNGBlobPromise()},exportAsSvg(){return i.createSVGString()},exportAsViewConfString(){return i.getViewsAsString()},getRangeSelection(){return i.rangeSelection},getLocation(s){const u=s?i.xScales[s]&&i.yScales[s]&&s:Object.values(i.tiledPlots)[0]&&Object.values(i.tiledPlots)[0].props.uid;return u?{xDomain:i.xScales[u].domain(),yDomain:i.yScales[u].domain(),xRange:i.xScales[u].range(),yRange:i.yScales[u].range()}:"Please provide a valid view UUID sweetheart \u{1F619}"},getTrackObject(s,u){let c=s,l=u;return u||(c=Object.values(i.state.views)[0].uid,l=s),Xg(i,c,l)},option(s,u){if(typeof u>"u")return i.props.options[s];switch(s){case"sizeMode":i.props.options[s]=u,XPe(i);break;default:console.warn(`This option "${s}" is either unknown or not settable.`)}},off(s,u,c){const l=typeof u=="object"?u.callback:u;switch(s){case"click":a.unsubscribe("click",l);break;case"cursorLocation":a.unsubscribe("cursorLocation",l);break;case"location":i.offLocationChange(c,u);break;case"mouseMoveZoom":a.unsubscribe("mouseMoveZoom",l);break;case"wheel":a.unsubscribe("wheel",l);break;case"rangeSelection":a.unsubscribe("rangeSelection",l);break;case"viewConfig":i.offViewChange(u);break;case"createSVG":i.offPostCreateSVG();break;case"geneSearch":a.unsubscribe("geneSearch",l);break}},on(s,u,c,l){switch(s){case"click":return a.subscribe("click",u);case"cursorLocation":return a.subscribe("cursorLocation",u);case"location":return i.onLocationChange(c,u,l);case"mouseMoveZoom":return a.subscribe("mouseMoveZoom",u);case"wheel":return a.subscribe("wheel",u);case"rangeSelection":return a.subscribe("rangeSelection",u);case"viewConfig":return i.onViewChange(u);case"createSVG":return i.onPostCreateSVG(u);case"geneSearch":return a.subscribe("geneSearch",u);default:return}}}}},zh={higlass:"_higlass_1uoq8_1","higlass-dark-theme":"_higlass-dark-theme_1uoq8_5","higlass-container-overflow":"_higlass-container-overflow_1uoq8_9","higlass-scroll-container-overflow":"_higlass-scroll-container-overflow_1uoq8_10","higlass-scroll-container-scroll":"_higlass-scroll-container-scroll_1uoq8_11","higlass-canvas":"_higlass-canvas_1uoq8_28","higlass-drawing-surface":"_higlass-drawing-surface_1uoq8_34","higlass-svg":"_higlass-svg_1uoq8_38","tiled-area":"_tiled-area_1uoq8_47","track-mouseover-menu":"_track-mouseover-menu_1uoq8_52"},XNe="",sG=12,ZPe=12,QPe=20,JPe="default",lG="bounded",uG="overflow",um="scroll";let OI=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;_classCallCheck3(this,n),r=t.call(this,i),NR(A.default.version)<15.6&&console.warn("HiGlass requires React v15.6 or higher. Current version: ",A.default.version),r.pubSub=fg(),r.domEvent=pR(r.pubSub),r.pubSubs=[],r.minHorizontalHeight=20,r.minVerticalWidth=20,r.resizeSensor=null,r.uid=Pt.nice(),r.tiledPlots={},r.genomePositionSearchBoxes={},r.xScales={},r.yScales={},r.projectionXDomains={},r.projectionYDomains={},r.topDiv=null,r.zoomToDataExtentOnInit=new Set,r.viewTrackUidsToCombinedUid={},r.combinedUidToViewTrack={},r.scalesChangedListeners={},r.draggingChangedListeners={},r.valueScalesChangedListeners={},r.zoomLocks={},r.locationLocks={},r.locationLocksAxisWise={x:{},y:{}},r.valueScaleLocks={},r.prevAuthToken=i.options.authToken,r.setCenters={},r.plusImg={},r.configImg={},Be.PIXI=i.options&&i.options.PIXI||Vh,r.viewMarginTop=+i.options.viewMarginTop>=0?+i.options.viewMarginTop:Cf,r.viewMarginBottom=+i.options.viewMarginBottom>=0?+i.options.viewMarginBottom:Cf,r.viewMarginLeft=+i.options.viewMarginLeft>=0?+i.options.viewMarginLeft:Cf,r.viewMarginRight=+i.options.viewMarginRight>=0?+i.options.viewMarginRight:Cf,r.viewPaddingTop=+i.options.viewPaddingTop>=0?+i.options.viewPaddingTop:Df,r.viewPaddingBottom=+i.options.viewPaddingBottom>=0?+i.options.viewPaddingBottom:Df,r.viewPaddingLeft=+i.options.viewPaddingLeft>=0?+i.options.viewPaddingLeft:Df,r.viewPaddingRight=+i.options.viewPaddingRight>=0?+i.options.viewPaddingRight:Df,r.genomePositionSearchBox=null,r.viewHeaders={},r.boundRefreshView=()=>{r.refreshView(wf)},r.unsetOnLocationChange=[],r.setTheme(i.options.theme,i.options.isDarkTheme),r.viewconfLoaded=!1;const{viewConfig:a}=r.props,o=r.loadIfRemoteViewConfig(r.props.viewConfig);i.options.authToken&&Nf(i.options.authToken),r.pixiRoot=new Be.PIXI.Container,r.pixiRoot.interactive=!0,r.pixiStage=new Be.PIXI.Container,r.pixiStage.interactive=!0,r.pixiRoot.addChild(r.pixiStage),r.pixiMask=new Be.PIXI.Graphics,r.pixiRoot.addChild(r.pixiMask),r.pixiStage.mask=r.pixiMask,r.element=null,r.scrollTop=0;let s=Rg;if(r.props.options)switch(r.props.options.mouseTool){case zi:s=zi;break}r.props.options.pluginTracks&&(window.higlassTracksByType=Object.assign(window.higlassTracksByType||{},r.props.options.pluginTracks));const u={};try{window.higlassTracksByType&&Object.entries(window.higlassTracksByType).forEach(([m,g])=>{u[m]=g})}catch{console.warn("Broken config of a plugin track")}r.props.options.pluginDataFetchers&&(window.higlassDataFetchersByType=Object.assign(window.higlassDataFetchersByType||{},r.props.options.pluginDataFetchers));const c=window.higlassDataFetchersByType,l=r.props.options.pixelPreciseMarginPadding?1:30;r.mounted=!1,r.pluginTracks=u,r.pluginDataFetchers=c,r.state={currentBreakpoint:"lg",width:0,height:0,rowHeight:l,svgElement:null,canvasElement:null,customDialog:null,views:o,viewConfig:a,addTrackPositionMenuPosition:null,typedEditable:void 0,mouseOverOverlayUid:null,mouseTool:s,isDarkTheme:!1,rangeSelection1dSize:[0,1/0],rangeSelectionToInt:!1,modal:null},r.attachedToDOM=!1;const{public:f,destroy:h,publish:d,stack:p}=KPe(_assertThisInitialized3(r),r.pubSub);return r.api=f,r.apiDestroy=h,r.apiPublish=d,r.apiStack=p,r.viewChangeListener=[],r.triggerViewChangeDb=Fg(r.triggerViewChange.bind(_assertThisInitialized3(r)),250),r.pubSubs=[],r.rangeSelection=[null,null],r.prevMouseHoverTrack=null,r.zooming=!1,r.appClickHandlerBound=r.appClickHandler.bind(_assertThisInitialized3(r)),r.canvasClickHandlerBound=r.canvasClickHandler.bind(_assertThisInitialized3(r)),r.keyDownHandlerBound=r.keyDownHandler.bind(_assertThisInitialized3(r)),r.keyUpHandlerBound=r.keyUpHandler.bind(_assertThisInitialized3(r)),r.resizeHandlerBound=r.resizeHandler.bind(_assertThisInitialized3(r)),r.resizeHandlerBound=r.resizeHandler.bind(_assertThisInitialized3(r)),r.dispatchEventBound=r.dispatchEvent.bind(_assertThisInitialized3(r)),r.animateOnMouseMoveHandlerBound=r.animateOnMouseMoveHandler.bind(_assertThisInitialized3(r)),r.zoomStartHandlerBound=r.zoomStartHandler.bind(_assertThisInitialized3(r)),r.zoomEndHandlerBound=r.zoomEndHandler.bind(_assertThisInitialized3(r)),r.zoomHandlerBound=r.zoomHandler.bind(_assertThisInitialized3(r)),r.trackDroppedHandlerBound=r.trackDroppedHandler.bind(_assertThisInitialized3(r)),r.trackDimensionsModifiedHandlerBound=r.trackDimensionsModifiedHandler.bind(_assertThisInitialized3(r)),r.animateBound=r.animate.bind(_assertThisInitialized3(r)),r.animateOnGlobalEventBound=r.animateOnGlobalEvent.bind(_assertThisInitialized3(r)),r.requestReceivedHandlerBound=r.requestReceivedHandler.bind(_assertThisInitialized3(r)),r.wheelHandlerBound=r.wheelHandler.bind(_assertThisInitialized3(r)),r.mouseMoveHandlerBound=r.mouseMoveHandler.bind(_assertThisInitialized3(r)),r.onMouseLeaveHandlerBound=r.onMouseLeaveHandler.bind(_assertThisInitialized3(r)),r.onBlurHandlerBound=r.onBlurHandler.bind(_assertThisInitialized3(r)),r.openModalBound=r.openModal.bind(_assertThisInitialized3(r)),r.closeModalBound=r.closeModal.bind(_assertThisInitialized3(r)),r.handleEditViewConfigBound=r.handleEditViewConfig.bind(_assertThisInitialized3(r)),r.onScrollHandlerBound=r.onScrollHandler.bind(_assertThisInitialized3(r)),r.typedText="",r.typedTextTimeout=null,r.modal={open:r.openModalBound,close:r.closeModalBound},r.setBroadcastMousePositionGlobally(r.props.options.broadcastMousePositionGlobally||r.props.options.globalMousePosition),r.setShowGlobalMousePosition(r.props.options.showGlobalMousePosition||r.props.options.globalMousePosition),r}return _createClass3(n,[{key:"UNSAFE_componentWillMount",value:function(){this.domEvent.register("keydown",document),this.domEvent.register("keyup",document),this.domEvent.register("scroll",document),this.domEvent.register("resize",window),this.domEvent.register("orientationchange",window),this.domEvent.register("wheel",window),this.domEvent.register("mousedown",window,!0),this.domEvent.register("mouseup",window,!0),this.domEvent.register("click",window,!0),this.domEvent.register("mousemove",window),this.domEvent.register("touchmove",window),this.domEvent.register("touchstart",window),this.domEvent.register("touchend",window),this.domEvent.register("touchcancel",window),this.domEvent.register("blur",window),this.pubSubs.push(this.pubSub.subscribe("app.click",this.appClickHandlerBound),this.pubSub.subscribe("blur",this.onBlurHandlerBound),this.pubSub.subscribe("keydown",this.keyDownHandlerBound),this.pubSub.subscribe("keyup",this.keyUpHandlerBound),this.pubSub.subscribe("resize",this.resizeHandlerBound),this.pubSub.subscribe("wheel",this.wheelHandlerBound),this.pubSub.subscribe("orientationchange",this.resizeHandlerBound),this.pubSub.subscribe("app.event",this.dispatchEventBound),this.pubSub.subscribe("app.animateOnMouseMove",this.animateOnMouseMoveHandlerBound),this.pubSub.subscribe("trackDropped",this.trackDroppedHandlerBound),this.pubSub.subscribe("trackDimensionsModified",this.trackDimensionsModifiedHandlerBound),this.pubSub.subscribe("app.zoomStart",this.zoomStartHandlerBound),this.pubSub.subscribe("app.zoomEnd",this.zoomEndHandlerBound),this.pubSub.subscribe("app.zoom",this.zoomHandlerBound),this.pubSub.subscribe("requestReceived",this.requestReceivedHandlerBound)),this.props.getApi&&this.props.getApi(this.api)}},{key:"sizeMode",get:function(){return typeof this.props.options.sizeMode>"u"?this.props.options.bounded?"bounded":JPe:this.props.options.sizeMode}},{key:"setBroadcastMousePositionGlobally",value:function(r=!1){this.isBroadcastMousePositionGlobally=r}},{key:"setShowGlobalMousePosition",value:function(r=!1){if(this.isShowGlobalMousePosition=r,this.isShowGlobalMousePosition&&!this.globalMousePositionListener&&(this.globalMousePositionListener=ff.subscribe("higlass.mouseMove",this.animateOnGlobalEventBound),this.pubSubs.push(this.globalMousePositionListener)),this.isShowGlobalMousePosition&&!this.globalMousePositionListener){const a=this.pubSubs.findIndex(o=>o===this.globalMousePositionListener);ff.unsubscribe(this.globalMousePositionListener),a>=0&&this.pubSubs.splice(a,1),this.globalMousePositionListener=void 0}}},{key:"zoomStartHandler",value:function(){this.hideHoverMenu(),this.zooming=!0}},{key:"zoomEndHandler",value:function(){this.zooming=!1}},{key:"zoomHandler",value:function(r){!r.sourceEvent||this.mouseMoveHandler(r.sourceEvent)}},{key:"waitForDOMAttachment",value:function(r){if(!this.mounted)return;const a=Un.default.findDOMNode(this);document.body.contains(a)?r():requestAnimationFrame(()=>this.waitForDOMAttachment(r))}},{key:"componentDidMount",value:function(){this.mounted=!0,this.element=Un.default.findDOMNode(this),window.addEventListener("focus",this.boundRefreshView),Object.values(this.state.views).forEach(s=>{this.adjustLayoutToTrackSizes(s),s.layout?s.layout.i=s.uid:s.layout=this.generateViewLayout(s)});const r={width:this.state.width,height:this.state.height,view:this.canvasElement,antialias:!0,transparent:!0,resolution:2,autoResize:!0},a=parseInt(Vh.VERSION[0],10);a===4?(console.warn("Deprecation warning: please update Pixi.js to version 5 or above!"),this.props.options.renderer==="canvas"?this.pixiRenderer=new Be.PIXI.CanvasRenderer(r):this.pixiRenderer=new Be.PIXI.WebGLRenderer(r)):(a<4&&console.warn("Deprecation warning: please update Pixi.js to version 5 or above! This version of Pixi.js is unsupported. Good luck \u{1F91E}"),this.props.options.renderer==="canvas"?this.pixiRenderer=new Be.PIXI.CanvasRenderer(r):this.pixiRenderer=new Be.PIXI.Renderer(r)),this.fitPixiToParentContainer(),this.setState({svgElement:this.svgElement,canvasElement:this.canvasElement}),this.waitForDOMAttachment(()=>{ug.ElementQueries.listen(),this.resizeSensor=new ug.ResizeSensor(this.element.parentNode,this.updateAfterResize.bind(this)),this.updateAfterResize()}),this.handleDragStart(),this.handleDragStop(),this.animate();const o=xt(this.element).append("svg").style("display","none");EZ.forEach(s=>qPe(o,s.id,s.paths,s.viewBox))}},{key:"getTrackObject",value:function(r,a){return this.tiledPlots[r].trackRenderer.getTrackObject(a)}},{key:"getTrackRenderer",value:function(r){return this.tiledPlots[r].trackRenderer}},{key:"loadIfRemoteViewConfig",value:function(r){let a={};return typeof r=="string"?Xe.json(r,(o,s)=>{r=s,this.setState({views:this.processViewConfig(JSON.parse(JSON.stringify(s))),viewConfig:s}),this.unsetOnLocationChange.forEach(({viewId:u,callback:c,callbackId:l})=>{this.onLocationChange(u,c,l)})},this.pubSub):(a=this.processViewConfig(JSON.parse(JSON.stringify(r))),this.mounted&&this.setState({viewConfig:r})),a}},{key:"UNSAFE_componentWillReceiveProps",value:function(r){const a=this.loadIfRemoteViewConfig(r.viewConfig);if(r.options.authToken!==this.prevAuthToken){Nf(r.options.authToken);for(const o of this.iterateOverViews()){const s=this.getTrackRenderer(o),u=JSON.parse(s.prevTrackDefinitions);s.syncTrackObjects([]),s.syncTrackObjects(u)}this.prevAuthToken=r.options.authToken}for(const o of un(a))this.adjustLayoutToTrackSizes(o);this.setState({views:a})}},{key:"UNSAFE_componentWillUpdate",value:function(){this.pixiRenderer.render(this.pixiRoot)}},{key:"componentDidUpdate",value:function(){this.setTheme(this.props.options.theme,this.props.options.isDarkTheme),this.animate(),this.triggerViewChangeDb()}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.pixiStage.destroy(!1),this.pixiStage=null,this.pixiRenderer.destroy(!0),this.pixiRenderer=null,window.removeEventListener("focus",this.boundRefreshView),this.resizeSensor&&this.resizeSensor.detach(),this.domEvent.unregister("keydown",document),this.domEvent.unregister("keyup",document),this.domEvent.unregister("scroll",document),this.domEvent.unregister("wheel",window),this.domEvent.unregister("mousedown",window),this.domEvent.unregister("mouseup",window),this.domEvent.unregister("click",window),this.domEvent.unregister("mousemove",window),this.domEvent.unregister("touchmove",window),this.domEvent.unregister("touchstart",window),this.domEvent.unregister("touchend",window),this.domEvent.unregister("touchcancel",window),this.pubSubs.forEach(r=>this.pubSub.unsubscribe(r)),this.pubSubs=[],this.apiDestroy()}},{key:"setTheme",value:function(r=this.props.options.theme,a=this.props.options.isDarkTheme){if(typeof a<"u")console.warn("The option `isDarkTheme` is deprecated. Please use `theme` instead."),this.theme=a?"dark":"light";else switch(r){case"dark":this.theme=pn;break;case"light":case void 0:this.theme=Mg;break;default:console.warn(`Unknown theme "${r}". Using light theme.`),this.theme=Mg;break}}},{key:"dispatchEvent",value:function(r){!this.canvasElement||Hg(r,this.canvasElement)}},{key:"trackDroppedHandler",value:function(){this.setState({draggingHappening:null})}},{key:"requestReceivedHandler",value:function(){!this.viewconfLoaded&&Rf===0&&(this.viewconfLoaded=!0,this.props.options.onViewConfLoaded&&this.props.options.onViewConfLoaded())}},{key:"animateOnMouseMoveHandler",value:function(r){r&&!this.animateOnMouseMove&&this.pubSubs.push(this.pubSub.subscribe("app.mouseMove",this.animateBound)),this.animateOnMouseMove=r}},{key:"fitPixiToParentContainer",value:function(){if(!this.element||!this.element.parentNode){console.warn("No parentNode:",this.element);return}const r=this.element.parentNode.clientWidth,a=this.element.parentNode.clientHeight;this.pixiMask.beginFill(16777215).drawRect(0,0,r,a).endFill(),this.pixiRenderer.resize(r,a),this.pixiRenderer.view.style.width=`${r}px`,this.pixiRenderer.view.style.height=`${a}px`,this.pixiRenderer.render(this.pixiRoot)}},{key:"addDefaultTrackOptions",value:function(r){const a=this.getTrackInfo(r.type);if(!a)return;typeof r.options>"u"&&(r.options={});const o=r.options?r.options:{};if(this.props.options.defaultTrackOptions){if(this.props.options.defaultTrackOptions.trackSpecific&&this.props.options.defaultTrackOptions.trackSpecific[r.type]){const s=this.props.options.defaultTrackOptions.trackSpecific[r.type];for(const u in s)r.options[u]=typeof r.options[u]<"u"?r.options[u]:JSON.parse(JSON.stringify(s[u]))}if(this.props.options.defaultTrackOptions.all){const s=this.props.options.defaultTrackOptions.all;for(const u in s)r.options[u]=typeof r.options[u]<"u"?r.options[u]:JSON.parse(JSON.stringify(s[u]))}}if(a.defaultOptions){const s=a.defaultOptionsByTheme&&a.defaultOptionsByTheme[this.theme]?a.defaultOptionsByTheme[this.theme]:{},u={...a.defaultOptions,...s};if(!r.options)r.options=JSON.parse(JSON.stringify(u));else for(const c in u)r.options[c]=typeof r.options[c]<"u"?r.options[c]:JSON.parse(JSON.stringify(u[c]))}else r.options=o}},{key:"toggleTypedEditable",value:function(){this.setState({typedEditable:!this.isEditable()})}},{key:"typedTextHandler",value:function(r){if(!this.props.options.cheatCodesEnabled)return;this.typedText=this.typedText.concat(r.key),this.typedText.endsWith("hgedit")&&(this.toggleTypedEditable(),this.typedText="");const a=750;this.typedTextTimeout&&clearTimeout(this.typedTextTimeout),this.typedTextTimeout=setTimeout(()=>{this.typedText=""},a)}},{key:"keyDownHandler",value:function(r){this.typedTextHandler(r),this.props.options.rangeSelectionOnAlt&&r.key==="Alt"&&this.setState({mouseTool:zi})}},{key:"keyUpHandler",value:function(r){this.props.options.rangeSelectionOnAlt&&r.key==="Alt"&&this.setState({mouseTool:Rg})}},{key:"openModal",value:function(r){this.setState({modal:A.default.cloneElement(r,{ref:a=>{this.modalRef=a}})})}},{key:"closeModal",value:function(){this.modalRef=null,this.setState({modal:null})}},{key:"handleEditViewConfig",value:function(){const{viewConfig:r}=this.state;this.setState({viewConfigTmp:r}),this.openModal(A.default.createElement(WPe,{onCancel:()=>{const{viewConfigTmp:a}=this.state,o=this.processViewConfig(a);for(const s of un(o))this.adjustLayoutToTrackSizes(s);this.setState({views:o,viewConfig:a,viewConfigTmp:null})},onChange:a=>{const o=JSON.parse(a),s=this.processViewConfig(o);for(const u of un(s))this.adjustLayoutToTrackSizes(u);this.setState({views:s,viewConfig:o})},onSave:a=>{const o=JSON.parse(a),s=this.processViewConfig(o);for(const u of un(s))this.adjustLayoutToTrackSizes(u);this.setState({views:s,viewConfig:o,viewConfigTmp:null})},viewConfig:this.getViewsAsString()}))}},{key:"animate",value:function(){this.isRequestingAnimationFrame||(this.isRequestingAnimationFrame=!0,requestAnimationFrame(()=>{!this.pixiRenderer||(this.pixiRenderer.render(this.pixiRoot),this.isRequestingAnimationFrame=!1)}))}},{key:"animateOnGlobalEvent",value:function({sourceUid:r}={}){r!==this.uid&&this.animateOnMouseMove&&this.animate()}},{key:"measureSize",value:function(){const[r,a]=ER(this.element);r>0&&a>0&&this.setState({sizeMeasured:!0,width:r,height:a})}},{key:"updateAfterResize",value:function(){this.measureSize(),this.updateRowHeight(),this.fitPixiToParentContainer(),this.refreshView(wf),this.resizeHandler()}},{key:"onBreakpointChange",value:function(r){this.setState({currentBreakpoint:r})}},{key:"handleOverlayMouseEnter",value:function(r){this.setState({mouseOverOverlayUid:r})}},{key:"handleOverlayMouseLeave",value:function(){this.setState({mouseOverOverlayUid:null})}},{key:"handleLockLocation",value:function(r){this.setState({chooseViewHandler:a=>this.handleLocationLockChosen(r,a),mouseOverOverlayUid:r})}},{key:"isEditable",value:function(){return this.state.typedEditable!==void 0?this.state.typedEditable:!this.props.options||!("editable"in this.props.options)?this.state.viewConfig.editable:this.props.options.editable&&this.state.viewConfig.editable}},{key:"isTrackMenuDisabled",value:function(){return this.props.options&&(this.props.options.editable===!1||this.props.options.tracksEditable===!1)?!0:this.state.viewConfig&&(this.state.viewConfig.tracksEditable===!1||this.state.viewConfig.editable===!1)}},{key:"isViewHeaderDisabled",value:function(){return this.props.options&&(this.props.options.editable===!1||this.props.options.viewEditable===!1)?!0:this.state.viewConfig&&(this.state.viewConfig.viewEditable===!1||this.state.viewConfig.editable===!1)}},{key:"iterateOverViews",value:function(){const r=[];for(const a in Object.keys(this.state.views))r.push(a);return r}},{key:"iterateOverTracksInView",value:function(r){const a=[],{tracks:o}=this.state.views[r];for(const s in o)for(const u of o[s])if(u.type==="combined"&&u.contents)for(const c of u.contents)a.push({viewId:r,trackId:c.uid,track:c});else a.push({viewId:r,trackId:u.uid,track:u});return a}},{key:"iterateOverTracks",value:function(){const r=[];for(const a in this.state.views){const{tracks:o}=this.state.views[a];for(const s in o)for(const u of o[s])if(u.type==="combined"&&u.contents)for(const c of u.contents)r.push({viewId:a,trackId:c.uid,track:c});else r.push({viewId:a,trackId:u.uid,track:u})}return r}},{key:"setMouseTool",value:function(r){this.setState({mouseTool:r})}},{key:"isValueScaleLocked",value:function(r,a){const o=this.combineViewAndTrackUid(r,a);return this.state.views[r]?!!this.valueScaleLocks[o]:!1}},{key:"getLockGroupExtrema",value:function(r,a){const o=this.combineViewAndTrackUid(r,a);if(!this.state.views[r]||!this.valueScaleLocks[o])return null;const s=this.valueScaleLocks[o],u=Object.values(s).filter(d=>this.tiledPlots[d.view]).map(d=>this.tiledPlots[d.view].trackRenderer.getTrackObject(d.track)).filter(d=>d).map(d=>d.originalTrack===void 0?d:d.originalTrack),c=u.filter(d=>d.minRawValue&&d.maxRawValue).map(d=>s.ignoreOffScreenValues?d.minVisibleValue(!0):d.minVisibleValueInTiles(!0)),l=u.filter(d=>d.minRawValue&&d.maxRawValue).map(d=>s.ignoreOffScreenValues?d.maxVisibleValue(!0):d.maxVisibleValueInTiles(!0));if(c.length===0||c.filter(d=>d===null||d===1/0).length>0||l.length===0||l.filter(d=>d===null||d===-1/0).length>0)return null;const f=Math.min(...c),h=Math.max(...l);return[f,h]}},{key:"syncValueScales",value:function(r,a){const o=this.combineViewAndTrackUid(r,a);if(!this.state.views[r])return;const s=Ci(this.state.views[r].tracks,a);if(this.valueScaleLocks[o]){const u=this.valueScaleLocks[o],c=Object.values(u).filter(p=>this.tiledPlots[p.view]).map(p=>this.tiledPlots[p.view].trackRenderer.getTrackObject(p.track)).filter(p=>p).map(p=>p.originalTrack===void 0?p:p.originalTrack),l=this.getLockGroupExtrema(r,a);if(l===null)return;const f=l[0],h=l[1],d=1e-6;for(const p of c){if(p.minValue&&p.minValue(f),p.maxValue&&p.maxValue(h),!p.valueScale)continue;const m=Math.abs(p.minValue()-p.valueScale.domain()[0])>d||Math.abs(p.maxValue()-p.valueScale.domain()[1])>d;let g=!1;try{g=s.options&&p.options&&typeof s.options.scaleStartPercent<"u"&&typeof s.options.scaleEndPercent<"u"&&(Math.abs(p.options.scaleStartPercent-s.options.scaleStartPercent)>d||Math.abs(p.options.scaleEndPercent-s.options.scaleEndPercent)>d)}catch{}p.continuousScaling&&!m&&!g||(p.valueScale.domain([f,h]),p.prevValueScale=p.valueScale.copy(),g&&(p.options.scaleStartPercent=s.options.scaleStartPercent,p.options.scaleEndPercent=s.options.scaleEndPercent),p.rerender(p.options,!0))}}}},{key:"handleNewTilesLoaded",value:function(r,a){this.animate()}},{key:"notifyDragChangedListeners",value:function(r){un(this.draggingChangedListeners).forEach(a=>{un(a).forEach(o=>o(r))})}},{key:"addDraggingChangedListener",value:function(r,a,o){this.draggingChangedListeners.hasOwnProperty(r)||(this.draggingChangedListeners[r]={}),this.draggingChangedListeners[r][a]=o,o(!0),o(!1)}},{key:"removeDraggingChangedListener",value:function(r,a){if(this.draggingChangedListeners.hasOwnProperty(r)){const o=this.draggingChangedListeners[r];o.hasOwnProperty(a)&&(o[a](!1),delete o[a])}}},{key:"addScalesChangedListener",value:function(r,a,o){this.scalesChangedListeners[r]||(this.scalesChangedListeners[r]={}),this.scalesChangedListeners[r][a]=o,!(!this.xScales[r]||!this.yScales[r])&&o(this.xScales[r],this.yScales[r])}},{key:"removeScalesChangedListener",value:function(r,a){if(this.scalesChangedListeners[r]){const o=this.scalesChangedListeners[r];o[a]&&delete o[a]}}},{key:"createSVG",value:function(){const r=document.createElement("svg");r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("version","1.1");for(const a of un(this.tiledPlots))if(!!a){for(const o of un(a.trackRenderer.trackDefObjects))if(o.trackObject.exportSVG){const s=o.trackObject.exportSVG();s&&r.appendChild(s[0])}}return r.setAttribute("width",this.canvasElement.style.width),r.setAttribute("height",this.canvasElement.style.height),this.postCreateSVGCallback?this.postCreateSVGCallback(r):r}},{key:"createSVGString",value:function(){const r=this.createSVG();let a=Xq.xml(new window.XMLSerializer().serializeToString(r));return a=a.replace(/<a0:/g,"<"),a=a.replace(/<\/a0:/g,"</"),a=a.replace(/(<svg[\n\r])(\s+xmlns="http:\/\/www\.w3\.org\/1999\/xhtml"[\n\r])/gm,"$1"),a=a.replace(/(\s+<clipPath[\n\r]\s+)(xmlns="http:\/\/www\.w3\.org\/2000\/svg")/gm,"$1"),a=a.replace('xmlns="http://www.w3.org/1999/xhtml"',""),`<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
${a}`}},{key:"handleExportSVG",value:function(){xf("export.svg",new Blob([this.createSVGString()],{type:"image/svg+xml"}))}},{key:"offPostCreateSVG",value:function(){this.postCreateSVGCallback=null}},{key:"onPostCreateSVG",value:function(r){this.postCreateSVGCallback=r}},{key:"createPNGBlobPromise",value:function(){return new Promise(r=>{const a=this.createSVGString(),o=new Image(this.canvasElement.width,this.canvasElement.height);o.src=`data:image/svg+xml;base64,${btoa(a)}`,o.onload=()=>{const s=document.createElement("canvas");s.width=this.canvasElement.width/2,s.height=this.canvasElement.height/2;const u=s.getContext("2d");u.globalCompositeOperation="source-over",u.fillStyle="#ffffff",u.fillRect(0,0,s.width,s.height),u.drawImage(o,0,0),s.toBlob(c=>{r(c)})}})}},{key:"handleExportPNG",value:function(){this.createPNGBlobPromise().then(r=>{xf("export.png",r)})}},{key:"handleScalesChanged",value:function(r,a,o,s=!0){if(this.xScales[r]=a,this.yScales[r]=o,s&&r in this.scalesChangedListeners&&un(this.scalesChangedListeners[r]).forEach(u=>{u(a,o)}),this.zoomLocks[r]){const u=this.zoomLocks[r],c=Vi(u),[l,f,h]=Qn(this.xScales[r],this.yScales[r]);for(let d=0;d<c.length;d++){const p=c[d][0],m=c[d][1];if(!this.xScales[p]||!this.yScales[p]||p===r)continue;const[g,v,E]=Qn(this.xScales[p],this.yScales[p]),y=m[2]/u[r][2],T=h*y;if(!this.setCenters[p])continue;const[b,S]=this.setCenters[p](g,v,T,!1);this.xScales[p]=b,this.yScales[p]=S,this.scalesChangedListeners.hasOwnProperty(p)&&un(this.scalesChangedListeners[p]).forEach(w=>{w(b,S)})}}if(this.locationLocks[r]){const u=this.locationLocks[r],c=Vi(u),[l,f,h]=Qn(this.xScales[r],this.yScales[r]);for(let d=0;d<c.length;d++){const p=c[d][0],m=c[d][1];if(!this.xScales[p]||!this.yScales[p])continue;const[g,v,E]=Qn(this.xScales[p],this.yScales[p]);if(p===r)continue;const y=m[0]-u[r][0],T=m[1]-u[r][1],b=l+y,S=f+T;if(!this.setCenters[p])continue;const[w,D]=this.setCenters[p](b,S,E,!1);this.xScales[p]=w,this.yScales[p]=D,this.scalesChangedListeners.hasOwnProperty(p)&&un(this.scalesChangedListeners[p]).forEach(R=>{R(w,D)})}}if(this.locationLocksAxisWise.x[r]){const u=this.locationLocksAxisWise.x[r].lock,c=Vi(u),l=this.locationLocksAxisWise.x[r].axis!=="x",[f,h,d]=Qn(this.xScales[r],this.yScales[r]);for(let p=0;p<c.length;p++){const m=c[p][0],g=c[p][1];if(!this.xScales[m]||!this.yScales[m])continue;const[v,E,y]=Qn(this.xScales[m],this.yScales[m]);if(m===r)continue;const T=g[0]-u[r][0],b=f+T;if(!this.setCenters[m])continue;const[S,w]=this.setCenters[m](l?v:b,l?b:E,y,!1);this.xScales[m]=S,this.yScales[m]=w,this.scalesChangedListeners.hasOwnProperty(m)&&un(this.scalesChangedListeners[m]).forEach(D=>{D(S,w)})}}if(this.locationLocksAxisWise.y[r]){const u=this.locationLocksAxisWise.y[r].lock,c=Vi(u),l=this.locationLocksAxisWise.y[r].axis!=="y",[f,h,d]=Qn(this.xScales[r],this.yScales[r]);for(let p=0;p<c.length;p++){const m=c[p][0],g=c[p][1];if(!this.xScales[m]||!this.yScales[m])continue;const[v,E,y]=Qn(this.xScales[m],this.yScales[m]);if(m===r)continue;const T=g[1]-u[r][1],b=h+T;if(!this.setCenters[m])continue;const[S,w]=this.setCenters[m](l?b:v,l?E:b,y,!1);this.xScales[m]=S,this.yScales[m]=w,this.scalesChangedListeners.hasOwnProperty(m)&&un(this.scalesChangedListeners[m]).forEach(D=>{D(S,w)})}}this.animate(),this.triggerViewChangeDb()}},{key:"handleProjectViewport",value:function(r){this.setState({chooseTrackHandler:(a,o)=>this.handleViewportProjected(r,a,o)})}},{key:"handleZoomToData",value:function(r){if(r&&!this.tiledPlots[r])throw new Error(`View uid ${r} does not exist in the current viewConfig`);r?this.tiledPlots[r].handleZoomToData():Object.values(this.tiledPlots).forEach(a=>a.handleZoomToData())}},{key:"resetViewport",value:function(r){if(r&&!this.tiledPlots[r])throw new Error(`View uid ${r} does not exist in the current viewConfig`);r?this.tiledPlots[r].resetViewport():Object.values(this.tiledPlots).forEach(a=>a.resetViewport())}},{key:"handleYankFunction",value:function(r,a){this.setState({chooseViewHandler:o=>a(r,o),mouseOverOverlayUid:r})}},{key:"handleUnlock",value:function(r,a){const o=a[r],s=Yi(o);if(s.length===2){delete a[s[0]],delete a[s[1]];return}a[r]&&a[r][r]&&delete a[r][r],a[r]&&delete a[r]}},{key:"viewScalesLockData",value:function(r){return!this.xScales[r]||!this.yScales[r]?(console.warn("View scale lock doesn't correspond to existing uid: ",r),null):Qn(this.xScales[r],this.yScales[r])}},{key:"addLock",value:function(r,a,o,s){let u=[],c=[];o[r]?u=Vi(o[r]).filter(h=>s(h[0])).map(h=>[h[0],s(h[0])]):u=[[r,s.bind(this)(r)]],o[a]?c=Vi(o[a]).filter(h=>s.bind(this)(h[0])).map(h=>[h[0],s.bind(this)(h[0])]):c=[[a,s.bind(this)(a)]];const l=u.concat(c),f=lR(l);l.forEach(h=>{o[h[0]]=f})}},{key:"handleLocationLockChosen",value:function(r,a){if(r===a){this.setState({chooseViewHandler:null});return}this.addLock(r,a,this.locationLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})}},{key:"handleZoomLockChosen",value:function(r,a){if(r===a){this.setState({chooseViewHandler:null});return}this.addLock(r,a,this.zoomLocks,this.viewScalesLockData.bind(this)),this.setState({chooseViewHandler:null})}},{key:"handleViewportProjected",value:function(r,a,o){let s=null;if(r===a)console.warn("A view can not show its own viewport.");else{const u=Ci(this.state.views[a].tracks,o),c=Lf(this.state.views[a].tracks,o);s=Pt.nice();const f={uid:s,type:`viewport-projection-${{top:"horizontal",bottom:"horizontal",center:"center",left:"vertical",right:"vertical"}[c]}`,fromViewUid:r};this.addCallbacks(a,f),this.handleTrackAdded(a,f,c,u)}return this.setState({chooseTrackHandler:null}),s}},{key:"handleLocationYanked",value:function(r,a){const o=this.xScales[a],s=this.yScales[a],u=this.xScales[r],c=this.yScales[r],[l,f,h]=Qn(u,c),[d,p,m]=Qn(o,s);this.setCenters[r](d,p,h,!0),this.setState({chooseViewHandler:null})}},{key:"handleZoomYanked",value:function(r,a){const o=this.xScales[a],s=this.yScales[a],u=this.xScales[r],c=this.yScales[r],[l,f,h]=Qn(u,c),[d,p,m]=Qn(o,s);this.setCenters[r](l,f,m,!0),this.setState({chooseViewHandler:null})}},{key:"handleTrackPositionChosen",value:function(r,a){this.setState({addTrackPosition:a,addTrackPositionView:r})}},{key:"updateRowHeight",value:function(){if(!this.props.options||this.sizeMode!==lG||this.props.options.pixelPreciseMarginPadding)return;const r=this.element.parentNode.clientHeight;let a=0;for(const f of un(this.state.views))a=Math.max(a,f.layout.y+f.layout.h);this.handleDragStart(),this.handleDragStop();const s=(this.isEditable()?10:0)*a-1,c=(r-s)/a,l=Math.floor(c);this.setState({rowHeight:l})}},{key:"handleLayoutChange",value:function(r){!this.element||(r.forEach(a=>{const o=this.state.views[a.i];o&&(o.layout.x=a.x,o.layout.y=a.y,o.layout.w=a.w,o.layout.h=a.h,o.layout.i=a.i)}),this.updateRowHeight(),this.refreshView(wf))}},{key:"clearDragTimeout",value:function(){this.dragTimeout&&(clearTimeout(this.dragTimeout),this.dragTimeout=null)}},{key:"getTrackInfo",value:function(r){if(fn[r])return fn[r];if(this.pluginTracks&&this.pluginTracks[r])return this.pluginTracks[r].config;if(window.higlassTracksByType&&window.higlassTracksByType[r])return window.higlassTracksByType[r].config;console.warn("Track type not found:",r,"(check app/scripts/config/ for a list of defined track types)")}},{key:"forceRefreshView",value:function(){this.setState(this.state)}},{key:"refreshView",value:function(r=qP){this.clearDragTimeout(),this.notifyDragChangedListeners(!0),this.clearDragTimeout(),this.dragTimeout=setTimeout(()=>{this.notifyDragChangedListeners(!1)},r)}},{key:"handleDragStart",value:function(){this.clearDragTimeout(),this.notifyDragChangedListeners(!0)}},{key:"handleDragStop",value:function(){this.clearDragTimeout(),this.dragTimeout=setTimeout(()=>{this.notifyDragChangedListeners(!1)},wf)}},{key:"resizeHandler",value:function(){Gg(this.viewHeaders).filter(r=>r).forEach(r=>r.checkWidth())}},{key:"calculateViewDimensions",value:function(r){let c=this.viewMarginTop+this.viewMarginBottom+this.viewPaddingTop+this.viewPaddingBottom,l=this.viewMarginLeft+this.viewMarginRight+this.viewPaddingLeft+this.viewPaddingRight,f=0;f+=10;const h=20;if(r.tracks.top)for(let S=0;S<r.tracks.top.length;S++){const w=r.tracks.top[S];c+=w.height?w.height:20,f+=w.height?w.height:20}if(r.tracks.bottom)for(let S=0;S<r.tracks.bottom.length;S++){const w=r.tracks.bottom[S];c+=w.height?w.height:20,f+=w.height?w.height:20}(r.tracks.left&&r.tracks.left.length>0||r.tracks.right&&r.tracks.right.length>0||r.tracks.center&&r.tracks.center.length>0)&&(f+=h);let d=0;if(r.tracks.left)for(let S=0;S<r.tracks.left.length;S++){const w=r.tracks.left[S],D=w.height?w.height:100;l+=w.width?w.width:0,d=Math.max(d,D)}let p=0;if(r.tracks.right)for(let S=0;S<r.tracks.right.length;S++){const w=r.tracks.right[S],D=w.height?w.height:100;l+=w.width?w.width:0,p=Math.max(p,D)}const m=Math.max(d,p);let g=0,v=0;if(r.tracks.center&&un(r.tracks.center).length>0){if(!r.tracks.center[0].contents||r.tracks.center[0].contents.length>0){let S=null,w=null;if(r.tracks.center[0].contents)for(const D of r.tracks.center[0].contents)S=Math.max(S,D.height?D.height:100),w=Math.max(w,D.width?D.width:100);else S=r.tracks.center[0].height?r.tracks.center[0].height:100,w=r.tracks.center[0].width?r.tracks.center[0].width:100;c+=S,l+=w}}else(r.tracks.top&&un(r.tracks.top).length>1||r.tracks.bottom&&un(r.tracks.bottom).length>1)&&(r.tracks.left&&un(r.tracks.left).length||r.tracks.right&&un(r.tracks.right).length)&&(v=100,g=100);m>g?c+=m:c+=g;let E=0,y=0,T=0,b=0;return"top"in r.tracks&&(E=r.tracks.top.map(S=>S.height?S.height:20).reduce((S,w)=>S+w,0)),"bottom"in r.tracks&&(y=r.tracks.bottom.map(S=>S.height?S.height:20).reduce((S,w)=>S+w,0)),"left"in r.tracks&&(T=r.tracks.left.map(S=>S.width?S.width:0).reduce((S,w)=>S+w,0)),"right"in r.tracks&&(b=r.tracks.right.map(S=>S.width?S.width:0).reduce((S,w)=>S+w,0)),{totalWidth:l,totalHeight:c,topHeight:E,bottomHeight:y,leftWidth:T,rightWidth:b,centerWidth:v,centerHeight:g,minNecessaryHeight:f}}},{key:"calculateZoomLimits",value:function(r,a){const o=[0,1/0],s=r.zoomLimits||[1,null],u=a[1]-a[0];if(s.length!==2)return o;if(s[0]!==null&&s[0]>0){const c=u/s[0];o[1]=Math.max(c,1),c<1&&console.warn(`Invalid zoom limits. Lower limit set to ${u}`)}if(s[1]!==null&&s[1]>s[0]){const c=u/s[1];o[0]=Math.min(c,1),c>1&&console.warn(`Invalid zoom limits. Upper limit set to ${u}`)}return o}},{key:"generateViewLayout",value:function(r){let a=null;return"layout"in r?{layout:a}=r.layout:a={x:0,y:0,w:sG,h:ZPe},a}},{key:"handleClearView",value:function(r){const{views:a}=this.state;a[r].tracks.top=[],a[r].tracks.bottom=[],a[r].tracks.center=[],a[r].tracks.left=[],a[r].tracks.right=[],a[r].tracks.whole=[],this.setState({views:a})}},{key:"handleCloseView",value:function(r){un(this.state.views).length!==1&&(this.handleUnlock(r,this.zoomLocks),this.setState(a=>(delete a.views[r],{views:this.removeInvalidTracks(a.views)})))}},{key:"handleSeriesAdded",value:function(r,a,o,s){const{tracks:u}=this.state.views[r];if(s.type==="combined")s.contents.push(a),a.type==="heatmap"&&this.compatibilityfyStackedHeatmaps(a,s);else{const c={type:"combined",uid:Pt.nice(),height:s.height,width:s.width,contents:[s,a]},l=u[o];for(let f=0;f<l.length;f++)l[f].uid===s.uid&&(l[f]=c)}this.setState(c=>({views:c.views}))}},{key:"handleNoTrackAdded",value:function(){this.state.addTrackPosition&&this.setState({addTrackPosition:null})}},{key:"handleTracksAdded",value:function(r,a,o,s){this.storeTrackSizes(r);for(const u of a)this.handleTrackAdded(r,u,o,s)}},{key:"handleChangeTrackType",value:function(r,a,o){const s=this.state.views[r],u=Ci(s.tracks,a),c=u.uid;u.uid=Pt.nice(),u.type=o;const l=u.uid;this.updateTrackLocks(r,c,l),this.setState(f=>({views:f.views}))}},{key:"handleChangeTrackData",value:function(r,a,o){const s=this.state.views[r],u=Ci(s.tracks,a);u.uid=Pt.nice(),u.data=o,this.setState(c=>({views:c.views}))}},{key:"handleTrackAdded",value:function(r,a,o,s=null){if(this.addDefaultTrackOptions(a),a.uid||(a.uid=Pt.nice()),a.contents)for(const f of a.contents)this.addDefaultTrackOptions(f);if(this.state.addTrackPosition&&this.setState({addTrackPosition:null}),s)return this.handleSeriesAdded(r,a,o,s),null;a.position=o;const u=this.getTrackInfo(a.type);a.width=u.defaultWidth||u.defaultOptions&&u.defaultOptions.minWidth||this.minVerticalWidth,a.height=u.defaultHeight||u.defaultOptions&&u.defaultOptions.minHeight||this.minHorizontalHeight;const{tracks:c}=this.state.views[r];let l=0;if(Co(c,()=>l++),o==="left"||o==="top")c[o].unshift(a);else if(o==="center")if(c.center.length===0){const f={uid:Pt.nice(),type:"combined",contents:[a]};c.center=[f]}else if(c.center[0].type==="combined")c.center[0].contents.push(a),a.type==="heatmap"&&this.compatibilityfyStackedHeatmaps(a,c.center[0]);else{const f={uid:Pt.nice(),type:"combined",contents:[c.center[0],a]};c.center=[f],a.type==="heatmap"&&this.compatibilityfyStackedHeatmaps(a,f)}else c[o]||(c[o]=[]),c[o].push(a);return this.adjustLayoutToTrackSizes(this.state.views[r]),Object.keys(this.state.views).length===1&&l===0&&(this.handleZoomToData(r),this.zoomToDataExtentOnInit.add(r)),a}},{key:"compatibilityfyStackedHeatmaps",value:function(r,a){let o;a.contents.some(u=>(o=u,u.type==="heatmap"))&&(r.options.backgroundColor="transparent",r.options.showTooltip=o.options.showTooltip,r.options.showMousePosition=o.options.showMousePosition,r.options.mousePositionColor=o.options.mousePositionColor)}},{key:"storeTrackSizes",value:function(r){Co(this.state.views[r].tracks,a=>{const o=this.tiledPlots[r].trackRenderer.getTrackObject(a.uid);o&&([a.width,a.height]=o.dimensions)})}},{key:"adjustLayoutToTrackSizes",value:function(r){if(!r.layout)return;const a=this.isEditable();let o=0;a&&(o+=QPe);const{totalHeight:s}=this.calculateViewDimensions(r);o+=s;const u=this.isEditable()?10:0;o+=u;const c=this.state.rowHeight+u;this.sizeMode!==lG&&(r.layout.h=Math.ceil(o/c))}},{key:"handleCloseTrack",value:function(r,a){const{tracks:o}=this.state.views[r];this.handleUnlockValueScale(r,a);for(const s in o){const u=o[s],c=u.filter(l=>l.uid!==a);c.length===u.length?c.filter(f=>f.type==="combined").forEach(f=>{f.contents=f.contents.filter(h=>h.uid!==a)}):o[s]=c}return this.storeTrackSizes(r),this.adjustLayoutToTrackSizes(this.state.views[r]),this.setState(s=>({views:s.views})),this.state.views}},{key:"handleLockValueScale",value:function(r,a){this.setState({chooseTrackHandler:(o,s)=>this.handleValueScaleLocked(r,a,o,s)})}},{key:"combineViewAndTrackUid",value:function(r,a){const o=`${r}.${a}`;if(this.combinedUidToViewTrack[o]={view:r,track:a},this.viewTrackUidsToCombinedUid[r]){if(this.viewTrackUidsToCombinedUid[a])return this.viewTrackUidsToCombinedUid[r][a];this.viewTrackUidsToCombinedUid[r][a]=o}else this.viewTrackUidsToCombinedUid[r]={},this.viewTrackUidsToCombinedUid[r][a]=o;return o}},{key:"updateTrackLocks",value:function(r,a,o){const s=this.combineViewAndTrackUid(r,a),u=this.combineViewAndTrackUid(r,o);if(this.valueScaleLocks[s]){const c=this.valueScaleLocks[s];this.valueScaleLocks[u]=c,delete this.valueScaleLocks[s]}for(const c in this.valueScaleLocks)if(this.valueScaleLocks[c][s]){const l=this.valueScaleLocks[c][s];this.valueScaleLocks[c][u]=l,l.track=o,delete this.valueScaleLocks[c][s]}}},{key:"handleUnlockValueScale",value:function(r,a){if(this.tiledPlots[r].trackRenderer.getTrackObject(a).createdTracks){const o=Yi(this.tiledPlots[r].trackRenderer.getTrackObject(a).createdTracks);for(const s of o)this.handleUnlock(this.combineViewAndTrackUid(r,s),this.valueScaleLocks)}else this.handleUnlock(this.combineViewAndTrackUid(r,a),this.valueScaleLocks)}},{key:"handleValueScaleLocked",value:function(r,a,o,s){if(this.tiledPlots[r].trackRenderer.getTrackObject(a).createdTracks){const l=Yi(this.tiledPlots[r].trackRenderer.getTrackObject(a).createdTracks);for(const f of l)this.handleValueScaleLocked(r,f,o,s);return}if(this.tiledPlots[o].trackRenderer.getTrackObject(s).createdTracks){const l=Yi(this.tiledPlots[o].trackRenderer.getTrackObject(s).createdTracks);for(const f of l)this.handleValueScaleLocked(r,a,o,f);return}const u=this.combineViewAndTrackUid(r,a),c=this.combineViewAndTrackUid(o,s);this.addLock(u,c,this.valueScaleLocks,l=>this.combinedUidToViewTrack[l]),this.syncValueScales(r,a),this.setState({chooseTrackHandler:null})}},{key:"addCallbacks",value:function(r,a){const o=this.getTrackInfo(a.type);if(a.type==="viewport-projection-center"||a.type==="viewport-projection-horizontal"||a.type==="viewport-projection-vertical"||o&&o.projection){const s=a.fromViewUid;a.registerViewportChanged=(u,c)=>this.addScalesChangedListener(s,u,c),a.removeViewportChanged=u=>this.removeScalesChangedListener(s,u),a.setDomainsCallback=(u,c)=>{if(!s){this.projectionXDomains[r]||(this.projectionXDomains[r]={}),this.projectionYDomains[r]||(this.projectionYDomains[r]={}),(a.type==="viewport-projection-horizontal"||a.type==="viewport-projection-center")&&(this.projectionXDomains[r][a.uid]=u),(a.type==="viewport-projection-vertical"||a.type==="viewport-projection-center")&&(this.projectionYDomains[r][a.uid]=c),this.triggerViewChangeDb();return}const l=Et().domain(u).range(this.xScales[s].range()),f=Et().domain(c).range(this.yScales[s].range()),[h,d,p]=Qn(l,f);this.setCenters[s](h,d,p,!1);let m=!1,g=!1;r in this.zoomLocks&&(m=s in this.zoomLocks[r]),m&&this.handleUnlock(r,this.zoomLocks),r in this.locationLocks&&(g=s in this.locationLocks[r]),g&&this.handleUnlock(r,this.locationLocks),this.handleScalesChanged(s,l,f,!0),m&&this.addLock(r,s,this.zoomLocks,this.viewScalesLockData),g&&this.addLock(r,s,this.locationLocks,this.viewScalesLockData)}}}},{key:"validateLocks",value:function(r){const a=[];for(const o of Yi(r))(!r[o]||!r[o][o])&&a.push(o);for(const o of a)r[o]&&(console.warn(`View ${o} not present in lock group. Removing...`),this.handleUnlock(o,r),delete r[o])}},{key:"deserializeLocationLocks",value:function(r){if(this.locationLocks={},r.locationLocks)for(const a of Yi(r.locationLocks.locksByViewUid))if(typeof r.locationLocks.locksByViewUid[a]!="object")this.locationLocks[a]=r.locationLocks.locksDict[r.locationLocks.locksByViewUid[a]];else{if("x"in r.locationLocks.locksByViewUid[a]){const o=r.locationLocks.locksDict[r.locationLocks.locksByViewUid[a].x.lock];this.locationLocksAxisWise.x[a]={lock:o,axis:r.locationLocks.locksByViewUid[a].x.axis}}if("y"in r.locationLocks.locksByViewUid[a]){const o=r.locationLocks.locksDict[r.locationLocks.locksByViewUid[a].y.lock];this.locationLocksAxisWise.y[a]={lock:o,axis:r.locationLocks.locksByViewUid[a].y.axis}}}this.validateLocks(this.locationLocks)}},{key:"deserializeZoomLocks",value:function(r){if(this.zoomLocks={},r.zoomLocks)for(const a of Yi(r.zoomLocks.locksByViewUid))this.zoomLocks[a]=r.zoomLocks.locksDict[r.zoomLocks.locksByViewUid[a]];this.validateLocks(this.zoomLocks)}},{key:"deserializeValueScaleLocks",value:function(r){if(this.valueScaleLocks={},r.valueScaleLocks)for(const a of Yi(r.valueScaleLocks.locksByViewUid))this.valueScaleLocks[a]=r.valueScaleLocks.locksDict[r.valueScaleLocks.locksByViewUid[a]]}},{key:"serializeLocks",value:function(r){const a={},o={};for(const s of Yi(r)){let u=r[s]&&r[s].uid;u||(u=Pt.nice()),r[s].uid=u,a[u]=r[s],o[s]=r[s].uid}return{locksByViewUid:o,locksDict:a}}},{key:"getViewsAsJson",value:function(){const r=JSON.parse(JSON.stringify(this.state.viewConfig));return r.views=Object.values(this.state.views).map(a=>{const o=JSON.parse(JSON.stringify(a));return Co(o.tracks,s=>{if(s.server){const u=lX(s.server,{});if(!u.hostname.length){const c=window.location.host,{protocol:l}=window.location,f=`${l}//${c}${u.pathname}`;s.server=f}}(s.type==="viewport-projection-center"||s.type==="viewport-projection-horizontal")&&this.projectionXDomains[a.uid]&&this.projectionXDomains[a.uid][s.uid]&&(s.projectionXDomain=this.projectionXDomains[a.uid][s.uid]),(s.type==="viewport-projection-center"||s.type==="viewport-projection-vertical")&&this.projectionYDomains[a.uid]&&this.projectionYDomains[a.uid][s.uid]&&(s.projectionYDomain=this.projectionYDomains[a.uid][s.uid]),delete s.name,delete s.position,delete s.header,delete s.description,delete s.created,delete s.project,delete s.project_name,delete s.serverUidKey,delete s.uuid,delete s.private,delete s.maxZoom,delete s.coordSystem,delete s.coordSystem2,delete s.datatype,delete s.maxWidth,delete s.datafile,delete s.binsPerDimension,delete s.resolutions,delete s.aggregationModes}),o.uid=a.uid,o.initialXDomain=this.xScales[a.uid].domain(),o.initialYDomain=this.yScales[a.uid].domain(),delete o.layout.i,o}),r.zoomLocks=this.serializeLocks(this.zoomLocks),r.locationLocks=this.serializeLocks(this.locationLocks),r.valueScaleLocks=this.serializeLocks(this.valueScaleLocks),r}},{key:"getViewsAsString",value:function(){return JSON.stringify(this.getViewsAsJson(),null,2)}},{key:"handleExportViewAsJSON",value:function(){const r=this.getViewsAsString();xf("viewconf.json",r)}},{key:"handleExportViewsAsLink",value:function(r=this.state.viewConfig.exportViewUrl,a=!1){const o=new URL(r,window.location.origin),s=fetch(r,{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:`{"viewconf":${this.getViewsAsString()}}`,credentials:"same-origin"}).then(u=>{if(!u.ok)throw u;return u.json()}).catch(u=>{console.warn("err:",u)}).then(u=>({id:u.uid,url:`${o.origin}/l/?d=${u.uid}`}));return a||s.then(u=>{this.openModal(A.default.createElement(aI,{onDone:()=>{this.closeModalBound()},url:u.url}))}).catch(u=>console.error("Exporting view config as link failed:",u)),s}},{key:"handleDataDomainChanged",value:function(r,a,o){const{views:s}=this.state;if(s[r].initialXDomain=a,s[r].initialYDomain=o,this.xScales[r]=Et().domain(a),this.yScales[r]=Et().domain(o),this.zoomLocks[r]){const u=this.zoomLocks[r],c=Vi(u);for(let l=0;l<c.length;l++){const f=c[l][0];f in this.locationLocks&&(s[f].initialXDomain=a,s[f].initialYDomain=o,this.xScales[f]=Et().domain(a),this.yScales[f]=Et().domain(o))}}this.setState({views:s})}},{key:"viewPositionAvailable",value:function(r,a,o,s){const u=r+o,c=a+s;if(r+o>sG)return!1;const l=un(this.state.views);for(let f=0;f<l.length;f++){const h=l[f].layout.x,d=l[f].layout.y,p=h+l[f].layout.w,m=d+l[f].layout.h;if(r<p&&u>h&&a<m&&c>d)return!1}return!0}},{key:"handleAddView",value:function(r){const a=un(this.state.views),o=r,s=[];r.layout.w===12&&(r.layout.w=6);for(let l=0;l<a.length;l++){let f=a[l].layout.x+a[l].layout.w,h=a[l].layout.y;this.viewPositionAvailable(f,h,r.layout.w,r.layout.h)&&s.push([f,h]),f=a[l].layout.x,h=a[l].layout.y+a[l].layout.h,this.viewPositionAvailable(f,h,r.layout.w,r.layout.h)&&s.push([f,h])}s.sort((l,f)=>{const h=l[1]-f[1];return h===0?l[0]-f[0]:h});const u=JSON.stringify(o),c=JSON.parse(u);c.initialXDomain=this.xScales[c.uid].domain(),c.initialYDomain=this.yScales[c.uid].domain(),[[c.layout.x,c.layout.y]]=s,c.uid=Pt.nice(),c.layout.i=c.uid,Co(c.tracks,l=>{this.addCallbacks(c.uid,l)}),this.setState(l=>{const f=JSON.parse(JSON.stringify(l.views));return f[c.uid]=c,{views:f}})}},{key:"handleSelectedAssemblyChanged",value:function(r,a,o,s){const{views:u}=this.state;u[r].genomePositionSearchBox.chromInfoId=a,u[r].genomePositionSearchBox.autocompleteId=o,u[r].genomePositionSearchBox.autocompleteServer=s}},{key:"createGenomePostionSearchBoxEntry",value:function(r,a){let o=r;const s={autocompleteServer:db,chromInfoServer:db,visible:!1};return o||(o=JSON.parse(JSON.stringify(s))),o.autocompleteServer||(o.autocompleteServer=s.autocompleteServer),o.chromInfoId||(o.chromInfoId=a),o.chromInfoServer||(o.chromInfoServer=s.chromInfoServer),o.visible||(o.visible=!1),o}},{key:"handleTogglePositionSearchBox",value:function(r){const a=this.state.views[r];a.genomePositionSearchBoxVisible=!a.genomePositionSearchBoxVisible;const o={};Co(a.tracks,c=>{c.coordSystem&&(o[c.coordSystem]||(o[c.coordSystem]=0),o[c.coordSystem]+=1)});const s=Vi(o).sort((c,l)=>l[1]-c[1]);let u="hg19";s.length&&(u=s[0][0]),a.genomePositionSearchBox=this.createGenomePostionSearchBoxEntry(a.genomePositionSearchBox,u),a.genomePositionSearchBox.visible=!a.genomePositionSearchBox.visible,this.refreshView(),this.setState({configMenuUid:null})}},{key:"handleTrackOptionsChanged",value:function(r,a,o){const s=this.state.views[r],u=Ci(s.tracks,a);!u||(u.options=Object.assign(u.options,o),this.mounted&&(this.setState(c=>({views:c.views})),this.adjustSplitHeatmapTrackOptions(u,o,s.tracks,r)))}},{key:"adjustSplitHeatmapTrackOptions",value:function(r,a,o,s){r.type==="heatmap"&&(a.extent==="upper-right"&&o.center[0].type==="combined"&&o.center[0].contents.length>1&&o.center[0].contents.some(u=>{if(u.type==="heatmap"&&u.uid!==r.uid&&u.options.extent!=="lower-left"){const c={...u.options,extent:"lower-left",labelPosition:"bottomLeft",colorbarPosition:"bottomLeft"},l={...a,labelPosition:"topRight",colorbarPosition:"topRight"};return this.handleTrackOptionsChanged(s,u.uid,c),this.handleTrackOptionsChanged(s,r.uid,l),!0}return!1}),a.extent==="lower-left"&&a.extent==="lower-left"&&o.center[0].type==="combined"&&o.center[0].contents.length>1&&o.center[0].contents.some(u=>{if(u.type==="heatmap"&&u.uid!==r.uid&&u.options.extent!=="upper-right"){const c={...u.options,extent:"upper-right",labelPosition:"topRight",colorbarPosition:"topRight"},l={...a,labelPosition:"bottomLeft",colorbarPosition:"bottomLeft"};return this.handleTrackOptionsChanged(s,u.uid,c),this.handleTrackOptionsChanged(s,r.uid,l),!0}return!1}))}},{key:"handleViewOptionsChanged",value:function(r,a){const o=this.state.views[r];!o||(o.options=Object.assign(o.options||{},a),this.mounted&&this.setState(s=>({views:s.views})))}},{key:"isTrackValid",value:function(r,a){return!(r.type==="viewport-projection-center"&&!a.has(r.fromViewUid))}},{key:"removeInvalidTracks",value:function(r){const a=new Set(Yi(r));for(const o of un(r))for(const s of["left","top","center","right","bottom"])o.tracks&&o.tracks.hasOwnProperty(s)&&(o.tracks[s]=o.tracks[s].filter(u=>this.isTrackValid(u,a)),o.tracks[s].forEach(u=>{u.type==="combined"&&(u.contents=u.contents.filter(c=>this.isTrackValid(c,a)))}));return r}},{key:"processViewConfig",value:function(r){let{views:a}=r,o={};return(!r.views||r.views.length===0)&&(console.warn("No views provided in viewConfig"),a=[{editable:!0,tracks:{}}]),a.forEach(s=>{s.tracks&&uR(s.tracks),s.uid||(s.uid=Pt.nice()),o[s.uid]=s,this.zoomToDataExtentOnInit.has(s.uid)&&this.zoomToDataExtentOnInit.delete(s.uid),s.initialXDomain?(s.initialXDomain[0]=+s.initialXDomain[0],s.initialXDomain[1]=+s.initialXDomain[1]):(s.initialXDomain=[0,100],this.zoomToDataExtentOnInit.add(s.uid)),s.initialYDomain?(s.initialXDomain[0]=+s.initialXDomain[0],s.initialXDomain[1]=+s.initialXDomain[1]):s.initialYDomain=[s.initialXDomain[0],s.initialXDomain[1]],this.xScales[s.uid]||(this.xScales[s.uid]=Et().domain(s.initialXDomain)),this.yScales[s.uid]||(this.yScales[s.uid]=Et().domain(s.initialYDomain)),Co(s.tracks,u=>{if(u.uid||(u.uid=Pt.nice()),this.addCallbacks(s.uid,u),this.addDefaultTrackOptions(u),u.contents)for(const c of u.contents)this.addDefaultTrackOptions(c)}),s.layout?s.layout.i=s.uid:s.layout=this.generateViewLayout(s)}),this.deserializeZoomLocks(r),this.deserializeLocationLocks(r),this.deserializeValueScaleLocks(r),o=this.removeInvalidTracks(o),o}},{key:"handleWindowFocused",value:function(){}},{key:"rangeSelectionHandler",value:function(r){this.rangeSelection=r,this.apiPublish("rangeSelection",r)}},{key:"offViewChange",value:function(r){this.viewChangeListener.splice(r,1)}},{key:"onViewChange",value:function(r){return this.viewChangeListener.push(r)-1}},{key:"triggerViewChange",value:function(){this.viewChangeListener.forEach(r=>r(this.getViewsAsString()))}},{key:"getGenomeLocation",value:function(r){return Cb.get(this.state.views[r].chromInfoPath).then(a=>MR(this.xScales[r],this.yScales[r],a))}},{key:"offLocationChange",value:function(r,a){this.removeScalesChangedListener(r,a)}},{key:"zoomTo",value:function(r,a,o,s,u,c){if(!(r in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(Number.isNaN(+a)||Number.isNaN(+o)){const d=[a,o].join(", ");console.warn([`Invalid coordinates (${d}). All coordinates need to be numbers
        and should represent absolute coordinates (not chromosome
        coordinates).`].join(" "));return}(Number.isNaN(+s)||Number.isNaN(+u)||s===null||u===null)&&(s=a,u=o);const[l,f,h]=Qn(this.xScales[r].copy().domain([a,o]),this.yScales[r].copy().domain([s,u]));this.setCenters[r](l,f,h,!1,c)}},{key:"zoomToGene",value:function(r,a,o,s){if(!(r in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(!this.state.views[r].genomePositionSearchBox||!this.state.views[r].genomePositionSearchBox.autocompleteServer||!this.state.views[r].genomePositionSearchBox.autocompleteId||!this.state.views[r].chromInfoPath){console.warn("Please set chromInfoPath, autocompleteServer, and autocompleteId to use the zoomToGene API");return}this.suggestGene(r,a,u=>{if(u){const c=u.find(l=>l.geneName.toLowerCase()===a.toLowerCase());if(c){const{chr:l,txStart:f,txEnd:h}=c;io(this.state.views[r].chromInfoPath,d=>{const p=d.chrToAbs([l,f])-o,m=d.chrToAbs([l,h])+o,[g,v,E]=Qn(this.xScales[r].copy().domain([p,m]),this.yScales[r].copy().domain([p,m]));this.setCenters[r](g,v,E,!1,s)},this.pubSub)}else console.warn(`Couldn't find the gene symbol: ${a}`)}})}},{key:"suggestGene",value:function(r,a,o){if(!(r in this.setCenters))throw Error(`Invalid viewUid. Current uuids: ${Object.keys(this.setCenters).join(",")}`);if(!this.state.views[r].genomePositionSearchBox||!this.state.views[r].genomePositionSearchBox.autocompleteServer||!this.state.views[r].genomePositionSearchBox.autocompleteId){console.warn("Please set autocompleteServer and autocompleteId to use the suggestGene API");return}const s=this.state.views[r].genomePositionSearchBox.autocompleteServer,u=this.state.views[r].genomePositionSearchBox.autocompleteId,c=`${s}/suggest/?d=${u}&ac=${a.toLowerCase()}`;Xe.json(c,La,this.pubSub).then(l=>{o(l)}).catch(l=>console.error(l))}},{key:"onLocationChange",value:function(r,a,o){const s=Object.keys(this.state.views);if(!s.length)return this.unsetOnLocationChange.push({viewId:r,callback:a,callbackId:o}),null;if(r=typeof r>"u"&&s.length===1?s[0]:r,typeof r>"u"||s.indexOf(r)===-1)return console.error("onLocationChange either missing a viewId or passed an invalid viewId: ",r),null;const u=this.state.views[r],c=(f,h)=>{a({xDomain:f.domain(),yDomain:h.domain(),xRange:f.range(),yRange:h.range()})};let l=1;return this.scalesChangedListeners[u.uid]&&(l=Object.keys(this.scalesChangedListeners[u.uid]).filter(f=>f.indexOf(If)===0).map(f=>parseInt(f.slice(If.length+1),10)).reduce((f,h)=>Math.max(f,h),0)+1),this.addScalesChangedListener(u.uid,`${If}.${l}`,c),o&&o(`${If}.${l}`),l}},{key:"getTiledPlotAtPosition",value:function(r,a){let o;const s=un(this.state.views);for(let u=0;u<s.length;u++){const c=this.tiledPlots[s[u].uid],l=this.tiledAreasDivs[s[u].uid].getBoundingClientRect(),{top:f,left:h}=l,d=f+l.height,p=h+l.width,m=r>=h&&r<=p,g=a>=f&&a<=d;if(m&&g){o=c;break}}return o}},{key:"mouseMoveHandler",value:function(r){if(!this.topDiv||this.state.modal)return;const a=r.clientX,o=r.clientY,s=sn(r,this.topDiv);s[1]+=this.scrollTop;const u=this.getTiledPlotAtPosition(a,o),c=u?u.listTracksAtPosition(s[0],s[1],!0).map(m=>m.originalTrack||m):[],l=c.find(m=>!m.isAugmentationTrack),f=l?[s[0]-l.position[0],s[1]-l.position[1]]:s;let h=-1,d=-1;l&&(h=l.flipText?l._xScale.invert(f[1]):l._xScale.invert(f[0]),d=l.is2d?l._yScale.invert(f[1]):h);const p={x:s[0],y:s[1],relTrackX:l&&l.flipText?f[1]:f[0],relTrackY:l&&l.flipText?f[0]:f[1],dataX:h,dataY:d,isFrom2dTrack:!!(l&&l.is2d),isFromVerticalTrack:!!(l&&l.flipText),track:l,origEvt:r,sourceUid:this.uid,hoveredTracks:c,noHoveredTracks:c.length===0};if(this.pubSub.publish("app.mouseMove",p),this.isBroadcastMousePositionGlobally){const m={...p};m.origEvt=void 0,m.track=void 0,m.hoveredTracks=void 0,delete m.origEvt,delete m.track,delete m.hoveredTracks,ff.publish("higlass.mouseMove",m)}this.apiPublish("cursorLocation",{absX:a,absY:o,relX:p.x,relY:p.y,relTrackX:p.relTrackX,relTrackY:p.relTrackY,dataX:p.dataX,dataY:p.dataY,isFrom2dTrack:p.isFrom2dTrack,isFromVerticalTrack:p.isFromVerticalTrack}),this.showHoverMenu(p)}},{key:"getMinMaxValue",value:function(r,a,o,s){const u=Mf(this.tiledPlots,r,a);if(!u){console.warn(`Track with ID: ${a} not found!`);return}if(!u.minVisibleValueInTiles||!u.maxVisibleValueInTiles){console.warn(`Track ${a} doesn't support the retrieval of min or max values.`);return}return o&&u.getAggregatedVisibleValue?[u.getAggregatedVisibleValue("min"),u.getAggregatedVisibleValue("max")]:[u.minVisibleValueInTiles(s),u.maxVisibleValueInTiles(s)]}},{key:"showHoverMenu",value:function(r){const a=r.track&&r.track.getMouseOverHtml?r.track.getMouseOverHtml(r.relTrackX,r.relTrackY):"";if(r.track!==this.prevMouseHoverTrack&&this.prevMouseHoverTrack&&this.prevMouseHoverTrack.stopHover&&this.prevMouseHoverTrack.stopHover(),this.prevMouseHoverTrack=r.track,this.zooming)return;const o=a&&a.length?[1]:[];let s=xt("body").selectAll(".track-mouseover-menu").data(o);s.exit().remove(),s.enter().append("div").classed("track-mouseover-menu",!0).classed(zh["track-mouseover-menu"],!0),s=xt("body").selectAll(".track-mouseover-menu");const u=sn(r.origEvt,xt("body").node()),c=[u[0]-window.scrollX,u[1]-window.scrollY];if(s.style("left",`${c[0]}px`).style("top",`${c[1]}px`),!s.node())return;const l=s.node().getBoundingClientRect();l.x+l.width>window.innerWidth&&s.style("left",`${c[0]-l.width}px`),l.y+l.height>window.innerHeight&&s.style("top",`${c[1]-l.height}px`),s.html(a)}},{key:"hideHoverMenu",value:function(){xt("body").selectAll(".track-mouseover-menu").remove()}},{key:"closeCustomDialog",value:function(){this.setState(r=>({customDialog:null}))}},{key:"appClickHandler",value:function(r){this.apiPublish("click",r)}},{key:"canvasClickHandler",value:function(r){const a=r.nativeEvent||r,o=a.clientX,s=a.clientY,u=this.getTiledPlotAtPosition(o,s),c=sn(a,this.topDiv);c[1]+=this.scrollTop;const l=u?u.listTracksAtPosition(c[0],c[1],!0).map(v=>v.originalTrack||v):[],f=l.find(v=>!v.isAugmentationTrack),h=f?[c[0]-f.position[0],c[1]-f.position[1]]:c,d=f&&f.flipText?h[1]:h[0],p=f&&f.flipText?h[0]:h[1];for(const v of this.iterateOverTracks()){const E=Mf(this.tiledPlots,v.viewId,v.trackId);E.respondsToPosition(c[0],c[1])||E.clickOutside()}const m=[];for(const v of l)if(v.childTracks){for(const E of v.childTracks)m.push({trackUid:E.context.trackUid,viewUid:E.context.viewUid,trackType:E.context.trackType,data:E.click(d,p,r)});m.push({trackUid:v.context.trackUid,viewUid:v.context.viewUid,trackType:v.context.trackType,data:{type:"generic",event:r}})}else m.push({trackUid:v.context.trackUid,viewUid:v.context.viewUid,trackType:v.context.trackType,data:v.click(d,p,r)});const g=[];m.forEach((v,E)=>{const y=Mf(this.tiledPlots,v.viewUid,v.trackUid);if(typeof y.clickDialog=="function"){const T=y.clickDialog();T&&g.push(T)}}),g.length>0&&this.setState(v=>({customDialog:g})),this.pubSub.publish("app.click",m)}},{key:"mouseMoveZoomHandler",value:function(r){this.apiPublish("mouseMoveZoom",r)}},{key:"geneSearchHandler",value:function(r){this.apiPublish("geneSearch",r)}},{key:"mouseDownHandler",value:function(r){}},{key:"onScrollHandler",value:function(){this.props.options.sizeMode===um&&(this.scrollTop=this.scrollContainer.scrollTop,this.pixiStage.y=-this.scrollTop,this.pubSub.publish("app.scroll",this.scrollTop),this.animate())}},{key:"setTrackValueScaleLimits",value:function(r,a,o,s){const u=Mf(this.tiledPlots,r,a);if(!u){console.warn(`Could't find track: ${a}`);return}u.setFixedValueScaleMin&&u.setFixedValueScaleMax?(u.setFixedValueScaleMin(o),u.setFixedValueScaleMax(s),u.rerender(u.options,!0),u.animate()):console.warn("Track doesn't support fixed value scales.")}},{key:"setChromInfo",value:function(r,a){io(r,o=>{this.chromInfo=o,a()},this.pubSub)}},{key:"onMouseLeaveHandler",value:function(){this.pubSub.publish("app.mouseLeave"),this.hideHoverMenu(),this.animate()}},{key:"onBlurHandler",value:function(){this.animate()}},{key:"isZoomFixed",value:function(r){return this.props.zoomFixed||this.props.options.zoomFixed||this.state.viewConfig.zoomFixed||this.props.options.sizeMode===um||r&&r.zoomFixed}},{key:"trackDimensionsModifiedHandler",value:function(r){const a=this.state.views[r.viewId];if(!a)return;const o=Ci(a.tracks,r.trackId);!o||(r.height!==void 0&&(o.height=r.height),r.width!==void 0&&(o.width=r.width),this.adjustLayoutToTrackSizes(a),this.setState(s=>({views:s.views})))}},{key:"wheelHandler",value:function(r){if(this.state.modal||this.props.options.sizeMode===um)return;const a=r.nativeEvent||r,o=r.target===this.canvasElement;if(!SR(a.target,this.topDiv)||this.isZoomFixed())return;const s=a.clientX,u=a.clientY,c=this.getTiledPlotAtPosition(s,u);if(this.apiStack.wheel&&this.apiStack.wheel.length>0){const l=sn(a,this.topDiv);l[1]+=this.scrollTop;const f=c?c.listTracksAtPosition(l[0],l[1],!0).map(m=>m.originalTrack||m):[],h=f.find(m=>!m.isAugmentationTrack),d=h?[l[0]-h.position[0],l[1]-h.position[1]]:l,p={x:l[0],y:l[1],relTrackX:h&&h.flipText?d[1]:d[0],relTrackY:h&&h.flipText?d[0]:d[1],track:h,origEvt:a,sourceUid:this.uid,hoveredTracks:f,noHoveredTracks:f.length===0};this.apiPublish("wheel",p)}if(a.forwarded||o){r.stopPropagation(),r.preventDefault();return}if(r.preventDefault(),c){const{trackRenderer:l}=c;a.forwarded=!0,a&&(Hg(a,l.eventTracker),a.preventDefault())}}},{key:"render",value:function(){this.tiledAreasDivs={},this.tiledAreas=A.default.createElement("div",{className:zh["tiled-area"]}),this.mounted&&(this.tiledAreas=un(this.state.views).map(l=>{const f=l.uid===this.state.addTrackPositionMenuUid?this.state.addTrackPositionMenuPosition:null;let h=null;if(this.state.chooseViewHandler){let g="transparent";this.state.mouseOverOverlayUid===l.uid&&(g="green"),h=A.default.createElement("div",{className:"tiled-plot-overlay",onClick:()=>this.state.chooseViewHandler(l.uid),onMouseEnter:()=>this.handleOverlayMouseEnter(l.uid),onMouseLeave:()=>this.handleOverlayMouseLeave(l.uid),onMouseMove:()=>this.handleOverlayMouseEnter(l.uid),style:{position:"absolute",width:"100%",height:"100%",background:g,opacity:.3,zIndex:1}})}const d=A.default.createElement(tOe,{key:`tp${l.uid}`,ref:g=>{this.tiledPlots[l.uid]=g},addTrackPosition:this.state.addTrackPositionView===l.uid?this.state.addTrackPosition:null,addTrackPositionMenuPosition:f,canvasElement:this.state.canvasElement,chooseTrackHandler:this.state.chooseTrackHandler?g=>this.state.chooseTrackHandler(l.uid,g):null,customDialog:this.state.customDialog,closeCustomDialog:()=>this.closeCustomDialog(),chromInfoPath:l.chromInfoPath,disableTrackMenu:this.isTrackMenuDisabled(),draggingHappening:this.state.draggingHappening!==null,editable:this.isEditable(),getLockGroupExtrema:g=>this.getLockGroupExtrema(l.uid,g),initialXDomain:l.initialXDomain,initialYDomain:l.initialYDomain,isShowGlobalMousePosition:this.isShowGlobalMousePosition,isValueScaleLocked:g=>this.isValueScaleLocked(l.uid,g),marginBottom:this.viewMarginBottom,marginLeft:this.viewMarginLeft,marginRight:this.viewMarginRight,marginTop:this.viewMarginTop,metaTracks:l.metaTracks,mouseTool:this.state.mouseTool,onChangeTrackData:(g,v)=>this.handleChangeTrackData(l.uid,g,v),onChangeTrackType:(g,v)=>this.handleChangeTrackType(l.uid,g,v),onCloseTrack:g=>this.handleCloseTrack(l.uid,g),onDataDomainChanged:(g,v)=>this.handleDataDomainChanged(l.uid,g,v),onLockValueScale:g=>this.handleLockValueScale(l.uid,g),onMouseMoveZoom:this.mouseMoveZoomHandler.bind(this),onNewTilesLoaded:g=>this.handleNewTilesLoaded(l.uid,g),onNoTrackAdded:this.handleNoTrackAdded.bind(this),onRangeSelection:this.rangeSelectionHandler.bind(this),onResizeTrack:this.triggerViewChangeDb,onScalesChanged:(g,v)=>this.handleScalesChanged(l.uid,g,v),onTrackOptionsChanged:(g,v)=>this.handleTrackOptionsChanged(l.uid,g,v),onTrackPositionChosen:this.handleTrackPositionChosen.bind(this),onTracksAdded:(g,v,E)=>this.handleTracksAdded(l.uid,g,v,E),onUnlockValueScale:g=>this.handleUnlockValueScale(l.uid,g),onValueScaleChanged:g=>this.syncValueScales(l.uid,g),overlays:l.overlays,paddingBottom:this.viewPaddingBottom,paddingLeft:this.viewPaddingLeft,paddingRight:this.viewPaddingRight,paddingTop:this.viewPaddingTop,pixiRenderer:this.pixiRenderer,pixiStage:this.pixiStage,pluginDataFetchers:this.pluginDataFetchers,pluginTracks:this.pluginTracks,rangeSelection1dSize:this.state.rangeSelection1dSize,rangeSelectionToInt:this.state.rangeSelectionToInt,registerDraggingChangedListener:g=>this.addDraggingChangedListener(l.uid,l.uid,g),removeDraggingChangedListener:g=>this.removeDraggingChangedListener(l.uid,l.uid,g),setCentersFunction:g=>{this.setCenters[l.uid]=g},svgElement:this.state.svgElement,tracks:l.tracks,trackSourceServers:this.state.viewConfig.trackSourceServers,uid:l.uid,verticalMargin:this.verticalMargin,viewOptions:l.options,xDomainLimits:l.xDomainLimits,yDomainLimits:l.yDomainLimits,zoomable:!this.isZoomFixed(l),zoomLimits:this.calculateZoomLimits(l,l.initialXDomain),zoomToDataExtentOnInit:()=>this.zoomToDataExtentOnInit.has(l.uid)}),p=(g,v)=>l.genomePositionSearchBox?A.default.createElement(bOe,{key:`gpsb${l.uid}`,ref:E=>{this.genomePositionSearchBoxes[l.uid]=E},autocompleteId:l.genomePositionSearchBox.autocompleteId,autocompleteServer:l.genomePositionSearchBox.autocompleteServer,chromInfoId:l.genomePositionSearchBox.chromInfoId,chromInfoPath:l.genomePositionSearchBox.chromInfoPath,chromInfoServer:l.genomePositionSearchBox.chromInfoServer,hideAvailableAssemblies:l.genomePositionSearchBox.hideAvailableAssemblies,isFocused:g,onFocus:v,onGeneSearch:this.geneSearchHandler.bind(this),onSelectedAssemblyChanged:(E,y,T)=>this.handleSelectedAssemblyChanged(l.uid,E,y,T),registerViewportChangedListener:E=>this.addScalesChangedListener(l.uid,l.uid,E),removeViewportChangedListener:()=>this.removeScalesChangedListener(l.uid,l.uid),setCenters:(E,y,T,b)=>this.setCenters[l.uid](E,y,T,!1,b),trackSourceServers:this.state.viewConfig.trackSourceServers,twoD:!!(l.tracks.left.length||l.tracks.right.length||l.tracks.center.length)}):null,m=this.isEditable()&&!this.isViewHeaderDisabled()&&!this.state.viewConfig.hideHeader?A.default.createElement(AOe,{ref:g=>{this.viewHeaders[l.uid]=g},getGenomePositionSearchBox:p,isGenomePositionSearchBoxVisible:l.genomePositionSearchBox&&l.genomePositionSearchBox.visible,mouseTool:this.state.mouseTool,onAddView:()=>this.handleAddView(l),onClearView:()=>this.handleClearView(l.uid),onCloseView:()=>this.handleCloseView(l.uid),onEditViewConfig:this.handleEditViewConfigBound,onExportPNG:this.handleExportPNG.bind(this),onExportSVG:this.handleExportSVG.bind(this),onExportViewsAsJSON:this.handleExportViewAsJSON.bind(this),onExportViewsAsLink:this.handleExportViewsAsLink.bind(this),onLockLocation:g=>this.handleYankFunction(g,this.handleLocationLockChosen.bind(this)),onLockZoom:g=>this.handleYankFunction(g,this.handleZoomLockChosen.bind(this)),onLockZoomAndLocation:g=>this.handleYankFunction(g,(v,E)=>{this.handleZoomLockChosen(v,E),this.handleLocationLockChosen(v,E)}),onProjectViewport:this.handleProjectViewport.bind(this),onTakeAndLockZoomAndLocation:g=>{this.handleYankFunction(g,(v,E)=>{this.handleZoomYanked(v,E),this.handleLocationYanked(v,E),this.handleZoomLockChosen(v,E),this.handleLocationLockChosen(v,E)})},onTogglePositionSearchBox:this.handleTogglePositionSearchBox.bind(this),onTrackPositionChosen:g=>this.handleTrackPositionChosen(l.uid,g),onUnlockLocation:g=>this.handleUnlock(g,this.locationLocks),onUnlockZoom:g=>this.handleUnlock(g,this.zoomLocks),onUnlockZoomAndLocation:g=>{this.handleUnlock(g,this.zoomLocks),this.handleUnlock(g,this.locationLocks)},onViewOptionsChanged:g=>this.handleViewOptionsChanged(l.uid,g),onYankLocation:g=>this.handleYankFunction(g,this.handleLocationYanked.bind(this)),onYankZoom:g=>this.handleYankFunction(g,this.handleZoomYanked.bind(this)),onYankZoomAndLocation:g=>this.handleYankFunction(g,(v,E)=>{this.handleZoomYanked(v,E),this.handleLocationYanked(v,E)}),onZoomToData:g=>this.handleZoomToData(g),viewUid:l.uid}):null;return A.default.createElement("div",{key:l.uid,ref:g=>{this.tiledAreasDivs[l.uid]=g},className:zh["tiled-area"]},m,d,h)}));let r=this.mounted?Object.values(this.state.views).filter(l=>l.layout).map(l=>l.layout):[];r=JSON.parse(JSON.stringify(r));const a=this.isEditable()?VP:0,o=this.isEditable()?YP:0,s=+this.props.options.containerPaddingX>=0?+this.props.options.containerPaddingX:a,u=+this.props.options.containerPaddingY>=0?+this.props.options.containerPaddingY:o,c=A.default.createElement(Yq,{ref:l=>{this.gridLayout=l},cols:12,containerPadding:[s,u],draggableHandle:`.${ji["multitrack-header-grabber"]}`,isDraggable:this.isEditable(),isResizable:this.isEditable(),layout:r,margin:this.isEditable()?[10,10]:[0,0],measureBeforeMount:!1,onBreakpointChange:this.onBreakpointChange.bind(this),onDragStart:this.handleDragStart.bind(this),onDragStop:this.handleDragStop.bind(this),onLayoutChange:this.handleLayoutChange.bind(this),onResize:this.resizeHandler.bind(this),rowHeight:this.state.rowHeight,useCSSTransforms:this.mounted,verticalCompact:this.state.viewConfig.compactLayout,width:this.state.width},this.tiledAreas);return A.default.createElement("div",{key:this.uid,ref:l=>{this.topDiv=l},className:qt("higlass",{"higlass-dark-theme":this.theme===pn,"higlass-container-overflow":this.props.options.sizeMode===uG||this.props.options.sizeMode===um}),onMouseLeave:this.onMouseLeaveHandlerBound,onMouseMove:this.mouseMoveHandlerBound},A.default.createElement(n0e,{value:this.pubSub},A.default.createElement(sbe,{value:this.modal},A.default.createElement(Jge,{value:this.theme},this.state.modal,A.default.createElement("canvas",{key:this.uid,ref:l=>{this.canvasElement=l},onClick:this.canvasClickHandlerBound,className:zh["higlass-canvas"]}),A.default.createElement("div",{ref:l=>{this.scrollContainer=l},className:qt("higlass-scroll-container",{"higlass-scroll-container-overflow":this.props.options.sizeMode===uG,"higlass-scroll-container-scroll":this.props.options.sizeMode===um}),onScroll:this.onScrollHandlerBound},A.default.createElement("div",{ref:l=>{this.divDrawingSurface=l},className:qt("higlass-drawing-surface",zh["higlass-drawing-surface"])},c),A.default.createElement("svg",{ref:l=>{this.svgElement=l},className:zh["higlass-svg"],style:{position:"absolute",width:"100%",height:"100%",left:0,top:0,pointerEvents:"none"}}))))))}}]),n}(A.default.Component);OI.defaultProps={options:{},zoomFixed:!1,compactLayout:!0},OI.propTypes={getApi:N.exports.func,options:N.exports.object,viewConfig:N.exports.oneOfType([N.exports.string,N.exports.object]).isRequired,zoomFixed:N.exports.bool,compactLayout:N.exports.bool};const MT=OI,cG=(e,[t,n,i,r],a)=>{a.options.colorbarPosition||(a.options.colorbarPosition="hidden"),a.options.labelPosition||(a.options.labelPosition="hidden");const o="arbitary-id",u=fG(e,{editable:!1,zoomFixed:!1,views:[{uid:o,initialXDomain:[t,n],initialYDomain:[i,r],tracks:{center:[a]},layout:{w:12,h:12,x:0,y:0,moved:!1,static:!1}}]},{sizeMode:"bounded"});return{id:o,hgApi:u}};let hG=function(e){_inherits3(n,e);var t=_createSuper3(n);function n(i){var r;return _classCallCheck3(this,n),r=t.call(this,i),r.id=`id-${Math.random()}`,r}return _createClass3(n,[{key:"componentDidMount",value:function(){this.initTrackViewer()}},{key:"shouldComponentUpdate",value:function(r){const{x:a,y:o,width:s,height:u}=r;return this.zoomTo(a,o,s,u),!1}},{key:"initTrackViewer",value:function(){const{trackConfig:r,x:a,y:o,width:s,height:u}=this.props,c=document.getElementById(this.id),{id:l,hgApi:f}=cG(c,[a,a+s,o,o+u],r);this.viewUid=l,this.viewer=f}},{key:"zoomTo",value:function(r,a,o,s){this.viewer.zoomTo(this.viewUid,r,r+o,a,a+s)}},{key:"render",value:function(){return A.default.createElement("div",{id:this.id,style:{height:"100%",width:"100%"}})}}]),n}(A.default.Component);hG.propTypes={trackConfig:N.exports.object,width:N.exports.number,height:N.exports.number,x:N.exports.number,y:N.exports.number};const eRe={SVGTrack:Cs,TiledPixiTrack:bs,HorizontalGeneAnnotationsTrack:BC},tRe=(e,t,n)=>{const i=A.default.createRef();return Un.default.render(A.default.createElement(MT,{ref:i,options:n||{},viewConfig:t}),e),i.current},fG=(e,t,n)=>tRe(e,t,n).api;Ve.ChromosomeInfo=io,Ve.HiGlassComponent=MT,Ve.HiGlassTrackComponent=hG,Ve.getTrackObjectFromHGC=Xg,Ve.mountHGComponent=SA,Ve.schema=kI,Ve.trackViewer=cG,Ve.tracks=eRe,Ve.version=jD,Ve.viewer=fG,Ve.waitForJsonComplete=dv,Ve.waitForTilesLoaded=Rd,Ve.waitForTransitionsFinished=_A,Object.defineProperties(Ve,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
